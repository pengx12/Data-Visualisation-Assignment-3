!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=1260)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(137);n.d(e,"contains",function(){return r.a}),n.d(e,"includes",function(){return r.a});var i=n(885);n.d(e,"difference",function(){return i.a});var o=n(890);n.d(e,"find",function(){return o.a});var a=n(889);n.d(e,"findIndex",function(){return a.a});var s=n(891);n.d(e,"firstValue",function(){return s.a});var u=n(894);n.d(e,"flatten",function(){return u.a});var l=n(893);n.d(e,"flattenDeep",function(){return l.a});var c=n(896);n.d(e,"getRange",function(){return c.a});var h=n(936);n.d(e,"pull",function(){return h.a});var f=n(338);n.d(e,"pullAt",function(){return f.a});var p=n(937);n.d(e,"reduce",function(){return p.a});var d=n(938);n.d(e,"remove",function(){return d.a});var v=n(943);n.d(e,"sortBy",function(){return v.a});var g=n(951);n.d(e,"union",function(){return g.a});var m=n(339);n.d(e,"uniq",function(){return m.a});var y=n(955);n.d(e,"valuesOfKey",function(){return y.a});var _=n(902);n.d(e,"head",function(){return _.a});var b=n(923);n.d(e,"last",function(){return b.a});var x=n(944);n.d(e,"startsWith",function(){return x.a});var w=n(886);n.d(e,"endsWith",function(){return w.a});var S=n(329);n.d(e,"filter",function(){return S.a});var E=n(887);n.d(e,"every",function(){return E.a});var M=n(942);n.d(e,"some",function(){return M.a});var T=n(899);n.d(e,"group",function(){return T.a});var C=n(331);n.d(e,"groupBy",function(){return C.a});var A=n(332);n.d(e,"groupToMap",function(){return A.a});var P=n(897);n.d(e,"getWrapBehavior",function(){return P.a});var k=n(956);n.d(e,"wrapBehavior",function(){return k.a});var I=n(933);n.d(e,"number2color",function(){return I.a});var O=n(934);n.d(e,"parseRadius",function(){return O.a});var j=n(880);n.d(e,"clamp",function(){return j.a});var L=n(892);n.d(e,"fixedBase",function(){return L.a});var D=n(908);n.d(e,"isDecimal",function(){return D.a});var R=n(913);n.d(e,"isEven",function(){return R.a});var B=n(915);n.d(e,"isInteger",function(){return B.a});var z=n(916);n.d(e,"isNegative",function(){return z.a});var F=n(918);n.d(e,"isNumberEqual",function(){return F.a});var N=n(919);n.d(e,"isOdd",function(){return N.a});var U=n(920);n.d(e,"isPositive",function(){return U.a});var V=n(928);n.d(e,"maxBy",function(){return V.a});var G=n(930);n.d(e,"minBy",function(){return G.a});var q=n(931);n.d(e,"mod",function(){return q.a});var H=n(948);n.d(e,"toDegree",function(){return H.a});var Y=n(949);n.d(e,"toInteger",function(){return Y.a});var X=n(950);n.d(e,"toRadian",function(){return X.a});var W=n(895);n.d(e,"forIn",function(){return W.a});var Z=n(333);n.d(e,"has",function(){return Z.a});var K=n(900);n.d(e,"hasKey",function(){return K.a});var J=n(901);n.d(e,"hasValue",function(){return J.a});var Q=n(337);n.d(e,"keys",function(){return Q.a});var $=n(335);n.d(e,"isMatch",function(){return $.a});var tt=n(340);n.d(e,"values",function(){return tt.a});var et=n(924);n.d(e,"lowerCase",function(){return et.a});var nt=n(925);n.d(e,"lowerFirst",function(){return nt.a});var rt=n(945);n.d(e,"substitute",function(){return rt.a});var it=n(953);n.d(e,"upperCase",function(){return it.a});var ot=n(954);n.d(e,"upperFirst",function(){return ot.a});var at=n(330);n.d(e,"getType",function(){return at.a});var st=n(905);n.d(e,"isArguments",function(){return st.a});var ut=n(18);n.d(e,"isArray",function(){return ut.a});var lt=n(32);n.d(e,"isArrayLike",function(){return lt.a});var ct=n(906);n.d(e,"isBoolean",function(){return ct.a});var ht=n(907);n.d(e,"isDate",function(){return ht.a});var ft=n(912);n.d(e,"isError",function(){return ft.a});var pt=n(33);n.d(e,"isFunction",function(){return pt.a});var dt=n(914);n.d(e,"isFinite",function(){return dt.a});var vt=n(66);n.d(e,"isNil",function(){return vt.a});var gt=n(917);n.d(e,"isNull",function(){return gt.a});var mt=n(56);n.d(e,"isNumber",function(){return mt.a});var yt=n(138);n.d(e,"isObject",function(){return yt.a});var _t=n(200);n.d(e,"isObjectLike",function(){return _t.a});var bt=n(108);n.d(e,"isPlainObject",function(){return bt.a});var xt=n(336);n.d(e,"isPrototype",function(){return xt.a});var wt=n(921);n.d(e,"isRegExp",function(){return wt.a});var St=n(77);n.d(e,"isString",function(){return St.a});var Et=n(43);n.d(e,"isType",function(){return Et.a});var Mt=n(922);n.d(e,"isUndefined",function(){return Mt.a});var Tt=n(909);n.d(e,"isElement",function(){return Tt.a});var Ct=n(939);n.d(e,"requestAnimationFrame",function(){return Ct.a});var At=n(881);n.d(e,"clearAnimationFrame",function(){return At.a});var Pt=n(878);n.d(e,"augment",function(){return Pt.a});var kt=n(882);n.d(e,"clone",function(){return kt.a});var It=n(883);n.d(e,"debounce",function(){return It.a});var Ot=n(929);n.d(e,"memoize",function(){return Ot.a});var jt=n(884);n.d(e,"deepMix",function(){return jt.a});var Lt=n(55);n.d(e,"each",function(){return Lt.a});var Dt=n(888);n.d(e,"extend",function(){return Dt.a});var Rt=n(904);n.d(e,"indexOf",function(){return Rt.a});var Bt=n(910);n.d(e,"isEmpty",function(){return Bt.a});var zt=n(334);n.d(e,"isEqual",function(){return zt.a});var Ft=n(911);n.d(e,"isEqualWith",function(){return Ft.a});var Nt=n(927);n.d(e,"map",function(){return Nt.a});var Ut=n(926);n.d(e,"mapValues",function(){return Ut.a});var Vt=n(201);n.d(e,"mix",function(){return Vt.a}),n.d(e,"assign",function(){return Vt.a});var Gt=n(898);n.d(e,"get",function(){return Gt.a});var qt=n(940);n.d(e,"set",function(){return qt.a});var Ht=n(935);n.d(e,"pick",function(){return Ht.a});var Yt=n(946);n.d(e,"throttle",function(){return Yt.a});var Xt=n(947);n.d(e,"toArray",function(){return Xt.a});var Wt=n(109);n.d(e,"toString",function(){return Wt.a});var Zt=n(952);n.d(e,"uniqueId",function(){return Zt.a});var Kt=n(932);n.d(e,"noop",function(){return Kt.a});var Jt=n(903);n.d(e,"identity",function(){return Jt.a});var Qt=n(941);n.d(e,"size",function(){return Qt.a});var $t=n(879);n.d(e,"Cache",function(){return $t.a})},function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function a(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})}function l(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function c(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function d(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function g(t,e,n){function r(t){c[t]&&(l[t]=function(e){return new Promise(function(n,r){h.push([t,e,n,r])>1||i(t,e)})})}function i(t,e){try{o(c[t](e))}catch(t){u(h[0][3],t)}}function o(t){t.value instanceof v?Promise.resolve(t.value.v).then(a,s):u(h[0][2],t)}function a(t){i("next",t)}function s(t){i("throw",t)}function u(t,e){t(e),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,c=n.apply(t,e||[]),h=[];return l={},r("next"),r("throw"),r("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(t){function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:v(t[e](n)),done:"return"===e}:i?i(n):n}:i}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n}function y(t){function e(e){r[e]=t[e]&&function(r){return new Promise(function(i,o){r=t[e](r),n(i,o,r.done,r.value)})}}function n(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"==typeof h?h(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r)}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}function w(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=r,n.d(e,"__assign",function(){return M}),e.__rest=i,e.__decorate=o,e.__param=a,e.__metadata=s,e.__awaiter=u,e.__generator=l,e.__exportStar=c,e.__values=h,e.__read=f,e.__spread=p,e.__spreadArrays=d,e.__await=v,e.__asyncGenerator=g,e.__asyncDelegator=m,e.__asyncValues=y,e.__makeTemplateObject=_,e.__importStar=b,e.__importDefault=x,e.__classPrivateFieldGet=w,e.__classPrivateFieldSet=S;var E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},M=function(){return M=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M.apply(this,arguments)}},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}t.exports=r},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}var i=n(206);t.exports=r},function(t,e,n){function r(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?o(t):e}var i=n(349),o=n(37);t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20);e.METADATA_KEY=r;var i=n(1105);e.Container=i.Container;var o=n(60);e.BindingScopeEnum=o.BindingScopeEnum,e.BindingTypeEnum=o.BindingTypeEnum,e.TargetTypeEnum=o.TargetTypeEnum;var a=n(1106);e.AsyncContainerModule=a.AsyncContainerModule,e.ContainerModule=a.ContainerModule;var s=n(1095);e.injectable=s.injectable;var u=n(1100);e.tagged=u.tagged;var l=n(1097);e.named=l.named;var c=n(391);e.inject=c.inject,e.LazyServiceIdentifer=c.LazyServiceIdentifer;var h=n(1098);e.optional=h.optional;var f=n(1102);e.unmanaged=f.unmanaged;var p=n(1096);e.multiInject=p.multiInject;var d=n(1101);e.targetName=d.targetName;var v=n(1099);e.postConstruct=v.postConstruct;var g=n(392);e.MetadataReader=g.MetadataReader;var m=n(84);e.id=m.id;var y=n(69);e.decorate=y.decorate;var _=n(395);e.traverseAncerstors=_.traverseAncerstors,e.taggedConstraint=_.taggedConstraint,e.namedConstraint=_.namedConstraint,e.typeConstraint=_.typeConstraint;var b=n(115);e.getServiceIdentifierAsString=b.getServiceIdentifierAsString;var x=n(1120);e.multiBindToService=x.multiBindToService},function(t,e,n){"use strict";var r=n(692),i=(n(54),n(22));n(752);n.d(e,"container",function(){return r.a}),n.d(e,"createSceneContainer",function(){return r.c}),n.d(e,"createLayerContainer",function(){return r.d}),n.d(e,"lazyInject",function(){return r.b}),n.d(e,"TYPES",function(){return i.a});var o=n(711);n.d(e,"BlendType",function(){return o.a});var a=n(712);n.d(e,"AttributeType",function(){return a.a}),n.d(e,"ScaleTypes",function(){return a.b}),n.d(e,"StyleScaleType",function(){return a.c});var s=n(746);n.n(s);n.o(s,"Scene")&&n.d(e,"Scene",function(){return s.Scene}),n.o(s,"PointLayer")&&n.d(e,"PointLayer",function(){return s.PointLayer}),n.o(s,"Popup")&&n.d(e,"Popup",function(){return s.Popup}),n.o(s,"gl")&&n.d(e,"gl",function(){return s.gl}),n.o(s,"PositionType")&&n.d(e,"PositionType",function(){return s.PositionType}),n.o(s,"CameraUniform")&&n.d(e,"CameraUniform",function(){return s.CameraUniform}),n.o(s,"CoordinateUniform")&&n.d(e,"CoordinateUniform",function(){return s.CoordinateUniform}),n.o(s,"SceneEventList")&&n.d(e,"SceneEventList",function(){return s.SceneEventList}),n.o(s,"CoordinateSystem")&&n.d(e,"CoordinateSystem",function(){return s.CoordinateSystem}),n.o(s,"MapServiceEvent")&&n.d(e,"MapServiceEvent",function(){return s.MapServiceEvent});var u=n(718);n.d(e,"MapServiceEvent",function(){return u.a});var l=n(295);n.d(e,"CoordinateUniform",function(){return l.b}),n.d(e,"CoordinateSystem",function(){return l.a});var c=n(725);n.n(c);n.o(c,"Scene")&&n.d(e,"Scene",function(){return c.Scene}),n.o(c,"PointLayer")&&n.d(e,"PointLayer",function(){return c.PointLayer}),n.o(c,"Popup")&&n.d(e,"Popup",function(){return c.Popup}),n.o(c,"gl")&&n.d(e,"gl",function(){return c.gl}),n.o(c,"PositionType")&&n.d(e,"PositionType",function(){return c.PositionType}),n.o(c,"CameraUniform")&&n.d(e,"CameraUniform",function(){return c.CameraUniform}),n.o(c,"SceneEventList")&&n.d(e,"SceneEventList",function(){return c.SceneEventList});var h=n(698);n.d(e,"CameraUniform",function(){return h.a});var f=n(706);n.n(f);n.o(f,"Scene")&&n.d(e,"Scene",function(){return f.Scene}),n.o(f,"PointLayer")&&n.d(e,"PointLayer",function(){return f.PointLayer}),n.o(f,"Popup")&&n.d(e,"Popup",function(){return f.Popup}),n.o(f,"gl")&&n.d(e,"gl",function(){return f.gl}),n.o(f,"PositionType")&&n.d(e,"PositionType",function(){return f.PositionType}),n.o(f,"SceneEventList")&&n.d(e,"SceneEventList",function(){return f.SceneEventList});var p=n(742);n.d(e,"SceneEventList",function(){return p.a});var d=n(744);n.n(d);n.o(d,"Scene")&&n.d(e,"Scene",function(){return d.Scene}),n.o(d,"PointLayer")&&n.d(e,"PointLayer",function(){return d.PointLayer}),n.o(d,"Popup")&&n.d(e,"Popup",function(){return d.Popup}),n.o(d,"gl")&&n.d(e,"gl",function(){return d.gl}),n.o(d,"PositionType")&&n.d(e,"PositionType",function(){return d.PositionType});var v=n(695);n.n(v);n.o(v,"Scene")&&n.d(e,"Scene",function(){return v.Scene}),n.o(v,"PointLayer")&&n.d(e,"PointLayer",function(){return v.PointLayer}),n.o(v,"Popup")&&n.d(e,"Popup",function(){return v.Popup}),n.o(v,"gl")&&n.d(e,"gl",function(){return v.gl}),n.o(v,"PositionType")&&n.d(e,"PositionType",function(){return v.PositionType});var g=n(694);n.n(g);n.o(g,"Scene")&&n.d(e,"Scene",function(){return g.Scene}),n.o(g,"PointLayer")&&n.d(e,"PointLayer",function(){return g.PointLayer}),n.o(g,"Popup")&&n.d(e,"Popup",function(){return g.Popup}),n.o(g,"gl")&&n.d(e,"gl",function(){return g.gl}),n.o(g,"PositionType")&&n.d(e,"PositionType",function(){return g.PositionType});var m=n(700);n.d(e,"PositionType",function(){return m.a});var y=n(701);n.n(y);n.o(y,"Scene")&&n.d(e,"Scene",function(){return y.Scene}),n.o(y,"PointLayer")&&n.d(e,"PointLayer",function(){return y.PointLayer}),n.o(y,"Popup")&&n.d(e,"Popup",function(){return y.Popup}),n.o(y,"gl")&&n.d(e,"gl",function(){return y.gl});var _=n(702);n.n(_);n.o(_,"Scene")&&n.d(e,"Scene",function(){return _.Scene}),n.o(_,"PointLayer")&&n.d(e,"PointLayer",function(){return _.PointLayer}),n.o(_,"Popup")&&n.d(e,"Popup",function(){return _.Popup}),n.o(_,"gl")&&n.d(e,"gl",function(){return _.gl});var b=n(716);n.n(b);n.o(b,"Scene")&&n.d(e,"Scene",function(){return b.Scene}),n.o(b,"PointLayer")&&n.d(e,"PointLayer",function(){return b.PointLayer}),n.o(b,"Popup")&&n.d(e,"Popup",function(){return b.Popup}),n.o(b,"gl")&&n.d(e,"gl",function(){return b.gl});var x=(n(106),n(719));n.n(x);n.o(x,"Scene")&&n.d(e,"Scene",function(){return x.Scene}),n.o(x,"PointLayer")&&n.d(e,"PointLayer",function(){return x.PointLayer}),n.o(x,"Popup")&&n.d(e,"Popup",function(){return x.Popup}),n.o(x,"gl")&&n.d(e,"gl",function(){return x.gl});var w=n(720);n.n(w);n.o(w,"Scene")&&n.d(e,"Scene",function(){return w.Scene}),n.o(w,"PointLayer")&&n.d(e,"PointLayer",function(){return w.PointLayer}),n.o(w,"Popup")&&n.d(e,"Popup",function(){return w.Popup}),n.o(w,"gl")&&n.d(e,"gl",function(){return w.gl});var S=n(721);n.n(S);n.o(S,"Scene")&&n.d(e,"Scene",function(){return S.Scene}),n.o(S,"PointLayer")&&n.d(e,"PointLayer",function(){return S.PointLayer}),n.o(S,"Popup")&&n.d(e,"Popup",function(){return S.Popup}),n.o(S,"gl")&&n.d(e,"gl",function(){return S.gl});var E=n(722);n.n(E);n.o(E,"Scene")&&n.d(e,"Scene",function(){return E.Scene}),n.o(E,"PointLayer")&&n.d(e,"PointLayer",function(){return E.PointLayer}),n.o(E,"Popup")&&n.d(e,"Popup",function(){return E.Popup}),n.o(E,"gl")&&n.d(e,"gl",function(){return E.gl});var M=n(723);n.n(M);n.o(M,"Scene")&&n.d(e,"Scene",function(){return M.Scene}),n.o(M,"PointLayer")&&n.d(e,"PointLayer",function(){return M.PointLayer}),n.o(M,"Popup")&&n.d(e,"Popup",function(){return M.Popup}),n.o(M,"gl")&&n.d(e,"gl",function(){return M.gl});var T=(n(76),n(724));n.n(T);n.o(T,"Scene")&&n.d(e,"Scene",function(){return T.Scene}),n.o(T,"PointLayer")&&n.d(e,"PointLayer",function(){return T.PointLayer}),n.o(T,"Popup")&&n.d(e,"Popup",function(){return T.Popup}),n.o(T,"gl")&&n.d(e,"gl",function(){return T.gl});var C=n(726);n.n(C);n.o(C,"Scene")&&n.d(e,"Scene",function(){return C.Scene}),n.o(C,"PointLayer")&&n.d(e,"PointLayer",function(){return C.PointLayer}),n.o(C,"Popup")&&n.d(e,"Popup",function(){return C.Popup}),n.o(C,"gl")&&n.d(e,"gl",function(){return C.gl});var A=n(727);n.n(A);n.o(A,"Scene")&&n.d(e,"Scene",function(){return A.Scene}),n.o(A,"PointLayer")&&n.d(e,"PointLayer",function(){return A.PointLayer}),n.o(A,"Popup")&&n.d(e,"Popup",function(){return A.Popup}),n.o(A,"gl")&&n.d(e,"gl",function(){return A.gl});var P=n(89);n.d(e,"gl",function(){return P.a})},function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=n},function(t,e,n){"use strict";var r=(n(838),n(834)),i=n(836);n.d(e,"p",function(){return i.a});var o=n(837);n.d(e,"j",function(){return o.a}),n.d(e,"k",function(){return o.b}),n.d(e,"l",function(){return o.c}),n.d(e,"m",function(){return o.d}),n.d(e,"n",function(){return o.e}),n.d(e,"q",function(){return o.f});var a=n(839);n.d(e,"h",function(){return a.a});var s=n(835);n.d(e,"a",function(){return s.a});var u=n(833);n.d(e,"f",function(){return u.a}),n.d(e,"g",function(){return u.b}),n.d(e,"o",function(){return u.c}),n.d(e,"r",function(){return u.d});var l=n(832);n.d(e,"c",function(){return l.a}),n.d(e,"d",function(){return l.b}),n.d(e,"e",function(){return l.c});var c=n(840);n.d(e,"b",function(){return r}),n.d(e,"i",function(){return c})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"h",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"e",function(){return u}),n.d(e,"g",function(){return l}),n.d(e,"f",function(){return c}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return p});var r;!function(t){t.FORE="fore",t.MID="mid",t.BG="bg"}(r||(r={}));var i;!function(t){t.TOP="top",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.RIGHT="right",t.RIGHT_TOP="right-top",t.RIGHT_BOTTOM="right-bottom",t.LEFT="left",t.LEFT_TOP="left-top",t.LEFT_BOTTOM="left-bottom",t.BOTTOM="bottom",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_RIGHT="bottom-right",t.NONE="none"}(i||(i={}));var o;!function(t){t.AXIS="axis",t.GRID="grid",t.LEGEND="legend",t.TOOLTIP="tooltip",t.ANNOTATION="annotation",t.OTHER="other"}(o||(o={}));var a,s={FORE:3,MID:2,BG:1};!function(t){t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_PAINT="beforepaint",t.AFTER_PAINT="afterpaint",t.BEFORE_CHANGE_DATA="beforechangedata",t.AFTER_CHANGE_DATA="afterchangedata",t.BEFORE_CLEAR="beforeclear",t.AFTER_CLEAR="afterclear",t.BEFORE_DESTROY="beforedestroy"}(a||(a={}));var u;!function(t){t.MOUSE_ENTER="plot:mouseenter",t.MOUSE_DOWN="plot:mousedown",t.MOUSE_MOVE="plot:mousemove",t.MOUSE_UP="plot:mouseup",t.MOUSE_LEAVE="plot:mouseleave",t.TOUCH_START="plot:touchstart",t.TOUCH_MOVE="plot:touchmove",t.TOUCH_END="plot:touchend",t.TOUCH_CANCEL="plot:touchcancel",t.CLICK="plot:click",t.DBLCLICK="plot:dblclick",t.CONTEXTMENU="plot:contextmenu",t.LEAVE="plot:leave",t.ENTER="plot:enter"}(u||(u={}));var l=["color","shape","size"],c="_origin",h=1,f=1,p=.25},function(t,e,n){"use strict";function r(t,e){var r=n.i(u.upperFirst)(t),i=n.i(a.__assign)(n.i(a.__assign)(n.i(a.__assign)({},c),e),{geometryType:t});return f[r]=i,i}function i(t,e,r){var i=n.i(u.upperFirst)(t),o=f[i],s=n.i(a.__assign)(n.i(a.__assign)({},h),r);return o[e]=s,s}function o(t){var e=n.i(u.upperFirst)(t);return f[e]}e.c=r,e.b=i,e.a=o;var a=n(1),s=n(312),u=n(0),l=n(102),c={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(t,e){var n=this.getShape(t);return n.getPoints?n.getPoints(e):this.getDefaultPoints(e)},getShape:function(t){var e=this[t]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getMarker:function(t,e){var r=this.getShape(t);if(!r.getMarker){var i=this.defaultShapeType;r=this.getShape(i)}var o=this.theme,a=n.i(u.get)(o,[t,"default"],{}),s=r.getMarker(e);return n.i(u.deepMix)({},a,s)},drawShape:function(t,e,n){return this.getShape(t).draw(e,n)}},h={coordinate:null,parsePath:function(t){var e=this.coordinate,r=n.i(s.b)(t);return r=e.isPolar?n.i(l.c)(e,r):n.i(l.d)(e,r)},parsePoint:function(t){return this.coordinate.convert(t)},parsePoints:function(t){var e=this.coordinate;return t.map(function(t){return e.convert(t)})},draw:function(t,e){}},f={}},function(t,e){function n(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}t.exports=n},function(t,e){function n(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}t.exports=n},function(t,e){function n(t,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}t.exports=n},function(t,e,n){"use strict";function r(t,e){var n=t.event,r=n.target,i=r.getCanvasBBox();return i.width>=e||i.height>=e?i:null}function i(t,e){var n=t.event,r=n.target,i=r.getCanvasBBox();return i.width>=e||i.height>=e?r.attr("path"):null}function o(t){var e,n=t.event,r=n.target;return r&&(e=r.get("element")),e}function a(t){var e,n=t.event,r=n.target;return r&&(e=r.get("delegateObject")),e}function s(t){var e=t.event.gEvent;return!(e&&e.fromShape&&e.toShape&&e.fromShape.get("element")===e.toShape.get("element"))}function u(t){return t&&t.component&&t.component.isList()}function l(t){return t&&t.component&&t.component.isSlider()}function c(t){var e=t.event,n=e.target;return n&&"mask"===n.get("name")}function h(t,e){if("path"===t.event.target.get("type")){var n=i(t,e);if(!n)return;return b(t.view,n)}var o=r(t,e);return o?y(t.view,o):null}function f(t,e,n){var i=r(t,n);if(!i)return null;var o=t.view,a=C(o,e,{x:i.x,y:i.y}),s=C(o,e,{x:i.maxX,y:i.maxY});return y(e,{minX:a.x,minY:a.y,maxX:s.x,maxY:s.y})}function p(t){var e=t.geometries,r=[];return n.i(k.each)(e,function(t){var e=t.elements;r=r.concat(e)}),t.views&&t.views.length&&n.i(k.each)(t.views,function(t){r=r.concat(p(t))}),r}function d(t,e,n){return p(t).filter(function(t){return g(t,e)===n})}function v(t,e){var r=t.geometries,i=[];return n.i(k.each)(r,function(t){var n=t.getElementsBy(function(t){return t.hasState(e)});i=i.concat(n)}),i}function g(t,e){var r=t.getModel(),i=r.data;return n.i(k.isArray)(i)?i[0][e]:i[e]}function m(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function y(t,e){var r=p(t),i=[];return n.i(k.each)(r,function(t){var n=t.shape,r=n.getCanvasBBox();m(e,r)&&i.push(t)}),i}function _(t){var e=[];return n.i(k.each)(t,function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}}),e}function b(t,e){var r=p(t),i=_(e);return r.filter(function(t){var e,r=t.shape;if("path"===r.get("type"))e=_(r.attr("path"));else{var o=r.getCanvasBBox();e=n.i(O.a)(o)}return L()(i,e)})}function x(t){return t.getComponents().map(function(t){return t.component})}function w(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function S(t,e){if(t.length<=2)return n.i(I.a)(t,!1);var r=t[0],i=[];n.i(k.each)(t,function(t){i.push(t.x),i.push(t.y)});var o=n.i(I.b)(i,e,null);return o.unshift(["M",r.x,r.y]),o}function E(t,e){return t.x<=e.x&&t.maxX>=e.x&&t.y<=e.y&&t.maxY>e.y}function M(t){var e=t.parent,n=null;return e&&(n=e.views.filter(function(e){return e!==t})),n}function T(t,e){return t.getCoordinate().invert(e)}function C(t,e,n){var r=T(t,n);return e.getCoordinate().convert(r)}function A(t,e,r,i){var o=!1;return n.i(k.each)(t,function(t){if(t[r]===e[r]&&t[i]===e[i])return o=!0,!1}),o}function P(t,e){var r=t.getScaleByField(e);return!r&&t.views&&n.i(k.each)(t.views,function(t){if(r=P(t,e))return!1}),r}e.p=o,e.j=a,e.t=s,e.k=u,e.n=l,e.d=c,e.e=h,e.i=f,e.g=p,e.q=d,e.s=v,e.m=g,e.r=y,e.a=x,e.c=w,e.o=S,e.b=E,e.f=M,e.u=C,e.h=A,e.l=P;var k=n(0),I=n(102),O=n(103),j=n(855),L=n.n(j)},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,i,o,a,s,u,l=n(14),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(13),g=n.n(v),m=n(15),y=(n.n(m),n(8)),_=n(304),b=(r=n.i(y.lazyInject)(y.TYPES.IGlobalConfigService),i=n.i(y.lazyInject)(y.TYPES.IShaderModuleService),o=u=function(){function t(e){f()(this,t),this.triangulation=void 0,this.layer=void 0,c()(this,"configService",a,this),c()(this,"shaderModuleService",s,this),this.rendererService=void 0,this.iconService=void 0,this.fontService=void 0,this.styleAttributeService=void 0,this.mapService=void 0,this.cameraService=void 0,this.layerService=void 0,this.layer=e,this.rendererService=e.getContainer().get(y.TYPES.IRendererService),this.styleAttributeService=e.getContainer().get(y.TYPES.IStyleAttributeService),this.mapService=e.getContainer().get(y.TYPES.IMapService),this.iconService=e.getContainer().get(y.TYPES.IIconService),this.fontService=e.getContainer().get(y.TYPES.IFontService),this.cameraService=e.getContainer().get(y.TYPES.ICameraService),this.layerService=e.getContainer().get(y.TYPES.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate()}return d()(t,[{key:"getBlend",value:function(){var t=this.layer.getLayerConfig(),e=t.blend,n=void 0===e?"normal":e;return _.a[y.BlendType[n]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}},{key:"startModelAnimate",value:function(){this.layer.getLayerConfig().animateOption.enable&&this.layer.setAnimateStartTime()}}]),t}(),a=g()(o.prototype,"configService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=g()(o.prototype,"shaderModuleService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o)},function(t,e,n){"use strict";var r=n(43);e.a=function(t){return Array.isArray?Array.isArray(t):n.i(r.a)(t,"Array")}},function(t,e,n){"use strict";function r(t,e,r,a){void 0===a&&(a="");var s=t.style,u=void 0===s?{}:s,l=t.defaultStyle,c=t.color,h=t.size,f=n.i(i.__assign)(n.i(i.__assign)({},l),u);return c&&(e&&(u.stroke||(f.stroke=c)),r&&(u.fill||(f.fill=c))),a&&n.i(o.isNil)(u[a])&&!n.i(o.isNil)(h)&&(f[a]=h),f}e.a=r;var i=n(1),o=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(499),a=n(72),s=n(26),u=n(162),l="update_status",c=["visible","tip","delegateObject"],h=["container","group","shapesMap","isRegister","isUpdating","destroyed"],f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},e.prototype.remove=function(){this.clear(),this.get("group").remove()},e.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},e.prototype.getChildComponentById=function(t){var e=this.getElementById(t);return e&&e.get("component")},e.prototype.getElementById=function(t){return this.get("shapesMap")[t]},e.prototype.getElementByLocalId=function(t){var e=this.getElementId(t);return this.getElementById(e)},e.prototype.getElementsByName=function(t){var e=[];return n.i(i.each)(this.get("shapesMap"),function(n){n.get("name")===t&&e.push(n)}),e},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},e.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var e=this.get("group");this.updateElements(t,e),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},e.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},e.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},e.prototype.setCapture=function(t){this.get("group").set("capture",t),this.set("capture",t)},e.prototype.destroy=function(){this.removeEvent(),this.remove(),t.prototype.destroy.call(this)},e.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},e.prototype.getLayoutBBox=function(){var t=this.get("group"),e=this.getInnerLayoutBBox(),r=t.getTotalMatrix();return r&&(e=n.i(a.a)(r,e)),e},e.prototype.on=function(t,e,n){return this.get("group").on(t,e,n),this},e.prototype.off=function(t,e){var n=this.get("group");return n&&n.off(t,e),this},e.prototype.emit=function(t,e){this.get("group").emit(t,e)},e.prototype.init=function(){t.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},e.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},e.prototype.delegateEmit=function(t,e){var r=this.get("group");e.target=r,r.emit(t,e),n.i(o.a)(r,t,e)},e.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},e.prototype.applyOffset=function(){var t=this.get("offsetX"),e=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:e})},e.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},e.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",n.i(s.a)(t)),t},e.prototype.addGroup=function(t,e){this.appendDelegateObject(t,e);var n=t.addGroup(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addShape=function(t,e){this.appendDelegateObject(t,e);var n=t.addShape(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addComponent=function(t,e){var i=e.id,o=e.component,a=n.i(r.__rest)(e,["id","component"]),s=new o(n.i(r.__assign)(n.i(r.__assign)({},a),{id:i,container:t,updateAutoRender:this.get("updateAutoRender")}));return s.init(),s.render(),this.get("isRegister")&&this.registerElement(s.get("group")),s},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){this.get("group").off()},e.prototype.getElementId=function(t){return this.get("id")+"-"+this.get("name")+"-"+t},e.prototype.registerElement=function(t){var e=t.get("id");this.get("shapesMap")[e]=t},e.prototype.unregisterElement=function(t){var e=t.get("id");delete this.get("shapesMap")[e]},e.prototype.moveElementTo=function(t,e){var r=n.i(a.b)(e);t.attr("matrix",r)},e.prototype.addAnimation=function(t,e,r){var o=e.attr("opacity");n.i(i.isNil)(o)&&(o=1),e.attr("opacity",0),e.animate({opacity:o},r)},e.prototype.removeAnimation=function(t,e,n){e.animate({opacity:0},n)},e.prototype.updateAnimation=function(t,e,n,r){e.animate(n,r)},e.prototype.updateElements=function(t,e){var r,o=this,a=this.get("animate"),u=this.get("animateOption"),f=t.getChildren().slice(0);n.i(i.each)(f,function(t){var f=t.get("id"),p=o.getElementById(f),d=t.get("name");if(p)if(t.get("isComponent")){var v=t.get("component"),g=p.get("component"),m=n.i(i.pick)(v.cfg,n.i(i.difference)(n.i(i.keys)(v.cfg),h));g.update(m),p.set(l,"update")}else{var y=o.getReplaceAttrs(p,t);a&&u.update?o.updateAnimation(d,p,y,u.update):p.attr(y),t.isGroup()&&o.updateElements(t,p),n.i(i.each)(c,function(e){p.set(e,t.get(e))}),n.i(s.b)(p,t),r=p,p.set(l,"update")}else{e.add(t);var _=e.getChildren();if(_.splice(_.length-1,1),r){var b=_.indexOf(r);_.splice(b+1,0,t)}else _.unshift(t);if(o.registerElement(t),t.set(l,"add"),t.get("isComponent")){var v=t.get("component");v.set("container",e)}else t.isGroup()&&o.registerNewGroup(t);if(r=t,a){var x=o.get("isInit")?u.appear:u.enter;x&&o.addAnimation(d,t,x)}}})},e.prototype.clearUpdateStatus=function(t){var e=t.getChildren();n.i(i.each)(e,function(t){t.set(l,null)})},e.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},e.prototype.getDelegateObject=function(){var t,e=this.get("name");return t={},t[e]=this,t.component=this,t},e.prototype.appendDelegateObject=function(t,e){var r=t.get("delegateObject");e.delegateObject||(e.delegateObject={}),n.i(i.mix)(e.delegateObject,r)},e.prototype.getReplaceAttrs=function(t,e){var r=t.attr(),o=e.attr();return n.i(i.each)(r,function(t,e){void 0===o[e]&&(o[e]=void 0)}),o},e.prototype.registerNewGroup=function(t){var e=this,r=t.getChildren();n.i(i.each)(r,function(t){e.registerElement(t),t.set(l,"add"),t.isGroup()&&e.registerNewGroup(t)})},e.prototype.deleteElements=function(){var t=this,e=this.get("shapesMap"),r=[];n.i(i.each)(e,function(t,e){!t.get(l)||t.destroyed?r.push([e,t]):t.set(l,null)});var o=this.get("animate"),a=this.get("animateOption");n.i(i.each)(r,function(r){var s=r[0],u=r[1];if(!u.destroyed){var l=u.get("name");if(o&&a.leave){var c=n.i(i.mix)({callback:function(){t.removeElement(u)}},a.leave);t.removeAnimation(l,u,c)}else t.removeElement(u)}delete e[s]})},e.prototype.removeElement=function(t){if(t.get("isGroup")){var e=t.get("component");e&&e.destroy()}t.remove()},e}(u.a);e.a=f},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},function(t,e,n){"use strict";function r(t){var e=n.i(x.a)(t.coordinates);return{vertices:[].concat(y()(e),y()(e),y()(e),y()(e)),indices:[0,1,2,2,3,0],size:e.length}}function i(t){var e=t.shape,n=p(e,!1);return{vertices:n.positions,indices:n.index,normals:n.normals,size:5}}function o(t){var e=n.i(x.a)(t.coordinates);return{vertices:y()(e),indices:[0],size:e.length}}function a(t){var e=t.coordinates,r=e;Array.isArray(r[0][0])&&(r=e[0]);var i=n.i(w.a)(r,!1,0);return{vertices:i.attrPos,indices:i.attrIndex,normals:i.normals,size:6}}function s(t){var e=t.coordinates,n=b.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:b()(r,o,i),vertices:r,size:i}}function u(t){var e=t.coordinates,r=n.i(S.a)(e,!0);return{vertices:r.positions,indices:r.index,normals:r.normals,size:5}}function l(t){var e=t.shape,n=d(e);return{vertices:n.positions,indices:n.index,size:3}}function c(t){var e=t.coordinates;return{vertices:[].concat(y()(e[0]),[0,0,1,e[1][0],e[0][1],0,1,1],y()(e[1]),[0,1,0],y()(e[0]),[0,0,1],y()(e[1]),[0,1,0,e[0][0],e[1][1],0,0,0]),indices:[0,1,2,3,4,5],size:5}}function h(t){for(var e=30,n=t.coordinates,r=[],i=[],o=function(t){r.push(t,1,t,n[0][0],n[0][1],n[1][0],n[1][1],t,-1,t,n[0][0],n[0][1],n[1][0],n[1][1]),t!==e-1&&i.push.apply(i,y()([0,1,2,1,3,2].map(function(e){return 2*t+e})))},a=0;a<e;a++)o(a);return{vertices:r,indices:i,size:7}}function f(t){var e=t.coordinates;2===e.length&&e.push(0);var n=(t.size,v(-1,1)),r=v(1,1),i=v(-1,-1),o=v(1,-1);return{vertices:[].concat(y()(e),y()(n),y()(e),y()(i),y()(e),y()(o),y()(e),y()(r)),indices:[0,1,2,3,0,2],size:5}}function p(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(M&&M[t])return M[t];var r=E.a[t]?E.a[t]():E.a.cylinder(),i=n.i(S.a)([r],e);return M[t]=i,i}function d(t){var e=["cylinder","triangleColumn","hexagonColumn","squareColumn"],r=E.a[t]?E.a[t]():E.a.circle();return-1===e.indexOf(t)?n.i(S.b)([r]):n.i(S.c)([r])}function v(t,e){return[(t+1)/2,(e+1)/2]}e.c=r,e.b=i,e.a=o,e.f=a,e.g=s,e.e=u,e.i=l,e.d=c,e.h=h,e.j=f;var g=n(58),m=(n.n(g),n(48)),y=n.n(m),_=(n(10),n(388)),b=n.n(_),x=(n(68),n(196)),w=n(799),S=n(757),E=n(756),M={}},function(t,e,n){"use strict";var r=n(310);n.d(e,"d",function(){return r.a});var i=n(844);n.d(e,"c",function(){return i.a});var o=n(845);n.d(e,"b",function(){return o.a});var a=n(843);n.d(e,"a",function(){return a.a})},function(t,e,n){"use strict";var r=n(0),i=function(){function t(t,e){this.context=t,this.cfg=e,t.addAction(this)}return t.prototype.applyCfg=function(t){n.i(r.assign)(this,t)},t.prototype.init=function(){this.applyCfg(this.cfg)},t.prototype.destroy=function(){this.context.removeAction(this),this.context=null},t}();e.a=i},function(t,e,n){"use strict";function r(t){var e=0,r=0,i=0,o=0;return n.i(m.isNumber)(t)?e=r=i=o=t:n.i(m.isArray)(t)&&(e=t[0],i=n.i(m.isNil)(t[1])?t[0]:t[1],o=n.i(m.isNil)(t[2])?t[0]:t[2],r=n.i(m.isNil)(t[3])?i:t[3]),[e,i,o,r]}function i(t){for(var e=t.childNodes,n=e.length,r=n-1;r>=0;r--)t.removeChild(e[r])}function o(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function a(t){var e=t.start,n=t.end,r=Math.min(e.x,n.x),i=Math.min(e.y,n.y),o=Math.max(e.x,n.x),a=Math.max(e.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}function s(t){var e=t.map(function(t){return t.x}),n=t.map(function(t){return t.y}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}function u(t,e,n,r){return{x:t,y:e,width:n,height:r,minX:t,minY:e,maxX:t+n,maxY:e+r}}function l(t,e,n){return(1-n)*t+e*n}function c(t,e,n){return{x:t.x+Math.cos(n)*e,y:t.y+Math.sin(n)*e}}function h(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function f(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY);return u(n,r,Math.min(t.maxX,e.maxX)-n,Math.min(t.maxY,e.maxY)-r)}function p(t){var e,r=t.getClip(),i=r&&r.getBBox();if(t.isGroup()){var o=1/0,a=-1/0,s=1/0,l=-1/0,c=t.getChildren();c.length>0?n.i(m.each)(c,function(t){if(t.get("visible")){if(t.isGroup()&&0===t.get("children").length)return!0;var e=p(t),n=t.applyToMatrix([e.minX,e.minY,1]),r=t.applyToMatrix([e.minX,e.maxY,1]),i=t.applyToMatrix([e.maxX,e.minY,1]),u=t.applyToMatrix([e.maxX,e.maxY,1]),c=Math.min(n[0],r[0],i[0],u[0]),h=Math.max(n[0],r[0],i[0],u[0]),f=Math.min(n[1],r[1],i[1],u[1]),d=Math.max(n[1],r[1],i[1],u[1]);c<o&&(o=c),h>a&&(a=h),f<s&&(s=f),d>l&&(l=d)}}):(o=0,a=0,s=0,l=0),e=u(o,s,a-o,l-s)}else e=t.getBBox();return i?f(e,i):e}function d(t,e){if(t.getClip()||e.getClip()){var n=e.getClip();if(!n)return void t.setClip(null);var r={type:n.get("type"),attrs:n.attr()};t.setClip(r)}}function v(t){return t+"px"}function g(t,e,n,r){var i=h(t,e),o=r/i,a=0;return"start"===n?a=0-o:"end"===n&&(a=1+o),{x:l(t.x,e.x,a),y:l(t.y,e.y,a)}}e.h=r,e.e=i,e.g=o,e.c=a,e.l=s,e.f=u,e.i=l,e.k=c,e.a=p,e.b=d,e.d=v,e.j=g;var m=n(0)},function(t,e,n){"use strict";function r(t,e,n,a){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return a},s.filter=function(n){return r(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(s.count=function(e,r){return i.setTime(+e),o.setTime(+r),t(i),t(o),Math.floor(n(i,o))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(a?function(e){return a(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}e.a=r;var i=new Date,o=new Date},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},i={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(t,e,n){"use strict";function r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function i(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}e.b=r,e.a=i},function(t,e,n){"use strict";e.a={fontFamily:'\n  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},function(t,e,n){"use strict";function r(){return window?window.devicePixelRatio:1}function i(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function o(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function a(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function s(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function u(t,e){return t[0]===e[0]&&t[1]===e[1]}e.m=r,e.f=i,e.d=o,e.h=a,e.g=s,e.k=u;var l=n(110),c=n.n(l);n.d(e,"c",function(){return c.a});var h=n(78),f=n.n(h);n.d(e,"a",function(){return f.a});var p=n(139),d=n.n(p);n.d(e,"l",function(){return d.a});var v=n(57),g=n.n(v);n.d(e,"e",function(){return g.a});var m=n(90),y=n.n(m);n.d(e,"b",function(){return y.a});var _=n(141),b=n.n(_);n.d(e,"j",function(){return b.a});var x=n(140),w=n.n(x);n.d(e,"i",function(){return w.a});var S=n(202),E=(n.n(S),n(343)),M=n.n(E);n.d(e,"o",function(){return M.a});var T=n(341),C=n.n(T);n.d(e,"n",function(){return C.a})},function(t,e,n){"use strict";var r=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};e.a=r},function(t,e,n){"use strict";var r=n(43);e.a=function(t){return n.i(r.a)(t,"Function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){"use strict";var r=n(1),i=n(38),o=n(100),a=n(40),s=n(174),u=n(28),l=n(126),c=n(173),h=n(258),f=(n.n(h),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,e)}},e.prototype.getShapeBase=function(){return l},e.prototype.getGroupBase=function(){return c.a},e.prototype.onCanvasChange=function(t){n.i(s.a)(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var r=n.i(h.getBBoxMethod)(this.get("type"));r&&(e=r(this))}if(e){var i=e.x,o=e.y,a=e.width,s=e.height,u=this.getHitLineWidth(),l=u/2,c=i-l,f=o-l;return{x:c,y:f,minX:c,minY:f,maxX:i+a+l,maxY:o+s+l,width:a+u,height:s+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},e.prototype.draw=function(t,e){var r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||n.i(a.a)(this),n.i(o.b)(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,h=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),s&&h.setAttribute(u.a.fillOpacity,s)),this.canStroke&&c>0&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),l&&h.setAttribute(u.a.strokeOpacity,l),c&&h.setAttribute(u.a.lineWidth,c))},e.prototype._setColor=function(t,e,n){var r=this.get("el");if(!n)return void r.setAttribute(u.a[e],"none");if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var i=t.find("gradient",n);i||(i=t.addGradient(n)),r.setAttribute(u.a[e],"url(#"+i+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var i=t.find("pattern",n);i||(i=t.addPattern(n)),r.setAttribute(u.a[e],"url(#"+i+")")}else r.setAttribute(u.a[e],n)},e.prototype.shadow=function(t,e){var r=this.attr(),i=e||r,a=i.shadowOffsetX,s=i.shadowOffsetY,u=i.shadowBlur,l=i.shadowColor;(a||s||u||l)&&n.i(o.c)(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&n.i(o.a)(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas"),i=r.get("el").getBoundingClientRect(),o=t+i.left,a=e+i.top,s=document.elementFromPoint(o,a);return!(!s||!s.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},e}(i.c));e.a=f},function(t,e,n){"use strict";function r(t){if(n.i(c.isEmpty)(t))return null;var e=t[0].x,r=t[0].x,i=t[0].y,o=t[0].y;return n.i(c.each)(t,function(t){e=e>t.x?t.x:e,r=r<t.x?t.x:r,i=i>t.y?t.y:i,o=o<t.y?t.y:o}),{minX:e,maxX:r,minY:i,maxY:o,centerX:(e+r)/2,centerY:(i+o)/2}}function i(t,e,n,r){return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}function o(t,e,n,r,o,a){void 0===a&&(a=0);var s=i(t,e,n,r),u=i(t,e,n,o),l=i(t,e,a,r),c=i(t,e,a,o);if(o-r==2*Math.PI){var h=i(t,e,n,r+Math.PI),f=i(t,e,a,r+Math.PI),p=[["M",s.x,s.y],["A",n,n,0,1,1,h.x,h.y],["A",n,n,0,1,1,u.x,u.y],["M",l.x,l.y]];return a&&(p.push(["A",a,a,0,1,0,f.x,f.y]),p.push(["A",a,a,0,1,0,c.x,c.y])),p.push(["M",s.x,s.y]),p.push(["Z"]),p}var d=o-r<=Math.PI?0:1,v=[["M",s.x,s.y],["A",n,n,0,d,1,u.x,u.y],["L",c.x,c.y]];return a&&v.push(["A",a,a,0,d,0,l.x,l.y]),v.push(["L",s.x,s.y]),v.push(["Z"]),v}function a(t,e,r,o,a){var s=i(t,e,r,o),u=i(t,e,r,a);if(n.i(c.isNumberEqual)(a-o,2*Math.PI)){var l=i(t,e,r,o+Math.PI);return[["M",s.x,s.y],["A",r,r,0,1,1,l.x,l.y],["A",r,r,0,1,1,s.x,s.y],["A",r,r,0,1,0,l.x,l.y],["A",r,r,0,1,0,s.x,s.y],["Z"]]}var h=a-o<=Math.PI?0:1;return[["M",s.x,s.y],["A",r,r,0,h,1,u.x,u.y]]}function s(t,e){var n,i,o=t.points,a=r(o),s=e.startAngle,u=e.endAngle,l=u-s;return e.isTransposed?(n=a.maxY*l,i=a.minY*l):(n=a.maxX*l,i=a.minX*l),n+=s,i+=s,{startAngle:i,endAngle:n}}function u(t,e){if(n.i(c.isNumber)(t)&&n.i(c.isNumber)(e))return[t,e];for(var r,i,o=-1,a=0,s=0,u=t.length-1,l=0;++o<t.length;)r=u,u=o,l+=i=t[r]*e[u]-t[u]*e[r],a+=(t[r]+t[u])*i,s+=(e[r]+e[u])*i;return l*=3,[a/l,s/l]}function l(t,e){var r=t.attr(),i=e.attr();return n.i(c.each)(r,function(t,e){void 0===i[e]&&(i[e]=void 0)}),i}e.b=i,e.c=o,e.e=a,e.a=s,e.f=u,e.d=l;var c=n(0)},function(t,e){function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=n},function(t,e,n){"use strict";var r=n(257),i=n(518);n.d(e,"b",function(){return i.a});var o=n(253);n.d(e,"a",function(){return o.a});var a=n(514);n.d(e,"e",function(){return a.a});var s=n(515);n.d(e,"d",function(){return s.a});var u=n(516);n.d(e,"c",function(){return u.a}),n.d(e,"f",function(){return r});var l=n(530);l.version},function(t,e,n){"use strict";var r=n(1),i=n(38),o=n(31),a=n(99),s=n(258),u=(n.n(s),n(98)),l=n(171),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return l.a},e.prototype.onCanvasChange=function(t){n.i(a.b)(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),r=n.i(s.getBBoxMethod)(t),i=r(this),o=e/2,a=i.x-o,u=i.y-o,l=i.x+i.width+o,c=i.y+i.height+o;return{x:a,minX:a,y:u,minY:u,width:i.width+e,height:i.height+e,maxX:l,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),n.i(a.c)(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var r=this.getClip();if(e){var i=r?n.i(a.d)([this,r]):this.getCanvasBBox();if(!n.i(o.h)(e,i))return}t.save(),n.i(a.c)(t,this),this._applyClip(t,this.getClip()),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype._afterDraw=function(){var t=this.getCanvasBBox(),e=this.getCanvas();if(this.set("cacheCanvasBBox",t),e){var r=e.getViewRange();this.set("isInView",n.i(o.h)(t,r))}this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,i=e.opacity,a=e.strokeOpacity,s=e.fillOpacity;this.isFill()&&(n.i(o.c)(s)||1===s?this.fill(t):(t.globalAlpha=s,this.fill(t),t.globalAlpha=i)),this.isStroke()&&r>0&&(n.i(o.c)(a)||1===a||(t.globalAlpha=a),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(i.c);e.a=c},function(t,e,n){"use strict";function r(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function i(t){var e=u.b[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var i=r(e);if(t.get("id")&&(i.id=t.get("id")),t.set("el",i),t.set("attrs",{}),n){var o=n.get("el");o?o.appendChild(i):(o=n.createDom(),n.set("el",o),o.appendChild(i))}return i}function o(t,e){var r=t.get("el"),i=n.i(s.toArray)(r.children).sort(e),o=document.createDocumentFragment();i.forEach(function(t){o.appendChild(t)}),r.appendChild(o)}function a(t,e){var n=t.parentNode,r=Array.from(n.childNodes).filter(function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()}),i=r[e],o=r.indexOf(t);if(i){if(o>e)n.insertBefore(t,i);else if(o<e){var a=r[e+1];a?n.insertBefore(t,a):n.appendChild(t)}}else n.appendChild(t)}e.d=r,e.a=i,e.c=o,e.b=a;var s=n(0),u=n(28)},function(t,e,n){"use strict";var r=n(176);n.d(e,"k",function(){return r.a});var i=(n(87),n(63),n(127),n(191)),o=n(177);n(25);n.d(e,"h",function(){return r.b}),n.d(e,"c",function(){return r.c});var a=(n(12),n(178));n.d(e,"d",function(){return a.a}),n.d(e,"e",function(){return a.b}),n.d(e,"j",function(){return i.a}),n.d(e,"i",function(){return i.b}),n.d(e,"g",function(){return o.a});var s=n(289);n.d(e,"a",function(){return s.a});var u=n(274);n.d(e,"b",function(){return u.a});var l=n(270);n.d(e,"f",function(){return l.a});n(11)},function(t,e,n){"use strict";function r(t){if(t.isPolar&&!t.isTransposed)return(t.endAngle-t.startAngle)*t.getRadius();var e=t.convert({x:0,y:0}),n=t.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function i(t){if(t.isPolar){var e=t.startAngle;return t.endAngle-e==2*Math.PI}return!1}function o(t,e){var n=t.getCenter();return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function a(t,e){var r=!1;if(t)if("theta"===t.type){var i=t.start,o=t.end;r=n.i(c.a)(e.x,i.x,o.x)&&n.i(c.a)(e.y,i.y,o.y)}else{var a=t.invert(e);r=n.i(c.a)(a.x,0,1)&&n.i(c.a)(a.y,0,1)}return r}function s(t,e){var n=t.getCenter();return Math.atan2(e.y-n.y,e.x-n.x)}function u(t,e){void 0===e&&(e=0);var r=t.start,i=t.end,o=t.getWidth(),a=t.getHeight();if(t.isPolar){var s=t.startAngle,u=t.endAngle,c=t.getCenter(),h=t.getRadius();return{type:"path",startState:{path:n.i(l.c)(c.x,c.y,h+e,s,s)},endState:function(t){var r=(u-s)*t+s;return{path:n.i(l.c)(c.x,c.y,h+e,s,r)}},attrs:{path:n.i(l.c)(c.x,c.y,h+e,s,u)}}}var f;return f=t.isTransposed?{height:a+2*e}:{width:o+2*e},{type:"rect",startState:{x:r.x-e,y:i.y-e,width:t.isTransposed?o+2*e:0,height:t.isTransposed?0:a+2*e},endState:f,attrs:{x:r.x-e,y:i.y-e,width:o+2*e,height:a+2*e}}}e.f=r,e.d=i,e.a=o,e.b=a,e.e=s,e.c=u;var l=n(36),c=n(64)},function(t,e,n){"use strict";var r={}.toString,i=function(t,e){return r.call(t)==="[object "+e+"]"};e.a=i},function(t,e,n){"use strict";var r=n(355);n.d(e,"c",function(){return r.a});var i=n(93);n.d(e,"f",function(){return i.a});var o=n(356);n.d(e,"g",function(){return o.a});var a=(n(996),n(997),n(357),n(358));n.d(e,"a",function(){return a.a});var s=(n(998),n(1008),n(1009),n(362),n(1e3),n(1001),n(1002),n(1003),n(359),n(360),n(1004),n(208));n.d(e,"h",function(){return s.a});var u=n(361);n.d(e,"i",function(){return u.a});var l=(n(1005),n(1006),n(1007),n(363));n.d(e,"d",function(){return l.b}),n.d(e,"e",function(){return l.c}),n.d(e,"b",function(){return l.a});n(364),n(365),n(1010)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20),i=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=i},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){return Math.min.apply(null,t)}function i(t){return Math.max.apply(null,t)}function o(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function a(t,e){return Math.abs(t-e)<.001}function s(t,e){var n=r(t),o=r(e);return{x:n,y:o,width:i(t)-n,height:i(e)-o}}function u(t,e,n,o){return{minX:r([t,n]),maxX:i([t,n]),minY:r([e,o]),maxY:i([e,o])}}function l(t){return(t+2*Math.PI)%(2*Math.PI)}Object.defineProperty(e,"__esModule",{value:!0}),e.distance=o,e.isNumberEqual=a,e.getBBoxByArray=s,e.getBBoxRange=u,e.piMod=l},function(t,e,n){function r(t){return i(t)||o(t)||a(t)||s()}var i=n(962),o=n(978),a=n(350),s=n(981);t.exports=r},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,r||t,o),s=l?l+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,l="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(l=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)u.call(t,e)&&n.push(l?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=l?l+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},s.prototype.listenerCount=function(t){var e=l?l+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,r,i,o){var a=l?l+t:t;if(!this._events[a])return!1;var s,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,o),!0}for(u=1,s=new Array(h-1);u<h;u++)s[u-1]=arguments[u];c.fn.apply(c.context,s)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,r);break;default:if(!s)for(f=1,s=new Array(h-1);f<h;f++)s[f-1]=arguments[f];c[u].fn.apply(c[u].context,s)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,n,r){var i=l?l+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||a(this,i);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=l?l+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=l,s.EventEmitter=s,t.exports=s},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},function(t,e,n){var r=n(409),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){f()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return j});var o,a,s,u,l,c,h=n(9),f=n.n(h),p=n(14),d=n.n(p),v=n(2),g=n.n(v),m=n(3),y=n.n(m),_=n(13),b=n.n(_),x=n(15),w=(n.n(x),n(427)),S=n.n(w),E=n(118),M=n.n(E),T=n(1222),C=n.n(T),A=n(7),P=(n.n(A),n(8)),k=n(22),I=n(76),O="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",j=(o=n.i(A.injectable)(),a=n.i(A.inject)(k.a.IShaderModuleService),o((u=c=function(){function t(){g()(this,t),d()(this,"shaderModuleService",l,this),this.rendererService=void 0,this.config=void 0,this.quad=O,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.name=void 0,this.optionsToUpdate={}}return y()(t,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"getType",value:function(){return I.a.PostProcessing}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(k.a.IRendererService);var n=this.rendererService,r=n.createAttribute,o=n.createBuffer,a=n.createModel,s=this.setupShaders(),u=s.vs,l=s.fs,c=s.uniforms;this.model=a({vs:u,fs:l,attributes:{a_Position:r({buffer:o({data:[-4,-4,4,-4,0,4],type:P.gl.FLOAT}),size:2})},uniforms:i({u_Texture:null},c,{},this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}})}},{key:"render",value:function(t){var e=this,n=t.multiPassRenderer.getPostProcessor(),r=this.rendererService,o=r.useFramebuffer,a=r.getViewportSize,s=r.clear,u=a(),l=u.width,c=u.height;o(this.renderToScreen?null:n.getWriteFBO(),function(){s({framebuffer:n.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:i({u_Texture:n.getReadFBO(),u_ViewportSize:[l,c]},e.convertOptionsToUniforms(e.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(t){this.enabled=t}},{key:"setRenderToScreen",value:function(t){this.renderToScreen=t}},{key:"updateOptions",value:function(t){this.optionsToUpdate=i({},this.optionsToUpdate,{},t)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object.keys(t).forEach(function(n){M()(t[n])||(e["u_".concat(S()(C()(n)))]=t[n])}),e}}]),t}(),l=b()(u.prototype,"shaderModuleService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u))||s)},function(t,e,n){"use strict";function r(t,e){if(t){if(n.i(i.a)(t))for(var r=0,a=t.length;r<a&&!1!==e(t[r],r);r++);else if(n.i(o.a)(t))for(var s in t)if(t.hasOwnProperty(s)&&!1===e(t[s],s))break}}var i=n(18),o=n(138);e.a=r},function(t,e,n){"use strict";var r=n(43),i=function(t){return n.i(r.a)(t,"Number")};e.a=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(204);e.default=function(t){return Array.isArray?Array.isArray(t):r.default(t,"Array")}},function(t,e,n){function r(t,e){return i(t)||o(t,e)||a(t,e)||s()}var i=n(961),o=n(979),a=n(350),s=n(980);t.exports=r},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var r=1e3,i=6e4,o=36e5,a=864e5,s=6048e5},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingScopeEnum=r;var i={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.BindingTypeEnum=i;var o={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};e.TargetTypeEnum=o},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):g=-1,d.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var p,d=[],v=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),i=n(114);e.default={box:function(t,e,n,i){return r.getBBoxByArray([t,n],[e,i])},length:function(t,e,n,i){return r.distance(t,e,n,i)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,i,o,a){var s=(n-t)*(o-t)+(i-e)*(a-e);return s<0?r.distance(t,e,o,a):s>(n-t)*(n-t)+(i-e)*(i-e)?r.distance(n,i,o,a):this.pointToLine(t,e,n,i,o,a)},pointToLine:function(t,e,n,r,o,a){var s=[n-t,r-e];if(i.exactEquals(s,[0,0]))return Math.sqrt((o-t)*(o-t)+(a-e)*(a-e));var u=[-s[1],s[0]];i.normalize(u,u);var l=[o-t,a-e];return Math.abs(i.dot(l,u))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}}},function(t,e,n){"use strict";function r(t,e){var r=[];return n.i(s.each)(e,function(e,n){n.split(" ")[0]===t&&r.push(e)}),r}var i=n(1),o=n(445),a=n(244),s=n(0),u=n(73),l=n(175),c=n(11),h=n(64),f=n(275),p=n(178),d=n(12),v=n(640),g=n(280),m=n(641),y=function(t){function e(e){var n=t.call(this,e)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1;var r=e.container,i=e.labelsContainer,o=e.coordinate,a=e.data,s=e.sortable,u=void 0!==s&&s,l=e.visible,c=void 0===l||l,h=e.theme,f=e.scales,p=void 0===f?{}:f,d=e.scaleDefs,v=void 0===d?{}:d;return n.container=r,n.labelsContainer=i,n.coordinate=o,n.data=a,n.sortable=u,n.visible=c,n.userTheme=h,n.scales=p,n.scaleDefs=v,n}return n.i(i.__extends)(e,t),e.prototype.position=function(t){var e=t;n.i(s.isPlainObject)(t)||(e={fields:n.i(m.a)(t)});var r=n.i(s.get)(e,"fields");return 1===r.length&&(r.unshift("1"),n.i(s.set)(e,"fields",r)),n.i(s.set)(this.attributeOption,"position",e),this},e.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},e.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},e.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},e.prototype.adjust=function(t){var e=t;return(n.i(s.isString)(t)||n.i(s.isPlainObject)(t))&&(e=[t]),n.i(s.each)(e,function(t,r){n.i(s.isObject)(t)||(e[r]={type:t})}),this.adjustOption=e,this},e.prototype.style=function(t,e){if(n.i(s.isString)(t)){var r=n.i(m.a)(t);this.styleOption={fields:r,callback:e}}else{var i=t,r=i.fields,o=i.callback,a=i.cfg;this.styleOption=r||o||a?t:{cfg:t}}return this},e.prototype.tooltip=function(t,e){if(n.i(s.isString)(t)){var r=n.i(m.a)(t);this.tooltipOption={fields:r,callback:e}}else this.tooltipOption=t;return this},e.prototype.animate=function(t){return this.animateOption=t,this},e.prototype.label=function(t,e,r){if(n.i(s.isString)(t)){var i={},o=n.i(m.a)(t);i.fields=o,n.i(s.isFunction)(e)?i.callback=e:n.i(s.isPlainObject)(e)&&(i.cfg=e),r&&(i.cfg=r),this.labelOption=i}else this.labelOption=t;return this},e.prototype.state=function(t){return this.stateOption=t,this},e.prototype.init=function(t){void 0===t&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},e.prototype.update=function(t){void 0===t&&(t={});var e=t.data,r=t.isDataChanged,i=this,o=i.attributeOption,a=i.lastAttributeOption;n.i(s.isEqual)(o,a)?!e||!r&&n.i(s.isEqual)(e,this.data)?this.setCfg(t):(this.setCfg(t),this.processData(e)):this.init(t),this.adjustScale()},e.prototype.paint=function(t){var e=this;void 0===t&&(t=!1),this.animateOption&&(this.animateOption=n.i(s.deepMix)({},n.i(u.a)(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={},this.getOffscreenGroup().clear();for(var r=this.beforeMappingData,o=this.beforeMapping(r),a=[],l=0,c=o.length;l<c;l++){var h=o[l],f=this.mapping(h);a.push(f),this.createElements(f,l,t)}if(this.canDoGroupAnimation(t)){var p=this.container,d=this.type,v=this.coordinate,g=n.i(s.get)(this.animateOption,"appear"),m=this.getYScale(),y=v.convert({x:0,y:m.scale(this.getYMinValue())});n.i(u.b)(p,g,d,v,y)}this.labelOption&&this.renderLabels(n.i(s.flatten)(a),t),this.dataArray=a,n.i(s.each)(this.lastElementsMap,function(t){t.animate=e.animateOption,t.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=n.i(i.__assign)({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this,e=t.container,n=t.geometryLabel,r=t.offscreenGroup;e&&e.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1},e.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,t.prototype.destroy.call(this)},e.prototype.getGroupScales=function(){return this.groupScales},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},e.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},e.prototype.getGroupAttributes=function(){var t=[];return n.i(s.each)(this.attributes,function(e){c.g.includes(e.type)&&t.push(e)}),t},e.prototype.getDefaultValue=function(t){var e,r=this.getAttribute(t);return r&&n.i(s.isEmpty)(r.scales)&&(e=r.values[0]),e},e.prototype.getAttributeValues=function(t,e){for(var n=[],r=t.scales,i=0,o=r.length;i<o;i++){var a=r[i],s=a.field;a.isIdentity?n.push(a.values):n.push(e[s])}return t.mapping.apply(t,n)},e.prototype.getAdjust=function(t){return this.adjusts[t]},e.prototype.getShapeMarker=function(t,e){return this.getShapeFactory().getMarker(t,e)},e.prototype.getElementsBy=function(t){return this.elements.filter(function(e){return t(e)})},e.prototype.getElementId=function(t){t=n.i(s.isArray)(t)?t[0]:t;var e=t[c.f];if(this.idFields.length){for(var r=e[this.idFields[0]],i=1;i<this.idFields.length;i++)r+="-"+e[this.idFields[i]];return r}var o,a=this.type,u=this.getXScale(),l=this.getYScale(),h=u.field||"x",f=l.field||"y",p=e[f];o="identity"===u.type?u.values[0]:e[h];var d;d="interval"===a||"schema"===a?o:"line"===a||"area"===a||"path"===a?a:o+"-"+p;for(var v=this.groupScales,i=0,g=v.length;i<g;i++){d=d+"-"+e[v[i].field]}var m=this.getAdjust("dodge");if(m){var y=m.dodgeBy;y&&(d=d+"-"+e[y])}return this.getAdjust("jitter")&&(d=d+"-"+t.x+"-"+t.y),d},e.prototype.getScaleFields=function(){var t=[],e={},r=this,i=r.attributeOption,o=r.labelOption,a=r.tooltipOption;for(var u in i)if(i.hasOwnProperty(u)){var l=i[u];l.fields?n.i(h.b)(l.fields,t,e):l.values&&n.i(h.b)(l.values,t,e)}return o&&o.fields&&n.i(h.b)(o.fields,t,e),n.i(s.isObject)(a)&&a.fields&&n.i(h.b)(a.fields,t,e),t},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},e.prototype.getGroupFields=function(){for(var t=[],e={},r=0,i=c.g.length;r<i;r++){var o=c.g[r],a=this.attributeOption[o];a&&a.fields&&n.i(h.b)(a.fields,t,e)}return t},e.prototype.getXYFields=function(){var t=this.attributeOption.position.fields;return[t[0],t[1]]},e.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),n=e.field,r=0;r<t.length;r++){var i=t[r];i.sort(function(t,r){return e.translate(t[c.f][n])-e.translate(r[c.f][n])})}this.hasSorted=!0},e.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},e.prototype.getShapeFactory=function(){var t=this.shapeType;if(n.i(d.a)(t))return this.shapeFactory||(this.shapeFactory=n.i(s.clone)(n.i(d.a)(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},e.prototype.createShapePointsCfg=function(t){var e,n=this.getXScale(),r=this.getYScale(),i=this.normalizeValues(t[n.field],n);return e=r?this.normalizeValues(t[r.field],r):t.y?t.y:.1,{x:i,y:e,y0:r?r.scale(this.getYMinValue()):void 0}},e.prototype.createElement=function(t,e){void 0===e&&(e=!1);var n=this.container,r=this.getDrawCfg(t),i=this.getShapeFactory(),o=new f.a({shapeFactory:i,container:n,offscreenGroup:this.getOffscreenGroup()});return o.animate=this.animateOption,o.geometry=this,o.draw(r,e),o},e.prototype.getDrawCfg=function(t){var e=t[c.f],r={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar},i=t.shape;!i&&this.getShapeFactory()&&(i=this.getShapeFactory().defaultShapeType),r.shape=i;var o=this.theme.geometries[this.shapeType];r.defaultStyle=n.i(s.get)(o,[i,"default"],{}).style;var a=this.styleOption;return a&&(r.style=this.getStyleCfg(a,e)),this.generatePoints&&(r.points=t.points,r.nextPoints=t.nextPoints),r},e.prototype.createElements=function(t,e,r){void 0===r&&(r=!1);for(var i=this,o=i.lastElementsMap,a=i.elementsMap,s=i.elements,u=0,l=t.length;u<l;u++){var c=t[u],h=this.getElementId(c);a[h]&&(h=h+"-"+e+"-"+u);var f=o[h];if(f){var p=this.getDrawCfg(c),d=f.getModel();n.i(g.a)(p,d)&&(f.animate=this.animateOption,f.update(p)),delete o[h]}else f=this.createElement(c,r);s.push(f),a[h]=f}return s},e.prototype.getLabelType=function(){var t=this,e=t.labelOption,r=t.coordinate,i=t.type,o=r.type,a=n.i(s.get)(e,["cfg","type"]);return a||(a="polar"===o?"polar":"theta"===o?"pie":"interval"===i||"polygon"===i?"interval":"base"),a},e.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,n=t.max;return e>=0?e:n<=0?n:0},e.prototype.createAttrOption=function(t,e,r){if(n.i(s.isNil)(e)||n.i(s.isObject)(e))n.i(s.isObject)(e)&&n.i(s.isEqual)(Object.keys(e),["values"])?n.i(s.set)(this.attributeOption,t,{fields:e.values}):n.i(s.set)(this.attributeOption,t,e);else{var i={};n.i(s.isNumber)(e)?i.values=[e]:i.fields=n.i(m.a)(e),r&&(n.i(s.isFunction)(r)?i.callback=r:i.values=r),n.i(s.set)(this.attributeOption,t,i)}},e.prototype.initAttributes=function(){var t=this,e=this,r=e.attributes,o=e.attributeOption,s=e.theme,u=e.shapeType;this.groupScales=[];var l={},h=function(e){if(o.hasOwnProperty(e)){var h=o[e];if(!h)return{value:void 0};var f=n.i(i.__assign)({},h),p=f.callback,d=f.values,v=f.fields,g=void 0===v?[]:v,m=g.map(function(n){var r=t.scales[n];return r.isCategory&&!l[n]&&c.g.includes(e)&&(t.groupScales.push(r),l[n]=!0),r});f.scales=m,"position"!==e&&1===m.length&&"identity"===m[0].type?f.values=m[0].values:p||d||("size"===e?f.values=s.sizes:"shape"===e?f.values=s.shapes[u]||[]:"color"===e&&(m.length?f.values=m[0].values.length<=10?s.colors10:s.colors20:f.values=s.colors10));var y=n.i(a.a)(e);r[e]=new y(f)}};for(var f in o){var p=h(f);if("object"==typeof p)return p.value}},e.prototype.processData=function(t){this.hasSorted=!1;for(var e=this.getAttribute("position").scales,n=e.filter(function(t){return t.isCategory}),r=this.groupData(t),i=[],o=0,a=r.length;o<a;o++){for(var s=r[o],u=[],l=0,h=s.length;l<h;l++){var f=s[l],p={};for(var d in f)p[d]=f[d];p[c.f]=f;for(var v=0,g=n;v<g.length;v++){var m=g[v],y=m.field;p[y]=m.translate(p[y])}u.push(p)}i.push(u)}var _=this.adjustData(i);return this.beforeMappingData=_,_},e.prototype.adjustData=function(t){var e=this.adjustOption,r=t;if(e)for(var a=this.getXScale(),u=this.getYScale(),l=a.field,c=u?u.field:null,h=0,f=e.length;h<f;h++){var p=e[h],d=n.i(i.__assign)({xField:l,yField:c},p),v=p.type;if("dodge"===v){var g=[];if(a.isCategory||"identity"===a.type)g.push("x");else{if(u)throw new Error("dodge is not support linear attribute, please use category attribute!");g.push("y")}d.adjustNames=g,d.dodgeRatio=this.theme.columnWidthRatio}else if("stack"===v){var m=this.coordinate;if(!u){d.height=m.getHeight();var y=this.getDefaultValue("size")||3;d.size=y}!m.isTransposed&&n.i(s.isNil)(d.reverseOrder)&&(d.reverseOrder=!0)}var _=n.i(o.a)(v),b=new _(d);r=b.process(r),this.adjusts[v]=b}return r},e.prototype.groupData=function(t){for(var e=this.getGroupScales(),r=this.scaleDefs,i={},o=[],a=0;a<e.length;a++){var u=e[a],l=u.field;o.push(l),n.i(s.get)(r,[l,"values"])&&(i[l]=r[l].values)}return n.i(v.a)(t,o,i)},e.prototype.updateStackRange=function(t,e){for(var r=n.i(s.flatten)(e),i=t.field,o=t.min,a=t.max,u=0;u<r.length;u++){var l=r[u],c=Math.min.apply(null,l[i]),h=Math.max.apply(null,l[i]);c<o&&(o=c),h>a&&(a=h)}var f=this.scaleDefs,p={};o<t.min&&!n.i(s.get)(f,[i,"min"])&&(p.min=o),a>t.max&&!n.i(s.get)(f,[i,"max"])&&(p.max=a),t.change(p)},e.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.generateShapePoints(i);var o=e[n+1];o&&(this.generateShapePoints(o),i[0].nextPoints=o[0].points)}return e},e.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<t.length;r++){var i=t[r],o=this.createShapePointsCfg(i),a=n?this.getAttributeValues(n,i):null,s=e.getShapePoints(a,o);i.points=s}},e.prototype.normalizeValues=function(t,e){var r=[];if(n.i(s.isArray)(t))for(var i=0;i<t.length;i++){var o=t[i];r.push(e.scale(o))}else r=e.scale(t);return r},e.prototype.mapping=function(t){for(var e=this.attributes,r=[],i=0;i<t.length;i++){var o=t[i],a={_origin:o[c.f],points:o.points,nextPoints:o.nextPoints};for(var u in e)if(e.hasOwnProperty(u)){var l=e[u],h=l.names,f=this.getAttributeValues(l,o);if(h.length>1)for(var p=0;p<f.length;p+=1){var d=f[p],v=h[p];a[v]=n.i(s.isArray)(d)&&1===d.length?d[0]:d}else a[h[0]]=1===f.length?f[0]:f}this.convertPoint(a),r.push(a)}return r},e.prototype.convertPoint=function(t){var e,r,i,o=t.x,a=t.y,u=this.coordinate;if(n.i(s.isArray)(o)&&n.i(s.isArray)(a)){e=[],r=[];for(var l=0,c=0,h=o.length,f=a.length;l<h&&c<f;l+=1,c+=1)i=u.convert({x:o[l],y:a[c]}),e.push(i.x),r.push(i.y)}else if(n.i(s.isArray)(a)){r=[];for(var p=0;p<a.length;p++){var d=a[p];i=u.convert({x:o,y:d}),e&&e!==i.x?(n.i(s.isArray)(e)||(e=[e]),e.push(i.x)):e=i.x,r.push(i.y)}}else if(n.i(s.isArray)(o)){e=[];for(var p=0;p<o.length;p++){var v=o[p];i=u.convert({x:v,y:a}),r&&r!==i.y?(n.i(s.isArray)(r)||(r=[r]),r.push(i.y)):r=i.y,e.push(i.x)}}else{var g=u.convert({x:o,y:a});e=g.x,r=g.y}t.x=e,t.y=r},e.prototype.getStyleCfg=function(t,e){var n=t.fields,r=void 0===n?[]:n,i=t.callback,o=t.cfg;if(o)return o;var a=r.map(function(t){return e[t]});return i.apply(void 0,a)},e.prototype.setCfg=function(t){var e=this,r=t.coordinate,i=t.data,o=t.theme,a=t.scaleDefs;r&&(this.coordinate=r),i&&(this.data=i),a&&(this.scaleDefs=a,this.idFields=[],n.i(s.each)(a,function(t,n){t&&t.key&&e.idFields.push(n)})),o&&(this.theme=this.userTheme?n.i(s.deepMix)({},o,this.userTheme):o)},e.prototype.renderLabels=function(t,e){void 0===e&&(e=!1);var i=this.geometryLabel;if(!i){var o=this.getLabelType();i=new(n.i(p.c)(o))(this),this.geometryLabel=i}i.render(t,e);var a=i.labelsRenderer.shapesMap;n.i(s.each)(this.elementsMap,function(t,e){var n=r(e,a);if(n.length){t.labelShape=n;for(var i=0;i<n.length;i++)for(var o=n[i],s=o.getChildren(),u=0;u<s.length;u++){var l=s[u];l.set("element",t)}}})},e.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(void 0===n.i(s.get)(this.animateOption,"appear")||n.i(s.get)(this.animateOption,"appear")&&void 0===n.i(s.get)(this.animateOption,["appear","animation"]))},e}(l.a);e.a=y},function(t,e,n){"use strict";function r(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}function i(t,e,r){if(n.i(s.isString)(t))return t.padEnd(e,r);if(n.i(s.isArray)(t)){var i=t.length;if(i<e)for(var o=e-i,a=0;a<o;a++)t.push(r)}return t}function o(t,e){return e.forEach(function(e){delete t[e]}),t}function a(t,e,n){void 0===e&&(e=[]),void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];n[o]||(e.push(o),n[o]=!0)}return e}e.a=r,e.d=i,e.c=o,e.b=a;var s=n(0)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){g()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return W});var o,a,s,u,l,c,h,f,p=n(112),d=n.n(p),v=n(9),g=n.n(v),m=n(14),y=n.n(m),_=n(2),b=n.n(_),x=n(3),w=n.n(x),S=n(6),E=n.n(S),M=n(4),T=n.n(M),C=n(37),A=n.n(C),P=n(5),k=n.n(P),I=n(13),O=n.n(I),j=n(15),L=(n.n(j),n(52)),D=n.n(L),R=n(117),B=n.n(R),z=n(160),F=n(8),N=n(10),U=n(49),V=(n.n(U),n(1238)),G=n.n(V),q=n(298),H=n(304),Y=n(755),X=0,W=(o=n.i(F.lazyInject)(F.TYPES.ILogService),a=n.i(F.lazyInject)(F.TYPES.IGlobalConfigService),s=n.i(F.lazyInject)(F.TYPES.IShaderModuleService),u=f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b()(this,e),t=E()(this,T()(e).call(this)),t.id="".concat(X++),t.name="".concat(X),t.type=void 0,t.visible=!0,t.zIndex=0,t.minZoom=void 0,t.maxZoom=void 0,t.inited=!1,t.layerModelNeedUpdate=!1,t.pickedFeatureID=null,t.selectedFeatureID=null,t.dataState={dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1},t.hooks={init:new z.b,afterInit:new z.b,beforeRender:new z.b,beforeRenderData:new z.c,afterRender:new z.d,beforePickingEncode:new z.d,afterPickingEncode:new z.d,beforeHighlight:new z.d(["pickedColor"]),afterHighlight:new z.d,beforeSelect:new z.d(["pickedColor"]),afterSelect:new z.d,beforeDestroy:new z.d,afterDestroy:new z.d},t.models=[],t.multiPassRenderer=void 0,t.plugins=void 0,t.sourceOption=void 0,t.layerModel=void 0,y()(t,"logger",l,A()(t)),y()(t,"configService",c,A()(t)),y()(t,"shaderModuleService",h,A()(t)),t.iconService=void 0,t.fontService=void 0,t.rendererService=void 0,t.layerService=void 0,t.interactionService=void 0,t.mapService=void 0,t.styleAttributeService=void 0,t.layerSource=void 0,t.postProcessingPassFactory=void 0,t.normalPassFactory=void 0,t.animateOptions={enable:!1},t.container=void 0,t.encodedData=void 0,t.configSchema=void 0,t.currentPickId=null,t.rawConfig=void 0,t.needUpdateConfig=void 0,t.pendingStyleAttributes=[],t.scaleOptions={},t.animateStartTime=void 0,t.aniamateStatus=!1,t.sourceEvent=function(){t.dataState.dataSourceNeedUpdate=!0;var e=t.getLayerConfig(),n=e.autoFit,r=e.fitBoundsOptions;n&&t.fitBounds(r),t.emit("dataUpdate"),t.reRender()},t.name=n.name||t.id,t.zIndex=n.zIndex||0,t.rawConfig=n,t}return k()(e,t),w()(e,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(t){if(this.inited){var e=this.container.get(F.TYPES.SceneID);this.configService.setLayerConfig(e,this.id,i({},this.configService.getLayerConfig(this.id),{},this.needUpdateConfig,{},t)),this.needUpdateConfig={}}else this.needUpdateConfig=i({},this.needUpdateConfig,{},t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(t){return this.plugins.push(t),this}},{key:"init",value:function(){var t=this,e=this.container.get(F.TYPES.SceneID),n=this.rawConfig.enableMultiPassRenderer,r=void 0!==n&&n;this.configService.setLayerConfig(e,this.id,{enableMultiPassRenderer:r}),this.iconService=this.container.get(F.TYPES.IIconService),this.fontService=this.container.get(F.TYPES.IFontService),this.rendererService=this.container.get(F.TYPES.IRendererService),this.layerService=this.container.get(F.TYPES.ILayerService),this.interactionService=this.container.get(F.TYPES.IInteractionService),this.mapService=this.container.get(F.TYPES.IMapService),this.postProcessingPassFactory=this.container.get(F.TYPES.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(F.TYPES.IFactoryNormalPass),this.styleAttributeService=this.container.get(F.TYPES.IStyleAttributeService),this.multiPassRenderer=this.container.get(F.TYPES.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(e){var n=e.attributeName,r=e.attributeField,o=e.attributeValues,a=e.updateOptions;t.styleAttributeService.updateStyleAttribute(n,{scale:i({field:r},t.splitValuesAndCallbackInAttribute(o,t.getLayerConfig()[n]))},a)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(F.TYPES.ILayerPlugin);var o=!0,a=!1,s=void 0;try{for(var u,l=this.plugins[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){u.value.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(i({},this.getDefaultConfig(),{},this.rawConfig));var t=this.getLayerConfig(),e=t.animateOption;(null===e||void 0===e?void 0:e.enable)&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(t,e,n){return this.updateStyleAttribute("color",t,e,n),this}},{key:"size",value:function(t,e,n){return this.updateStyleAttribute("size",t,e,n),this}},{key:"filter",value:function(t,e,n){return this.updateStyleAttribute("filter",t,e,n),this}},{key:"shape",value:function(t,e,n){return this.updateStyleAttribute("shape",t,e,n),this}},{key:"label",value:function(t,e,n){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:e,updateOptions:n}),this}},{key:"animate",value:function(t){var e={};return D()(t)?(e.enable=!0,e=i({},e,{},t)):e.enable=t,this.updateLayerConfig({animateOption:e}),this}},{key:"source",value:function(t,e){return this.sourceOption={data:t,options:e},this}},{key:"setData",value:function(t,e){var n=this;return this.inited?this.layerSource.setData(t):this.on("inited",function(){n.layerSource.setData(t)}),this}},{key:"style",value:function(t){var e=this,r=t.passes,o=d()(t,["passes"]);return r&&n.i(q.b)(r).forEach(function(t){var n=e.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(t[0]);n&&n.updateOptions(t[1])}),this.rawConfig=i({},this.rawConfig,{},o),this.container&&this.updateLayerConfig(this.rawConfig),this}},{key:"scale",value:function(t,e){return D()(t)?this.scaleOptions=i({},this.scaleOptions,{},t):this.scaleOptions[t]=e,this}},{key:"render",value:function(){return this.renderModels(),this}},{key:"active",value:function(t){var e={};return e.enableHighlight=!!D()(t)||t,D()(t)?(e.enableHighlight=!0,t.color&&(e.highlightColor=t.color)):e.enableHighlight=!!t,this.updateLayerConfig(e),this}},{key:"setActive",value:function(t,e){var r=this;if(D()(t)){var i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a;this.updateLayerConfig({highlightColor:D()(e)?e.color:this.getLayerConfig().highlightColor}),this.pick({x:o,y:s})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:D()(e)?e.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.call(n.i(N.g)(t)).then(function(){setTimeout(function(){r.reRender()},1)})}},{key:"select",value:function(t){var e={};return e.enableSelect=!!D()(t)||t,D()(t)?(e.enableSelect=!0,t.color&&(e.selectColor=t.color)):e.enableSelect=!!t,this.updateLayerConfig(e),this}},{key:"setSelect",value:function(t,e){var r=this;if(D()(t)){var i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a;this.updateLayerConfig({selectColor:D()(e)?e.color:this.getLayerConfig().selectColor}),this.pick({x:o,y:s})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:D()(e)?e.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.call(n.i(N.g)(t)).then(function(){setTimeout(function(){r.reRender()},1)})}},{key:"setBlend",value:function(t){this.updateLayerConfig({blend:t}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(t){return this.zIndex=t,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(t){this.currentPickId=t}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(t){this.selectedFeatureID=t}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var t=this.mapService.getZoom(),e=this.getLayerConfig(),n=e.visible,r=e.minZoom,i=void 0===r?-1/0:r,o=e.maxZoom,a=void 0===o?1/0:o;return!!n&&t>=i&&t<=a}},{key:"setMinZoom",value:function(t){return this.updateLayerConfig({minZoom:t}),this}},{key:"getMinZoom",value:function(){return this.getLayerConfig().minZoom}},{key:"getMaxZoom",value:function(){return this.getLayerConfig().maxZoom}},{key:"get",value:function(t){return this.getLayerConfig()[t]}},{key:"setMaxZoom",value:function(t){return this.updateLayerConfig({maxZoom:t}),this}},{key:"fitBounds",value:function(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var e=this.getSource(),n=e.extent;return this.mapService.fitBounds([[n[0],n[1]],[n[2],n[3]]],t),this}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.models.forEach(function(t){return t.destroy()}),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes(),this.models.forEach(function(t){return t.destroy()})}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(t){return t.needRescale||t.needRemapping||t.needRegenerateVertices}).length}},{key:"setSource",value:function(t){this.layerSource=t;var e=this.mapService.getZoom();this.layerSource.cluster&&this.layerSource.updateClusterData(e),this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(t){this.encodedData=t}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function(){return this.configSchema||(this.configSchema=G()([Y.a,this.getConfigSchema()])),this.configSchema}},{key:"getLegendItems",value:function(t){var e=this.styleAttributeService.getLayerAttributeScale(t);if(!e)return[];if(e.ticks){return e.ticks().map(function(n){return g()({value:n},t,e(n))})}if(e.invertExtent){return e.range().map(function(n){return g()({value:e.invertExtent(n)},t,n)})}}},{key:"pick",value:function(t){var e=t.x,n=t.y;this.interactionService.triggerHover({x:e,y:n})}},{key:"buildLayerModel",value:function(t){var e=t.moduleName,n=t.vertexShader,r=t.fragmentShader,o=t.triangulation,a=d()(t,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(e,{vs:n,fs:r});var s=this.shaderModuleService.getModule(e),u=s.vs,l=s.fs,c=s.uniforms,h=this.rendererService.createModel,f=this.styleAttributeService.createAttributesAndIndices(this.encodedData,o);return h(i({attributes:f.attributes,uniforms:c,fs:l,vs:u,elements:f.elements,blend:H.a[F.BlendType.normal]},a))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(t){var e=this.getLayerConfig(),n=e.enableHighlight,r=void 0===n||n,i=e.enableSelect,o=void 0===i||i,a=-1!==this.eventNames().indexOf(t)||-1!==this.eventNames().indexOf("un"+t);return"click"!==t&&"dblclick"!==t||!o||(a=!0),"mousemove"!==t||!r&&-1===this.eventNames().indexOf("mouseenter")&&-1===this.eventNames().indexOf("unmousemove")&&-1===this.eventNames().indexOf("mouseout")||(a=!0),this.isVisible()&&a}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var t=this;return this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(e){e.draw({uniforms:t.layerModel.getUninforms()})}),this}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(t,e){return{values:B()(t)?void 0:t||e,callback:B()(t)?t:void 0}}},{key:"updateStyleAttribute",value:function(t,e,n,r){this.inited?this.styleAttributeService.updateStyleAttribute(t,{scale:i({field:e},this.splitValuesAndCallbackInAttribute(n,this.getLayerConfig()[e]))},r):this.pendingStyleAttributes.push({attributeName:t,attributeField:e,attributeValues:n,updateOptions:r})}}]),e}(U.EventEmitter),l=O()(u.prototype,"logger",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=O()(u.prototype,"configService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=O()(u.prototype,"shaderModuleService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u)},function(t,e,n){"use strict";var r=function(t){return null===t||void 0===t};e.a=r},function(t,e,n){"use strict";function r(t){return t}function i(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:n.i(d.a)(isNaN(e)?NaN:.5)}function o(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function a(t,e,n){var r=t[0],o=t[1],a=e[0],s=e[1];return o<r?(r=i(o,r),a=n(s,a)):(r=i(r,o),a=n(a,s)),function(t){return a(r(t))}}function s(t,e,r){var o=Math.min(t.length,e.length)-1,a=new Array(o),s=new Array(o),u=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<o;)a[u]=i(t[u],t[u+1]),s[u]=r(e[u],e[u+1]);return function(e){var r=n.i(h.c)(t,e,1,o)-1;return s[r](a[r](e))}}function u(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function l(){function t(){return l=Math.min(d.length,m.length)>2?s:a,c=h=null,e}function e(t){return isNaN(t=+t)?u:(c||(c=l(d.map(n),m,y)))(n(_(t)))}var n,i,u,l,c,h,d=g,m=g,y=f.a,_=r;return e.invert=function(t){return _(i((h||(h=l(m,d.map(n),f.b)))(t)))},e.domain=function(e){return arguments.length?(d=p.a.call(e,v.a),_===r||(_=o(d)),t()):d.slice()},e.range=function(e){return arguments.length?(m=p.b.call(e),t()):m.slice()},e.rangeRound=function(e){return m=p.b.call(e),y=f.c,t()},e.clamp=function(t){return arguments.length?(_=t?o(d):r,e):_!==r},e.interpolate=function(e){return arguments.length?(y=e,t()):y},e.unknown=function(t){return arguments.length?(u=t,e):u},function(e,r){return n=e,i=r,t()}}function c(t,e){return l()(t,e)}e.a=r,e.c=u,e.b=l,e.d=c;var h=n(44),f=n(375),p=n(82),d=n(1060),v=n(380),g=[0,1]},function(t,e,n){"use strict";var r=(n(50),n(1089),n(1090),n(223),n(145)),i=(n(390),n(1091),n(114)),o=n(146),a=n(224);n.d(e,"a",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return a})},function(t,e,n){"use strict";function r(t,e,n,r){o(c.TAGGED,t,e,r,n)}function i(t,e,n){o(c.TAGGED_PROP,t.constructor,e,n)}function o(t,e,n,r,i){var o={},a="number"==typeof i,s=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error(l.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var u=o[s];if(Array.isArray(u))for(var c=0,h=u;c<h.length;c++){var f=h[c];if(f.key===r.key)throw new Error(l.DUPLICATED_METADATA+" "+f.key.toString())}else u=[];u.push(r),o[s]=u,Reflect.defineMetadata(t,o,e)}function a(t,e){Reflect.decorate(t,e)}function s(t,e){return function(n,r){e(n,r,t)}}function u(t,e,n){"number"==typeof n?a([s(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(34),c=n(20);e.tagParameter=r,e.tagProperty=i,e.decorate=u},function(t,e,n){function r(t){return null==t?void 0===t?u:s:l&&l in Object(t)?o(t):a(t)}var i=n(149),o=n(1182),a=n(1207),s="[object Null]",u="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=r},function(t,e,n){"use strict";var r=n(0),i=function(t,e){return n.i(r.isString)(e)?e:t.invert(t.scale(e))},o=function(){function t(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return t.prototype.mapping=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map(function(e,n){return t._toOriginParam(e,t.scales[n])});return this.callback.apply(this,r)},t.prototype.getLinearValue=function(t){var e=this.values.length-1,n=Math.floor(e*t),r=e*t-n,i=this.values[n];return i+((n===e?i:this.values[n+1])-i)*r},t.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),r=[],i=0;i<n;i+=1)r.push(e[i]);return r},t.prototype.getFields=function(){return this.scales.map(function(t){return t.field})},t.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},t.prototype.defaultCallback=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this.values:e.map(function(e,n){var r=t.scales[n];return"identity"===r.type?r.values[0]:t._getAttributeValue(r,e)})},t.prototype._parseCfg=function(t){var e=this,i=t.type,o=void 0===i?"base":i,a=t.names,s=void 0===a?[]:a,u=t.scales,l=void 0===u?[]:u,c=t.values,h=void 0===c?[]:c,f=t.callback;this.type=o,this.scales=l,this.values=h,this.names=s,this.callback=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(f){var o=f.apply(void 0,t);if(!n.i(r.isNil)(o))return[o]}return e.defaultCallback.apply(e,t)}},t.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var n=t.translate(e);return this.values[n%this.values.length]}var r=t.scale(e);return this.getLinearValue(r)},t.prototype._toOriginParam=function(t,e){return e.isLinear?t:n.i(r.isArray)(t)?t.map(function(t){return i(e,t)}):i(e,t)},t}();e.a=o},function(t,e,n){"use strict";function r(t,e){return e?n.i(s.a)(u,[["t",-t.x,-t.y],["r",e],["t",t.x,t.y]]):null}function i(t,e){return t.x||t.y?n.i(s.a)(e||u,[["t",t.x,t.y]]):null}function o(t,e){var n=[];return s.c.transformMat3(n,e,t),n}function a(t,e){var n=o(t,[e.minX,e.minY]),r=o(t,[e.maxX,e.minY]),i=o(t,[e.minX,e.maxY]),a=o(t,[e.maxX,e.maxY]),s=Math.min(n[0],r[0],i[0],a[0]),u=Math.max(n[0],r[0],i[0],a[0]),l=Math.min(n[1],r[1],i[1],a[1]),c=Math.max(n[1],r[1],i[1],a[1]);return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:c,width:u-s,height:c-l}}e.c=r,e.b=i,e.a=a;var s=n(24),u=[1,0,0,0,1,0,0,0,1]},function(t,e,n){"use strict";function r(t,e){return{delay:n.i(u.isFunction)(t.delay)?t.delay(e):t.delay,easing:n.i(u.isFunction)(t.easing)?t.easing(e):t.easing,duration:n.i(u.isFunction)(t.duration)?t.duration(e):t.duration,callback:t.callback}}function i(t,e,r){var i=f[t];return i&&(n.i(u.isFunction)(i)&&(i=i(e)),i=n.i(u.deepMix)({},h,i),r)?i[r]:i}function o(t,e,i){var o=n.i(u.get)(t.get("origin"),"data",l.f),a=e.animation,s=r(e,o);if(a){var h=n.i(c.b)(a);h&&h(t,s,i)}else t.animate(i.toAttrs,s)}function a(t,e,r,i,o){if(p[r]){var a=p[r](i),l=n.i(c.b)(n.i(u.get)(a,"animation",""));if(l){var f=n.i(s.__assign)(n.i(s.__assign)(n.i(s.__assign)({},h.appear),a),e);t.stopAnimate(),l(t,f,{coordinate:i,minYPoint:o,toAttrs:null})}}}n.d(e,"d",function(){return h}),e.a=i,e.c=o,e.b=a;var s=n(1),u=n(0),l=n(11),c=n(270),h={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},f={interval:function(t){return{enter:{animation:t.isRect?t.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:t.isPolar&&t.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},p={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(t){var e;return t.isRect?e=t.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",t.isPolar&&t.isTransposed&&(e="wave-in")),{animation:e}},schema:function(t){var e;return e=t.isRect?t.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy",{animation:e}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}}},function(t,e,n){"use strict";n.d(e,"i",function(){return u}),n.d(e,"k",function(){return l}),n.d(e,"j",function(){return c}),n.d(e,"l",function(){return h}),n.d(e,"g",function(){return f}),n.d(e,"h",function(){return p}),n.d(e,"e",function(){return d});var r=(n(38),n(448)),i=(n.n(r),n(456)),o=(n.n(i),n(244),n(506));n.d(e,"b",function(){return o.a});var a=n(134);n.d(e,"a",function(){return a.getScale});var s=n(482);n.d(e,"f",function(){return s.g}),n.d(e,"d",function(){return s.f}),n.d(e,"c",function(){return s.e});var u=s.a.Line,l=s.a.Circle,c=s.b.Line,h=s.b.Circle,f=s.c.Category,p=s.c.Continuous,d=s.d.Html},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(11),o=n(192),a=function(){function t(t,e){this.destroyed=!1,this.facets=[],this.view=t,this.cfg=n.i(r.deepMix)({},this.getDefaultCfg(),e)}return t.prototype.init=function(){this.container||(this.container=this.createContainer());var t=this.view.getData();this.facets=this.generateFacets(t)},t.prototype.render=function(){this.renderViews()},t.prototype.update=function(){},t.prototype.clear=function(){this.clearFacetViews()},t.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},t.prototype.facetToView=function(t){var e=t.region,n=t.data,r=t.padding,i=void 0===r?this.cfg.padding:r,o=this.view.createView({region:e,padding:i});o.data(n||[]),t.view=o,this.beforeEachView(o,t);var a=this.cfg.eachView;return a&&a(o,t),this.afterEachView(o,t),o},t.prototype.createContainer=function(){return this.view.getLayer(i.a.FORE).addGroup()},t.prototype.renderViews=function(){this.createFacetViews()},t.prototype.createFacetViews=function(){var t=this;return this.facets.map(function(e){return t.facetToView(e)})},t.prototype.clearFacetViews=function(){var t=this;n.i(r.each)(this.facets,function(e){e.view&&(t.view.removeView(e.view),e.view=void 0)})},t.prototype.getFieldValues=function(t,e){var i=[],o={};return n.i(r.each)(t,function(t){var a=t[e];n.i(r.isNil)(a)||o[a]||(i.push(a),o[a]=!0)}),i},t.prototype.getRegion=function(t,e,n,r){var i=1/(0===e?1:e),o=1/(0===t?1:t);return{start:{x:i*n,y:o*r},end:{x:i*(n+1),y:o*(r+1)}}},t.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},t.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},t.prototype.processAxis=function(t,e){var i=t.getOptions(),a=i.coordinate,s=t.geometries;if("rect"===n.i(r.get)(a,"type","rect")&&s.length){n.i(r.isNil)(i.axes)&&(i.axes={});var u=i.axes,l=s[0].getXYFields(),c=l[0],h=l[1],f=n.i(o.a)(u,c),p=n.i(o.a)(u,h);!1!==f&&(i.axes[c]=this.getXAxisOption(c,u,f,e)),!1!==p&&(i.axes[h]=this.getYAxisOption(h,u,p,e))}},t.prototype.getFacetDataFilter=function(t){return function(e){return n.i(r.every)(t,function(t){var i=t.field,o=t.value;return!(!n.i(r.isNil)(o)&&i)||e[i]===o})}},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.Normal="normal",t.PostProcessing="post-processing"}(r||(r={}))},function(t,e,n){"use strict";var r=n(43);e.a=function(t){return n.i(r.a)(t,"String")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(204);e.default=function(t){return r.default(t,"String")}},function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise(function(i,o){function a(t){n(u,i,o,a,s,"next",t)}function s(t){n(u,i,o,a,s,"throw",t)}var u=t.apply(e,r);a(void 0)})}}t.exports=r},function(t,e,n){t.exports=n(985)},function(t,e,n){"use strict";var r=n(210);n.d(e,"a",function(){return r.a}),n.d(e,"f",function(){return r.h}),n.d(e,"e",function(){return r.g});var i=n(1018);n.d(e,"d",function(){return i.b}),n.d(e,"c",function(){return i.a});var o=n(1017);n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=Array.prototype,i=r.map,o=r.slice},function(t,e,n){"use strict";function r(t){var e=t.domain;return t.ticks=function(t){var r=e();return n.i(o.d)(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,r){var i=e();return n.i(u.a)(i[0],i[i.length-1],null==t?10:t,r)},t.nice=function(r){null==r&&(r=10);var i,a=e(),s=0,u=a.length-1,l=a[s],c=a[u];return c<l&&(i=l,l=c,c=i,i=s,s=u,u=i),i=n.i(o.e)(l,c,r),i>0?(l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i,i=n.i(o.e)(l,c,r)):i<0&&(l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i,i=n.i(o.e)(l,c,r)),i>0?(a[s]=Math.floor(l/i)*i,a[u]=Math.ceil(c/i)*i,e(a)):i<0&&(a[s]=Math.ceil(l*i)/i,a[u]=Math.floor(c*i)/i,e(a)),t},t}function i(){var t=n.i(a.d)(a.a,a.a);return t.copy=function(){return n.i(a.c)(t,i())},s.b.apply(t,arguments),r(t)}e.b=r,e.a=i;var o=n(44),a=n(67),s=n(29),u=n(383)},function(t,e,n){"use strict";function r(){return i++}Object.defineProperty(e,"__esModule",{value:!0});var i=0;e.id=r},function(t,e,n){function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=n(1152),o=n(1183);t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(159),o=function(){function t(t){var e=t.xField,n=t.yField,r=t.adjustNames,i=void 0===r?["x","y"]:r;this.adjustNames=i,this.xField=e,this.yField=n}return t.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},t.prototype.getAdjustRange=function(t,e,n){var r,i,o=this.yField,a=n.indexOf(e),s=n.length;return!o&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===a?0:a-1],i=n[a===s-1?s-1:a+1],0!==a?r+=(e-r)/2:r-=(i-e)/2,a!==s-1?i-=(i-e)/2:i+=(e-n[s-2])/2):(r=0===e?0:e-.5,i=0===e?1:e+.5),{pre:r,next:i}},t.prototype.adjustData=function(t,e){var n=this,i=this.getDimValues(e);r.each(t,function(t,e){r.each(i,function(r,i){n.adjustDim(i,r,t,e)})})},t.prototype.groupData=function(t,e){return r.each(t,function(t){void 0===t[e]&&(t[e]=i.a)}),r.groupBy(t,e)},t.prototype.adjustDim=function(t,e,n,r){},t.prototype.getDimValues=function(t){var e=this,n=e.xField,o=e.yField,a={},s=[];if(n&&this.isAdjust("x")&&s.push(n),o&&this.isAdjust("y")&&s.push(o),s.forEach(function(e){a[e]=r.valuesOfKey(t,e).sort(function(t,e){return t-e})}),!o&&this.isAdjust("y")){a["y"]=[i.a,1]}return a},t}();e.a=o},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(){function t(t){this.visible=!0,this.components=[],this.view=t}return t.prototype.clear=function(){n.i(r.each)(this.components,function(t){t.component.destroy()}),this.components=[]},t.prototype.destroy=function(){this.clear()},t.prototype.getComponents=function(){return this.components},t.prototype.changeVisible=function(t){this.visible!==t&&(this.components.forEach(function(e){t?e.component.show():e.component.hide()}),this.visible=t)},t}()},function(t,e,n){"use strict";function r(t){return[o.b.TOP,o.b.BOTTOM].includes(t)?{offsetX:0,offsetY:t===o.b.TOP?-8:8,style:{textAlign:"center",textBaseline:t===o.b.TOP?"bottom":"top"}}:[o.b.LEFT,o.b.RIGHT].includes(t)?{offsetX:t===o.b.LEFT?-8:8,offsetY:0,style:{textAlign:t===o.b.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function i(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}e.a=r,e.b=i;var o=n(11)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8";t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"}(r||(r={}))},function(t,e,n){"use strict";function r(t,e){if(t){if(i.default(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(o.default(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(57),o=n(203);e.default=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=r},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}e.a=i},function(t,e,n){"use strict";e.a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var i=e-t;return i?r(t,i>180||i<-180?i-360*Math.round(i/360):i):n.i(u.a)(isNaN(t)?e:t)}function a(t){return 1==(t=+t)?s:function(e,r){return r-e?i(e,r,t):n.i(u.a)(isNaN(e)?r:e)}}function s(t,e){var i=e-t;return i?r(t,i):n.i(u.a)(isNaN(t)?e:t)}e.b=o,e.c=a,e.a=s;var u=n(373)},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";function r(t,e,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.style[e]}catch(t){}finally{r=void 0===r?n:r}return r}e.a=r},function(t,e,n){"use strict";var r=n(508);n.d(e,"a",function(){return r.a});var i=n(509);n.d(e,"c",function(){return i.a});var o=(n(250),n(510),n(511),n(512),n(96),n(251),n(513));n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39);n.d(e,"Base",function(){return r.a});var i=n(533);n.d(e,"Circle",function(){return i.a});var o=n(534);n.d(e,"Ellipse",function(){return o.a});var a=n(535);n.d(e,"Image",function(){return a.a});var s=n(536);n.d(e,"Line",function(){return s.a});var u=n(537);n.d(e,"Marker",function(){return u.a});var l=n(538);n.d(e,"Path",function(){return l.a});var c=n(539);n.d(e,"Polygon",function(){return c.a});var h=n(540);n.d(e,"Polyline",function(){return h.a});var f=n(541);n.d(e,"Rect",function(){return f.a});var p=n(542);n.d(e,"Text",function(){return p.a})},function(t,e,n){"use strict";function r(t,e){var r=e.attr();for(var i in r){var o=r[i],a=v[i]?v[i]:i;"matrix"===a&&o?t.transform(o[0],o[1],o[3],o[4],o[6],o[7]):"lineDash"===a&&t.setLineDash?n.i(c.isArray)(o)&&t.setLineDash(o):("strokeStyle"===a||"fillStyle"===a?o=n.i(h.b)(t,e,o):"globalAlpha"===a&&(o*=t.globalAlpha),t[a]=o)}}function i(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.get("visible")?i.draw(t,n):i.skipDraw()}}function o(t,e,r,i){var o=r.path,a=r.startArrow,s=r.endArrow,u=[0,0],l=[0,0],c={dx:0,dy:0};e.beginPath();for(var h=0;h<o.length;h++){var p=o[h],v=p[0];if(0===h&&a&&a.d){var g=t.getStartTangent();c=d.c(g[0][0],g[0][1],g[1][0],g[1][1],a.d)}else if(h===o.length-2&&"Z"===o[h+1][0]&&s&&s.d){var m=o[h+1];if("Z"===m[0]){var g=t.getEndTangent();c=d.c(g[0][0],g[0][1],g[1][0],g[1][1],s.d)}}else if(h===o.length-1&&s&&s.d&&"Z"!==o[0]){var g=t.getEndTangent();c=d.c(g[0][0],g[0][1],g[1][0],g[1][1],s.d)}var y=c.dx,_=c.dy;switch(v){case"M":e.moveTo(p[1]-y,p[2]-_),l=[p[1],p[2]];break;case"L":e.lineTo(p[1]-y,p[2]-_);break;case"Q":e.quadraticCurveTo(p[1],p[2],p[3]-y,p[4]-_);break;case"C":e.bezierCurveTo(p[1],p[2],p[3],p[4],p[5]-y,p[6]-_);break;case"A":var b=void 0;i?(b=i[h])||(b=n.i(f.a)(u,p),i[h]=b):b=n.i(f.a)(u,p);var x=b.cx,w=b.cy,S=b.rx,E=b.ry,M=b.startAngle,T=b.endAngle,C=b.xRotation,A=b.sweepFlag;if(e.ellipse)e.ellipse(x,w,S,E,C,M,T,1-A);else{var P=S>E?S:E,k=S>E?1:S/E,I=S>E?E/S:1;e.translate(x,w),e.rotate(C),e.scale(k,I),e.arc(0,0,P,M,T,1-A),e.scale(1/k,1/I),e.rotate(-C),e.translate(-x,-w)}break;case"Z":e.closePath()}if("Z"===v)u=l;else{var O=p.length;u=[p[O-2],p[O-1]]}}}function a(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw(),t.set("hasChanged",!0)))}function s(t){var e;if(t.destroyed)e=t._cacheCanvasBBox;else{var r=t.get("cacheCanvasBBox"),i=r&&!(!r.width||!r.height),o=t.getCanvasBBox(),a=o&&!(!o.width||!o.height);i&&a?e=n.i(p.g)(r,o):i?e=r:a&&(e=o)}return e}function u(t){if(!t.length)return null;var e=[],r=[],i=[],o=[];return n.i(c.each)(t,function(t){var n=s(t);n&&(e.push(n.minX),r.push(n.minY),i.push(n.maxX),o.push(n.maxY))}),{minX:Math.min.apply(null,e),minY:Math.min.apply(null,r),maxX:Math.max.apply(null,i),maxY:Math.max.apply(null,o)}}function l(t,e){return t&&e&&n.i(p.h)(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}e.c=r,e.e=i,e.a=o,e.b=a,e.d=u,e.f=l;var c=n(0),h=n(266),f=n(543),p=n(31),d=n(124),v={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"}},function(t,e,n){"use strict";function r(t,e){var n=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}function i(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);r=r.join(","),-1===r.indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function o(t,e){var r=t.getClip(),i=t.get("el");if(r){if(r&&!i.hasAttribute("clip-path")){n.i(a.a)(r),r.createPath(e);var o=e.addClip(r);i.setAttribute("clip-path","url(#"+o+")")}}else i.removeAttribute("clip-path")}e.c=r,e.a=i,e.b=o;var a=n(40)},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e=!1);var r,i,o=t.x,s=t.y,u=t.y0,l=t.size;n.i(a.isArray)(s)?(r=s[0],i=s[1]):(r=u,i=s);var c,h;n.i(a.isArray)(o)?(c=o[0],h=o[1]):(c=o-l/2,h=o+l/2);var f=[{x:c,y:r},{x:c,y:i}];return e?f.push({x:h,y:(i+r)/2}):f.push({x:h,y:i},{x:h,y:r}),f}function i(t){var e=[],n=t[0];e.push(["M",n.x,n.y]);for(var r=1,i=t.length;r<i;r++)e.push(["L",t[r].x,t[r].y]);return e.push(["L",n.x,n.y]),e.push(["z"]),e}function o(t,e,r){var i=[];return n.i(a.isNil)(e)?r?i.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[2].x,t[2].y],["Z"]):i.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]):i.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",e[1].x,e[1].y],["L",e[0].x,e[0].y],["Z"]),i}e.a=r,e.c=i,e.b=o;var a=n(0)},function(t,e,n){"use strict";function r(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var o=t[r];n.push(["L",o.x,o.y])}e&&n.push(["Z"])}return n}function i(t,e){for(var n=[t[0]],r=1,i=t.length;r<i;r+=2){var o=e.convert({x:t[r],y:t[r+1]});n.push(o.x,o.y)}return n}function o(t,e,r){var i=r.isTransposed,o=r.startAngle,a=r.endAngle,s={x:t[1],y:t[2]},u={x:e[1],y:e[2]},l=[],c=i?"y":"x",h=Math.abs(u[c]-s[c])*(a-o),f=u[c]>=s[c]?1:0,p=h>Math.PI?1:0,v=r.convert(u),g=n.i(d.a)(r,v);if(g>=.5)if(h===2*Math.PI){var m={x:(u.x+s.x)/2,y:(u.y+s.y)/2},y=r.convert(m);l.push(["A",g,g,0,p,f,y.x,y.y]),l.push(["A",g,g,0,p,f,v.x,v.y])}else l.push(["A",g,g,0,p,f,v.x,v.y]);return l}function a(t){n.i(p.each)(t,function(e,n){if("a"===e[0].toLowerCase()){var r=t[n-1],i=t[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}})}function s(t,e,n){for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);for(var s,u,l,c=v(i,.4,r,n),h=i.length,f=[],o=0;o<h-1;o++)s=c[2*o],u=c[2*o+1],l=i[o+1],f.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]]);return r&&(s=c[h],u=c[h+1],l=i[0],f.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]])),f}function u(t,e){return r(t,e)}function l(t,e,n){var r=[],i=t[0],o=null;if(t.length<=2)return u(t,e);for(var a=0,l=t.length;a<l;a++){var c=t[a];o&&o.x===c.x&&o.y===c.y||(r.push(c.x),r.push(c.y),o=c)}var h=n||[[0,0],[1,1]],f=s(r,e,h);return f.unshift(["M",i.x,i.y]),f}function c(t,e){var r=[];return n.i(p.each)(e,function(e){switch(e[0].toLowerCase()){case"m":case"l":case"c":r.push(i(e,t));break;case"z":default:r.push(e)}}),r}function h(t,e){var r,s,u,l,c=[];return n.i(p.each)(e,function(n,a){switch(n[0].toLowerCase()){case"m":case"c":case"q":c.push(i(n,t));break;case"l":r=e[a-1],s=n,u=t.isTransposed,l=u?r[r.length-2]===s[1]:r[r.length-1]===s[2],l?c=c.concat(o(r,s,t)):c.push(i(n,t));break;case"z":default:c.push(n)}}),a(c),c}e.b=s,e.a=u,e.e=l,e.d=c,e.c=h;var f=n(24),p=n(0),d=n(42),v=function(t,e,n,r){var i,o,a,s,u=[],l=!!r;if(l){a=[1/0,1/0],s=[-1/0,-1/0];for(var c=0,h=t.length;c<h;c++){var p=t[c];a=f.c.min([],a,p),s=f.c.max([],s,p)}a=f.c.min([],a,r[0]),s=f.c.max([],s,r[1])}for(var c=0,d=t.length;c<d;c++){var p=t[c];if(n)i=t[c?c-1:d-1],o=t[(c+1)%d];else{if(0===c||c===d-1){u.push(p);continue}i=t[c-1],o=t[c+1]}var v=[];v=f.c.sub(v,o,i),v=f.c.scale(v,v,e);var g=f.c.distance(p,i),m=f.c.distance(p,o),y=g+m;0!==y&&(g/=y,m/=y);var _=f.c.scale([],v,-g),b=f.c.scale([],v,m),x=f.c.add([],p,_),w=f.c.add([],p,b);l&&(x=f.c.max([],x,a),x=f.c.min([],x,s),w=f.c.max([],w,a),w=f.c.min([],w,s)),u.push(x),u.push(w)}return n&&u.push(u.shift()),u}},function(t,e,n){"use strict";function r(t){return[[t.minX,t.minY],[t.maxX,t.minY],[t.maxX,t.maxY],[t.minX,t.maxY]]}n.d(e,"b",function(){return s}),e.a=r;var i=n(0),o=n(11),a=n(193),s=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.height=r,this.width=n}return t.fromRange=function(e,n,r,i){return new t(e,n,r-e,i-n)},Object.defineProperty(t.prototype,"minX",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.clone();return n.i(i.each)(t,function(t){r.x=Math.min(t.x,r.x),r.y=Math.min(t.y,r.y),r.width=Math.max(t.maxX,r.maxX)-r.x,r.height=Math.max(t.maxY,r.maxY)-r.y}),r},t.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.clone();return n.i(i.each)(t,function(t){r.x=Math.max(t.x,r.x),r.y=Math.max(t.y,r.y),r.width=Math.min(t.maxX,r.maxX)-r.x,r.height=Math.min(t.maxY,r.maxY)-r.y}),r},t.prototype.cut=function(e,n){var r=e.width,i=e.height;switch(n){case o.b.TOP:case o.b.TOP_LEFT:case o.b.TOP_RIGHT:return t.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case o.b.RIGHT:case o.b.RIGHT_TOP:case o.b.RIGHT_BOTTOM:return t.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case o.b.BOTTOM:case o.b.BOTTOM_LEFT:case o.b.BOTTOM_RIGHT:return t.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case o.b.LEFT:case o.b.LEFT_TOP:case o.b.LEFT_BOTTOM:return t.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},t.prototype.shrink=function(e){var r=n.i(a.a)(e),i=r[0],o=r[1],s=r[2],u=r[3];return new t(this.x+u,this.y+i,this.width-u-o,this.height-i-s)},t.prototype.exceed=function(t){return[Math.max(-this.minY+t.minY,0),Math.max(this.maxX-t.maxX,0),Math.max(this.maxY-t.maxY,0),Math.max(-this.minX+t.minX,0)]},t.prototype.size=function(){return this.width*this.height},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={hexagon:function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},bowtie:function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},cross:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},tick:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},plus:function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},hyphen:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},line:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]}}},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){s()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return w});var o,a=n(9),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(6),p=n.n(f),d=n(4),v=n.n(d),g=n(5),m=n.n(g),y=n(8),_=n(10),b=n(49);n.n(b);!function(t){t.TOPRIGHT="topright",t.TOPLEFT="topleft",t.BOTTOMRIGHT="bottomright",t.BOTTOMLEFT="bottomleft"}(o||(o={}));var x=0,w=function(t){function e(t){var n;return l()(this,e),n=p()(this,v()(e).call(this)),n.controlOption=void 0,n.container=void 0,n.sceneContainer=void 0,n.mapsService=void 0,n.renderService=void 0,n.layerService=void 0,n.controlService=void 0,n.isShow=void 0,n.controlOption=i({},n.getDefault(),{},t||{}),n}return m()(e,t),h()(e,[{key:"getDefault",value:function(){return{position:o.TOPRIGHT,name:"".concat(x++)}}},{key:"setPosition",value:function(t){var e=this.controlService;return e&&e.removeControl(this),this.controlOption.position=t,e&&e.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(t){this.mapsService=t.get(y.TYPES.IMapService),this.renderService=t.get(y.TYPES.IRendererService),this.layerService=t.get(y.TYPES.ILayerService),this.controlService=t.get(y.TYPES.IControlService),this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd();var e=this.container,n=this.controlOption.position,r=this.controlService.controlCorners[n];return _.b.addClass(e,"l7-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var t=this.container;_.b.addClass(t,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var t=this.container;_.b.removeClass(t,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;_.b.remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){var e=this.mapsService.getContainer();null!==e&&e.focus()}}}]),e}(b.EventEmitter)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.Hover="hover",t.Click="click",t.Select="select",t.Active="active",t.Drag="drag"}(r||(r={}))},function(t,e,n){"use strict";var r=n(0),i=n(326),o=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){n.i(r.assign)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return n.i(r.map)(this.ticks,function(e,i){return n.i(r.isObject)(e)?e:{text:t.getText(e,i),tickValue:e,value:t.scale(e)}})},t.prototype.getText=function(t,e){var i=this.formatter,o=i?i(t,e):t;return n.i(r.isNil)(o)||!n.i(r.isFunction)(o.toString)?"":o.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){n.i(r.assign)(this,this.__cfg__),this.setDomain(),n.i(r.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(n.i(r.isString)(t)){var o=n.i(i.a)(t);if(!o)throw new Error("There is no method to to calculate ticks!");e=o(this)}else n.i(r.isFunction)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return n.i(r.head)(this.range)},t.prototype.rangeMax=function(){return n.i(r.last)(this.range)},t.prototype.calcPercent=function(t,e,i){return n.i(r.isNumber)(t)?(t-e)/(i-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}();e.a=o},function(t,e,n){"use strict";var r=n(200),i=n(43),o=function(t){if(!n.i(r.a)(t)||!n.i(i.a)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};e.a=o},function(t,e,n){"use strict";var r=n(66);e.a=function(t){return n.i(r.a)(t)?"":t.toString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return null===t||void 0===t};e.default=r},function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=r},function(t,e,n){function r(t,e){if(null==t)return{};var n,r,o=i(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var i=n(982);t.exports=r},function(t,e,n){"use strict";e.a=function(t){return null===t?NaN:+t}},function(t,e,n){"use strict";function r(){var t=new N.a(2);return N.a!=Float32Array&&(t[0]=0,t[1]=0),t}function i(t){var e=new N.a(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new N.a(2);return n[0]=t,n[1]=e,n}function a(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,n){return t[0]=e,t[1]=n,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function c(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function d(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function m(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function y(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function x(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function w(t){var e=t[0],n=t[1];return e*e+n*n}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t}function E(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function M(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]}function C(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function A(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function P(t,e){e=e||1;var n=2*N.b()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function k(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function I(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function O(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function j(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function L(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function D(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function R(t){return t[0]=0,t[1]=0,t}function B(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,e){return t[0]===e[0]&&t[1]===e[1]}function F(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=N.c*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=N.c*Math.max(1,Math.abs(r),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.fromValues=o,e.copy=a,e.set=s,e.add=u,e.subtract=l,e.multiply=c,e.divide=h,e.ceil=f,e.floor=p,e.min=d,e.max=v,e.round=g,e.scale=m,e.scaleAndAdd=y,e.distance=_,e.squaredDistance=b,e.length=x,e.squaredLength=w,e.negate=S,e.inverse=E,e.normalize=M,e.dot=T,e.cross=C,e.lerp=A,e.random=P,e.transformMat2=k,e.transformMat2d=I,e.transformMat3=O,e.transformMat4=j,e.rotate=L,e.angle=D,e.zero=R,e.str=B,e.exactEquals=z,e.equals=F,n.d(e,"len",function(){return U}),n.d(e,"sub",function(){return V}),n.d(e,"mul",function(){return G}),n.d(e,"div",function(){return q}),n.d(e,"dist",function(){return H}),n.d(e,"sqrDist",function(){return Y}),n.d(e,"sqrLen",function(){return X}),n.d(e,"forEach",function(){return W});var N=n(50),U=x,V=l,G=c,q=h,H=_,Y=b,X=w,W=function(){var t=r();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";function r(t){if("function"==typeof t){var e=t;return e.name}if("symbol"==typeof t)return t.toString();var e=t;return e}function i(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach(function(t){var e="Object";null!==t.implementationType&&(e=l(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)})),r}function o(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||o(t.parentRequest,e))}function a(t){function e(t,n){void 0===n&&(n=[]);var i=r(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}return e(t).reverse().join(" --\x3e ")}function s(t){t.childRequests.forEach(function(t){if(o(t,t.serviceIdentifier)){var e=a(t);throw new Error(c.CIRCULAR_DEPENDENCY+" "+e)}s(t)})}function u(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n}return" "+t}function l(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}Object.defineProperty(e,"__esModule",{value:!0});var c=n(34);e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=i,e.circularDependencyToException=s,e.listMetadataForTarget=u,e.getFunctionName=l},function(t,e,n){function r(t,e,n,r){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=r?r(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?o(n,l,c):i(n,l,c)}return n}var i=n(403),o=n(228);t.exports=r},function(t,e,n){function r(t){if(!o(t))return!1;var e=i(t);return e==s||e==u||e==a||e==l}var i=n(70),o=n(52),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";t.exports=r},function(t,e){function n(t){return null==t}t.exports=n},function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"a",function(){return a});var r=n(240),i=n(239);n.d(e,"b",function(){return i.a}),n.d(e,"e",function(){return i.c}),n.d(e,"c",function(){return i.b});var o="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",a=n.i(r.a)()},function(t,e,n){"use strict";function r(t){return Math.pow(2,t)}function i(t){return Math.log2(t)}function o(t,e){var r=n.i(p.a)(t,2),i=r[0],o=r[1];n.i(y.a)(Number.isFinite(i)&&Number.isFinite(e)),n.i(y.a)(Number.isFinite(o)&&o>=-90&&o<=90,"invalid latitude"),e*=S;var a=i*x,s=o*x;return[e*(a+_)/(2*_),e*(_-Math.log(Math.tan(b+.5*s)))/(2*_)]}function a(t,e){var r=n.i(p.a)(t,2),i=r[0],o=r[1];e*=S;var a=i/e*(2*_)-_,s=2*(Math.atan(Math.exp(_-o/e*(2*_)))-b);return[a*w,s*w]}function s(t){var e=t.latitude,i=t.longitude,o=t.zoom,a=t.scale,s=t.highPrecision,u=void 0!==s&&s;a=void 0!==a?a:r(o),n.i(y.a)(Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(a));var l={},c=S*a,h=Math.cos(e*x),f=c/360,p=f/h,d=c/E/h;if(l.pixelsPerMeter=[d,-d,d],l.metersPerPixel=[1/d,-1/d,1/d],l.pixelsPerDegree=[f,-p,d],l.degreesPerPixel=[1/f,-1/p,1/d],u){var v=x*Math.tan(e*x)/h,g=f*v/2,m=c/E*v,_=m/p*d;l.pixelsPerDegree2=[0,-g,m],l.pixelsPerMeter2=[_,0,_]}return l}function u(t){var e=t.height,r=t.pitch,i=t.bearing,o=t.altitude,a=t.center,s=void 0===a?null:a,u=t.flipY,l=void 0!==u&&u,c=n.i(d.a)();return v.translate(c,c,[0,0,-o]),v.scale(c,c,[1,1,1/e]),v.rotateX(c,c,-r*x),v.rotateZ(c,c,i*x),l&&v.scale(c,c,[1,-1,1]),s&&v.translate(c,c,m.negate([],s)),c}function l(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?M:r,o=t.pitch,a=void 0===o?0:o,s=t.nearZMultiplier,u=void 0===s?1:s,l=t.farZMultiplier,c=void 0===l?1:l,h=a*x,f=Math.atan(.5/i),p=Math.sin(f)*i/Math.sin(Math.PI/2-h-f),d=Math.cos(Math.PI/2-h)*p+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:u,far:d*c}}function c(t){var e=t.width,n=t.height,r=t.pitch,i=t.altitude,o=t.nearZMultiplier,a=t.farZMultiplier,s=l({width:e,height:n,altitude:i,pitch:r,nearZMultiplier:o,farZMultiplier:a}),u=s.fov,c=s.aspect,h=s.near,f=s.far;return v.perspective([],u,c,h,f)}function h(t,e){var r=n.i(p.a)(t,3),i=r[0],o=r[1],a=r[2],s=void 0===a?0:a;return n.i(y.a)(Number.isFinite(i)&&Number.isFinite(o)&&Number.isFinite(s)),n.i(d.b)(e,[i,o,s,1])}function f(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=n.i(p.a)(t,3),o=i[0],a=i[1],s=i[2];if(n.i(y.a)(Number.isFinite(o)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(s)){return n.i(d.b)(e,[o,a,s,1])}var u=n.i(d.b)(e,[o,a,0,1]),l=n.i(d.b)(e,[o,a,1,1]),c=u[2],h=l[2],f=c===h?0:((r||0)-c)/(h-c);return g.lerp([],u,l,f)}e.c=r,e.a=i,e.d=o,e.b=a,e.g=s,e.f=u,e.e=c,e.i=h,e.h=f;var p=n(205),d=n(157),v=n(145),g=n(114),m=n(146),y=n(436),_=Math.PI,b=_/4,x=_/180,w=180/_,S=512,E=4003e4,M=1.5},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(91),i=n(92),o=n(973),a=n(967),s=n(968),u=n(347),l=n(1256),c=n(120),h=n(437),f=n(114),p=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.width,l=i.height,h=i.latitude,f=void 0===h?0:h,p=i.longitude,d=void 0===p?0:p,v=i.zoom,g=void 0===v?0:v,m=i.pitch,y=void 0===m?0:m,_=i.bearing,b=void 0===_?0:_,x=i.altitude,w=void 0===x?1.5:x,S=i.nearZMultiplier,E=i.farZMultiplier;n.i(r.a)(this,e),s=s||1,l=l||1;var M=n.i(c.c)(g);w=Math.max(.75,w);var T=n.i(c.d)([d,f],M);T[2]=0;var C=n.i(c.e)({width:s,height:l,pitch:y,bearing:b,altitude:w,nearZMultiplier:S||1/l,farZMultiplier:E||1.01}),A=n.i(c.f)({height:l,center:T,pitch:y,bearing:b,altitude:w,flipY:!0});return t=n.i(o.a)(this,n.i(a.a)(e).call(this,{width:s,height:l,viewMatrix:A,projectionMatrix:C})),t.latitude=f,t.longitude=d,t.zoom=g,t.pitch=y,t.bearing=b,t.altitude=w,t.scale=M,t.center=T,t.pixelsPerMeter=n.i(c.g)(n.i(u.a)(n.i(u.a)(t))).pixelsPerMeter[2],Object.freeze(n.i(u.a)(n.i(u.a)(t))),t}return n.i(s.a)(e,t),n.i(i.a)(e,[{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return n.i(c.d)(t,e)}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return n.i(c.b)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,r=t.pos,i=n.i(c.h)(r,this.pixelUnprojectionMatrix),o=n.i(c.d)(e,this.scale),a=f.add([],o,f.negate([],i)),s=f.add([],this.center,a);return n.i(c.b)(s,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.width,o=this.height,a=n.i(h.a)(Object.assign({width:i,height:o,bounds:t},r));return new e({width:i,height:o,longitude:a.longitude,latitude:a.latitude,zoom:a.zoom})}}]),e}(l.a)},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(0),a=function(){function t(t){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=t.start,i=t.end,o=t.matrix,a=void 0===o?[1,0,0,0,1,0,0,0,1]:o,s=t.isTransposed,u=void 0!==s&&s;this.start=e,this.end=i,this.matrix=a,this.originalMatrix=n.i(r.__spreadArrays)(a),this.isTransposed=u}return t.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},t.prototype.update=function(t){o.assign(this,t),this.initial()},t.prototype.convertDim=function(t,e){var n,r=this[e],i=r.start,o=r.end;return this.isReflect(e)&&(n=[o,i],i=n[0],o=n[1]),i+t*(o-i)},t.prototype.invertDim=function(t,e){var n,r=this[e],i=r.start,o=r.end;return this.isReflect(e)&&(n=[o,i],i=n[0],o=n[1]),(t-i)/(o-i)},t.prototype.applyMatrix=function(t,e,n){void 0===n&&(n=0);var r=this.matrix,o=[t,e,n];return i.b.transformMat3(o,o,r),o},t.prototype.invertMatrix=function(t,e,n){void 0===n&&(n=0);var r=this.matrix,o=i.d.invert([],r),a=[t,e,n];return o&&i.b.transformMat3(a,a,o),a},t.prototype.convert=function(t){var e=this.convertPoint(t),n=e.x,r=e.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},t.prototype.invert=function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})},t.prototype.rotate=function(t){var e=this.matrix,n=this.center;return i.d.translate(e,e,[-n.x,-n.y]),i.d.rotate(e,e,t),i.d.translate(e,e,[n.x,n.y]),this},t.prototype.reflect=function(t){return"x"===t?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},t.prototype.scale=function(t,e){var n=this.matrix,r=this.center;return i.d.translate(n,n,[-r.x,-r.y]),i.d.scale(n,n,[t,e]),i.d.translate(n,n,[r.x,r.y]),this},t.prototype.translate=function(t,e){var n=this.matrix;return i.d.translate(n,n,[t,e]),this},t.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},t.prototype.getCenter=function(){return this.center},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRadius=function(){return this.radius},t.prototype.isReflect=function(t){return"x"===t?this.isReflectX:this.isReflectY},t.prototype.resetMatrix=function(t){this.matrix=t||n.i(r.__spreadArrays)(this.originalMatrix)},t}();e.a=a},function(t,e,n){"use strict";function r(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function i(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function o(t){return t.cfg.visible&&t.cfg.capture}e.a=r,n.d(e,"i",function(){return b}),e.b=i,e.g=o;var a=n(110),s=(n.n(a),n(139)),u=n.n(s);n.d(e,"f",function(){return u.a});var l=n(78),c=n.n(l);n.d(e,"h",function(){return c.a});var h=n(203),f=n.n(h);n.d(e,"d",function(){return f.a});var p=n(57),d=(n.n(p),n(342)),v=n.n(d);n.d(e,"j",function(){return v.a});var g=n(90),m=n.n(g);n.d(e,"c",function(){return m.a});var y=n(344),_=n.n(y);n.d(e,"e",function(){return _.a});var b="undefined"!=typeof window&&void 0!==window.document},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){var s=e.stroke,u=e.lineWidth,d=n-i,v=r-o,g=f(v,d),m=new l.Path({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*h(p/6)+","+10*c(p/6)+" L0,0 L"+10*h(p/6)+",-"+10*c(p/6),stroke:s,lineWidth:u}});m.translate(i,o),m.rotateAtPoint(i,o,g),t.set(a?"startArrowShape":"endArrowShape",m)}function i(t,e,r,i,o,a,s){var p=e.startArrow,d=e.endArrow,v=e.stroke,g=e.lineWidth,m=s?p:d,y=m.d,_=m.fill,b=m.stroke,x=m.lineWidth,w=n.i(u.__rest)(m,["d","fill","stroke","lineWidth"]),S=r-o,E=i-a,M=f(E,S);y&&(o-=h(M)*y,a-=c(M)*y);var T=new l.Path({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:n.i(u.__assign)(n.i(u.__assign)({},w),{stroke:b||v,lineWidth:x||g,fill:_})});T.translate(o,a),T.rotateAtPoint(o,a,M),t.set(s?"startArrowShape":"endArrowShape",T)}function o(t,e,n,r,i){var o=f(r-e,n-t);return{dx:h(o)*i,dy:c(o)*i}}function a(t,e,n,o,a,s){"object"==typeof e.startArrow?i(t,e,n,o,a,s,!0):e.startArrow?r(t,e,n,o,a,s,!0):t.set("startArrowShape",null)}function s(t,e,n,o,a,s){"object"==typeof e.endArrow?i(t,e,n,o,a,s,!1):e.endArrow?r(t,e,n,o,a,s,!1):t.set("startArrowShape",null)}e.c=o,e.a=a,e.b=s;var u=n(1),l=n(98),c=Math.sin,h=Math.cos,f=Math.atan2,p=Math.PI},function(t,e,n){"use strict";function r(t,e,n,r,i,a,s){var u=Math.min(t,n),l=Math.max(t,n),c=Math.min(e,r),h=Math.max(e,r),f=i/2;return a>=u-f&&a<=l+f&&s>=c-f&&s<=h+f&&o.a.pointToLine(t,e,n,r,a,s)<=i/2}e.a=r;var i=n(62),o=n.n(i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(35);n.d(e,"Base",function(){return r.a});var i=n(562);n.d(e,"Circle",function(){return i.a});var o=n(563);n.d(e,"Dom",function(){return o.a});var a=n(564);n.d(e,"Ellipse",function(){return a.a});var s=n(565);n.d(e,"Image",function(){return s.a});var u=n(566);n.d(e,"Line",function(){return u.a});var l=n(567);n.d(e,"Marker",function(){return l.a});var c=n(569);n.d(e,"Path",function(){return c.a});var h=n(570);n.d(e,"Polygon",function(){return h.a});var f=n(571);n.d(e,"Polyline",function(){return f.a});var p=n(572);n.d(e,"Rect",function(){return p.a});var d=n(573);n.d(e,"Text",function(){return d.a})},function(t,e,n){"use strict";function r(t){var e=0;return n.i(o.each)(t,function(t){e+=t}),e/t.length}var i=n(1),o=n(0),a=n(11),s=n(73),u=n(36),l=n(596),c=function(){function t(t){this.geometry=t}return t.prototype.getLabelItems=function(t){var e=this,r=[],a=this.getLabelCfgs(t);return n.i(o.each)(t,function(t,s){var u=a[s];if(!u||n.i(o.isNil)(t.x)||n.i(o.isNil)(t.y))return void r.push(null);var l=n.i(o.isArray)(u.content)?u.content:[u.content];u.content=l;var c=l.length;n.i(o.each)(l,function(a,s){if(n.i(o.isNil)(a)||""===a)return void r.push(null);var l=n.i(i.__assign)(n.i(i.__assign)({},u),e.getLabelPoint(u,t,s));l.textAlign||(l.textAlign=e.getLabelAlign(l,s,c)),l.offset<=0&&(l.labelLine=null),r.push(l)})}),r},t.prototype.render=function(t,e){void 0===e&&(e=!1);var n=this.getLabelItems(t),r=this.getLabelsRenderer(),i=this.getGeometryShapes();r.render(n,i,e)},t.prototype.clear=function(){var t=this.labelsRenderer;t&&t.clear()},t.prototype.destroy=function(){var t=this.labelsRenderer;t&&t.destroy(),this.labelsRenderer=null},t.prototype.getCoordinate=function(){return this.geometry.coordinate},t.prototype.getDefaultLabelCfg=function(){return n.i(o.get)(this.geometry.theme,"labels",{})},t.prototype.setLabelPosition=function(t,e,n,r){},t.prototype.getDefaultOffset=function(t){var e=this.getCoordinate(),n=this.getOffsetVector(t);return e.isTransposed?n[0]:n[1]},t.prototype.getLabelOffset=function(t,e,n){var r=this.getDefaultOffset(t.offset),i=this.getCoordinate(),o=i.isTransposed,a=o?"x":"y",s=o?1:-1,u={x:0,y:0};return u[a]=e>0||1===n?r*s:r*s*-1,u},t.prototype.getLabelPoint=function(t,e,i){function a(e,i){var a=e;return n.i(o.isArray)(a)&&(a=1===t.content.length?a.length<=2?a[e.length-1]:r(a):a[i]),a}var s=this.getCoordinate(),l=t.content.length,c={content:t.content[i],x:0,y:0,start:{x:0,y:0},color:"#fff"};if(e&&"polygon"===this.geometry.type){var h=n.i(u.f)(e.x,e.y);c.x=h[0],c.y=h[1]}else c.x=a(e.x,i),c.y=a(e.y,i);var f=n.i(o.isArray)(e.shape)?e.shape[0]:e.shape;if("funnel"===f||"pyramid"===f){var p=n.i(o.get)(e,"nextPoints"),d=n.i(o.get)(e,"points");if(p){var v=s.convert(d[1]),g=s.convert(p[1]);c.x=(v.x+g.x)/2,c.y=(v.y+g.y)/2}else if("pyramid"===f){var v=s.convert(d[1]),g=s.convert(d[2]);c.x=(v.x+g.x)/2,c.y=(v.y+g.y)/2}}t.position&&this.setLabelPosition(c,e,i,t.position);var m=this.getLabelOffset(t,i,l);return c.start={x:c.x,y:c.y},c.x+=m.x,c.y+=m.y,c.color=e.color,c},t.prototype.getLabelAlign=function(t,e,n){var r="center";if(this.getCoordinate().isTransposed){var i=this.getDefaultOffset(t.offset);r=i<0?"right":0===i?"center":"left",n>1&&0===e&&("right"===r?r="left":"left"===r&&(r="right"))}return r},t.prototype.getLabelId=function(t){var e=this.geometry,n=e.type,r=e.getXScale(),i=e.getYScale(),o=t[a.f],s=e.getElementId(t);return"line"===n||"area"===n?s+=" "+o[r.field]:"path"===n&&(s+=" "+o[r.field]+"-"+o[i.field]),s},t.prototype.getLabelsRenderer=function(){var t=this.geometry,e=t.labelsContainer,r=t.labelOption,i=t.canvasRegion,a=t.animateOption,u=this.geometry.coordinate,c=this.labelsRenderer;return c||(c=new l.a({container:e,layout:n.i(o.get)(r,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=c),c.region=i,c.animate=!!a&&n.i(s.a)("label",u),c},t.prototype.getLabelCfgs=function(t){var e=this,r=this.geometry,s=this.getDefaultLabelCfg(),u=r.type,l=r.theme,c=r.labelOption,h=r.scales,f=r.coordinate,p=c,d=p.fields,v=p.callback,g=p.cfg,m=d.map(function(t){return h[t]}),y=[];return n.i(o.each)(t,function(t,r){var c,h=t[a.f],p=e.getLabelText(h,m);if(v){var _=d.map(function(t){return h[t]});if(c=v.apply(void 0,_),n.i(o.isNil)(c))return void y.push(null)}var b=n.i(i.__assign)(n.i(i.__assign)({id:e.getLabelId(t),data:h,mappingData:t,coordinate:f},g),c),x=b.content;n.i(o.isFunction)(x)?b.content=x(h,t,r):n.i(o.isUndefined)(x)&&(b.content=p[0]),n.i(o.isFunction)(b.position)&&(b.position=b.position(h,t,r)),b="polygon"===u||b.offset<0&&!["line","point","path"].includes(u)?n.i(o.deepMix)({},s,l.innerLabels,b):n.i(o.deepMix)({},s,l.labels,b),y.push(b)}),y},t.prototype.getLabelText=function(t,e){var r=[];return n.i(o.each)(e,function(e){var i=t[e.field];i=n.i(o.isArray)(i)?i.map(function(t){return e.getText(t)}):e.getText(i),n.i(o.isNil)(i)||""===i?r.push(null):r.push(i)}),r},t.prototype.getOffsetVector=function(t){void 0===t&&(t=0);var e=this.getCoordinate();return e.isTransposed?e.applyMatrix(t,0):e.applyMatrix(0,t)},t.prototype.getGeometryShapes=function(){var t=this.geometry,e={};return n.i(o.each)(t.elementsMap,function(t,n){e[n]=t.shape}),n.i(o.each)(t.getOffscreenGroup().getChildren(),function(n){var r=t.getElementId(n.get("origin").mappingData);e[r]=n}),e},t}();e.a=c},function(t,e,n){"use strict";function r(t,e,r,i,o){for(var s=[],u=[],c=0,h=t.length;c<h;c++){var f=t[c];s.push(f[1]),u.push(f[0])}u=u.reverse();var p=[];return n.i(a.each)([s,u],function(t,a){var s=[],u=i.parsePoints(t),c=u[0];e&&u.push({x:c.x,y:c.y}),s=r?n.i(l.e)(u,!1,o):n.i(l.a)(u,!1),a>0&&(s[0][0]="L"),p=p.concat(s)}),p.push(["Z"]),p}function i(t,e,i,o,a){for(var l=n.i(u.a)(t,e,!e,"lineWidth"),c=t.connectNulls,h=t.isInCircle,f=t.points,p=n.i(s.a)(f,c),d=[],v=0,g=p.length;v<g;v++){var m=p[v];d=d.concat(r(m,h,i,o,a))}return l.path=d,l}function o(t){var e=t.start,n=t.end;return[[e.x,n.y],[n.x,e.y]]}e.a=i,e.b=o;var a=n(0),s=n(181),u=n(19),l=n(102)},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(25),a=n(16),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return n.i(r.__extends)(e,t),e.prototype.getTriggerListInfo=function(){var t=n.i(a.j)(this.context),e=null;return n.i(a.k)(t)&&(e={item:t.item,list:t.component}),e},e.prototype.getAllowComponents=function(){var t=this,e=this.context.view,r=n.i(a.a)(e),o=[];return n.i(i.each)(r,function(e){e.isList()&&t.allowSetStateByElement(e)&&o.push(e)}),o},e.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},e.prototype.clearAllComponentsState=function(){var t=this,e=this.getAllowComponents();n.i(i.each)(e,function(e){e.clearItemsState(t.stateName)})},e.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var r=t.get("name");if(-1===this.cfg.componentNames.indexOf(r))return!1}var i=this.context.view,o=n.i(a.l)(i,e);return o&&o.isCategory},e.prototype.allowSetStateByItem=function(t,e){var n=this.ignoreItemStates;if(n.length){return 0===n.filter(function(n){return e.hasState(t,n)}).length}return!0},e.prototype.setStateByElement=function(t,e,r){var i=t.get("field"),o=this.context.view,s=n.i(a.l)(o,i),u=n.i(a.m)(e,i),l=s.getText(u);this.setItemsState(t,l,r)},e.prototype.setStateEnable=function(t){var e=this,r=n.i(a.p)(this.context);if(r){var o=this.getAllowComponents();n.i(i.each)(o,function(n){e.setStateByElement(n,r,t)})}else{var s=n.i(a.j)(this.context);if(n.i(a.k)(s)){var u=s.item,l=s.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(u,l)&&this.setItemState(l,u,t)}}},e.prototype.setItemsState=function(t,e,r){var o=this,a=t.getItems();n.i(i.each)(a,function(n){n.name===e&&o.setItemState(t,n,r)})},e.prototype.setItemState=function(t,e,n){t.setItemState(e,this.stateName,n)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.reset=function(){this.setStateEnable(!1)},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,r=this.hasState(e,n);this.setItemState(e,n,!r)}},e.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},e}(o.a);e.a=s},function(t,e,n){"use strict";function r(t){var e="linear";return c.test(t)?e="time":n.i(u.isString)(t)&&(e="cat"),e}function i(t,e,i){var o=e||[];if(n.i(u.isNumber)(t)||n.i(u.isNil)(n.i(u.firstValue)(o,t))&&n.i(u.isEmpty)(i)){return new(n.i(l.a)("identity"))({field:t.toString(),values:[t]})}var a=n.i(u.valuesOfKey)(o,t),c=n.i(u.get)(i,"type",r(a[0]));return new(n.i(l.a)(c))(n.i(s.__assign)({field:t,values:a},i))}function o(t,e){if("identity"!==t.type&&"identity"!==e.type){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);t.change(n)}}function a(t){return t.alias||t.field}e.b=i,e.c=o,e.a=a;var s=n(1),u=n(0),l=n(74),c=/^(?:(?!0000)[0-9]{4}([-\/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-\/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var r,i,o,a,s,u,l=n(14),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(13),g=n.n(v),m=n(15),y=(n.n(m),n(7)),_=(n.n(y),n(22)),b=n(76),x=(r=n.i(y.injectable)(),i=n.i(y.inject)(_.a.IShaderModuleService),r((a=u=function(){function t(){f()(this,t),c()(this,"shaderModuleService",s,this),this.rendererService=void 0,this.cameraService=void 0,this.mapService=void 0,this.interactionService=void 0,this.layerService=void 0,this.config=void 0}return d()(t,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return b.a.Normal}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(_.a.IRendererService),this.cameraService=t.getContainer().get(_.a.ICameraService),this.mapService=t.getContainer().get(_.a.IMapService),this.interactionService=t.getContainer().get(_.a.IInteractionService),this.layerService=t.getContainer().get(_.a.ILayerService)}},{key:"render",value:function(t){}}]),t}(),s=g()(a.prototype,"shaderModuleService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)},function(t,e,n){"use strict";n.d(e,"h",function(){return b}),n.d(e,"g",function(){return x}),n.d(e,"a",function(){return w}),n.d(e,"b",function(){return S}),n.d(e,"f",function(){return E}),n.d(e,"d",function(){return M}),n.d(e,"c",function(){return T}),n.d(e,"e",function(){return C}),n.d(e,"i",function(){return A}),n.d(e,"k",function(){return P}),n.d(e,"j",function(){return k}),n.d(e,"l",function(){return I}),n.d(e,"m",function(){return O}),n.d(e,"n",function(){return j});var r,i,o,a,s,u,l,c,h,f,p,d,v,g,m=n(9),y=n.n(m),_=n(8),b=(r={},y()(r,_.gl.POINTS,"points"),y()(r,_.gl.LINES,"lines"),y()(r,_.gl.LINE_LOOP,"line loop"),y()(r,_.gl.LINE_STRIP,"line strip"),y()(r,_.gl.TRIANGLES,"triangles"),y()(r,_.gl.TRIANGLE_FAN,"triangle fan"),y()(r,_.gl.TRIANGLE_STRIP,"triangle strip"),r),x=(i={},y()(i,_.gl.STATIC_DRAW,"static"),y()(i,_.gl.DYNAMIC_DRAW,"dynamic"),y()(i,_.gl.STREAM_DRAW,"stream"),i),w=(o={},y()(o,_.gl.BYTE,"int8"),y()(o,_.gl.UNSIGNED_INT,"int16"),y()(o,_.gl.INT,"int32"),y()(o,_.gl.UNSIGNED_BYTE,"uint8"),y()(o,_.gl.UNSIGNED_SHORT,"uint16"),y()(o,_.gl.UNSIGNED_INT,"uint32"),y()(o,_.gl.FLOAT,"float"),o),S=(a={},y()(a,_.gl.ALPHA,"alpha"),y()(a,_.gl.LUMINANCE,"luminance"),y()(a,_.gl.LUMINANCE_ALPHA,"luminance alpha"),y()(a,_.gl.RGB,"rgb"),y()(a,_.gl.RGBA,"rgba"),y()(a,_.gl.RGBA4,"rgba4"),y()(a,_.gl.RGB5_A1,"rgb5 a1"),y()(a,_.gl.RGB565,"rgb565"),y()(a,_.gl.DEPTH_COMPONENT,"depth"),y()(a,_.gl.DEPTH_STENCIL,"depth stencil"),a),E=(s={},y()(s,_.gl.DONT_CARE,"dont care"),y()(s,_.gl.NICEST,"nice"),y()(s,_.gl.FASTEST,"fast"),s),M=(u={},y()(u,_.gl.NEAREST,"nearest"),y()(u,_.gl.LINEAR,"linear"),y()(u,_.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),y()(u,_.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),y()(u,_.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),y()(u,_.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),u),T=(l={},y()(l,_.gl.REPEAT,"repeat"),y()(l,_.gl.CLAMP_TO_EDGE,"clamp"),y()(l,_.gl.MIRRORED_REPEAT,"mirror"),l),C=(c={},y()(c,_.gl.NONE,"none"),y()(c,_.gl.BROWSER_DEFAULT_WEBGL,"browser"),c),A=(h={},y()(h,_.gl.NEVER,"never"),y()(h,_.gl.ALWAYS,"always"),y()(h,_.gl.LESS,"less"),y()(h,_.gl.LEQUAL,"lequal"),y()(h,_.gl.GREATER,"greater"),y()(h,_.gl.GEQUAL,"gequal"),y()(h,_.gl.EQUAL,"equal"),y()(h,_.gl.NOTEQUAL,"notequal"),h),P=(f={},y()(f,_.gl.FUNC_ADD,"add"),y()(f,_.gl.MIN_EXT,"min"),y()(f,_.gl.MAX_EXT,"max"),y()(f,_.gl.FUNC_SUBTRACT,"subtract"),y()(f,_.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),f),k=(p={},y()(p,_.gl.ZERO,"zero"),y()(p,_.gl.ONE,"one"),y()(p,_.gl.SRC_COLOR,"src color"),y()(p,_.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),y()(p,_.gl.SRC_ALPHA,"src alpha"),y()(p,_.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),y()(p,_.gl.DST_COLOR,"dst color"),y()(p,_.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),y()(p,_.gl.DST_ALPHA,"dst alpha"),y()(p,_.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),y()(p,_.gl.CONSTANT_COLOR,"constant color"),y()(p,_.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),y()(p,_.gl.CONSTANT_ALPHA,"constant alpha"),y()(p,_.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),y()(p,_.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),p),I=(d={},y()(d,_.gl.NEVER,"never"),y()(d,_.gl.ALWAYS,"always"),y()(d,_.gl.LESS,"less"),y()(d,_.gl.LEQUAL,"lequal"),y()(d,_.gl.GREATER,"greater"),y()(d,_.gl.GEQUAL,"gequal"),y()(d,_.gl.EQUAL,"equal"),y()(d,_.gl.NOTEQUAL,"notequal"),d),O=(v={},y()(v,_.gl.ZERO,"zero"),y()(v,_.gl.KEEP,"keep"),y()(v,_.gl.REPLACE,"replace"),y()(v,_.gl.INVERT,"invert"),y()(v,_.gl.INCR,"increment"),y()(v,_.gl.DECR,"decrement"),y()(v,_.gl.INCR_WRAP,"increment wrap"),y()(v,_.gl.DECR_WRAP,"decrement wrap"),v),j=(g={},y()(g,_.gl.FRONT,"front"),y()(g,_.gl.BACK,"back"),g)},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(107),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return n.i(r.__extends)(e,t),e.prototype.scale=function(t){if(n.i(i.isNil)(t))return NaN;var e=this.rangeMin(),r=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(r-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,r=n.i(i.head)(e),o=n.i(i.last)(e);r<this.min&&(this.min=r),o>this.max&&(this.max=o),n.i(i.isNil)(this.minLimit)||(this.min=r),n.i(i.isNil)(this.maxLimit)||(this.max=o)},e.prototype.setDomain=function(){var t=n.i(i.getRange)(this.values),e=t.min,r=t.max;n.i(i.isNil)(this.min)&&(this.min=e),n.i(i.isNil)(this.max)&&(this.max=r),this.min>this.max&&(this.min=e,this.max=r)},e.prototype.calculateTicks=function(){var e=this,r=t.prototype.calculateTicks.call(this);return this.nice||(r=n.i(i.filter)(r,function(t){return t>=e.min&&t<=e.max})),r},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(o.a);e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(107),i=n(322),o=n(859),a=n(323),s=n(860),u=n(861),l=n(863),c=n(324),h=n(862),f=n(864),p=n(865),d=n(867);n.d(e,"Category",function(){return i.a}),n.d(e,"Identity",function(){return p.a}),n.d(e,"Linear",function(){return a.a}),n.d(e,"Log",function(){return s.a}),n.d(e,"Pow",function(){return u.a}),n.d(e,"Time",function(){return l.a}),n.d(e,"TimeCat",function(){return o.a}),n.d(e,"Quantile",function(){return h.a}),n.d(e,"Quantize",function(){return c.a}),n.d(e,"Scale",function(){return r.a}),n.d(e,"getScale",function(){return f.b}),n.d(e,"registerScale",function(){return f.a}),n.d(e,"getTickMethod",function(){return d.a}),n.i(f.a)("cat",i.a),n.i(f.a)("category",i.a),n.i(f.a)("identity",p.a),n.i(f.a)("linear",a.a),n.i(f.a)("log",s.a),n.i(f.a)("pow",u.a),n.i(f.a)("time",l.a),n.i(f.a)("timeCat",o.a),n.i(f.a)("quantize",c.a),n.i(f.a)("quantile",h.a)},function(t,e,n){"use strict";function r(t,e){var n=Math.E;return e>=0?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t)}function i(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function o(t,e,r){n.i(a.isNil)(r)&&(r=Math.max.apply(null,t));var i=r;return n.i(a.each)(t,function(t){t>0&&t<i&&(i=t)}),i===r&&(i=r/e),i>1&&(i=1),i}e.a=r,e.b=i,e.c=o;var a=n(0)},function(t,e,n){"use strict";function r(t,e){return(s[l]||s.default[l])(t,e)}function i(t){return n.i(a.isString)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),n.i(a.isDate)(t)&&(t=t.getTime()),t}function o(t,e,r){var i=(e-t)/r,o=n.i(u.a)(function(t){return t[1]})(g,i)-1,s=g[o];return o<0?s=g[0]:o>=g.length&&(s=n.i(a.last)(g)),s}e.b=r,e.a=i,n.d(e,"h",function(){return c}),n.d(e,"g",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"c",function(){return p}),n.d(e,"f",function(){return d}),n.d(e,"e",function(){return v}),e.i=o;var a=n(0),s=n(389),u=n(876),l="format",c=1e3,h=60*c,f=60*h,p=24*f,d=31*p,v=365*p,g=[["HH:mm:ss",c],["HH:mm:ss",10*c],["HH:mm:ss",30*c],["HH:mm",h],["HH:mm",10*h],["HH:mm",30*h],["HH",f],["HH",6*f],["HH",12*f],["YYYY-MM-DD",p],["YYYY-MM-DD",4*p],["YYYY-WW",7*p],["YYYY-MM",d],["YYYY-MM",4*d],["YYYY-MM",6*d],["YYYY",380*p]]},function(t,e,n){"use strict";var r=n(32),i=function(t,e){return!!n.i(r.a)(t)&&t.indexOf(e)>-1};e.a=i},function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(204);e.default=function(t){return r.default(t,"Function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return(t%e+e)%e};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Math.PI/180,i=function(t){return r*t};e.default=i},function(t,e,n){function r(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},r(e,n,o||e)}var i=n(983);t.exports=r},function(t,e,n){"use strict";var r=n(213);e.a=function(t){return t=n.i(r.a)(Math.abs(t)),t?t[1]:NaN}},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}},function(t,e,n){"use strict";function r(){var t=new W.a(16);return W.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t){var e=new W.a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v){var g=new W.a(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=u,g[9]=l,g[10]=c,g[11]=h,g[12]=f,g[13]=p,g[14]=d,g[15]=v,g}function s(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=f,t[12]=p,t[13]=d,t[14]=v,t[15]=g,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,S=i*l-o*u,E=c*v-h*d,M=c*g-f*d,T=c*m-p*d,C=h*g-f*v,A=h*m-p*v,P=f*m-p*g,k=y*P-_*A+b*C+x*T-w*M+S*E;return k?(k=1/k,t[0]=(s*P-u*A+l*C)*k,t[1]=(i*A-r*P-o*C)*k,t[2]=(v*S-g*w+m*x)*k,t[3]=(f*w-h*S-p*x)*k,t[4]=(u*T-a*P-l*M)*k,t[5]=(n*P-i*T+o*M)*k,t[6]=(g*b-d*S-m*_)*k,t[7]=(c*S-f*b+p*_)*k,t[8]=(a*A-s*T+l*E)*k,t[9]=(r*T-n*A-o*E)*k,t[10]=(d*w-v*b+m*y)*k,t[11]=(h*b-c*w-p*y)*k,t[12]=(s*M-a*C-u*E)*k,t[13]=(n*C-r*M+i*E)*k,t[14]=(v*_-d*x-g*y)*k,t[15]=(c*x-h*_+f*y)*k,t):null}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(f*m-p*g)-h*(u*m-l*g)+v*(u*p-l*f),t[1]=-(r*(f*m-p*g)-h*(i*m-o*g)+v*(i*p-o*f)),t[2]=r*(u*m-l*g)-s*(i*m-o*g)+v*(i*l-o*u),t[3]=-(r*(u*p-l*f)-s*(i*p-o*f)+h*(i*l-o*u)),t[4]=-(a*(f*m-p*g)-c*(u*m-l*g)+d*(u*p-l*f)),t[5]=n*(f*m-p*g)-c*(i*m-o*g)+d*(i*p-o*f),t[6]=-(n*(u*m-l*g)-a*(i*m-o*g)+d*(i*l-o*u)),t[7]=n*(u*p-l*f)-a*(i*p-o*f)+c*(i*l-o*u),t[8]=a*(h*m-p*v)-c*(s*m-l*v)+d*(s*p-l*h),t[9]=-(n*(h*m-p*v)-c*(r*m-o*v)+d*(r*p-o*h)),t[10]=n*(s*m-l*v)-a*(r*m-o*v)+d*(r*l-o*s),t[11]=-(n*(s*p-l*h)-a*(r*p-o*h)+c*(r*l-o*s)),t[12]=-(a*(h*g-f*v)-c*(s*g-u*v)+d*(s*f-u*h)),t[13]=n*(h*g-f*v)-c*(r*g-i*v)+d*(r*f-i*h),t[14]=-(n*(s*g-u*v)-a*(r*g-i*v)+d*(r*u-i*s)),t[15]=n*(s*f-u*h)-a*(r*f-i*h)+c*(r*u-i*s),t}function f(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],p=t[12],d=t[13],v=t[14],g=t[15];return(e*a-n*o)*(h*g-f*v)-(e*s-r*o)*(c*g-f*d)+(e*u-i*o)*(c*v-h*d)+(n*s-r*a)*(l*g-f*p)-(n*u-i*a)*(l*v-h*p)+(r*u-i*s)*(l*d-c*p)}function p(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*v,t[1]=_*i+b*u+x*f+w*g,t[2]=_*o+b*l+x*p+w*m,t[3]=_*a+b*c+x*d+w*y,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*h+w*v,t[5]=_*i+b*u+x*f+w*g,t[6]=_*o+b*l+x*p+w*m,t[7]=_*a+b*c+x*d+w*y,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*h+w*v,t[9]=_*i+b*u+x*f+w*g,t[10]=_*o+b*l+x*p+w*m,t[11]=_*a+b*c+x*d+w*y,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*h+w*v,t[13]=_*i+b*u+x*f+w*g,t[14]=_*o+b*l+x*p+w*m,t[15]=_*a+b*c+x*d+w*y,t}function d(t,e,n){var r,i,o,a,s,u,l,c,h,f,p,d,v=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*v+s*g+h*m+e[12],t[13]=i*v+u*g+f*m+e[13],t[14]=o*v+l*g+p*m+e[14],t[15]=a*v+c*g+d*m+e[15]),t}function v(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g(t,e,n,r){var i,o,a,s,u,l,c,h,f,p,d,v,g,m,y,_,b,x,w,S,E,M,T,C,A=r[0],P=r[1],k=r[2],I=Math.hypot(A,P,k);return I<W.c?null:(I=1/I,A*=I,P*=I,k*=I,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],l=e[2],c=e[3],h=e[4],f=e[5],p=e[6],d=e[7],v=e[8],g=e[9],m=e[10],y=e[11],_=A*A*a+o,b=P*A*a+k*i,x=k*A*a-P*i,w=A*P*a-k*i,S=P*P*a+o,E=k*P*a+A*i,M=A*k*a+P*i,T=P*k*a-A*i,C=k*k*a+o,t[0]=s*_+h*b+v*x,t[1]=u*_+f*b+g*x,t[2]=l*_+p*b+m*x,t[3]=c*_+d*b+y*x,t[4]=s*w+h*S+v*E,t[5]=u*w+f*S+g*E,t[6]=l*w+p*S+m*E,t[7]=c*w+d*S+y*E,t[8]=s*M+h*T+v*C,t[9]=u*M+f*T+g*C,t[10]=l*M+p*T+m*C,t[11]=c*M+d*T+y*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function m(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t}function y(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=u*i-f*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=u*r+f*i,t}function _(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],l=Math.hypot(a,s,u);return l<W.c?null:(l=1/l,a*=l,s*=l,u*=l,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,l=o+o,c=r*s,h=r*u,f=r*l,p=i*u,d=i*l,v=o*l,g=a*s,m=a*u,y=a*l;return t[0]=1-(p+v),t[1]=h+y,t[2]=f-m,t[3]=0,t[4]=h-y,t[5]=1-(c+v),t[6]=d+g,t[7]=0,t[8]=f+m,t[9]=d-g,t[10]=1-(c+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function C(t,e){var n=new W.a(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=r*r+i*i+o*o+a*a;return h>0?(n[0]=2*(s*a+c*r+u*o-l*i)/h,n[1]=2*(u*a+c*i+l*r-s*o)/h,n[2]=2*(l*a+c*o+s*i-u*r)/h):(n[0]=2*(s*a+c*r+u*o-l*i),n[1]=2*(u*a+c*i+l*r-s*o),n[2]=2*(l*a+c*o+s*i-u*r)),T(t,e,n),t}function A(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function P(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,l,c),t}function k(t,e){var n=new W.a(3);P(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,l=e[4]*r,c=e[5]*i,h=e[6]*o,f=e[8]*r,p=e[9]*i,d=e[10]*o,v=a+c+d,g=0;return v>0?(g=2*Math.sqrt(v+1),t[3]=.25*g,t[0]=(h-p)/g,t[1]=(f-u)/g,t[2]=(s-l)/g):a>c&&a>d?(g=2*Math.sqrt(1+a-c-d),t[3]=(h-p)/g,t[0]=.25*g,t[1]=(s+l)/g,t[2]=(f+u)/g):c>d?(g=2*Math.sqrt(1+c-a-d),t[3]=(f-u)/g,t[0]=(s+l)/g,t[1]=.25*g,t[2]=(h+p)/g):(g=2*Math.sqrt(1+d-a-c),t[3]=(s-l)/g,t[0]=(f+u)/g,t[1]=(h+p)/g,t[2]=.25*g),t}function I(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,p=i*c,d=o*l,v=o*c,g=a*c,m=s*u,y=s*l,_=s*c,b=r[0],x=r[1],w=r[2];return t[0]=(1-(d+g))*b,t[1]=(f+_)*b,t[2]=(p-y)*b,t[3]=0,t[4]=(f-_)*x,t[5]=(1-(h+g))*x,t[6]=(v+m)*x,t[7]=0,t[8]=(p+y)*w,t[9]=(v-m)*w,t[10]=(1-(h+d))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],l=o+o,c=a+a,h=s+s,f=o*l,p=o*c,d=o*h,v=a*c,g=a*h,m=s*h,y=u*l,_=u*c,b=u*h,x=r[0],w=r[1],S=r[2],E=i[0],M=i[1],T=i[2],C=(1-(v+m))*x,A=(p+b)*x,P=(d-_)*x,k=(p-b)*w,I=(1-(f+m))*w,O=(g+y)*w,j=(d+_)*S,L=(g-y)*S,D=(1-(f+v))*S;return t[0]=C,t[1]=A,t[2]=P,t[3]=0,t[4]=k,t[5]=I,t[6]=O,t[7]=0,t[8]=j,t[9]=L,t[10]=D,t[11]=0,t[12]=n[0]+E-(C*E+k*M+j*T),t[13]=n[1]+M-(A*E+I*M+L*T),t[14]=n[2]+T-(P*E+O*M+D*T),t[15]=1,t}function j(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,h=r*s,f=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-h-d,t[1]=c+m,t[2]=f-g,t[3]=0,t[4]=c-m,t[5]=1-l-d,t[6]=p+v,t[7]=0,t[8]=f+g,t[9]=p-v,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}function D(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function R(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function B(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}function z(t,e,n,r){var i,o,a,s,l,c,h,f,p,d,v=e[0],g=e[1],m=e[2],y=r[0],_=r[1],b=r[2],x=n[0],w=n[1],S=n[2];return Math.abs(v-x)<W.c&&Math.abs(g-w)<W.c&&Math.abs(m-S)<W.c?u(t):(h=v-x,f=g-w,p=m-S,d=1/Math.hypot(h,f,p),h*=d,f*=d,p*=d,i=_*p-b*f,o=b*h-y*p,a=y*f-_*h,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-p*o,l=p*i-h*a,c=h*o-f*i,d=Math.hypot(s,l,c),d?(d=1/d,s*=d,l*=d,c*=d):(s=0,l=0,c=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=o,t[5]=l,t[6]=f,t[7]=0,t[8]=a,t[9]=c,t[10]=p,t[11]=0,t[12]=-(i*v+o*g+a*m),t[13]=-(s*v+l*g+c*m),t[14]=-(h*v+f*g+p*m),t[15]=1,t)}function F(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],l=r[2],c=i-n[0],h=o-n[1],f=a-n[2],p=c*c+h*h+f*f;p>0&&(p=1/Math.sqrt(p),c*=p,h*=p,f*=p);var d=u*f-l*h,v=l*c-s*f,g=s*h-u*c;return p=d*d+v*v+g*g,p>0&&(p=1/Math.sqrt(p),d*=p,v*=p,g*=p),t[0]=d,t[1]=v,t[2]=g,t[3]=0,t[4]=h*g-f*v,t[5]=f*d-c*g,t[6]=c*v-h*d,t[7]=0,t[8]=c,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function N(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function U(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function V(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function G(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function q(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function H(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function X(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],p=t[11],d=t[12],v=t[13],g=t[14],m=t[15],y=e[0],_=e[1],b=e[2],x=e[3],w=e[4],S=e[5],E=e[6],M=e[7],T=e[8],C=e[9],A=e[10],P=e[11],k=e[12],I=e[13],O=e[14],j=e[15];return Math.abs(n-y)<=W.c*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-_)<=W.c*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=W.c*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=W.c*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=W.c*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=W.c*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-E)<=W.c*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(l-M)<=W.c*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-T)<=W.c*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-C)<=W.c*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(f-A)<=W.c*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(p-P)<=W.c*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(d-k)<=W.c*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(v-I)<=W.c*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(g-O)<=W.c*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(m-j)<=W.c*Math.max(1,Math.abs(m),Math.abs(j))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.copy=o,e.fromValues=a,e.set=s,e.identity=u,e.transpose=l,e.invert=c,e.adjoint=h,e.determinant=f,e.multiply=p,e.translate=d,e.scale=v,e.rotate=g,e.rotateX=m,e.rotateY=y,e.rotateZ=_,e.fromTranslation=b,e.fromScaling=x,e.fromRotation=w,e.fromXRotation=S,e.fromYRotation=E,e.fromZRotation=M,e.fromRotationTranslation=T,e.fromQuat2=C,e.getTranslation=A,e.getScaling=P,e.getRotation=k,e.fromRotationTranslationScale=I,e.fromRotationTranslationScaleOrigin=O,e.fromQuat=j,e.frustum=L,e.perspective=D,e.perspectiveFromFieldOfView=R,e.ortho=B,e.lookAt=z,e.targetTo=F,e.str=N,e.frob=U,e.add=V,e.subtract=G,e.multiplyScalar=q,e.multiplyScalarAndAdd=H,e.exactEquals=Y,e.equals=X,n.d(e,"mul",function(){return Z}),n.d(e,"sub",function(){return K});var W=n(50),Z=p,K=G},function(t,e,n){"use strict";function r(){var t=new G.a(3);return G.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function i(t){var e=new G.a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function a(t,e,n){var r=new G.a(3);return r[0]=t,r[1]=e,r[2]=n,r}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function g(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function w(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function E(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function M(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function C(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function A(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function P(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*l+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*l+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*l+i[2]*c,t}function k(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,l=s*a,c=3*o*s,h=3*u*a,f=u*o;return t[0]=e[0]*l+n[0]*c+r[0]*h+i[0]*f,t[1]=e[1]*l+n[1]*c+r[1]*h+i[1]*f,t[2]=e[2]*l+n[2]*c+r[2]*h+i[2]*f,t}function I(t,e){e=e||1;var n=2*G.b()*Math.PI,r=2*G.b()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function O(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function j(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function L(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],l=e[2],c=i*l-o*u,h=o*s-r*l,f=r*u-i*s,p=i*f-o*h,d=o*c-r*f,v=r*h-i*c,g=2*a;return c*=g,h*=g,f*=g,p*=2,d*=2,v*=2,t[0]=s+c+p,t[1]=u+h+d,t[2]=l+f+v,t}function D(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function R(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function z(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i),l=Math.sqrt(o*o+a*a+s*s),c=u*l,h=c&&T(t,e)/c;return Math.acos(Math.min(Math.max(h,-1),1))}function F(t){return t[0]=0,t[1]=0,t[2]=0,t}function N(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function U(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=G.c*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=G.c*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=G.c*Math.max(1,Math.abs(i),Math.abs(s))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.length=o,e.fromValues=a,e.copy=s,e.set=u,e.add=l,e.subtract=c,e.multiply=h,e.divide=f,e.ceil=p,e.floor=d,e.min=v,e.max=g,e.round=m,e.scale=y,e.scaleAndAdd=_,e.distance=b,e.squaredDistance=x,e.squaredLength=w,e.negate=S,e.inverse=E,e.normalize=M,e.dot=T,e.cross=C,e.lerp=A,e.hermite=P,e.bezier=k,e.random=I,e.transformMat4=O,e.transformMat3=j,e.transformQuat=L,e.rotateX=D,e.rotateY=R,e.rotateZ=B,e.angle=z,e.zero=F,e.str=N,e.exactEquals=U,e.equals=V,n.d(e,"sub",function(){return q}),n.d(e,"mul",function(){return H}),n.d(e,"div",function(){return Y}),n.d(e,"dist",function(){return X}),n.d(e,"sqrDist",function(){return W}),n.d(e,"len",function(){return Z}),n.d(e,"sqrLen",function(){return K}),n.d(e,"forEach",function(){return J});var G=n(50),q=c,H=h,Y=f,X=b,W=x,Z=o,K=w,J=function(){var t=r();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e){function n(t,e){e||(e=document);var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var r=e.body||e.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(n,r):e.documentElement.appendChild(n)}var i=e.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i),i}t.exports=n},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(1195),o=n(1196),a=n(1197),s=n(1198),u=n(1199);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){var r=n(51),i=r.Symbol;t.exports=i},function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=n(153);t.exports=r},function(t,e,n){function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=n(1193);t.exports=r},function(t,e,n){var r=n(85),i=r(Object,"create");t.exports=i},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){function r(t){return null!=t&&o(t.length)&&!i(t)}var i=n(117),o=n(420);t.exports=r},function(t,e,n){function r(t){return a(t)?i(t,!0):o(t)}var i=n(400),o=n(1156),a=n(154);t.exports=r},function(t,e,n){function r(t){return null==t?"":i(t)}var i=n(1164);t.exports=r},function(t,e,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t,e){var n=s.transformMat4([],e,t);return s.scale(n,n,1/n[3]),n}function o(t,e){var n=t%e;return n<0?e+n:n}function a(t,e,n){return n*e+(1-n)*t}e.a=r,e.b=i,e.d=o,e.c=a;var s=n(224)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"b",function(){return a});var r=0,i=.5,o=.5,a=.05},function(t,e,n){"use strict";(function(t,r){function i(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})}function o(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}function u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l(t,e){return e={exports:{}},t(e,e.exports),e.exports}n.d(e,"a",function(){return O}),n.d(e,"b",function(){return R}),n.d(e,"d",function(){return A}),n.d(e,"c",function(){return D});var c=l(function(t,e){function n(t){return t&&"number"==typeof t.length&&t.length>=0&&t.length%1==0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default});u(c);var h=l(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=e.pop();return t.call(this,e,r)}},t.exports=e.default});u(h);var f=l(function(e,n){function i(t){setTimeout(t,0)}function o(t){return function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return t(function(){return e.apply(void 0,n)})}}Object.defineProperty(n,"__esModule",{value:!0}),n.fallback=i,n.wrap=o;var a,s=n.hasSetImmediate="function"==typeof t&&t,u=n.hasNextTick="object"==typeof r&&"function"==typeof r.nextTick;a=s?t:u?r.nextTick:i,n.default=o(a)});u(f);var p=(f.fallback,f.wrap,f.hasSetImmediate,f.hasNextTick,l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(0,d.isAsync)(t)?function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=e.pop();return i(t.apply(this,e),r)}:(0,a.default)(function(e,n){var r;try{r=t.apply(this,e)}catch(t){return n(t)}if(r&&"function"==typeof r.then)return i(r,n);n(null,r)})}function i(t,e){return t.then(function(t){o(e,null,t)},function(t){o(e,t&&t.message?t:new Error(t))})}function o(t,e,n){try{t(e,n)}catch(t){(0,s.default)(function(t){throw t},t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=n(h),s=n(f);t.exports=e.default}));u(p);var d=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return"AsyncFunction"===t[Symbol.toStringTag]}function i(t){return"AsyncGenerator"===t[Symbol.toStringTag]}function o(t){return"function"==typeof t[Symbol.asyncIterator]}function a(t){if("function"!=typeof t)throw new Error("expected a function");return r(t)?(0,s.default)(t):t}Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=e.isAsyncGenerator=e.isAsync=void 0;var s=n(p);e.default=a,e.isAsync=r,e.isAsyncGenerator=i,e.isAsyncIterable=o});u(d);var v=(d.isAsyncIterable,d.isAsyncGenerator,d.isAsync,l(function(t,e){function n(t,e){function n(){for(var n=this,r=[],i=arguments.length;i--;)r[i]=arguments[i];return"function"==typeof r[e-1]?t.apply(this,r):new Promise(function(i,o){r[e-1]=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(t)return o(t);i(e.length>1?e:e[0])},t.apply(n,r)})}if(void 0===e&&(e=t.length),!e)throw new Error("arity is undefined");return Object.defineProperty(n,"name",{configurable:!0,value:"awaitable("+t.name+")"}),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default}));u(v);var g=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(c),i=n(d),o=n(v);e.default=(0,o.default)(function(t,e,n){var o=(0,r.default)(e)?[]:{};t(e,function(t,e,n){(0,i.default)(t)(function(t){for(var r,i=[],a=arguments.length-1;a-- >0;)i[a]=arguments[a+1];i.length<2&&(r=i,i=r[0]),o[e]=i,n(t)})},function(t){return n(t,o)})},3),t.exports=e.default});u(g);var m=l(function(t,e){function n(t){function e(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(null!==t){var r=t;t=null,r.apply(this,e)}}return Object.assign(e,t),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default});u(m);var y=l(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()},t.exports=e.default});u(y);var _=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function i(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function o(t){var e=t?Object.keys(t):[],n=-1,r=e.length;return function(){var i=e[++n];return n<r?{value:t[i],key:i}:null}}function a(t){if((0,s.default)(t))return r(t);var e=(0,u.default)(t);return e?i(e):o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=n(c),u=n(y);t.exports=e.default});u(_);var b=l(function(t,e){function n(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(null===t)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default});u(b);var x=l(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={};e.default=n,t.exports=e.default});u(x);var w=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,r){function o(){h>=e||c||u||(c=!0,t.next().then(function(t){var e=t.value,i=t.done;if(!l&&!u){if(c=!1,i)return u=!0,void(h<=0&&r(null));h++,n(e,f,a),f++,o()}}).catch(s))}function a(t,e){if(h-=1,!l)return t?s(t):!1===t?(u=!0,void(l=!0)):e===i.default||u&&h<=0?(u=!0,r(null)):void o()}function s(t){l||(c=!1,u=!0,r(t))}var u=!1,l=!1,c=!1,h=0,f=0;o()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(x);t.exports=e.default});u(w);var S=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(m),i=n(_),o=n(b),a=n(w),s=n(x);e.default=function(t){return function(e,n,u){function l(t,e){if(!p)if(v-=1,t)f=!0,u(t);else if(!1===t)f=!0,p=!0;else{if(e===s.default||f&&v<=0)return f=!0,u(null);g||c()}}function c(){for(g=!0;v<t&&!f;){var e=h();if(null===e)return f=!0,void(v<=0&&u(null));v+=1,n(e.value,e.key,(0,o.default)(l))}g=!1}if(u=(0,r.default)(u),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return u(null);if((0,d.isAsyncGenerator)(e))return(0,a.default)(e,t,n,u);if((0,d.isAsyncIterable)(e))return(0,a.default)(e[Symbol.asyncIterator](),t,n,u);var h=(0,i.default)(e),f=!1,p=!1,v=0,g=!1;c()}},t.exports=e.default});u(S);var E=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,r){return(0,i.default)(e)(t,(0,o.default)(n),r)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(S),o=n(d),a=n(v);e.default=(0,a.default)(r,4),t.exports=e.default});u(E);var M=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return(0,i.default)(t,1,e,n)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(E),o=n(v);e.default=(0,o.default)(r,3),t.exports=e.default});u(M);var T=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(0,i.default)(o.default,t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(g),o=n(M);t.exports=e.default}),C=u(T),A=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.args=[],this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,C(this.tasks)},t.prototype.tap=function(t,e){var n=this;this.tasks.push(function(r){e.apply(void 0,s(n.args)),r(null,t)})},t}(),P=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){function r(t,e){!1===t&&(u=!0),!0!==u&&(t?n(t):++o!==a&&e!==s.default||n(null))}n=(0,l.default)(n);var i=0,o=0,a=t.length,u=!1;for(0===a&&n(null);i<a;i++)e(t[i],i,(0,h.default)(r))}function i(t,e,n){return(0,u.default)(t,1/0,e,n)}function o(t,e,n){return((0,a.default)(t)?r:i)(t,(0,f.default)(e),n)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(c),s=n(x),u=n(E),l=n(m),h=n(b),f=n(d),p=n(v);e.default=(0,p.default)(o,3),t.exports=e.default});u(P);var k=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(0,o.default)(i.default,t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(P),o=n(g);t.exports=e.default}),I=u(k),O=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.tasks=[]}return t.prototype.promise=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return I(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push(function(r){return i(n,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return n.sent(),r(null,t),[2]}})})})},t}(),j=l(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){function n(e){(0,a.default)(t[s++]).apply(void 0,e.concat([(0,o.default)(r)]))}function r(r){for(var i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];if(!1!==r)return r||s===t.length?e.apply(void 0,[r].concat(i)):void n(i)}if(e=(0,i.default)(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var s=0;n([])}Object.defineProperty(e,"__esModule",{value:!0});var i=n(m),o=n(b),a=n(d),s=n(v);e.default=(0,s.default)(r),t.exports=e.default}),L=u(j),D=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return L(this.tasks)},t.prototype.tap=function(t,e){0===this.tasks.length?this.tasks.push(function(t){var n=e();t(!!n&&null,n)}):this.tasks.push(function(n,r){r(!!e()&&null,t)})},t}(),R=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return C(this.tasks)},t.prototype.tap=function(t,e){this.tasks.push(function(n){n(e(),t)})},t}()}).call(e,n(1249).setImmediate,n(61))},function(t,e,n){"use strict";function r(t){return"#"+d(t[0])+d(t[1])+d(t[2])}var i,o=n(0),a=/rgba?\(([\s.,0-9]+)\)/,s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,u=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,l=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,c=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},h=function(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t},f=function(t,e,n,r){return t[r]+(e[r]-t[r])*n},p=function(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]},d=function(t){var e=Math.round(t).toString(16);return 1===e.length?"0"+e:e},v=function(t,e){var n=isNaN(Number(e))||e<0?0:e>1?1:Number(e),i=t.length-1,o=Math.floor(i*n),a=i*n-o,s=t[o],u=o===i?s:t[o+1];return r([f(s,u,a,0),f(s,u,a,1),f(s,u,a,2)])},g=function(t){if("#"===t[0]&&7===t.length)return t;i||(i=h()),i.style.color=t;var e=document.defaultView.getComputedStyle(i,"").getPropertyValue("color");return e=r(a.exec(e)[1].split(/\s*,\s*/).map(function(t){return Number(t)}))},m=function(t){var e=n.i(o.isString)(t)?t.split("-"):t,r=n.i(o.map)(e,function(t){return p(-1===t.indexOf("#")?g(t):t)});return function(t){return v(r,t)}},y=function(t){if(c(t)){var e,r=void 0;if("l"===t[0]){var i=s.exec(t),a=+i[1]+90;r=i[2],e="linear-gradient("+a+"deg, "}else if("r"===t[0]){e="radial-gradient(";var i=u.exec(t);r=i[4]}var h=r.match(l);return n.i(o.each)(h,function(t,n){var r=t.split(":");e+=r[1]+" "+100*r[0]+"%",n!==h.length-1&&(e+=", ")}),e+=")"}return t};e.a={rgb2arr:p,gradient:m,toRGB:n.i(o.memoize)(g),toCSSGradient:y}},function(t,e,n){"use strict";var r=n(1),i=n(38),o=n(0),a={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},s=function(t){function e(e){var n=t.call(this,e)||this;return n.initCfg(),n}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},e.prototype.clear=function(){},e.prototype.update=function(t){var e=this,r=this.get("defaultCfg");n.i(o.each)(t,function(t,i){var a=e.get(i),s=t;a!==t&&(n.i(o.isObject)(t)&&r[i]&&(s=n.i(o.deepMix)({},r[i],t)),e.set(i,s))}),this.updateInner(t),this.afterUpdate(t)},e.prototype.updateInner=function(t){},e.prototype.afterUpdate=function(t){n.i(o.hasKey)(t,"visible")&&(t.visible?this.show():this.hide()),n.i(o.hasKey)(t,"capture")&&this.setCapture(t.capture)},e.prototype.getLayoutBBox=function(){return this.getBBox()},e.prototype.getLocationType=function(){return this.get("locationType")},e.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},e.prototype.setOffset=function(t,e){this.update({offsetX:t,offsetY:e})},e.prototype.setLocation=function(t){var e=n.i(r.__assign)({},t);this.update(e)},e.prototype.getLocation=function(){var t=this,e={},r=this.get("locationType"),i=a[r];return n.i(o.each)(i,function(n){e[n]=t.get(n)}),e},e.prototype.isList=function(){return!1},e.prototype.isSlider=function(){return!1},e.prototype.init=function(){},e.prototype.initCfg=function(){var t=this,e=this.get("defaultCfg");n.i(o.each)(e,function(e,r){var i=t.get(r);if(n.i(o.isObject)(i)){var a=n.i(o.deepMix)({},e,i);t.set(r,a)}})},e}(i.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(97),o=n(0),a=n(26),s=n(162),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},e.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},e.prototype.setCapture=function(t){var e=this.getContainer(),n=t?"auto":"none";e.style.pointerEvents=n,this.set("capture",t)},e.prototype.getBBox=function(){var t=this.getContainer(),e=parseFloat(t.style.left)||0,r=parseFloat(t.style.top)||0;return n.i(a.f)(e,r,t.clientWidth,t.clientHeight)},e.prototype.clear=function(){var t=this.get("container");n.i(a.e)(t)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),t.prototype.destroy.call(this)},e.prototype.init=function(){t.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},e.prototype.initCapture=function(){this.setCapture(this.get("capture"))},e.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},e.prototype.initDom=function(){},e.prototype.initContainer=function(){var t=this.get("container");if(n.i(o.isNil)(t)){t=this.createDom();var e=this.get("parent");n.i(o.isString)(e)&&(e=document.getElementById(e),this.set("parent",e)),e.appendChild(t),this.set("container",t)}else n.i(o.isString)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},e.prototype.resetStyles=function(){var t=this.get("domStyles"),e=this.get("defaultStyles");t=t?n.i(o.deepMix)({},e,t):e,this.set("domStyles",t)},e.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var e=this.getContainer();this.applyChildrenStyles(e,t);var r=this.get("containerClassName");if(r&&n.i(a.g)(e,r)){var o=t[r];n.i(i.b)(e,o)}}},e.prototype.applyChildrenStyles=function(t,e){n.i(o.each)(e,function(e,r){var a=t.getElementsByClassName(r);n.i(o.each)(a,function(t){n.i(i.b)(t,e)})})},e.prototype.applyStyle=function(t,e){var r=this.get("domStyles");n.i(i.b)(e,r[t])},e.prototype.createDom=function(){var t=this.get("containerTpl");return n.i(i.c)(t)},e.prototype.initEvent=function(){},e.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode.removeChild(t)},e.prototype.removeEvent=function(){},e.prototype.updateInner=function(t){n.i(o.hasKey)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},e.prototype.resetPosition=function(){},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(0),a=n(21),s=n(72),u=n(249),l=n(30),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},defaultCfg:{line:{style:{lineWidth:1,stroke:l.a.lineColor}},tickLine:{style:{lineWidth:1,stroke:l.a.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:l.a.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:l.a.textColor,textBaseline:"middle",fontFamily:l.a.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:l.a.textColor,textBaseline:"middle",fontFamily:l.a.fontFamily,textAlign:"center"},offset:48},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:l.a.uncheckedColor}}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("ticks")},e.prototype.setItems=function(t){this.update({ticks:t})},e.prototype.updateItem=function(t,e){n.i(o.mix)(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n,this.updateTickStates(t)},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("tickStates"),r=[];return n.i(o.each)(e,function(e,n){t[n]&&r.push(n)}),r},e.prototype.clearItemsState=function(t){var e=this,r=this.getItemsByState(t);n.i(o.each)(r,function(n){e.setItemState(n,t,!1)})},e.prototype.getItemsByState=function(t){var e=this,r=this.getItems();return n.i(o.filter)(r,function(n){return e.hasState(n,t)})},e.prototype.getSidePoint=function(t,e){var n=this,r=n.getSideVector(e,t);return{x:t.x+r[0],y:t.y+r[1]}},e.prototype.getTextAnchor=function(t){var e;return n.i(o.isNumberEqual)(t[0],0)?e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e},e.prototype.processOverlap=function(t){},e.prototype.drawLine=function(t){var e=this.getLinePath(),r=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:n.i(o.mix)({path:e},r.style)})},e.prototype.getTickLineItems=function(t){var e=this,r=[],i=this.get("tickLine"),a=i.alignTick,s=i.length,u=1;return t.length>=2&&(u=t[1].value-t[0].value),n.i(o.each)(t,function(t){var n=t.point;a||(n=e.getTickPoint(t.value-u/2));var i=e.getSidePoint(n,s);r.push({startPoint:n,tickValue:t.value,endPoint:i,tickId:t.id,id:"tickline-"+t.id})}),r},e.prototype.getSubTickLineItems=function(t){var e=[],n=this.get("subTickLine"),r=n.count,i=t.length;if(i>=2)for(var o=0;o<i-1;o++)for(var a=t[o],s=t[o+1],u=0;u<r;u++){var l=(u+1)/(r+1),c=(1-l)*a.tickValue+l*s.tickValue,h=this.getTickPoint(c),f=this.getSidePoint(h,n.length);e.push({startPoint:h,endPoint:f,tickValue:c,id:"sub-"+a.id+"-"+u})}return e},e.prototype.getTickLineAttrs=function(t){var e=this.get("tickLine").style,r=t.startPoint,i=t.endPoint;return n.i(o.mix)({x1:r.x,y1:r.y,x2:i.x,y2:i.y},e)},e.prototype.drawTick=function(t,e){this.addShape(e,{type:"line",id:this.getElementId(t.id),name:"axis-tickline",attrs:this.getTickLineAttrs(t)})},e.prototype.drawTickLines=function(t){var e=this,r=this.get("ticks"),i=this.get("subTickLine"),a=this.getTickLineItems(r),s=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),u=this.get("tickLine");if(n.i(o.each)(a,function(n){if(u.displayWithLabel){var r=e.getElementId("label-"+n.tickId);t.findById(r)&&e.drawTick(n,s)}else e.drawTick(n,s)}),i){var l=this.getSubTickLineItems(a);n.i(o.each)(l,function(t){e.drawTick(t,s)})}},e.prototype.processTicks=function(){var t=this,e=this.get("ticks");n.i(o.each)(e,function(e){e.point=t.getTickPoint(e.value),n.i(o.isNil)(e.id)&&(e.id=e.name)})},e.prototype.drawTicks=function(t){var e=this;this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var r=this.get("ticks");n.i(o.each)(r,function(n){e.applyTickStates(n,t)})},e.prototype.getLabelAttrs=function(t,e){var r=this.get("label"),i=r.offset,a=r.style,u=r.rotate,l=r.formatter,c=this.getSidePoint(t.point,i),h=this.getSideVector(i,c),f=l?l(t.name,t,e):t.name,p=n.i(o.mix)({x:c.x,y:c.y,text:f,textAlign:this.getTextAnchor(h)},a);return u&&(p.matrix=n.i(s.c)(c,u)),p},e.prototype.drawLabels=function(t){var e=this,r=this.get("ticks"),i=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});n.i(o.each)(r,function(t,n){e.addShape(i,{type:"text",name:"axis-label",id:e.getElementId("label-"+t.id),attrs:e.getLabelAttrs(t,n),delegateObject:{tick:t,item:t,index:n}})}),this.processOverlap(i)},e.prototype.getTitleAttrs=function(){var t=this.get("title"),e=t.style,r=t.position,a=t.offset,u=t.autoRotate,l=.5;"start"===r?l=0:"end"===r&&(l=1);var c=this.getTickPoint(l),h=this.getSidePoint(c,a),f=n.i(o.mix)({x:h.x,y:h.y,text:t.text},e),p=t.rotate,d=p;if(n.i(o.isNil)(p)&&u){var v=this.getAxisVector(c),g=[1,0];d=i.c.angleTo(v,g,!0)}if(d){var m=n.i(s.c)(h,d);f.matrix=m}return f},e.prototype.drawTitle=function(t){this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},e.prototype.applyTickStates=function(t,e){if(this.getItemStates(t).length){var r=this.get("tickStates"),i=this.getElementId("label-"+t.id),o=e.findById(i);if(o){var a=n.i(u.a)(t,"label",r);a&&o.attr(a)}var s=this.getElementId("tickline-"+t.id),l=e.findById(s);if(l){var c=n.i(u.a)(t,"tickLine",r);c&&l.attr(c)}}},e.prototype.updateTickStates=function(t){var e=this.getItemStates(t),r=this.get("tickStates"),i=this.get("label"),o=this.getElementByLocalId("label-"+t.id),a=this.get("tickLine"),s=this.getElementByLocalId("tickline-"+t.id);if(e.length){if(o){var l=n.i(u.a)(t,"label",r);l&&o.attr(l)}if(s){var c=n.i(u.a)(t,"tickLine",r);c&&s.attr(c)}}else o&&o.attr(i.style),s&&s.attr(a.style)},e}(a.a);e.a=c},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(21),a=n(72),s=n(30),u=n(26),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:s.a.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:s.a.textColor,textAlign:"center",textBaseline:"middle",fontFamily:s.a.fontFamily}},textBackground:{padding:5,style:{stroke:s.a.lineColor}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},e.prototype.renderText=function(t){var e=this.get("text"),o=e.style,s=e.autoRotate,u=e.content;if(!n.i(i.isNil)(u)){var l=this.getTextPoint(),c=null;if(s){var h=this.getRotateAngle();c=n.i(a.c)(l,h)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:n.i(r.__assign)(n.i(r.__assign)(n.i(r.__assign)({},l),{text:u,matrix:c}),o)})}},e.prototype.renderLine=function(t){var e=this.getLinePath(),i=this.get("line"),o=i.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:n.i(r.__assign)({path:e},o)})},e.prototype.renderBackground=function(t){var e=this.getElementId("text"),i=t.findById(e),o=this.get("textBackground");if(o&&i){var a=i.getBBox(),s=n.i(u.h)(o.padding),l=o.style;this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:n.i(r.__assign)({x:a.x-s[3],y:a.y-s[0],width:a.width+s[1]+s[3],height:a.height+s[0]+s[2],matrix:i.attr("matrix")},l)}).toBack()}},e}(o.a);e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(21),a=n(30),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:a.a.lineColor}}}})},e.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},e.prototype.renderInner=function(t){this.drawGrid(t)},e.prototype.getAlternatePath=function(t,e){var n=this.getGridPath(t),r=e.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",n=n.concat(i),n.push(["Z"])),n},e.prototype.getPathStyle=function(){return this.get("line").style},e.prototype.drawGrid=function(t){var e=this,r=this.get("line"),o=this.get("items"),a=this.get("alternateColor"),s=null;n.i(i.each)(o,function(o,u){var l=o.id||u;if(r){var c=e.getPathStyle(),h=e.getElementId("line-"+l),f=e.getGridPath(o.points);e.addShape(t,{type:"path",name:"grid-line",id:h,attrs:n.i(i.mix)({path:f},c)})}if(a&&u>0){var p=e.getElementId("region-"+l),d=u%2==0;if(n.i(i.isString)(a))d&&e.drawAlternateRegion(p,t,s.points,o.points,a);else{var v=d?a[1]:a[0];e.drawAlternateRegion(p,t,s.points,o.points,v)}}s=o})},e.prototype.drawAlternateRegion=function(t,e,n,r,i){var o=this.getAlternatePath(n,r);this.addShape(e,{type:"path",id:t,name:"grid-region",attrs:{path:o,fill:i}})},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(21),o=n(26),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},e.prototype.getLayoutBBox=function(){var e=t.prototype.getLayoutBBox.call(this),r=this.get("x"),i=this.get("y"),a=this.get("offsetX"),s=this.get("offsetY"),u=this.get("maxWidth"),l=this.get("maxHeight"),c=r+a,h=i+s,f=e.maxX-c,p=e.maxY-h;return u&&(f=Math.min(f,u)),l&&(p=Math.min(p,l)),n.i(o.f)(c,h,f,p)},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.resetLocation=function(){var t=this.get("x"),e=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+n,y:e+r})},e.prototype.applyOffset=function(){this.resetLocation()},e.prototype.getDrawPoint=function(){return this.get("currentPoint")},e.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},e.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},e.prototype.drawBackground=function(t){var e=this.get("background"),i=t.getBBox(),a=n.i(o.h)(e.padding),s=n.i(r.__assign)({x:0,y:0,width:i.width+a[1]+a[3],height:i.height+a[0]+a[2]},e.style);this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:s}).toBack()},e.prototype.drawTitle=function(t){var e=this.get("currentPoint"),i=this.get("title"),o=i.spacing,a=i.style,s=i.text,u=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:n.i(r.__assign)({text:s,x:e.x,y:e.y},a)}),l=u.getBBox();this.set("currentPoint",{x:e.x,y:l.maxY+o})},e.prototype.resetDraw=function(){var t=this.get("background"),e={x:0,y:0};if(t){var r=n.i(o.h)(t.padding);e.x=r[3],e.y=r[0]}this.set("currentPoint",e)},e}(i.a);e.a=a},function(t,e,n){"use strict";function r(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function i(t,e){var n=t.get("startArrowShape"),i=t.get("endArrowShape"),o=null,a=null;return n&&(o=n.getCanvasBBox(),e=r(e,o)),i&&(a=i.getCanvasBBox(),e=r(e,a)),e}Object.defineProperty(e,"__esModule",{value:!0}),e.mergeBBox=r,e.mergeArrowBBox=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e.default=r},function(t,e,n){"use strict";function r(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function i(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function o(t){return t.cfg.visible&&t.cfg.capture}Object.defineProperty(e,"__esModule",{value:!0}),e.removeFromArray=r,e.isBrowser="undefined"!=typeof window&&void 0!==window.document;var a=n(110);e.isNil=a.default;var s=n(139);e.isFunction=s.default;var u=n(78);e.isString=u.default;var l=n(203);e.isObject=l.default;var c=n(57);e.isArray=c.default;var h=n(342);e.mix=h.default;var f=n(90);e.each=f.default;var p=n(344);e.upperFirst=p.default,e.isParent=i,e.isAllowCapture=o},function(t,e,n){"use strict";var r=n(1),i=n(38),o=n(98),a=n(99),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.onCanvasChange=function(t){n.i(a.b)(this,t)},e.prototype.getShapeBase=function(){return o},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),n.i(a.c)(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var r=this.getChildren();r.length&&(t.save(),n.i(a.c)(t,this),this._applyClip(t,this.getClip()),n.i(a.e)(t,r,e),t.restore()),this.set("cacheCanvasBBox",this.getCanvasBBox()),this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(i.d);e.a=s},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function i(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function o(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,l=6*t-12*e+6*n,c=3*e-3*t,h=[];if(u.isNumberEqual(s,0))u.isNumberEqual(l,0)||(i=-c/l)>=0&&i<=1&&h.push(i);else{var f=l*l-4*s*c;u.isNumberEqual(f,0)?h.push(-l/(2*s)):f>0&&(a=Math.sqrt(f),i=(-l+a)/(2*s),o=(-l-a)/(2*s),i>=0&&i<=1&&h.push(i),o>=0&&o<=1&&h.push(o))}return h}function a(t,e,n,i,o,a,s,u,c){var h=r(t,n,o,s,c),f=r(e,i,a,u,c),p=l.default.pointAt(t,e,n,i,c),d=l.default.pointAt(n,i,o,a,c),v=l.default.pointAt(o,a,s,u,c),g=l.default.pointAt(p.x,p.y,d.x,d.y,c),m=l.default.pointAt(d.x,d.y,v.x,v.y,c);return[[t,e,p.x,p.y,g.x,g.y,h,f],[h,f,m.x,m.y,v.x,v.y,s,u]]}function s(t,e,n,r,i,o,u,l,h){if(0===h)return c.snapLength([t,n,i,u],[e,r,o,l]);var f=a(t,e,n,r,i,o,u,l,.5),p=f[0],d=f[1];return p.push(h-1),d.push(h-1),s.apply(null,p)+s.apply(null,d)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(47),l=n(62),c=n(267);e.default={extrema:o,box:function(t,e,n,i,a,s,l,c){for(var h=[t,l],f=[e,c],p=o(t,n,a,l),d=o(e,i,s,c),v=0;v<p.length;v++)h.push(r(t,n,a,l,p[v]));for(var v=0;v<d.length;v++)f.push(r(e,i,s,c,d[v]));return u.getBBoxByArray(h,f)},length:function(t,e,n,r,i,o,a,u){return s(t,e,n,r,i,o,a,u,3)},nearestPoint:function(t,e,n,i,o,a,s,u,l,h){return c.nearestPoint([t,n,o,s],[e,i,a,u],l,h,r)},pointDistance:function(t,e,n,r,i,o,a,s,l,c){var h=this.nearestPoint(t,e,n,r,i,o,a,s,l,c);return u.distance(h.x,h.y,l,c)},interpolationAt:r,pointAt:function(t,e,n,i,o,a,s,u,l){return{x:r(t,n,o,s,l),y:r(e,i,a,u,l)}},divide:function(t,e,n,r,i,o,s,u,l){return a(t,e,n,r,i,o,s,u,l)},tangentAngle:function(t,e,n,r,o,a,s,l,c){var h=i(t,n,o,s,c),f=i(e,r,a,l,c);return u.piMod(Math.atan2(f,h))}}},function(t,e,n){"use strict";var r=n(1),i=n(38),o=n(0),a=n(126),s=n(174),u=n(100),l=n(28),c=n(40),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=n.i(c.d)("g");this.set("el",t);var e=this.getParent();if(e){var r=e.get("el");r?r.appendChild(t):(r=e.createDom(),e.set("el",r),r.appendChild(t))}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,e)}},e.prototype.onCanvasChange=function(t){n.i(s.a)(this,t)},e.prototype.getShapeBase=function(){return a},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||this.createDom(),n.i(u.b)(this,t),this.createPath(t),e.length&&n.i(s.b)(t,e))},e.prototype.createPath=function(t,e){var r=this.attr(),i=this.get("el");n.i(o.each)(e||r,function(t,e){l.a[e]&&i.setAttribute(l.a[e],t)}),n.i(u.a)(this)},e}(i.d);e.a=h},function(t,e,n){"use strict";function r(t,e){e.forEach(function(e){e.draw(t)})}function i(t,e){var r=t.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context"),s=t.getParent(),u=s?s.getChildren():[r],l=t.get("el");if("remove"===e){if(t.get("isClipShape")){var c=l&&l.parentNode,h=c&&c.parentNode;c&&h&&h.removeChild(c)}else l&&l.parentNode&&l.parentNode.removeChild(l)}else if("show"===e)l.setAttribute("visibility","visible");else if("hide"===e)l.setAttribute("visibility","hidden");else if("zIndex"===e)n.i(a.b)(l,u.indexOf(t));else if("sort"===e){var f=t.get("children");f&&f.length&&n.i(a.c)(t,function(t,e){return f.indexOf(t)-f.indexOf(e)?1:0})}else"clear"===e?l&&(l.innerHTML=""):"matrix"===e?n.i(o.a)(t):"clip"===e?n.i(o.b)(t,i):"attr"===e||"add"===e&&t.draw(i)}}e.b=r,e.a=i;var o=n(100),a=n(40)},function(t,e,n){"use strict";var r=n(1),i=n(252),o=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=e.visible,i=void 0===r||r;return n.visible=i,n}return n.i(r.__extends)(e,t),e.prototype.show=function(){this.visible||(this.visible=!0,this.changeVisible(!0))},e.prototype.hide=function(){this.visible&&(this.visible=!1,this.changeVisible(!1))},e.prototype.destroy=function(){this.off(),this.destroyed=!0},e.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(585);n.d(e,"a",function(){return r.a});var i=n(273);n.d(e,"c",function(){return i.a});var o=(n(272),n(271));n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n(0),i=(n(75),{}),o=function(t){return i[n.i(r.lowerCase)(t)]},a=function(t,e){i[n.i(r.lowerCase)(t)]=e}},function(t,e,n){"use strict";function r(t){return s[t.toLowerCase()]}function i(t,e){s[t.toLowerCase()]=e}function o(t){return u[t.toLowerCase()]}function a(t,e){u[t.toLowerCase()]=e}e.c=r,e.a=i,e.d=o,e.b=a;var s={},u={}},function(t,e,n){"use strict";var r=n(1),i=n(11),o=n(63),a=n(275),s=(n(278),n(280)),u=function(t){function e(e){var n=t.call(this,e)||this;n.type="path",n.shapeType="line";var r=e.connectNulls,i=void 0!==r&&r;return n.connectNulls=i,n}return n.i(r.__extends)(e,t),e.prototype.createElements=function(t,e,r){void 0===r&&(r=!1);var i=this,o=i.lastElementsMap,u=i.elementsMap,l=i.elements,c=i.container,h=this.getElementId(t),f=this.getShapeInfo(t),p=o[h];if(p){var d=p.getModel();n.i(s.a)(d,f)&&(p.animate=this.animateOption,p.update(f)),delete o[h]}else{var v=this.getShapeFactory();p=new a.a({shapeFactory:v,container:c,offscreenGroup:this.getOffscreenGroup()}),p.geometry=this,p.animate=this.animateOption,p.draw(f,r)}return l.push(p),u[h]=p,l},e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,o=t.length;r<o;r++){var a=t[r];e.push({x:a.x,y:a.y}),n.push(a[i.f])}return{points:e,data:n}},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=this.getPointsAndData(t),r=n.points,i=n.data;return e.mappingData=t,e.data=i,e.isStack=!!this.getAdjust("stack"),e.points=r,e.connectNulls=this.connectNulls,e},e}(o.a);e.a=u},function(t,e,n){"use strict";function r(t,e,r,s,u){var l=n.i(a.a)(e,u,!u,"r"),c=t.parsePoints(e.points),h=c[0];if(e.isStack)h=c[1];else if(c.length>1){for(var f=r.addGroup(),p=0,d=c;p<d.length;p++){var v=d[p];f.addShape({type:"marker",attrs:n.i(i.__assign)(n.i(i.__assign)(n.i(i.__assign)({},l),{symbol:o.a[s]||s}),v)})}return f}return r.addShape({type:"marker",attrs:n.i(i.__assign)(n.i(i.__assign)(n.i(i.__assign)({},l),{symbol:o.a[s]||s}),h)})}n.d(e,"a",function(){return s}),n.d(e,"c",function(){return u}),e.b=r;var i=n(1),o=n(104),a=n(19),s=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],u=["cross","tick","plus","hyphen","line"]},function(t,e,n){"use strict";function r(t){return!t&&(null===t||void 0===t||isNaN(t))}function i(t){if(n.i(a.isArray)(t))return r(t[1].y);var e=t.y;return r(n.i(a.isArray)(e)?e[0]:e)}function o(t,e){if(!t.length)return[];if(e){for(var n=[],r=0,o=t.length;r<o;r++){var a=t[r];i(a)||n.push(a)}return[n]}for(var s=[],u=[],r=0,o=t.length;r<o;r++){var a=t[r];i(a)?u.length&&(s.push(u),u=[]):u.push(a)}return u.length&&s.push(u),s}e.a=o;var a=n(0)},function(t,e,n){"use strict";function r(t){var e=t.x;return(n.i(i.isArray)(t.y)?t.y:[t.y]).map(function(t,r){return{x:n.i(i.isArray)(e)?e[r]:e,y:t}})}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t){var e=n.i(a.g)(t);n.i(o.each)(e,function(t){t.hasState(u)&&t.setState(u,!1),t.hasState(s)&&t.setState(s,!1)})}function i(t,e,r){n.i(o.each)(t,function(t){e(t)?(t.hasState(s)&&t.setState(s,!1),t.setState(u,r)):(t.hasState(u)&&t.setState(u,!1),t.setState(s,r))})}e.a=r,e.b=i;var o=n(0),a=n(16),s="inactive",u="active"},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(16),a=n(183),s=n(188),u="inactive",l="active",c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=l,e}return n.i(r.__extends)(e,t),e.prototype.setElementsStateByItem=function(t,e,n,r){var i=this,o=function(t){return i.isMathItem(t,e,n)};this.setHighlightBy(t,o,r)},e.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(u)&&t.setState(u,!1),t.setState(l,!0)):t.hasState(l)||t.setState(u,!0)},e.prototype.setHighlightBy=function(t,e,r){var a=this;if(r)n.i(i.each)(t,function(t){a.setElementHighlight(t,e)});else{var s=n.i(o.s)(this.context.view,l),c=!0;n.i(i.each)(s,function(t){if(!e(t))return c=!1,!1}),c?this.clear():n.i(i.each)(t,function(t){e(t)&&(t.hasState(l)&&t.setState(l,!1),t.setState(u,!0))})}},e.prototype.setElementState=function(t,e){var r=this.context.view,i=n.i(o.g)(r);this.setHighlightBy(i,function(e){return t===e},e)},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.context.view;n.i(a.a)(t)},e}(s.a);e.a=c},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(16),a=n(187),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return n.i(r.__extends)(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},e.prototype.getIntersectElements=function(){var t=null;if(n.i(o.d)(this.context))t=n.i(o.e)(this.context,10);else{var e=this.startPoint,r=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!r)return;var i={minX:Math.min(e.x,r.x),minY:Math.min(e.y,r.y),maxX:Math.max(e.x,r.x),maxY:Math.max(e.y,r.y)},a=this.context.view;t=n.i(o.r)(a,i)}return t},e.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=n.i(o.g)(this.context.view),r=this.getIntersectElements();r&&r.length?this.effectByRecord?this.setSiblingsStateByRecord(r,t):this.setElementsState(r,t,e):this.clear()}},e.prototype.setSiblingsStateByRecord=function(t,e){var r=this,a=this.context.view,s=n.i(o.f)(a),u=t.map(function(t){return t.getModel().data}),l=a.getXScale().field,c=a.getYScales()[0].field;n.i(i.each)(s,function(t){var i=n.i(o.g)(t),a=i.filter(function(t){var e=t.getModel().data;return n.i(o.h)(u,e,l,c)});r.setElementsState(a,e,i)})},e.prototype.setSiblingsState=function(t){var e=this,r=this.context.view,a=n.i(o.f)(r);n.i(o.d)(this.context)&&n.i(i.each)(a,function(r){var i=n.i(o.g)(r),a=n.i(o.i)(e.context,r,10);a&&a.length?e.setElementsState(a,t,i):e.clearViewState(r)})},e.prototype.setElementsState=function(t,e,r){var o=this;n.i(i.each)(r,function(n){t.includes(n)?o.setElementState(n,e):o.setElementState(n,!1)})},e.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},e.prototype.clear=function(){var t=this,e=this.context.view;if(this.effectSiblings){var r=n.i(o.f)(e);n.i(i.each)(r,function(e){t.clearViewState(e)})}else this.clearViewState(e)},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(16),o=n(187),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.setStateEnable=function(t){var e=n.i(i.p)(this.context);if(e){if(!n.i(i.t)(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},e.prototype.toggle=function(){var t=n.i(i.p)(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(25),a=n(16),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e}return n.i(r.__extends)(e,t),e.prototype.hasState=function(t){return t.hasState(this.stateName)},e.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},e.prototype.clearViewState=function(t){var e=this,r=n.i(a.s)(t,this.stateName);n.i(i.each)(r,function(t){e.setElementState(t,!1)})},e}(o.a);e.a=s},function(t,e,n){"use strict";function r(t){return t.get("delegateObject").item}var i=n(1),o=n(0),a=n(16),s=n(187),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return n.i(i.__extends)(e,t),e.prototype.isItemIgnore=function(t,e){return!!this.ignoreListItemStates.filter(function(n){return e.hasState(t,n)}).length},e.prototype.setStateByComponent=function(t,e,r){var i=this.context.view,o=t.get("field"),s=n.i(a.g)(i);this.setElementsStateByItem(s,o,e,r)},e.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},e.prototype.isMathItem=function(t,e,r){var i=this.context.view,s=n.i(a.l)(i,e),u=n.i(a.m)(t,e);return!n.i(o.isNil)(u)&&r.name===s.getText(u)},e.prototype.setElementsStateByItem=function(t,e,r,i){var a=this;n.i(o.each)(t,function(t){a.isMathItem(t,e,r)&&t.setState(a.stateName,i)})},e.prototype.setStateEnable=function(t){var e=n.i(a.p)(this.context);if(e)n.i(a.t)(this.context)&&this.setStateByElement(e,t);else{var i=n.i(a.j)(this.context);if(n.i(a.k)(i)){var o=i.item,s=i.component;if(o&&s&&!this.isItemIgnore(o,s)){var u=this.context.event.gEvent;if(u&&u.fromShape&&u.toShape&&r(u.fromShape)===r(u.toShape))return;this.setStateByComponent(s,o,t)}}}},e.prototype.toggle=function(){var t=n.i(a.p)(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(25);n.d(e,"b",function(){return r.a});var i=n(286);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(25),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return n.i(r.__extends)(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var e="mask:"+t,n=this.context.view,r=this.context.event;n.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},e.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs();return t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:n.i(r.__assign)({fill:"#C5D4EB",opacity:.3},e)})},e.prototype.getMaskPath=function(){return[]},e.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},e.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},e.prototype.move=function(){if(this.moving&&this.maskShape){var t=this.getCurrentPoint(),e=this.preMovePoint,r=t.x-e.x,o=t.y-e.y,a=this.points;n.i(i.each)(a,function(t){t.x+=r,t.y+=o}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},e.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},e.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},e.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},e.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,t.prototype.destroy.call(this)},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t){return l[n.i(a.lowerCase)(t)]}function i(t,e){l[n.i(a.lowerCase)(t)]=e}function o(t,e,i){var o=r(t);if(!o)return null;if(n.i(a.isPlainObject)(o)){var u=n.i(a.mix)(n.i(a.clone)(o),i);return new s.a(e,u)}return new o(e,i)}e.a=i,e.c=o;var a=n(0),s=n(676),u=(n(288),n(189));n.d(e,"b",function(){return u.a});var l={}},function(t,e,n){"use strict";function r(t){var e,n;switch(t){case d.b.TOP:e={x:0,y:1},n={x:1,y:1};break;case d.b.RIGHT:e={x:1,y:0},n={x:1,y:1};break;case d.b.BOTTOM:e={x:0,y:0},n={x:1,y:0};break;case d.b.LEFT:e={x:0,y:0},n={x:0,y:1};break;default:e=n={x:0,y:0}}return{start:e,end:n}}function i(t){var e,n;return t.isTransposed?(e={x:0,y:0},n={x:1,y:0}):(e={x:0,y:0},n={x:0,y:1}),{start:e,end:n}}function o(t,e){var n={start:{x:0,y:0},end:{x:0,y:0}};t.isRect?n=r(e):t.isPolar&&(n=i(t));var o=n.start,a=n.end;return{start:t.convert(o),end:t.convert(a)}}function a(t){var e=t.start,n=t.end;return e.x===n.x}function s(t,e){var n=t.start,r=t.end;return a(t)?(n.y-r.y)*(e.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-e.y)>0?-1:1}function u(t,e){return n.i(p.get)(t,["components","axis",e],{})}function l(t){var e=t.startAngle,n=t.endAngle;return{center:t.circleCenter,radius:t.polarRadius,startAngle:e,endAngle:n}}function c(t,e){return n.i(p.isBoolean)(t)?!1!==t&&{}:n.i(p.get)(t,[e])}function h(t,e){return n.i(p.get)(t,"position",e)}function f(t,e){return n.i(p.get)(e,["title","text"],n.i(v.a)(t))}e.b=o,e.g=s,e.f=u,e.c=l,e.a=c,e.d=h,e.e=f;var p=n(0),d=n(11),v=n(130)},function(t,e,n){"use strict";function r(t){return!n.i(a.isNumber)(t)&&!n.i(a.isArray)(t)}function i(t){void 0===t&&(t=0);var e=n.i(a.isArray)(t)?t:[t];switch(e.length){case 0:e=[0,0,0,0];break;case 1:e=new Array(4).fill(e[0]);break;case 2:e=n.i(o.__spreadArrays)(e,e);break;case 3:e=n.i(o.__spreadArrays)(e,[e[1]]);break;default:e=e.slice(0,4)}return e}e.b=r,e.a=i;var o=n(1),a=n(0)},function(t,e,n){"use strict";function r(t,e,r){var i=n.i(a.a)(t.getMatrix(),[["t",e,r]]);t.setMatrix(i)}function i(t,e){var r=t.attr(),i=r.x,o=r.y,s=n.i(a.a)(t.getMatrix(),[["t",-i,-o],["r",e],["t",i,o]]);t.setMatrix(s)}function o(t,e){var r=t.getBBox(),i=(r.minX+r.maxX)/2,o=(r.minY+r.maxY)/2;t.applyToMatrix([i,o,1]);var s=n.i(a.a)(t.getMatrix(),[["t",-i,-o],["s",e,e],["t",i,o]]);t.setMatrix(s)}e.a=r,e.b=i,e.c=o;var a=n(24);n.d(e,"d",function(){return a.a})},function(t,e,n){"use strict";function r(t){e.ARRAY_TYPE=s=t}function i(t){return t*u}function o(t,e){return Math.abs(t-e)<=a*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=r,e.toRadian=i,e.equals=o;var a=e.EPSILON=1e-6,s=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,u=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function r(t){if(o()(t[0]))return t;if(o()(t[0][0]))throw new Error("");if(o()(t[0][0][0])){var e=t,n=0,r=0,i=0;return e.forEach(function(t){t.forEach(function(t){n+=t[0],r+=t[1],i++})}),[n/i,r/i,0]}throw new Error("")}e.a=r;var i=n(1230),o=n.n(i)},function(t,e,n){"use strict";function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return r(t)*r(e)?(t[0]*e[0]+t[1]*e[1])/(r(t)*r(e)):1}function o(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(i(t,e))}function a(t,e){return t[0]===e[0]&&t[1]===e[1]}function s(t,e){var n=e[1],r=e[2],s=l()(h()(e[3]),2*Math.PI),u=e[4],c=e[5],f=t[0],p=t[1],d=e[6],v=e[7],g=Math.cos(s)*(f-d)/2+Math.sin(s)*(p-v)/2,m=-1*Math.sin(s)*(f-d)/2+Math.cos(s)*(p-v)/2,y=g*g/(n*n)+m*m/(r*r);y>1&&(n*=Math.sqrt(y),r*=Math.sqrt(y));var _=n*n*(m*m)+r*r*(g*g),b=_?Math.sqrt((n*n*(r*r)-_)/_):1;u===c&&(b*=-1),isNaN(b)&&(b=0);var x=r?b*n*m/r:0,w=n?b*-r*g/n:0,S=(f+d)/2+Math.cos(s)*x-Math.sin(s)*w,E=(p+v)/2+Math.sin(s)*x+Math.cos(s)*w,M=[(g-x)/n,(m-w)/r],T=[(-1*g-x)/n,(-1*m-w)/r],C=o([1,0],M),A=o(M,T);return i(M,T)<=-1&&(A=Math.PI),i(M,T)>=1&&(A=0),0===c&&A>0&&(A-=2*Math.PI),1===c&&A<0&&(A+=2*Math.PI),{cx:S,cy:E,rx:a(t,[d,v])?0:n,ry:a(t,[d,v])?0:r,startAngle:C,endAngle:C+A,xRotation:s,arcFlag:u,sweepFlag:c}}e.b=a,e.a=s;var u=n(140),l=n.n(u),c=n(141),h=n.n(c)},function(t,e,n){"use strict";function r(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e}function i(t,e,i){var a=r(t,i,"floor"),s=r(e,i,"ceil");a=n.i(o.fixedBase)(a,i),s=n.i(o.fixedBase)(s,i);for(var u=[],l=a;l<=s;l+=i){var c=n.i(o.fixedBase)(l,i);u.push(c)}return{min:a,max:s,ticks:u}}e.a=i;var o=n(0)},function(t,e,n){"use strict";function r(t,e,r){var o,a=t.minLimit,s=t.maxLimit,u=t.min,l=t.max,c=t.tickCount,h=void 0===c?5:c,f=n.i(i.isNil)(a)?n.i(i.isNil)(e)?u:e:a,p=n.i(i.isNil)(s)?n.i(i.isNil)(r)?l:r:s;if(f>p&&(o=[f,p],p=o[0],f=o[1]),h<=2)return[f,p];for(var d=(p-f)/(h-1),v=[],g=0;g<h;g++)v.push(f+d*g);return v}e.a=r;var i=n(0)},function(t,e,n){"use strict";var r=function(t){return"object"==typeof t&&null!==t};e.a=r},function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function i(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}e.a=i},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=i),Math.abs(t-e)<n}Object.defineProperty(e,"__esModule",{value:!0});var i=1e-5;e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={}.toString,i=function(t,e){return r.call(t)==="[object "+e+"]"};e.default=i},function(t,e,n){"use strict";function r(t,e){return n.i(i.a)(t)||n.i(o.a)(t,e)||n.i(a.a)(t,e)||n.i(s.a)()}e.a=r;var i=n(964),o=n(970),a=n(348),s=n(971)},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return o(e).geometry;case"LineString":return l(e).geometry;case"Polygon":return s(e).geometry;case"MultiPoint":return p(e).geometry;case"MultiLineString":return f(e).geometry;case"MultiPolygon":return d(e).geometry;default:throw new Error(t+" is invalid")}}function o(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function a(t,e,n){return void 0===n&&(n={}),h(t.map(function(t){return o(t,e)}),n)}function s(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),h(t.map(function(t){return s(t,e)}),n)}function l(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),h(t.map(function(t){return l(t,e)}),n)}function h(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function f(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function d(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)}function g(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function m(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function y(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function _(t,e){return x(y(t,e))}function b(t){var e=t%360;return e<0&&(e+=360),e}function x(t){return t%(2*Math.PI)*180/Math.PI}function w(t){return t%360*Math.PI/180}function S(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return m(y(t,e),n)}function E(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o}function M(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}function T(t){return!!t&&t.constructor===Object}function C(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!M(t))throw new Error("bbox must only contain numbers")})}function A(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function P(){throw new Error("method has been renamed to `radiansToDegrees`")}function k(){throw new Error("method has been renamed to `degreesToRadians`")}function I(){throw new Error("method has been renamed to `lengthToDegrees`")}function O(){throw new Error("method has been renamed to `lengthToRadians`")}function j(){throw new Error("method has been renamed to `radiansToLength`")}function L(){throw new Error("method has been renamed to `bearingToAzimuth`")}function D(){throw new Error("method has been renamed to `convertLength`")}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=i,e.point=o,e.points=a,e.polygon=s,e.polygons=u,e.lineString=l,e.lineStrings=c,e.featureCollection=h,e.multiLineString=f,e.multiPoint=p,e.multiPolygon=d,e.geometryCollection=v,e.round=g,e.radiansToLength=m,e.lengthToRadians=y,e.lengthToDegrees=_,e.bearingToAzimuth=b,e.radiansToDegrees=x,e.degreesToRadians=w,e.convertLength=S,e.convertArea=E,e.isNumber=M,e.isObject=T,e.validateBBox=C,e.validateId=A,e.radians2degrees=P,e.degrees2radians=k,e.distanceToDegrees=I,e.distanceToRadians=O,e.radiansToDistance=j,e.bearingToAngle=L,e.convertDistance=D},function(t,e,n){"use strict";var r=n(113);e.a=function(t,e,n){if(null==n&&(n=r.a),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,a=Math.floor(o),s=+n(t[a],a,t);return s+(+n(t[a+1],a+1,t)-s)*(o-a)}}},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}n.d(e,"b",function(){return o});var o="$";r.prototype=i.prototype={constructor:r,has:function(t){return o+t in this},get:function(t){return this[o+t]},set:function(t,e){return this[o+t]=e,this},remove:function(t){var e=o+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===o&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===o&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===o&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===o&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===o&&++t;return t},empty:function(){for(var t in this)if(t[0]===o)return!1;return!0},each:function(t){for(var e in this)e[0]===o&&t(this[e],e.slice(1),this)}},e.a=i},function(t,e,n){"use strict";function r(){}function i(){return this.rgb().formatHex()}function o(){return m(this).formatHsl()}function a(){return this.rgb().formatRgb()}function s(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=C.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?u(e):3===n?new f(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new f(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new f(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=A.exec(t))?new f(e[1],e[2],e[3],1):(e=P.exec(t))?new f(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=k.exec(t))?l(e[1],e[2],e[3],e[4]):(e=I.exec(t))?l(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=O.exec(t))?g(e[1],e[2]/100,e[3]/100,1):(e=j.exec(t))?g(e[1],e[2]/100,e[3]/100,e[4]):L.hasOwnProperty(t)?u(L[t]):"transparent"===t?new f(NaN,NaN,NaN,0):null}function u(t){return new f(t>>16&255,t>>8&255,255&t,1)}function l(t,e,n,r){return r<=0&&(t=e=n=NaN),new f(t,e,n,r)}function c(t){return t instanceof r||(t=s(t)),t?(t=t.rgb(),new f(t.r,t.g,t.b,t.opacity)):new f}function h(t,e,n,r){return 1===arguments.length?c(t):new f(t,e,n,null==r?1:r)}function f(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function p(){return"#"+v(this.r)+v(this.g)+v(this.b)}function d(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function v(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function g(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _(t,e,n,r)}function m(t){if(t instanceof _)return new _(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=s(t)),!t)return new _;if(t instanceof _)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),a=Math.max(e,n,i),u=NaN,l=a-o,c=(a+o)/2;return l?(u=e===a?(n-i)/l+6*(n<i):n===a?(i-e)/l+2:(e-n)/l+4,l/=c<.5?a+o:2-a-o,u*=60):l=c>0&&c<1?0:u,new _(u,l,c,t.opacity)}function y(t,e,n,r){return 1===arguments.length?m(t):new _(t,e,n,null==r?1:r)}function _(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function b(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e.d=r,n.d(e,"f",function(){return w}),n.d(e,"e",function(){return S}),e.a=s,e.c=c,e.h=h,e.b=f,e.g=y;var x=n(211),w=.7,S=1/w,E="\\s*([+-]?\\d+)\\s*",M="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",T="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C=/^#([0-9a-f]{3,8})$/,A=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),P=new RegExp("^rgb\\("+[T,T,T]+"\\)$"),k=new RegExp("^rgba\\("+[E,E,E,M]+"\\)$"),I=new RegExp("^rgba\\("+[T,T,T,M]+"\\)$"),O=new RegExp("^hsl\\("+[M,T,T]+"\\)$"),j=new RegExp("^hsla\\("+[M,T,T,M]+"\\)$"),L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n.i(x.a)(r,s,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:i,formatHex:i,formatHsl:o,formatRgb:a,toString:a}),n.i(x.a)(f,h,n.i(x.b)(r,{brighter:function(t){return t=null==t?S:Math.pow(S,t),new f(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?w:Math.pow(w,t),new f(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p,formatHex:p,formatRgb:d,toString:d})),n.i(x.a)(_,y,n.i(x.b)(r,{brighter:function(t){return t=null==t?S:Math.pow(S,t),new _(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?w:Math.pow(w,t),new _(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new f(b(t>=240?t-240:t+120,i,r),b(t,i,r),b(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},function(t,e,n){"use strict";function r(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}e.b=r,e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";function r(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function i(t,e){var n=r(t);return function(r,i){return e(n(r),i,t)}}function o(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function a(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function s(t){return t<0?"-"+a(-t,6):t>9999?"+"+a(t,6):a(t,4)}function u(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":s(t.getUTCFullYear(),4)+"-"+a(t.getUTCMonth()+1,2)+"-"+a(t.getUTCDate(),2)+(i?"T"+a(e,2)+":"+a(n,2)+":"+a(r,2)+"."+a(i,3)+"Z":r?"T"+a(e,2)+":"+a(n,2)+":"+a(r,2)+"Z":n||e?"T"+a(e,2)+":"+a(n,2)+"Z":"")}var l={},c={},h=34,f=10,p=13;e.a=function(t){function e(t,e){var o,a,s=n(t,function(t,n){if(o)return o(t,n-1);a=t,o=e?i(t,e):r(t)});return s.columns=a||[],s}function n(t,e){function n(){if(u)return c;if(d)return d=!1,l;var e,n,r=a;if(t.charCodeAt(r)===h){for(;a++<o&&t.charCodeAt(a)!==h||t.charCodeAt(++a)===h;);return(e=a)>=o?u=!0:(n=t.charCodeAt(a++))===f?d=!0:n===p&&(d=!0,t.charCodeAt(a)===f&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<o;){if((n=t.charCodeAt(e=a++))===f)d=!0;else if(n===p)d=!0,t.charCodeAt(a)===f&&++a;else if(n!==_)continue;return t.slice(r,e)}return u=!0,t.slice(r,o)}var r,i=[],o=t.length,a=0,s=0,u=o<=0,d=!1;for(t.charCodeAt(o-1)===f&&--o,t.charCodeAt(o-1)===p&&--o;(r=n())!==c;){for(var v=[];r!==l&&r!==c;)v.push(r),r=n();e&&null==(v=e(v,s++))||i.push(v)}return i}function a(e,n){return e.map(function(e){return n.map(function(t){return m(e[t])}).join(t)})}function s(e,n){return null==n&&(n=o(e)),[n.map(m).join(t)].concat(a(e,n)).join("\n")}function d(t,e){return null==e&&(e=o(t)),a(t,e).join("\n")}function v(t){return t.map(g).join("\n")}function g(e){return e.map(m).join(t)}function m(t){return null==t?"":t instanceof Date?u(t):y.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var y=new RegExp('["'+t+"\n\r]"),_=t.charCodeAt(0);return{parse:e,parseRows:n,format:s,formatBody:d,formatRows:v,formatRow:g,formatValue:m}}},function(t,e,n){"use strict";e.a=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}e.b=r,e.a=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],a=t[i+1],s=i>0?t[i-1]:2*o-a,u=i<e-1?t[i+2]:2*a-o;return r((n-i/e)*e,s,o,a,u)}}},function(t,e,n){"use strict";function r(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}e.a=r,e.b=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}},function(t,e,n){"use strict";var r=n(81),i=n(377),o=n(371),a=n(374),s=n(144),u=n(376),l=n(378),c=n(373),h=n(215);e.a=function(t,e){var f,p=typeof e;return null==e||"boolean"===p?n.i(c.a)(e):("number"===p?s.a:"string"===p?(f=n.i(r.a)(e))?(e=f,i.a):l.a:e instanceof r.a?i.a:e instanceof Date?a.a:n.i(h.a)(e)?h.b:Array.isArray(e)?o.a:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?u.a:s.a)(t,e)}},function(t,e,n){"use strict";function r(t){return Math.log(t)}function i(t){return Math.exp(t)}function o(t){return-Math.log(-t)}function a(t){return-Math.exp(-t)}function s(t){return isFinite(t)?+("1e"+t):t<0?0:t}function u(t){return 10===t?s:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function l(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function c(t){return function(e){return-t(-e)}}function h(t){function e(){return s=l(m),h=u(m),g()[0]<0?(s=c(s),h=c(h),t(o,a)):t(r,i),f}var s,h,f=t(r,i),g=f.domain,m=10;return f.base=function(t){return arguments.length?(m=+t,e()):m},f.domain=function(t){return arguments.length?(g(t),e()):g()},f.ticks=function(t){var e,r=g(),i=r[0],o=r[r.length-1];(e=o<i)&&(c=i,i=o,o=c);var a,u,l,c=s(i),f=s(o),d=null==t?10:+t,v=[];if(!(m%1)&&f-c<d){if(c=Math.round(c)-1,f=Math.round(f)+1,i>0){for(;c<f;++c)for(u=1,a=h(c);u<m;++u)if(!((l=a*u)<i)){if(l>o)break;v.push(l)}}else for(;c<f;++c)for(u=m-1,a=h(c);u>=1;--u)if(!((l=a*u)<i)){if(l>o)break;v.push(l)}}else v=n.i(p.d)(c,f,Math.min(f-c,d)).map(h);return e?v.reverse():v},f.tickFormat=function(t,e){if(null==e&&(e=10===m?".0e":","),"function"!=typeof e&&(e=n.i(d.f)(e)),t===1/0)return e;null==t&&(t=10);var r=Math.max(1,m*t/f.ticks().length);return function(t){var n=t/h(Math.round(s(t)));return n*m<m-.5&&(n*=m),n<=r?e(t):""}},f.nice=function(){return g(n.i(v.a)(g(),{floor:function(t){return h(Math.floor(s(t)))},ceil:function(t){return h(Math.ceil(s(t)))}}))},f}function f(){var t=h(n.i(g.b)()).domain([1,10]);return t.copy=function(){return n.i(g.c)(t,f()).base(t.base())},m.b.apply(t,arguments),t}e.b=h,e.a=f;var p=n(44),d=n(369),v=n(379),g=n(67),m=n(29)},function(t,e,n){"use strict";function r(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function i(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function o(t){return t<0?-t*t:t*t}function a(t){function e(){return 1===s?t(l.a,l.a):.5===s?t(i,o):t(r(s),r(1/s))}var a=t(l.a,l.a),s=1;return a.exponent=function(t){return arguments.length?(s=+t,e()):s},n.i(u.b)(a)}function s(){var t=a(n.i(l.b)());return t.copy=function(){return n.i(l.c)(t,s()).exponent(t.exponent())},c.b.apply(t,arguments),t}e.b=a,e.a=s;var u=n(83),l=n(67),c=n(29)},function(t,e,n){"use strict";function r(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function i(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function o(t){var e=1,o=t(r(e),i(e));return o.constant=function(n){return arguments.length?t(r(e=+n),i(e)):e},n.i(a.b)(o)}e.a=o;var a=n(83);n(67),n(29)},function(t,e,n){"use strict";function r(t){return i=n.i(l.a)(t),o=i.format,a=i.parse,s=i.utcFormat,u=i.utcParse,i}n.d(e,"c",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var i,o,a,s,u,l=n(387);r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(t,e,n){"use strict";var r=(n(27),n(1072));n.d(e,"v",function(){return r.a}),n.d(e,"h",function(){return r.a});var i=n(1075);n.d(e,"u",function(){return i.a}),n.d(e,"g",function(){return i.a});var o=n(1073);n.d(e,"t",function(){return o.a});var a=n(1071);n.d(e,"s",function(){return a.a});var s=n(1070);n.d(e,"k",function(){return s.a});var u=n(1082);n.d(e,"r",function(){return u.a}),n.d(e,"m",function(){return u.a}),n.d(e,"j",function(){return u.b}),n.d(e,"n",function(){return u.c});var l=n(1074);n.d(e,"q",function(){return l.a});var c=n(1083);n.d(e,"l",function(){return c.a});var h=n(1078);n.d(e,"f",function(){return h.a});var f=n(1077);n.d(e,"e",function(){return f.a});var p=n(1076);n.d(e,"d",function(){return p.a});var d=n(1080);n.d(e,"c",function(){return d.a}),n.d(e,"o",function(){return d.a}),n.d(e,"i",function(){return d.b}),n.d(e,"p",function(){return d.c});var v=n(1079);n.d(e,"b",function(){return v.a});var g=n(1081);n.d(e,"a",function(){return g.a})},function(t,e,n){"use strict";function r(){return _||(w(i),_=x.now()+b)}function i(){_=0}function o(){this._call=this._time=this._next=null}function a(t,e,n){var r=new o;return r.restart(t,e,n),r}function s(){r(),++d;for(var t,e=f;e;)(t=_-e._time)>=0&&e._call.call(null,t),e=e._next;--d}function u(){_=(y=x.now())+b,d=v=0;try{s()}finally{d=0,c(),_=0}}function l(){var t=x.now(),e=t-y;e>m&&(b-=e,y=t)}function c(){for(var t,e,n=f,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:f=e);p=t,h(r)}function h(t){if(!d){v&&(v=clearTimeout(v));t-_>24?(t<1/0&&(v=setTimeout(u,t-x.now()-b)),g&&(g=clearInterval(g))):(g||(y=x.now(),g=setInterval(l,m)),d=1,w(u))}}e.c=r,e.b=o,e.a=a;var f,p,d=0,v=0,g=0,m=1e3,y=0,_=0,b=0,x="object"==typeof performance&&performance.now?performance:Date,w="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};o.prototype=a.prototype={constructor:o,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?r():+n)+(null==e?0:+e),this._next||p===this||(p?p._next=this:f=this,p=this),this._call=t,this._time=n,h()},stop:function(){this._call&&(this._call=null,this._time=1/0,h())}}},function(t,e,n){"use strict";function r(){var t=new s.a(9);return s.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function i(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+p*a+l,t[7]=f*i+p*s+c,t[8]=f*o+p*u+h,t}function o(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=Math.sin(n),p=Math.cos(n);return t[0]=p*r+f*a,t[1]=p*i+f*s,t[2]=p*o+f*u,t[3]=p*a-f*r,t[4]=p*s-f*i,t[5]=p*u-f*o,t[6]=l,t[7]=c,t[8]=h,t}function a(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}e.a=r,e.b=i,e.c=o,e.d=a;var s=n(50)},function(t,e,n){"use strict";function r(){var t=new R.a(4);return R.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function i(t){var e=new R.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e,n,r){var i=new R.a(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function c(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function m(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function y(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function x(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function w(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function E(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function M(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function C(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],l=n[2]*r[3]-n[3]*r[2],c=e[0],h=e[1],f=e[2],p=e[3];return t[0]=h*l-f*u+p*s,t[1]=-c*l+f*a-p*o,t[2]=c*u-h*a+p*i,t[3]=-c*s+h*o-f*i,t}function A(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function P(t,e){e=e||1;var n,r,i,o,a,s;do{n=2*R.b()-1,r=2*R.b()-1,a=n*n+r*r}while(a>=1);do{i=2*R.b()-1,o=2*R.b()-1,s=i*i+o*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function k(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,h=l*i+u*r-a*o,f=l*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=c*l+p*-a+h*-u-f*-s,t[1]=h*l+p*-s+f*-a-c*-u,t[2]=f*l+p*-u+c*-s-h*-a,t[3]=e[3],t}function O(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function j(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function D(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-a)<=R.c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=R.c*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=R.c*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=R.c*Math.max(1,Math.abs(o),Math.abs(l))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.fromValues=o,e.copy=a,e.set=s,e.add=u,e.subtract=l,e.multiply=c,e.divide=h,e.ceil=f,e.floor=p,e.min=d,e.max=v,e.round=g,e.scale=m,e.scaleAndAdd=y,e.distance=_,e.squaredDistance=b,e.length=x,e.squaredLength=w,e.negate=S,e.inverse=E,e.normalize=M,e.dot=T,e.cross=C,e.lerp=A,e.random=P,e.transformMat4=k,e.transformQuat=I,e.zero=O,e.str=j,e.exactEquals=L,e.equals=D,n.d(e,"sub",function(){return B}),n.d(e,"mul",function(){return z}),n.d(e,"div",function(){return F}),n.d(e,"dist",function(){return N}),n.d(e,"sqrDist",function(){return U}),n.d(e,"len",function(){return V}),n.d(e,"sqrLen",function(){return G}),n.d(e,"forEach",function(){return q});var R=n(50),B=l,z=c,F=h,N=_,U=b,V=x,G=w,q=function(){var t=r();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(226),i=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(225),i=n(395),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},function(t,e,n){var r=n(85),i=n(51),o=r(i,"Map");t.exports=o},function(t,e,n){function r(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var i=n(408);t.exports=r},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}var i=n(1130);t.exports=r},function(t,e,n){var r=n(414),i=r(Object.getPrototypeOf,Object);t.exports=i},function(t,e,n){var r=n(1134),i=n(425),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return a.call(t,e)}))}:i;t.exports=u},function(t,e,n){var r=n(1126),i=n(227),o=n(1128),a=n(398),s=n(1131),u=n(70),l=n(417),c="[object Map]",h="[object Promise]",f="[object Set]",p="[object WeakMap]",d="[object DataView]",v=l(r),g=l(i),m=l(o),y=l(a),_=l(s),b=u;(r&&b(new r(new ArrayBuffer(1)))!=d||i&&b(new i)!=c||o&&b(o.resolve())!=h||a&&b(new a)!=f||s&&b(new s)!=p)&&(b=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return d;case g:return c;case m:return h;case y:return f;case _:return p}return e}),t.exports=b},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e,n){(function(t){var r=n(409),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=u}).call(e,n(158)(t))},function(t,e,n){(function(t){var r=n(51),i=n(1233),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||i;t.exports=c}).call(e,n(158)(t))},function(t,e,n){var r=n(1154),i=n(229),o=n(235),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e,n){function r(t){return a(t)?i(t):o(t)}var i=n(400),o=n(1155),a=n(154);t.exports=r},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return u});var i=n(111),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":n.i(i.a)(r))&&r},a=(o.self||o.window||o.global,o.window||o.self||o.global),s=o.global||o.self||o.window,u=(o.document,o.process||{});console}).call(e,n(46),n(61))},function(t,e,n){"use strict";(function(t){function r(){return!("object"===(void 0===t?"undefined":n.i(i.a)(t))&&"[object process]"===String(t)&&!t.browser)||n.i(o.a)()}e.a=r;var i=n(111),o=n(241)}).call(e,n(61))},function(t,e,n){"use strict";(function(t){function r(e){if("undefined"!=typeof window&&"object"===n.i(i.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"===n.i(i.a)(t.versions)&&Boolean(t.versions.electron))return!0;var r="object"===("undefined"==typeof navigator?"undefined":n.i(i.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,o=e||r;return!!(o&&o.indexOf("Electron")>=0)}e.a=r;var i=n(111)}).call(e,n(61))},function(t,e,n){"use strict";function r(t){return"string"==typeof t?a[t.toUpperCase()]||a.WHITE:t}function i(t,e,n){return o.a||"string"!=typeof t||(e&&(e=r(e),t="[".concat(e,"m").concat(t,"[39m")),n&&(e=r(n),t="[".concat(n+10,"m").concat(t,"[49m"))),t}e.a=i;var o=n(119),a={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97}},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(n,r,i,o,a,s){if(!(a-o<=i)){var u=o+a>>1;e(n,r,u,o,a,s%2),t(n,r,i,o,u-1,s+1),t(n,r,i,u+1,a,s+1)}}function e(t,r,i,o,a,s){for(;a>o;){if(a-o>600){var u=a-o+1,l=i-o+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1);e(t,r,i,Math.max(o,Math.floor(i-l*h/u+f)),Math.min(a,Math.floor(i+(u-l)*h/u+f)),s)}var p=r[2*i+s],d=o,v=a;for(n(t,r,o,i),r[2*a+s]>p&&n(t,r,o,a);d<v;){for(n(t,r,d,v),d++,v--;r[2*d+s]<p;)d++;for(;r[2*v+s]>p;)v--}r[2*o+s]===p?n(t,r,o,v):(v++,n(t,r,v,a)),v<=i&&(o=v+1),i<=v&&(a=v-1)}}function n(t,e,n,i){r(t,n,i),r(e,2*n,2*i),r(e,2*n+1,2*i+1)}function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),f=l.pop(),p=l.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var v=Math.floor((p+f)/2);s=e[2*v],u=e[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[v]);var g=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(p),l.push(v-1),l.push(g)),(0===h?i>=s:o>=u)&&(l.push(v+1),l.push(f),l.push(g))}}return c}function o(t,e,n,r,i,o){for(var s=[0,t.length-1,0],u=[],l=i*i;s.length;){var c=s.pop(),h=s.pop(),f=s.pop();if(h-f<=o)for(var p=f;p<=h;p++)a(e[2*p],e[2*p+1],n,r)<=l&&u.push(t[p]);else{var d=Math.floor((f+h)/2),v=e[2*d],g=e[2*d+1];a(v,g,n,r)<=l&&u.push(t[d]);var m=(c+1)%2;(0===c?n-i<=v:r-i<=g)&&(s.push(f),s.push(d-1),s.push(m)),(0===c?n+i>=v:r+i>=g)&&(s.push(d+1),s.push(h),s.push(m))}}return u}function a(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function s(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function u(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:h(r),y:f(i),zoom:1/0,index:e,parentId:-1}}function l(t){return{type:"Feature",id:t.id,properties:c(t),geometry:{type:"Point",coordinates:[p(t.x),d(t.y)]}}}function c(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return v(v({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function h(t){return t/360+.5}function f(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function p(t){return 360*(t-.5)}function d(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function v(t,e){for(var n in e)t[n]=e[n];return t}function g(t){return t.x}function m(t){return t.y}var y=function(t){return t[0]},_=function(t){return t[1]},b=function(e,n,r,i,o){void 0===n&&(n=y),void 0===r&&(r=_),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,s=this.ids=new a(e.length),u=this.coords=new o(2*e.length),l=0;l<e.length;l++)s[l]=l,u[2*l]=n(e[l]),u[2*l+1]=r(e[l]);t(s,u,i,0,s.length-1,0)};b.prototype.range=function(t,e,n,r){return i(this.ids,this.coords,t,e,n,r,this.nodeSize)},b.prototype.within=function(t,e,n){return o(this.ids,this.coords,t,e,n,this.nodeSize)};var x={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(t){return t}},w=function(t){this.options=v(Object.create(x),t),this.trees=new Array(this.options.maxZoom+1)};return w.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(u(t[l],l));this.trees[i+1]=new b(s,g,m,o,Float32Array),n&&console.timeEnd(a);for(var c=i;c>=r;c--){var h=+Date.now();s=this._cluster(s,c),this.trees[c]=new b(s,g,m,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-h)}return n&&console.timeEnd("total time"),this},w.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],c=u.range(h(n),f(o),h(i),f(r)),p=[],d=0,v=c;d<v.length;d+=1){var g=v[d],m=u.points[g];p.push(m.numPoints?l(m):this.points[m.index])}return p},w.prototype.getChildren=function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],c=0,h=s;c<h.length;c+=1){var f=h[c],p=i.points[f];p.parentId===t&&u.push(p.numPoints?l(p):this.points[p.index])}if(0===u.length)throw new Error(r);return u},w.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},w.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius,u=s/a,l=(n-u)/i,c=(n+1+u)/i,h={features:[]};return this._addTileFeatures(r.range((e-u)/i,l,(e+1+u)/i,c),r.points,e,n,i,h),0===e&&this._addTileFeatures(r.range(1-u/i,l,1,c),r.points,i,n,i,h),e===i-1&&this._addTileFeatures(r.range(0,l,u/i,c),r.points,-1,n,i,h),h.features.length?h:null},w.prototype.getClusterExpansionZoom=function(t){for(var e=t%32-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},w.prototype._appendLeaves=function(t,e,n,r,i){for(var o=this.getChildren(e),a=0,s=o;a<s.length;a+=1){var u=s[a],l=u.properties;if(l&&l.cluster?i+l.point_count<=r?i+=l.point_count:i=this._appendLeaves(t,l.cluster_id,n,r,i):i<r?i++:t.push(u),t.length===n)break}return i},w.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=e[u],h={type:1,geometry:[[Math.round(this.options.extent*(l.x*i-n)),Math.round(this.options.extent*(l.y*i-r))]],tags:l.numPoints?c(l):this.points[l.index].properties},f=l.numPoints?l.id:this.points[l.index].id;void 0!==f&&(h.id=f),o.features.push(h)}},w.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},w.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,u=i/(o*Math.pow(2,e)),l=0;l<t.length;l++){var c=t[l];if(!(c.zoom<=e)){c.zoom=e;for(var h=this.trees[e+1],f=h.within(c.x,c.y,u),p=c.numPoints||1,d=c.x*p,v=c.y*p,g=a&&p>1?this._map(c,!0):null,m=(l<<5)+(e+1),y=0,_=f;y<_.length;y+=1){var b=_[y],x=h.points[b];if(!(x.zoom<=e)){x.zoom=e;var w=x.numPoints||1;d+=x.x*w,v+=x.y*w,p+=w,x.parentId=m,a&&(g||(g=this._map(c,!0)),a(g,this._map(x)))}}1===p?n.push(c):(c.parentId=m,n.push(s(d/p,v/p,m,p,g)))}}return n},w.prototype._map=function(t,e){if(t.numPoints)return e?v({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?v({},r):r},w})},function(t,e,n){"use strict";var r=(n(71),n(449)),i=n(450),o=n(451),a=n(452),s=n(453),u=n(454);n.d(e,"a",function(){return u.b});n(245);n.i(u.a)("Color",r.a),n.i(u.a)("Opacity",i.a),n.i(u.a)("Position",o.a),n.i(u.a)("Shape",a.a),n.i(u.a)("Size",s.a)},function(t,e,n){"use strict";n(134)},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o});var r="g2-crosshair",i=r+"-line",o=r+"-text"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"CONTAINER_CLASS",function(){return r}),n.d(e,"TITLE_CLASS",function(){return i}),n.d(e,"LIST_CLASS",function(){return o}),n.d(e,"LIST_ITEM_CLASS",function(){return a}),n.d(e,"MARKER_CLASS",function(){return s}),n.d(e,"VALUE_CLASS",function(){return u}),n.d(e,"NAME_CLASS",function(){return l}),n.d(e,"CROSSHAIR_X",function(){return c}),n.d(e,"CROSSHAIR_Y",function(){return h});var r="g2-tooltip",i="g2-tooltip-title",o="g2-tooltip-list",a="g2-tooltip-list-item",s="g2-tooltip-marker",u="g2-tooltip-value",l="g2-tooltip-name",c="g2-tooltip-crosshair-x",h="g2-tooltip-crosshair-y"},function(t,e,n){"use strict";function r(t){var e=0;return n.i(i.each)(t,function(t){var n=t.getBBox(),r=n.width;e<r&&(e=r)}),e}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t,e,r){var o=e+"Style",a=null;return n.i(i.each)(r,function(e,r){t[r]&&e[o]&&(a||(a={}),n.i(i.mix)(a,e[o]))}),a}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t,e){var r=n.i(i.a)(t,"height",e);return"auto"===r&&(r=t.offsetHeight),parseFloat(r)}e.a=r;var i=n(96)},function(t,e,n){"use strict";function r(t,e){var r=n.i(i.a)(t,"width",e);return"auto"===r&&(r=t.offsetWidth),parseFloat(r)}e.a=r;var i=n(96)},function(t,e,n){"use strict";var r="*",i=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0),this},t.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this._events[t]||[],a=this._events[r]||[],s=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback,u=a.once;u&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};s(o),s(a)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();e.a=i},function(t,e,n){"use strict";var r=n(1),i=n(252),o=n(123),a=function(t){function e(e){var r=t.call(this)||this;r.destroyed=!1;var i=r.getDefaultCfg();return r.cfg=n.i(o.j)(i,e),r}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(i.a);e.a=a},function(t,e,n){"use strict";function r(t){t.isGroup()?(t.isEntityGroup()||t.get("children").length)&&t.onCanvasChange("add"):t.onCanvasChange("add")}function i(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach(function(t){i(t,e)})}}function o(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach(function(t){o(t,e)})}}function a(t,e,r){void 0===r&&(r=!0),r?e.destroy():(e.set("parent",null),e.set("canvas",null)),n.i(c.a)(t.getChildren(),e)}function s(t){return function(e,n){var r=t(e,n);return 0===r?e[f]-n[f]:r}}var u=n(1),l=n(255),c=n(123),h={},f="_INDEX",p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(u.__extends)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0,o=[],a=[],s=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return s.length>0?(n.i(c.c)(s,function(t){var e=t.getBBox();o.push(e.minX,e.maxX),a.push(e.minY,e.maxY)}),t=Math.min.apply(null,o),e=Math.max.apply(null,o),r=Math.min.apply(null,a),i=Math.max.apply(null,a)):(t=0,e=0,r=0,i=0),{x:t,y:r,minX:t,minY:r,maxX:e,maxY:i,width:e-t,height:i-r}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0,o=[],a=[],s=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return s.length>0?(n.i(c.c)(s,function(t){var e=t.getCanvasBBox();o.push(e.minX,e.maxX),a.push(e.minY,e.maxY)}),t=Math.min.apply(null,o),e=Math.max.apply(null,o),r=Math.min.apply(null,a),i=Math.max.apply(null,a)):(t=0,e=0,r=0,i=0),{x:t,y:r,minX:t,minY:r,maxX:e,maxY:i,width:e-t,height:i-r}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();n.i(c.c)(e,function(e){e.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.i(c.d)(r)?i=r:i.type=r;var o=h[i.type];o||(o=n.i(c.e)(i.type),h[i.type]=o);var a=this.getShapeBase(),s=new a[o](i);return this.add(s),s},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,i=t[0],o=t[1];if(n.i(c.f)(i))r=new i(o?o:{parent:this});else{var a=i||{};r=new(this.getGroupBase())(a)}return this.add(r),r},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,r){if(!n.i(c.g)(this))return null;var i,o=this.getChildren();if(this.isCanvas())i=this._findShape(o,t,e,r);else{var a=[t,e,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(i=this._findShape(o,a[0],a[1],r))}return i},e.prototype._findShape=function(t,e,r,i){for(var o=null,a=t.length-1;a>=0;a--){var s=t[a];if(n.i(c.g)(s)&&(s.isGroup()?o=s.getShape(e,r,i):s.isHit(e,r)&&(o=s)),o)break}return o},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),s=this.get("timeline"),u=t.getParent();u&&a(u,t,!1),t.set("parent",this),e&&i(t,e),s&&o(t,s),n.push(t),r(t),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();n.i(c.c)(t,function(t,e){return t[f]=e,t}),t.sort(s(function(t,e){return t.get("zIndex")-e.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],r=this.getChildren();return n.i(c.c)(r,function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))}),e},e.prototype.find=function(t){var e=null,r=this.getChildren();return n.i(c.c)(r,function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1}),e},e.prototype.findById=function(t){return this.find(function(e){return e.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(e){return e.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(e){return e.get("name")===t})},e}(l.a);e.a=p},function(t,e,n){"use strict";function r(t){for(var e=[],r=0;r<t.length;r++)n.i(u.isArray)(t[r])?e.push([].concat(t[r])):e.push(t[r]);return e}function i(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}function o(t,e){var r={},i=e.attr();return n.i(u.each)(t,function(t,e){-1!==v.indexOf(e)||n.i(u.isEqual)(i[e],t)||(r[e]=t)}),r}function a(t,e){if(e.onFrame)return t;var r=e.startTime,i=e.delay,o=e.duration,a=Object.prototype.hasOwnProperty;return n.i(u.each)(t,function(t){r+i<t.startTime+t.delay+t.duration&&o>t.delay&&n.i(u.each)(e.toAttrs,function(e,n){a.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])})}),t}var s=n(1),u=n(0),l=n(24),c=n(123),h=n(256),f=n(253),p="matrix",d=["zIndex","capture","visible","type"],v=["repeat"],g=":",m="*",y=function(t){function e(e){var r=t.call(this,e)||this;r.attrs={};var i=r.getDefaultAttrs();return n.i(u.mix)(i,e.attrs),r.attrs=i,r.initAttrs(i),r.initAnimate(),r}return n.i(s.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e[0],o=e[1];if(!i)return this.attrs;if(n.i(u.isObject)(i)){for(var a in i)this.setAttr(a,i[a]);return this.afterAttrsChange(i),this}return 2===e.length?(this.setAttr(i,o),this.afterAttrsChange((t={},t[i]=o,t)),this):this.attrs[i]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(n.i(c.a)(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(p,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(p)},e.prototype.setMatrix=function(t){this.attr(p,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.get("totalMatrix");if(!t){var e=this.attr("matrix"),r=this.get("parentMatrix");t=r&&e?n.i(h.b)(r,e):e||r,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),r=null;r=t&&e?n.i(h.b)(t,e):e||t,this.set("totalMatrix",r),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?n.i(h.a)(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var r=n.i(h.c)(e);if(r)return n.i(h.a)(r,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),r=null;if(t){var i=this.getShapeBase(),o=n.i(u.upperFirst)(t.type),a=i[o];a&&(r=new a({type:t.type,isClipShape:!0,attrs:t.attrs,canvas:e}))}return this.set("clipShape",r),this.onCanvasChange("clip"),r},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,i={};n.i(u.each)(e,function(t,o){n.i(u.isArray)(e[o])?i[o]=r(e[o]):i[o]=e[o]});var o=this.constructor,a=new o({attrs:i});return n.i(u.each)(d,function(e){a.set(e,t.get(e))}),a},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.set("animating",!0);var r=this.get("timeline");r||(r=this.get("canvas").get("timeline"),this.set("timeline",r));var s=this.get("animations")||[];r.timer||r.initTimer();var l,c,h,f,p,d=t[0],v=t[1],g=t[2],m=void 0===g?"easeLinear":g,y=t[3],_=void 0===y?u.noop:y,b=t[4],x=void 0===b?0:b;n.i(u.isFunction)(d)?(l=d,d={}):n.i(u.isObject)(d)&&d.onFrame&&(l=d.onFrame,c=d.repeat),n.i(u.isObject)(v)?(p=v,v=p.duration,m=p.easing||"easeLinear",x=p.delay||0,c=p.repeat||c||!1,_=p.callback||u.noop,h=p.pauseCallback||u.noop,f=p.resumeCallback||u.noop):(n.i(u.isNumber)(_)&&(x=_,_=null),n.i(u.isFunction)(m)?(_=m,m="easeLinear"):m=m||"easeLinear");var w=o(d,this),S={fromAttrs:i(w,this),toAttrs:w,duration:v,easing:m,repeat:c,callback:_,pauseCallback:h,resumeCallback:f,delay:x,startTime:r.getTime(),id:n.i(u.uniqueId)(),onFrame:l,pathFormatted:!1};s.length>0?s=a(s,S):r.addAnimator(this),s.push(S),this.set("animations",s),this.set("_pause",{isPaused:!1})},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var r=this.get("animations");n.i(u.each)(r,function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),r=t.getTime();return n.i(u.each)(e,function(t){t._paused=!0,t._pauseTime=r,t.pauseCallback&&t.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:r}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),e=t.getTime(),r=this.get("animations"),i=this.get("_pause").pauseTime;return n.i(u.each)(r,function(t){t.startTime=t.startTime+(e-i),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",r),this},e.prototype.emitDelegation=function(t,e){var r,i=this,o=e.propagationPath;this.getEvents();"mouseenter"===t?r=e.fromShape:"mouseleave"===t&&(r=e.toShape);for(var a=function(t){var a=o[t],l=a.get("name");if(l){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&r&&n.i(c.b)(a,r))return"break";n.i(u.isArray)(l)?n.i(u.each)(l,function(t){i.emitDelegateEvent(a,t,e)}):s.emitDelegateEvent(a,l,e)}},s=this,l=0;l<o.length;l++){if("break"===a(l))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+g+n.type;(r[i]||r[m])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.getMatrix(),i=n.i(l.a)(r,[["t",t,e]]);return this.setMatrix(i),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var r=this.getMatrix(),i=n.i(l.a)(r,[["s",t,e||t]]);return this.setMatrix(i),this},e.prototype.rotate=function(t){var e=this.getMatrix(),r=n.i(l.a)(e,[["r",t]]);return this.setMatrix(r),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),r=e.x,i=e.y,o=this.getMatrix(),a=n.i(l.a)(o,[["t",-r,-i],["r",t],["t",r,i]]);return this.setMatrix(a),this},e.prototype.rotateAtPoint=function(t,e,r){var i=this.getMatrix(),o=n.i(l.a)(i,[["t",-t,-e],["r",r],["t",t,e]]);return this.setMatrix(o),this},e}(f.a);e.a=y},function(t,e,n){"use strict";function r(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=e[0],p=e[1],d=e[2],v=e[3],g=e[4],m=e[5],y=e[6],_=e[7],b=e[8];return n[0]=f*r+p*a+d*l,n[1]=f*i+p*s+d*c,n[2]=f*o+p*u+d*h,n[3]=v*r+g*a+m*l,n[4]=v*i+g*s+m*c,n[5]=v*o+g*u+m*h,n[6]=y*r+_*a+b*l,n[7]=y*i+_*s+b*c,n[8]=y*o+_*u+b*h,n}function i(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function o(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=c*a-s*l,f=-c*o+s*u,p=l*o-a*u,d=n*h+r*f+i*p;return d?(d=1/d,e[0]=h*d,e[1]=(-c*r+i*l)*d,e[2]=(s*r-i*a)*d,e[3]=f*d,e[4]=(c*n-i*u)*d,e[5]=(-s*n+i*o)*d,e[6]=p*d,e[7]=(-l*n+r*u)*d,e[8]=(a*n-r*o)*d,e):null}e.b=r,e.a=i,e.c=o},function(t,e,n){"use strict";function r(t,e){function n(t,e){if(1===t.length)r.push(t[0]),i.push(t[0]);else{for(var o=[],a=0;a<t.length-1;a++)0===a&&r.push(t[0]),a===t.length-2&&i.push(t[a+1]),o[a]=[(1-e)*t[a][0]+e*t[a+1][0],(1-e)*t[a][1]+e*t[a+1][1]];n(o,e)}}var r=[],i=[];return t.length&&n(t,e),{left:r,right:i.reverse()}}function i(t,e,n){var i=[[t[1],t[2]]];n=n||2;var o=[];"A"===e[0]?(i.push(e[6]),i.push(e[7])):"C"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]]),i.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]])):i.push([e[1],e[2]]);for(var a=i,s=1/n,u=0;u<n-1;u++){var l=s/(1-s*u),c=r(a,l);o.push(c.left),a=c.right}return o.push(a),o.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e=e.concat(t[t.length-1])})}function o(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}function a(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=s(e)[0],u=1;u<=n;u++)o*=u,r=Math.floor(t.length*o),0===r?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function s(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"catmullRomToBezier",function(){return p}),n.d(e,"fillPath",function(){return R}),n.d(e,"fillPathByDiff",function(){return F}),n.d(e,"formatPath",function(){return N}),n.d(e,"intersection",function(){return L}),n.d(e,"parsePathArray",function(){return x}),n.d(e,"parsePathString",function(){return f}),n.d(e,"pathToAbsolute",function(){return v}),n.d(e,"pathToCurve",function(){return _}),n.d(e,"rectPath",function(){return C});var u=n(0),l="\t\n\v\f\r \u2028\u2029",c=new RegExp("([a-z])["+l+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+l+"]*,?["+l+"]*)+)","ig"),h=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+l+"]*,?["+l+"]*","ig"),f=function(t){if(!t)return null;if(n.i(u.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(c,function(n,i,o){var a=[],s=i.toLowerCase();if(o.replace(h,function(t,e){e&&a.push(+e)}),"m"===s&&a.length>2&&(r.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&r.push([i,a[0]]),"r"===s)r.push([i].concat(a));else for(;a.length>=e[s]&&(r.push([i].concat(a.splice(0,e[s]))),e[s]););return t}),r},p=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},d=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),u=t+n*Math.cos(-i*a);o=[["M",s,e+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,u,e+n*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},v=function(t){if(!(t=f(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,s=0,u=0;"M"===t[0][0]&&(i=+t[0][1],o=+t[0][2],a=i,s=o,u++,r[0]=["M",i,o]);for(var l=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),c=void 0,h=void 0,v=u,g=t.length;v<g;v++){if(r.push(c=[]),h=t[v],(e=h[0])!==e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+i,c[7]=+h[7]+o;break;case"V":c[1]=+h[1]+o;break;case"H":c[1]=+h[1]+i;break;case"R":n=[i,o].concat(h.slice(1));for(var m=2,y=n.length;m<y;m++)n[m]=+n[m]+i,n[++m]=+n[m]+o;r.pop(),r=r.concat(p(n,l));break;case"O":r.pop(),n=d(i,o,h[1],h[2]),n.push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(d(i,o,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+h[1]+i,s=+h[2]+o;break;default:for(var m=1,y=h.length;m<y;m++)c[m]=+h[m]+(m%2?i:o)}else if("R"===e)n=[i,o].concat(h.slice(1)),r.pop(),r=r.concat(p(n,l)),c=["R"].concat(h.slice(-2));else if("O"===e)r.pop(),n=d(i,o,h[1],h[2]),n.push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(d(i,o,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));else for(var _=0,b=h.length;_<b;_++)c[_]=h[_];if("O"!==(e=e.toUpperCase()))switch(c[0]){case"Z":i=+a,o=+s;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];break;default:i=c[c.length-2],o=c[c.length-1]}}return r},g=function(t,e,n,r){return[t,e,n,r,n,r]},m=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},y=function(t,e,n,r,i,o,a,s,u,l){n===r&&(n+=1);var c,h,f,p,d,v=120*Math.PI/180,g=Math.PI/180*(+i||0),m=[],_=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(l)h=l[0],f=l[1],p=l[2],d=l[3];else{c=_(t,e,-g),t=c.x,e=c.y,c=_(s,u,-g),s=c.x,u=c.y,t===s&&e===u&&(s+=1,u+=1);var b=(t-s)/2,x=(e-u)/2,w=b*b/(n*n)+x*x/(r*r);w>1&&(w=Math.sqrt(w),n*=w,r*=w);var S=n*n,E=r*r,M=(o===a?-1:1)*Math.sqrt(Math.abs((S*E-S*x*x-E*b*b)/(S*x*x+E*b*b)));p=M*n*x/r+(t+s)/2,d=M*-r*b/n+(e+u)/2,h=Math.asin(((e-d)/r).toFixed(9)),f=Math.asin(((u-d)/r).toFixed(9)),h=t<p?Math.PI-h:h,f=s<p?Math.PI-f:f,h<0&&(h=2*Math.PI+h),f<0&&(f=2*Math.PI+f),a&&h>f&&(h-=2*Math.PI),!a&&f>h&&(f-=2*Math.PI)}var T=f-h;if(Math.abs(T)>v){var C=f,A=s,P=u;f=h+v*(a&&f>h?1:-1),s=p+n*Math.cos(f),u=d+r*Math.sin(f),m=y(s,u,n,r,i,0,a,A,P,[f,C,p,d])}T=f-h;var k=Math.cos(h),I=Math.sin(h),O=Math.cos(f),j=Math.sin(f),L=Math.tan(T/4),D=4/3*n*L,R=4/3*r*L,B=[t,e],z=[t+D*I,e-R*k],F=[s+D*j,u-R*O],N=[s,u];if(z[0]=2*B[0]-z[0],z[1]=2*B[1]-z[1],l)return[z,F,N].concat(m);m=[z,F,N].concat(m).join().split(",");for(var U=[],V=0,G=m.length;V<G;V++)U[V]=V%2?_(m[V-1],m[V],g).y:_(m[V],m[V+1],g).x;return U},_=function(t,e){var n,r=v(t),i=e&&v(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],l="",c="",h=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(y.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(m(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(m(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(g(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(g(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(g(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(g(e.x,e.y,e.X,e.Y))}return t},f=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(u[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},p=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var d=0;d<n;d++){r[d]&&(l=r[d][0]),"C"!==l&&(s[d]=l,d&&(c=s[d-1])),r[d]=h(r[d],o,c),"A"!==s[d]&&"C"===l&&(s[d]="C"),f(r,d),i&&(i[d]&&(l=i[d][0]),"C"!==l&&(u[d]=l,d&&(c=u[d-1])),i[d]=h(i[d],a,c),"A"!==u[d]&&"C"===l&&(u[d]="C"),f(i,d)),p(r,i,o,a,d),p(i,r,a,o,d);var _=r[d],b=i&&i[d],x=_.length,w=i&&b.length;o.x=_[x-2],o.y=_[x-1],o.bx=parseFloat(_[x-4])||o.x,o.by=parseFloat(_[x-3])||o.y,a.bx=i&&(parseFloat(b[w-4])||a.x),a.by=i&&(parseFloat(b[w-3])||a.y),a.x=i&&b[w-2],a.y=i&&b[w-1]}return i?[r,i]:r},b=/,?([a-z]),?/gi,x=function(t){return t.join(",").replace(b,"$1")},w=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},S=function(t,e,n,r,i,o,a,s,u){null===u&&(u=1),u=u>1?1:u<0?0:u;for(var l=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<c;d++){var v=l*h[d]+l,g=w(v,t,n,i,a),m=w(v,e,r,o,s),y=g*g+m*m;p+=f[d]*Math.sqrt(y)}return l*p},E=function(t,e,n,r,i,o,a,s){for(var u,l,c,h,f=[],p=[[],[]],d=0;d<2;++d)if(0===d?(l=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*a,c=3*n-3*t):(l=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*s,c=3*r-3*e),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;(h=-c/l)>0&&h<1&&f.push(h)}else{var v=l*l-4*c*u,g=Math.sqrt(v);if(!(v<0)){var m=(-l+g)/(2*u);m>0&&m<1&&f.push(m);var y=(-l-g)/(2*u);y>0&&y<1&&f.push(y)}}for(var _,b=f.length,x=b;b--;)h=f[b],_=1-h,p[0][b]=_*_*_*t+3*_*_*h*n+3*_*h*h*i+h*h*h*a,p[1][b]=_*_*_*e+3*_*_*h*r+3*_*h*h*o+h*h*h*s;return p[0][x]=t,p[1][x]=e,p[0][x+1]=a,p[1][x+1]=s,p[0].length=p[1].length=x+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}},M=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var u=(t*r-e*n)*(i-a)-(t-n)*(i*s-o*a),l=(t*r-e*n)*(o-s)-(e-r)*(i*s-o*a),c=(t-n)*(o-s)-(e-r)*(i-a);if(c){var h=u/c,f=l/c,p=+h.toFixed(2),d=+f.toFixed(2);if(!(p<+Math.min(t,n).toFixed(2)||p>+Math.max(t,n).toFixed(2)||p<+Math.min(i,a).toFixed(2)||p>+Math.max(i,a).toFixed(2)||d<+Math.min(e,r).toFixed(2)||d>+Math.max(e,r).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:h,y:f}}}},T=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},C=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=x,o},A=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:C(t,e,n,r),vb:[t,e,n,r].join(" ")}},P=function(t,e){return t=A(t),e=A(e),T(e,t.x,t.y)||T(e,t.x2,t.y)||T(e,t.x,t.y2)||T(e,t.x2,t.y2)||T(t,e.x,e.y)||T(t,e.x2,e.y)||T(t,e.x,e.y2)||T(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},k=function(t,e,r,i,o,a,s,l){n.i(u.isArray)(t)||(t=[t,e,r,i,o,a,s,l]);var c=E.apply(null,t);return A(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},I=function(t,e,n,r,i,o,a,s,u){var l=1-u,c=Math.pow(l,3),h=Math.pow(l,2),f=u*u,p=f*u,d=c*t+3*h*u*n+3*l*u*u*i+p*a,v=c*e+3*h*u*r+3*l*u*u*o+p*s,g=t+2*u*(n-t)+f*(i-2*n+t),m=e+2*u*(r-e)+f*(o-2*r+e),y=n+2*u*(i-n)+f*(a-2*i+n),_=r+2*u*(o-r)+f*(s-2*o+r);return{x:d,y:v,m:{x:g,y:m},n:{x:y,y:_},start:{x:l*t+u*n,y:l*e+u*r},end:{x:l*i+u*a,y:l*o+u*s},alpha:90-180*Math.atan2(g-y,m-_)/Math.PI}},O=function(t,e,n){var r=k(t),i=k(e);if(!P(r,i))return n?0:[];for(var o=S.apply(0,t),a=S.apply(0,e),s=~~(o/8),u=~~(a/8),l=[],c=[],h={},f=n?0:[],p=0;p<s+1;p++){var d=I.apply(0,t.concat(p/s));l.push({x:d.x,y:d.y,t:p/s})}for(var p=0;p<u+1;p++){var d=I.apply(0,e.concat(p/u));c.push({x:d.x,y:d.y,t:p/u})}for(var p=0;p<s;p++)for(var v=0;v<u;v++){var g=l[p],m=l[p+1],y=c[v],_=c[v+1],b=Math.abs(m.x-g.x)<.001?"y":"x",x=Math.abs(_.x-y.x)<.001?"y":"x",w=M(g.x,g.y,m.x,m.y,y.x,y.y,_.x,_.y);if(w){if(h[w.x.toFixed(4)]===w.y.toFixed(4))continue;h[w.x.toFixed(4)]=w.y.toFixed(4);var E=g.t+Math.abs((w[b]-g[b])/(m[b]-g[b]))*(m.t-g.t),T=y.t+Math.abs((w[x]-y[x])/(_[x]-y[x]))*(_.t-y.t);E>=0&&E<=1&&T>=0&&T<=1&&(n?f+=1:f.push({x:w.x,y:w.y,t1:E,t2:T}))}}return f},j=function(t,e,n){t=_(t),e=_(e);for(var r,i,o,a,s,u,l,c,h,f,p=n?0:[],d=0,v=t.length;d<v;d++){var g=t[d];if("M"===g[0])r=s=g[1],i=u=g[2];else{"C"===g[0]?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,u,s,u],r=s,i=u);for(var m=0,y=e.length;m<y;m++){var b=e[m];if("M"===b[0])o=l=b[1],a=c=b[2];else{"C"===b[0]?(f=[o,a].concat(b.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,l,c,l,c],o=l,a=c);var x=O(h,f,n);if(n)p+=x;else{for(var w=0,S=x.length;w<S;w++)x[w].segment1=d,x[w].segment2=m,x[w].bez1=h,x[w].bez2=f;p=p.concat(x)}}}}}return p},L=function(t,e){return j(t,e)},D=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(i(t,e,n));else{var o=[].concat(t);"M"===o[0]&&(o[0]="L");for(var a=0;a<=n-1;a++)r.push(o)}return r},R=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(var a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var u=o.reduce(function(e,r,i){return i===n?e.concat(t[n]):e.concat(D(t[i],t[i+1],r))},[]);return u.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||u.push("Z"),u},B=function(t,e){if(t.length!==e.length)return!1;var r=!0;return n.i(u.each)(t,function(t,n){if(t!==e[n])return r=!1,!1}),r},z=function(t,e){var n,r,i=t.length,a=e.length,s=0;if(0===i||0===a)return null;for(var u=[],l=0;l<=i;l++)u[l]=[],u[l][0]={min:l};for(var c=0;c<=a;c++)u[0][c]={min:c};for(var l=1;l<=i;l++){n=t[l-1];for(var c=1;c<=a;c++){r=e[c-1],s=B(n,r)?0:1;var h=u[l-1][c].min+1,f=u[l][c-1].min+1,p=u[l-1][c-1].min+s;u[l][c]=o(h,f,p)}}return u},F=function(t,e){var n=z(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var u=1;u<=r;u++){var l=n[u][u].min;s=u;for(var c=a;c<=i;c++)n[u][c].min<l&&(l=n[u][c].min,s=c);a=s,n[u][a].type&&o.push({index:u-1,type:n[u][a].type})}for(var u=o.length-1;u>=0;u--)a=o[u].index,"add"===o[u].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}r=t.length;var h=i-r;if(r<i)for(var u=0;u<h;u++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t},N=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=s(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=a(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=a(n,t[r-1],2)}t[r]=["C"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=a(n,t[r-1],1)}t[r]=["S"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;default:t[r]=e[r]}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(527);e.getBBoxMethod=r.getMethod;var i=n(526),o=n(520),a=n(525),s=n(524),u=n(528),l=n(523),c=n(522),h=n(521);r.register("rect",i.default),r.register("image",i.default),r.register("circle",o.default),r.register("marker",o.default),r.register("polyline",a.default),r.register("polygon",s.default),r.register("text",u.default),r.register("path",l.default),r.register("line",c.default),r.register("ellipse",h.default)},function(t,e,n){"use strict";function r(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{clientX:e.clientX,clientY:e.clientY}}function i(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function o(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&s.isParent(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(169),s=n(170),u=40,l=0,c=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"],h=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");s.each(c,function(n){e.addEventListener(n,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");s.each(c,function(n){e.removeEventListener(n,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var s=new a.default(t,e);return s.fromShape=i,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(r),s},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=r(t),i=e.getPointByClient(n.clientX,n.clientY);return{x:i.x,y:i.y,clientX:n.clientX,clientY:n.clientY}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){n.button===l&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(n.button===l){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp,c=l-this.mousedownTimeStamp,h=a.clientX-t.clientX,f=a.clientY-t.clientY,p=h*h+f*f;c>120||p>u?s&&s.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,a,s){var u=this._getEventObj(t,e,n,r,a,s);if(r){u.shape=r,i(r,t,u);for(var l=r.getParent();l;)l.emitDelegation(t,u),u.propagationStopped||o(l,t,u),u.propagationPath.push(l),l=l.getParent()}else{i(this.canvas,t,u)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}();e.default=h},function(t,e,n){"use strict";function r(){if(!i){var t=document.createElement("canvas");t.width=1,t.height=1,i=t.getContext("2d")}return i}Object.defineProperty(e,"__esModule",{value:!0});var i=null;e.getOffScreenContext=r},function(t,e,n){"use strict";function r(t,e,n){var r=1;if(s.isString(t)&&(r=t.split("\n").length),r>1){return e*r+i(e,n)*(r-1)}return e}function i(t,e){return e?e-t:.14*t}function o(t,e){var n=u.getOffScreenContext(),r=0;if(s.isNil(t)||""===t)return r;if(n.save(),n.font=e,s.isString(t)&&t.includes("\n")){var i=t.split("\n");s.each(i,function(t){var e=n.measureText(t).width;r<e&&(r=e)})}else r=n.measureText(t).width;return n.restore(),r}function a(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}Object.defineProperty(e,"__esModule",{value:!0});var s=n(170),u=n(260);e.getTextHeight=r,e.getLineSpaceing=i,e.getTextWidth=o,e.assembleFont=a},function(t,e,n){"use strict";function r(t,e,r){var o=n.i(i.getOffScreenContext)();return t.createPath(o),o.isPointInPath(e,r)}e.a=r;var i=n(260);n.n(i)},function(t,e,n){"use strict";function r(t){return Math.abs(t)<a?0:t<0?-1:1}function i(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function o(t,e,n){var o=!1,a=t.length;if(a<=2)return!1;for(var s=0;s<a;s++){var u=t[s],l=t[(s+1)%a];if(i(u,l,[e,n]))return!0;r(u[1]-n)>0!=r(l[1]-n)>0&&r(e-(n-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(o=!o)}return o}e.a=o;var a=1e-6},function(t,e,n){"use strict";function r(t,e,r,o,a,s,u,l){var c=(Math.atan2(l-e,u-t)+2*Math.PI)%(2*Math.PI);if(c<o||c>a)return!1;var h={x:t+r*Math.cos(c),y:e+r*Math.sin(c)};return n.i(i.f)(h.x,h.y,u,l)<=s/2}e.a=r;var i=n(31)},function(t,e,n){"use strict";function r(t,e,r,o,a){var s=t.length;if(s<2)return!1;for(var u=0;u<s-1;u++){var l=t[u][0],c=t[u][1],h=t[u+1][0],f=t[u+1][1];if(n.i(i.a)(l,c,h,f,e,r,o))return!0}if(a){var p=t[0],d=t[s-1];if(n.i(i.a)(p[0],p[1],d[0],d[1],e,r,o))return!0}return!1}e.a=r;var i=n(125)},function(t,e,n){"use strict";function r(t,e){var r=t.match(p);n.i(l.b)(r,function(t){var n=t.split(":");e.addColorStop(n[0],n[1])})}function i(t,e,n){var i,o,a=c.exec(n),s=parseFloat(a[1])%360*(Math.PI/180),u=a[2],l=e.getBBox();s>=0&&s<.5*Math.PI?(i={x:l.minX,y:l.minY},o={x:l.maxX,y:l.maxY}):.5*Math.PI<=s&&s<Math.PI?(i={x:l.maxX,y:l.minY},o={x:l.minX,y:l.maxY}):Math.PI<=s&&s<1.5*Math.PI?(i={x:l.maxX,y:l.maxY},o={x:l.minX,y:l.minY}):(i={x:l.minX,y:l.maxY},o={x:l.maxX,y:l.minY});var h=Math.tan(s),f=h*h,p=(o.x-i.x+h*(o.y-i.y))/(f+1)+i.x,d=h*(o.x-i.x+h*(o.y-i.y))/(f+1)+i.y,v=t.createLinearGradient(i.x,i.y,p,d);return r(u,v),v}function o(t,e,n){var i=h.exec(n),o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]),u=i[4];if(0===s){var l=u.match(p);return l[l.length-1].split(":")[1]}var c=e.getBBox(),f=c.maxX-c.minX,d=c.maxY-c.minY,v=Math.sqrt(f*f+d*d)/2,g=t.createRadialGradient(c.minX+f*o,c.minY+d*a,0,c.minX+f/2,c.minY+d/2,s*v);return r(u,g),g}function a(t,e,n){function r(){i=t.createPattern(o,s),e.set("pattern",i),e.set("patternSource",n)}if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var i,o,a=f.exec(n),s=a[1],u=a[2];switch(s){case"a":s="repeat";break;case"x":s="repeat-x";break;case"y":s="repeat-y";break;case"n":s="no-repeat";break;default:s="no-repeat"}return o=new Image,u.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=u,o.complete?r():(o.onload=r,o.src=o.src),i}function s(t,e,r){if(n.i(l.a)(r)){if("("===r[1]||"("===r[2]){if("l"===r[0])return i(t,e,r);if("r"===r[0])return o(t,e,r);if("p"===r[0])return a(t,e,r)}return r}}function u(t){var e=0,r=0,i=0,o=0;return n.i(l.e)(t)?1===t.length?e=r=i=o=t[0]:2===t.length?(e=i=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],i=t[2]):(e=t[0],r=t[1],i=t[2],o=t[3]):e=r=i=o=t,[e,r,i,o]}e.b=s,e.a=u;var l=n(31),c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,h=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,f=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,p=/[\d.]+:(#[^\s]+|[^\)]+\))/gi},function(t,e,n){"use strict";function r(t,e,n,r,i){for(var s,u=.005,l=1/0,c=[n,r],h=0;h<=20;h++){var f=.05*h,p=[i.apply(null,t.concat([f])),i.apply(null,e.concat([f]))],d=o.distance(c[0],c[1],p[0],p[1]);d<l&&(s=f,l=d)}if(0===s)return{x:t[0],y:e[0]};if(1===s){var v=t.length;return{x:t[v-1],y:e[v-1]}}l=1/0;for(var h=0;h<32&&!(u<a);h++){var g=s-u,m=s+u,p=[i.apply(null,t.concat([g])),i.apply(null,e.concat([g]))],d=o.distance(c[0],c[1],p[0],p[1]);if(g>=0&&d<l)s=g,l=d;else{var y=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],_=o.distance(c[0],c[1],y[0],y[1]);m<=1&&_<l?(s=m,l=_):u*=.5}}return{x:i.apply(null,t.concat([s])),y:i.apply(null,e.concat([s]))}}function i(t,e){for(var n=0,r=t.length,i=0;i<r;i++){var a=t[i],s=e[i],u=t[(i+1)%r],l=e[(i+1)%r];n+=o.distance(a,s,u,l)}return n/2}Object.defineProperty(e,"__esModule",{value:!0});var o=n(47),a=1e-4;e.nearestPoint=r,e.snapLength=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(553),i=n(47);e.default={box:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var o=t[r];e.push(o[0]),n.push(o[1])}return i.getBBoxByArray(e,n)},length:function(t){return r.lengthOfSegment(t)},pointAt:function(t,e){return r.pointAtSegments(t,e)},pointDistance:function(t,e,n){return r.distanceAtSegment(t,e,n)},tangentAngle:function(t,e){return r.angleAtSegments(t,e)}}},function(t,e,n){"use strict";function r(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function i(t,e,n){var r=t+n-2*e;if(l.isNumberEqual(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function o(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function a(t,e,n,i,o,a,s){var l=r(t,n,o,s),c=r(e,i,a,s),h=u.default.pointAt(t,e,n,i,s),f=u.default.pointAt(n,i,o,a,s);return[[t,e,h.x,h.y,l,c],[l,c,f.x,f.y,o,a]]}function s(t,e,n,r,i,o,u){if(0===u)return(l.distance(t,e,n,r)+l.distance(n,r,i,o)+l.distance(t,e,i,o))/2;var c=a(t,e,n,r,i,o,.5),h=c[0],f=c[1];return h.push(u-1),f.push(u-1),s.apply(null,h)+s.apply(null,f)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(62),l=n(47),c=n(267);e.default={box:function(t,e,n,o,a,s){var u=i(t,n,a)[0],c=i(e,o,s)[0],h=[t,a],f=[e,s];return void 0!==u&&h.push(r(t,n,a,u)),void 0!==c&&f.push(r(e,o,s,c)),l.getBBoxByArray(h,f)},length:function(t,e,n,r,i,o){return s(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,i,o,a,s,u){return c.nearestPoint([t,n,o],[e,i,a],s,u,r)},pointDistance:function(t,e,n,r,i,o,a,s){var u=this.nearestPoint(t,e,n,r,i,o,a,s);return l.distance(u.x,u.y,a,s)},interpolationAt:r,pointAt:function(t,e,n,i,o,a,s){return{x:r(t,n,o,s),y:r(e,i,a,s)}},divide:function(t,e,n,r,i,o,s){return a(t,e,n,r,i,o,s)},tangentAngle:function(t,e,n,r,i,a,s){var u=o(t,n,i,s),c=o(e,r,a,s),h=Math.atan2(c,u);return l.piMod(h)}}},function(t,e,n){"use strict";function r(t){return o[t.toLowerCase()]}function i(t,e){o[t.toLowerCase()]=e}e.b=r,e.a=i;var o={}},function(t,e,n){"use strict";function r(t,e){a[t]=e}function i(){return Object.keys(a)}function o(t){return a[t]}e.a=r,e.b=i,e.c=o;var a={}},function(t,e,n){"use strict";var r=function(){function t(t,e,n){this.view=t,this.gEvent=e,this.data=n,this.type=e.type}return Object.defineProperty(t.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.clone=function(){return new t(this.view,this.gEvent,this.data)},t}();e.a=r},function(t,e,n){"use strict";function r(t,e){b.prototype[t.toLowerCase()]=function(t){void 0===t&&(t={});var r=n.i(i.__assign)({container:this.middleGroup.addGroup({name:"element"}),labelsContainer:this.foregroundGroup.addGroup({name:"element"})},t),o=new e(r);return this.geometries.push(o),o}}e.a=r;var i=n(1),o=n(0),a=n(11),s=n(175),u=n(177),l=n(191),c=n(289),h=n(103),f=n(42),p=n(64),d=n(292),v=n(271),g=n(588),m=n(272),y=n(593),_=n(595),b=function(t){function e(e){var r=t.call(this,{visible:e.visible})||this;r.id=n.i(o.uniqueId)("view"),r.views=[],r.geometries=[],r.controllers=[],r.interactions={},r.limitInPlot=!1,r.options={data:[],animate:!0},r.usedControllers=n.i(v.b)(),r.scalePool=new _.a,r.layoutFunc=y.a,r.isPreMouseInPlot=!1,r.isDataChanged=!1,r.createdScaleKeys=new Map,r.onCanvasEvent=function(t){var e=t.name;if(!e.includes(":")){var n=r.createViewEvent(t);r.doPlotEvent(n),r.emit(e,n)}},r.onDelegateEvents=function(t){var e=t.type,i=t.name;if(i.includes(":")){var a=r.createViewEvent(t);if(r.emit(i,a),t.delegateObject){var s=r.getEvents(),u=t.currentTarget,l=u.get("inheritNames");n.i(o.each)(l,function(t){var n=t+":"+e;s[n]&&r.emit(n,a)})}}};var a=e.parent,s=e.canvas,u=e.backgroundGroup,l=e.middleGroup,h=e.foregroundGroup,f=e.region,p=void 0===f?{start:{x:0,y:0},end:{x:1,y:1}}:f,d=e.padding,g=e.theme,m=e.options,b=e.limitInPlot;return r.parent=a,r.canvas=s,r.backgroundGroup=u,r.middleGroup=l,r.foregroundGroup=h,r.region=p,r.padding=d,r.options=n.i(i.__assign)(n.i(i.__assign)({},r.options),m),r.limitInPlot=b,r.themeObject=n.i(o.isObject)(g)?n.i(o.deepMix)({},n.i(c.b)("default"),g):n.i(c.b)(g),r.init(),r}return n.i(i.__extends)(e,t),e.prototype.setLayout=function(t){this.layoutFunc=t},e.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.coordinateController=new g.a(this.options.coordinate),this.initOptions();for(var t=this.views,e=0;e<t.length;e++)t[e].init()},e.prototype.render=function(t){void 0===t&&(t=!1),this.emit(a.c.BEFORE_RENDER),this.paint(t),this.emit(a.c.AFTER_RENDER),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this;this.emit(a.c.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1;for(var e=this.geometries,n=0;n<e.length;n++)e[n].clear();this.geometries=[];for(var r=this.controllers,n=0;n<r.length;n++)r[n].clear();this.createdScaleKeys.forEach(function(e,n){t.getRootView().scalePool.deleteScale(n)}),this.createdScaleKeys.clear();for(var i=this.views,n=0;n<i.length;n++)i[n].clear();this.emit(a.c.AFTER_CLEAR)},e.prototype.destroy=function(){this.emit(a.c.BEFORE_DESTROY);var e=this.interactions;n.i(o.each)(e,function(t){t&&t.destroy()}),this.clear();for(var r=this.controllers,i=0,s=r.length;i<s;i++){r[i].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}for(var o=this.controllers,r=0,i=o.length;r<i;r++){o[r].changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},e.prototype.data=function(t){return n.i(o.set)(this.options,"data",t),this.isDataChanged=!0,this},e.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},e.prototype.filter=function(t,e){return n.i(o.isFunction)(e)?(n.i(o.set)(this.options,["filters",t],e),this):(!e&&n.i(o.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},e.prototype.axis=function(t,e){return n.i(o.isBoolean)(t)?n.i(o.set)(this.options,["axes"],t):n.i(o.set)(this.options,["axes",t],e),this},e.prototype.legend=function(t,e){return n.i(o.isBoolean)(t)?n.i(o.set)(this.options,["legends"],t):n.i(o.isString)(t)?n.i(o.set)(this.options,["legends",t],e):n.i(o.set)(this.options,["legends"],t),this},e.prototype.scale=function(t,e){var r=this;return n.i(o.isString)(t)?n.i(o.set)(this.options,["scales",t],e):n.i(o.isObject)(t)&&n.i(o.each)(t,function(t,e){n.i(o.set)(r.options,["scales",e],t)}),this},e.prototype.tooltip=function(t){return n.i(o.set)(this.options,"tooltip",t),this},e.prototype.annotation=function(){return this.getController("annotation")},e.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},e.prototype.coordinate=function(t,e){return n.i(o.isString)(t)?n.i(o.set)(this.options,"coordinate",{type:t,cfg:e}):n.i(o.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},e.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},e.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var r=n.i(u.b)(t);if(!r)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new r(this,n.i(i.__assign)(n.i(i.__assign)({},e),{type:t})),this},e.prototype.animate=function(t){return n.i(o.set)(this.options,"animate",t),this},e.prototype.updateOptions=function(t){return this.clear(),n.i(o.mix)(this.options,t),this.initOptions(),this},e.prototype.option=function(t,r){if(e.prototype[t])throw new Error("Can't use built in variable name \""+t+'", please change another one.');return n.i(o.set)(this.options,t,r),this},e.prototype.theme=function(t){return this.themeObject=n.i(o.isObject)(t)?n.i(o.deepMix)({},this.themeObject,t):n.i(c.b)(t),this},e.prototype.interaction=function(t,e){var r=this.interactions[t];r&&r.destroy();var i=n.i(l.c)(t,this,e);return i&&(i.init(),this.interactions[t]=i),this},e.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},e.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(a.c.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].changeData(t)}this.emit(a.c.AFTER_CHANGE_DATA)},e.prototype.createView=function(t){var r={data:this.options.data,scales:n.i(o.clone)(this.options.scales),axes:n.i(o.clone)(this.options.axes),coordinate:n.i(o.clone)(this.coordinateController.getOption()),tooltip:n.i(o.clone)(this.options.tooltip),legends:n.i(o.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},s=new e(n.i(i.__assign)(n.i(i.__assign)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:a.d.BG}),middleGroup:this.middleGroup.addGroup({zIndex:a.d.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:a.d.FORE}),theme:this.themeObject,padding:this.padding},t),{options:n.i(i.__assign)(n.i(i.__assign)({},r),n.i(o.get)(t,"options",{}))}));return this.views.push(s),s},e.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},e.prototype.removeView=function(t){var e=n.i(o.remove)(this.views,function(e){return e===t})[0];return e&&e.destroy(),e},e.prototype.getCoordinate=function(){return this.coordinateInstance},e.prototype.getTheme=function(){return this.themeObject},e.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},e.prototype.getYScales=function(){var t={};return this.geometries.map(function(e){var n=e.getYScale(),r=n.field;if(!t[r])return t[r]=!0,n})},e.prototype.getScalesByDim=function(t){for(var e=this.geometries,n={},r=0,i=e.length;r<i;r++){var o=e[r],a="x"===t?o.getXScale():o.getYScale();a&&!n[a.field]&&(n[a.field]=a)}return n},e.prototype.getScaleByField=function(t,e){var n=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(n)},e.prototype.getOptions=function(){return this.options},e.prototype.getData=function(){return this.filteredData},e.prototype.getLayer=function(t){return t===a.a.BG?this.backgroundGroup:t===a.a.MID?this.middleGroup:(a.a.FORE,this.foregroundGroup)},e.prototype.isPointInPlot=function(t){return n.i(f.b)(this.getCoordinate(),t)},e.prototype.getLegendAttributes=function(){return n.i(o.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},e.prototype.getGroupScales=function(){var t=this.geometries.map(function(t){return t.getGroupScales()});return n.i(p.b)(n.i(o.flatten)(t))},e.prototype.getCanvas=function(){return this.getRootView().canvas},e.prototype.getRootView=function(){for(var t=this;;){if(!t.parent)break;t=t.parent}return t},e.prototype.getXY=function(t){var e,r,i=this.getCoordinate(),a=this.getScalesByDim("x"),s=this.getScalesByDim("y");if(n.i(o.each)(t,function(t,n){a[n]&&(e=a[n].scale(t)),s[n]&&(r=s[n].scale(t))}),!n.i(o.isNil)(e)&&!n.i(o.isNil)(r))return i.convert({x:e,y:r})},e.prototype.getController=function(t){return n.i(o.find)(this.controllers,function(e){return e.name===t})},e.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},e.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},e.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},e.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},e.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},e.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},e.prototype.getSnapRecords=function(t){for(var e=this.geometries,r=[],i=0,o=e.length;i<o;i++){var a=e[i],s=a.dataArray;a.sort(s);for(var u=void 0,l=0,c=s.length;l<c;l++){var h=s[l];u=n.i(d.a)(t,h,a),u&&r.push(u)}}for(var f=this.views,i=0,o=f.length;i<o;i++){var p=f[i],v=p.getSnapRecords(t);r=r.concat(v)}return r},e.prototype.getComponents=function(){for(var t=[],e=this.controllers,n=0,r=e.length;n<r;n++){var i=e[n];t=t.concat(i.getComponents())}return t},e.prototype.filterData=function(t){var e=this.options.filters;return 0===n.i(o.size)(e)?t:n.i(o.filter)(t,function(t,n){return Object.keys(e).every(function(r){return(0,e[r])(t[r],t,n)})})},e.prototype.filterFieldData=function(t,e){var r=this.options.filters,i=n.i(o.get)(r,t);return n.i(o.isUndefined)(i)?e:e.filter(function(e,n){return i(e[t],e,n)})},e.prototype.adjustCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.adjust(t,e)},e.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(a.c.BEFORE_PAINT),this.renderLayoutRecursive(t),this.renderPaintRecursive(t),this.emit(a.c.AFTER_PAINT),this.isDataChanged=!1},e.prototype.renderLayoutRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.doLayout();for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].renderLayoutRecursive(t)}},e.prototype.renderPaintRecursive=function(t){if(this.limitInPlot){var e=this.middleGroup,r=n.i(f.c)(this.coordinateInstance),i=r.type,o=r.attrs;e.setClip({type:i,attrs:o})}this.paintGeometries(t),this.renderComponents(t);for(var a=this.views,s=0,u=a.length;s<u;s++){a[s].renderPaintRecursive(t)}},e.prototype.createScale=function(t,e,r,a){var s=n.i(o.get)(this.options.scales,[t]),u=n.i(i.__assign)(n.i(i.__assign)({},s),r);return this.parent?this.parent.createScale(t,e,u,a):this.scalePool.createScale(t,e,u,a)},e.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].renderDataRecursive(t)}},e.prototype.calculateViewBBox=function(){var t,e,n,r;if(this.parent){var i=this.parent.coordinateBBox;t=i.x,e=i.y,n=i.width,r=i.height}else t=0,e=0,n=this.canvas.get("width"),r=this.canvas.get("height");var o=this.region,a=o.start,s=o.end;this.viewBBox=new h.b(t+n*a.x,e+r*a.y,n*(s.x-a.x),r*(s.y-a.y)),this.coordinateBBox=this.viewBBox},e.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},e.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,r=t.length;e<r;e++){var i=t[e],o=n.i(v.c)(i);o&&this.controllers.push(new o(this))}},e.prototype.createViewEvent=function(t){var e=t.shape,n=t.name,r=e?e.get("origin"):null,i=new m.a(this,t,r);return i.type=n,i},e.prototype.doPlotEvent=function(t){var e=t.type,n=t.x,r=t.y,i={x:n,y:r};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(e)){var o=this.isPointInPlot(i);if(o){var s="plot:"+e;t.type=s,this.emit(s,t),"mouseleave"!==e&&"touchend"!==e||(this.isPreMouseInPlot=!1)}"mousemove"===e||"touchmove"===e?(this.isPreMouseInPlot&&!o?("mousemove"===e&&(t.type=a.e.MOUSE_LEAVE,this.emit(a.e.MOUSE_LEAVE,t)),t.type=a.e.LEAVE,this.emit(a.e.LEAVE,t)):!this.isPreMouseInPlot&&o&&("mousemove"===e&&(t.type=a.e.MOUSE_ENTER,this.emit(a.e.MOUSE_ENTER,t)),t.type=a.e.ENTER,this.emit(a.e.ENTER,t)),this.isPreMouseInPlot=o):"mouseleave"!==e&&"touchend"!==e||this.isPreMouseInPlot&&("mouseleave"===e&&(t.type=a.e.MOUSE_LEAVE,this.emit(a.e.MOUSE_LEAVE,t)),t.type=a.e.LEAVE,this.emit(a.e.LEAVE,t),this.isPreMouseInPlot=!1)}},e.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},e.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),r=n.i(o.get)(this.options,"scales",{}),i=this.geometries,a=0,s=i.length;a<s;a++){var u=i[a];u.scales=this.getGeometryScales();var l={coordinate:e,scaleDefs:r,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged};t?u.update(l):u.init(l)}this.adjustScales()},e.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,o=void 0===i?{}:i,a=this.filteredData,s=0,u=t.length;s<u;s++){var l=t[s],c=o[l],h=this.getScaleKey(l);this.createScale(l,e.includes(l)?r:a,c,h),this.createdScaleKeys.set(h,!0)}},e.prototype.syncScale=function(){this.getRootView().scalePool.sync()},e.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},n=0;n<t.length;n++){var r=t[n];e[r]=this.getScaleByField(r)}return e},e.prototype.getScaleFields=function(){for(var t=[],e={},r=this.geometries,i=0;i<r.length;i++){var o=r[i],a=o.getScaleFields();n.i(p.b)(a,t,e)}return t},e.prototype.getGroupedFields=function(){for(var t=[],e={},r=this.geometries,i=0;i<r.length;i++){var o=r[i],a=o.getGroupFields();n.i(p.b)(a,t,e)}return t},e.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},e.prototype.adjustCategoryScaleRange=function(){var t=this,e=n.i(i.__spreadArrays)([this.getXScale()],this.getYScales()).filter(function(t){return!!t}),r=this.getCoordinate(),a=this.options.scales;n.i(o.each)(e,function(e){var i=e.field,s=e.values,u=e.isCategory,l=e.isIdentity;if((u||l)&&s&&!n.i(o.get)(a,[i,"range"])){var c=s.length,h=void 0;if(1===c)h=[.5,1];else{var p=1,d=0;n.i(f.d)(r)?r.isTransposed?(p=n.i(o.get)(t.theme,"widthRatio.multiplePie",1/1.3),d=1/c*p,h=[d/2,1-d/2]):h=[0,1-1/c]:(d=1/c/2,h=[d,1-d])}e.range=h}})},e.prototype.initComponents=function(t){for(var e=this.controllers,n=0;n<e.length;n++){var r=e[n];t?r.update():(r.clear(),r.render())}},e.prototype.doLayout=function(){this.layoutFunc(this)},e.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},e.prototype.paintGeometries=function(t){for(var e=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,o=0;o<i.length;o++){var a=i[o];a.coordinate=n,a.canvasRegion=r,e||a.animate(!1),a.paint(t)}},e.prototype.renderComponents=function(t){for(var e=0;e<this.getComponents().length;e++){this.getComponents()[e].component.render()}},e.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},e.prototype.initOptions=function(){for(var t=this.options,e=t.geometries,n=void 0===e?[]:e,r=t.interactions,i=void 0===r?[]:r,o=t.views,a=void 0===o?[]:o,s=t.annotations,u=void 0===s?[]:s,l=0;l<n.length;l++){var c=n[l];this.createGeometry(c)}for(var h=0;h<i.length;h++){var f=i[h],p=f.type,d=f.cfg;this.interaction(p,d)}for(var v=0;v<a.length;v++){var g=a[v];this.createView(g)}for(var m=this.getController("annotation"),y=0;y<u.length;y++){var _=u[y];m.annotation(_)}},e.prototype.createGeometry=function(t){var e=t.type,r=t.cfg,i=void 0===r?{}:r;if(this[e]){var a=this[e](i);n.i(o.each)(t,function(t,e){n.i(o.isFunction)(a[e])&&a[e](t)})}},e.prototype.getScaleKey=function(t){return this.id+"-"+t},e}(s.a);e.b=b},function(t,e,n){"use strict";function r(t){var e=o[t];if(!e)throw new Error("G engine '"+t+"' is not exist, please register it at first.");return e}function i(t,e){o[t]=e}e.b=r,e.a=i;var o={}},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(73),a=n(175),s=n(36),u=n(501),l=(n.n(u),function(t){function e(e){var n=t.call(this,e)||this;n.states=[];var r=e.shapeFactory,i=e.container,o=e.offscreenGroup,a=e.visible,s=void 0===a||a;return n.shapeFactory=r,n.container=i,n.offscreenGroup=o,n.visible=s,n}return n.i(r.__extends)(e,t),e.prototype.draw=function(t,e){void 0===e&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),!1===this.visible&&this.changeVisible(!1)},e.prototype.update=function(t){var e=this,n=e.shapeFactory,r=e.shape;if(r){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(r,t);var i=this.getOffscreenGroup(),o=n.drawShape(this.shapeType,t,i);o.cfg.data=this.data,o.cfg.origin=t,this.syncShapeStyle(r,o,"",this.getAnimateCfg("update"))}},e.prototype.destroy=function(){var e=this,i=e.shapeFactory,a=e.shape;if(a){var s=this.getAnimateCfg("leave");s?n.i(o.c)(a,s,{coordinate:i.coordinate,toAttrs:n.i(r.__assign)({},a.attr())}):a.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(t){t.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(t){t.hide()}))},e.prototype.setState=function(t,e){var r=this,i=this,o=i.states,a=i.shapeFactory,s=i.model,l=i.shape,c=i.shapeType,h=o.indexOf(t);if(e){if(h>-1)return;o.push(t),"active"!==t&&"selected"!==t||l.toFront()}else{if(-1===h)return;o.splice(h,1),"active"!==t&&"selected"!==t||l.toBack()}var f=a.drawShape(c,s,this.getOffscreenGroup());o.length?o.forEach(function(t){r.syncShapeStyle(l,f,t,null)}):this.syncShapeStyle(l,f,"reset",null),f.remove(!0);var p={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",p),n.i(u.propagationDelegate)(this.container,"statechange",p)},e.prototype.clearStates=function(){var t=this,e=this.states;n.i(i.each)(e,function(e){t.setState(e,!1)}),this.states=[]},e.prototype.hasState=function(t){return this.states.includes(t)},e.prototype.getStates=function(){return this.states},e.prototype.getData=function(){return this.data},e.prototype.getModel=function(){return this.model},e.prototype.getBBox=function(){var t=this,e=t.shape,n=t.labelShape,r={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(r=e.getCanvasBBox()),n&&n.forEach(function(t){var e=t.getCanvasBBox();r.x=Math.min(e.x,r.x),r.y=Math.min(e.y,r.y),r.minX=Math.min(e.minX,r.minX),r.minY=Math.min(e.minY,r.minY),r.maxX=Math.max(e.maxX,r.maxX),r.maxY=Math.max(e.maxY,r.maxY)}),r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r},e.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,r=t.geometry,o=t.shapeFactory,a=r.stateOption,s=n.i(i.get)(o.theme,[e],{});this.statesStyle=n.i(i.deepMix)({},s,a)}return this.statesStyle},e.prototype.getStateStyle=function(t,e){var r=this.getStatesStyle(),o=r[t],a=n.i(i.get)(o.style,[e],o.style);return n.i(i.isFunction)(a)?a(this):a},e.prototype.getAnimateCfg=function(t){var e=this.animate;return e?e[t]:null},e.prototype.drawShape=function(t,e){void 0===e&&(e=!1);var i=this,a=i.shapeFactory,s=i.container,u=i.shapeType;if(this.shape=a.drawShape(u,t,s),this.shape){this.setShapeInfo(this.shape,t),this.shape.get("name")||(this.shape.cfg.name=this.shapeFactory.geometryType),this.shape.cfg.inheritName=["element"];var l=e?"enter":"appear",c=this.getAnimateCfg(l);c&&n.i(o.c)(this.shape,c,{coordinate:a.coordinate,toAttrs:n.i(r.__assign)({},this.shape.attr())})}},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.setShapeInfo=function(t,e){var n=this;if(t.cfg.origin=e,t.cfg.element=this,t.isGroup()){t.get("children").forEach(function(t){n.setShapeInfo(t,e)})}},e.prototype.syncShapeStyle=function(t,e,r,i,a){if(void 0===r&&(r=""),void 0===a&&(a=0),t.isGroup())for(var u=t.get("children"),l=e.get("children"),c=0;c<u.length;c++)this.syncShapeStyle(u[c],l[c],r,i,a+c);else{if(r&&"reset"!==r){var h=this.getStateStyle(r,t.get("name")||a);e.attr(h)}var f=n.i(s.d)(t,e);this.animate?i?n.i(o.c)(t,i,{coordinate:this.shapeFactory.coordinate,toAttrs:f,shapeModel:this.model}):r?(t.stopAnimate(),t.animate(f,{duration:300})):t.attr(f):t.attr(f)}},e.prototype.getShapeType=function(t){var e=n.i(i.get)(t,"shape");return n.i(i.isArray)(e)?e[0]:e},e}(a.a));e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(42),a=n(127),s=Math.PI/2,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate();if(t.labelEmit)e=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=this.getDefaultOffset(t.offset);e=Math.abs(t.x-r.x)<1?"center":t.angle>Math.PI||t.angle<=0?i>0?"left":"right":i>0?"right":"left"}else e="center";return e},e.prototype.getLabelPoint=function(t,e,n){var r,i=1,o=t.content[n];this.isToMiddle(e)?r=this.getMiddlePoint(e.points):(1===t.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(e,n));var a=this.getDefaultOffset(t.offset)*i,s=this.getPointAngle(r),u=t.labelEmit,l=this.getCirclePoint(s,a,r,u);return 0===l.r?l.content="":(l.content=o,l.angle=s,l.color=e.color),l.rotate=t.autoRotate?this.getLabelRotate(s,a,u):t.rotate,l.start={x:r.x,y:r.y},l},e.prototype.getArcPoint=function(t,e){return void 0===e&&(e=0),n.i(i.isArray)(t.x)||n.i(i.isArray)(t.y)?{x:n.i(i.isArray)(t.x)?t.x[e]:t.x,y:n.i(i.isArray)(t.y)?t.y[e]:t.y}:{x:t.x,y:t.y}},e.prototype.getPointAngle=function(t){return n.i(o.e)(this.getCoordinate(),t)},e.prototype.getCirclePoint=function(t,e,i,a){var s=this.getCoordinate(),u=s.getCenter(),l=n.i(o.a)(s,i);if(0===l)return n.i(r.__assign)(n.i(r.__assign)({},u),{r:l});var c=t;if(s.isTransposed&&l>e&&!a){c=t+2*Math.asin(e/(2*l))}else l+=e;return{x:u.x+l*Math.cos(c),y:u.y+l*Math.sin(c),r:l}},e.prototype.getLabelRotate=function(t,e,n){var r=t+s;return n&&(r-=s),r&&(r>s?r-=Math.PI:r<-s&&(r+=Math.PI)),r},e.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),r=t.length,o={x:0,y:0};return n.i(i.each)(t,function(t){o.x+=t.x,o.y+=t.y}),o.x/=r,o.y/=r,o=e.convert(o)},e.prototype.isToMiddle=function(t){return t.x.length>2},e}(a.a);e.a=u},function(t,e,n){"use strict";function r(t,e){var r=[];r.push({x:t.x,y:1*t.y/2+1*e.y/2}),r.push({x:e.x,y:1*t.y/2+1*e.y/2}),r.push(e);var i=["C"];return n.i(o.each)(r,function(t){i.push(t.x,t.y)}),i}function i(t,e){var r=[];r.push({x:e.x,y:e.y}),r.push(t);var i=["Q"];return n.i(o.each)(r,function(t){i.push(t.x,t.y)}),i}e.a=r,e.b=i;var o=n(0)},function(t,e,n){"use strict";function r(t,e,r){for(var i=t.isStack,o=t.connectNulls,s=t.isInCircle,u=n.i(l.a)(t.points,o),h=[],f=0,p=u.length;f<p;f++){var d=u[f];h=h.concat(a(d,s,i,e,r))}var v=n.i(c.a)(t,!0,!1,"lineWidth");return v.path=h,v}function i(t,e,r,i){var o;return r?(e&&t.length&&t.push({x:t[0].x,y:t[0].y}),o=n.i(h.e)(t,!1,i)):(o=n.i(h.a)(t,!1),e&&o.push(["Z"])),o}function o(t,e,r,o,a){var u=[],l=[];n.i(s.each)(t,function(t){var e=n.i(f.a)(t);u.push(e[1]),l.push(e[0])});var c=i(u,e,o,a),h=i(l,e,o,a);return r?c:c.concat(h)}function a(t,e,r,a,u){var l=t[0];return n.i(s.isArray)(l.y)?o(t,e,r,a,u):i(t,e,a,u)}var s=n(0),u=n(12),l=n(181),c=n(19),h=n(102),f=n(182),p=n(279);n.i(u.c)("line",{defaultShapeType:"line"});n.i(s.each)(["line","dot","dash","smooth"],function(t){n.i(u.b)("line",t,{draw:function(e,n){var i,o="smooth"===t;if(o){var a=this.coordinate,s=a.start,u=a.end;i=[[s.x,u.y],[u.x,s.y]]}var l=r(e,o,i);return n.addShape({type:"path",attrs:l,name:"line"})},getMarker:function(e){return n.i(p.a)(e,t)}})})},function(t,e,n){"use strict";function r(t,e){var n=t.color;return{symbol:i[e],style:{lineWidth:2,r:6,stroke:n}}}e.a=r;var i={line:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dot:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dash:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},smooth:function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},hv:function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},vh:function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},hvh:function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]},vhv:function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}}},function(t,e,n){"use strict";function r(t,e){return n.i(i.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(r){return!n.i(i.isEqual)(t[r],e[r])})}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t,e){var r=t.length,i=t;n.i(a.isString)(i[0])&&(i=t.map(function(t){return e.translate(t)}));for(var o=i[1]-i[0],s=2;s<r;s++){var u=i[s]-i[s-1];o>u&&(o=u)}return o}function i(t,e){if(e){var r=n.i(a.flatten)(t);return n.i(a.valuesOfKey)(r,e).length}return t.length}function o(t){var e=t.theme,o=t.coordinate,a=t.getXScale(),u=a.values,l=t.beforeMappingData,c=u.length;if(a.isLinear&&u.length>1){u.sort();var h=r(u,a);c=(a.max-a.min)/h,u.length>c&&(c=u.length)}var f=a.range,p=1/c,d=1;if(o.isPolar?d=o.isTransposed&&c>1?e.multiplePieWidthRatio:e.roseWidthRatio:(a.isLinear&&(p*=f[1]-f[0]),d=e.columnWidthRatio),p*=d,t.getAdjust("dodge")){p/=i(l,t.getAdjust("dodge").dodgeBy)}var v=e.maxColumnWidth,g=e.minColumnWidth,m=n.i(s.f)(t.coordinate);if(v){var y=v/m;p>y&&(p=y)}if(g){var _=g/m;p<_&&(p=_)}return p}e.a=o;var a=n(0),s=n(42)},function(t,e,n){"use strict";function r(t,e){if(!t)return!1;var r="";return!!t.className&&(r=n.i(a.isNil)(t.className.baseVal)?t.className:t.className.baseVal,r.includes(e))}function i(t,e){for(var n=t.parentNode,i=!1;n&&n!==document.body;){if(r(n,e)){i=!0;break}n=n.parentNode}return i}var o=n(1),a=n(0),s=n(25),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return n.i(o.__extends)(e,t),e.prototype.show=function(){var t=this.context,e=t.event,r=t.view;if(!r.isTooltipLocked()){var i=this.timeStamp,o=+new Date;if(o-i>16){var s=this.location,u={x:e.x,y:e.y};s&&n.i(a.isEqual)(s,u)||this.showTooltip(r,u),this.timeStamp=o,this.location=u}}},e.prototype.hide=function(){var t=this.context.view;if(!t.isTooltipLocked()){var e=this.context.event,o=n.i(a.get)(e,["gEvent","originalEvent","toElement"]);o&&(r(o,"g2-tooltip")||i(o,"g2-tooltip"))||(this.hideTooltip(t),this.location=null)}},e.prototype.showTooltip=function(t,e){t.showTooltip(e)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(s.a);e.a=u},function(t,e,n){"use strict";function r(t,e,n,r){var i=Math.min(n[e],r[e]),o=Math.max(n[e],r[e]),a=t.range,s=a[0],u=a[1];if(i<s&&(i=s),o>u&&(o=u),i===u&&o===u)return null;var l=t.invert(i),c=t.invert(o);if(t.isCategory){var h=t.values.indexOf(l),f=t.values.indexOf(c),p=t.values.slice(h,f+1);return function(t){return p.includes(t)}}return function(t){return t>=l&&t<=c}}var i=n(1),o=n(25),a=n(16),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return n.i(i.__extends)(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},e.prototype.filter=function(){var t,e;if(n.i(a.d)(this.context)){var i=this.context.event.target,o=i.getCanvasBBox();t={x:o.x,y:o.y},e={x:o.maxX,y:o.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var s=this.context.view,u=s.getCoordinate(),l=u.invert(e),c=u.invert(t);if(this.hasDim("x")){var h=s.getXScale(),f=r(h,"x",l,c);this.filterView(s,h.field,f)}if(this.hasDim("y")){var p=s.getYScales()[0],f=r(p,"y",l,c);this.filterView(s,p.field,f)}this.reRender(s)}},e.prototype.end=function(){this.isStarted=!1},e.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var n=t.getYScales()[0];this.filterView(t,n.field,null)}this.reRender(t)},e.prototype.filterView=function(t,e,n){t.filter(e,n)},e.prototype.reRender=function(t){t.render(!0)},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(190),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getMaskPath=function(){var t=this.points,e=[];return t.length&&(n.i(i.each)(t,function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])}),e.push(["L",t[0].x,t[0].y])),e},e.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},e.prototype.addPoint=function(){this.resize()},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(190),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="rect",e}return n.i(r.__extends)(e,t),e.prototype.getRegion=function(){var t=this.points;return{start:n.i(i.head)(t),end:n.i(i.last)(t)}},e.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,n=t.end;return{x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),width:Math.abs(n.x-e.x),height:Math.abs(n.y-e.y)}},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t,e){var n=s[t],r=null;if(n){r=new(0,n.ActionClass)(e,n.cfg),r.name=t,r.init()}return r}function i(t,e,n){s[t]={ActionClass:e,cfg:n}}function o(t,e){var n=new a.a(e);return n.callback=t,n.name="callback",n}e.b=r,e.a=i,e.c=o;var a=n(644),s=(n(0),{})},function(t,e,n){"use strict";var r=n(1),i=n(189),o="x",a="y",s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=[o,a],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return n.i(r.__extends)(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.getScale=function(t){var e=this.context.view;return"x"===t?e.getXScale():e.getYScales()[0]},e.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var n=this.getScale(t);e.scale(n.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},e.prototype.reset=function(){this.resetDim(o),this.resetDim(a),this.context.view.render(!0)},e}(i.b);e.a=s},function(t,e,n){"use strict";var r=function(){function t(t,e){this.view=t,this.cfg=e}return t.prototype.init=function(){this.initEvents()},t.prototype.initEvents=function(){},t.prototype.clearEvents=function(){},t.prototype.destroy=function(){this.clearEvents()},t}();e.a=r},function(t,e,n){"use strict";function r(t){return n.i(o.get)(l,n.i(o.lowerCase)(t),l.default)}function i(t,e){l[n.i(o.lowerCase)(t)]=e}e.b=r,e.a=i;var o=n(0),a=n(291),s=n(678),u=n.i(a.a)(s.a),l={default:u}},function(t,e,n){"use strict";function r(t,e,n){return n===i.b.TOP?[t.minX+t.width/2-e.width/2,t.minY]:n===i.b.BOTTOM?[t.minX+t.width/2-e.width/2,t.maxY-e.height]:n===i.b.LEFT?[t.minX,t.minY+t.height/2-e.height/2]:n===i.b.RIGHT?[t.maxX-e.width,t.minY+t.height/2-e.height/2]:n===i.b.TOP_LEFT||n===i.b.LEFT_TOP?[t.tl.x,t.tl.y]:n===i.b.TOP_RIGHT||n===i.b.RIGHT_TOP?[t.tr.x-e.width,t.tr.y]:n===i.b.BOTTOM_LEFT||n===i.b.LEFT_BOTTOM?[t.bl.x,t.bl.y-e.height]:n===i.b.BOTTOM_RIGHT||n===i.b.RIGHT_BOTTOM?[t.br.x-e.width,t.br.y-e.height]:[0,0]}e.a=r;var i=n(11)},function(t,e,n){"use strict";function r(t){var e,r={point:{default:{fill:t.pointFillColor,r:t.pointSize,stroke:t.pointBorderColor,lineWidth:t.pointBorder,fillOpacity:t.pointFillOpacity},active:{stroke:t.pointActiveBorderColor,lineWidth:t.pointActiveBorder},selected:{stroke:t.pointSelectedBorderColor,lineWidth:t.pointSelectedBorder},inactive:{fillOpacity:t.pointInactiveFillOpacity,strokeOpacity:t.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:t.hollowPointFillColor,lineWidth:t.hollowPointBorder,stroke:t.hollowPointBorderColor,strokeOpacity:t.hollowPointBorderOpacity,r:t.hollowPointSize},active:{stroke:t.hollowPointActiveBorderColor,strokeOpacity:t.hollowPointActiveBorderOpacity},selected:{lineWidth:t.hollowPointSelectedBorder,stroke:t.hollowPointSelectedBorderColor,strokeOpacity:t.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:t.hollowPointInactiveBorderOpacity}},area:{default:{fill:t.areaFillColor,fillOpacity:t.areaFillOpacity,stroke:null},active:{fillOpacity:t.areaActiveFillOpacity},selected:{fillOpacity:t.areaSelectedFillOpacity},inactive:{fillOpacity:t.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:t.hollowAreaBorderColor,lineWidth:t.hollowAreaBorder,strokeOpacity:t.hollowAreaBorderOpacity},active:{fill:null,lineWidth:t.hollowAreaActiveBorder},selected:{fill:null,lineWidth:t.hollowAreaSelectedBorder},inactive:{strokeOpacity:t.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:t.intervalFillColor,fillOpacity:t.intervalFillOpacity},active:{stroke:t.intervalActiveBorderColor,lineWidth:t.intervalActiveBorder},selected:{stroke:t.intervalSelectedBorderColor,lineWidth:t.intervalSelectedBorder},inactive:{fillOpacity:t.intervalInactiveFillOpacity,strokeOpacity:t.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:t.hollowIntervalFillColor,stroke:t.hollowIntervalBorderColor,lineWidth:t.hollowIntervalBorder,strokeOpacity:t.hollowIntervalBorderOpacity},active:{stroke:t.hollowIntervalActiveBorderColor,lineWidth:t.hollowIntervalActiveBorder,strokeOpacity:t.hollowIntervalActiveBorderOpacity},selected:{stroke:t.hollowIntervalSelectedBorderColor,lineWidth:t.hollowIntervalSelectedBorder,strokeOpacity:t.hollowIntervalSelectedBorderOpacity},inactive:{stroke:t.hollowIntervalInactiveBorderColor,lineWidth:t.hollowIntervalInactiveBorder,strokeOpacity:t.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:t.lineBorderColor,lineWidth:t.lineBorder,strokeOpacity:t.lineBorderOpacity,fill:null,lineAppendWidth:10},active:{lineWidth:t.lineActiveBorder},selected:{lineWidth:t.lineSelectedBorder},inactive:{strokeOpacity:t.lineInactiveBorderOpacity}}},l={title:{autoRotate:!0,position:"center",style:{fill:t.axisTitleTextFillColor,fontSize:t.axisTitleTextFontSize,lineHeight:t.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily},offset:32},label:{autoRotate:!0,autoHide:!0,offset:16,style:{fill:t.axisLabelFillColor,fontSize:t.axisLabelFontSize,lineHeight:t.axisLabelLineHeight,textBaseline:"middle",fontFamily:t.fontFamily}},line:{style:{lineWidth:t.axisLineBorder,stroke:t.axisLineBorderColor}},tickLine:{style:{lineWidth:t.axisTickLineBorder,stroke:t.axisTickLineBorderColor},alignTick:!0,length:t.axisTickLineLength},subTickLine:null,animate:!0},c={line:{type:"line",style:{stroke:t.axisGridBorderColor,lineWidth:t.axisGridBorder,lineDash:t.axisGridLineDash}},alignTick:!0,animate:!0},h={title:null,marker:{symbol:"circle",style:{r:t.legendCircleMarkerSize,fill:t.legendMarkerColor}},itemName:{spacing:5,style:{fill:t.legendItemNameFillColor,fontFamily:t.fontFamily,fontSize:t.legendItemNameFontSize,lineHeight:t.legendItemNameLineHeight,fontWeight:t.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1};return{defaultColor:t.brandColor,padding:"auto",fontFamily:t.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:t.paletteQualitative10,colors20:t.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:function(t){var e=t.geometry.coordinate;if(e.isPolar&&e.isTransposed){var i=n.i(u.a)(t.getModel(),e),o=i.startAngle,s=i.endAngle,l=(o+s)/2,c=7.5,h=c*Math.cos(l),f=c*Math.sin(l);return{matrix:n.i(a.a)(null,[["t",h,f]])}}return r.interval.selected}}},"hollow-rect":{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},line:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},tick:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},funnel:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:r.interval.selected}},pyramid:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:r.interval.selected}}},line:{line:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},dot:{default:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.default),{lineDash:[1,1]})},active:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.active),{lineDash:[1,1]})},inactive:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.inactive),{lineDash:[1,1]})},selected:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.selected),{lineDash:[1,1]})}},dash:{default:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.default),{lineDash:[5.5,1]})},active:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.active),{lineDash:[5.5,1]})},inactive:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.inactive),{lineDash:[5.5,1]})},selected:{style:n.i(i.__assign)(n.i(i.__assign)({},r.line.selected),{lineDash:[5.5,1]})}},smooth:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},hv:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},vh:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},hvh:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},vhv:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}}},polygon:{polygon:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:r.interval.selected}}},point:{circle:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},square:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},bowtie:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},diamond:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},hexagon:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},triangle:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},"triangle-down":{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},"hollow-circle":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-square":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-bowtie":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-diamond":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-hexagon":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-triangle":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-triangle-down":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},cross:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},tick:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},plus:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},hyphen:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},line:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}}},area:{area:{default:{style:r.area.default},active:{style:r.area.active},inactive:{style:r.area.inactive},selected:{style:r.area.selected}},smooth:{default:{style:r.area.default},active:{style:r.area.active},inactive:{style:r.area.inactive},selected:{style:r.area.selected}},line:{default:{style:r.hollowArea.default},active:{style:r.hollowArea.active},inactive:{style:r.hollowArea.inactive},selected:{style:r.hollowArea.selected}},"smooth-line":{default:{style:r.hollowArea.default},active:{style:r.hollowArea.active},inactive:{style:r.hollowArea.inactive},selected:{style:r.hollowArea.selected}}},schema:{candle:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},box:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}}},edge:{line:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},vhv:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},smooth:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},arc:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}}}},components:{axis:{top:n.i(s.deepMix)({},l,{position:"top",grid:null,title:null}),bottom:n.i(s.deepMix)({},l,{position:"bottom",grid:null,title:null}),left:n.i(s.deepMix)({},l,{position:"left",label:{offset:8},title:null,line:null,tickLine:null,grid:c}),right:n.i(s.deepMix)({},l,{position:"right",label:{offset:8},title:null,line:null,tickLine:null,grid:c}),circle:n.i(s.deepMix)({},l,{title:null,label:{offset:8},grid:n.i(s.deepMix)({},c,{line:{type:"line"}})}),radius:n.i(s.deepMix)({},l,{title:null,label:{offset:8},grid:n.i(s.deepMix)({},c,{line:{type:"circle"}})})},legend:{right:n.i(s.deepMix)({},h,{layout:"vertical"}),left:n.i(s.deepMix)({},h,{layout:"vertical"}),top:n.i(s.deepMix)({},h,{layout:"horizontal"}),bottom:n.i(s.deepMix)({},h,{layout:"horizontal"}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:t.sliderRailHeight,defaultLength:t.sliderRailWidth,style:{fill:t.sliderRailFillColor,stroke:t.sliderRailBorderColor,lineWidth:t.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:t.sliderLabelTextFillColor,fontSize:t.sliderLabelTextFontSize,lineHeight:t.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily}},handler:{size:t.sliderHandlerWidth,style:{fill:t.sliderHandlerFillColor,stroke:t.sliderHandlerBorderColor}},slidable:!0}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:t.tooltipCrosshairsBorderColor,lineWidth:t.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(e={},e[""+o.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:t.tooltipContainerFillColor,opacity:t.tooltipContainerFillOpacity,boxShadow:t.tooltipContainerShadow,borderRadius:t.tooltipContainerBorderRadius+"px",color:t.tooltipTextFillColor,fontSize:t.tooltipTextFontSize+"px",fontFamily:t.fontFamily,lineHeight:t.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},e[""+o.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},e[""+o.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},e[""+o.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},e[""+o.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e[""+o.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},e)},annotation:{arc:{style:{stroke:t.annotationArcBorderColor,lineWidth:t.annotationArcBorder},animate:!0},line:{style:{stroke:t.annotationLineBorderColor,lineDash:t.annotationLineDash,lineWidth:t.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textAlign:"start",fontFamily:t.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:t.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:t.annotationRegionBorder,stroke:t.annotationRegionBorderColor,fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:t.brandColor,lineWidth:2}},line:{style:{stroke:t.annotationLineBorderColor,lineWidth:t.annotationLineBorder},length:t.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},animate:!0}}},labels:{offset:12,style:{fill:t.labelFillColor,fontSize:t.labelFontSize,fontFamily:t.fontFamily,stroke:t.labelBorderColor,lineWidth:t.labelBorder},autoRotate:!0},innerLabels:{style:{fill:t.innerLabelFillColor,fontSize:t.innerLabelFontSize,fontFamily:t.fontFamily,stroke:t.innerLabelBorderColor,lineWidth:t.innerLabelBorder},autoRotate:!0},pieLabels:{labelHeight:14,offset:30,labelLine:{style:{lineWidth:t.labelLineBorder}},autoRotate:!0}}}e.a=r;var i=n(1),o=n(500),a=(n.n(o),n(24)),s=n(0),u=n(36)},function(t,e,n){"use strict";function r(t,e,r){var i=r.translate(t),o=r.translate(e);return n.i(d.isNumberEqual)(i,o)}function i(t,e){var n=e.coordinate,r=e.getXScale(),i=r.range,o=i[i.length-1],a=i[0],s=n.invert(t),u=s.x;return n.isPolar&&u>(1+o)/2&&(u=a),r.translate(r.invert(u))}function o(t,e,r){var i=r.coordinate,o=r.getYScale(),a=o.field,s=i.invert(e),u=o.invert(s.y);return n.i(d.find)(t,function(t){var e=t[v.f];return e[a][0]<=u&&e[a][1]>=u})||t[t.length-1]}function a(t,e,r){var i=r;if(!r){i=e.getAttribute("position").getFields()[0]}var o=e.scales;return o[i]?o[i].getText(t[i]):n.i(d.hasKey)(t,i)?t[i]:i}function s(t){var e=n.i(d.values)(t.attributes);return n.i(d.filter)(e,function(t){return n.i(d.contains)(v.g,t.type)})}function u(t){for(var e,n=s(t),r=0,i=n;r<i.length;r++){var o=i[r],a=o.getScale(o.type);if(a&&a.isLinear){e=a;break}}var u=t.getXScale(),l=t.getYScale();return e||l||u}function l(t,e){var r=e.field,i=t[r];if(n.i(d.isArray)(i)){return i.map(function(t){return e.getText(t)}).join("-")}return e.getText(i)}function c(t,e){var r,i=e.getGroupScales();if(i.length&&(r=i[0]),r){var o=r.field;return r.getText(t[o])}var a=u(e);return n.i(g.a)(a)}function h(t,e,a){if(0===e.length)return null;var s=a.type,u=a.getXScale(),l=a.getYScale(),c=u.field,h=l.field,f=null;if("heatmap"===s||"point"===s){for(var p=a.coordinate,g=p.invert(t),y=u.invert(g.x),_=l.invert(g.y),b=1/0,x=0;x<e.length;x++){var w=e[x],S=w[v.f],E=Math.pow(S[c]-y,2)+Math.pow(S[h]-_,2);E<b&&(b=E,f=w)}return f}var M=e[0],T=e[e.length-1],C=i(t,a),A=M[v.f][c],P=M[v.f][h],k=T[v.f][c],I=l.isLinear&&n.i(d.isArray)(P);if(n.i(d.isArray)(A)){for(var x=0;x<e.length;x++){var O=e[x],S=O[v.f];if(u.translate(S[c][0])<=C&&u.translate(S[c][1])>=C){if(!I){f=O;break}n.i(d.isArray)(f)||(f=[]),f.push(O)}}n.i(d.isArray)(f)&&(f=o(f,t,a))}else{var j=void 0;if(u.isLinear||"timeCat"===u.type){if((C>u.translate(k)||C<u.translate(A))&&(C>u.max||C<u.min))return null;for(var L=0,D=e.length-1,R=void 0;L<=D;){R=Math.floor((L+D)/2);var B=e[R][v.f][c];if(r(B,C,u))return e[R];u.translate(B)<=u.translate(C)?(L=R+1,T=e[R],j=e[R+1]):(0===D&&(T=e[0]),D=R-1)}}else{for(var x=0;x<e.length;x++){var O=e[x],S=O[v.f];if(r(S[c],C,u)){if(!I){f=O;break}n.i(d.isArray)(f)||(f=[]),f.push(O)}else u.translate(S[c])<=C&&(T=O,j=e[x+1])}n.i(d.isArray)(f)&&(f=o(f,t,a))}T&&j&&Math.abs(u.translate(T[v.f][c])-C)>Math.abs(u.translate(j[v.f][c])-C)&&(T=j)}var z=m(a.getXScale());return!f&&Math.abs(u.translate(T[v.f][c])-C)<=z/2&&(f=T),f}function f(t,e,r){function i(e,r){if(!n.i(d.isNil)(r)&&""!==r){var i={title:f,data:h,mappingData:t,name:e||f,value:r,color:t.color||y,marker:!0};_.push(i)}}void 0===r&&(r="");var o,s,h=t[v.f],f=a(h,e,r),m=e.tooltipOption,y=e.theme.defaultColor,_=[];if(n.i(d.isObject)(m)){var b=m.fields,x=m.callback;if(x){var w=b.map(function(e){return t[v.f][e]}),S=x.apply(void 0,w),E=n.i(p.__assign)({data:t[v.f],mappingData:t,title:f,color:t.color||y,marker:!0},S);_.push(E)}else for(var M=e.scales,T=0,C=b;T<C.length;T++){var A=C[T];if(!n.i(d.isNil)(h[A])){var P=M[A];o=n.i(g.a)(P),s=P.getText(h[A]),i(o,s)}}}else{var k=u(e);n.i(d.isNil)(h[k.field])||(s=l(h,k),o=c(h,e),i(o,s))}return _}e.a=h,e.b=f;var p=n(1),d=n(0),v=n(11),g=n(130),m=n.i(d.memoize)(function(t){if(t.isCategory)return 1;for(var e=t.values,n=e.length,r=t.translate(e[0]),i=r,o=0;o<n;o++){var a=e[o],s=t.translate(a);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)})},function(t,e,n){"use strict";var r=(n(105),n(686),n(687)),i=(n(688),n(689),n(294),n(690),n(691));n.d(e,"b",function(){return r.a}),n.d(e,"a",function(){return i.a}),n(147)('/* @antv/l7-component */\n.l7-marker-container {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: absolute;\n }\n\n.l7-marker {\n\tposition: absolute !important;\n\ttop: 0;\n\tleft: 0;\n  z-index: 5;\n  cursor: pointer;\n}\n\n.l7-marker-cluster {\n  background-clip: padding-box;\n  border-radius: 20px;\n  background-color: rgba(181, 226, 140, 0.6);\n  width: 40px;\n  height: 40px;\n}\n.l7-marker-cluster div {\n  width: 30px;\n  height: 30px;\n  margin-left: 5px;\n  margin-top: 5px;\n  text-align: center;\n  border-radius: 15px;\n  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;\n  background-color: rgba(110, 204, 57, 0.6);\n}\n.l7-marker-cluster span {\n  line-height: 30px;\n}\n\n.l7-popup-anchor-bottom,\n.l7-popup-anchor-bottom-left,\n.l7-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n\t/* layers control */\n\n.l7-control-layers {\n\t-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\t        box-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 5px;\n\t}\n.l7-popup-anchor-top,\n.l7-popup-anchor-top-left,\n.l7-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n\n\n.l7-popup-anchor-left {\n    -webkit-flex-direction: row;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n\n.l7-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: -webkit-flex;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n  z-index: 5;\n}\n.l7-popup-tip {\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  z-index: 1;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-top: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-top: none;\n\tborder-left: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-top: none;\n\tborder-right: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-bottom .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-bottom: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-bottom: none;\n\tborder-left: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-bottom: none;\n\tborder-right: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-left .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-left: none;\n\tborder-right-color: #fff;\n}\n\n.l7-popup-anchor-right .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-right: none;\n\tborder-left-color: #fff;\n}\n\n.l7-popup-close-button {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tborder: 0;\n\tpadding: 0;\n\tfont-size: 25px;\n\tline-height: 20px;\n\tborder-radius: 0 3px 0 0;\n\tcursor: pointer;\n\tbackground-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n\tbackground-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 3px;\n\t-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\t        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\tpadding: 10px 10px 15px;\n\tpointer-events: auto;\n}\n\n.l7-popup-anchor-top-left .l7-popup-content {\n\tborder-top-left-radius: 0;\n}\n\n.l7-popup-anchor-top-right .l7-popup-content {\n\tborder-top-right-radius: 0;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-content {\n\tborder-bottom-left-radius: 0;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-content {\n\tborder-bottom-right-radius: 0;\n}\n\n.l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-track-pointer * {\n\tpointer-events: none;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t    -ms-user-select: none;\n\t        user-select: none;\n}\n\n.l7-map:hover .l7-popup-track-pointer {\n\tdisplay: -webkit-box;\n\tdisplay: -webkit-flex;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n}\n\n.l7-map:active .l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* general toolbar styles */\n\n.l7-bar {\n\t-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\t        box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\tborder-radius: 4px;\n\t}\n.l7-bar a,\n.l7-bar a:hover {\n\tbackground-color: #fff;\n\twidth: 30px;\n\theight: 30px;\n  font-size: 20px;\n\tdisplay: block;\n\ttext-align: center;\n\ttext-decoration: none;\n\tcolor: #8E9DAB;\n\t}\n.l7-bar a,\n.l7-control-layers-toggle {\n\tbackground-position: 50% 50%;\n\tbackground-repeat: no-repeat;\n\tdisplay: block;\n\t}\n.l7-bar a:hover {\n\tbackground-color: #f4f4f4;\n\t}\n.l7-bar a:first-child {\n\tborder-top-left-radius: 2px;\n\tborder-top-right-radius: 2px;\n\t}\n.l7-bar a:last-child {\n\tborder-bottom-left-radius: 2px;\n\tborder-bottom-right-radius: 2px;\n\tborder-bottom: none;\n\t}\n.l7-bar a.l7-disabled {\n\tcursor: default;\n\tbackground-color: #f4f4f4;\n\tcolor: #bbb;\n\t}\n\n\n/* control positioning */\n\n.l7-control-container {\n\tfont: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n.l7-control-hide {\n\tdisplay: none;\n}\n.l7-control {\n\tposition: relative;\n\tz-index: 800;\n\tpointer-events: visiblePainted; /* IE 9-10 doesn\'t have auto */\n\tpointer-events: auto;\n\t}\n.l7-control {\n\tfloat: left;\n\tclear: both;\n\t}.l7-top,\n  .l7-bottom {\n    position: absolute;\n    z-index: 1000;\n    pointer-events: none;\n    }\n  .l7-top {\n    top: 0;\n    }\n  .l7-right {\n    right: 0;\n    }\n  .l7-bottom {\n    bottom: 0;\n    }\n  .l7-left {\n    left: 0;\n    }\n\n  .l7-control {\n    float: left;\n    clear: both;\n    }\n  .l7-right .l7-control {\n    float: right;\n    }\n  .l7-top .l7-control {\n    margin-top: 10px;\n    }\n  .l7-bottom .l7-control {\n    margin-bottom: 10px;\n    }\n  .l7-left .l7-control {\n    margin-left: 10px;\n    }\n  .l7-right .l7-control {\n    margin-right: 10px;\n    }\n\n  /* attribution and scale controls */\n\n.l7-control-container .l7-control-attribution {\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.7);\n\tmargin: 0;\n\t}\n.l7-control-attribution,\n.l7-control-scale-line {\n\tpadding: 0 5px;\n  color: #333;\n\t}\n.l7-control-attribution a {\n\ttext-decoration: none;\n\t}\n.l7-control-attribution a:hover {\n\ttext-decoration: underline;\n\t}\n.l7-container .l7-control-attribution,\n.l7-container .l7-control-scale {\n  font-size: 11px;\n  padding: 5px 5px 2px 5px;\n  background: rgba(255, 255, 255, 0.7);\n\t}\n.l7-left .l7-control-scale {\n\tmargin-left: 5px;\n\t}\n.l7-bottom .l7-control-scale {\n\tmargin-bottom: 5px;\n\t}\n.l7-control-scale-line {\n\tborder: 2px solid #000;\n  border-top: none;\n  color: #000;\n\tline-height: 1.1;\n\tpadding: 2px 5px 1px;\n\tfont-size: 11px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\t-webkit-box-sizing: border-box;\n\t        box-sizing: border-box;\n\n\tbackground: #fff;\n\t}\n.l7-control-scale-line:not(:first-child) {\n\tborder-top: 2px solid #777;\n\tborder-bottom: none;\n\tmargin-top: -2px;\n\t}\n.l7-control-scale-line:not(:first-child):not(:last-child) {\n\tborder-bottom: 2px solid #777;\n\t}\n\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\t-webkit-box-shadow: none;\n\t        box-shadow: none;\n\t}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n  }\n  /*logo */\n\n  .l7-ctrl-logo {\n    background-size: 100% 100%;\n    width: 89px;\n    height: 16px;\n    margin: 0 0 -3px -3px;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC\');\n}\n\n\n\t/* layers control */\n\n.l7-control-layers {\n\t-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);\n\t        box-shadow: 0 1px 8px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 2px;\n\t}\n.l7-control-layers-toggle {\n\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC\');\n\twidth: 30px;\n  height: 30px;\n  background-size: 20px 20px;\n\t}\n\n.l7-touch .l7-control-layers-toggle {\n\twidth: 44px;\n\theight: 44px;\n\t}\n.l7-control-layers .l7-control-layers-list,\n.l7-control-layers-expanded .l7-control-layers-toggle {\n\tdisplay: none;\n\t}\n.l7-control-layers-expanded .l7-control-layers-list {\n\tdisplay: block;\n\tposition: relative;\n\t}\n.l7-control-layers-expanded {\n\tpadding: 6px 10px 6px 6px;\n\tcolor: #59626B;\n\tbackground: #fff;\n\t}\n.l7-control-layers-scrollbar {\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tpadding-right: 5px;\n\t}\n.l7-control-layers-selector {\n\tmargin-top: 2px;\n\tposition: relative;\n\ttop: 1px;\n\t}\n.l7-control-layers label {\n  display: block;\n  padding: 8px;\n  }\n.l7-control-layers label input[type="radio"], input[type="checkbox"]{\n  width: 14px;\n  height: 14px;\n  margin: 0;\n  vertical-align: middle;\n}\n.l7-control-layers-separator {\n\theight: 0;\n\tborder-top: 1px solid #D8D8D8;\n\tmargin: 5px -10px 5px -6px;\n}\n')},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return w});var o=n(9),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(6),f=n.n(h),p=n(4),d=n.n(p),v=n(37),g=n.n(v),m=n(5),y=n.n(m),_=n(8),b=n(10),x=n(49),w=(n.n(x),function(t){function e(t){var r;return u()(this,e),r=f()(this,d()(e).call(this)),r.markerOption=void 0,r.defaultMarker=void 0,r.popup=void 0,r.mapsService=void 0,r.lngLat=void 0,r.scene=void 0,r.added=!1,r.eventHandle=function(t){r.emit(t.type,{target:t,data:r.markerOption.extData,lngLat:r.lngLat})},r.markerOption=i({},r.getDefault(),{},t),n.i(b.a)(["update","onMove","onUp","addDragHandler","onMapClick"],g()(r)),r.init(),r}return y()(e,t),c()(e,[{key:"getDefault",value:function(){return{element:void 0,anchor:b.c.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(t){this.scene=t,this.mapsService=t.get(_.TYPES.IMapService);var e=this.markerOption,n=e.element;e.draggable;return this.mapsService.getMarkerContainer().appendChild(n),this.registerMarkerEvent(n),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var t=this.markerOption.element;return t&&b.b.remove(t),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(t){var e=this;if(!this.added)return this.once("added",function(){e.setElement(t)}),this;var n=this.markerOption.element;return n&&b.b.remove(n),this.markerOption.element=t,this.init(),this.mapsService.getMarkerContainer().appendChild(t),this.registerMarkerEvent(t),this.update(),this}},{key:"openPopup",value:function(){var t=this;if(!this.added)return this.once("added",function(){t.openPopup()}),this;var e=this.popup;return e?(e.isOpen()||e.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var t=this;this.added||this.once("added",function(){t.closePopup()});var e=this.popup;return e&&e.remove(),this}},{key:"setPopup",value:function(t){return this.popup=t,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var t=this.popup;return t?(t.isOpen()?t.remove():t.addTo(this.scene),this):this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(t){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(t){this.markerOption.extData=t}},{key:"update",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.anchor;this.updatePosition(),b.b.setTransform(e,"".concat(b.d[n]))}}},{key:"onMapClick",value:function(t){var e=this.markerOption.element;this.popup&&e&&this.togglePopup()}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.offsets,r=this.lngLat,i=r.lng,o=r.lat,a=this.mapsService.lngLatToContainer([i,o]);e&&(e.style.left=a.x+n[0]+"px",e.style.top=a.y-n[1]+"px")}}},{key:"init",value:function(){var t=this,e=this.markerOption.element,r=this.markerOption,i=r.color,o=r.anchor;if(!e){this.defaultMarker=!0,e=b.b.create("div"),this.markerOption.element=e;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","48px"),a.setAttributeNS(null,"width","48px"),a.setAttributeNS(null,"viewBox","0 0 1024 1024");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),s.setAttributeNS(null,"fill",i),a.appendChild(s),e.appendChild(a)}b.b.addClass(e,"l7-marker"),e.addEventListener("click",function(e){t.onMapClick(e)}),e.addEventListener("click",this.eventHandle),n.i(b.e)(e,o,"marker")}},{key:"registerMarkerEvent",value:function(t){t.addEventListener("mousemove",this.eventHandle),t.addEventListener("click",this.eventHandle),t.addEventListener("mousedown",this.eventHandle),t.addEventListener("mouseup",this.eventHandle),t.addEventListener("dblclick",this.eventHandle),t.addEventListener("contextmenu",this.eventHandle),t.addEventListener("mouseover",this.eventHandle),t.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var t=this.getElement();t.removeEventListener("mousemove",this.eventHandle),t.removeEventListener("click",this.eventHandle),t.removeEventListener("mousedown",this.eventHandle),t.removeEventListener("mouseup",this.eventHandle),t.removeEventListener("dblclick",this.eventHandle),t.removeEventListener("contextmenu",this.eventHandle),t.removeEventListener("mouseover",this.eventHandle),t.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(t){throw new Error("Method not implemented.")}},{key:"onUp",value:function(t){throw new Error("Method not implemented.")}}]),e}(x.EventEmitter))},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r;!function(t){t[t.LNGLAT=1]="LNGLAT",t[t.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",t[t.VECTOR_TILE=3]="VECTOR_TILE",t[t.IDENTITY=4]="IDENTITY",t[t.P20=5]="P20",t[t.P20_OFFSET=6]="P20_OFFSET",t[t.METER_OFFSET=7]="METER_OFFSET"}(r||(r={}));var i={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"}},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){c()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t){var e=t.characterSet,n=t.getFontWidth,r=t.fontHeight,i=t.buffer,o=t.maxCanvasWidth,a=t.mapping,s=void 0===a?{}:a,l=t.xOffset,c=void 0===l?0:l,f=t.yOffset,p=void 0===f?0:f,d=0,v=c;Array.from(e).forEach(function(t,e){if(!s[t]){var r=n(t,e);v+h>o&&(v=0,d++),s[t]={x:v,y:p+d*h,width:h,height:h,advance:r},v+=h}});var g=r+2*i;return{mapping:s,xOffset:v,yOffset:p+d*g,canvasHeight:u(p+(d+1)*g)}}function a(t,e,n){var r=0,i=0,o=0,a=[],l={},c=!0,h=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;if(!l[v.id]){var g=v.height,m=v.width;r+m+e>n&&(s(l,a,i),r=0,i=o+i+e,o=0,a=[]),a.push({icon:v,xOffset:r}),r=r+m+e,o=Math.max(o,g)}}}catch(t){h=!0,f=t}finally{try{c||null==d.return||d.return()}finally{if(h)throw f}}return a.length>0&&s(l,a,i),{mapping:l,canvasHeight:u(o+i+e)}}function s(t,e,n){var r=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value,c=l.icon,h=l.xOffset;t[c.id]=i({},c,{x:h,y:n,image:c.image})}}catch(t){o=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}function u(t){return Math.pow(2,Math.ceil(Math.log2(t)))}e.a=o,e.b=a;var l=n(9),c=n.n(l),h=30},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nuniform float u_opacity : 1.0;\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\n\n// dash\nuniform float u_dash_offset : 0.0;\nuniform float u_dash_ratio : 0.1;\nvarying float v_distance_ratio;\nvarying vec2 v_dash_array;\nvarying float v_side;\n\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n// [animate, duration, interval, trailLength],\nvoid main() {\n  gl_FragColor = v_color;\n  // anti-alias\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= blur * u_opacity;\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      gl_FragColor.a *= alpha;\n  }\n // dash line\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *=(1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',m='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// dash line\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\nvarying vec2 v_dash_array;\nvarying vec2 v_normal;\nvarying float v_distance_ratio;\nvarying float v_side;\n\n\nvoid main() {\n\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = a_Distance / a_Total_Distance;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;\n  }\n  if(u_aimate.x == Animate) {\n      v_distance_ratio = a_Distance / a_Total_Distance;\n  }\n  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));\n  v_color = a_Color;\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  vec2 offset = project_pixel(size.xy);\n  v_side = a_Miter * a_Size.x;\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',y={solid:0,dash:1},_=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.lineType,r=void 0===n?"solid":n,i=t.dashArray,o=void 0===i?[10,5]:i;return{u_opacity:e||1,u_line_type:y[r],u_dash_array:o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:m,fragmentShader:g,triangulation:v.f,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig();t.lineType;this.styleAttributeService.registerStyleAttribute({name:"distance",type:p.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:p.AttributeType.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0],o[1]]:[o,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:p.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){return[n[4]]}}})}}]),e}(d.a)},function(t,e,n){"use strict";function r(t){return t.map(function(t){return"string"==typeof t&&(t=[t,{}]),t})}e.b=r,n.d(e,"a",function(){return x});var i,o,a,s,u,l,c=n(14),h=n.n(c),f=n(2),p=n.n(f),d=n(3),v=n.n(d),g=n(13),m=n.n(g),y=n(15),_=(n.n(y),n(8)),b=n(7),x=(n.n(b),i=n.i(b.injectable)(),o=n.i(b.inject)(_.TYPES.IGlobalConfigService),i((s=l=function(){function t(){p()(this,t),h()(this,"configService",u,this),this.enabled=void 0}return v()(t,[{key:"apply",value:function(t,e){var n=this,r=(e.rendererService,e.postProcessingPassFactory),i=e.normalPassFactory;t.hooks.init.tap("MultiPassRendererPlugin",function(){var e=t.getLayerConfig(),o=e.enableMultiPassRenderer,a=e.passes,s=void 0===a?[]:a;n.enabled=!!o&&!1!==t.getLayerConfig().enableMultiPassRenderer,n.enabled&&(t.multiPassRenderer=n.createMultiPassRenderer(t,s,r,i),t.multiPassRenderer.setRenderFlag(!0))}),t.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){})}},{key:"createMultiPassRenderer",value:function(t,e,n,r){var i=t.multiPassRenderer,o=t.getLayerConfig(),a=o.enablePicking;o.enableTAA;return a&&i.add(r("pixelPicking")),i}}]),t}(),u=m()(s.prototype,"configService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a)},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g=n(196),m='varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',y='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec3 size = a_Size * a_Position;\n\n  vec2 offset = project_pixel(size.xy);\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);\n\n  float lightWeight = calc_lighting(pos);\n  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  gl_Position = project_common_position_to_clipspace(pos);\n  setPickingColor(a_PickingColor);\n}\n',_=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:y,fragmentShader:m,triangulation:v.b,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e,n,r){var i=t.size;if(i){var o=[];return Array.isArray(i)&&(o=2===i.length?[i[0],i[0],i[1]]:i),Array.isArray(i)||(o=[i]),o}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e){var r=n.i(g.a)(t.coordinates);return[r[0],r[1],0]}}})}}]),e}(d.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(10),v=n(17),g=n(23),m="#define Animate 0.0\n\nuniform float u_blur : 0;\nuniform float u_opacity : 1;\nuniform float u_stroke_width : 1;\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  lowp float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\n  float PI = 3.14159;\n  float N_RINGS = 3.0;\n  float FREQ = 1.0;\n\n  // gl_FragColor = v_color * color_t;\n  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\n  if(u_aimate.x == Animate) {\n    float d = length(v_data.xy);\n    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);\n    gl_FragColor = vec4(gl_FragColor.xyz, intensity);\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n",y='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec2 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\nuniform mat4 u_ModelMatrix;\n\nuniform float u_stroke_width : 2;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // unpack color(vec2)\n  v_color = a_Color;\n  vec2 extrude = a_Extrude;\n\n  float shape_type = a_Shape;\n\n  float newSize = setPickingSize(a_Size);\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  vec2 offset = project_pixel(extrude * (newSize + u_stroke_width));\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  // TODO: billboard\n  // anti-alias\n  float antialiasblur = 1.0 / u_DevicePixelRatio / (newSize + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(extrude, antialiasblur,shape_type);\n\n  setPickingColor(a_PickingColor);\n}\n',_=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,r=void 0===e?1:e,i=t.stroke,o=void 0===i?"rgb(0,0,0,0)":i,a=t.strokeWidth,s=void 0===a?1:a,u=t.strokeOpacity,l=void 0===u?1:u;return{u_opacity:r,u_stroke_width:s,u_stroke_color:n.i(d.o)(o),u_stroke_opacity:l}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),g.c)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:y,fragmentShader:m,triangulation:g.c,depth:{enable:!1},blend:this.getBlend()})]}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:p.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:function(t,e,n,r){var i=[1,1,-1,1,-1,-1,1,-1],o=r%4*2;return[i[o],i[o+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?5:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:p.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(e,n,r,i){var o=e.shape,a=void 0===o?2:o;return[t.layer.getLayerConfig().shape2d.indexOf(a)]}}})}}]),e}(v.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_stroke_width : 1;\nuniform vec4 u_stroke_color : [1, 1, 1, 1];\nuniform float u_stroke_opacity : 1;\nuniform float u_opacity : 1;\n\nvarying float v_size;\n#pragma include "picking"\nvoid main(){\nvec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\nvec2 fragmentPosition = 2.0*gl_PointCoord - 1.0;\nfloat distance = length(fragmentPosition);\nfloat distanceSqrd = distance * distance;\nfloat radius = 1.;\nfloat r = 1.0 - smoothstep(radius-(radius*0.01),\n                         radius+(radius*0.01),\n                         distanceSqrd);\n  vec4 textureColor=texture2D(u_texture,pos);\n  if(v_color == vec4(1.0)){\n        gl_FragColor= vec4(textureColor.xyz, textureColor.w);\n  }else {\n        gl_FragColor= step(0.01, textureColor.z) * v_color;\n  }\n  gl_FragColor.a =gl_FragColor.a * u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',m='precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform float u_stroke_width : 1;\nvarying float v_size;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n   v_color = a_Color;\n   v_uv = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   v_size = a_Size;\n\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n\n  setPickingColor(a_PickingColor);\n\n}\n',y=function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.texture=void 0,n}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"buildModels",value:function(){var t=this;return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){t.updateTexture(),t.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:m,fragmentShader:g,triangulation:v.a,primitive:p.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?5:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:function(e,n,r,i){var o=t.iconService.getIconMap(),a=e.shape,s=o[a]||{x:0,y:0};return[s.x,s.y]}}})}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D;this.texture=t({data:this.iconService.getCanvas(),mag:p.gl.LINEAR,min:p.gl.LINEAR,width:1024,height:this.iconService.canvasHeight||128})}}]),e}(d.a)},function(t,e,n){"use strict";function r(t){var e=t.coordinates;return{vertices:v()(e),indices:[0],size:e.length}}n.d(e,"a",function(){return x});var i=n(2),o=n.n(i),a=n(3),s=n.n(a),u=n(6),l=n.n(u),c=n(4),h=n.n(c),f=n(5),p=n.n(f),d=n(48),v=n.n(d),g=n(8),m=n(10),y=n(17),_='\nuniform float u_opacity : 1;\nvarying vec4 v_color;\n#pragma include "picking"\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a =gl_FragColor.a * u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',b='\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nattribute float a_Size;\nattribute vec4 a_Color;\nvarying vec4 v_color;\n#pragma include "projection"\n#pragma include "picking"\nvoid main() {\n  v_color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n  gl_Position = project_common_position_to_clipspace(project_pos);\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n    setPickingColor(a_PickingColor);\n}\n',x=function(t){function e(){return o()(this,e),l()(this,h()(e).apply(this,arguments))}return p()(e,t),s()(e,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,r=void 0===e?1:e,i=t.stroke,o=void 0===i?"rgb(0,0,0,0)":i,a=t.strokeWidth;return{u_opacity:r,u_stroke_width:void 0===a?1:a,u_stroke_color:n.i(m.o)(o)}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:b,fragmentShader:_,triangulation:r,depth:{enable:!1},primitive:g.gl.POINTS,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:g.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:g.gl.DYNAMIC_DRAW,data:[],type:g.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:g.BlendType.additive}}}]),e}(y.a)},function(t,e,n){"use strict";function r(t){var e=this,n=t.id,r=[],i=[];if(!e.glyphInfoMap||!e.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=e.glyphInfoMap[n].centroid,a=2===o.length?[o[0],o[1],0]:o;return e.glyphInfoMap[n].glyphQuads.forEach(function(t,e){r.push.apply(r,v()(a).concat([t.tex.x,t.tex.y+t.tex.height,t.tl.x,t.tl.y],v()(a),[t.tex.x+t.tex.width,t.tex.y+t.tex.height,t.tr.x,t.tr.y],v()(a),[t.tex.x+t.tex.width,t.tex.y,t.br.x,t.br.y],v()(a),[t.tex.x,t.tex.y,t.bl.x,t.bl.y])),i.push(0+4*e,1+4*e,2+4*e,2+4*e,3+4*e,0+4*e)}),{vertices:r,indices:i,size:7}}n.d(e,"a",function(){return E});var i=n(2),o=n.n(i),a=n(3),s=n.n(a),u=n(6),l=n.n(u),c=n(4),h=n.n(c),f=n(5),p=n.n(f),d=n(48),v=n.n(d),g=n(8),m=n(10),y=n(17),_=n(797),b=n(196),x=n(800),w='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\n// uniform float u_font_size : 24.0;\nuniform float u_opacity : 1.0;\nuniform float u_stroke_opacity: 1.0;\nuniform vec4 u_stroke : [0, 0, 0, 1];\nuniform float u_strokeWidth : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\n\n#pragma include "picking"\nvoid main() {\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  // float fontScale = u_font_size / FONT_SIZE;\n\n  lowp float buff = (6.0 - u_strokeWidth / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke.rgb, u_stroke.a * u_opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor.a= gl_FragColor.a * alpha;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',S='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 24.0\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying vec4 v_color;\nvarying float v_fontScale;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n  v_uv = a_tex / u_sdf_map_size;\n\n  // \n  float fontScale = a_Size / FONT_SIZE;\n   v_fontScale = fontScale;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  gl_Position = vec4(projected_position.xy / projected_position.w\n    + a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n',E=function(t){function e(){var t,n;o()(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=l()(this,(t=h()(e)).call.apply(t,[this].concat(i))),n.glyphInfo=void 0,n.glyphInfoMap={},n.texture=void 0,n.currentZoom=-1,n.extent=void 0,n.textureHeight=0,n.textCount=0,n.preTextStyle={},n}return p()(e,t),s()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,r=void 0===e?1:e,i=t.stroke,o=void 0===i?"#fff":i,a=t.strokeWidth,s=void 0===a?0:a,u=t.strokeOpacity,l=void 0===u?1:u,c=t.textAnchor,h=void 0===c?"center":c,f=t.textAllowOverlap,p=void 0!==f&&f,d=t.halo,v=void 0===d?.5:d,g=t.gamma,y=void 0===g?2:g,_=this.fontService,b=_.canvas,x=_.mapping;return Object.keys(x).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(x).length),this.preTextStyle={textAnchor:h,textAllowOverlap:p},{u_opacity:r,u_stroke_opacity:l,u_sdf_map:this.texture,u_stroke:n.i(m.o)(o),u_halo_blur:v,u_gamma_scale:y,u_sdf_map_size:[b.width,b.height],u_strokeWidth:s}}},{key:"buildModels",value:function(){var t=this;this.layer.on("remapping",function(){t.initGlyph(),t.updateTexture(),t.reBuildModel()}),this.extent=this.textExtent();var e=this.layer.getLayerConfig(),n=e.textAnchor,i=void 0===n?"center":n,o=e.textAllowOverlap,a=void 0===o||o;return this.preTextStyle={textAnchor:i,textAllowOverlap:a},this.initGlyph(),this.updateTexture(),this.filterGlyphs(),[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:S,fragmentShader:w,triangulation:r.bind(this),depth:{enable:!1},blend:this.getBlend()})]}},{key:"needUpdate",value:function(){var t=this.layer.getLayerConfig(),e=t.textAllowOverlap,r=void 0!==e&&e,i=this.mapService.getZoom(),o=this.mapService.getBounds(),a=n.i(m.j)(this.extent,o);return(!r&&(Math.abs(this.currentZoom-i)>1||!a)||r!==this.preTextStyle.textAllowOverlap)&&(this.reBuildModel(),!0)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:g.AttributeType.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:g.gl.STATIC_DRAW,data:[],type:g.gl.FLOAT},size:2,update:function(t,e,n,r){return[n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:g.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:g.gl.DYNAMIC_DRAW,data:[],type:g.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?12:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:g.AttributeType.Attribute,descriptor:{name:"a_tex",buffer:{usage:g.gl.DYNAMIC_DRAW,data:[],type:g.gl.FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}})}},{key:"textExtent",value:function(){var t=this.mapService.getBounds();return n.i(m.k)(t,.5)}},{key:"initTextFont",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"800":e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=this.layer.getEncodedData(),a=[];o.forEach(function(t){var e=t.shape,n=void 0===e?"":e;n=n.toString();var r=!0,i=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;-1===a.indexOf(l)&&a.push(l)}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:i})}},{key:"generateGlyphLayout",value:function(){var t=this,e=this.fontService.mapping,r=this.layer.getLayerConfig(),i=r.spacing,o=void 0===i?2:i,a=r.textAnchor,s=void 0===a?"center":a,u=r.textOffset,l=this.layer.getEncodedData();this.glyphInfo=l.map(function(r){var i=r.shape,a=void 0===i?"":i,l=r.coordinates,c=r.id,h=r.size,f=void 0===h?1:h,p=n.i(x.a)(a.toString(),e,f,s,"center",o,u),d=n.i(x.b)(p,u,!1);return r.shaping=p,r.glyphQuads=d,r.centroid=n.i(b.a)(l),t.glyphInfoMap[c]={shaping:p,glyphQuads:d,centroid:n.i(b.a)(l)},r})}},{key:"filterGlyphs",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.padding,r=void 0===n?[4,4]:n,i=e.textAllowOverlap;if(void 0===i||!i){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var o=this.rendererService.getViewportSize(),a=o.width,s=o.height,u=new _.a(a,s);this.glyphInfo.filter(function(e){var n=e.shaping,i=e.id,o=void 0===i?0:i,a=e.centroid,s=e.size,l=s/24,c=t.mapService.lngLatToContainer(a),h=u.placeCollisionBox({x1:n.left*l-r[0],x2:n.right*l+r[0],y1:n.top*l-r[1],y2:n.bottom*l+r[1],anchorPointX:c.x,anchorPointY:c.y}),f=h.box;return!(!f||!f.length||(u.insertCollisionBox(f,o),0))}).forEach(function(e){t.glyphInfoMap[e.id]=e})}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.fontService.canvas;this.textureHeight=e.height,this.texture=t({data:e,mag:g.gl.LINEAR,min:g.gl.LINEAR,width:e.width,height:e.height})}},{key:"reBuildModel",value:function(){this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:S,fragmentShader:w,triangulation:r.bind(this),depth:{enable:!1},blend:this.getBlend()})]}}]),e}(y.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,i=n(9),o=n.n(i),a=n(8),s=(r={},o()(r,a.BlendType.additive,{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE,srcAlpha:1,dstAlpha:1}}),o()(r,a.BlendType.normal,{enable:!0,func:{srcRGB:a.gl.SRC_ALPHA,dstRGB:a.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),o()(r,a.BlendType.subtractive,{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE,srcAlpha:a.gl.ZERO,dstAlpha:a.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:a.gl.FUNC_SUBTRACT,alpha:a.gl.FUNC_SUBTRACT}}),o()(r,a.BlendType.max,{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE},equation:{rgb:a.gl.MAX_EXT}}),o()(r,a.BlendType.min,{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE},equation:{rgb:a.gl.MIN_EXT}}),r)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){f()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return S});var o,a,s,u,l,c,h=n(9),f=n.n(h),p=n(14),d=n.n(p),v=n(2),g=n.n(v),m=n(3),y=n.n(m),_=n(13),b=n.n(_),x=n(15),w=(n.n(x),n(8)),S=(o=n.i(w.lazyInject)(w.TYPES.ILogService),a=n.i(w.lazyInject)(w.TYPES.IGlobalConfigService),s=c=function(){function t(e){g()(this,t),d()(this,"logger",u,this),d()(this,"configService",l,this),this.config=void 0,this.config=e}return y()(t,[{key:"setContainer",value:function(t,e){t.bind(w.TYPES.MapConfig).toConstantValue(i({},this.config,{id:e})),t.bind(w.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),t}(),u=b()(s.prototype,"logger",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=b()(s.prototype,"configService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s)},function(t,e,n){"use strict";var r=n(802);n(806);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return u});var r={},i={},o=function(t){return i[t]},a=function(t,e){i[t]=e},s=function(t){return r[t]},u=function(t,e){r[t]=e}},function(t,e,n){"use strict";var r=n(307),i=n(819),o=n(820),a=n(821),s=n(309),u=n(822),l=n(823),c=n(824),h=n(825),f=n(826),p=n(827),d=n(828),v=n(829);n.d(e,"getTransform",function(){return r.c}),n.d(e,"getParser",function(){return r.d});var g=n(818);n.n(g);e.default=l.a,n.i(r.a)("geojson",o.a),n.i(r.a)("image",a.a),n.i(r.a)("csv",i.a),n.i(r.a)("json",s.a),n.i(r.a)("raster",u.a),n.i(r.b)("cluster",c.a),n.i(r.b)("filter",h.a),n.i(r.b)("join",d.a),n.i(r.b)("map",v.a),n.i(r.b)("grid",f.a),n.i(r.b)("hexagon",p.a)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){s()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t,e){var n=e.x,r=e.y,o=e.x1,a=e.y1,s=e.coordinates,u=[];return t.forEach(function(t,e){var c=[];if(n&&r&&(c=[parseFloat(t[n]),parseFloat(t[r])]),n&&r&&o&&a){c=[[parseFloat(t[n]),parseFloat(t[r])],[parseFloat(t[o]),parseFloat(t[a])]]}if(s){var f="Polygon";Array.isArray(s[0])||(f="Point"),Array.isArray(s[0])&&!Array.isArray(s[0][0])&&(f="LineString");var p={type:f,coordinates:l()(t[s])};h()(p,!0),c=p.coordinates}var d=i({},t,{_id:e,coordinates:c});u.push(d)}),{dataArray:u}}e.a=o;var a=n(9),s=n.n(a),u=n(48),l=n.n(u),c=n(351),h=n.n(c)},function(t,e,n){"use strict";var r=n(683);n.n(r);r.translate=function(t,e,n){var i=new Array(9);return r.fromTranslation(i,n),r.multiply(t,i,e)},r.rotate=function(t,e,n){var i=new Array(9);return r.fromRotation(i,n),r.multiply(t,i,e)},r.scale=function(t,e,n){var i=new Array(9);return r.fromScaling(i,n),r.multiply(t,i,e)},r.transform=function(t,e){for(var n=[].concat(t),i=0,o=e.length;i<o;i++){var a=e[i];switch(a[0]){case"t":r.translate(n,n,[a[1],a[2]]);break;case"s":r.scale(n,n,[a[1],a[2]]);break;case"r":r.rotate(n,n,a[1])}}return n},e.a=r},function(t,e,n){"use strict";function r(t,e,n,r){var o={x:n.x-t.x,y:n.y-t.y},a={x:e.x-t.x,y:e.y-t.y},s={x:r.x-n.x,y:r.y-n.y},u=a.x*s.y-a.y*s.x,l=u*u,c=a.x*a.x+a.y*a.y,h=s.x*s.x+s.y*s.y,f=null;if(l>.001*c*h){var p=(o.x*s.y-o.y*s.x)/u,d=(o.x*a.y-o.y*a.x)/u;i(p,0,1)&&i(d,0,1)&&(f={x:t.x+p*a.x,y:t.y+p*a.y})}return f}e.a=r;var i=function(t,e,n){return t>=e&&t<=n}},function(t,e,n){"use strict";var r=(n(314),n(846));n.d(e,"a",function(){return r.a});var i=(n(848),n(847),n(849),n(853),n(851),n(313));n.d(e,"b",function(){return i.a});n(316),n(315),n(318),n(197),n(852),n(311),n(850),n(317)},function(t,e,n){"use strict";function r(t){if(!t)return null;if(o()(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(s,function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(u,function(t,e){e&&o.push(+e)}),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""}),n}e.a=r;var i=n(57),o=n.n(i),a="\t\n\v\f\r \u2028\u2029",s=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),u=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig")},function(t,e,n){"use strict";function r(t){var e=t||[];return s()(e)?e:l()(e)?(e=e.match(c),o()(e,function(t,n){if(t=t.match(h),t[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}o()(t,function(e,n){isNaN(e)||(t[n]=+e)}),e[n]=t}),e):void 0}var i=n(90),o=n.n(i),a=n(57),s=n.n(a),u=n(78),l=n.n(u),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,h=/[^\s\,]+/gi;e.a=r},function(t,e,n){"use strict";function r(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function i(t){var e=n.i(o.a)(t);if(!e||!e.length)return[["M",0,0]];for(var i=!1,s=0;s<e.length;s++){var u=e[s][0];if(a.test(u)||["V","H","T","S"].indexOf(u)>=0){i=!0;break}}if(!i)return e;var l=[],c=0,h=0,f=0,p=0,d=0,v=e[0];"M"!==v[0]&&"m"!==v[0]||(c=+v[1],h=+v[2],f=c,p=h,d++,l[0]=["M",c,h]);for(var s=d,g=e.length;s<g;s++){var m=e[s],y=l[s-1],_=[],u=m[0],b=u.toUpperCase();if(u!==b)switch(_[0]=b,b){case"A":_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_[6]=+m[6]+c,_[7]=+m[7]+h;break;case"V":_[1]=+m[1]+h;break;case"H":_[1]=+m[1]+c;break;case"M":f=+m[1]+c,p=+m[2]+h;break;default:for(var x=1,w=m.length;x<w;x++)_[x]=+m[x]+(x%2?c:h)}else _=e[s];switch(b){case"Z":c=+f,h=+p;break;case"H":c=_[1],_=["L",c,h];break;case"V":h=_[1],_=["L",c,h];break;case"T":c=_[1],h=_[2];var S=r([y[1],y[2]],[y[3],y[4]]);_=["Q",S[0],S[1],c,h];break;case"S":c=_[_.length-2],h=_[_.length-1];var E=y.length,M=r([y[E-4],y[E-3]],[y[E-2],y[E-1]]);_=["C",M[0],M[1],_[1],_[2],c,h];break;case"M":f=_[_.length-2],p=_[_.length-1];break;default:c=_[_.length-2],h=_[_.length-1]}l.push(_)}return l}e.a=i;var o=n(313),a=/[a-z]/},function(t,e,n){"use strict";function r(t,e){var r,u=n.i(i.a)(t),l=e&&n.i(i.a)(e),c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f=[],p=[],d="",v="",g=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(o.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(s(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(s(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(a(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(a(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(a(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(a(e.x,e.y,e.X,e.Y))}return t},m=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)f[e]="A",l&&(p[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),r=Math.max(u.length,l&&l.length||0)}},y=function(t,e,n,i,o){t&&e&&"M"===t[o][0]&&"M"!==e[o][0]&&(e.splice(o,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=t[o][1],n.y=t[o][2],r=Math.max(u.length,l&&l.length||0))};r=Math.max(u.length,l&&l.length||0);for(var _=0;_<r;_++){u[_]&&(d=u[_][0]),"C"!==d&&(f[_]=d,_&&(v=f[_-1])),u[_]=g(u[_],c,v),"A"!==f[_]&&"C"===d&&(f[_]="C"),m(u,_),l&&(l[_]&&(d=l[_][0]),"C"!==d&&(p[_]=d,_&&(v=p[_-1])),l[_]=g(l[_],h,v),"A"!==p[_]&&"C"===d&&(p[_]="C"),m(l,_)),y(u,l,c,h,_),y(l,u,h,c,_);var b=u[_],x=l&&l[_],w=b.length,S=l&&x.length;c.x=b[w-2],c.y=b[w-1],c.bx=parseFloat(b[w-4])||c.x,c.by=parseFloat(b[w-3])||c.y,h.bx=l&&(parseFloat(x[S-4])||h.x),h.by=l&&(parseFloat(x[S-3])||h.y),h.x=l&&x[S-2],h.y=l&&x[S-1]}return l?[u,l]:u}e.a=r;var i=n(315),o=function(t,e,n,r,i,a,s,u,l,c){n===r&&(n+=1);var h,f,p,d,v,g=120*Math.PI/180,m=Math.PI/180*(+i||0),y=[],_=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)f=c[0],p=c[1],d=c[2],v=c[3];else{h=_(t,e,-m),t=h.x,e=h.y,h=_(u,l,-m),u=h.x,l=h.y,t===u&&e===l&&(u+=1,l+=1);var b=(t-u)/2,x=(e-l)/2,w=b*b/(n*n)+x*x/(r*r);w>1&&(w=Math.sqrt(w),n*=w,r*=w);var S=n*n,E=r*r,M=(a===s?-1:1)*Math.sqrt(Math.abs((S*E-S*x*x-E*b*b)/(S*x*x+E*b*b)));d=M*n*x/r+(t+u)/2,v=M*-r*b/n+(e+l)/2,f=Math.asin(Number(((e-v)/r).toFixed(9))),p=Math.asin(Number(((l-v)/r).toFixed(9))),f=t<d?Math.PI-f:f,p=u<d?Math.PI-p:p,f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),s&&f>p&&(f-=2*Math.PI),!s&&p>f&&(p-=2*Math.PI)}var T=p-f;if(Math.abs(T)>g){var C=p,A=u,P=l;p=f+g*(s&&p>f?1:-1),u=d+n*Math.cos(p),l=v+r*Math.sin(p),y=o(u,l,n,r,i,0,s,A,P,[p,C,d,v])}T=p-f;var k=Math.cos(f),I=Math.sin(f),O=Math.cos(p),j=Math.sin(p),L=Math.tan(T/4),D=4/3*n*L,R=4/3*r*L,B=[t,e],z=[t+D*I,e-R*k],F=[u+D*j,l-R*O],N=[u,l];if(z[0]=2*B[0]-z[0],z[1]=2*B[1]-z[1],c)return[z,F,N].concat(y);y=[z,F,N].concat(y).join().split(",");for(var U=[],V=0,G=y.length;V<G;V++)U[V]=V%2?_(y[V-1],y[V],m).y:_(y[V],y[V+1],m).x;return U},a=function(t,e,n,r){return[t,e,n,r,n,r]},s=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]}},function(t,e,n){"use strict";function r(t){return Math.abs(t)<a?0:t<0?-1:1}function i(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function o(t,e,n){var o=!1,a=t.length;if(a<=2)return!1;for(var s=0;s<a;s++){var u=t[s],l=t[(s+1)%a];if(i(u,l,[e,n]))return!0;r(u[1]-n)>0!=r(l[1]-n)>0&&r(e-(n-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(o=!o)}return o}e.a=o;var a=1e-6},function(t,e,n){"use strict";function r(t,e,n,r,i){return i?[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]]}e.a=r},function(t,e,n){"use strict";function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return r(t)*r(e)?(t[0]*e[0]+t[1]*e[1])/(r(t)*r(e)):1}function o(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(i(t,e))}function a(t,e){return t[0]===e[0]&&t[1]===e[1]}function s(t,e){var n=e[1],r=e[2],s=u.default(l.default(e[3]),2*Math.PI),c=e[4],h=e[5],f=t[0],p=t[1],d=e[6],v=e[7],g=Math.cos(s)*(f-d)/2+Math.sin(s)*(p-v)/2,m=-1*Math.sin(s)*(f-d)/2+Math.cos(s)*(p-v)/2,y=g*g/(n*n)+m*m/(r*r);y>1&&(n*=Math.sqrt(y),r*=Math.sqrt(y));var _=n*n*(m*m)+r*r*(g*g),b=_?Math.sqrt((n*n*(r*r)-_)/_):1;c===h&&(b*=-1),isNaN(b)&&(b=0);var x=r?b*n*m/r:0,w=n?b*-r*g/n:0,S=(f+d)/2+Math.cos(s)*x-Math.sin(s)*w,E=(p+v)/2+Math.sin(s)*x+Math.cos(s)*w,M=[(g-x)/n,(m-w)/r],T=[(-1*g-x)/n,(-1*m-w)/r],C=o([1,0],M),A=o(M,T);return i(M,T)<=-1&&(A=Math.PI),i(M,T)>=1&&(A=0),0===h&&A>0&&(A-=2*Math.PI),1===h&&A<0&&(A+=2*Math.PI),{cx:S,cy:E,rx:a(t,[d,v])?0:n,ry:a(t,[d,v])?0:r,startAngle:C,endAngle:C+A,xRotation:s,arcFlag:c,sweepFlag:h}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(140),l=n(141);e.isSamePoint=a,e.default=s},function(t,e,n){"use strict";function r(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function i(t){var e=o.default(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,i=0;i<e.length;i++){var s=e[i][0];if(a.test(s)||["V","H","T","S"].indexOf(s)>=0){n=!0;break}}if(!n)return e;var u=[],l=0,c=0,h=0,f=0,p=0,d=e[0];"M"!==d[0]&&"m"!==d[0]||(l=+d[1],c=+d[2],h=l,f=c,p++,u[0]=["M",l,c]);for(var i=p,v=e.length;i<v;i++){var g=e[i],m=u[i-1],y=[],s=g[0],_=s.toUpperCase();if(s!==_)switch(y[0]=_,_){case"A":y[1]=g[1],y[2]=g[2],y[3]=g[3],y[4]=g[4],y[5]=g[5],y[6]=+g[6]+l,y[7]=+g[7]+c;break;case"V":y[1]=+g[1]+c;break;case"H":y[1]=+g[1]+l;break;case"M":h=+g[1]+l,f=+g[2]+c;break;default:for(var b=1,x=g.length;b<x;b++)y[b]=+g[b]+(b%2?l:c)}else y=e[i];switch(_){case"Z":l=+h,c=+f;break;case"H":l=y[1],y=["L",l,c];break;case"V":c=y[1],y=["L",l,c];break;case"T":l=y[1],c=y[2];var w=r([m[1],m[2]],[m[3],m[4]]);y=["Q",w[0],w[1],l,c];break;case"S":l=y[y.length-2],c=y[y.length-1];var S=m.length,E=r([m[S-4],m[S-3]],[m[S-2],m[S-1]]);y=["C",E[0],E[1],y[1],y[2],l,c];break;case"M":h=y[y.length-2],f=y[y.length-1];break;default:l=y[y.length-2],c=y[y.length-1]}u.push(y)}return u}Object.defineProperty(e,"__esModule",{value:!0});var o=n(856),a=/[a-z]/;e.default=i},function(t,e,n){"use strict";function r(t,e){return{x:e.x+(e.x-t.x),y:e.y+(e.y-t.y)}}function i(t){t=s.default(t);for(var e=[],n=null,i=null,u=null,l=0,c=t.length,h=0;h<c;h++){var f=t[h];i=t[h+1];var p=f[0],d={command:p,prePoint:n,params:f,startTangent:null,endTangent:null};switch(p){case"M":u=[f[1],f[2]],l=h;break;case"A":var v=o.default(n,f);d.arcParams=v}if("Z"===p)n=u,i=t[l+1];else{var g=f.length;n=[f[g-2],f[g-1]]}i&&"Z"===i[0]&&(i=t[l],e[l]&&(e[l].prePoint=n)),d.currentPoint=n,e[l]&&a.isSamePoint(n,e[l].currentPoint)&&(e[l].prePoint=d.prePoint);var m=i?[i[i.length-2],i[i.length-1]]:null;d.nextPoint=m;var y=d.prePoint;if(["L","H","V"].includes(p))d.startTangent=[y[0]-n[0],y[1]-n[1]],d.endTangent=[n[0]-y[0],n[1]-y[1]];else if("Q"===p){var _=[f[1],f[2]];d.startTangent=[y[0]-_[0],y[1]-_[1]],d.endTangent=[n[0]-_[0],n[1]-_[1]]}else if("T"===p){var b=e[h-1],_=r(b.currentPoint,y);"Q"===b.command?(d.command="Q",d.startTangent=[y[0]-_[0],y[1]-_[1]],d.endTangent=[n[0]-_[0],n[1]-_[1]]):(d.command="TL",d.startTangent=[y[0]-n[0],y[1]-n[1]],d.endTangent=[n[0]-y[0],n[1]-y[1]])}else if("C"===p){var x=[f[1],f[2]],w=[f[3],f[4]];d.startTangent=[y[0]-x[0],y[1]-x[1]],d.endTangent=[n[0]-w[0],n[1]-w[1]]}else if("S"===p){var b=e[h-1],x=r(b.currentPoint,y),w=[f[1],f[2]];"C"===b.command?(d.command="C",d.startTangent=[y[0]-x[0],y[1]-x[1]],d.endTangent=[n[0]-w[0],n[1]-w[1]]):(d.command="SQ",d.startTangent=[y[0]-w[0],y[1]-w[1]],d.endTangent=[n[0]-w[0],n[1]-w[1]])}else if("A"===p){var S=.001,E=d.arcParams||{},M=E.rx,T=void 0===M?0:M,C=E.ry,A=void 0===C?0:C,P=E.xRotation,k=void 0===P?0:P,I=E.arcFlag,O=void 0===I?0:I,j=E.sweepFlag,L=void 0===j?0:j,D=E.startAngle,R=void 0===D?0:D,B=E.endAngle,z=void 0===B?0:B;0===L&&(S*=-1);var F=k*Math.cos(R-S)+T,N=O*Math.sin(R-S)+A;d.startTangent=[F-u[0],N-u[1]];var U=k*Math.cos(R+z+S)+T,V=O*Math.sin(R+z-S)+A;d.endTangent=[y.x-U,y.y-V]}e.push(d)}return e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(319),a=n(319),s=n(857);e.default=i},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(107),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return n.i(r.__extends)(e,t),e.prototype.translate=function(t){var e=n.i(i.indexOf)(this.values,t);return-1===e?n.i(i.isNumber)(t)?t:NaN:e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},e.prototype.getText=function(e){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var s=e;return n.i(i.isNumber)(e)&&!this.values.includes(e)&&(s=this.values[s]),t.prototype.getText.apply(this,n.i(r.__spreadArrays)([s],o))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(n.i(i.isNil)(this.getConfig("min"))&&(this.min=0),n.i(i.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(133),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return n.i(r.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(133),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return n.i(r.__extends)(e,t),e.prototype.invert=function(t){var e=this.ticks,r=e.length,o=this.getInvertPercent(t),a=Math.floor(o*(r-1));if(a>=r-1)return n.i(i.last)(e);if(a<0)return n.i(i.head)(e);var s=e[a],u=e[a+1],l=a/(r-1);return s+(o-l)/((a+1)/(r-1)-l)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||(n.i(i.last)(e)!==this.max&&e.push(this.max),n.i(i.head)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<n.i(i.head)(e))return 0;if(t>n.i(i.last)(e))return 1;var r=0;return n.i(i.each)(e,function(e,n){if(!(t>=e))return!1;r=n}),r/(e.length-1)},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t){var e=t.values,r=t.tickInterval,a=t.tickCount,s=e;if(n.i(i.isNumber)(r))return n.i(i.filter)(s,function(t,e){return e%r==0});var u=t.min,l=t.max;if(n.i(i.isNil)(u)&&(u=0),n.i(i.isNil)(l)&&(l=e.length-1),n.i(i.isNumber)(a)&&a<l-u){var c=n.i(o.a)(u,l,a,!1,[1,2,5,3,4,7,6,8,9]).ticks;return n.i(i.filter)(c,function(t){return t>=u&&t<=l}).map(function(t){return e[t]})}return e.slice(u,l+1)}e.a=r;var i=n(0),o=n(327)},function(t,e,n){"use strict";function r(t){return o[t]}function i(t,e){o[t]=e}e.a=r,e.b=i;var o={}},function(t,e,n){"use strict";function r(t,e){return(t%e+e)%e}function i(t,e,i,o,a,s){var u=n.i(f.size)(e),l=n.i(f.indexOf)(e,t),c=0,h=r(o,s);return(h<d||s-h<d)&&o<=0&&a>=0&&(c=1),1-l/(u-1)-i+c}function o(t,e,r){var i=n.i(f.size)(e);return 1-n.i(f.indexOf)(e,t)/(i-1)-r+1}function a(t,e,n,r,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function s(t,e){return t>=e?2-(t-1)/(e-1):1}function u(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function l(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function c(){return 1}function h(t,e,r,h,d,v){if(void 0===r&&(r=5),void 0===h&&(h=!0),void 0===d&&(d=p),void 0===v&&(v=[.25,.2,.5,.05]),t===e||1===r)return{min:t,max:e,ticks:[t]};for(var g={score:-2,lmin:0,lmax:0,lstep:0},m=1;m<1/0;){for(var y=0,_=d;y<_.length;y++){var b=_[y],x=o(b,d,m);if(Number.isNaN(x))throw new Error("NaN");if(v[0]*x+v[1]+v[2]+v[3]<g.score){m=1/0;break}for(var w=2;w<1/0;){var S=s(w,r);if(v[0]*x+v[1]+v[2]*S+v[3]<g.score)break;for(var E=(e-t)/(w+1)/m/b,M=Math.ceil(Math.log10(E));M<1/0;){var T=m*b*Math.pow(10,M),C=l(t,e,T*(w-1));if(v[0]*x+v[1]*C+v[2]*S+v[3]<g.score)break;var A=Math.floor(e/T)*m-(w-1)*m,P=Math.ceil(t/T)*m;if(A>P)M+=1;else{for(var k=A;k<=P;k+=1){var I=k*(T/m),O=I+T*(w-1),j=T,L=i(b,d,m,I,O,j),D=u(t,e,I,O),R=a(w,r,t,e,I,O),B=c(),z=v[0]*L+v[1]*D+v[2]*R+v[3]*B;z>g.score&&(!h||I<=t&&O>=e)&&(g.lmin=I,g.lmax=O,g.lstep=j,g.score=z)}M+=1}}w+=1}}m+=1}for(var F=Number.isInteger(g.lstep)?0:Math.ceil(Math.abs(Math.log10(g.lstep))),N=[],U=g.lmin;U<=g.lmax;U+=g.lstep)N.push(U);var V=F?n.i(f.map)(N,function(t){return Number.parseFloat(t.toFixed(F))}):N;return{min:Math.min(t,n.i(f.head)(V)),max:Math.max(e,n.i(f.last)(V)),ticks:V}}e.a=h;var f=n(0),p=[1,5,2,2.5,4,3],d=100*Number.EPSILON},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=5);var r={max:0,min:0,ticks:[]},i=1.5,o=.5+1.5*i,a=e-t,s=a/n,u=Math.pow(10,Math.floor(Math.log10(s))),l=u<1?Math.ceil(Math.abs(Math.log10(u))):0,c=u;2*u-s<i*(s-c)&&(c=2*u,5*u-s<o*(s-c)&&(c=5*u,10*u-s<i*(s-c)&&(c=10*u)));var h=Math.ceil(e/c),f=Math.floor(t/c);r.max=Math.max(h*c,e),r.min=Math.min(f*c,t);for(var p=Number.parseFloat((f*c).toFixed(l));p<e;)r.ticks.push(p),p+=c,l&&(p=Number.parseFloat(p.toFixed(l)));return r.ticks.push(p),r}e.a=r},function(t,e,n){"use strict";var r=n(32),i=function(t,e){if(!n.i(r.a)(t))return t;for(var i=[],o=0;o<t.length;o++){var a=t[o];e(a,o)&&i.push(a)}return i};e.a=i},function(t,e,n){"use strict";var r={}.toString,i=function(t){return r.call(t).replace(/^\[object /,"").replace(/]$/,"")};e.a=i},function(t,e,n){"use strict";function r(t,e){if(!e||!n.i(i.a)(t))return{};for(var r,s={},u=n.i(o.a)(e)?e:function(t){return t[e]},l=0;l<t.length;l++){var c=t[l];r=u(c),a.call(s,r)?s[r].push(c):s[r]=[c]}return s}var i=n(18),o=n(33),a=Object.prototype.hasOwnProperty;e.a=r},function(t,e,n){"use strict";var r=n(18),i=n(33),o=n(331),a=function(t,e){if(!e)return{0:t};if(!n.i(i.a)(e)){var a=n.i(r.a)(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",n=0,r=a.length;n<r;n++)e+=t[a[n]]&&t[a[n]].toString();return e}}return n.i(o.a)(t,e)};e.a=a},function(t,e,n){"use strict";e.a=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){"use strict";var r=n(200),i=n(32),o=n(77),a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(n.i(o.a)(t)||n.i(o.a)(e))return!1;if(n.i(i.a)(t)||n.i(i.a)(e)){if(t.length!==e.length)return!1;for(var s=!0,u=0;u<t.length&&(s=a(t[u],e[u]));u++);return s}if(n.i(r.a)(t)||n.i(r.a)(e)){var l=Object.keys(t),c=Object.keys(e);if(l.length!==c.length)return!1;for(var s=!0,u=0;u<l.length&&(s=a(t[l[u]],e[l[u]]));u++);return s}return!1};e.a=a},function(t,e,n){"use strict";function r(t,e){var r=n.i(o.a)(e),a=r.length;if(n.i(i.a)(t))return!a;for(var s=0;s<a;s+=1){var u=r[s];if(e[u]!==t[u]||!(u in t))return!1}return!0}var i=n(66),o=n(337);e.a=r},function(t,e,n){"use strict";var r=Object.prototype,i=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)};e.a=i},function(t,e,n){"use strict";var r=n(55),i=n(33),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return n.i(r.a)(t,function(r,o){n.i(i.a)(t)&&"prototype"===o||e.push(o)}),e};e.a=o},function(t,e,n){"use strict";var r=n(32),i=Array.prototype.splice,o=function(t,e){if(!n.i(r.a)(t))return[];for(var o=t?e.length:0,a=o-1;o--;){var s=void 0,u=e[o];o!==a&&u===s||(s=u,i.call(t,u,1))}return t};e.a=o},function(t,e,n){"use strict";var r=n(137),i=n(55),o=function(t){var e=[];return n.i(i.a)(t,function(t){n.i(r.a)(e,t)||e.push(t)}),e};e.a=o},function(t,e,n){"use strict";var r=n(55),i=n(33),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return n.i(r.a)(t,function(r,o){n.i(i.a)(t)&&"prototype"===o||e.push(r)}),e};e.a=o},function(t,e,n){"use strict";function r(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function i(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";function r(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(960),i=function(t){var e=r.default(t);return e.charAt(0).toUpperCase()+e.substring(1)};e.default=i},function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=n},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.a=r},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.a=r},function(t,e,n){"use strict";function r(t,e){if(t){if("string"==typeof t)return n.i(i.a)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n.i(i.a)(t,e):void 0}}e.a=r;var i=n(346)},function(t,e){function n(e){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){function r(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}var i=n(345);t.exports=r},function(t,e,n){function r(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(i(r,e)),t;case"GeometryCollection":return t.geometries=t.geometries.map(i(r,e)),t;case"Feature":return t.geometry=r(t.geometry,e),t;case"Polygon":case"MultiPolygon":return o(t,e);default:return t}}function i(t,e){return function(n){return t(n,e)}}function o(t,e){return"Polygon"===t.type?t.coordinates=a(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(a,e))),t}function a(t,e){e=!!e,t[0]=s(t[0],e);for(var n=1;n<t.length;n++)t[n]=s(t[n],!e);return t}function s(t,e){return u(t)===e?t:t.reverse()}function u(t){return l.ring(t)>=0}var l=n(986);t.exports=r},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(91),i=n(92),o=n(353),a=function(){function t(e,i){n.i(r.a)(this,t),this.name=e,this.type=i,this.sampleSize=1,this.reset()}return n.i(i.a)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=n.i(o.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(n.i(o.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}()},function(t,e,n){"use strict";(function(t){function n(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){var n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}e.a=n}).call(e,n(61))},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=Array.prototype,i=r.slice,o=r.map},function(t,e,n){"use strict";var r=n(93),i=n(356),o=n.i(i.a)(r.a),a=o.right;o.left;e.a=a},function(t,e,n){"use strict";function r(t){return function(e,r){return n.i(i.a)(t(e),r)}}var i=n(93);e.a=function(t){return 1===t.length&&(t=r(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}},function(t,e,n){"use strict";var r=n(365);e.a=function(t,e){var i=n.i(r.a)(t,e);return i?Math.sqrt(i):i}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.a=r},function(t,e,n){"use strict";e.a=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}},function(t,e,n){"use strict";e.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";function r(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,i);return i>=0?(u>=o?10:u>=a?5:u>=s?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(u>=o?10:u>=a?5:u>=s?2:1)}function i(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=o?i*=10:u>=a?i*=5:u>=s&&(i*=2),e<t?-i:i}e.c=r,e.a=i;var o=Math.sqrt(50),a=Math.sqrt(10),s=Math.sqrt(2);e.b=function(t,e,n){var i,o,a,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),0===(s=r(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(o=Math.ceil(e-t+1));++u<o;)a[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(o=Math.ceil(t-e+1));++u<o;)a[u]=(t-u)/s;return i&&a.reverse(),a}},function(t,e,n){"use strict";function r(t){return t.length}var i=n(359);e.a=function(t){if(!(s=t.length))return[];for(var e=-1,o=n.i(i.a)(t,r),a=new Array(o);++e<o;)for(var s,u=-1,l=a[e]=new Array(s);++u<s;)l[u]=t[u][e];return a}},function(t,e,n){"use strict";var r=n(113);e.a=function(t,e){var i,o,a=t.length,s=0,u=-1,l=0,c=0;if(null==e)for(;++u<a;)isNaN(i=n.i(r.a)(t[u]))||(o=i-l,l+=o/++s,c+=o*(i-l));else for(;++u<a;)isNaN(i=n.i(r.a)(e(t[u],u,t)))||(o=i-l,l+=o/++s,c+=o*(i-l));if(s>1)return c/(s-1)}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r=Math.PI/180,i=180/Math.PI},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r,i=n(213);e.b=function(t,e){var o=n.i(i.a)(t,e);if(!o)return t+"";var a=o[0],s=o[1],u=s-(r=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,l=a.length;return u===l?a:u>l?a+new Array(u-l+1).join("0"):u>0?a.slice(0,u)+"."+a.slice(u):"0."+new Array(1-u).join("0")+n.i(i.a)(t,Math.max(0,e+u-1))[0]}},function(t,e,n){"use strict";function r(t){if(!(e=o.exec(t)))throw new Error("invalid format: "+t);var e;return new i({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function i(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}e.a=r;var o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;r.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(t,e,n){"use strict";var r=n(1034);n.d(e,"f",function(){return r.a}),n.d(e,"c",function(){return r.b});var i=(n(370),n(368));n.d(e,"a",function(){return i.a});var o=n(1041);n.d(e,"e",function(){return o.a});var a=n(1042);n.d(e,"b",function(){return a.a});var s=n(1043);n.d(e,"d",function(){return s.a})},function(t,e,n){"use strict";var r=n(143),i=n(1035),o=n(1036),a=n(368),s=n(1038),u=n(1039),l=n(367),c=n(1040),h=Array.prototype.map,f=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];e.a=function(t){function e(t){function e(t){var e,a,u,c=T,v=C;if("c"===M)v=A(t)+v,t="";else{t=+t;var g=t<0||1/t<0;if(t=isNaN(t)?x:A(Math.abs(t),S),E&&(t=n.i(s.a)(t)),g&&0==+t&&"+"!==o&&(g=!1),c=(g?"("===o?o:b:"-"===o||"("===o?"":o)+c,v=("s"===M?f[8+l.a/3]:"")+v+(g&&"("===o?")":""),P)for(e=-1,a=t.length;++e<a;)if(48>(u=t.charCodeAt(e))||u>57){v=(46===u?m+t.slice(e+1):t.slice(e))+v,t=t.slice(0,e);break}}w&&!h&&(t=d(t,1/0));var _=c.length+t.length+v.length,k=_<p?new Array(p-_+1).join(r):"";switch(w&&h&&(t=d(k+t,k.length?p-v.length:1/0),k=""),i){case"<":t=c+t+v+k;break;case"=":t=c+k+t+v;break;case"^":t=k.slice(0,_=k.length>>1)+c+t+v+k.slice(_);break;default:t=k+c+t+v}return y(t)}t=n.i(a.a)(t);var r=t.fill,i=t.align,o=t.sign,c=t.symbol,h=t.zero,p=t.width,w=t.comma,S=t.precision,E=t.trim,M=t.type;"n"===M?(w=!0,M="g"):u.a[M]||(void 0===S&&(S=12),E=!0,M="g"),(h||"0"===r&&"="===i)&&(h=!0,r="0",i="=");var T="$"===c?v:"#"===c&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",C="$"===c?g:/[%p]/.test(M)?_:"",A=u.a[M],P=/[defgprs%]/.test(M);return S=void 0===S?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S)),e.toString=function(){return t+""},e}function p(t,i){var o=e((t=n.i(a.a)(t),t.type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(n.i(r.a)(i)/3))),u=Math.pow(10,-s),l=f[8+s/3];return function(t){return o(u*t)+l}}var d=void 0===t.grouping||void 0===t.thousands?c.a:n.i(i.a)(h.call(t.grouping,Number),t.thousands+""),v=void 0===t.currency?"":t.currency[0]+"",g=void 0===t.currency?"":t.currency[1]+"",m=void 0===t.decimal?".":t.decimal+"",y=void 0===t.numerals?c.a:n.i(o.a)(h.call(t.numerals,String)),_=void 0===t.percent?"%":t.percent+"",b=void 0===t.minus?"-":t.minus+"",x=void 0===t.nan?"NaN":t.nan+"";return{format:e,formatPrefix:p}}},function(t,e,n){"use strict";function r(t,e){var r,o=e?e.length:0,a=t?Math.min(o,t.length):0,s=new Array(a),u=new Array(o);for(r=0;r<a;++r)s[r]=n.i(i.a)(t[r],e[r]);for(;r<o;++r)u[r]=e[r];return function(t){for(r=0;r<a;++r)u[r]=s[r](t);return u}}e.a=r;var i=n(216),o=n(215);e.b=function(t,e){return(n.i(o.a)(e)?o.b:r)(t,e)}},function(t,e,n){"use strict";var r=n(214);e.a=function(t){var e=t.length;return function(i){var o=Math.floor(((i%=1)<0?++i:i)*e),a=t[(o+e-1)%e],s=t[o%e],u=t[(o+1)%e],l=t[(o+2)%e];return n.i(r.b)((i-o/e)*e,a,s,u,l)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}},function(t,e,n){"use strict";var r=n(216);n.d(e,"a",function(){return r.a});var i=n(371);n.d(e,"d",function(){return i.b});var o=(n(214),n(372),n(374),n(1047),n(1050),n(144));n.d(e,"b",function(){return o.a});var a=(n(215),n(376),n(1054));n.d(e,"c",function(){return a.a});n(378),n(1056),n(1058),n(377),n(1049),n(1051),n(1048),n(1046),n(1052),n(1053)},function(t,e,n){"use strict";var r=n(216);e.a=function(t,e){var i,o={},a={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(i in e)i in t?o[i]=n.i(r.a)(t[i],e[i]):a[i]=e[i];return function(t){for(i in o)a[i]=o[i](t);return a}}},function(t,e,n){"use strict";function r(t){return function(e){var r,o,a=e.length,s=new Array(a),u=new Array(a),l=new Array(a);for(r=0;r<a;++r)o=n.i(i.f)(e[r]),s[r]=o.r||0,u[r]=o.g||0,l[r]=o.b||0;return s=t(s),u=t(u),l=t(l),o.opacity=1,function(t){return o.r=s(t),o.g=u(t),o.b=l(t),o+""}}}var i=n(81),o=n(214),a=n(372),s=n(94);e.a=function t(e){function r(t,e){var r=o((t=n.i(i.f)(t)).r,(e=n.i(i.f)(e)).r),a=o(t.g,e.g),u=o(t.b,e.b),l=n.i(s.a)(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=a(e),t.b=u(e),t.opacity=l(e),t+""}}var o=n.i(s.c)(e);return r.gamma=t,r}(1);r(o.a),r(a.a)},function(t,e,n){"use strict";function r(t){return function(){return t}}function i(t){return function(e){return t(e)+""}}var o=n(144),a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(a.source,"g");e.a=function(t,e){var u,l,c,h=a.lastIndex=s.lastIndex=0,f=-1,p=[],d=[];for(t+="",e+="";(u=a.exec(t))&&(l=s.exec(e));)(c=l.index)>h&&(c=e.slice(h,c),p[f]?p[f]+=c:p[++f]=c),(u=u[0])===(l=l[0])?p[f]?p[f]+=l:p[++f]=l:(p[++f]=null,d.push({i:f,x:n.i(o.a)(u,l)})),h=s.lastIndex;return h<e.length&&(c=e.slice(h),p[f]?p[f]+=c:p[++f]=c),p.length<2?d[0]?i(d[0].x):r(e):(e=d.length,function(t){for(var n,r=0;r<e;++r)p[(n=d[r]).i]=n.x(t);return p.join("")})}},function(t,e,n){"use strict";e.a=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}},function(t,e,n){"use strict";e.a=function(t){return+t}},function(t,e,n){"use strict";function r(){function t(t){var n=t+"",r=e.get(n);if(!r){if(c!==s)return c;e.set(n,r=u.push(t))}return l[(r-1)%l.length]}var e=n.i(i.a)(),u=[],l=[],c=s;return t.domain=function(r){if(!arguments.length)return u.slice();u=[],e=n.i(i.a)();for(var o,a,s=-1,l=r.length;++s<l;)e.has(a=(o=r[s])+"")||e.set(a,u.push(o));return t},t.range=function(e){return arguments.length?(l=o.b.call(e),t):l.slice()},t.unknown=function(e){return arguments.length?(c=e,t):c},t.copy=function(){return r(u,l).unknown(c)},a.b.apply(t,arguments),t}e.a=r;var i=n(1012),o=n(82),a=n(29),s={name:"implicit"}},function(t,e,n){"use strict";function r(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}e.a=r;n(67),n(29),n(83),n(217),n(219),n(218)},function(t,e,n){"use strict";var r=n(44),i=n(369);e.a=function(t,e,o,a){var s,u=n.i(r.b)(t,e,o);switch(a=n.i(i.a)(null==a?",f":a),a.type){case"s":var l=Math.max(Math.abs(t),Math.abs(e));return null!=a.precision||isNaN(s=n.i(i.b)(u,l))||(a.precision=s),n.i(i.c)(a,l);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(s=n.i(i.d)(u,Math.max(Math.abs(t),Math.abs(e))))||(a.precision=s-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(s=n.i(i.e)(u))||(a.precision=s-2*("%"===a.type))}return n.i(i.f)(a)}},function(t,e,n){"use strict";function r(t){return new Date(t)}function i(t){return t instanceof Date?+t:+new Date(+t)}function o(t,e,s,u,h,b,x,w,S){function E(n){return(x(n)<n?P:b(n)<n?k:h(n)<n?I:u(n)<n?O:e(n)<n?s(n)<n?j:L:t(n)<n?D:R)(n)}function M(e,r,i,o){if(null==e&&(e=10),"number"==typeof e){var s=Math.abs(i-r)/e,u=n.i(a.g)(function(t){return t[2]}).right(B,s);u===B.length?(o=n.i(a.b)(r/_,i/_,e),e=t):u?(u=B[s/B[u-1][2]<B[u][2]/s?u-1:u],o=u[1],e=u[0]):(o=Math.max(n.i(a.b)(r,i,e),1),e=w)}return null==o?e:e.every(o)}var T=n.i(c.d)(c.a,c.a),C=T.invert,A=T.domain,P=S(".%L"),k=S(":%S"),I=S("%I:%M"),O=S("%I %p"),j=S("%a %d"),L=S("%b %d"),D=S("%B"),R=S("%Y"),B=[[x,1,p],[x,5,5*p],[x,15,15*p],[x,30,30*p],[b,1,d],[b,5,5*d],[b,15,15*d],[b,30,30*d],[h,1,v],[h,3,3*v],[h,6,6*v],[h,12,12*v],[u,1,g],[u,2,2*g],[s,1,m],[e,1,y],[e,3,3*y],[t,1,_]];return T.invert=function(t){return new Date(C(t))},T.domain=function(t){return arguments.length?A(l.a.call(t,i)):A().map(r)},T.ticks=function(t,e){var n,r=A(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=M(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},T.tickFormat=function(t,e){return null==e?E:S(e)},T.nice=function(t,e){var r=A();return(t=M(t,r[0],r[r.length-1],e))?A(n.i(f.a)(r,t)):T},T.copy=function(){return n.i(c.c)(T,o(t,e,s,u,h,b,x,w,S))},T}e.b=o;var a=n(44),s=n(221),u=n(385),l=n(82),c=n(67),h=n(29),f=n(379),p=1e3,d=60*p,v=60*d,g=24*v,m=7*g,y=30*g,_=365*g;e.a=function(){return h.b.apply(o(s.l,s.q,s.r,s.k,s.s,s.t,s.u,s.v,u.b).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},function(t,e,n){"use strict";var r=n(220);n.d(e,"b",function(){return r.c}),n.d(e,"a",function(){return r.a});n(387),n(386),n(1069)},function(t,e,n){"use strict";function r(t){return t.toISOString()}n.d(e,"a",function(){return o});var i=n(220),o="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||n.i(i.a)(o)},function(t,e,n){"use strict";function r(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function i(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function o(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function a(t){function e(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=vt[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function a(t,e){return function(a){var u,l,c=o(1900,void 0,1),h=s(c,t,a+="",0);if(h!=a.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(!e||"Z"in c||(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(u=i(o(c.y,0,1)),l=u.getUTCDay(),u=l>4||0===l?dt.i.ceil(u):n.i(dt.i)(u),u=dt.d.offset(u,7*(c.V-1)),c.y=u.getUTCFullYear(),c.m=u.getUTCMonth(),c.d=u.getUTCDate()+(c.w+6)%7):(u=r(o(c.y,0,1)),l=u.getDay(),u=l>4||0===l?dt.j.ceil(u):n.i(dt.j)(u),u=dt.k.offset(u,7*(c.V-1)),c.y=u.getFullYear(),c.m=u.getMonth(),c.d=u.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),l="Z"in c?i(o(c.y,0,1)).getUTCDay():r(o(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(l+5)%7:c.w+7*c.U-(l+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,i(c)):r(c)}}function s(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=ee[i in vt?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function u(t,e,n){var r=Gt.exec(e.slice(n));return r?(t.p=qt[r[0].toLowerCase()],n+r[0].length):-1}function gt(t,e,n){var r=Xt.exec(e.slice(n));return r?(t.w=Wt[r[0].toLowerCase()],n+r[0].length):-1}function mt(t,e,n){var r=Ht.exec(e.slice(n));return r?(t.w=Yt[r[0].toLowerCase()],n+r[0].length):-1}function yt(t,e,n){var r=Jt.exec(e.slice(n));return r?(t.m=Qt[r[0].toLowerCase()],n+r[0].length):-1}function _t(t,e,n){var r=Zt.exec(e.slice(n));return r?(t.m=Kt[r[0].toLowerCase()],n+r[0].length):-1}function bt(t,e,n){return s(t,Dt,e,n)}function xt(t,e,n){return s(t,Rt,e,n)}function wt(t,e,n){return s(t,Bt,e,n)}function St(t){return Nt[t.getDay()]}function Et(t){return Ft[t.getDay()]}function Mt(t){return Vt[t.getMonth()]}function Tt(t){return Ut[t.getMonth()]}function Ct(t){return zt[+(t.getHours()>=12)]}function At(t){return 1+~~(t.getMonth()/3)}function Pt(t){return Nt[t.getUTCDay()]}function kt(t){return Ft[t.getUTCDay()]}function It(t){return Vt[t.getUTCMonth()]}function Ot(t){return Ut[t.getUTCMonth()]}function jt(t){return zt[+(t.getUTCHours()>=12)]}function Lt(t){return 1+~~(t.getUTCMonth()/3)}var Dt=t.dateTime,Rt=t.date,Bt=t.time,zt=t.periods,Ft=t.days,Nt=t.shortDays,Ut=t.months,Vt=t.shortMonths,Gt=l(zt),qt=c(zt),Ht=l(Ft),Yt=c(Ft),Xt=l(Nt),Wt=c(Nt),Zt=l(Ut),Kt=c(Ut),Jt=l(Vt),Qt=c(Vt),$t={a:St,A:Et,b:Mt,B:Tt,c:null,d:I,e:I,f:R,H:O,I:j,j:L,L:D,m:B,M:z,p:Ct,q:At,Q:ft,s:pt,S:F,u:N,U:U,V:V,w:G,W:q,x:null,X:null,y:H,Y:Y,Z:X,"%":ht},te={a:Pt,A:kt,b:It,B:Ot,c:null,d:W,e:W,f:$,H:Z,I:K,j:J,L:Q,m:tt,M:et,p:jt,q:Lt,Q:ft,s:pt,S:nt,u:rt,U:it,V:ot,w:at,W:st,x:null,X:null,y:ut,Y:lt,Z:ct,"%":ht},ee={a:gt,A:mt,b:yt,B:_t,c:bt,d:x,e:x,f:C,H:S,I:S,j:w,L:T,m:b,M:E,p:u,q:_,Q:P,s:k,S:M,u:f,U:p,V:d,w:h,W:v,x:xt,X:wt,y:m,Y:g,Z:y,"%":A};return $t.x=e(Rt,$t),$t.X=e(Bt,$t),$t.c=e(Dt,$t),te.x=e(Rt,te),te.X=e(Bt,te),te.c=e(Dt,te),{format:function(t){var n=e(t+="",$t);return n.toString=function(){return t},n},parse:function(t){var e=a(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",te);return n.toString=function(){return t},n},utcParse:function(t){var e=a(t+="",!0);return e.toString=function(){return t},e}}}function s(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function u(t){return t.replace(yt,"\\$&")}function l(t){return new RegExp("^(?:"+t.map(u).join("|")+")","i")}function c(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function h(t,e,n){var r=gt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function f(t,e,n){var r=gt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function p(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function d(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function v(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function g(t,e,n){var r=gt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function m(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function y(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _(t,e,n){var r=gt.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function b(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function x(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function w(t,e,n){var r=gt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function S(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function E(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function M(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function T(t,e,n){var r=gt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function C(t,e,n){var r=gt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function A(t,e,n){var r=mt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function P(t,e,n){var r=gt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function k(t,e,n){var r=gt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function I(t,e){return s(t.getDate(),e,2)}function O(t,e){return s(t.getHours(),e,2)}function j(t,e){return s(t.getHours()%12||12,e,2)}function L(t,e){return s(1+dt.k.count(n.i(dt.l)(t),t),e,3)}function D(t,e){return s(t.getMilliseconds(),e,3)}function R(t,e){return D(t,e)+"000"}function B(t,e){return s(t.getMonth()+1,e,2)}function z(t,e){return s(t.getMinutes(),e,2)}function F(t,e){return s(t.getSeconds(),e,2)}function N(t){var e=t.getDay();return 0===e?7:e}function U(t,e){return s(dt.m.count(n.i(dt.l)(t)-1,t),e,2)}function V(t,e){var r=t.getDay();return t=r>=4||0===r?n.i(dt.n)(t):dt.n.ceil(t),s(dt.n.count(n.i(dt.l)(t),t)+(4===n.i(dt.l)(t).getDay()),e,2)}function G(t){return t.getDay()}function q(t,e){return s(dt.j.count(n.i(dt.l)(t)-1,t),e,2)}function H(t,e){return s(t.getFullYear()%100,e,2)}function Y(t,e){return s(t.getFullYear()%1e4,e,4)}function X(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function W(t,e){return s(t.getUTCDate(),e,2)}function Z(t,e){return s(t.getUTCHours(),e,2)}function K(t,e){return s(t.getUTCHours()%12||12,e,2)}function J(t,e){return s(1+dt.d.count(n.i(dt.a)(t),t),e,3)}function Q(t,e){return s(t.getUTCMilliseconds(),e,3)}function $(t,e){return Q(t,e)+"000"}function tt(t,e){return s(t.getUTCMonth()+1,e,2)}function et(t,e){return s(t.getUTCMinutes(),e,2)}function nt(t,e){return s(t.getUTCSeconds(),e,2)}function rt(t){var e=t.getUTCDay();return 0===e?7:e}function it(t,e){return s(dt.o.count(n.i(dt.a)(t)-1,t),e,2)}function ot(t,e){var r=t.getUTCDay();return t=r>=4||0===r?n.i(dt.p)(t):dt.p.ceil(t),s(dt.p.count(n.i(dt.a)(t),t)+(4===n.i(dt.a)(t).getUTCDay()),e,2)}function at(t){return t.getUTCDay()}function st(t,e){return s(dt.i.count(n.i(dt.a)(t)-1,t),e,2)}function ut(t,e){return s(t.getUTCFullYear()%100,e,2)}function lt(t,e){return s(t.getUTCFullYear()%1e4,e,4)}function ct(){return"+0000"}function ht(){return"%"}function ft(t){return+t}function pt(t){return Math.floor(+t/1e3)}e.a=a;var dt=n(221),vt={"-":"",_:" ",0:"0"},gt=/^\s*\d+/,mt=/^%/,yt=/[\\^$*+?|[\]().{}]/g},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r=e&&e.length,o=r?e[0]*n:t.length,s=i(t,0,o,n,!0),u=[];if(!s||s.next===s.prev)return u;var l,c,f,p,d,v,g;if(r&&(s=h(t,e,s,n)),t.length>80*n){l=f=t[0],c=p=t[1];for(var m=n;m<o;m+=n)d=t[m],v=t[m+1],d<l&&(l=d),v<c&&(c=v),d>f&&(f=d),v>p&&(p=v);g=Math.max(f-l,p-c),g=0!==g?1/g:0}return a(s,u,n,l,c,g),u}function i(t,e,n,r,i){var o,a;if(i===L(t,e,n,r)>0)for(o=e;o<n;o+=r)a=I(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=I(o,t[o],t[o+1],a);return a&&S(a,a.next)&&(O(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!S(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(O(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,h,f){if(t){!f&&h&&g(t,r,i,h);for(var p,d,v=t;t.prev!==t.next;)if(p=t.prev,d=t.next,h?u(t,r,i,h):s(t))e.push(p.i/n),e.push(t.i/n),e.push(d.i/n),O(t),t=d.next,v=d.next;else if((t=d)===v){f?1===f?(t=l(o(t),e,n),a(t,e,n,r,i,h,2)):2===f&&c(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(w(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(b(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&w(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(w(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=y(s,u,e,n,r),f=y(l,c,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!S(i,a)&&E(i,r,r.next,a)&&A(i,a)&&A(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),O(r),O(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function c(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&x(u,l)){var c=k(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s),void a(c,e,n,r,i,s)}l=l.next}u=u.next}while(u!==t)}function h(t,e,n,r){var a,s,u,l,c,h=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,l=a<s-1?e[a+1]*r:t.length,c=i(t,u,l,r,!1),c===c.next&&(c.steiner=!0),h.push(_(c));for(h.sort(f),a=0;a<h.length;a++)p(h[a],n),n=o(n,n.next);return n}function f(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var n=k(e,t);o(e,e.next),o(n,n.next)}}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&b(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),A(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&v(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}function v(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function g(t,e,n,r){var i=t;do{null===i.z&&(i.z=y(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return t}function y(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!C(t,e)&&(A(t,e)&&A(e,t)&&P(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||S(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function S(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,n,r){var i=T(w(t,e,n)),o=T(w(t,e,r)),a=T(w(n,r,t)),s=T(w(n,r,e));return i!==o&&a!==s||(!(0!==i||!M(t,n,e))||(!(0!==o||!M(t,r,e))||(!(0!==a||!M(n,t,r))||!(0!==s||!M(n,e,r)))))}function M(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function T(t){return t>0?1:t<0?-1:0}function C(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function A(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function P(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function k(t,e){var n=new j(t.i,t.x,t.y),r=new j(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function I(t,e,n,r){var i=new j(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function j(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(L(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(L(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";function r(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function i(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function o(t){return function(e,n,r){var i=r[t].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(e.month=i)}}function a(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}Object.defineProperty(e,"__esModule",{value:!0});var s={},u=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,l="\\d\\d?",c="\\d{3}",h="\\d{4}",f="[^\\s]+",p=/\[([^]*?)\]/gm,d=function(){},v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],m=i(g,3),y=i(v,3);s.i18n={dayNamesShort:y,dayNames:v,monthNamesShort:m,monthNames:g,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10)*t%10]}};var _={D:function(t){return t.getDate()},DD:function(t){return a(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return t.getDay()},dd:function(t){return a(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return a(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return a(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return a(t.getFullYear(),4)},h:function(t){return t.getHours()%12||12},hh:function(t){return a(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return a(t.getHours())},m:function(t){return t.getMinutes()},mm:function(t){return a(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return a(t.getSeconds())},S:function(t){return Math.round(t.getMilliseconds()/100)},SS:function(t){return a(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return a(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+a(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)}},b={D:[l,function(t,e){t.day=e}],Do:[l+f,function(t,e){t.day=parseInt(e,10)}],M:[l,function(t,e){t.month=e-1}],YY:[l,function(t,e){var n=new Date,r=+(""+n.getFullYear()).substr(0,2);t.year=""+(e>68?r-1:r)+e}],h:[l,function(t,e){t.hour=e}],m:[l,function(t,e){t.minute=e}],s:[l,function(t,e){t.second=e}],YYYY:[h,function(t,e){t.year=e}],S:["\\d",function(t,e){t.millisecond=100*e}],SS:["\\d{2}",function(t,e){t.millisecond=10*e}],SSS:[c,function(t,e){t.millisecond=e}],d:[l,d],ddd:[f,d],MMM:[f,o("monthNamesShort")],MMMM:[f,o("monthNames")],a:[f,function(t,e,n){var r=e.toLowerCase();r===n.amPm[0]?t.isPm=!1:r===n.amPm[1]&&(t.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(t,e){var n,r=(e+"").match(/([+-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),t.timezoneOffset="+"===r[0]?n:-n)}]};b.dd=b.d,b.dddd=b.ddd,b.DD=b.D,b.mm=b.m,b.hh=b.H=b.HH=b.h,b.MM=b.M,b.ss=b.s,b.A=b.a,s.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},s.format=function(t,e,n){var r=n||s.i18n;if("number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date in fecha.format");e=s.masks[e]||e||s.masks.default;var i=[];return e=e.replace(p,function(t,e){return i.push(e),"@@@"}),e=e.replace(u,function(e){return e in _?_[e](t,r):e.slice(1,e.length-1)}),e.replace(/@@@/g,function(){return i.shift()})},s.parse=function(t,e,n){var i=n||s.i18n;if("string"!=typeof e)throw new Error("Invalid format in fecha.parse");if(e=s.masks[e]||e,t.length>1e3)return null;var o={},a=[],l=[];e=e.replace(p,function(t,e){return l.push(e),"@@@"});var c=r(e).replace(u,function(t){if(b[t]){var e=b[t];return a.push(e[1]),"("+e[0]+")"}return t});c=c.replace(/@@@/g,function(){return l.shift()});var h=t.match(new RegExp(c,"i"));if(!h)return null;for(var f=1;f<h.length;f++)a[f-1](o,h[f],i);var d=new Date;!0===o.isPm&&null!=o.hour&&12!=+o.hour?o.hour=+o.hour+12:!1===o.isPm&&12==+o.hour&&(o.hour=0);var v;return null!=o.timezoneOffset?(o.minute=+(o.minute||0)-+o.timezoneOffset,v=new Date(Date.UTC(o.year||d.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0))):v=new Date(o.year||d.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0),v},e.default=s},function(t,e,n){"use strict";function r(){var t=new c.a(4);return c.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function i(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function o(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}function a(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}function s(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function u(t,e,n,r){var i,o,a,s,u,l=e[0],h=e[1],f=e[2],p=e[3],d=n[0],v=n[1],g=n[2],m=n[3];return o=l*d+h*v+f*g+p*m,o<0&&(o=-o,d=-d,v=-v,g=-g,m=-m),1-o>c.c?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*l+u*d,t[1]=s*h+u*v,t[2]=s*f+u*g,t[3]=s*p+u*m,t}function l(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}e.a=r,e.c=o,e.d=a,e.e=s,n.d(e,"b",function(){return d}),n.d(e,"f",function(){return v}),n.d(e,"g",function(){return g}),n.d(e,"h",function(){return m});var c=n(50),h=n(223),f=n(146),p=n(224),d=(p.clone,p.fromValues,p.copy),v=(p.set,p.add,p.scale,p.dot),g=(p.lerp,p.length),m=p.squaredLength,y=p.normalize;p.exactEquals,p.equals,function(){var t=f.create(),e=f.fromValues(1,0,0),n=f.fromValues(0,1,0)}(),function(){var t=r(),e=r()}(),function(){var t=h.a()}()},function(t,e,n){"use strict";function r(t){return function(e,n,r){if(void 0===t)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(e.name));var u=new a.Metadata(o.INJECT_TAG,t);"number"==typeof r?s.tagParameter(e,n,r,u):s.tagProperty(e,n,u)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o=n(20),a=n(45),s=n(69),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20),i=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20),i=n(84),o=n(45),a=n(1112),s=function(){function t(t,e,n,s){this.id=i.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var u=null;"string"==typeof s?u=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===r.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(225),i=n(226),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20),i=n(45),o=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||o(n,e))};e.traverseAncerstors=o;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new i.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(r.NAMED_TAG);e.namedConstraint=s;var u=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t){return n.serviceIdentifier===t}var r=e.bindings[0].implementationType;return t===r}return!1}};e.typeConstraint=u},function(t,e,n){"use strict";function r(t){return t instanceof RangeError||t.message===i.STACK_OVERFLOW}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34);e.isStackOverflowExeption=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(1200),o=n(1201),a=n(1202),s=n(1203),u=n(1204);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){var r=n(85),i=n(51),o=r(i,"Set");t.exports=o},function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=n(148),o=n(1213),a=n(1214),s=n(1215),u=n(1216),l=n(1217);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=l,t.exports=r},function(t,e,n){function r(t,e){var n=a(t),r=!n&&o(t),c=!n&&!r&&s(t),f=!n&&!r&&!c&&l(t),p=n||r||c||f,d=p?i(t.length,String):[],v=d.length;for(var g in t)!e&&!h.call(t,g)||p&&("length"==g||c&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,v))||d.push(g);return d}var i=n(1163),o=n(419),a=n(95),s=n(236),u=n(413),l=n(237),c=Object.prototype,h=c.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}t.exports=n},function(t,e,n){function r(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}var i=n(228),o=n(153);t.exports=r},function(t,e,n){function r(t,e,n){var r=t[e];s.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||i(t,e,n)}var i=n(228),o=n(153),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e,n){var r=e(t);return o(t)?r:i(r,n(t))}var i=n(401),o=n(95);t.exports=r},function(t,e,n){(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=l?l(n):new t.constructor(n);return t.copy(r),r}var i=n(51),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?i.Buffer:void 0,l=u?u.allocUnsafe:void 0;t.exports=r}).call(e,n(158)(t))},function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var i=n(230);t.exports=r},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e,n){var r=n(85),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(46))},function(t,e,n){var r=n(401),i=n(231),o=n(232),a=n(425),s=Object.getOwnPropertySymbols,u=s?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=u},function(t,e){function n(t){return c.test(t)}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\ufe0e\\ufe0f",l="\\u200d",c=RegExp("["+l+r+s+u+"]");t.exports=n},function(t,e,n){function r(t){return"function"!=typeof t.constructor||a(t)?{}:i(o(t))}var i=n(1145),o=n(231),a=n(234);t.exports=r},function(t,e){function n(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e){function n(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=n},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=n},function(t,e){function n(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,i=r.toString;t.exports=n},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){var r=n(1149),i=n(53),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e,n){function r(t){if(!a(t)||i(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var i=n(70),o=n(231),a=n(53),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=c.call(Object);t.exports=r},function(t,e,n){function r(t){return"string"==typeof t||!o(t)&&a(t)&&i(t)==s}var i=n(70),o=n(95),a=n(53),s="[object String]";t.exports=r},function(t,e,n){function r(t){return"symbol"==typeof t||o(t)&&i(t)==a}var i=n(70),o=n(53),a="[object Symbol]";t.exports=r},function(t,e,n){var r=n(1157),i=n(1174),o=i(function(t,e,n){r(t,e,n)});t.exports=o},function(t,e){function n(){return[]}t.exports=n},function(t,e,n){function r(t){return t&&t.length?i(t):[]}var i=n(1165);t.exports=r},function(t,e,n){var r=n(1176),i=r("toUpperCase");t.exports=i},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(t,e){for(var n,i,u=r(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)a.call(n,c)&&(u[c]=n[c]);if(o){i=o(n);for(var h=0;h<i.length;h++)s.call(n,i[h])&&(u[i[h]]=n[i[h]])}}return u}},function(t,e,n){"use strict";(function(t){function r(){}function i(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}function o(t){if(!t)return 0;var e;switch(n.i(c.a)(t)){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return n.i(b.a)(Number.isFinite(e)&&e>=0),e}function a(t){var e=t.logLevel,r=t.message;t.logLevel=o(e);for(var i=t.args?Array.from(t.args):[];i.length&&i.shift()!==r;);switch(t.args=i,n.i(c.a)(e)){case"string":case"function":void 0!==r&&i.unshift(r),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());var a=n.i(c.a)(t.message);return n.i(b.a)("string"===a||"object"===a),Object.assign(t,t.opts)}function s(t,e,r){if("string"==typeof e){var i=r.time?n.i(m.a)(n.i(m.b)(r.total)):"";e=r.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),e=n.i(y.a)(e,r.color,r.background)}return e}function u(e){var n=e.image,i=(e.message,e.scale),o=void 0===i?1:i,a=null;try{a=t.require("asciify-image")}catch(t){}return a?function(){return a(n,{fit:"box",width:"".concat(Math.round(80*o),"%")}).then(function(t){return console.log(t)})}:r}function l(t){var e=t.image,i=t.message,o=void 0===i?"":i,a=t.scale,s=void 0===a?1:a;if("string"==typeof e){var u=new Image;return u.onload=function(){var t,e=n.i(m.c)(u,o,s);(t=console).log.apply(t,n.i(h.a)(e))},u.src=e,r}var l=e.nodeName||"";if("img"===l.toLowerCase()){var c;return(c=console).log.apply(c,n.i(h.a)(n.i(m.c)(e,o,s))),r}if("canvas"===l.toLowerCase()){var f=new Image;return f.onload=function(){var t;return(t=console).log.apply(t,n.i(h.a)(n.i(m.c)(f,o,s)))},f.src=e.toDataURL(),r}return r}n.d(e,"a",function(){return T});var c=n(111),h=n(975),f=n(966),p=n(91),d=n(92),v=n(119),g=n(434),m=n(432),y=n(242),_=n(431),b=n(430),x=n(433),w={debug:v.a?console.debug||console.log:console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},S={enabled:!0,level:0},E={},M={once:!0},T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id;n.i(p.a)(this,t),this.id=r,this.VERSION=v.d,this._startTs=n.i(x.a)(),this._deltaTs=n.i(x.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new g.a("__probe-".concat(this.id,"__"),S),this.userData={},this.timeStamp("".concat(this.id," started")),n.i(_.a)(this),Object.seal(this)}return n.i(d.a)(t,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((n.i(x.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((n.i(x.a)()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({level:t}),this}},{key:"assert",value:function(t,e){n.i(b.a)(t,e)}},{key:"warn",value:function(t){return this._getLogFunction(0,t,w.warn,arguments,M)}},{key:"error",value:function(t){return this._getLogFunction(0,t,w.error,arguments)}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){return this._getLogFunction(t,e,w.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(t,e){return this._getLogFunction(t,e,w.debug,arguments)}},{key:"info",value:function(t,e){return this._getLogFunction(t,e,console.info,arguments)}},{key:"once",value:function(t,e){return this._getLogFunction(t,e,w.debug||w.info,arguments,M)}},{key:"table",value:function(t,e,n){return e?this._getLogFunction(t,e,console.table||r,n&&[n],{tag:i(e)}):r}},{key:"image",value:function(t){var e=t.logLevel,n=t.priority,i=t.image,o=t.message,a=void 0===o?"":o,s=t.scale,c=void 0===s?1:s;return this._shouldLog(e||n)?v.a?l({image:i,message:a,scale:c}):u({image:i,message:a,scale:c}):r}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(t){return this._storage.config[t]}},{key:"set",value:function(t,e){this._storage.updateConfiguration(n.i(f.a)({},t,e))}},{key:"time",value:function(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}},{key:"timeEnd",value:function(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(t,e){return this._getLogFunction(t,e,console.timeStamp||r)}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};n=a({logLevel:t,message:e,opts:n});var r=n,i=r.collapsed;return n.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction(t,"",console.groupEnd||r)}},{key:"withGroup",value:function(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return this.isEnabled()&&this.getLevel()>=o(t)}},{key:"_getLogFunction",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(t)){var l;u=a({logLevel:t,message:e,args:o,opts:u}),i=i||u.method,n.i(b.a)(i),u.total=this.getTotal(),u.delta=this.getDelta(),this._deltaTs=n.i(x.a)();var c=u.tag||u.message;if(u.once){if(E[c])return r;E[c]=n.i(x.a)()}return e=s(this.id,u.message,u),(l=i).bind.apply(l,[console,e].concat(n.i(h.a)(u.args)))}return r}},{key:"level",set:function(t){this.setLevel(t)},get:function(){return this.getLevel()}},{key:"priority",set:function(t){this.level=t},get:function(){return this.level}}]),t}();T.VERSION=v.d}).call(e,n(1257)(t))},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}e.a=r},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=!0,o=!1,a=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof t[n]&&(e.find(function(t){return n===t})||(t[n]=t[n].bind(t)))},l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}e.a=r},function(t,e,n){"use strict";function r(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return"".concat(" ".repeat(Math.max(e-t.length,0))).concat(t)}function o(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));var o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}e.b=r,e.a=i,e.c=o},function(t,e,n){"use strict";function r(){var t;if(i.a&&i.b.performance)t=i.b.performance.now();else if(i.c.hrtime){var e=i.c.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}e.a=r;var i=n(119)},function(t,e,n){"use strict";function r(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}n.d(e,"a",function(){return a});var i=n(91),o=n(92),a=function(){function t(e,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";n.i(i.a)(this,t),this.storage=r(a),this.id=e,this.config={},Object.assign(this.config,o),this._loadConfiguration()}return n.i(o.a)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}()},function(t,e,n){"use strict";function r(){}function i(t){try{return t.then}catch(t){return m=t,y}}function o(t,e){try{return t(e)}catch(t){return m=t,y}}function a(t,e,n){try{t(e,n)}catch(t){return m=t,y}}function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,t!==r&&v(t,this)}function u(t,e,n){return new t.constructor(function(i,o){var a=new s(r);a.then(i,o),l(t,new d(e,n,a))})}function l(t,e){for(;3===t._81;)t=t._65;if(s._10&&s._10(t),0===t._81)return 0===t._45?(t._45=1,void(t._54=e)):1===t._45?(t._45=2,void(t._54=[t._54,e])):void t._54.push(e);c(t,e)}function c(t,e){g(function(){var n=1===t._81?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._81?h(e.promise,t._65):f(e.promise,t._65));var r=o(n,t._65);r===y?f(e.promise,m):h(e.promise,r)})}function h(t,e){if(e===t)return f(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=i(e);if(n===y)return f(t,m);if(n===t.then&&e instanceof s)return t._81=3,t._65=e,void p(t);if("function"==typeof n)return void v(n.bind(e),t)}t._81=1,t._65=e,p(t)}function f(t,e){t._81=2,t._65=e,s._97&&s._97(t,e),p(t)}function p(t){if(1===t._45&&(l(t,t._54),t._54=null),2===t._45){for(var e=0;e<t._54.length;e++)l(t,t._54[e]);t._54=null}}function d(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function v(t,e){var n=!1,r=a(t,function(t){n||(n=!0,h(e,t))},function(t){n||(n=!0,f(e,t))});n||r!==y||(n=!0,f(e,m))}var g=n(992),m=null,y={};t.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(t,e){if(this.constructor!==s)return u(this,t,e);var n=new s(r);return l(this,new d(t,e,n)),n}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"viewport-mercator-project: assertion failed.")}e.a=r},function(t,e,n){"use strict";function r(t){var e=t.width,r=t.height,s=t.bounds,u=t.minExtent,l=void 0===u?0:u,c=t.maxZoom,h=void 0===c?24:c,f=t.padding,p=void 0===f?0:f,d=t.offset,v=void 0===d?[0,0]:d,g=n.i(i.a)(s,2),m=n.i(i.a)(g[0],2),y=m[0],_=m[1],b=n.i(i.a)(g[1],2),x=b[0],w=b[1];if(Number.isFinite(p)){var S=p;p={top:S,bottom:S,left:S,right:S}}else n.i(a.a)(Number.isFinite(p.top)&&Number.isFinite(p.bottom)&&Number.isFinite(p.left)&&Number.isFinite(p.right));var E=new o.a({width:e,height:r,longitude:0,latitude:0,zoom:0}),M=E.project([y,w]),T=E.project([x,_]),C=[Math.max(Math.abs(T[0]-M[0]),l),Math.max(Math.abs(T[1]-M[1]),l)],A=[e-p.left-p.right-2*Math.abs(v[0]),r-p.top-p.bottom-2*Math.abs(v[1])];n.i(a.a)(A[0]>0&&A[1]>0);var P=A[0]/C[0],k=A[1]/C[1],I=(p.right-p.left)/2/P,O=(p.bottom-p.top)/2/k,j=[(T[0]+M[0])/2+I,(T[1]+M[1])/2+O],L=E.unproject(j),D=E.zoom+Math.log2(Math.abs(Math.min(P,k)));return{longitude:L[0],latitude:L[1],zoom:Math.min(D,h)}}e.a=r;var i=n(205),o=n(121),a=n(436)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t){return t.sort(function(t,e){return e.countbystatedate-t.countbystatedate}),t}function o(t,e){return new h.b({container:t,autoFit:!0,height:500,padding:e})}function a(t,e,n,r){e.annotation().text({top:!0,center:!0,position:n,content:t,style:{fontSize:r,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"}})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(994),u=n.n(s),l=n(507),c=n.n(l),h=n(642),f=n(841),p=n(306),d=this,v=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.i(h.a)("label-appear",function(t,e,n){var r=t.getChildren()[0],i=n.coordinate,o=i.start.x,a=r.attr("x"),s=r.attr("text");r.attr("x",o),r.attr("text",0);var u=a-o;r.animate(function(t){return{x:o+u*t,text:(s*t).toFixed(0)}},e)}),n.i(h.a)("label-update",function(t,e,n){var r=t.attr("x"),i=t.attr("y"),o=n.toAttrs.x,a=n.toAttrs.y,s=t.attr("text"),u=n.toAttrs.text,l=o-r,c=a-i,h=+u-+s;t.animate(function(t){return{x:r+l*t,y:i+c*t,text:(+s+h*t).toFixed(0)}},e)});var g={"Asia and the Pacific":"#ABD0CE","Latin America and the Caribbean":"#F0E5DE","Europe and North America":"#F1BBBA","Arab States":"#7C7877",Africa:"#CBA6C3"},m={Cultural:"#ABD0CE",Mixed:"#7C7877",Natural:"#F1BBBA"};!function(){var t=r(u.a.mark(function t(){var e,n,r,s,l,y,_,b,x,w,S,E,M,T,C,A,P,k,I,O,j,L,D,R,B,z,F,N,U,V,G,q,H,Y,X,W,Z;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Z=function(){if(0==X){var t=s.createView().source(z.rows);t.transform({type:"filter",callback:function(t){return t.date_inscribed==S+X}}),Y.scale({gdp:{type:"log",max:1e6,min:1001,tickInterval:10,alias:"GDP"},count:{type:"log",max:1e6,min:50,alias:"Arrival Tourists Count (1000)"},states_name_en:{key:!0}}),Y.axis("gdp",{title:{style:{fill:"#8C8C8C",fontSize:14}}}),Y.axis("count",{title:{style:{fill:"#8C8C8C",fontSize:14}}}),Y.data(t.rows),Y.point().position("gdp*count").tooltip("states_name_en*countbystatedate").color("region_en",function(t){return g[t]}).size("countbystatedate").shape("circle").style({fillOpacity:.85}).animate({appear:!1,update:!1,enter:!1,leave:!1}),Y.legend({position:"bottom"}),Y.interaction("element-active"),Y.annotation().text({position:["80%","80%"],content:S,style:{fontSize:100,fill:"#999",textAlign:"center",fillOpacity:.3},top:!1,animate:!1}),Y.annotation().text({top:!0,center:!0,position:["12%","3%"],content:"Relation between Number of World Heritage, Arrival Tourists and GDP of a Nation",style:{fontSize:16,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"},animate:!1}),Y.render()}else if(X+S<2020){Y.annotation().clear(!0),Y.annotation().text({top:!0,center:!0,position:["12%","3%"],content:"Relation between Number of World Heritage, Arrival Tourists and GDP of a Nation",style:{fontSize:16,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"},animate:!1}),Y.annotation().text({position:["80%","80%"],content:S+X,style:{fontSize:100,fill:"#999",textAlign:"center",fillOpacity:.3},top:!1,animate:!1});var e=s.createView().source(z.rows);e.transform({type:"filter",callback:function(t){return t.date_inscribed===X+S}}),Y.changeData(e.rows)}X+S>2019&&(X=0),X+=1},H=function(){var t=s.createView().source(z.rows);if(t.transform({type:"filter",callback:function(t){return t.date_inscribed==q+U}}),t.transform({type:"filter",callback:function(t){return t.countbystate>4}}),0===U){V=new h.b({container:"motionyearcontainer",autoFit:!0,height:320,padding:[48,60]});Object.values(t.rows)[U];V.data(i(t.rows)),V.legend({position:"top"}),V.axis("states_name_en",{animateOption:{update:{duration:1e3,easing:"easeLinear"}}}),V.annotation().text({position:["95%","17%"],content:q+U,style:{fontSize:40,fontWeight:"bold",fill:"#ddd",textAlign:"top"}}),V.interval().position("states_name_en*countbystatedate").color("region_en",function(t){return g[t]}).label("countbystatedate",function(t){if(0!==t)return{animate:{appear:{animation:"label-appear",delay:0,duration:1e3,easing:"easeLinear"},update:{animation:"label-update",duration:1e3,easing:"easeLinear"}},offset:5}}).animate({appear:{duration:1e3,easing:"easeLinear"},update:{duration:1e3,easing:"easeLinear"}}),V.annotation().text({top:!0,center:!0,position:["18%","0%"],content:"Nations Inscribing More than 5 World Heritage Properties",style:{fontSize:16,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"},animate:!1}),V.render()}else V.annotation().clear(!0),V.annotation().text({position:["95%","17%"],content:U+q,style:{fontSize:40,fontWeight:"bold",fill:"#ddd",textAlign:"end"}}),V.annotation().text({top:!0,center:!0,position:["18%","0%"],content:"Nations Inscribing More than 5 World Heritage Properties",style:{fontSize:16,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"},animate:!1}),V.changeData(t.rows);++U+q===2020&&clearInterval(G)},M=function(){if(1==w){var t=s.createView().source(l.rows);t.transform({type:"filter",callback:function(t){return t.date_inscribed<S+w}}),x.data(t.rows),x.coordinate("polar",{radius:1,startAngle:-.2*Math.PI,endAngle:2*Math.PI}),x.axis("name_en",{label:!1,title:!1,line:!1,animate:!1}),x.point().adjust("jitter").position("name_en").color("region_en",function(t){return g[t]}).shape("circle").style({fillOpacity:.85}).animate({appear:!1,update:!1,enter:!1,leave:!1}),x.tooltip({shared:!0}),x.annotation().text({position:["49%","50%"],content:t.rows.length,style:{fontSize:80,fill:"#999",textAlign:"center",fillOpacity:.5},top:!1,animate:!1}),x.annotation().text({position:["80%","80%"],content:S,style:{fontSize:60,fill:"#999",textAlign:"center",fillOpacity:.3},top:!1,animate:!1}),x.annotation().text({top:!0,center:!0,position:["5%","0%"],content:"Number of World Heritage properties inscribed each year by region",style:{fontSize:12,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"},animate:!1}),x.render()}else if(w+S<2020){var e=s.createView().source(l.rows);e.transform({type:"filter",callback:function(t){return t.date_inscribed<S+w}}),x.annotation().clear(!0),x.annotation().text({top:!0,center:!0,position:["5%","0%"],content:"Number of World Heritage properties inscribed each year by region",style:{fontSize:12,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"},animate:!1}),x.annotation().text({position:["49%","50%"],content:e.rows.length,style:{fontSize:80,fill:"#999",textAlign:"center",fillOpacity:.5},top:!1,animate:!1}),x.annotation().text({position:["80%","80%"],content:S+w,style:{fontSize:60,fill:"#999",textAlign:"center",fillOpacity:.3},top:!1,animate:!1}),x.changeData(e.rows)}(w+=1)+S===2020&&(w=2)},t.next=5,Promise.all([fetch("https://raw.githubusercontent.com/pengx12/res/master/worldheritage.csv").then(function(t){return t.text()})]);case 5:for(e=t.sent,n=v(e,1),r=n[0],s=new c.a,l=s.createView().source(r,{type:"csv"}),l.transform({type:"map",callback:function(t){return"string"==typeof t.date_inscribed&&(t.date_inscribed=t.date_inscribed.replace(",","")),t.date_inscribed=parseInt(t.date_inscribed,10),t.countbyregion=parseInt(t.countbyregion,10),t.countbycatdate=parseInt(t.countbycatdate,10),t.gdp=parseInt(t.gdp,10),t.count=parseInt(t.count,10),t.count=t.count/1e3,t.countbystate=parseInt(t.countbystate,10),t.countbystatedate=parseInt(t.countbystatedate,10),t}}),y=s.createView().source(l.rows),y.transform({type:"aggregate",fields:["category"],operations:["count"],as:["region_num"],groupBy:["region_en","category"]}),y.transform({type:"pick",fields:["region_en","category","countbyregion"]}),y.transform({type:"sort-by",fields:["countbyregion"],order:"DESC"}),y.transform({type:"percent",field:"countbyregion",dimension:"region_en",as:"percent"}),_=o("regioncontainer",[10,20]),b=_.createView(),b.data(y.rows),b.interval().adjust("stack").position("percent").color("region_en",function(t){return g[t]}).label("region_en",{type:"pie"}),b.coordinate("theta",{radius:1}),b.tooltip("region_en*percent",function(t,e){return e=(100*e).toFixed(2)+"%",{name:t,value:e}}),a("Number of World Heritage properties by region",_,["14%","0%"],12),_.interaction("element-active"),_.render(),x=o("regioncontainervar",[10,20]),w=1,S=1978,E=void 0,M(),E=setInterval(M,2e3),T=new h.b({container:"regioncatcontainer",autoFit:!0,height:500,padding:[60,40]}),C={"Strongly Agree":"#3561A7",Agree:"#80B2D3","No Opinion":"#D9F0F6",Disagree:"#EC7743","Strongly Disagree":"#CB2920"},A=T.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}}}),A.coordinate("rect").transpose(),P=s.createView().source(l.rows),P.transform({type:"map",callback:function(t){return t.catregion=t.region_en+" ("+t.category+")",t}}),P.transform({type:"aggregate",fields:["category"],operations:["count"],as:["region_num"],groupBy:["catregion","region_en"]}),P.transform({type:"percent",field:"region_num",dimension:"catregion",groupBy:["region_en"],as:"percent"}),P.transform({type:"sort-by",fields:["region_num"],order:"DESC"}),A.data(P.rows),A.scale("value",{nice:!0}),A.interval().position("region_en*percent").color("category",function(t){return m[t]}).adjust("stack").tooltip("category*region_num"),A.axis("value",{position:"right",title:null,tickLine:null,labelOffset:30,formatter:function(t){return t+"%"}}),A.scale({percent:{min:0,formatter:function(t){return(100*t).toFixed(2)+"%"}}}),A.interaction("active-region"),A.legend(),k=T.createView({region:{start:{x:0,y:0},end:{x:.2,y:1}}}),P.transform({type:"aggregate",fields:["region_num"],operations:["sum"],as:["catnum"],groupBy:["category"]}),k.data(P.rows),k.interval().position("catnum").color("category",function(t){return m[t]}).adjust("stack").tooltip(),T.annotation().text({top:!0,center:!0,position:["17%","0%"],content:"Proportion of World Heritage properties in Different Regions: Cultural, Natural and Mixed",style:{fontSize:16,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"}}),k.annotation().text({top:!0,center:!0,position:["80%","8%"],content:"Whole World Heritage Properties Categories",style:{fill:"rgba(0,0,0,0.4)"}}),T.interaction("active-region"),T.render(),I=new h.b({container:"yearcontainer",autoFit:!0,height:500,padding:[20,20]}),I.tooltip({showCrosshairs:!0}),I.removeInteraction("tooltip"),O=s.createView().source(l.rows),O.transform({type:"aggregate",fields:["name_en"],operations:["count"],as:["year_num"],groupBy:["date_inscribed","category_short","category"]}),O.transform({type:"fill-rows",groupBy:["date_inscribed"],orderBy:["category_short","category"],fillBy:"order"}),O.transform({type:"map",callback:function(t){return"string"==typeof t.date_inscribed&&(t.date_inscribed=t.date_inscribed.replace(",","")),isNaN(t.year_num)&&(t.year_num=0),t.date_inscribed=parseInt(t.date_inscribed,10),"C"==t.category_short&&(t.cultureyear=t.year_num,t.natureyear=0,t.mixyear=0),"N"==t.category_short&&(t.cultureyear=0,t.natureyear=t.year_num,t.mixyear=0),"C/N"==t.category_short&&(t.cultureyear=0,t.natureyear=0,t.mixyear=t.year_num),t.year_sum=t.year_num,t}}),O.transform({type:"sort-by",fields:["date_inscribed"],order:"ASC"}),j=1;j<O.rows.length;j++)O.rows[j].cultureyear=O.rows[j-1].cultureyear+O.rows[j].cultureyear,O.rows[j].natureyear=O.rows[j-1].natureyear+O.rows[j].natureyear,O.rows[j].mixyear=O.rows[j-1].mixyear+O.rows[j].mixyear,"C"==O.rows[j].category_short&&(O.rows[j].year_sum=O.rows[j].cultureyear),"N"==O.rows[j].category_short&&(O.rows[j].year_sum=O.rows[j].natureyear),"C/N"==O.rows[j].category_short&&(O.rows[j].year_sum=O.rows[j].mixyear),O.rows[j].stackyear=O.rows[j].cultureyear+O.rows[j].natureyear+O.rows[j].mixyear;L=I.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}}}),L.data(O.rows),L.interval().position("date_inscribed*year_sum").color("category",function(t){return m[t]}),L.interaction("tooltip"),L.interaction("sibling-tooltip"),D=I.createView({region:{start:{x:0,y:.6},end:{x:1,y:1}}}),D.data(O.rows),D.line().position("date_inscribed*year_num").color("category",function(t){return m[t]}),D.axis("Year",{subTickLine:{count:3,length:3},tickLine:{length:6}}),D.interaction("tooltip"),D.interaction("sibling-tooltip"),I.legend({position:"top"}),L.annotation().text({top:!0,center:!0,position:[1986,850],content:"Number of World Heritage properties inscribed each Year: Cultural, Natural and Mixed",style:{fontSize:12,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"}}),D.annotation().text({top:!0,center:!0,position:[1986,52],content:"Increasing Rate of World Heritage properties inscribed each Year: Cultural, Natural and Mixed",style:{fontSize:12,fontWeight:"normal",fill:"rgba(0,0,0,0.45)"}}),I.render(),R=new f.Scene({id:"map",map:new p.a({pitch:6,style:"light",zoom:1.8})}),B=new f.PointLayer({}).source(r,{parser:{type:"csv",x:"longitude",y:"latitude"}}).shape("circle").active(!0).animate(!0).size(16).color("category",function(t){return m[t]}),B.on("mousemove",function(t){var e=new f.Popup({offsets:[0,0],closeButton:!1}).setLnglat(t.lngLat).setHTML("<span>"+t.feature.name_en+"\n\n "+t.feature.category+"</span>");R.addPopup(e)}),R.addLayer(B),z=s.createView().source(l.rows),z.transform({type:"fill-rows",groupBy:["date_inscribed"],orderBy:["states_name_en","region_en"],fillBy:"order"}),z.transform({type:"sort-by",fields:["states_name_en","date_inscribed"],order:"ASC"}),F=1;case 87:if(!(F<z.rows.length)){t.next=99;break}if(N=z.rows[F],N.states_name_en==z.rows[F-1].states_name_en){t.next=91;break}return t.abrupt("continue",96);case 91:isNaN(N.countbystatedate)&&(N.countbystatedate=z.rows[F-1].countbystatedate),isNaN(N.gdp)&&(N.gdp=z.rows[F-1].gdp),isNaN(N.count)&&(N.count=z.rows[F-1].count),isNaN(N.countbystate)&&(N.countbystate=z.rows[F-1].countbystate),isNaN(N.region_en)&&(N.region_en=z.rows[F-1].region_en);case 96:F++,t.next=87;break;case 99:z.transform({type:"map",callback:function(t){return t.countbystatedatesize=1e3*t.countbystatedate,t}}),U=0,V=void 0,G=void 0,q=1978,H(),G=setInterval(H,1200),Y=new h.b({container:"motionnationcontainer",autoFit:!0,height:420,padding:[66,80]}),X=0,S=1978,W=void 0,Z(),W=setInterval(Z,1200);case 112:case"end":return t.stop()}},t,d)}));return function(){return t.apply(this,arguments)}}()()},function(t,e,n){"use strict";"undefined"==typeof Promise&&(n(1243).enable(),window.Promise=n(1242)),n(1259),Object.assign=n(428)},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(159),a=n(86),s=function(t){function e(e){var n=t.call(this,e)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=e.marginRatio,i=void 0===r?o.c:r,a=e.dodgeRatio,s=void 0===a?o.d:a,u=e.dodgeBy;return n.marginRatio=i,n.dodgeRatio=s,n.dodgeBy=u,n}return n.i(r.__extends)(e,t),e.prototype.process=function(t){var e=i.clone(t),n=i.flatten(e),r=this.dodgeBy,o=r?i.group(n,r):e;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=n,this.adjustData(o,n),this.adjustDataArray=[],this.mergeData=[],e},e.prototype.adjustDim=function(t,e,n,r){var o=this,a=this.getDistribution(t),s=this.groupData(n,t);return i.each(s,function(n,s){var u;u=1===e.length?{pre:e[0]-1,next:e[0]+1}:o.getAdjustRange(t,parseFloat(s),e),i.each(n,function(e){var n=e[t],i=a[n],s=i.indexOf(r);e[t]=o.getDodgeOffset(u,s,i.length)})}),[]},e.prototype.getDodgeOffset=function(t,e,n){var r=this,i=r.dodgeRatio,o=r.marginRatio,a=t.pre,s=t.next,u=s-a,l=u*i/n,c=o*l;return(a+s)/2+(.5*(u-n*l-(n-1)*c)+((e+1)*l+e*c)-.5*l-.5*u)},e.prototype.getDistribution=function(t){var e=this.adjustDataArray,n=this.cacheMap,r=n[t];return r||(r={},i.each(e,function(e,n){var o=i.valuesOfKey(e,t);o.length||o.push(0),i.each(o,function(t){r[t]||(r[t]=[]),r[t].push(n)})}),n[t]=r),r},e}(a.a);e.a=s},function(t,e,n){"use strict";function r(t,e){return(e-t)*Math.random()+t}var i=n(1),o=n(0),a=n(159),s=n(86),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(i.__extends)(e,t),e.prototype.process=function(t){var e=o.clone(t),n=o.flatten(e);return this.adjustData(e,n),e},e.prototype.adjustDim=function(t,e,n){var r=this,i=this.groupData(n,t);return o.each(i,function(n,i){return r.adjustGroup(n,t,parseFloat(i),e)})},e.prototype.getAdjustOffset=function(t){var e=t.pre,n=t.next,i=(n-e)*a.b;return r(e+i,n-i)},e.prototype.adjustGroup=function(t,e,n,r){var i=this,a=this.getAdjustRange(e,n,r);return o.each(t,function(t){t[e]=i.getAdjustOffset(a)}),t},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(86),a=i.Cache,s=function(t){function e(e){var n=t.call(this,e)||this,r=e.adjustNames,i=void 0===r?["y"]:r,o=e.height,a=void 0===o?NaN:o,s=e.size,u=void 0===s?10:s,l=e.reverseOrder,c=void 0!==l&&l;return n.adjustNames=i,n.height=a,n.size=u,n.reverseOrder=c,n}return n.i(r.__extends)(e,t),e.prototype.process=function(t){var e=this,n=e.yField,r=e.reverseOrder,i=n?this.processStack(t):this.processOneDimStack(t);return r?this.reverse(i):i},e.prototype.reverse=function(t){return t.slice(0).reverse()},e.prototype.processStack=function(t){var e=this,o=e.xField,s=e.yField,u=e.reverseOrder,l=u?this.reverse(t):t,c=new a,h=new a;return l.map(function(t){return t.map(function(t){var e,a=i.get(t,o,0),u=i.get(t,s),l=a.toString();if(u=i.isArray(u)?u[1]:u,!i.isNil(u)){var f=u>=0?c:h;f.has(l)||f.set(l,0);var p=f.get(l),d=u+p;return f.set(l,d),n.i(r.__assign)(n.i(r.__assign)({},t),(e={},e[s]=[p,d],e))}return t})})},e.prototype.processOneDimStack=function(t){var e=this,i=this,o=i.xField,s=i.height,u=i.reverseOrder,l=u?this.reverse(t):t,c=new a;return l.map(function(t){return t.map(function(t){var i,a=e.size,u=t[o],l=2*a/s;c.has(u)||c.set(u,l/2);var h=c.get(u);return c.set(u,h+l),n.i(r.__assign)(n.i(r.__assign)({},t),(i={},i.y=h,i))})})},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(86),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.process=function(t){var e=i.flatten(t),o=this,a=o.xField,s=o.yField,u=this.getXValuesMaxMap(e),l=Math.max.apply(Math,Object.keys(u).map(function(t){return u[t]}));return i.map(t,function(t){return i.map(t,function(t){var e,o,c=t[s],h=t[a];if(i.isArray(c)){var f=(l-u[h])/2;return n.i(r.__assign)(n.i(r.__assign)({},t),(e={},e[s]=i.map(c,function(t){return f+t}),e))}var p=(l-c)/2;return n.i(r.__assign)(n.i(r.__assign)({},t),(o={},o[s]=[p,c+p],o))})})},e.prototype.getXValuesMaxMap=function(t){var e=this,n=this,r=n.xField,o=n.yField,a=i.groupBy(t,function(t){return t[r]});return i.mapValues(a,function(t){return e.getDimMaxValue(t,o)})},e.prototype.getDimMaxValue=function(t,e){var n=i.map(t,function(t){return i.get(t,e,[])}),r=i.flatten(n);return Math.max.apply(Math,r)},e}(o.a);e.a=a},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=(n(86),{}),i=function(t){return r[t.toLowerCase()]},o=function(t,e){if(i(t))throw new Error("Adjust type '"+t+"' existed.");r[t.toLowerCase()]=e}},function(t,e,n){"use strict";var r=n(444),i=(n(86),n(440)),o=n(441),a=n(442),s=n(443);n.d(e,"a",function(){return r.b}),n.i(r.a)("Dodge",i.a),n.i(r.a)("Jitter",o.a),n.i(r.a)("Stack",a.a),n.i(r.a)("Symmetric",s.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(447),o=function(){function t(t){var e=t.xField,n=t.yField,r=t.adjustNames,i=void 0===r?["x","y"]:r;this.adjustNames=i,this.xField=e,this.yField=n}return t.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},t.prototype.getAdjustRange=function(t,e,n){var r,i,o=this.yField,a=n.indexOf(e),s=n.length;return!o&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===a?0:a-1],i=n[a===s-1?s-1:a+1],0!==a?r+=(e-r)/2:r-=(i-e)/2,a!==s-1?i-=(i-e)/2:i+=(e-n[s-2])/2):(r=0===e?0:e-.5,i=0===e?1:e+.5),{pre:r,next:i}},t.prototype.adjustData=function(t,e){var n=this,i=this.getDimValues(e);r.each(t,function(t,e){r.each(i,function(r,i){n.adjustDim(i,r,t,e)})})},t.prototype.groupData=function(t,e){return r.each(t,function(t){void 0===t[e]&&(t[e]=i.DEFAULT_Y)}),r.groupBy(t,e)},t.prototype.adjustDim=function(t,e,n,r){},t.prototype.getDimValues=function(t){var e=this,n=e.xField,o=e.yField,a={},s=[];if(n&&this.isAdjust("x")&&s.push(n),o&&this.isAdjust("y")&&s.push(o),s.forEach(function(e){a[e]=r.valuesOfKey(t,e).sort(function(t,e){return t-e})}),!o&&this.isAdjust("y")){a["y"]=[i.DEFAULT_Y,1]}return a},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_Y=0,e.MARGIN_RATIO=.5,e.DODGE_RATIO=.5,e.GAP=.05},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(446);e.Adjust=r.default;var i={},o=function(t){return i[t.toLowerCase()]};e.getAdjust=o;var a=function(t,e){if(o(t))throw new Error("Adjust type '"+t+"' existed.");i[t.toLowerCase()]=e};e.registerAdjust=a},function(t,e,n){"use strict";var r=n(1),i=n(161),o=n(0),a=n(71),s=function(t){function e(e){var r=t.call(this,e)||this;return r.type="color",r.names=["color"],n.i(o.isString)(r.values)&&(r.linear=!0),r.gradient=i.a.gradient(r.values),r}return n.i(r.__extends)(e,t),e.prototype.getLinearValue=function(t){return this.gradient(t)},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(71),o=function(t){function e(e){var n=t.call(this,e)||this;return n.type="opacity",n.names=["opacity"],n}return n.i(r.__extends)(e,t),e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(71),a=function(t){function e(e){var n=t.call(this,e)||this;return n.names=["x","y"],n.type="position",n}return n.i(r.__extends)(e,t),e.prototype.mapping=function(t,e){var r=this.scales,o=r[0],a=r[1];return n.i(i.isNil)(t)||n.i(i.isNil)(e)?[]:[n.i(i.isArray)(t)?t.map(function(t){return o.scale(t)}):o.scale(t),n.i(i.isArray)(e)?e.map(function(t){return a.scale(t)}):a.scale(e)]},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(71),o=function(t){function e(e){var n=t.call(this,e)||this;return n.type="shape",n.names=["shape"],n}return n.i(r.__extends)(e,t),e.prototype.getLinearValue=function(t){var e=Math.round((this.values.length-1)*t);return this.values[e]},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(71),o=function(t){function e(e){var n=t.call(this,e)||this;return n.type="size",n.names=["size"],n}return n.i(r.__extends)(e,t),e}(i.a);e.a=o},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=(n(71),n(245),{}),i=function(t){return r[t.toLowerCase()]},o=function(t,e){if(i(t))throw new Error("Attribute type '"+t+"' existed.");r[t.toLowerCase()]=e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t,e){return r.isString(e)?e:t.invert(t.scale(e))},o=function(){function t(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return t.prototype.mapping=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map(function(e,n){return t._toOriginParam(e,t.scales[n])});return this.callback.apply(this,r)},t.prototype.getLinearValue=function(t){var e=this.values.length-1,n=Math.floor(e*t),r=e*t-n,i=this.values[n];return i+((n===e?i:this.values[n+1])-i)*r},t.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),r=[],i=0;i<n;i+=1)r.push(e[i]);return r},t.prototype.getFields=function(){return this.scales.map(function(t){return t.field})},t.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},t.prototype.defaultCallback=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this.values:e.map(function(e,n){var r=t.scales[n];return"identity"===r.type?r.values[0]:t._getAttributeValue(r,e)})},t.prototype._parseCfg=function(t){var e=this,n=t.type,i=void 0===n?"base":n,o=t.names,a=void 0===o?[]:o,s=t.scales,u=void 0===s?[]:s,l=t.values,c=void 0===l?[]:l,h=t.callback;this.type=i,this.scales=u,this.values=c,this.names=a,this.callback=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(h){var i=h.apply(void 0,t);if(!r.isNil(i))return[i]}return e.defaultCallback.apply(e,t)}},t.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var n=t.translate(e);return this.values[n%this.values.length]}var r=t.scale(e);return this.getLinearValue(r)},t.prototype._toOriginParam=function(t,e){return e.isLinear?t:r.isArray(t)?t.map(function(t){return i(e,t)}):i(e,t)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(455);e.Attribute=i.default;var o={},a=function(t){return o[t.toLowerCase()]};e.getAttribute=a;var s=function(t,e){if(a(t))throw new Error("Attribute type '"+t+"' existed.");o[t.toLowerCase()]=e};e.registerAttribute=s,r.__exportStar(n(457),e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(134);e.Scale=r.Scale},function(t,e,n){"use strict";var r=n(1),i=n(21),o=n(26),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},e.prototype.renderInner=function(t){this.renderArc(t)},e.prototype.getArcPath=function(){var t=this.getLocation(),e=t.center,r=t.radius,i=t.startAngle,a=t.endAngle,s=n.i(o.k)(e,r,i),u=n.i(o.k)(e,r,a),l=a-i>Math.PI?1:0,c=[["M",s.x,s.y]];if(a-i==2*Math.PI){var h=n.i(o.k)(e,r,i+Math.PI);c.push(["A",r,r,0,l,1,h.x,h.y]),c.push(["A",r,r,0,l,1,u.x,u.y])}else c.push(["A",r,r,0,l,1,u.x,u.y]);return c},e.prototype.renderArc=function(t){var e=this.getArcPath(),i=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:n.i(r.__assign)({path:e},i)})},e}(i.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(21),a=n(30),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:a.a.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:a.a.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:a.a.fontFamily}}}})},e.prototype.renderInner=function(t){n.i(i.get)(this.get("line"),"display")&&this.renderLine(t),n.i(i.get)(this.get("text"),"display")&&this.renderText(t),n.i(i.get)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},e.prototype.renderPoint=function(t){var e=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:e})},e.prototype.renderLine=function(t){var e=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:e})},e.prototype.renderText=function(t){var e=this.getShapeAttrs().text;this.addShape(t,{type:"text",id:this.getElementId("text"),name:"annotation-text",attrs:e})},e.prototype.autoAdjust=function(t){var e=this.get("direction"),r=this.get("x"),o=this.get("y"),a=n.i(i.get)(this.get("line"),"length",0),s=this.get("coordinateBBox"),u=t.getBBox(),l=u.minX,c=u.maxX,h=u.minY,f=u.maxY,p=t.findById(this.getElementId("text")),d=t.findById(this.getElementId("line"));if(s&&(p&&(r+l<=s.minX&&p.attr("textAlign","start"),r+c>=s.maxX&&p.attr("textAlign","end")),"upward"===e&&o+h<=s.minY||"upward"!==e&&o+f>=s.maxY)){var v=void 0,g=void 0;"upward"===e&&o+h<=s.minY?(v="top",g=1):(v="bottom",g=-1),p.attr("textBaseline",v),d&&d.attr("path",[["M",0,0],["L",0,a*g]]),p.attr("y",(a+2)*g)}},e.prototype.getShapeAttrs=function(){var t=n.i(i.get)(this.get("line"),"display"),e=n.i(i.get)(this.get("point"),"style",{}),o=n.i(i.get)(this.get("line"),"style",{}),a=n.i(i.get)(this.get("text"),"style",{}),s=this.get("direction"),u=t?n.i(i.get)(this.get("line"),"length",0):0,l="upward"===s?-1:1;return{point:n.i(r.__assign)({x:0,y:0},e),line:n.i(r.__assign)({path:[["M",0,0],["L",0,u*l]]},o),text:n.i(r.__assign)({x:0,y:(u+2)*l,text:n.i(i.get)(this.get("text"),"content",""),textBaseline:"upward"===s?"bottom":"top"},a)}},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(21),a=n(30),s=n(26),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:a.a.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:a.a.textColor,fontFamily:a.a.fontFamily}}}})},e.prototype.renderInner=function(t){var e=n.i(i.get)(this.get("region"),"style",{}),o=n.i(i.get)(this.get("text"),"style",{}),a=this.get("lineLength")||0,u=this.get("points");if(u.length){var l=n.i(s.l)(u),c=[];c.push(["M",u[0].x,l.minY-a]),u.forEach(function(t){c.push(["L",t.x,t.y])}),c.push(["L",u[u.length-1].x,u[u.length-1].y-a]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:n.i(r.__assign)({path:c},e)}),this.addShape(t,{type:"text",id:this.getElementId("text"),name:"annotation-text",attrs:n.i(r.__assign)({x:(l.minX+l.maxX)/2,y:l.minY-a,text:n.i(i.get)(this.get("text"),"content","")},o)})}},e}(o.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(21),o=n(26),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},e.prototype.renderInner=function(t){this.renderImage(t)},e.prototype.getImageAttrs=function(){var t=this.get("start"),e=this.get("end"),i=this.get("style"),a=n.i(o.c)({start:t,end:e}),s=this.get("src");return n.i(r.__assign)({x:a.x,y:a.y,img:s,width:a.width,height:a.height},i)},e.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},e}(i.a);e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(463);n.d(e,"Line",function(){return r.a});var i=n(466);n.d(e,"Text",function(){return i.a});var o=n(458);n.d(e,"Arc",function(){return o.a});var a=n(465);n.d(e,"Region",function(){return a.a});var s=n(461);n.d(e,"Image",function(){return s.a});var u=n(459);n.d(e,"DataMarker",function(){return u.a});var l=n(460);n.d(e,"DataRegion",function(){return l.a});var c=n(464);n.d(e,"RegionFilter",function(){return c.a})},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(21),a=n(72),s=n(30),u=n(26),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:s.a.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:s.a.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:s.a.lineColor,lineWidth:1}}}})},e.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},e.prototype.renderLine=function(t){var e=this.get("start"),i=this.get("end"),o=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:n.i(r.__assign)({x1:e.x,y1:e.y,x2:i.x,y2:i.y},o)})},e.prototype.getLabelPoint=function(t,e,r){var o;return o="start"===r?0:"center"===r?.5:n.i(i.isString)(r)&&-1!==r.indexOf("%")?parseInt(r,10)/100:n.i(i.isNumber)(r)?r:1,(o>1||o<0)&&(o=1),{x:n.i(u.i)(t.x,e.x,o),y:n.i(u.i)(t.y,e.y,o)}},e.prototype.renderLabel=function(t){var e=this.get("text"),i=this.get("start"),o=this.get("end"),s=e.position,u=e.content,l=e.style,c=e.offsetX,h=e.offsetY,f=e.autoRotate,p=this.getLabelPoint(i,o,s),d=n.i(r.__assign)({x:p.x+c,y:p.y+h,text:u},l);if(f){var v=[o.x-i.x,o.y-i.y],g=Math.atan2(v[1],v[0]),m=n.i(a.c)(p,g);d.matrix=m}this.addShape(t,{type:"text",id:this.getElementId("line-text"),name:"annotation-line-text",attrs:d})},e}(o.a);e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(21),a=n(26),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},e.prototype.renderInner=function(t){var e=this,r=this.get("start"),o=this.get("end"),s=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});n.i(i.each)(this.get("shapes"),function(t,r){var o=t.get("type"),a=n.i(i.clone)(t.attr());e.adjustShapeAttrs(a),e.addShape(s,{id:e.getElementId("shape-"+o+"-"+r),capture:!1,type:o,attrs:a})});var u=n.i(a.c)({start:r,end:o});s.setClip({type:"rect",attrs:{x:u.minX,y:u.minY,width:u.width,height:u.height}})},e.prototype.adjustShapeAttrs=function(t){var e=this.get("color");t.fill&&(t.fill=t.fillStyle=e),t.stroke=t.strokeStyle=e},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(21),o=n(30),a=n(26),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:o.a.regionColor,opacity:.4}}})},e.prototype.renderInner=function(t){this.renderRegion(t)},e.prototype.renderRegion=function(t){var e=this.get("start"),i=this.get("end"),o=this.get("style"),s=n.i(a.c)({start:e,end:i});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:n.i(r.__assign)({x:s.x,y:s.y,width:s.width,height:s.height},o)})},e}(i.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(21),o=n(72),a=n(30),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},defaultCfg:{style:{fill:a.a.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:a.a.fontFamily}}})},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.renderInner=function(t){this.renderText(t)},e.prototype.renderText=function(t){var e=this.getLocation(),i=e.x,o=e.y,a=this.get("content"),s=this.get("style"),u=this.addShape(t,{type:"text",id:this.getElementId("text"),name:"annotation-text",attrs:n.i(r.__assign)({x:i,y:o,text:a},s)});this.applyRotate(u,i,o)},e.prototype.applyRotate=function(t,e,r){var i=this.get("rotate"),a=null;i&&(a=n.i(o.c)({x:e,y:r},i)),t.attr("matrix",a)},e.prototype.resetLocation=function(){var t=this.getElementByLocalId("text");if(t){var e=this.getLocation(),n=e.x,r=e.y;t.attr({x:n,y:r}),this.applyRotate(t,n,r)}},e}(i.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(164),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getLinePath=function(){var t=this.get("center"),e=t.x,n=t.y,r=this.get("radius"),i=r,o=this.get("startAngle"),a=this.get("endAngle"),s=[];if(Math.abs(a-o)===2*Math.PI)s=[["M",e,n-i],["A",r,i,0,1,1,e,n+i],["A",r,i,0,1,1,e,n-i],["Z"]];else{var u=this.getCirclePoint(o),l=this.getCirclePoint(a),c=Math.abs(a-o)>Math.PI?1:0,h=o>a?0:1;s=[["M",e,n],["L",u.x,u.y],["A",r,i,0,c,h,l.x,l.y],["L",e,n]]}return s},e.prototype.getTickPoint=function(t){var e=this.get("startAngle"),n=this.get("endAngle"),r=e+(n-e)*t;return this.getCirclePoint(r)},e.prototype.getSideVector=function(t,e){var n=this.get("center"),r=[e.x-n.x,e.y-n.y],o=this.get("verticalFactor"),a=i.c.length(r);return i.c.scale(r,r,o*t/a),r},e.prototype.getAxisVector=function(t){var e=this.get("center"),n=[t.x-e.x,t.y-e.y];return[n[1],-1*n[0]]},e.prototype.getCirclePoint=function(t,e){var n=this.get("center");return e=e||this.get("radius"),{x:n.x+Math.cos(t)*e,y:n.y+Math.sin(t)*e}},e}(o.a);e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(469);n.d(e,"Line",function(){return r.a});var i=n(467);n.d(e,"Circle",function(){return i.a});var o=n(164);n.d(e,"Base",function(){return o.a})},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(0),a=n(164),s=n(473),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getLinePath=function(){var t=this.get("start"),e=this.get("end"),n=[];return n.push(["M",t.x,t.y]),n.push(["L",e.x,e.y]),n},e.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),n=this.get("end"),r=t.prototype.getInnerLayoutBBox.call(this),i=Math.min(e.x,n.x,r.x),o=Math.min(e.y,n.y,r.y),a=Math.max(e.x,n.x,r.maxX),s=Math.max(e.y,n.y,r.maxY);return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:s,width:a-i,height:s-o}},e.prototype.isVertical=function(){var t=this.get("start"),e=this.get("end");return n.i(o.isNumberEqual)(t.x,e.x)},e.prototype.isHorizontal=function(){var t=this.get("start"),e=this.get("end");return n.i(o.isNumberEqual)(t.y,e.y)},e.prototype.getTickPoint=function(t){var e=this,n=e.get("start"),r=e.get("end"),i=r.x-n.x,o=r.y-n.y;return{x:n.x+i*t,y:n.y+o*t}},e.prototype.getSideVector=function(t){var e=this.getAxisVector(),n=i.c.normalize([],e),r=this.get("verticalFactor"),o=[n[1],-1*n[0]];return i.c.scale([],o,t*r)},e.prototype.getAxisVector=function(){var t=this.get("start"),e=this.get("end");return[e.x-t.x,e.y-t.y]},e.prototype.processOverlap=function(t){var e=this,r=this.isVertical(),i=this.isHorizontal();if(r||i){var a=this.get("label"),s=this.get("title"),u=this.get("verticalLimitLength"),l=a.offset,c=u,h=0,f=0;s&&(h=s.style.fontSize,f=s.spacing),c&&(c=c-l-f-h);var p=this.get("overlapOrder");if(n.i(o.each)(p,function(n){a[n]&&e.autoProcessOverlap(n,a[n],t,c)}),s){var d=t.getBBox(),v=r?d.width:d.height;s.offset=l+v+f+h/2}}},e.prototype.autoProcessOverlap=function(t,e,r,i){var a=this,u=this.isVertical(),l=!1,c=s[t];if(!0===e?l=c.getDefault()(u,r,i):n.i(o.isFunction)(e)?l=e(u,r,i):c[e]&&(l=c[e](u,r,i)),"autoRotate"===t){if(l){var h=r.getChildren(),f=this.get("verticalFactor");n.i(o.each)(h,function(t){if("center"===t.attr("textAlign")){var e=f>0?"end":"start";t.attr("textAlign",e)}})}}else if("autoHide"===t){var p=r.getChildren().slice(0);n.i(o.each)(p,function(t){t.get("visible")||(a.get("isRegister")&&a.unregisterElement(t),t.remove())})}},e}(a.a);e.a=u},function(t,e,n){"use strict";function r(t){for(var e=0,n=0;n<t.length;n++)e+=i(t,n);return e}function i(t,e){return t.charCodeAt(e)>0&&t.charCodeAt(e)<128?1:2}function o(t,e){var n=e.getCanvasBBox();return t?n.width:n.height}function a(t,e,n,i){var a=e.attr("text"),u=o(t,e),l=r(a),c=!1;if(n<u){var h=Math.floor(n/u*l)-v,f=void 0;f=h>=0?s(a,h,i):d,f&&(e.attr("text",f),c=!0)}return c?e.set("tip",a):e.set("tip",null),c}function s(t,e,n){var r=t.length,o="";if("tail"===n){for(var a=0,s=0;a<e;){var u=i(t,s);if(!(a+u<=e))break;o+=t[s],a+=i(t,s),s++}o+=d}else if("head"===n){for(var a=0,s=r-1;a<e;){var u=i(t,s);if(!(a+u<=e))break;o+=t[s],a+=i(t,s),s--}o=d+o}else{for(var l="",c="",a=0,h=0,f=r-1;a<e;){var p=i(t,h),v=!1;p+a<=e&&(l+=t[h],h++,a+=p,v=!0);var g=i(t,f);if(g+a<=e&&(c=t[f]+c,a+=g,f--,v=!0),!v)break}o=l+d+c}return o}function u(t,e,r,i){var o=e.getChildren(),s=!1;return n.i(p.each)(o,function(e){var n=a(t,e,r,i);s=s||n}),s}function l(){return h}function c(t,e,n){return u(t,e,n,"head")}function h(t,e,n){return u(t,e,n,"tail")}function f(t,e,n){return u(t,e,n,"middle")}Object.defineProperty(e,"__esModule",{value:!0}),e.getDefault=l,e.ellipsisHead=c,e.ellipsisTail=h,e.ellipsisMiddle=f;var p=n(0),d="",v=2},function(t,e,n){"use strict";function r(t){var e=t.attr("matrix");return e&&1!==e[0]}function i(t,e,n,r,i){void 0===i&&(i=!1);var o=!1;if(t)o=Math.abs(n.y-r.y)<n.height;else if(e){var a=i?r.height:n.height;o=Math.abs(n.x-r.x)<a}else{var s=i?r.width:n.width;o=Math.abs(n.x-r.x)<s}return o}function o(t,e,n){var o=e.getChildren().slice();if(!o.length)return!1;var a=!1;n&&o.reverse();for(var s=o.length,u=o[0],l=r(u),c=u.getBBox(),h=1;h<s;h++){var f=o[h],p=f.getBBox();i(t,l,c,p,n)?(f.hide(),a=!0):c=p}return a}function a(){return c}function s(t,e){return o(t,e,!1)}function u(t,e){return o(t,e,!0)}function l(t,e){var n=e.getChildren().slice();if(n.length<=2)return!1;for(var o=!1,a=n.length,s=n[0],u=n[a-1],l=r(s),c=s.getBBox(),h=s,f=1;f<a-1;f++){var p=n[f],d=p.getBBox();i(t,l,c,d)?(p.hide(),o=!0):(c=d,h=p)}return i(t,l,c,u.getBBox())&&(h.hide(),o=!0),o}function c(t,e){var i=e.getChildren().slice();if(i.length<2)return!1;var o=!1,a=i[0],s=a.getBBox(),u=i[1],l=r(a),c=i.length,f=0;if(t){var p=Math.abs(u.attr("y")-a.attr("y"));f=s.height/p}else if(l){var p=Math.abs(u.attr("x")-a.attr("x"));f=s.width/p}else{var d=n.i(h.a)(i),p=Math.abs(u.attr("x")-a.attr("x"));f=d/p}if(f>1){f=Math.ceil(f);for(var v=0;v<c;v++)v%f!=0&&(i[v].hide(),o=!0)}return o}Object.defineProperty(e,"__esModule",{value:!0}),e.getDefault=a,e.reserveFirst=s,e.reserveLast=u,e.reserveBoth=l,e.equidistance=c;var h=n(248)},function(t,e,n){"use strict";function r(t,e){n.i(u.each)(t,function(t){var r=t.attr("x"),i=t.attr("y"),o=n.i(c.c)({x:r,y:i},e);t.attr("matrix",o)})}function i(t,e,i,o){var a=e.getChildren();if(!a.length)return!1;if(!t&&a.length<2)return!1;var s=n.i(l.a)(a),u=!1;if(t)u=!!i&&s>i;else{u=s>Math.abs(a[1].attr("x")-a[0].attr("x"))}if(u){r(a,o(i,s))}return u}function o(){return a}function a(t,e,n){return i(t,e,n,function(){return t?h.a.verticalAxisRotate:h.a.horizontalAxisRotate})}function s(t,e,n){return i(t,e,n,function(e,n){if(!e)return t?h.a.verticalAxisRotate:h.a.horizontalAxisRotate;if(t)return-Math.acos(e/n);var r=0;return e>n?r=Math.PI/4:(r=Math.asin(e/n))>Math.PI/4&&(r=Math.PI/4),r})}Object.defineProperty(e,"__esModule",{value:!0}),e.getDefault=o,e.fixedAngle=a,e.unfixedAngle=s;var u=n(0),l=n(248),c=n(72),h=n(30)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(470),i=n(471),o=n(472);n.d(e,"autoHide",function(){return i}),n.d(e,"autoRotate",function(){return o}),n.d(e,"autoEllipsis",function(){return r})},function(t,e,n){"use strict";var r=n(1),i=n(26),o=n(165),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.startAngle,n=t.endAngle;return"start"===this.get("text").position?e+Math.PI/2:n-Math.PI/2},e.prototype.getTextPoint=function(){var t=this.get("text"),e=t.position,r=t.offset,o=this.getLocation(),a=o.center,s=o.radius,u=o.startAngle,l=o.endAngle,c="start"===e?u:l,h=this.getRotateAngle()-Math.PI,f=n.i(i.k)(a,s,c),p=Math.cos(h)*r,d=Math.sin(h)*r;return{x:f.x+p,y:f.y+d}},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.center,r=t.radius,o=t.startAngle,a=t.endAngle,s=null;if(a-o==2*Math.PI){var u=e.x,l=e.y;s=[["M",u,l-r],["A",r,r,0,1,1,u,l+r],["A",r,r,0,1,1,u,l-r],["Z"]]}else{var c=n.i(i.k)(e,r,o),h=n.i(i.k)(e,r,a),f=Math.abs(a-o)>Math.PI?1:0,p=o>a?0:1;s=[["M",c.x,c.y],["A",r,r,0,f,p,h.x,h.y]]}return s},e}(o.a);e.a=a},function(t,e,n){"use strict";var r,i=n(30),o=n(246);e.a=(r={},r[""+o.a]={position:"relative"},r[""+o.b]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},r[""+o.c]={position:"absolute",color:i.a.textColor,fontFamily:i.a.fontFamily},r)},function(t,e,n){"use strict";var r=n(1),i=n(97),o=n(0),a=n(26),s=n(163),u=n(246),l=n(475),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+u.a+'"></div>',crosshairTpl:'<div class="'+u.b+'"></div>',textTpl:'<span class="'+u.c+'">{content}</span>',domStyles:null,containerClassName:u.a,defaultStyles:l.a,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},e.prototype.render=function(){this.resetText(),this.resetPosition()},e.prototype.initCrossHair=function(){var t=this.getContainer(),e=this.get("crosshairTpl"),r=n.i(i.c)(e);t.appendChild(r),this.applyStyle(u.b,r),this.set("crosshairEl",r)},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,r=t.end,i=this.get("text"),o=i.position,s=i.offset;return n.i(a.j)(e,r,o,s)},e.prototype.resetText=function(){var t=this.get("text"),e=this.get("textEl");if(t){var r=t.content;if(!e){var a=this.getContainer(),s=n.i(o.substitute)(this.get("textTpl"),t);e=n.i(i.c)(s),a.appendChild(e),this.applyStyle(u.c,e),this.set("textEl",e)}e.innerHTML=r}else e&&e.remove()},e.prototype.isVertical=function(t,e){return t.x===e.x},e.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var e=this.get("start"),r=this.get("end"),o=Math.min(e.x,r.x),s=Math.min(e.y,r.y);this.isVertical(e,r)?n.i(i.b)(t,{width:"1px",height:n.i(a.d)(Math.abs(r.y-e.y))}):n.i(i.b)(t,{height:"1px",width:n.i(a.d)(Math.abs(r.x-e.x))}),n.i(i.b)(t,{top:n.i(a.d)(s),left:n.i(a.d)(o)}),this.alignText()},e.prototype.alignText=function(){var t=this.get("textEl");if(t){var e=this.get("text").align,r=t.clientWidth,o=this.getTextPoint();switch(e){case"center":o.x=o.x-r/2;break;case"right":o.x=o.x-r}n.i(i.b)(t,{top:n.i(a.d)(o.y),left:n.i(a.d)(o.x)})}},e.prototype.updateInner=function(e){n.i(o.hasKey)(e,"text")&&this.resetText(),t.prototype.updateInner.call(this,e)},e}(s.a);e.a=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(478);n.d(e,"Line",function(){return r.a});var i=n(474);n.d(e,"Circle",function(){return i.a});var o=n(165);n.d(e,"Base",function(){return o.a});var a=n(476);n.d(e,"Html",function(){return a.a})},function(t,e,n){"use strict";var r=n(1),i=n(26),o=n(165),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text").position,i=Math.atan2(n.y-e.y,n.x-e.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,r=t.end,o=this.get("text"),a=o.position,s=o.offset;return n.i(i.j)(e,r,a,s)},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.start,n=t.end;return[["M",e.x,e.y],["L",n.x,n.y]]},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t,e,n,r){var i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}var i=n(1),o=n(0),a=n(166),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(i.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(i.__assign)(n.i(i.__assign)({},e),{type:"circle",center:null,closed:!0})},e.prototype.getGridPath=function(t,e){var i=this.getLineType(),a=this.get("closed"),s=[];if(t.length)if("circle"===i){var u=this.get("center"),l=t[0],c=r(u.x,u.y,l.x,l.y),h=e?0:1;a?(s.push(["M",u.x,u.y-c]),s.push(["A",c,c,0,0,h,u.x,u.y+c]),s.push(["A",c,c,0,0,h,u.x,u.y-c]),s.push(["Z"])):n.i(o.each)(t,function(t,e){0===e?s.push(["M",t.x,t.y]):s.push(["A",c,c,0,0,h,t.x,t.y])})}else n.i(o.each)(t,function(t,e){0===e?s.push(["M",t.x,t.y]):s.push(["L",t.x,t.y])}),a&&s.push(["Z"]);return s},e}(a.a);e.a=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(166);n.d(e,"Base",function(){return r.a});var i=n(479);n.d(e,"Circle",function(){return i.a});var o=n(481);n.d(e,"Line",function(){return o.a})},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(166),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{type:"line"})},e.prototype.getGridPath=function(t){var e=[];return n.i(i.each)(t,function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])}),e},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(462),i=n(468),o=n(477),a=n(480),s=n(485),u=n(494);n(162),n(21),n(163);n.d(e,"a",function(){return i}),n.d(e,"f",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"g",function(){return o});var l=n(490);n.d(e,"e",function(){return l.a});n(486)},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(72),a=n(249),s=n(30),u=n(167),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e.onNavigationAfter=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"legend",type:"category",itemSpacing:24,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:s.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:s.a.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:s.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:s.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:s.a.uncheckedColor},markerStyle:{fill:s.a.uncheckedColor,stroke:s.a.uncheckedColor}},inactive:{nameStyle:{fill:s.a.uncheckedColor},markerStyle:{opacity:.2}}}}})},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("items")},e.prototype.setItems=function(t){this.update({items:t})},e.prototype.updateItem=function(t,e){n.i(i.mix)(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n;var r=this.getElementByLocalId("item-"+t.id);if(r){var i=this.getItems(),o=i.indexOf(t),a=this.createOffScreenGroup(),s=this.drawItem(t,o,this.getItemHeight(),a);this.updateElements(s,r),this.clearUpdateStatus(r)}},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("itemStates"),r=[];return n.i(i.each)(e,function(e,n){t[n]&&r.push(n)}),r},e.prototype.clearItemsState=function(t){var e=this,r=this.getItemsByState(t);n.i(i.each)(r,function(n){e.setItemState(n,t,!1)})},e.prototype.getItemsByState=function(t){var e=this,r=this.getItems();return n.i(i.filter)(r,function(n){return e.hasState(n,t)})},e.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},e.prototype.processItems=function(){var t=this.get("items");n.i(i.each)(t,function(t){t.id||(t.id=t.name)})},e.prototype.drawItems=function(t){var e=this,r=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),o=this.addGroup(r,{id:this.getElementId("item-group"),name:"legend-item-group"}),a=this.getItemHeight(),s=this.get("itemWidth"),u=this.get("itemSpacing"),l=this.get("currentPoint"),c=l.x,h=l.y,f=this.get("layout"),p=this.get("items"),d=!1,v=0,g=this.get("maxWidth"),m=this.get("maxHeight");n.i(i.each)(p,function(t,n){var r=e.drawItem(t,n,a,o),i=r.getBBox(),p=s||i.width;p>v&&(v=p),"horizontal"===f?(g&&g<l.x+p-c&&(d=!0,l.x=c,l.y+=a),e.moveElementTo(r,l),l.x+=p+u):(m&&m<l.y+a-h&&(d=!0,l.x+=v+u,l.y=h,v=0),e.moveElementTo(r,l),l.y+=a)}),d&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=c,this.startY=h,this.adjustNavigation(t,o))},e.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var e=this.get("itemName");e&&(t=e.style.fontSize+8)}return t},e.prototype.drawMarker=function(t,e,o,a){var s=n.i(r.__assign)(n.i(r.__assign)(n.i(r.__assign)({x:0,y:a/2},e.style),{symbol:n.i(i.get)(o.marker,"symbol","circle")}),n.i(i.get)(o.marker,"style",{})),u=this.addShape(t,{type:"marker",id:this.getElementId("item-"+o.id+"-marker"),name:"legend-item-marker",attrs:s}),l=u.getBBox();u.attr("x",l.width/2);var c=u.attr(),h=c.stroke,f=c.fill;return h&&u.set("isStroke",!0),f&&u.set("isFill",!0),u},e.prototype.drawItemText=function(t,e,i,o,a,s,u){var l=i.formatter,c=n.i(r.__assign)({x:s,y:a/2,text:l?l(o[e],o,u):o[e]},i.style);return this.addShape(t,{type:"text",id:this.getElementId("item-"+o.id+"-"+e),name:"legend-item-"+e,attrs:c})},e.prototype.drawItem=function(t,e,i,o){var a="item-"+t.id,s=this.addGroup(o,{name:"legend-item",id:this.getElementId(a),delegateObject:{item:t,index:e}}),u=this.get("marker"),l=this.get("itemName"),c=this.get("itemValue"),h=this.get("itemBackground"),f=0;if(u){f=this.drawMarker(s,u,t,i).getBBox().maxX+u.spacing}if(l){f=this.drawItemText(s,"name",l,t,i,f,e).getBBox().maxX+l.spacing}if(c){var p=this.drawItemText(s,"value",c,t,i,f,e),d=this.get("itemWidth");d&&c.alignRight&&p.attr({textAlign:"right",x:d})}if(h){var v=s.getBBox();this.addShape(s,{type:"rect",name:"legend-item-background",id:this.getElementId(a+"-background"),attrs:n.i(r.__assign)({x:0,y:0,width:v.width,height:i},h.style)}).toBack()}return this.applyItemStates(t,s),s},e.prototype.adjustNavigation=function(t,e){var r=this,o=this.startX,a=this.startY,s=this.get("layout"),u=e.findAll(function(t){return"legend-item"===t.get("name")}),l=this.get("maxWidth"),c=this.get("maxHeight"),h=this.get("itemWidth"),f=this.get("itemSpacing"),p=this.getItemHeight(),d=this.drawNavigation(t,s,"00/00",12),v=d.getBBox(),g={x:o,y:a},m=1,y=0,_=0,b=0;if("horizontal"===s)this.pageHeight=p,n.i(i.each)(u,function(t){var e=t.getBBox(),n=h||e.width;(y&&y<g.x+n+f||l<g.x+n+f+v.width)&&(1===m&&(y=g.x+f,r.pageWidth=y,r.moveElementTo(d,{x:l-f-v.width-v.minX,y:g.y+p/2-v.height/2-v.minY})),m+=1,g.x=o,g.y+=p),r.moveElementTo(t,g),g.x+=n+f});else{n.i(i.each)(u,function(t){var e=t.getBBox();e.width>_&&(_=e.width)}),b=_,_+=f,l&&(_=Math.min(l,_),b=Math.min(l,b)),this.pageWidth=_,this.pageHeight=c-Math.max(v.height,p);var x=Math.floor(this.pageHeight/p);n.i(i.each)(u,function(t,e){0!==e&&e%x==0&&(m+=1,g.x+=_,g.y=a),r.moveElementTo(t,g),g.y+=p}),this.totalPagesCnt=m,this.moveElementTo(d,{x:o+b/2-v.width/2-v.minX,y:c-v.height-v.minY})}this.pageHeight&&this.pageWidth&&e.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=m,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(d),e.attr("matrix",this.getCurrentNavigationMatrix())},e.prototype.drawNavigation=function(t,e,n,r){var i={x:0,y:0},o=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),a=this.drawArrow(o,i,"navigation-arrow-left","horizontal"===e?"up":"left",r);a.on("click",this.onNavigationBack);var s=a.getBBox();i.x+=s.width+2;var u=this.addShape(o,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:i.x,y:i.y+r/2,text:n,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),l=u.getBBox();return i.x+=l.width+2,this.drawArrow(o,i,"navigation-arrow-right","horizontal"===e?"down":"right",r).on("click",this.onNavigationAfter),o},e.prototype.updateNavigation=function(t){var e=this.currentPageIndex+"/"+this.totalPagesCnt,n=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),r=t?t.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),i=t?t.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),o=n.getBBox();n.attr("text",e);var a=n.getBBox();n.attr("x",n.attr("x")-(a.width-o.width)/2),r.attr("opacity",1===this.currentPageIndex?.45:1),r.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),i.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),i.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},e.prototype.drawArrow=function(t,e,r,i,a){var s=e.x,u=e.y,l={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},c=this.addShape(t,{type:"path",id:this.getElementId(r),name:r,attrs:{path:[["M",s+a/2,u],["L",s,u+a],["L",s+a,u+a],["Z"]],fill:"#000",cursor:"pointer"}});return c.attr("matrix",n.i(o.c)({x:s+a/2,y:u+a/2},l[i])),c},e.prototype.getCurrentNavigationMatrix=function(){var t=this,e=t.currentPageIndex,r=t.pageWidth,i=t.pageHeight,a=this.get("layout"),s="horizontal"===a?{x:0,y:i*(1-e)}:{x:r*(1-e),y:0};return n.i(o.b)(s)},e.prototype.applyItemStates=function(t,e){if(this.getItemStates(t).length>0){var r=e.getChildren(),o=this.get("itemStates");n.i(i.each)(r,function(e){var r=e.get("name"),i=r.split("-")[2],s=n.i(a.a)(t,i,o);s&&(e.attr(s),"marker"!==i||e.get("isStroke")&&e.get("isFill")||(e.get("isStroke")&&e.attr("fill",null),e.get("isFill")&&e.attr("stroke",null)))})}},e}(u.a);e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(30),a=n(26),s=n(167),u=1.4,l=.4,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:o.a.textColor,textBaseline:"middle",fontFamily:o.a.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:o.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},e.prototype.isSlider=function(){return!0},e.prototype.getValue=function(){return this.getCurrentValue()},e.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},e.prototype.setRange=function(t,e){this.update({min:t,max:e})},e.prototype.setValue=function(t){var e=this.getValue();this.set("value",t);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:e,value:t})},e.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},e.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},e.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},e.prototype.bindHandlersEvent=function(t){var e=this;t.on("legend-handler-min:drag",function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue(),i=r[1];i<n&&(i=n),e.setValue([n,i])}),t.on("legend-handler-max:drag",function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue(),i=r[0];i>n&&(i=n),e.setValue([i,n])})},e.prototype.bindRailEvent=function(t){},e.prototype.bindTrackEvent=function(t){var e=this,n=null;t.on("legend-track:dragstart",function(t){n={x:t.x,y:t.y}}),t.on("legend-track:drag",function(t){if(n){var r=e.getValueByCanvasPoint(n.x,n.y),i=e.getValueByCanvasPoint(t.x,t.y),o=e.getCurrentValue(),a=o[1]-o[0],s=e.getRange(),u=i-r;u<0?o[0]+u>s.min?e.setValue([o[0]+u,o[1]+u]):e.setValue([s.min,s.min+a]):u>0&&(u>0&&o[1]+u<s.max?e.setValue([o[0]+u,o[1]+u]):e.setValue([s.max-a,s.max])),n={x:t.x,y:t.y}}}),t.on("legend-track:dragend",function(t){n=null})},e.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},e.prototype.drawLabel=function(t,e){var i=this.get("label"),o=i.style,a=i.align,s=this.get(t),u=this.getLabelAlignAttrs(t,a),l="label-"+t;this.addShape(e,{type:"text",id:this.getElementId(l),name:"legend-label-"+t,attrs:n.i(r.__assign)(n.i(r.__assign)({x:0,y:0,text:s},o),u)})},e.prototype.getLabelAlignAttrs=function(t,e){var n=this.isVertical(),r="center",i="middle";return n?(r="start",i="rail"!==e?"min"===t?"top":"bottom":"top"):"rail"!==e?(i="top",r="min"===t?"start":"end"):(r="start",i="middle"),{textAlign:r,textBaseline:i}},e.prototype.getRailPath=function(t,e,n,r){var i=this.get("rail"),o=i.size,a=i.defaultLength,s=i.type,u=this.isVertical(),l=a,c=n,h=r;c||(c=u?o:l),h||(h=u?l:o);var f=[];return"color"===s?(f.push(["M",t,e]),f.push(["L",t+c,e]),f.push(["L",t+c,e+h]),f.push(["L",t,e+h]),f.push(["Z"])):(f.push(["M",t+c,e]),f.push(["L",t+c,e+h]),f.push(["L",t,e+h]),f.push(["Z"])),f},e.prototype.drawRail=function(t){var e=this.get("rail"),i=e.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:n.i(r.__assign)({path:this.getRailPath(0,0)},i)})},e.prototype.getTrackColor=function(t){var e=t.length;if(!e)return null;if(1===e)return t[0];var n;n=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<e;r++){n+=" "+r/(e-1)+":"+t[r]}return n},e.prototype.getTrackPath=function(t){var e=this.getRailShape(t),r=e.attr("path");return n.i(i.clone)(r)},e.prototype.getClipTrackAttrs=function(t){var e,n,r,i,o=this.getCurrentValue(),a=o[0],s=o[1],u=this.getRailBBox(t),l=this.getPointByValue(a,t),c=this.getPointByValue(s,t),h=this.isVertical();return h?(e=u.minX,n=l.y,r=u.width,i=c.y-l.y):(e=l.x,n=u.minY,r=c.x-l.x,i=u.height),{x:e,y:n,width:r,height:i}},e.prototype.getTrackAttrs=function(t){var e=this.get("track"),r=this.get("colors"),o=this.getTrackPath(t);return n.i(i.mix)({path:o,fill:this.getTrackColor(r)},e.style)},e.prototype.resetTrackClip=function(t){var e=t||this.get("group"),n=this.getElementId("track"),r=e.findById(n),i=r.getClip(),o=this.getClipTrackAttrs(t);i?i.attr(o):r.setClip({type:"rect",attrs:o})},e.prototype.resetTrack=function(t){var e=this.getElementId("track"),n=t.findById(e),r=this.getTrackAttrs(t);n?n.attr(r):this.addShape(t,{type:"path",id:e,draggable:this.get("slidable"),name:"legend-track",attrs:r})},e.prototype.getPointByValue=function(t,e){var r=this.getRange(),i=r.min,o=r.max,s=(t-i)/(o-i),u=this.getRailBBox(e),l=this.isVertical(),c={x:0,y:0};return l?(c.x=u.minX+u.width/2,c.y=n.i(a.i)(u.minY,u.maxY,s)):(c.x=n.i(a.i)(u.minX,u.maxX,s),c.y=u.minY+u.height/2),c},e.prototype.getRailShape=function(t){return(t||this.get("group")).findById(this.getElementId("rail"))},e.prototype.getRailBBox=function(t){return this.getRailShape(t).getBBox()},e.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},e.prototype.isVertical=function(){return"vertical"===this.get("layout")},e.prototype.getValueByCanvasPoint=function(t,e){var r,i=this.getRange(),o=i.min,s=i.max,u=this.getRailCanvasBBox(),l=this.isVertical(),c=this.get("step");r=l?(e-u.minY)/u.height:(t-u.minX)/u.width;var h=n.i(a.i)(o,s,r);if(c){h=o+Math.round((h-o)/c)*c}return h>s&&(h=s),h<o&&(h=o),h},e.prototype.getCurrentValue=function(){var t=this.get("value");return t||(t=[this.get("min"),this.get("max")]),t},e.prototype.resetHandlers=function(t){var e=this.getCurrentValue(),n=e[0],r=e[1];this.resetHandler(t,"min",n),this.resetHandler(t,"max",r)},e.prototype.getHandlerPath=function(t,e){var n=this.isVertical(),r=[],i=t.size,o=e.x,a=e.y,s=i*u,c=i/2,h=i/6;if(n){var f=o+s*l;r.push(["M",o,a]),r.push(["L",f,a+c]),r.push(["L",o+s,a+c]),r.push(["L",o+s,a-c]),r.push(["L",f,a-c]),r.push(["Z"]),r.push(["M",f,a+h]),r.push(["L",o+s-2,a+h]),r.push(["M",f,a-h]),r.push(["L",o+s-2,a-h])}else{var p=a+s*l;r.push(["M",o,a]),r.push(["L",o-c,p]),r.push(["L",o-c,a+s]),r.push(["L",o+c,a+s]),r.push(["L",o+c,p]),r.push(["Z"]),r.push(["M",o-h,p]),r.push(["L",o-h,a+s-2]),r.push(["M",o+h,p]),r.push(["L",o+h,a+s-2])}return r},e.prototype.resetHandler=function(t,e,i){var o=this.getPointByValue(i,t),a=this.get("handler"),s=this.getHandlerPath(a,o),u=this.getElementId("handler-"+e),l=t.findById(u),c=this.isVertical();l?l.attr("path",s):this.addShape(t,{type:"path",name:"legend-handler-"+e,draggable:!0,id:u,attrs:n.i(r.__assign)(n.i(r.__assign)({path:s},a.style),{cursor:c?"ns-resize":"ew-resize"})})},e.prototype.fixedElements=function(t){var e=t.findById(this.getElementId("rail")),n=t.findById(this.getElementId("label-min")),r=t.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,e,i):this.fixedHorizontal(n,r,e,i)},e.prototype.fitRailLength=function(t,e,r,o){var a=this.isVertical(),s=a?"height":"width",u=this.get("label"),l=u.align,c=u.spacing,h=this.get("max"+n.i(i.upperFirst)(s));if(h){var f="rail"===l?r[s]+t[s]+e[s]+2*c:r[s],p=f-h;p>0&&this.changeRailLength(o,s,r[s]-p)}},e.prototype.changeRailLength=function(t,e,n){var r,i=t.getBBox();r="height"===e?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),t.attr("path",r)},e.prototype.changeRailPosition=function(t,e,n){var r=t.getBBox(),i=this.getRailPath(e,n,r.width,r.height);t.attr("path",i)},e.prototype.fixedHorizontal=function(t,e,n,r){var i=this.get("label"),o=i.align,a=i.spacing,s=n.getBBox(),u=t.getBBox(),l=e.getBBox(),c=s.height;this.fitRailLength(u,l,s,n),s=n.getBBox(),"rail"===o?(t.attr({x:r.x,y:r.y+c/2}),this.changeRailPosition(n,r.x+u.width+a,r.y),e.attr({x:r.x+u.width+s.width+2*a,y:r.y+c/2})):"top"===o?(t.attr({x:r.x,y:r.y}),e.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+u.height+a)):(this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x,y:r.y+s.height+a}),e.attr({x:r.x+s.width,y:r.y+s.height+a}))},e.prototype.fixedVertail=function(t,e,n,r){var i=this.get("label"),o=i.align,a=i.spacing,s=n.getBBox(),u=t.getBBox(),l=e.getBBox();if(this.fitRailLength(u,l,s,n),s=n.getBBox(),"rail"===o)t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+u.height+a),e.attr({x:r.x,y:r.y+u.height+s.height+2*a});else if("right"===o)t.attr({x:r.x+s.width+a,y:r.y}),this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x+s.width+a,y:r.y+s.height});else{var c=Math.max(u.width,l.width);t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+c+a,r.y),e.attr({x:r.x,y:r.y+s.height})}},e}(s.a);e.a=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(483);n.d(e,"Category",function(){return r.a});var i=n(484);n.d(e,"Continuous",function(){return i.a});var o=n(167);n.d(e,"Base",function(){return o.a})},function(t,e,n){"use strict";n(487)},function(t,e,n){"use strict";var r=n(1),i=n(97),o=n(0),a=n(21),s={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},u={default:s,hover:{thumbColor:"rgba(0,0,0,0.2)"}};!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clearEvents=o.noop,e.onStartEvent=function(t){return function(r){e.isMobile=t,r.originalEvent.preventDefault();var i=t?n.i(o.get)(r.originalEvent,"touches.0.clientX"):r.clientX,a=t?n.i(o.get)(r.originalEvent,"touches.0.clientY"):r.clientY;e.startPos=e.cfg.isHorizontal?i:a,e.bindLaterEvent()}},e.bindLaterEvent=function(){var t=e.getContainerDOM(),r=[];r=e.isMobile?[n.i(i.a)(t,"touchmove",e.onMouseMove),n.i(i.a)(t,"touchend",e.onMouseUp),n.i(i.a)(t,"touchcancel",e.onMouseUp)]:[n.i(i.a)(t,"mousemove",e.onMouseMove),n.i(i.a)(t,"mouseup",e.onMouseUp),n.i(i.a)(t,"mouseleave",e.onMouseUp)],e.clearEvents=function(){r.forEach(function(t){t.remove()})}},e.onMouseMove=function(t){var r=e.cfg,i=r.isHorizontal,a=r.thumbOffset;t.preventDefault();var s=e.isMobile?n.i(o.get)(t,"touches.0.clientX"):t.clientX,u=e.isMobile?n.i(o.get)(t,"touches.0.clientY"):t.clientY,l=i?s:u,c=l-e.startPos;e.startPos=l,e.updateThumbOffset(a+c)},e.onMouseUp=function(t){t.preventDefault(),e.clearEvents()},e.onTrackClick=function(t){var n=e.cfg,r=n.isHorizontal,i=n.x,o=n.y,a=n.thumbLen,s=e.getContainerDOM(),u=s.getBoundingClientRect(),l=t.clientX,c=t.clientY,h=r?l-u.left-i-a/2:c-u.top-o-a/2,f=e.validateRange(h);e.updateThumbOffset(f)},e.onThumbMouseOver=function(){var t=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e.onThumbMouseOut=function(){var t=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e}n.i(r.__extends)(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e)},e.prototype.getRange=function(){return{min:this.get("minLimit"),max:this.get("maxLimit")}},e.prototype.setValue=function(t){var e=this.getValue();this.update({thumbOffset:this.get("trackLen")-this.get("thumbLen")*n.i(o.clamp)(t,0,1)}),this.delegateEmit("valuechange",{originalValue:e,value:this.getValue()})},e.prototype.getValue=function(){return n.i(o.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:u})},e.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.renderTrackShape=function(t){var e=this.cfg,n=e.trackLen,r=e.theme,i=void 0===r?{default:{}}:r,o=i.default,a=o.lineCap,s=o.trackColor,u=o.size,l=this.get("isHorizontal")?{x1:0+u/2,y1:u/2,x2:n-u/2,y2:u/2,lineWidth:u,stroke:s,lineCap:a}:{x1:u/2,y1:0+u/2,x2:u/2,y2:n-u/2,lineWidth:u,stroke:s,lineCap:a};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:l})},e.prototype.renderThumbShape=function(t){var e=this.cfg,n=e.thumbOffset,r=e.thumbLen,i=e.theme,o=void 0===i?{default:{}}:i,a=o.default,s=a.size,u=a.lineCap,l=a.thumbColor,c=this.get("isHorizontal")?{x1:n+s/2,y1:s/2,x2:n+r-s/2,y2:s/2,lineWidth:s,stroke:l,lineCap:u,cursor:"default"}:{x1:s/2,y1:n+s/2,x2:s/2,y2:n+r-s/2,lineWidth:s,stroke:l,lineCap:u,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:c})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp),t.findById(this.getElementId("track")).on("click",this.onTrackClick);var e=t.findById(this.getElementId("thumb"));e.on("mouseover",this.onThumbMouseOver),e.on("mouseout",this.onThumbMouseOut)},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e.prototype.validateRange=function(t){var e=this.cfg,n=e.thumbLen,r=e.trackLen,i=t;return t+n>r?i=r-n:t+n<n&&(i=0),i},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.updateThumbOffset=function(t){var e=this.cfg,n=e.thumbOffset,r=e.isHorizontal,i=e.thumbLen,o=e.size,a=this.validateRange(t);if(a!==n){var s=this.getElementByLocalId("thumb");r?s.attr({x1:a+o/2,x2:a+i-o/2}):s.attr({y1:a+o/2,y2:a+i-o/2}),this.emitOffsetChange(a)}},e.prototype.emitOffsetChange=function(t){var e=this.cfg,r=e.thumbOffset,i=e.trackLen,a=e.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:n.i(o.clamp)(t/(i-a),0,1)}),this.delegateEmit("valuechange",{originalValue:r,value:t})}}(a.a)},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"a",function(){return u});var r={fill:"#416180 ",opacity:.05},i={fill:"#5B8FF9",opacity:.15,cursor:"move"},o=10,a={width:o,height:24},s={textBaseline:"middle",fill:"#000",opacity:.45},u="sliderchange"},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(1),i=n(21),o={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"handler",x:0,y:0,width:10,height:24,style:o})},e.prototype.renderInner=function(t){var e=this.cfg,n=e.width,r=e.height,i=e.style,o=i.fill,a=i.stroke,s=i.radius,u=i.opacity,l=i.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:o,stroke:a,radius:s,opacity:u,cursor:l}});var c=1/3*n,h=2/3*n,f=.25*r,p=.75*r;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:c,y1:f,x2:c,y2:p,stroke:a,cursor:l}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:f,x2:h,y2:p,stroke:a,cursor:l}})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var e=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",e),t.draw()}),this.get("group").on("mouseleave",function(){var e=t.get("style").fill;t.getElementByLocalId("background").attr("fill",e),t.draw()})},e.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},e}(i.a)},function(t,e,n){"use strict";var r=n(491);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(1),i=n(0),o=n(21),a=n(497),s=n(488),u=n(489),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMouseDown=function(t){return function(r){e.currentTarget=t;var o=r.originalEvent;o.stopPropagation(),o.preventDefault(),e.prevX=n.i(i.get)(o,"touches.0.pageX",o.pageX),e.prevY=n.i(i.get)(o,"touches.0.pageY",o.pageY);var a=e.getContainerDOM();a.addEventListener("mousemove",e.onMouseMove),a.addEventListener("mouseup",e.onMouseUp),a.addEventListener("mouseleave",e.onMouseUp),a.addEventListener("touchmove",e.onMouseMove),a.addEventListener("touchend",e.onMouseUp),a.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(t){var r=e.cfg.width,o=[e.get("start"),e.get("end")];t.stopPropagation(),t.preventDefault();var a=n.i(i.get)(t,"touches.0.pageX",t.pageX),u=n.i(i.get)(t,"touches.0.pageY",t.pageY),l=a-e.prevX,c=e.adjustOffsetRange(l/r);e.updateStartEnd(c),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=a,e.prevY=u,e.draw(),e.emit(s.a,[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:o,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var t=e.getContainerDOM();t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))},e}return n.i(r.__extends)(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e)},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){if(n.i(i.isArray)(t)&&2===t.length){var e=[this.get("start"),this.get("end")];this.update({start:t[0],end:t[1]}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:e,value:t})}},e.prototype.getValue=function(){return[this.get("start"),this.get("end")]},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:s.b,foregroundStyle:s.c,handlerStyle:s.d,textStyle:s.e}})},e.prototype.update=function(e){var o=e.start,a=e.end,s=n.i(r.__assign)({},e);n.i(i.isNil)(o)||(s.start=n.i(i.clamp)(o,0,1)),n.i(i.isNil)(a)||(s.end=n.i(i.clamp)(a,0,1)),t.prototype.update.call(this,s),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler"))},e.prototype.init=function(){this.set("start",n.i(i.clamp)(this.get("start"),0,1)),this.set("end",n.i(i.clamp)(this.get("end"),0,1)),t.prototype.init.call(this)},e.prototype.renderInner=function(t){var e=this.cfg,o=(e.start,e.end,e.width),s=e.height,l=e.trendCfg,c=void 0===l?{}:l,h=e.minText,f=e.maxText,p=e.backgroundStyle,d=void 0===p?{}:p,v=e.foregroundStyle,g=void 0===v?{}:v,m=e.textStyle,y=void 0===m?{}:m,_=e.handlerStyle,b=void 0===_?{}:_;n.i(i.size)(n.i(i.get)(c,"data"))&&this.addComponent(t,n.i(r.__assign)({component:a.a,id:this.getElementId("trend"),x:0,y:0,width:o,height:s},c)),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:n.i(r.__assign)({x:0,y:0,width:o,height:s},d)});var x=this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:n.i(r.__assign)({y:s/2,textAlign:"right",text:h,silent:!1},y)}),w=this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:n.i(r.__assign)({y:s/2,textAlign:"left",text:f,silent:!1},y)}),S=this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:n.i(r.__assign)({y:0,height:s},g)}),E=n.i(i.get)(b,"height",24);this.minHandler=this.addComponent(t,n.i(r.__assign)({component:u.a,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(s-E)/2,width:o,height:E,cursor:"ew-resize"},b)),this.maxHandler=this.addComponent(t,n.i(r.__assign)({component:u.a,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(s-E)/2,width:o,height:E,cursor:"ew-resize"},b)),this.updateUI(S,x,w)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.updateUI=function(t,e,r){var o=this.cfg,a=o.start,u=o.end,l=o.width,c=o.minText,h=o.maxText,f=o.handlerStyle,p=a*l,d=u*l;t.attr("x",p),t.attr("width",d-p);var v=n.i(i.get)(f,"width",s.f);e.attr("text",c),r.attr("text",h);var g=this._dodgeText([p,d],e,r),m=g[0],y=g[1];this.minHandler&&(this.minHandler.update({x:p-v/2}),this.get("updateAutoRender")||this.minHandler.render()),n.i(i.each)(m,function(t,n){return e.attr(n,t)}),this.maxHandler&&(this.maxHandler.update({x:d-v/2}),this.get("updateAutoRender")||this.maxHandler.render()),n.i(i.each)(y,function(t,e){return r.attr(e,t)})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var e=t.findById(this.getElementId("foreground"));e.on("mousedown",this.onMouseDown("foreground")),e.on("touchstart",this.onMouseDown("foreground"))},e.prototype.adjustOffsetRange=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":var i=0-n,o=1-n;return Math.min(o,Math.max(i,t));case"maxHandler":var i=0-r,o=1-r;return Math.min(o,Math.max(i,t));case"foreground":var i=0-n,o=1-r;return Math.min(o,Math.max(i,t));default:return 0}},e.prototype.updateStartEnd=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":n+=t;break;case"maxHandler":r+=t;break;case"foreground":n+=t,r+=t}this.set("start",n),this.set("end",r)},e.prototype._dodgeText=function(t,e,r){var o,a,u=this.cfg,l=u.handlerStyle,c=u.width,h=2,f=n.i(i.get)(l,"width",s.f),p=t[0],d=t[1],v=!1;p>d&&(o=[d,p],p=o[0],d=o[1],a=[r,e],e=a[0],r=a[1],v=!0);var g=e.getBBox(),m=r.getBBox(),y=g.width>p-h?{x:p+f/2+h,textAlign:"left"}:{x:p-f/2-h,textAlign:"right"},_=m.width>c-d-h?{x:d-f/2-h,textAlign:"right"}:{x:d+f/2+h,textAlign:"left"};return v?[_,y]:[y,_]},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e}(o.a)},function(t,e,n){"use strict";var r,i=n(30),o=n(247);e.a=(r={},r[""+o.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:i.a.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},r[""+o.TITLE_CLASS]={marginBottom:"4px"},r[""+o.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},r[""+o.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},r[""+o.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},r[""+o.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},r[""+o.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},r[""+o.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},r)},function(t,e,n){"use strict";function r(t,e){var r=!1;return n.i(s.each)(e,function(e){if(n.i(s.hasKey)(t,e))return r=!0,!1}),r}var i=n(1),o=n(161),a=n(97),s=n(0),u=n(163),l=n(26),c=n(247),h=n(492),f=n(498),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(i.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(i.__assign)(n.i(i.__assign)({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],containerTpl:'<div class="'+c.CONTAINER_CLASS+'"><div class="'+c.TITLE_CLASS+'"></div><ul class="'+c.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+c.LIST_ITEM_CLASS+'" data-index={index}>\n          <span class="'+c.MARKER_CLASS+'" style="background:{color}"></span>\n          <span class="'+c.NAME_CLASS+'">{name}</span>:\n          <span class="'+c.VALUE_CLASS+'">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+c.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+c.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:c.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:h.a})},e.prototype.render=function(){this.resetTitle(),this.renderItems(),this.resetPosition()},e.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},e.prototype.updateInner=function(e){r(e,["title","showTitle"])&&this.resetTitle(),n.i(s.hasKey)(e,"items")&&this.renderItems(),t.prototype.updateInner.call(this,e)},e.prototype.show=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!0),n.i(a.b)(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},e.prototype.hide=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!1),n.i(a.b)(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},e.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},e.prototype.setCrossHairsVisible=function(t){var e=t?"":"none",r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");r&&n.i(a.b)(r,{display:e}),i&&n.i(a.b)(i,{display:e})},e.prototype.initDom=function(){this.cacheDoms()},e.prototype.removeDom=function(){t.prototype.removeDom.call(this),this.clearCrosshairs()},e.prototype.cacheDoms=function(){var t=this.getContainer(),e=t.getElementsByClassName(c.TITLE_CLASS)[0],n=t.getElementsByClassName(c.LIST_CLASS)[0];this.set("titleDom",e),this.set("listDom",n)},e.prototype.resetPosition=function(){var t,e=this.get("x"),r=this.get("y"),i=this.get("offset"),o=this.getOffset(),s=o.offsetX,u=o.offsetY,c=this.get("position"),h=this.get("region"),p=this.getContainer(),d=this.getBBox(),v=d.width,g=d.height;h&&(t=n.i(l.c)(h));var m=n.i(f.a)(e,r,i,v,g,c,t);n.i(a.b)(p,{left:n.i(l.d)(m.x+s),top:n.i(l.d)(m.y+u)}),this.resetCrosshairs()},e.prototype.resetTitle=function(){var t=this.get("title");this.get("showTitle")&&t?this.setTitle(t):this.setTitle("")},e.prototype.setTitle=function(t){var e=this.get("titleDom");e&&(e.innerText=t)},e.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),e=this.get("crosshairs");if(t&&e){var r=n.i(l.c)(t),i=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");"x"===e?(this.resetCrosshair("x",r),o&&(o.remove(),this.set("yCrosshairDom",null))):"y"===e?(this.resetCrosshair("y",r),i&&(i.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",r),this.resetCrosshair("y",r)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},e.prototype.resetCrosshair=function(t,e){var r=this.checkCrosshair(t),i=this.get(t);"x"===t?n.i(a.b)(r,{left:n.i(l.d)(i),top:n.i(l.d)(e.y),height:n.i(l.d)(e.height)}):n.i(a.b)(r,{top:n.i(l.d)(i),left:n.i(l.d)(e.x),width:n.i(l.d)(e.width)})},e.prototype.checkCrosshair=function(t){var e=t+"CrosshairDom",r=t+"CrosshairTpl",i="CROSSHAIR_"+t.toUpperCase(),o=c[i],s=this.get(e),u=this.get("parent");return s||(s=n.i(a.c)(this.get(r)),this.applyStyle(o,s),u.appendChild(s),this.set(e,s)),s},e.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),e=this.get("itemTpl"),r=this.get("listDom");r&&(n.i(s.each)(t,function(t){var u=o.a.toCSSGradient(t.color),l=n.i(i.__assign)(n.i(i.__assign)({},t),{color:u}),c=n.i(s.substitute)(e,l),h=n.i(a.c)(c);r.appendChild(h)}),this.applyChildrenStyles(r,this.get("domStyles")))},e.prototype.clearItemDoms=function(){this.get("listDom")&&n.i(l.e)(this.get("listDom"))},e.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),e=this.get("yCrosshairDom");t&&t.remove(),e&&e.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},e}(u.a);e.a=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(493);n.d(e,"Html",function(){return r.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o});var r={opacity:0},i={stroke:"#C5C5C5",strokeOpacity:.85},o={fill:"#CACED4",opacity:.85}},function(t,e,n){"use strict";function r(t){return n.i(h.map)(t,function(t,e){return[0===e?"M":"L",t[0],t[1]]})}function i(t){return r(t)}function o(t){if(t.length<=2)return i(t);var e=[];n.i(h.each)(t,function(t){n.i(h.isEqual)(t,e.slice(e.length-2))||e.push(t[0],t[1])});var r=n.i(l.a)(e,!1),o=n.i(h.head)(t),a=o[0],s=o[1];return r.unshift(["M",a,s]),r}function a(t,e,r,a){void 0===a&&(a=!0);var s=new c.Linear({values:t}),u=new c.Category({values:n.i(h.map)(t,function(t,e){return e})}),l=n.i(h.map)(t,function(t,n){return[u.scale(n)*e,r-s.scale(t)*r]});return a?o(l):i(l)}function s(t,e,r){var i=n.i(u.__spreadArrays)(t);return i.push(["L",e,0]),i.push(["L",0,r]),i.push(["Z"]),i}e.a=a,e.b=s;var u=n(1),l=n(312),c=n(134),h=n(0)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(1),i=n(21),o=n(495),a=n(496),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:o.a,lineStyle:o.b,areaStyle:o.c})},e.prototype.renderInner=function(t){var e=this.cfg,i=e.width,o=e.height,s=e.data,u=e.smooth,l=e.isArea,c=e.backgroundStyle,h=e.lineStyle,f=e.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:n.i(r.__assign)({x:0,y:0,width:i,height:o},c)});var p=n.i(a.a)(s,i,o,u);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:n.i(r.__assign)({path:p},h)}),l){var d=n.i(a.b)(p,i,o);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:n.i(r.__assign)({path:d},f)})}},e.prototype.applyOffset=function(){var t=this.cfg,e=t.x,n=t.y;this.moveElementTo(this.get("group"),{x:e,y:n})},e}(i.a)},function(t,e,n){"use strict";function r(t,e,n,r,i){return{left:t<i.x,right:t+n>i.x+i.width,top:e<i.y,bottom:e+r>i.y+i.height}}function i(t,e,n,r,i,o){var a=t,s=e;switch(o){case"left":a=t-r-n,s=e-i/2;break;case"right":a=t+n,s=e-i/2;break;case"top":a=t-r/2,s=e-i-n;break;case"bottom":a=t-r/2,s=e+n;break;default:a=t+n,s=e-i-n}return{x:a,y:s}}function o(t,e,n,o,a,s,u){var l=i(t,e,n,o,a,s);if(u){var c=r(l.x,l.y,o,a,u);"auto"===s?(c.right&&(l.x=t-o-n),c.top&&(l.y=e+n)):"top"===s||"bottom"===s?(c.left&&(l.x=u.x),c.right&&(l.x=u.x+u.width-o),"top"===s&&c.top&&(l.y=e+n),"bottom"===s&&c.bottom&&(l.y=e-a-n)):(c.top&&(l.y=u.y),c.bottom&&(l.y=u.y+u.height-a),"left"===s&&c.left&&(l.x=t+n),"right"===s&&c.right&&(l.x=t-o-n))}return l}e.a=o},function(t,e,n){"use strict";function r(t,e,n){var r=new o.a(e,n);r.target=t,r.propagationPath.push(t),t.emitDelegation(e,r);for(var i=t.getParent();i;)i.emitDelegation(e,r),r.propagationPath.push(i),i=i.getParent()}e.a=r;var i=n(169),o=n.n(i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTAINER_CLASS="g2-tooltip",e.TITLE_CLASS="g2-tooltip-title",e.LIST_CLASS="g2-tooltip-list",e.LIST_ITEM_CLASS="g2-tooltip-list-item",e.MARKER_CLASS="g2-tooltip-marker",e.VALUE_CLASS="g2-tooltip-value",e.NAME_CLASS="g2-tooltip-name",e.CROSSHAIR_X="g2-tooltip-crosshair-x",e.CROSSHAIR_Y="g2-tooltip-crosshair-y"},function(t,e,n){"use strict";function r(t,e,n){var r=new i.default(e,n);r.target=t,r.propagationPath.push(t),t.emitDelegation(e,r);for(var o=t.getParent();o;)o.emitDelegation(e,r),r.propagationPath.push(o),o=o.getParent()}Object.defineProperty(e,"__esModule",{value:!0});var i=n(169);e.propagationDelegate=r},function(t,e,n){"use strict";var r=n(1),i=n(122),o=function(t){function e(e){var n=t.call(this,e)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return n.i(r.__extends)(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=this.start,n=this.end;this.x={start:e.x,end:n.x},this.y={start:e.y,end:n.y}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;return this.isTransposed&&(e=[r,n],n=e[0],r=e[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},e.prototype.invertPoint=function(t){var e,n=this.invertDim(t.x,"x"),r=this.invertDim(t.y,"y");return this.isTransposed&&(e=[r,n],n=e[0],r=e[1]),{x:n,y:r}},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(0),a=n(122),s=function(t){function e(e){var n=t.call(this,e)||this;n.isHelix=!0,n.type="helix";var r=e.startAngle,i=void 0===r?1.25*Math.PI:r,o=e.endAngle,a=void 0===o?7.25*Math.PI:o,s=e.innerRadius,u=void 0===s?0:s,l=e.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=u,n.radius=l,n.initial(),n}return n.i(r.__extends)(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/e),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;this.isTransposed&&(e=[r,n],n=e[0],r=e[1]);var i=this.convertDim(n,"x"),o=this.a*i,a=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(o+a),y:this.center.y+Math.sin(i)*(o+a)}},e.prototype.invertPoint=function(t){var e,r=this.d+this.y.start,a=i.c.subtract([],[t.x,t.y],[this.center.x,this.center.y]),s=i.c.angleTo(a,[1,0],!0),u=s*this.a;i.c.length(a)<u&&(u=i.c.length(a)),s=2*Math.floor((i.c.length(a)-u)/r)*Math.PI+s;var l=this.a*s,c=i.c.length(a)-l;c=n.i(o.isNumberEqual)(c,0)?0:c;var h=this.invertDim(s,"x"),f=this.invertDim(c,"y");return h=n.i(o.isNumberEqual)(h,0)?0:h,f=n.i(o.isNumberEqual)(f,0)?0:f,this.isTransposed&&(e=[f,h],h=e[0],f=e[1]),{x:h,y:f}},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(0),a=n(122),s=function(t){function e(e){var n=t.call(this,e)||this;n.isPolar=!0,n.type="polar";var r=e.startAngle,i=void 0===r?-Math.PI/2:r,o=e.endAngle,a=void 0===o?3*Math.PI/2:o,s=e.innerRadius,u=void 0===s?0:s,l=e.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=u,n.radius=l,n.initial(),n}return n.i(r.__extends)(e,t),e.prototype.initial=function(){for(t.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var e,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,o=Math.abs(n.minX)/r,a=Math.abs(n.minY)/i;this.height/i>this.width/r?(e=this.width/r,this.circleCenter={x:this.center.x-(.5-o)*this.width,y:this.center.y-(.5-a)*e*i}):(e=this.height/i,this.circleCenter={x:this.center.x-(.5-o)*e*r,y:this.center.y-(.5-a)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=e*this.radius:(this.radius<=0||this.radius>e)&&(this.polarRadius=e):this.polarRadius=e,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},e.prototype.getRadius=function(){return this.polarRadius},e.prototype.convertPoint=function(t){var e,n=this.getCenter(),r=t.x,i=t.y;return this.isTransposed&&(e=[i,r],r=e[0],i=e[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},e.prototype.invertPoint=function(t){var e=this.getCenter(),r=[t.x-e.x,t.y-e.y],a=[1,0,0,0,1,0,0,0,1];i.d.rotate(a,a,this.startAngle);var s=[1,0,0];i.b.transformMat3(s,s,a),s=[s[0],s[1]];var u=i.c.angleTo(s,r,this.endAngle<this.startAngle);n.i(o.isNumberEqual)(u,2*Math.PI)&&(u=0);var l=i.c.length(r),c=u/(this.endAngle-this.startAngle);c=this.endAngle-this.startAngle>0?c:-c;var h=this.invertDim(l,"y"),f={x:0,y:0};return f.x=this.isTransposed?h:c,f.y=this.isTransposed?c:h,f},e.prototype.getCenter=function(){return this.circleCenter},e.prototype.getOneBox=function(){var t=this.startAngle,e=this.endAngle;if(Math.abs(e-t)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(t),Math.cos(e)],r=[0,Math.sin(t),Math.sin(e)],i=Math.min(t,e);i<Math.max(t,e);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},e}(a.a);e.a=s},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r={},i=function(t){return r[t.toLowerCase()]},o=function(t,e){r[t.toLowerCase()]=e}},function(t,e,n){"use strict";var r=(n(122),n(502)),i=n(503),o=n(504),a=n(505);n.d(e,"a",function(){return a.b}),n.i(a.a)("rect",r.a),n.i(a.a)("cartesian",r.a),n.i(a.a)("polar",o.a),n.i(a.a)("helix",i.a)},function(t,e,n){!function(e,n){t.exports=n()}(window,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s="./src/index.ts")}({"./node_modules/_@antv_hierarchy@0.6.2@@antv/hierarchy/build/hierarchy.js":function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,n){var r=n(7);t.exports={assign:r}},function(t,e,n){var r=n(3),i=function(){function t(t,e){void 0===e&&(e={});var n=this;n.options=e,n.rootNode=r(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,n){var r=n(4),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=function(t){return o.indexOf(t)>-1},s=i[0];t.exports=function(t,e,n){var o=e.direction||s;if(e.isHorizontal=a(o),o&&-1===i.indexOf(o))throw new TypeError("Invalid direction: "+o);if(o===i[0])n(t,e);else if(o===i[1])n(t,e),t.right2left();else if(o===i[2])n(t,e);else if(o===i[3])n(t,e),t.bottom2top();else if(o===i[4]||o===i[5]){var u=r(t,e),l=u.left,c=u.right;n(l,e),n(c,e),e.isHorizontal?l.right2left():l.bottom2top(),c.translate(l.x-c.x,l.y-c.y),t.x=l.x,t.y=c.y;var h=t.getBoundingBox();e.isHorizontal?h.top<0&&t.translate(0,-h.top):h.left<0&&t.translate(-h.left,0)}var f=e.fixedRoot;return void 0===f&&(f=!0),f&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){function r(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof r)return t;n.data=t;var i=e.getHGap(t),o=e.getVGap(t);return n.width=e.getWidth(t),n.height=e.getHeight(t),n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(i,o),n}function i(t,e,n){void 0===e&&(e={}),e=o.assign({},l,e);var i,a=new r(t,e),s=[a];if(!n&&!t.collapsed)for(;i=s.pop();)if(!i.data.collapsed){var u=e.getChildren(i.data),c=u?u.length:0;if(i.children=new Array(c),u&&c)for(var h=0;h<c;h++){var f=new r(u[h],e);i.children[h]=f,s.push(f),f.parent=i,f.depth=i.depth+1}}return a}var o=n(0),a=18,s=2*a,u=a,l={getId:function(t){return t.id||t.name},getHGap:function(t){return t.hgap||u},getVGap:function(t){return t.vgap||u},getChildren:function(t){return t.children},getHeight:function(t){return t.height||s},getWidth:function(t){var e=t.name||" ";return t.width||e.split("").length*a}};o.assign(r.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e,n=this,r=[n];e=r.pop();)t(e),r=r.concat(e.children)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=this,r=[n];e=r.shift();)t(e),r=r.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e})},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.x=t.x-2*(t.x-e.left)-t.width}),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.y=t.y-2*(t.y-e.top)-t.height}),t.translate(0,e.height)}}),t.exports=i},function(t,e,n){var r=n(3);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<o;u++){var l=t.children[u];"right"===s(l,u)?i.children.push(l):n.children.push(l)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),i.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:i}}},function(t,e,n){var r={compactBox:n(6),dendrogram:n(9),indented:n(11),mindmap:n(13)};t.exports=r},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e){return e=u.assign({},c,e),new l(t,e).execute()}var o=n(1),a=n(8),s=n(2),u=n(0),l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(){var t=this;return s(t.rootNode,t.options,a)},e}(o),c={};t.exports=i},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}var r=function(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t};t.exports=r},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach(function(t){r(t,e,n)})}function i(t,e){var n=e?t.y:t.x;return t.children.forEach(function(t){n=Math.min(i(t,e),n)}),n}function o(t,e){r(t,-i(t,e),e)}function a(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach(function(t,r){a(t,e.children[r],n)})}function s(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach(function(t){s(t,e,n)})}n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach(function(t){r.push(n.fromNode(t,e))}),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t,e){function r(t){if(0===t.cs)return void i(t);r(t.c[0]);for(var e=_(f(t.c[0].el),0,null),n=1;n<t.cs;++n){r(t.c[n]);var o=f(t.c[n].er);u(t,n,e),e=_(o,n,e)}v(t),i(t)}function i(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function u(t,e,n){for(var r=t.c[e-1],i=r.mod,o=t.c[e],a=o.mod;null!==r&&null!==o;){f(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,l(t,e,n.index,s));var u=f(r),v=f(o);u<=v&&null!==(r=h(r))&&(i+=r.mod),u>=v&&null!==(o=c(o))&&(a+=o.mod)}!r&&o?p(t,e,o,a):r&&!o&&d(t,e,r,i)}function l(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,m(t,e,n,r)}function c(t){return 0===t.cs?t.tl:t.c[0]}function h(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function f(t){return t.y+t.h}function p(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}function d(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}function v(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}function g(t,e){e+=t.mod,t.x=t.prelim+e,y(t);for(var n=0;n<t.cs;n++)g(t.c[n],e)}function m(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}function y(t){for(var e=0,n=0,r=0;r<t.cs;r++)e+=t.c[r].shift,n+=e+t.c[r].change,t.c[r].mod+=n}function _(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}void 0===e&&(e={});var b=e.isHorizontal;s(t,b);var x=n.fromNode(t,b);return r(x),g(x,0),a(x,t,b),o(t,b),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e){return e=u.assign({},c,e),new l(t,e).execute()}var o=n(1),a=n(10),s=n(2),u=n(0),l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(){var t=this;return t.rootNode.width=0,s(t.rootNode,t.options,a)},e}(o),c={};t.exports=i},function(t,e,n){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}function i(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach(function(t,r){i(t,e.children[r],n)})}var o=n(0),a={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,e){function n(t){if(!t)return null;t.width=0,t.depth&&t.depth>c&&(c=t.depth);var e=t.children,i=e.length,o=new r(t.height,[]);return e.forEach(function(t,e){var r=n(t);o.children.push(r),0===e&&(o.leftChild=r),e===i-1&&(o.rightChild=r)}),o.originNode=t,o.isLeaf=t.isLeaf(),o}function s(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=c;else{var e=t.children.map(function(t){return s(t)}),n=Math.min.apply(null,e);t.drawingDepth=n-1}return t.drawingDepth}function u(t){t.x=t.drawingDepth*e.rankSep,t.isLeaf?(t.y=0,l&&(t.y=l.y+l.height+e.nodeSep,t.originNode.parent!==l.originNode.parent&&(t.y+=e.subTreeSep)),l=t):(t.children.forEach(function(t){u(t)}),t.y=(t.leftChild.y+t.rightChild.y)/2)}void 0===e&&(e={}),e=o.assign({},a,e);var l,c=0,h=n(t);return s(h),u(h),i(h,t,e.isHorizontal),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e){return e=u.assign({},f,e),new h(t,e).execute()}var o=n(1),a=n(12),s=n(4),u=n(0),l=["LR","RL","H"],c=l[0],h=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(){var t=this,e=t.options,n=t.rootNode;e.isHorizontal=!0;var r=e.indent,i=e.direction||c;if(i&&-1===l.indexOf(i))throw new TypeError("Invalid direction: "+i);if(i===l[0])a(n,r);else if(i===l[1])a(n,r),n.right2left();else if(i===l[2]){var o=s(n,e),u=o.left,h=o.right;a(u,r),u.right2left(),a(h,r);var f=u.getBoundingBox();h.translate(f.width,0),n.x=h.x-n.width/2}return n},e}(o),f={};t.exports=i},function(t,e){function n(t,e,n){t.x+=n*t.depth,t.y=e?e.y+e.height:0}t.exports=function(t,e){void 0===e&&(e=20);var r=null;t.eachNode(function(t){n(t,r,e),r=t})}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e){return e=u.assign({},c,e),new l(t,e).execute()}var o=n(1),a=n(14),s=n(2),u=n(0),l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(){var t=this;return s(t.rootNode,t.options,a)},e}(o),c={};t.exports=i},function(t,e,n){function r(t,e){var n=0;return t.children.length?t.children.forEach(function(t){n+=r(t,e)}):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function i(t){var e=t.children,n=e.length;if(n){e.forEach(function(t){i(t)});var r=e[0],o=e[n-1],a=o.y-r.y+o.height,s=0;if(e.forEach(function(t){s+=t.totalHeight}),a>t.height)t.y=r.y+a/2-t.height/2;else if(1!==e.length||t.height>s){var u=t.y+(t.height-a)/2-r.y;e.forEach(function(t){t.translate(0,u)})}else t.y=(r.y+r.height/2+o.y+o.height/2)/2-t.height/2}}var o=n(0),a={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=o.assign({},a,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,r(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}}),i(t)}}])})},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/augment.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/mix.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],o=1;o<t.length;o++){var a=t[o];i.default(a)&&(a=a.prototype),r.default(n.prototype,a)}};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/cache.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/clamp.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n){return t<e?e:t>n?n:t};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/clear-animation-frame.js":function(t,e,n){"use strict";function r(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/clone.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),i=function(t){if("object"!=typeof t||null===t)return t;var e;if(r.default(t)){e=[];for(var n=0,o=t.length;n<o;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=i(t[n]):e[n]=t[n]}else{e={};for(var a in t)"object"==typeof t[a]&&null!=t[a]?e[a]=i(t[a]):e[a]=t[a]}return e};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/contains.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),i=function(t,e){return!!r.default(t)&&t.indexOf(e)>-1};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/debounce.js":function(t,e,n){"use strict";function r(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/deep-mix.js":function(t,e,n){"use strict";function r(t,e,n,s){n=n||0,s=s||a;for(var u in e)if(e.hasOwnProperty(u)){var l=e[u];null!==l&&o.default(l)?(o.default(t[u])||(t[u]={}),n<s?r(t[u],l,n+1,s):t[u]=e[u]):i.default(l)?(t[u]=[],t[u]=t[u].concat(l)):void 0!==l&&(t[u]=l)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-plain-object.js"),a=5,s=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)r(t,e[i]);return t};e.default=s},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/difference.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/filter.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/contains.js"),o=function(t,e){return void 0===e&&(e=[]),r.default(t,function(t){return!i.default(e,t)})};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js":function(t,e,n){"use strict";function r(t,e){if(t){if(i.default(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(o.default(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/ends-with.js":function(t,e,n){"use strict";function r(t,e){return!(!i.default(t)&&!o.default(t))&&t[t.length-1]===e}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/every.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/extend.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/mix.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),o=function(t,e,n,o){i.default(e)||(n=e,e=t,t=function(){});var a=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},s=a(e.prototype,t);return t.prototype=r.default(s,t.prototype),t.superclass=a(e.prototype,e),r.default(s,n),r.default(t,o),t};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/filter.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),o=function(t,e){if(!i.default(t))return t;var n=[];return r.default(t,function(t,r){e(t,r)&&n.push(t)}),n};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/find-index.js":function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/find.js":function(t,e,n){"use strict";function r(t,e){if(!a.default(t))return null;var n;if(i.default(e)&&(n=e),s.default(e)&&(n=function(t){return o.default(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-match.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),s=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-plain-object.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/first-value.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=function(t,e){for(var n=null,o=0;o<t.length;o++){var a=t[o],s=a[e];if(!r.default(s)){n=i.default(s)?s[0]:s;break}}return n};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/fixed-base.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/flatten-deep.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),i=function(t,e){if(void 0===e&&(e=[]),r.default(t))for(var n=0;n<t.length;n+=1)i(t[n],e);else e.push(t);return e};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/flatten.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),i=function(t){if(!r.default(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/for-in.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js");e.default=r.default},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/get-range.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/filter.js"),o=function(t){if(t=i.default(t,function(t){return!isNaN(t)}),!t.length)return{min:0,max:0};if(r.default(t[0])){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);t=e}var o=Math.max.apply(null,t);return{min:Math.min.apply(null,t),max:o}};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/get-type.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={}.toString,i=function(t){return r.call(t).replace(/^\[object /,"").replace(/]$/,"")};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/get-wrap-behavior.js":function(t,e,n){"use strict";function r(t,e){return t["_wrap_"+e]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/get.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js");e.default=function(t,e,n){for(var i=0,o=r.default(e)?e.split("."):e;t&&i<o.length;)t=t[o[i++]];return void 0===t||i<o.length?n:t}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/group-by.js":function(t,e,n){"use strict";function r(t,e){if(!e||!o.default(t))return{};var n,r={},u=a.default(e)?e:function(t){return t[e]};return i.default(t,function(t){n=u(t),s.call(r,n)?r[n].push(t):r[n]=[t]}),r}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),s=Object.prototype.hasOwnProperty;e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/group-to-map.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/group-by.js"),a=function(t,e){if(!e)return{0:t};if(!i.default(e)){var n=r.default(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return o.default(t,e)};e.default=a},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/group.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/group-to-map.js");e.default=function(t,e){if(!e)return[t];var n=r.default(t,e),i=[];for(var o in n)i.push(n[o]);return i}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/has-key.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/has.js");e.default=r.default},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/has-value.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/contains.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/values.js");e.default=function(t,e){return r.default(i.default(t),e)}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/has.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.hasOwnProperty(e)}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/head.js":function(t,e,n){"use strict";function r(t){if(i.default(t))return t[0]}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/identity.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/index-of.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),i=function(t,e){if(!r.default(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/contains.js");e.contains=r.default,e.includes=r.default;var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/difference.js");e.difference=i.default;var o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/find.js");e.find=o.default;var a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/find-index.js");e.findIndex=a.default;var s=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/first-value.js");e.firstValue=s.default;var u=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/flatten.js");e.flatten=u.default;var l=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/flatten-deep.js");e.flattenDeep=l.default;var c=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/get-range.js");e.getRange=c.default;var h=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/pull.js");e.pull=h.default;var f=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/pull-at.js");e.pullAt=f.default;var p=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/reduce.js");e.reduce=p.default;var d=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/remove.js");e.remove=d.default;var v=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/sort-by.js");e.sortBy=v.default;var g=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/union.js");e.union=g.default;var m=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/uniq.js");e.uniq=m.default;var y=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/values-of-key.js");e.valuesOfKey=y.default;var _=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/head.js");e.head=_.default;var b=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/last.js");e.last=b.default;var x=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/starts-with.js");e.startsWith=x.default;var w=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/ends-with.js");e.endsWith=w.default;var S=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/filter.js");e.filter=S.default;var E=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/every.js");e.every=E.default;var M=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/some.js");e.some=M.default;var T=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/group.js");e.group=T.default;var C=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/group-by.js");e.groupBy=C.default;var A=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/group-to-map.js");e.groupToMap=A.default;var P=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/get-wrap-behavior.js");e.getWrapBehavior=P.default;var k=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/wrap-behavior.js");e.wrapBehavior=k.default;var I=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/number2color.js");e.number2color=I.default;var O=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/parse-radius.js");e.parseRadius=O.default;var j=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/clamp.js");e.clamp=j.default;var L=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/fixed-base.js");e.fixedBase=L.default;var D=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-decimal.js");e.isDecimal=D.default;var R=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-even.js");e.isEven=R.default;var B=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-integer.js");e.isInteger=B.default;var z=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-negative.js");e.isNegative=z.default;var F=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number-equal.js");e.isNumberEqual=F.default;var N=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-odd.js");e.isOdd=N.default;var U=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-positive.js");e.isPositive=U.default;var V=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/max-by.js");e.maxBy=V.default;var G=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/min-by.js");e.minBy=G.default;var q=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/mod.js");e.mod=q.default;var H=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-degree.js");e.toDegree=H.default;var Y=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-integer.js");e.toInteger=Y.default;var X=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-radian.js");e.toRadian=X.default;var W=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/for-in.js");e.forIn=W.default;var Z=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/has.js");e.has=Z.default;var K=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/has-key.js");e.hasKey=K.default;var J=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/has-value.js");e.hasValue=J.default;var Q=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/keys.js");e.keys=Q.default;var $=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-match.js");e.isMatch=$.default;var tt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/values.js");e.values=tt.default;var et=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/lower-case.js");e.lowerCase=et.default;var nt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/lower-first.js");e.lowerFirst=nt.default;var rt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/substitute.js");e.substitute=rt.default;var it=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/upper-case.js");e.upperCase=it.default;var ot=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/upper-first.js");e.upperFirst=ot.default;var at=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/get-type.js");e.getType=at.default;var st=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-arguments.js");e.isArguments=st.default;var ut=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js");e.isArray=ut.default;var lt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js");e.isArrayLike=lt.default;var ct=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-boolean.js");e.isBoolean=ct.default;var ht=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-date.js");e.isDate=ht.default;var ft=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-error.js");e.isError=ft.default;var pt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js");e.isFunction=pt.default;var dt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-finite.js");e.isFinite=dt.default;var vt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js");e.isNil=vt.default;var gt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-null.js");e.isNull=gt.default;var mt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js");e.isNumber=mt.default;var yt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object.js");e.isObject=yt.default;var _t=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object-like.js");e.isObjectLike=_t.default;var bt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-plain-object.js");e.isPlainObject=bt.default;var xt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-prototype.js");e.isPrototype=xt.default;var wt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-reg-exp.js");e.isRegExp=wt.default;var St=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js");e.isString=St.default;var Et=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js");e.isType=Et.default;var Mt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-undefined.js");e.isUndefined=Mt.default;var Tt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-element.js");e.isElement=Tt.default;var Ct=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/request-animation-frame.js");e.requestAnimationFrame=Ct.default;var At=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/clear-animation-frame.js");e.clearAnimationFrame=At.default;var Pt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/augment.js");e.augment=Pt.default;var kt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/clone.js");e.clone=kt.default;var It=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/debounce.js");e.debounce=It.default;var Ot=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/memoize.js");e.memoize=Ot.default;var jt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/deep-mix.js");e.deepMix=jt.default;var Lt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js");e.each=Lt.default;var Dt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/extend.js");e.extend=Dt.default;var Rt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index-of.js");e.indexOf=Rt.default;var Bt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-empty.js");e.isEmpty=Bt.default;var zt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-equal.js");e.isEqual=zt.default;var Ft=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-equal-with.js");e.isEqualWith=Ft.default;var Nt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/map.js");e.map=Nt.default;var Ut=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/map-values.js");e.mapValues=Ut.default;var Vt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/mix.js");e.mix=Vt.default,e.assign=Vt.default;var Gt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/get.js");e.get=Gt.default;var qt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/set.js");e.set=qt.default;var Ht=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/pick.js");e.pick=Ht.default;var Yt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/throttle.js");e.throttle=Yt.default;var Xt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-array.js");e.toArray=Xt.default;var Wt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-string.js");e.toString=Wt.default;var Zt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/unique-id.js");e.uniqueId=Zt.default;var Kt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/noop.js");e.noop=Kt.default;var Jt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/identity.js");e.identity=Jt.default;var Qt=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/size.js");e.size=Qt.default;var $t=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/cache.js");e.Cache=$t.default},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-arguments.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js"),i=function(t){return r.default(t,"Arguments")};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js");e.default=function(t){return Array.isArray?Array.isArray(t):r.default(t,"Array")}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-boolean.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js"),i=function(t){return r.default(t,"Boolean")};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-date.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js"),i=function(t){return r.default(t,"Date")};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-decimal.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js"),i=function(t){return r.default(t)&&t%1!=0};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-element.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t instanceof Element||t instanceof HTMLDocument};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-empty.js":function(t,e,n){"use strict";function r(t){if(i.default(t))return!0;if(o.default(t))return!t.length;var e=a.default(t);if("Map"===e||"Set"===e)return!t.size;if(s.default(t))return!Object.keys(t).length;for(var n in t)if(u.call(t,n))return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/get-type.js"),s=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-prototype.js"),u=Object.prototype.hasOwnProperty;e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-equal-with.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-equal.js");e.default=function(t,e,n){return r.default(n)?!!n(t,e):i.default(t,e)}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-equal.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object-like.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js"),a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(o.default(t)||o.default(e))return!1;if(i.default(t)||i.default(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length&&(n=a(t[s],e[s]));s++);return n}if(r.default(t)||r.default(e)){var u=Object.keys(t),l=Object.keys(e);if(u.length!==l.length)return!1;for(var n=!0,s=0;s<u.length&&(n=a(t[u[s]],e[u[s]]));s++);return n}return!1};e.default=a},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-error.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js"),i=function(t){return r.default(t,"Error")};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-even.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js"),i=function(t){return r.default(t)&&t%2==0};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-finite.js":function(t,e,n){"use strict";function r(t){return i.default(t)&&isFinite(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js");e.default=function(t){return r.default(t,"Function")}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-integer.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js"),i=Number.isInteger?Number.isInteger:function(t){return r.default(t)&&t%1==0};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-match.js":function(t,e,n){"use strict";function r(t,e){var n=o.default(e),r=n.length;if(i.default(t))return!r;for(var a=0;a<r;a+=1){var s=n[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/keys.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-negative.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js"),i=function(t){return r.default(t)&&t<0};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return null===t||void 0===t};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-null.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return null===t};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number-equal.js":function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=i),Math.abs(t-e)<n}Object.defineProperty(e,"__esModule",{value:!0});var i=1e-5;e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js"),i=function(t){return r.default(t,"Number")};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object-like.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return"object"==typeof t&&null!==t};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-odd.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js"),i=function(t){return r.default(t)&&t%2!=0};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-plain-object.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object-like.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js"),o=function(t){if(!r.default(t)||!i.default(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-positive.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js"),i=function(t){return r.default(t)&&t>0};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-prototype.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.prototype,i=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-reg-exp.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js"),i=function(t){return r.default(t,"RegExp")};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js");e.default=function(t){return r.default(t,"String")}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-type.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={}.toString,i=function(t,e){return r.call(t)==="[object "+e+"]"};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-undefined.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return void 0===t};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/keys.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return r.default(t,function(n,r){i.default(t)&&"prototype"===r||e.push(r)}),e};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/last.js":function(t,e,n){"use strict";function r(t){if(i.default(t)){var e=t;return e[e.length-1]}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/lower-case.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-string.js"),i=function(t){return r.default(t).toLowerCase()};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/lower-first.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-string.js"),i=function(t){var e=r.default(t);return e.charAt(0).toLowerCase()+e.substring(1)};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/map-values.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object.js"),o=function(t){return t};e.default=function(t,e){void 0===e&&(e=o);var n={};return i.default(t)&&!r.default(t)&&Object.keys(t).forEach(function(r){n[r]=e(t[r],r)}),n}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/map.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),o=function(t,e){if(!i.default(t))return t;var n=[];return r.default(t,function(t,r){n.push(e(t,r))}),n};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/max-by.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js");e.default=function(t,e){if(i.default(t)){var n,a=t[0];n=o.default(e)?e(t[0]):t[0][e];var s;return r.default(t,function(t){(s=o.default(e)?e(t):t[e])>n&&(a=t,n=s)}),a}}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/memoize.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js");e.default=function(t,e){if(!r.default(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/min-by.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js");e.default=function(t,e){if(i.default(t)){var n,a=t[0];n=o.default(e)?e(t[0]):t[0][e];var s;return r.default(t,function(t){(s=o.default(e)?e(t):t[e])<n&&(a=t,n=s)}),a}}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/mix.js":function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function i(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/mod.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return(t%e+e)%e};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/noop.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/number2color.js":function(t,e,n){"use strict";function r(t){var e=i[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,i[t]=e}return e}Object.defineProperty(e,"__esModule",{value:!0});var i={};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/parse-radius.js":function(t,e,n){"use strict";function r(t){var e=0,n=0,r=0,o=0;return i.default(t)?1===t.length?e=n=r=o=t[0]:2===t.length?(e=r=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],o=t[3]):e=n=r=o=t,{r1:e,r2:n,r3:r,r4:o}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/pick.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-plain-object.js"),o=Object.prototype.hasOwnProperty;e.default=function(t,e){if(null===t||!i.default(t))return{};var n={};return r.default(e,function(e){o.call(t,e)&&(n[e]=t[e])}),n}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/pull-at.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),i=Array.prototype.splice,o=function(t,e){if(!r.default(t))return[];for(var n=t?e.length:0,o=n-1;n--;){var a=void 0,s=e[n];n!==o&&s===a||(a=s,i.call(t,s,1))}return t};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/pull.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Array.prototype,i=r.splice,o=r.indexOf,a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var a=e[r],s=-1;(s=o.call(t,a))>-1;)i.call(t,s,1);return t};e.default=a},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/reduce.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-plain-object.js"),a=function(t,e,n){if(!i.default(t)&&!o.default(t))return t;var a=n;return r.default(t,function(t,n){a=e(a,t,n)}),a};e.default=a},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/remove.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/pull-at.js"),o=function(t,e){var n=[];if(!r.default(t))return n;for(var o=-1,a=[],s=t.length;++o<s;){var u=t[o];e(u,o,t)&&(n.push(u),a.push(o))}return i.default(t,a),n};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/request-animation-frame.js":function(t,e,n){"use strict";function r(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/set.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-object.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-number.js");e.default=function(t,e,n){var a=t,s=i.default(e)?e.split("."):e;return s.forEach(function(t,e){e<s.length-1?(r.default(a[t])||(a[t]=o.default(s[e+1])?[]:{}),a=a[t]):a[t]=n}),t}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/size.js":function(t,e,n){"use strict";function r(t){return i.default(t)?0:o.default(t)?t.length:Object.keys(t).length}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/some.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1};e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/sort-by.js":function(t,e,n){"use strict";function r(t,e){var n;if(a.default(e))n=function(t,n){return e(t)-e(n)};else{var r=[];o.default(e)?r.push(e):i.default(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/starts-with.js":function(t,e,n){"use strict";function r(t,e){return!(!i.default(t)&&!o.default(t))&&t[0]===e}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-string.js");e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/substitute.js":function(t,e,n){"use strict";function r(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/throttle.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-array.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array-like.js");e.default=function(t){return r.default(t)?Array.prototype.slice.call(t):[]}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-degree.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=180/Math.PI,i=function(t){return r*t};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-integer.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=parseInt},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-radian.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Math.PI/180,i=function(t){return r*t};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-string.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js");e.default=function(t){return r.default(t)?"":t.toString()}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/union.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/uniq.js"),i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.default([].concat.apply([],t))};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/uniq.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/contains.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),o=function(t){var e=[];return i.default(t,function(t){r.default(e,t)||e.push(t)}),e};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/unique-id.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};e.default=function(t){return t=t||"g",r[t]?r[t]+=1:r[t]=1,t+r[t]}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/upper-case.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-string.js"),i=function(t){return r.default(t).toUpperCase()};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/upper-first.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/to-string.js"),i=function(t){var e=r.default(t);return e.charAt(0).toUpperCase()+e.substring(1)};e.default=i},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/values-of-key.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-array.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-nil.js");e.default=function(t,e){var n=[],a={};return t.forEach(function(t){var s=t[e];o.default(s)||(i.default(s)||(s=[s]),r.default(s,function(t){a[t]||(n.push(t),a[t]=!0)}))}),n}},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/values.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/each.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/is-function.js"),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return r.default(t,function(n,r){i.default(t)&&"prototype"===r||e.push(n)}),e};e.default=o},"./node_modules/_@antv_util@2.0.7@@antv/util/lib/wrap-behavior.js":function(t,e,n){"use strict";function r(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js":function(t,e){function n(t){var e=0,n=0,r=0,i=0;return t.map(function(t){t=t.slice();var o=t[0],a=o.toUpperCase();if(o!=a)switch(t[0]=a,o){case"a":t[6]+=r,t[7]+=i;break;case"v":t[1]+=i;break;case"h":t[1]+=r;break;default:for(var s=1;s<t.length;)t[s++]+=r,t[s++]+=i}switch(a){case"Z":r=e,i=n;break;case"H":r=t[1];break;case"V":i=t[1];break;case"M":r=e=t[1],i=n=t[2];break;default:r=t[t.length-2],i=t[t.length-1]}return t})}t.exports=n},"./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){return 1===t.length&&(t=r(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function r(t){return function(n,r){return e(t(n),r)}}function i(t,e){null==e&&(e=o);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return a}function o(t,e){return[t,e]}function a(t,e,n){var r,i,a,s,u=t.length,l=e.length,c=new Array(u*l);for(null==n&&(n=o),r=a=0;r<u;++r)for(s=t[r],i=0;i<l;++i,++a)c[a]=n(s,e[i]);return c}function s(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function u(t){return null===t?NaN:+t}function l(t,e){var n,r,i=t.length,o=0,a=-1,s=0,l=0;if(null==e)for(;++a<i;)isNaN(n=u(t[a]))||(r=n-s,s+=r/++o,l+=r*(n-s));else for(;++a<i;)isNaN(n=u(e(t[a],a,t)))||(r=n-s,s+=r/++o,l+=r*(n-s));if(o>1)return l/(o-1)}function c(t,e){var n=l(t,e);return n?Math.sqrt(n):n}function h(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function f(t){return function(){return t}}function p(t){return t}function d(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function v(t,e,n){var r,i,o,a,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=g(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o}function g(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=U?10:o>=V?5:o>=G?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=U?10:o>=V?5:o>=G?2:1)}function m(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=U?i*=10:o>=V?i*=5:o>=G&&(i*=2),e<t?-i:i}function y(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function _(){function t(t){var i,o,a=t.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(t[i],i,t);var u=n(s),l=u[0],c=u[1],h=r(s,l,c);Array.isArray(h)||(h=m(l,c,h),h=d(Math.ceil(l/h)*h,c,h));for(var f=h.length;h[0]<=l;)h.shift(),--f;for(;h[f-1]>c;)h.pop(),--f;var p,v=new Array(f+1);for(i=0;i<=f;++i)p=v[i]=[],p.x0=i>0?h[i-1]:l,p.x1=i<f?h[i]:c;for(i=0;i<a;++i)o=s[i],l<=o&&o<=c&&v[R(h,o,0,f)].push(t[i]);return v}var e=p,n=h,r=y;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:f(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:f([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:f(Array.isArray(e)?F.call(e):e),t):r},t}function b(t,e,n){if(null==n&&(n=u),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function x(t,n,r){return t=N.call(t,u).sort(e),Math.ceil((r-n)/(2*(b(t,.75)-b(t,.25))*Math.pow(t.length,-1/3)))}function w(t,e,n){return Math.ceil((n-e)/(3.5*c(t)*Math.pow(t.length,-1/3)))}function S(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r}function E(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=u(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=u(e(t[o],o,t)))?--i:a+=n;if(i)return a/i}function M(t,n){var r,i=t.length,o=-1,a=[];if(null==n)for(;++o<i;)isNaN(r=u(t[o]))||a.push(r);else for(;++o<i;)isNaN(r=u(n(t[o],o,t)))||a.push(r);return b(a.sort(e),.5)}function T(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n}function C(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}function A(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r}function P(t,n){if(r=t.length){var r,i,o=0,a=0,s=t[a];for(null==n&&(n=e);++o<r;)(n(i=t[o],s)<0||0!==n(s,s))&&(s=i,a=o);return 0===n(s,s)?a:void 0}}function k(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t}function I(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o}function O(t){if(!(i=t.length))return[];for(var e=-1,n=C(t,j),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function j(t){return t.length}function L(){return O(arguments)}var D=n(e),R=D.right,B=D.left,z=Array.prototype,F=z.slice,N=z.map,U=Math.sqrt(50),V=Math.sqrt(10),G=Math.sqrt(2);t.bisect=R,t.bisectRight=R,t.bisectLeft=B,t.ascending=e,t.bisector=n,t.cross=a,t.descending=s,t.deviation=c,t.extent=h,t.histogram=_,t.thresholdFreedmanDiaconis=x,t.thresholdScott=w,t.thresholdSturges=y,t.max=S,t.mean=E,t.median=M,t.merge=T,t.min=C,t.pairs=i,t.permute=A,t.quantile=b,t.range=d,t.scan=P,t.shuffle=k,t.sum=I,t.ticks=v,t.tickIncrement=g,t.tickStep=m,t.transpose=O,t.variance=l,t.zip=L,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==n)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(n(i=t[o],o,t),i)}else if(t)for(var s in t)r.set(s,t[s]);return r}function r(){function t(e,i,o,a){if(i>=c.length)return null!=r&&e.sort(r),null!=u?u(e):e;for(var s,l,h,f=-1,p=e.length,d=c[i++],v=n(),g=o();++f<p;)(h=v.get(s=d(l=e[f])+""))?h.push(l):v.set(s,[l]);return v.each(function(e,n){a(g,n,t(e,i,o,a))}),g}function e(t,n){if(++n>c.length)return t;var r,i=h[n-1];return null!=u&&n>=c.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r}var r,u,l,c=[],h=[];return l={object:function(e){return t(e,0,i,o)},map:function(e){return t(e,0,a,s)},entries:function(n){return e(t(n,0,a,s),0)},key:function(t){return c.push(t),l},sortKeys:function(t){return h[c.length-1]=t,l},sortValues:function(t){return r=t,l},rollup:function(t){return u=t,l}}}function i(){return{}}function o(t,e,n){t[e]=n}function a(){return n()}function s(t,e,n){t.set(e,n)}function u(){}function l(t,e){var n=new u;if(t instanceof u)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function c(t){var e=[];for(var n in t)e.push(n);return e}function h(t){var e=[];for(var n in t)e.push(t[n]);return e}function f(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}var p="$";e.prototype=n.prototype={constructor:e,has:function(t){return p+t in this},get:function(t){return this[p+t]},set:function(t,e){return this[p+t]=e,this},remove:function(t){var e=p+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===p&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===p&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===p&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===p&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===p&&++t;return t},empty:function(){for(var t in this)if(t[0]===p)return!1;return!0},each:function(t){for(var e in this)e[0]===p&&t(this[e],e.slice(1),this)}};var d=n.prototype;u.prototype=l.prototype={constructor:u,has:d.has,add:function(t){return t+="",this[p+t]=t,this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,each:d.each},t.nest=r,t.set=l,t.map=n,t.keys=c,t.values=h,t.entries=f,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-composite-projections@1.3.2@d3-composite-projections/d3-composite-projections.js":function(t,e,n){!function(t,r){r(e,n("./node_modules/_d3-geo@1.11.9@d3-geo/dist/d3-geo.js"),n("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))}(0,function(t,e,n){"use strict";function r(){}function i(t,e){t<O&&(O=t),t>L&&(L=t),e<j&&(j=e),e>D&&(D=e)}function o(t,n,r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),e.geoStream(r,t.stream(R));var s=R.result(),u=Math.min(i/(s[1][0]-s[0][0]),o/(s[1][1]-s[0][1])),l=+n[0][0]+(i-u*(s[1][0]+s[0][0]))/2,c=+n[0][1]+(o-u*(s[1][1]+s[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*u).translate([l,c])}function a(t,e,n){return o(t,[[0,0],e],n)}function s(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function u(){function t(t){var e=t[0],n=t[1];return f=null,l.point(e,n),f||(c.point(e,n),f)||(h.point(e,n),f)}function r(){return i=u=null,t}var i,u,l,c,h,f,p=e.geoAlbers(),d=e.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),v=e.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(t,e){f=[t,e]}};return t.invert=function(t){var e=p.scale(),n=p.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?d:i>=.166&&i<.234&&r>=-.214&&r<-.115?v:p).invert(t)},t.stream=function(t){return i&&u===t?i:i=s([p.stream(u=t),d.stream(t),v.stream(t)])},t.precision=function(t){return arguments.length?(p.precision(t),d.precision(t),v.precision(t),r()):p.precision()},t.scale=function(e){return arguments.length?(p.scale(e),d.scale(.35*e),v.scale(e),t.translate(p.translate())):p.scale()},t.translate=function(t){if(!arguments.length)return p.translate();var e=p.scale(),n=+t[0],i=+t[1];return l=p.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(g),c=d.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+I,i+.12*e+I],[n-.214*e-I,i+.234*e-I]]).stream(g),h=v.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+I,i+.166*e+I],[n-.115*e-I,i+.234*e-I]]).stream(g),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=p([-102.91,26.3]),n=p([-104,27.5]),r=p([-108,29.1]),i=p([-110,29.1]),o=p([-110,26.7]),a=p([-112.8,27.6]),s=p([-114.3,30.6]),u=p([-119.3,30.1]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(1070)}function l(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function c(){function t(t){var e=t[0],n=t[1];return v=null,u.point(e,n),v||(c.point(e,n),v)||(h.point(e,n),v)||(f.point(e,n),v)||(p.point(e,n),v)||(d.point(e,n),v)}function r(){return i=s=null,t}var i,s,u,c,h,f,p,d,v,g=e.geoAlbers(),m=e.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),y=e.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_=e.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),b=e.geoEquirectangular().rotate([173,14]),x=e.geoEquirectangular().rotate([-145,-16.8]),w={point:function(t,e){v=[t,e]}};return t.invert=function(t){var e=g.scale(),n=g.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?m:i>=.166&&i<.234&&r>=-.214&&r<-.115?y:i>=.2064&&i<.2413&&r>=.312&&r<.385?_:i>=.09&&i<.1197&&r>=-.4243&&r<-.3232?b:i>=-.0518&&i<.0895&&r>=-.4243&&r<-.3824?x:g).invert(t)},t.stream=function(t){return i&&s===t?i:i=l([g.stream(s=t),m.stream(t),y.stream(t),_.stream(t),b.stream(t),x.stream(t)])},t.precision=function(t){return arguments.length?(g.precision(t),m.precision(t),y.precision(t),_.precision(t),b.precision(t),x.precision(t),r()):g.precision()},t.scale=function(e){return arguments.length?(g.scale(e),m.scale(.35*e),y.scale(e),_.scale(e),b.scale(2*e),x.scale(e),t.translate(g.translate())):g.scale()},t.translate=function(t){if(!arguments.length)return g.translate();var e=g.scale(),n=+t[0],i=+t[1];return u=g.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(w),c=m.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+I,i+.12*e+I],[n-.214*e-I,i+.233*e-I]]).stream(w),h=y.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+I,i+.166*e+I],[n-.115*e-I,i+.233*e-I]]).stream(w),f=_.translate([n+.35*e,i+.224*e]).clipExtent([[n+.312*e+I,i+.2064*e+I],[n+.385*e-I,i+.233*e-I]]).stream(w),p=b.translate([n-.492*e,i+.09*e]).clipExtent([[n-.4243*e+I,i+.0903*e+I],[n-.3233*e-I,i+.1197*e-I]]).stream(w),d=x.translate([n-.408*e,i+.018*e]).clipExtent([[n-.4244*e+I,i-.0519*e+I],[n-.3824*e-I,i+.0895*e-I]]).stream(w),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=g([-110.4641,28.2805]),n=g([-104.0597,28.9528]),r=g([-103.7049,25.1031]),i=g([-109.8337,24.4531]),o=g([-124.4745,28.1407]),a=g([-110.931,30.8844]),s=g([-109.8337,24.4531]),u=g([-122.4628,21.8562]),l=g([-76.8579,25.1544]),c=g([-72.429,24.2097]),h=g([-72.8265,22.7056]),f=g([-77.1852,23.6392]),p=g([-125.0093,29.7791]),d=g([-118.5193,31.3262]),v=g([-118.064,29.6912]),m=g([-124.4369,28.169]),y=g([-128.1314,37.4582]),_=g([-125.2132,38.214]),b=g([-122.3616,30.5115]),x=g([-125.0315,29.8211]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath(),t.moveTo(l[0],l[1]),t.lineTo(c[0],c[1]),t.lineTo(h[0],h[1]),t.lineTo(h[0],h[1]),t.lineTo(f[0],f[1]),t.closePath(),t.moveTo(p[0],p[1]),t.lineTo(d[0],d[1]),t.lineTo(v[0],v[1]),t.lineTo(v[0],v[1]),t.lineTo(m[0],m[1]),t.closePath(),t.moveTo(y[0],y[1]),t.lineTo(_[0],_[1]),t.lineTo(b[0],b[1]),t.lineTo(b[0],b[1]),t.lineTo(x[0],x[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(1070)}function h(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function f(){function t(t){var e=t[0],n=t[1];return c=null,u.point(e,n),c||(l.point(e,n),c)}function r(){return i=s=null,t}var i,s,u,l,c,f=e.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),p=e.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),d={point:function(t,e){c=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.05346&&i<.0897&&r>=-.13388&&r<-.0322?p:f).invert(t)},t.stream=function(t){return i&&s===t?i:i=h([f.stream(s=t),p.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),p.precision(t),r()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),p.scale(e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),n=+t[0],i=+t[1];return u=f.translate(t).clipExtent([[n-.06857*e,i-.1288*e],[n+.13249*e,i+.06*e]]).stream(d),l=p.translate([n+.1*e,i-.094*e]).clipExtent([[n-.1331*e+I,i+.053457*e+I],[n-.0354*e-I,i+.08969*e-I]]).stream(d),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=f([-14.034675,34.965007]),n=f([-7.4208899,35.536988]),r=f([-7.3148275,33.54359]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(2700)}function p(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function d(){function t(t){var e=t[0],n=t[1];return h=null,u.point(e,n),h||(l.point(e,n),h)||(c.point(e,n),h)}function r(){return i=s=null,t}var i,s,u,l,c,h,f=e.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),d=e.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),v=e.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),g={point:function(t,e){h=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.0093&&i<.03678&&r>=-.03875&&r<-.0116?d:i>=-.0412&&i<.0091&&r>=-.07782&&r<-.01166?v:f).invert(t)},t.stream=function(t){return i&&s===t?i:i=p([f.stream(s=t),d.stream(t),v.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),d.precision(t),v.precision(t),r()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),d.scale(e),v.scale(.6*e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),n=+t[0],i=+t[1];return u=f.translate(t).clipExtent([[n-.0115*e,i-.1138*e],[n+.2105*e,i+.0673*e]]).stream(g),l=d.translate([n-.0265*e,i+.025*e]).clipExtent([[n-.0388*e+I,i+.0093*e+I],[n-.0116*e-I,i+.0368*e-I]]).stream(g),c=v.translate([n-.045*e,i+-.02*e]).clipExtent([[n-.0778*e+I,i-.0413*e+I],[n-.0117*e-I,i+.0091*e-I]]).stream(g),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=f([-12.8351,38.7113]),n=f([-10.8482,38.7633]),r=f([-10.8181,37.2072]),i=f([-12.7345,37.1573]),o=f([-16.0753,41.4436]),a=f([-10.9168,41.6861]),s=f([-10.8557,38.7747]),u=f([-15.6728,38.5505]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(4200)}function v(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function g(){function t(t){var e=t[0],n=t[1];return c=null,u.point(e,n),c||(l.point(e,n),c)}function r(){return i=s=null,t}var i,s,u,l,c,h=e.geoMercator().rotate([80,1.5]),f=e.geoMercator().rotate([90.73,1]),p={point:function(t,e){c=[t,e]}};return t.invert=function(t){var e=h.scale(),n=h.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.0676&&i<-.026&&r>=-.0857&&r<-.0263?f:h).invert(t)},t.stream=function(t){return i&&s===t?i:i=v([h.stream(s=t),f.stream(t)])},t.precision=function(t){return arguments.length?(h.precision(t),f.precision(t),r()):h.precision()},t.scale=function(e){return arguments.length?(h.scale(e),f.scale(e),t.translate(h.translate())):h.scale()},t.translate=function(t){if(!arguments.length)return h.translate();var e=h.scale(),n=+t[0],i=+t[1];return u=h.translate(t).clipExtent([[n-.0262*e,i-.0734*e],[n+.1741*e,i+.079*e]]).stream(p),l=f.translate([n-.06*e,i-.04*e]).clipExtent([[n-.0857*e+I,i-.0676*e+I],[n-.0263*e-I,i-.026*e-I]]).stream(p),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=h([-84.9032,2.3757]),n=h([-81.5047,2.3708]),r=h([-81.5063,-.01]),i=h([-84.9086,-.005]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(3500)}function m(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function y(){function t(t){var e=t[0],n=t[1];return f=null,u.point(e,n),f||(l.point(e,n),f)||(c.point(e,n),f)||(h.point(e,n),f)}function r(){return i=s=null,t}var i,s,u,l,c,h,f,p=e.geoTransverseMercator().rotate([72,37]),d=e.geoStereographic().rotate([72,0]),v=e.geoMercator().rotate([80,33.5]),g=e.geoMercator().rotate([110,25]),y={point:function(t,e){f=[t,e]}};return t.invert=function(t){var e=p.scale(),n=p.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.2582&&i<.32&&r>=-.1036&&r<-.087?d:i>=-.01298&&i<.0133&&r>=-.11396&&r<-.05944?v:i>=.01539&&i<.03911&&r>=-.089&&r<-.0588?g:p).invert(t)},t.stream=function(t){return i&&s===t?i:i=m([p.stream(s=t),d.stream(t),v.stream(t),g.stream(t)])},t.precision=function(t){return arguments.length?(p.precision(t),d.precision(t),v.precision(t),g.precision(t),r()):p.precision()},t.scale=function(e){return arguments.length?(p.scale(e),d.scale(.15*e),v.scale(1.5*e),g.scale(1.5*e),t.translate(p.translate())):p.scale()},t.translate=function(t){if(!arguments.length)return p.translate();var e=p.scale(),n=+t[0],i=+t[1];return u=p.translate(t).clipExtent([[n-.059*e,i-.3835*e],[n+.4498*e,i+.3375*e]]).stream(y),l=d.translate([n-.087*e,i+.17*e]).clipExtent([[n-.1166*e+I,i+.2582*e+I],[n-.06*e-I,i+.32*e-I]]).stream(y),c=v.translate([n-.092*e,i-0*e]).clipExtent([[n-.114*e+I,i-.013*e+I],[n-.0594*e-I,i+.0133*e-I]]).stream(y),h=g.translate([n-.089*e,i-.0265*e]).clipExtent([[n-.089*e+I,i+.0154*e+I],[n-.0588*e-I,i+.0391*e-I]]).stream(y),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=p([-82.6999,-51.3043]),n=p([-77.5442,-51.6631]),r=p([-78.0254,-55.186]),i=p([-83.6106,-54.7785]),o=p([-80.0638,-35.984]),a=p([-76.2153,-36.1811]),s=p([-76.2994,-37.6839]),u=p([-80.2231,-37.4757]),l=p([-78.442,-37.706]),c=p([-76.263,-37.8054]),h=p([-76.344,-39.1595]),f=p([-78.5638,-39.0559]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath(),t.moveTo(l[0],l[1]),t.lineTo(c[0],c[1]),t.lineTo(h[0],h[1]),t.lineTo(h[0],h[1]),t.lineTo(f[0],f[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(700)}function _(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function b(){function t(t){var e=t[0],n=t[1];return h=null,u.point(e,n),h||(l.point(e,n),h)||(c.point(e,n),h)}function r(){return i=s=null,t}var i,s,u,l,c,h,f=e.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),p=e.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),d=e.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),v={point:function(t,e){h=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.10925&&i<-.02701&&r>=-.135&&r<-.0397?p:i>=.04713&&i<.11138&&r>=-.03986&&r<.051?d:f).invert(t)},t.stream=function(t){return i&&s===t?i:i=_([f.stream(s=t),p.stream(t),d.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),p.precision(t),d.precision(t),r()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),p.scale(e),d.scale(.7*e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),n=+t[0],i=+t[1];return u=f.translate(t).clipExtent([[n-.1352*e,i-.1091*e],[n+.117*e,i+.098*e]]).stream(v),l=p.translate([n-.0425*e,i-.005*e]).clipExtent([[n-.135*e+I,i-.1093*e+I],[n-.0397*e-I,i-.027*e-I]]).stream(v),c=d.translate(t).clipExtent([[n-.0399*e+I,i+.0471*e+I],[n+.051*e-I,i+.1114*e-I]]).stream(v),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=f([126.01320483689143,41.621090310215585]),n=f([133.04304387025903,42.15087523707186]),r=f([133.3021766080688,37.43975444725098]),i=f([126.87889168628224,36.95488945159779]),o=f([132.9,29.8]),a=f([134,33]),s=f([139.3,33.2]),u=f([139.16,30.5]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(2200)}function x(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function w(){function t(t){var e=t[0],n=t[1];return b=null,u.point(e,n),b||(l.point(e,n),b)||(c.point(e,n),b)||(h.point(e,n),b)||(f.point(e,n),b)||(p.point(e,n),b)||(d.point(e,n),b)||(v.point(e,n),b)||(g.point(e,n),b)||(m.point(e,n),b)||(y.point(e,n),b)||(_.point(e,n),b)}function r(){return i=s=null,t}var i,s,u,l,c,h,f,p,d,v,g,m,y,_,b,w=e.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),S=e.geoMercator().center([-53.2,3.9]),E=e.geoMercator().center([-61.03,14.67]),M=e.geoMercator().center([-61.46,16.14]),T=e.geoMercator().center([-62.85,17.92]),C=e.geoMercator().center([-56.23,46.93]),A=e.geoMercator().center([45.16,-12.8]),P=e.geoMercator().center([55.52,-21.13]),k=e.geoMercator().center([165.8,-21.07]),O=e.geoMercator().center([-178.1,-14.3]),j=e.geoMercator().center([-150.55,-17.11]),L=e.geoMercator().center([-150.55,-17.11]),D={point:function(t,e){b=[t,e]}};return t.invert=function(t){var e=w.scale(),n=w.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.029&&i<.0864&&r>=-.14&&r<-.0996?S:i>=0&&i<.029&&r>=-.14&&r<-.0996?E:i>=-.032&&i<0&&r>=-.14&&r<-.0996?M:i>=-.052&&i<-.032&&r>=-.14&&r<-.0996?T:i>=-.076&&i<.052&&r>=-.14&&r<-.0996?C:i>=-.076&&i<-.052&&r>=.0967&&r<.1371?A:i>=-.052&&i<-.02&&r>=.0967&&r<.1371?P:i>=-.02&&i<.012&&r>=.0967&&r<.1371?k:i>=.012&&i<.033&&r>=.0967&&r<.1371?O:i>=.033&&i<.0864&&r>=.0967&&r<.1371?j:w).invert(t)},t.stream=function(t){return i&&s===t?i:i=x([w.stream(s=t),S.stream(t),E.stream(t),M.stream(t),T.stream(t),C.stream(t),A.stream(t),P.stream(t),k.stream(t),O.stream(t),j.stream(t),L.stream(t)])},t.precision=function(t){return arguments.length?(w.precision(t),S.precision(t),E.precision(t),M.precision(t),T.precision(t),C.precision(t),A.precision(t),P.precision(t),k.precision(t),O.precision(t),j.precision(t),L.precision(t),r()):w.precision()},t.scale=function(e){return arguments.length?(w.scale(e),S.scale(.6*e),E.scale(1.6*e),M.scale(1.4*e),T.scale(5*e),C.scale(1.3*e),A.scale(1.6*e),P.scale(1.2*e),k.scale(.3*e),O.scale(2.7*e),j.scale(.5*e),L.scale(.06*e),t.translate(w.translate())):w.scale()},t.translate=function(t){if(!arguments.length)return w.translate();var e=w.scale(),n=+t[0],i=+t[1];return u=w.translate(t).clipExtent([[n-.0996*e,i-.0908*e],[n+.0967*e,i+.0864*e]]).stream(D),l=S.translate([n-.12*e,i+.0575*e]).clipExtent([[n-.14*e+I,i+.029*e+I],[n-.0996*e-I,i+.0864*e-I]]).stream(D),c=E.translate([n-.12*e,i+.013*e]).clipExtent([[n-.14*e+I,i+0*e+I],[n-.0996*e-I,i+.029*e-I]]).stream(D),h=M.translate([n-.12*e,i-.014*e]).clipExtent([[n-.14*e+I,i-.032*e+I],[n-.0996*e-I,i+0*e-I]]).stream(D),f=T.translate([n-.12*e,i-.044*e]).clipExtent([[n-.14*e+I,i-.052*e+I],[n-.0996*e-I,i-.032*e-I]]).stream(D),p=C.translate([n-.12*e,i-.065*e]).clipExtent([[n-.14*e+I,i-.076*e+I],[n-.0996*e-I,i-.052*e-I]]).stream(D),d=A.translate([n+.117*e,i-.064*e]).clipExtent([[n+.0967*e+I,i-.076*e+I],[n+.1371*e-I,i-.052*e-I]]).stream(D),v=P.translate([n+.116*e,i-.0355*e]).clipExtent([[n+.0967*e+I,i-.052*e+I],[n+.1371*e-I,i-.02*e-I]]).stream(D),g=k.translate([n+.116*e,i-.0048*e]).clipExtent([[n+.0967*e+I,i-.02*e+I],[n+.1371*e-I,i+.012*e-I]]).stream(D),m=O.translate([n+.116*e,i+.022*e]).clipExtent([[n+.0967*e+I,i+.012*e+I],[n+.1371*e-I,i+.033*e-I]]).stream(D),_=L.translate([n+.11*e,i+.045*e]).clipExtent([[n+.0967*e+I,i+.033*e+I],[n+.1371*e-I,i+.06*e-I]]).stream(D),y=j.translate([n+.115*e,i+.075*e]).clipExtent([[n+.0967*e+I,i+.06*e+I],[n+.1371*e-I,i+.0864*e-I]]).stream(D),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e,n,r,i;e=w([-7.938886725111036,43.7219460918835]),n=w([-4.832080896458295,44.12930268549372]),r=w([-4.205299743793263,40.98096346967365]),i=w([-7.071796453126152,40.610037319181444]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-8.42751373617692,45.32889452553031]),n=w([-5.18599305777107,45.7566442062976]),r=w([-4.832080905154431,44.129302726751426]),i=w([-7.938886737126192,43.72194613263854]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-9.012656899657046,47.127733821030176]),n=w([-5.6105244772793155,47.579777861410626]),r=w([-5.185993067168585,45.756644248170346]),i=w([-8.427513749141811,45.32889456686326]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-9.405747558985553,48.26506375557457]),n=w([-5.896175018439575,48.733352850851624]),r=w([-5.610524487556043,47.57977790393761]),i=w([-9.012656913808351,47.127733862971255]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-9.908436061346974,49.642448789505856]),n=w([-6.262026716233124,50.131426841787174]),r=w([-5.896175029331232,48.73335289377258]),i=w([-9.40574757396393,48.26506379787767]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([11.996907706504462,50.16039028163579]),n=w([15.649907879773343,49.68279246765253]),r=w([15.156712840526632,48.30371557625831]),i=w([11.64122661754411,48.761078240546816]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([11.641226606955788,48.7610781975889]),n=w([15.156712825832164,48.30371553390465]),r=w([14.549932166241172,46.4866532486199]),i=w([11.204443787952183,46.91899233914248]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([11.204443778297161,46.918992296823646]),n=w([14.549932152815039,46.486653206856396]),r=w([13.994409796764009,44.695833444323256]),i=w([10.805306599253848,45.105133870684924]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([10.805306590412085,45.10513382903308]),n=w([13.99440978444733,44.695833403183606]),r=w([13.654633799024392,43.53552468558152]),i=w([10.561516803980956,43.930671459798624]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([10.561516795617383,43.93067141859757]),n=w([13.654633787361952,43.5355246448671]),r=w([12.867691604239901,40.640701985019405]),i=w([9.997809515987688,41.00288343254471]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([10.8,42.4]),n=w([12.8,42.13]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(2700)}function S(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function E(){function t(t){var e=t[0],n=t[1];return b=null,u.point(e,n),b||(c.point(e,n),b)||(g.point(e,n),b)||(l.point(e,n),b)||(v.point(e,n),b)||(d.point(e,n),b)||(m.point(e,n),b)||(y.point(e,n),b)||(_.point(e,n),b)||(h.point(e,n),b)||(f.point(e,n),b)||(p.point(e,n),b)}function r(){return i=s=null,t}var i,s,u,l,c,h,f,p,d,v,g,m,y,_,b,x=e.geoConicConformal().rotate([-10,-53]).parallels([0,60]),w=e.geoMercator().center([-61.46,16.14]),E=e.geoMercator().center([-53.2,3.9]),M=e.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),T=e.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),C=e.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),A=e.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),P=e.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),k=e.geoMercator().center([-61.03,14.67]),O=e.geoMercator().center([45.16,-12.8]),j=e.geoMercator().center([55.52,-21.13]),L=e.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),D={point:function(t,e){b=[t,e]}};return t.invert=function(t){var e=x.scale(),n=x.translate(),r=(t[0]-(n[0]+.08*e))/e,i=(t[1]-n[1])/e;return(i>=-.31&&i<-.24&&r>=.14&&r<.24?w:i>=-.24&&i<-.17&&r>=.14&&r<.24?E:i>=-.17&&i<-.12&&r>=.21&&r<.24?T:i>=-.17&&i<-.14&&r>=.14&&r<.165?C:i>=-.17&&i<-.1&&r>=.14&&r<.24?M:i>=-.1&&i<-.03&&r>=.14&&r<.24?A:i>=-.03&&i<.04&&r>=.14&&r<.24?P:i>=-.31&&i<-.24&&r>=.24&&r<.34?k:i>=-.24&&i<-.17&&r>=.24&&r<.34?O:i>=-.17&&i<-.1&&r>=.24&&r<.34?j:i>=-.1&&i<-.03&&r>=.24&&r<.34?L:x).invert(t)},t.stream=function(t){return i&&s===t?i:i=S([x.stream(s=t),E.stream(t),k.stream(t),w.stream(t),P.stream(t),A.stream(t),O.stream(t),j.stream(t),L.stream(t),M.stream(t),T.stream(t),C.stream(t)])},t.precision=function(t){return arguments.length?(x.precision(t),E.precision(t),k.precision(t),w.precision(t),P.precision(t),A.precision(t),O.precision(t),j.precision(t),L.precision(t),M.precision(t),T.precision(t),C.precision(t),r()):x.precision()},t.scale=function(e){return arguments.length?(x.scale(e),w.scale(3*e),E.scale(.8*e),k.scale(3.5*e),j.scale(2.7*e),M.scale(2*e),T.scale(2*e),C.scale(2*e),A.scale(3*e),P.scale(e),O.scale(5.5*e),L.scale(6*e),t.translate(x.translate())):x.scale()},t.translate=function(t){if(!arguments.length)return x.translate();var e=x.scale(),n=+t[0],i=+t[1];return u=x.translate([n-.08*e,i]).clipExtent([[n-.51*e,i-.33*e],[n+.5*e,i+.33*e]]).stream(D),l=w.translate([n+.19*e,i-.275*e]).clipExtent([[n+.14*e+I,i-.31*e+I],[n+.24*e-I,i-.24*e-I]]).stream(D),c=E.translate([n+.19*e,i-.205*e]).clipExtent([[n+.14*e+I,i-.24*e+I],[n+.24*e-I,i-.17*e-I]]).stream(D),h=M.translate([n+.19*e,i-.135*e]).clipExtent([[n+.14*e+I,i-.17*e+I],[n+.24*e-I,i-.1*e-I]]).stream(D),f=T.translate([n+.225*e,i-.147*e]).clipExtent([[n+.21*e+I,i-.17*e+I],[n+.24*e-I,i-.12*e-I]]).stream(D),p=C.translate([n+.153*e,i-.15*e]).clipExtent([[n+.14*e+I,i-.17*e+I],[n+.165*e-I,i-.14*e-I]]).stream(D),d=A.translate([n+.19*e,i-.065*e]).clipExtent([[n+.14*e+I,i-.1*e+I],[n+.24*e-I,i-.03*e-I]]).stream(D),v=P.translate([n+.19*e,i+.005*e]).clipExtent([[n+.14*e+I,i-.03*e+I],[n+.24*e-I,i+.04*e-I]]).stream(D),g=k.translate([n+.29*e,i-.275*e]).clipExtent([[n+.24*e+I,i-.31*e+I],[n+.34*e-I,i-.24*e-I]]).stream(D),m=O.translate([n+.29*e,i-.205*e]).clipExtent([[n+.24*e+I,i-.24*e+I],[n+.34*e-I,i-.17*e-I]]).stream(D),y=j.translate([n+.29*e,i-.135*e]).clipExtent([[n+.24*e+I,i-.17*e+I],[n+.34*e-I,i-.1*e-I]]).stream(D),_=L.translate([n+.29*e,i-.065*e]).clipExtent([[n+.24*e+I,i-.1*e+I],[n+.34*e-I,i-.03*e-I]]).stream(D),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e,n,r,i;e=x([42.45755610828648,63.343658547914934]),n=x([52.65837266667029,59.35045080290929]),r=x([47.19754502247785,56.12653496548117]),i=x([37.673034273363044,59.61638268506111]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([59.41110754003403,62.35069727399336]),n=x([66.75050228640794,57.11797303636038]),r=x([60.236065725110436,54.63331433818992]),i=x([52.65837313153311,59.350450804599355]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([48.81091130080243,66.93353402634641]),n=x([59.41110730654679,62.35069740653086]),r=x([52.6583728974441,59.3504509222445]),i=x([42.45755631675751,63.34365868805821]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([31.054198418446475,52.1080673766184]),n=x([39.09869284884117,49.400700047190554]),r=x([36.0580811499175,46.02944174908498]),i=x([28.690508588835726,48.433126979386415]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([33.977877745912025,55.849945501331]),n=x([42.75328432167726,52.78455122462353]),r=x([39.09869297540224,49.400700176148625]),i=x([31.05419851807008,52.10806751810923]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([52.658372900759296,59.35045068526415]),n=x([60.23606549583304,54.63331423800264]),r=x([54.6756370953122,51.892298789399455]),i=x([47.19754524788189,56.126534861222794]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([47.19754506082455,56.126534735591456]),n=x([54.675636900123514,51.892298681337095]),r=x([49.94448648951486,48.98775484983285]),i=x([42.75328468716108,52.78455126060818]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([42.75328453416769,52.78455113209101]),n=x([49.94448632339758,48.98775473706457]),r=x([45.912339990394315,45.99361784987003]),i=x([39.09869317356607,49.40070009378711]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([37.673034114296634,59.61638254183119]),n=x([47.197544835420544,56.126534839849846]),r=x([42.75328447467064,52.78455135314068]),i=x([33.977877870363905,55.849945644671145]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([44.56748486446032,57.26489367845818]),r=x([43.9335791193588,53.746540942601726]),i=x([43,56]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=x([37.673034114296634,59.61638254183119]),n=x([40.25902691953466,58.83002044222639]),r=x([38.458270492742024,57.26232178028002]),i=x([35.97754948030156,58.00266637992386]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(750)}function M(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function T(){function t(t){var e=t[0],n=t[1];return c=null,u.point(e,n),c||(l.point(e,n),c)}function r(){return i=s=null,t}var i,s,u,l,c,h=e.geoMercator().center([105.25,4]),f=e.geoMercator().center([118.65,2.86]),p={point:function(t,e){c=[t,e]}};return t.invert=function(t){var e=h.scale(),n=h.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.0521&&i<.0229&&r>=-.0111&&r<.1?f:h).invert(t)},t.stream=function(t){return i&&s===t?i:i=M([h.stream(s=t),f.stream(t)])},t.precision=function(t){return arguments.length?(h.precision(t),f.precision(t),r()):h.precision()},t.scale=function(e){return arguments.length?(h.scale(e),f.scale(.615*e),t.translate(h.translate())):h.scale()},t.translate=function(t){if(!arguments.length)return h.translate();var e=h.scale(),n=+t[0],i=+t[1];return u=h.translate(t).clipExtent([[n-.11*e,i-.0521*e],[n-.0111*e,i+.0521*e]]).stream(p),l=f.translate([n+.09*e,i-0*e]).clipExtent([[n-.0111*e+I,i-.0521*e+I],[n+.1*e-I,i+.024*e-I]]).stream(p),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=h([106.3214,2.0228]),n=h([105.1843,2.3761]),r=h([104.2151,3.3618]),i=h([104.215,4.5651]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(4800)}function C(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function A(){function t(t){var e=t[0],n=t[1];return h=null,u.point(e,n),h||(l.point(e,n),h)||(c.point(e,n),h)}function r(){return i=s=null,t}var i,s,u,l,c,h,f=e.geoMercator().rotate([-9.5,-1.5]),p=e.geoMercator().rotate([-8.6,-3.5]),d=e.geoMercator().rotate([-5.6,1.45]),v={point:function(t,e){h=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.02&&i<0&&r>=-.038&&r<-.005?p:i>=0&&i<.02&&r>=-.038&&r<-.005?d:f).invert(t)},t.stream=function(t){return i&&s===t?i:i=C([f.stream(s=t),p.stream(t),d.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),p.precision(t),d.precision(t),r()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),p.scale(1.5*e),d.scale(4*e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),n=+t[0],i=+t[1];return u=f.translate(t).clipExtent([[n-.005*e,i-.02*e],[n+.038*e,i+.02*e]]).stream(v),l=p.translate([n-.025*e,i-.01*e]).clipExtent([[n-.038*e+I,i-.02*e+I],[n-.005*e-I,i+0*e-I]]).stream(v),c=d.translate([n-.025*e,i+.01*e]).clipExtent([[n-.038*e+I,i-0*e+I],[n-.005*e-I,i+.02*e-I]]).stream(v),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e,n,r,i;e=f([9.21327272751682,2.645820439454123]),n=f([11.679126293239872,2.644755519268689]),r=f([11.676845389029227,.35307824637606433]),i=f([9.213572917774014,.35414205204417754]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=f([7.320873711543669,2.64475551449975]),n=f([9.213272722738658,2.645820434679803]),r=f([9.213422896480349,1.4999812505283054]),i=f([7.322014760520787,1.4989168878985566]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=f([7.3220147605302905,1.4989168783492766]),n=f([9.213422896481598,1.499981240979021]),r=f([9.213572912999604,.354142056817247]),i=f([7.323154615739809,.353078251154504]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(12e3)}function P(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function k(){function t(t){var e=t[0],n=t[1];return c=null,u.point(e,n),c||(l.point(e,n),c)}function r(){return i=s=null,t}var i,s,u,l,c,h=e.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),f=e.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),p={point:function(t,e){c=[t,e]}};return t.invert=function(t){var e=h.scale(),n=h.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.089&&i<.06&&r>=.029&&r<.046?f:h).invert(t)},t.stream=function(t){return i&&s===t?i:i=P([h.stream(s=t),f.stream(t)])},t.precision=function(t){return arguments.length?(h.precision(t),f.precision(t),r()):h.precision()},t.scale=function(e){return arguments.length?(h.scale(e),f.scale(e),t.translate(h.translate())):h.scale()},t.translate=function(t){if(!arguments.length)return h.translate();var e=h.scale(),n=+t[0],i=+t[1];return u=h.translate(t).clipExtent([[n-.065*e,i-.089*e],[n+.075*e,i+.089*e]]).stream(p),l=f.translate([n+.01*e,i+.025*e]).clipExtent([[n+.029*e+I,i-.089*e+I],[n+.046*e-I,i-.06*e-I]]).stream(p),r()},t.fitExtent=function(e,n){return o(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e,n,r,i;e=h([-1.113205870242365,59.64920050773357]),n=h([.807899092399606,59.59085836472269]),r=h([.5778611961420386,57.93467822832577]),i=h([-1.25867782078448,57.99029450085142]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(2800)}var I=1e-6,O=1/0,j=O,L=-O,D=L,R={point:i,lineStart:r,lineEnd:r,polygonStart:r,polygonEnd:r,result:function(){var t=[[O,j],[L,D]];return L=D=-(j=O=1/0),t}};t.geoAlbersUk=k,t.geoAlbersUsa=u,t.geoAlbersUsaTerritories=c,t.geoConicConformalEurope=E,t.geoConicConformalFrance=w,t.geoConicConformalPortugal=d,t.geoConicConformalSpain=f,t.geoConicEquidistantJapan=b,t.geoMercatorEcuador=g,t.geoMercatorEquatorialGuinea=A,t.geoMercatorMalaysia=T,t.geoTransverseMercatorChile=y,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function n(t,n){var r=e(t);return function(e,i){return n(r(e),i,t)}}function r(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function i(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function o(t){return t<0?"-"+i(-t,6):t>9999?"+"+i(t,6):i(t,4)}function a(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":o(t.getUTCFullYear())+"-"+i(t.getUTCMonth()+1,2)+"-"+i(t.getUTCDate(),2)+(a?"T"+i(e,2)+":"+i(n,2)+":"+i(r,2)+"."+i(a,3)+"Z":r?"T"+i(e,2)+":"+i(n,2)+":"+i(r,2)+"Z":n||e?"T"+i(e,2)+":"+i(n,2)+"Z":"")}function s(t){function i(t,r){var i,a,s=o(t,function(t,o){if(i)return i(t,o-1);a=t,i=r?n(t,r):e(t)});return s.columns=a||[],s}function o(t,e){function n(){if(u)return c;if(d)return d=!1,l;var e,n,r=a;if(t.charCodeAt(r)===h){for(;a++<o&&t.charCodeAt(a)!==h||t.charCodeAt(++a)===h;);return(e=a)>=o?u=!0:(n=t.charCodeAt(a++))===f?d=!0:n===p&&(d=!0,t.charCodeAt(a)===f&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<o;){if((n=t.charCodeAt(e=a++))===f)d=!0;else if(n===p)d=!0,t.charCodeAt(a)===f&&++a;else if(n!==_)continue;return t.slice(r,e)}return u=!0,t.slice(r,o)}var r,i=[],o=t.length,a=0,s=0,u=o<=0,d=!1;for(t.charCodeAt(o-1)===f&&--o,t.charCodeAt(o-1)===p&&--o;(r=n())!==c;){for(var v=[];r!==l&&r!==c;)v.push(r),r=n();e&&null==(v=e(v,s++))||i.push(v)}return i}function s(e,n){return e.map(function(e){return n.map(function(t){return m(e[t])}).join(t)})}function u(e,n){return null==n&&(n=r(e)),[n.map(m).join(t)].concat(s(e,n)).join("\n")}function d(t,e){return null==e&&(e=r(t)),s(t,e).join("\n")}function v(t){return t.map(g).join("\n")}function g(e){return e.map(m).join(t)}function m(t){return null==t?"":t instanceof Date?a(t):y.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var y=new RegExp('["'+t+"\n\r]"),_=t.charCodeAt(0);return{parse:i,parseRows:o,format:u,formatBody:d,formatRows:v,formatRow:g,formatValue:m}}function u(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;k&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var l={},c={},h=34,f=10,p=13,d=s(","),v=d.parse,g=d.parseRows,m=d.format,y=d.formatBody,_=d.formatRows,b=d.formatRow,x=d.formatValue,w=s("\t"),S=w.parse,E=w.parseRows,M=w.format,T=w.formatBody,C=w.formatRows,A=w.formatRow,P=w.formatValue,k=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=u,t.csvFormat=m,t.csvFormatBody=y,t.csvFormatRow=b,t.csvFormatRows=_,t.csvFormatValue=x,t.csvParse=v,t.csvParseRows=g,t.dsvFormat=s,t.tsvFormat=M,t.tsvFormatBody=T,t.tsvFormatRow=A,t.tsvFormatRows=C,t.tsvFormatValue=P,t.tsvParse=S,t.tsvParseRows=E,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js":function(t,e,n){!function(t,r){r(e,n("./node_modules/_d3-geo@1.11.9@d3-geo/dist/d3-geo.js"),n("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))}(0,function(t,e,n){"use strict";function r(t){return t?t/Math.sin(t):1}function i(t){return t>1?Je:t<-1?-Je:Math.asin(t)}function o(t){return t>1?0:t<-1?Ke:Math.acos(t)}function a(t){return t>0?Math.sqrt(t):0}function s(t){return((t=ze(2*t))-1)/(t+1)}function u(t){return(ze(t)-ze(-t))/2}function l(t){return(ze(t)+ze(-t))/2}function c(t){return Ne(t+a(t*t+1))}function h(t){return Ne(t+a(t*t-1))}function f(t){function e(t,e){var n=Be(t),i=Be(e),o=Ye(e),a=i*n,s=-((1-a?Ne((1+a)/2)/(1-a):-.5)+r/(1+a));return[s*i*Ye(t),s*o]}var n=Xe(t/2),r=2*Ne(Be(t/2))/(n*n);return e.invert=function(e,n){var o,s=a(e*e+n*n),u=-t/2,l=50;if(!s)return[0,0];do{var c=u/2,h=Be(c),f=Ye(c),p=Xe(c),d=Ne(1/h);u-=o=(2/p*d-r*p-s)/(-d/(f*f)+1-r/(2*h*h))}while(Le(o)>We&&--l>0);var v=Ye(u);return[Re(e*v,s*Be(u)),i(n*v/s)]},e}function p(t,e){var n=Be(e),i=r(o(n*Be(t/=2)));return[2*n*Ye(t)*i,Ye(e)*i]}function d(t){function e(t,e){var s=Be(e),u=Be(t/=2);return[(1+s)*Ye(t),(i*e>-Re(u,o)-.001?0:10*-i)+a+Ye(e)*r-(1+s)*n*u]}var n=Ye(t),r=Be(t),i=t>=0?1:-1,o=Xe(i*t),a=(1+n-r)/2;return e.invert=function(t,e){var s=0,u=0,l=50;do{var c=Be(s),h=Ye(s),f=Be(u),p=Ye(u),d=1+f,v=d*h-t,g=a+p*r-d*n*c-e,m=d*c/2,y=-h*p,_=n*d*h/2,b=r*f+n*c*p,x=y*_-b*m,w=(g*y-v*b)/x/2,S=(v*_-g*m)/x;s-=w,u-=S}while((Le(w)>We||Le(S)>We)&&--l>0);return i*u>-Re(Be(s),o)-.001?[2*s,u]:null},e}function v(t,e){var n=Xe(e/2),r=a(1-n*n),i=1+r*Be(t/=2),o=Ye(t)*r/i,s=n/i,u=o*o,l=s*s;return[4/3*o*(3+u-3*l),4/3*s*(3+3*u-l)]}function g(t,e){var n=Le(e);return n<Qe?[t,Ne(Xe(Qe+e/2))]:[t*Be(n)*(2*tn-1/Ye(n)),He(e)*(2*tn*(n-Qe)-Ne(Xe(n/2)))]}function m(t){function n(t,n){var o=e.geoAzimuthalEquidistantRaw(t,n);if(Le(t)>Je){var s=Re(o[1],o[0]),u=a(o[0]*o[0]+o[1]*o[1]),l=r*qe((s-Je)/r)+Je,c=Re(Ye(s-=l),2-Be(s));s=l+i(Ke/u*Ye(c))-c,o[0]=u*Be(s),o[1]=u*Ye(s)}return o}var r=2*Ke/t;return n.invert=function(t,n){var i=a(t*t+n*n);if(i>Je){var s=Re(n,t),u=r*qe((s-Je)/r)+Je,l=s>u?-1:1,c=i*Be(u-s),h=1/Xe(l*o((c-Ke)/a(Ke*(Ke-2*c)+i*i)));s=u+2*De((h+l*a(h*h-3))/3),t=i*Be(s),n=i*Ye(s)}return e.geoAzimuthalEquidistantRaw.invert(t,n)},n}function y(t,e){var n,r=t*Ye(e),i=30;do{e-=n=(e+Ye(e)-r)/(1+Be(e))}while(Le(n)>We&&--i>0);return e/2}function _(t,e,n){function r(r,i){return[t*r*Be(i=y(n,i)),e*Ye(i)]}return r.invert=function(r,o){return o=i(o/e),[r/(t*Be(o)),i((2*o+Ye(2*o))/n)]},r}function b(t,e){var n=y(Ke,e);return[gn*t/(1/Be(e)+mn/Be(n)),(e+tn*Ye(n))/gn]}function x(t,e){return[t*Be(e),e]}function w(t){function e(e,r){var i=n+t-r,o=i?e*Be(r)/i:i;return[i*Ye(o),n-i*Be(o)]}if(!t)return x;var n=1/Xe(t);return e.invert=function(e,r){var i=a(e*e+(r=n-r)*r),o=n+t-i;return[i/Be(o)*Re(e,r),o]},e}function S(t){function e(e,n){var r=Je-n,i=r?e*t*Ye(r)/r:r;return[r*Ye(i)/t,Je-r*Be(i)]}return e.invert=function(e,n){var r=e*t,i=Je-n,o=a(r*r+i*i),s=Re(r,i);return[(o?o/Ye(o):1)*s/t,Je-o]},e}function E(t,e,n,r,s,u){var l,c=Be(u);if(Le(t)>1||Le(u)>1)l=o(n*s+e*r*c);else{var h=Ye(t/2),f=Ye(u/2);l=2*i(a(h*h+e*r*f*f))}return Le(l)>We?[l,Re(r*Ye(u),e*s-n*r*c)]:[0,0]}function M(t,e,n){return o((t*t+e*e-n*n)/(2*t*e))}function T(t){return t-2*Ke*Fe((t+Ke)/(2*Ke))}function C(t,e,n){function r(t,e){var n,r=Ye(e),i=Be(e),a=new Array(3);for(n=0;n<3;++n){var s=o[n];if(a[n]=E(e-s[1],s[3],s[2],i,r,t-s[0]),!a[n][0])return s.point;a[n][1]=T(a[n][1]-s.v[1])}var u=h.slice();for(n=0;n<3;++n){var f=2==n?0:n+1,p=M(o[n].v[0],a[n][0],a[f][0]);a[n][1]<0&&(p=-p),n?1==n?(p=l-p,u[0]-=a[n][0]*Be(p),u[1]-=a[n][0]*Ye(p)):(p=c-p,u[0]+=a[n][0]*Be(p),u[1]+=a[n][0]*Ye(p)):(u[0]+=a[n][0]*Be(p),u[1]-=a[n][0]*Ye(p))}return u[0]/=3,u[1]/=3,u}for(var i,o=[[t[0],t[1],Ye(t[1]),Be(t[1])],[e[0],e[1],Ye(e[1]),Be(e[1])],[n[0],n[1],Ye(n[1]),Be(n[1])]],a=o[2],s=0;s<3;++s,a=i)i=o[s],a.v=E(i[1]-a[1],a[3],a[2],i[3],i[2],i[0]-a[0]),a.point=[0,0];var u=M(o[0].v[0],o[2].v[0],o[1].v[0]),l=M(o[0].v[0],o[1].v[0],o[2].v[0]),c=Ke-u;o[2].point[1]=0,o[0].point[0]=-(o[1].point[0]=o[0].v[0]/2);var h=[o[2].point[0]=o[0].point[0]+o[2].v[0]*Be(u),2*(o[0].point[1]=o[1].point[1]=o[2].v[0]*Ye(u))];return r}function A(t){return t[0]*=on,t[1]*=on,t}function P(){return k([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function k(t,n,r){var i=e.geoCentroid({type:"MultiPoint",coordinates:[t,n,r]}),o=[-i[0],-i[1]],a=e.geoRotation(o),s=e.geoProjection(C(A(a(t)),A(a(n)),A(a(r)))).rotate(o),u=s.center;return delete s.rotate,s.center=function(t){return arguments.length?u(a(t)):a.invert(u())},s.clipAngle(90)}function I(t,e){var n=a(1-Ye(e));return[2/en*t*n,en*(1-n)]}function O(t){function e(t,e){return[t,(t?t/Ye(t):1)*(Ye(e)*Be(t)-n*Be(e))]}var n=Xe(t);return e.invert=n?function(t,e){t&&(e*=Ye(t)/t);var r=Be(t);return[t,2*Re(a(r*r+n*n-e*e)-r,n-e)]}:function(t,e){return[t,i(t?e*Xe(t)/t:e)]},e}function j(t,e){return[Cn*t*(2*Be(2*e/3)-1)/en,Cn*en*Ye(e/3)]}function L(t){function e(t,e){return[t*n,Ye(e)/n]}var n=Be(t);return e.invert=function(t,e){return[t/n,i(e*n)]},e}function D(t){function e(t,e){return[t*n,(1+n)*Xe(e/2)]}var n=Be(t);return e.invert=function(t,e){return[t/n,2*De(e/(1+n))]},e}function R(t,e){var n=a(8/(3*Ke));return[n*t*(1-Le(e)/Ke),n*e]}function B(t,e){var n=a(4-3*Ye(Le(e)));return[2/a(6*Ke)*t*n,He(e)*a(2*Ke/3)*(2-n)]}function z(t,e){var n=a(Ke*(4+Ke));return[2/n*t*(1+a(1-4*e*e/(Ke*Ke))),4/n*e]}function F(t,e){var n=(2+Je)*Ye(e);e/=2;for(var r=0,i=1/0;r<10&&Le(i)>We;r++){var o=Be(e);e-=i=(e+Ye(e)*(o+2)-n)/(2*o*(1+o))}return[2/a(Ke*(4+Ke))*t*(1+Be(e)),2*a(Ke/(4+Ke))*Ye(e)]}function N(t,e){return[t*(1+Be(e))/a(2+Ke),2*e/a(2+Ke)]}function U(t,e){for(var n=(1+Je)*Ye(e),r=0,i=1/0;r<10&&Le(i)>We;r++)e-=i=(e+Ye(e)-n)/(1+Be(e));return n=a(2+Ke),[t*(1+Be(e))/n,2*e/n]}function V(t,e){var n=Ye(t/=2),r=Be(t),i=a(Be(e)),o=Be(e/=2),s=Ye(e)/(o+tn*r*i),u=a(2/(1+s*s)),l=a((tn*o+(r+n)*i)/(tn*o+(r-n)*i));return[Bn*(u*(l-1/l)-2*Ne(l)),Bn*(u*s*(l+1/l)-2*De(s))]}function G(t,e){var n=Xe(e/2);return[t*Fn*a(1-n*n),(1+Fn)*n]}function q(t,e){var n=e/2,r=Be(n);return[2*t/en*Be(e)*r*r,en*Xe(n)]}function H(t){return[t[0]/2,i(Xe(t[1]/2*on))*rn]}function Y(t){return[2*t[0],2*De(Ye(t[1]*on))*rn]}function X(t,n){function r(n,r){var s=e.geoAzimuthalEquidistantRaw(n,r),u=s[0],l=s[1],c=u*u+l*l;if(c>o){var h=a(c),f=Re(l,u),p=i*qe(f/i),d=f-p,v=t*Be(d),g=(t*Ye(d)-d*Ye(v))/(Je-v),m=W(d,g),y=(Ke-t)/Z(m,v,Ke);u=h;var _,b=50;do{u-=_=(t+Z(m,v,u)*y-h)/(m(u)*y)}while(Le(_)>We&&--b>0);l=d*Ye(u),u<Je&&(l-=g*(u-Je));var x=Ye(p),w=Be(p);s[0]=u*w-l*x,s[1]=u*x+l*w}return s}var i=2*Ke/n,o=t*t;return r.invert=function(n,r){var s=n*n+r*r;if(s>o){var u=a(s),l=Re(r,n),c=i*qe(l/i),h=l-c;n=u*Be(h),r=u*Ye(h);for(var f=n-Je,p=Ye(n),d=r/p,v=n<Je?1/0:0,g=10;;){var m=t*Ye(d),y=t*Be(d),_=Ye(y),b=Je-y,x=(m-d*_)/b,w=W(d,x);if(Le(v)<Ze||!--g)break;d-=v=(d*p-x*f-r)/(p-2*f*(b*(y+d*m*Be(y)-_)-m*(m-d*_))/(b*b))}u=t+Z(w,y,n)*(Ke-t)/Z(w,y,Ke),l=c+d,n=u*Be(l),r=u*Ye(l)}return e.geoAzimuthalEquidistantRaw.invert(n,r)},r}function W(t,e){return function(n){var r=t*Be(n);return n<Je&&(r-=e),a(1+r*r)}}function Z(t,e,n){for(var r=50,i=(n-e)/r,o=t(e)+t(n),a=1,s=e;a<r;++a)o+=2*t(s+=i);return.5*o*i}function K(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}function J(t,e){var n=He(t),r=He(e),o=Be(e),a=Be(t)*o,s=Ye(t)*o,u=Ye(r*e);t=Le(Re(s,u)),e=i(a),Le(t-Je)>We&&(t%=Je);var l=Q(t>Ke/4?Je-t:t,e);return t>Ke/4&&(u=l[0],l[0]=-l[1],l[1]=-u),l[0]*=n,l[1]*=-r,l}function Q(t,e){if(e===Je)return[0,0];var n,r,o=Ye(e),s=o*o,u=s*s,l=1+u,c=1+3*u,h=1-u,f=i(1/a(l)),p=h+s*l*f,d=(1-o)/p,v=a(d),g=d*l,m=a(g),y=v*h;if(0===t)return[0,-(y+s*m)];var _,b=Be(e),x=1/b,w=2*o*b,S=(-3*s+f*c)*w,E=(-p*b-(1-o)*S)/(p*p),M=.5*E/v,T=h*M-2*s*v*w,C=s*l*E+d*c*w,A=-x*w,P=-x*C,k=-2*x*T,I=4*t/Ke;if(t>.222*Ke||e<Ke/4&&t>.175*Ke){if(n=(y+s*a(g*(1+u)-y*y))/(1+u),t>Ke/4)return[n,n];var O=n,j=.5*n;n=.5*(j+O),r=50;do{var L=a(g-n*n),D=n*(k+A*L)+P*i(n/m)-I;if(!D)break;D<0?j=n:O=n,n=.5*(j+O)}while(Le(O-j)>We&&--r>0)}else{n=We,r=25;do{var R=n*n,B=a(g-R),z=k+A*B,F=n*z+P*i(n/m)-I,N=z+(P-A*R)/B;n-=_=B?F/N:0}while(Le(_)>We&&--r>0)}return[n,-y-s*a(g-n*n)]}function $(t,e){for(var n=0,r=1,o=.5,s=50;;){var u=o*o,l=a(o),c=i(1/a(1+u)),h=1-u+o*(1+u)*c,f=(1-l)/h,p=a(f),d=f*(1+u),v=p*(1-u),g=d-t*t,m=a(g),y=e+v+o*m;if(Le(r-n)<Ze||0==--s||0===y)break;y>0?n=o:r=o,o=.5*(n+r)}if(!s)return null;var _=i(l),b=Be(_),x=1/b,w=2*l*b,S=(-3*o+c*(1+3*u))*w,E=(-h*b-(1-l)*S)/(h*h);return[Ke/4*(t*(-2*x*(.5*E/p*(1-u)-2*o*p*w)+-x*w*m)+-x*(o*(1+u)*E+f*(1+3*u)*w)*i(t/a(d))),_]}function tt(t,e,n){var r,i,o;return t?(r=et(t,n),e?(i=et(e,1-n),o=i[1]*i[1]+n*r[0]*r[0]*i[0]*i[0],[[r[0]*i[2]/o,r[1]*r[2]*i[0]*i[1]/o],[r[1]*i[1]/o,-r[0]*r[2]*i[0]*i[2]/o],[r[2]*i[1]*i[2]/o,-n*r[0]*r[1]*i[0]/o]]):[[r[0],0],[r[1],0],[r[2],0]]):(i=et(e,1-n),[[0,i[0]/i[1]],[1/i[1],0],[i[2]/i[1],0]])}function et(t,e){var n,r,o,c,h;if(e<We)return c=Ye(t),r=Be(t),n=e*(t-c*r)/4,[c-n*r,r+n*c,1-e*c*c/2,t-n];if(e>=1-We)return n=(1-e)/4,r=l(t),c=s(t),o=1/r,h=r*u(t),[c+n*(h-t)/(r*r),o-n*c*o*(h-t),o+n*c*o*(h+t),2*De(ze(t))-Je+n*(h-t)/r];var f=[1,0,0,0,0,0,0,0,0],p=[a(e),0,0,0,0,0,0,0,0],d=0;for(r=a(1-e),h=1;Le(p[d]/f[d])>We&&d<8;)n=f[d++],p[d]=(n-r)/2,f[d]=(n+r)/2,r=a(n*r),h*=2;o=h*f[d]*t;do{c=p[d]*Ye(r=o)/f[d],o=(i(c)+o)/2}while(--d);return[Ye(o),c=Be(o),c/Be(o-r),o]}function nt(t,e,n){var r=Le(t),i=Le(e),o=u(i);if(r){var s=1/Ye(r),l=1/(Xe(r)*Xe(r)),c=-(l+n*(o*o*s*s)-1+n),h=(n-1)*l,f=(-c+a(c*c-4*h))/2;return[rt(De(1/a(f)),n)*He(t),rt(De(a((f/l-1)/n)),1-n)*He(e)]}return[0,rt(De(o),1-n)*He(e)]}function rt(t,e){if(!e)return t;if(1===e)return Ne(Xe(t/2+Qe));for(var n=1,r=a(1-e),i=a(e),o=0;Le(i)>We;o++){if(t%Ke){var s=De(r*Xe(t)/n);s<0&&(s+=Ke),t+=s+~~(t/Ke)*Ke}else t+=t;i=(n+r)/2,r=a(n*r),i=((n=i)-r)/2}return t/(Ge(2,o)*n)}function it(t,e){var n=(tn-1)/(tn+1),r=a(1-n*n),i=rt(Je,r*r),o=-1,s=Ne(Xe(Ke/4+Le(e)/2)),u=ze(o*s)/a(n),l=ot(u*Be(o*t),u*Ye(o*t)),c=nt(l[0],l[1],r*r);return[-c[1],(e>=0?1:-1)*(.5*i-c[0])]}function ot(t,e){var n=t*t,r=e+1,i=1-n-e*e;return[.5*((t>=0?Je:-Je)-Re(i,2*t)),-.25*Ne(i*i+4*n)+.5*Ne(r*r+n)]}function at(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function st(t,n){function r(r,i){var o=e.geoAzimuthalEqualAreaRaw(r/n,i);return o[0]*=t,o}return arguments.length<2&&(n=t),1===n?e.geoAzimuthalEqualAreaRaw:n===1/0?ut:(r.invert=function(r,i){var o=e.geoAzimuthalEqualAreaRaw.invert(r/t,i);return o[0]*=n,o},r)}function ut(t,e){return[t*Be(e)/Be(e/=2),2*Ye(e)]}function lt(t){function e(t,e){var a=i(t,e);t=a[0],e=a[1];var s=Ye(e),u=Be(e),l=Be(t),c=o(n*s+r*u*l),h=Ye(c),f=Le(h)>We?c/h:1;return[f*r*Ye(t),(Le(t)>Je?f:-f)*(n*u-r*s*l)]}var n=Ye(t),r=Be(t),i=ct(t);return i.invert=ct(-t),e.invert=function(t,e){var r=a(t*t+e*e),o=-Ye(r),s=Be(r),u=r*s,l=-e*o,c=r*n,h=a(u*u+l*l-c*c),f=Re(u*c+l*h,l*c-u*h),p=(r>Je?-1:1)*Re(t*o,r*Be(f)*s+e*Ye(f)*o);return i.invert(p,f)},e}function ct(t){var e=Ye(t),n=Be(t);return function(t,r){var o=Be(r),a=Be(t)*o,s=Ye(t)*o,u=Ye(r);return[Re(s,a*n-u*e),i(u*n+a*e)]}}function ht(t){function e(e,c){var h,f=Le(c);if(f>n){var p=Ve(t-1,Ue(0,Fe((e+Ke)/s)));e+=Ke*(t-1)/t-p*s,h=I(e,f),h[0]=h[0]*nn/r-nn*(t-1)/(2*t)+p*nn/t,h[1]=i+4*(h[1]-o)*a/nn,c<0&&(h[1]=-h[1])}else h=ar(e,c);return h[0]*=u,h[1]/=l,h}var n=or*on,r=I(Ke,n)[0]-I(-Ke,n)[0],i=ar(0,n)[1],o=I(0,n)[1],a=en-o,s=nn/t,u=4/nn,l=i+a*a*4/nn;return e.invert=function(e,n){e/=u,n*=l;var c=Le(n);if(c>i){var h=Ve(t-1,Ue(0,Fe((e+Ke)/s)));e=(e+Ke*(t-1)/t-h*s)*r/nn;var f=I.invert(e,.25*(c-i)*nn/a+o);return f[0]-=Ke*(t-1)/t-h*s,n<0&&(f[1]=-f[1]),f}return ar.invert(e,n)},e}function ft(t){return{type:"Polygon",coordinates:[n.range(-180,180+t/2,t).map(function(t,e){return[t,1&e?90-1e-6:or]}).concat(n.range(180,-180-t/2,-t).map(function(t,e){return[t,1&e?1e-6-90:-or]}))]}}function pt(t){function e(e,i){var o,s,p=1-Ye(i);if(p&&p<2){var d,v=Je-i,g=25;do{var m=Ye(v),y=Be(v),_=u+Re(m,r-y),b=1+f-2*r*y;v-=d=(v-h*u-r*m+b*_-.5*p*n)/(2*r*m*_)}while(Le(d)>Ze&&--g>0);o=l*a(b),s=e*_/Ke}else o=l*(t+p),s=e*u/Ke;return[o*Ye(s),c-o*Be(s)]}var n,r=1+t,s=Ye(1/r),u=i(s),l=2*a(Ke/(n=Ke+4*u*r)),c=.5*l*(r+a(t*(2+t))),h=t*t,f=r*r;return e.invert=function(t,e){var s=t*t+(e-=c)*e,p=(1+f-s/(l*l))/(2*r),d=o(p),v=Ye(d),g=u+Re(v,r-p);return[i(t/a(s))*Ke/g,i(1-2*(d-h*u-r*v+(1+f-2*r*p)*g)/n)]},e}function dt(t,e){return e>-lr?(t=dn(t,e),t[1]+=cr,t):x(t,e)}function vt(t,e){return Le(e)>lr?(t=dn(t,e),t[1]-=e>0?cr:-cr,t):x(t,e)}function gt(t,e){return Le(t[0]-e[0])<We&&Le(t[1]-e[1])<We}function mt(t,e){for(var n,r,i,o=-1,a=t.length,s=t[0],u=[];++o<a;){n=t[o],r=(n[0]-s[0])/e,i=(n[1]-s[1])/e;for(var l=0;l<e;++l)u.push([s[0]+l*r,s[1]+l*i]);s=n}return u.push(n),u}function yt(t){var e,r,i,o,a,s,u,l=[],c=t[0].length;for(u=0;u<c;++u)e=t[0][u],r=e[0][0],i=e[0][1],o=e[1][1],a=e[2][0],s=e[2][1],l.push(mt([[r+We,i+We],[r+We,o-We],[a-We,o-We],[a-We,s+We]],30));for(u=t[1].length-1;u>=0;--u)e=t[1][u],r=e[0][0],i=e[0][1],o=e[1][1],a=e[2][0],s=e[2][1],l.push(mt([[a-We,s-We],[a-We,o+We],[r+We,o+We],[r+We,i-We]],30));return{type:"Polygon",coordinates:[n.merge(l)]}}function _t(t,e){return[3/nn*t*a(Ke*Ke/3-e*e),e]}function bt(t){function e(e,n){if(Le(Le(n)-Je)<We)return[0,n<0?-2:2];var r=Ye(n),i=Ge((1+r)/(1-r),t/2),o=.5*(i+1/i)+Be(e*=t);return[2*Ye(e)/o,(i-1/i)/o]}return e.invert=function(e,n){var r=Le(n);if(Le(r-2)<We)return e?null:[0,He(n)*Je];if(r>2)return null;e/=2,n/=2;var o=e*e,a=n*n,s=2*n/(1+o+a);return s=Ge((1+s)/(1-s),1/t),[Re(2*e,1-o-a)/t,i((s-1)/(s+1))]},e}function xt(t,e){return[t*(1+a(Be(e)))/2,e/(Be(e/2)*Be(t/6))]}function wt(t,e){var n=t*t,r=e*e;return[t*(.975534+r*(-.0143059*n-.119161+-.0547009*r)),e*(1.00384+n*(.0802894+-.02855*r+199025e-9*n)+r*(.0998909+-.0491032*r))]}function St(t,e){return[Ye(t)/Be(e),Xe(e)*Be(t)]}function Et(t){function e(e,i){var o=i-t,a=Le(o)<We?e*n:Le(a=Qe+i/2)<We||Le(Le(a)-Je)<We?0:e*o/Ne(Xe(a)/r);return[a,o]}var n=Be(t),r=Xe(Qe+t/2);return e.invert=function(e,i){var o,a=i+t;return[Le(i)<We?e/n:Le(o=Qe+a/2)<We||Le(Le(o)-Je)<We?0:e*Ne(Xe(o)/r)/i,a]},e}function Mt(t,e){return[t,1.25*Ne(Xe(Qe+.4*e))]}function Tt(t){function e(e,r){for(var i,o=Be(r),a=2/(1+o*Be(e)),s=a*o*Ye(e),u=a*Ye(r),l=n,c=t[l],h=c[0],f=c[1];--l>=0;)c=t[l],h=c[0]+s*(i=h)-u*f,f=c[1]+s*f+u*i;return h=s*(i=h)-u*f,f=s*f+u*i,[h,f]}var n=t.length-1;return e.invert=function(e,r){var o=20,s=e,u=r;do{for(var l,c=n,h=t[c],f=h[0],p=h[1],d=0,v=0;--c>=0;)h=t[c],d=f+s*(l=d)-u*v,v=p+s*v+u*l,f=h[0]+s*(l=f)-u*p,p=h[1]+s*p+u*l;d=f+s*(l=d)-u*v,v=p+s*v+u*l,f=s*(l=f)-u*p-e,p=s*p+u*l-r;var g,m,y=d*d+v*v;s-=g=(f*d+p*v)/y,u-=m=(p*d-f*v)/y}while(Le(g)+Le(m)>We*We&&--o>0);if(o){var _=a(s*s+u*u),b=2*De(.5*_),x=Ye(b);return[Re(s*x,_*Be(b)),_?i(u*x/_):0]}},e}function Ct(){return Ot(Lr,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function At(){return Ot(Dr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Pt(){return Ot(Rr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function kt(){return Ot(Br,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function It(){return Ot(zr,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ot(t,n){var r=e.geoProjection(Tt(t)).rotate(n).clipAngle(90),i=e.geoRotation(n),o=r.center;return delete r.rotate,r.center=function(t){return arguments.length?o(i(t)):i.invert(o())},r}function jt(t,e){var n=i(7*Ye(e)/(3*Fr));return[Fr*t*(2*Be(2*n/3)-1)/Nr,9*Ye(n/3)/Nr]}function Lt(t,e){for(var n,r=(1+$e)*Ye(e),i=e,o=0;o<25&&(i-=n=(Ye(i/2)+Ye(i)-r)/(.5*Be(i/2)+Be(i)),!(Le(n)<We));o++);return[t*(1+2*Be(i)/Be(i/2))/(3*tn),2*a(3)*Ye(i/2)/a(2+tn)]}function Dt(t,e){for(var n,r=a(6/(4+Ke)),i=(1+Ke/4)*Ye(e),o=e/2,s=0;s<25&&(o-=n=(o/2+Ye(o)-i)/(.5+Be(o)),!(Le(n)<We));s++);return[r*(.5+Be(o))*t/1.5,r*o]}function Rt(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Bt(t,e){var n=e*e,r=n*n,i=n*r;return[t*(.84719-.13063*n+i*i*(.05494*n-.04515-.02326*r+.00331*i)),e*(1.01183+r*r*(.01926*n-.02625-.00396*r))]}function zt(t,e){return[t*(1+Be(e))/2,2*(e-Xe(e/2))]}function Ft(t,e){var n=e*e;return[t,e*(Xr+n*n*(Wr+n*(Zr+Kr*n)))]}function Nt(t,e){if(Le(e)<We)return[t,0];var n=Xe(e),r=t*Ye(e);return[Ye(r)/n,e+(1-Be(r))/n]}function Ut(t){var e=1/(t[0]*t[4]-t[1]*t[3]);return[e*t[4],-e*t[1],e*(t[1]*t[5]-t[2]*t[4]),-e*t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]}function Vt(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]}function Gt(t,e){return[t[0]-e[0],t[1]-e[1]]}function qt(t){return a(t[0]*t[0]+t[1]*t[1])}function Ht(t,e){return Re(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])}function Yt(t,n,r){var i,o,a=n.edges,s=a.length,u={type:"MultiPoint",coordinates:n.face},l=n.face.filter(function(t){return 90!==Le(t[1])}),c=e.geoBounds({type:"MultiPoint",coordinates:l}),h=!1,f=-1,p=c[1][0]-c[0][0],d=180===p||360===p?[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]:e.geoCentroid(u);if(r)for(;++f<s&&a[f]!==r;);++f;for(var v=0;v<s;++v)o=a[(v+f)%s],Array.isArray(o)?(h||(t.point((i=e.geoInterpolate(o[0],d)(We))[0],i[1]),h=!0),t.point((i=e.geoInterpolate(o[1],d)(We))[0],i[1])):(h=!1,o!==r&&Yt(t,o,n))}function Xt(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function Wt(t,e){for(var n,r,i=t.length,o=null,a=0;a<i;++a){n=t[a];for(var s=e.length;--s>=0;)if(r=e[s],n[0]===r[0]&&n[1]===r[1]){if(o)return[o,n];o=n}}}function Zt(t){for(var e=t.length,n=[],r=t[e-1],i=0;i<e;++i)n.push([r,r=t[i]]);return n}function Kt(t){return t.project.invert||t.children&&t.children.some(Kt)}function Jt(t,e){var n=I(t,e);return[n[0]*li,n[1]]}function Qt(t,e){for(var n=0,r=t.length,i=0;n<r;++n)i+=t[n]*e[n];return i}function $t(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function te(t){return[Re(t[1],t[0])*rn,i(Ue(-1,Ve(1,t[2])))*rn]}function ee(t){var e=t[0]*on,n=t[1]*on,r=Be(n);return[r*Be(e),r*Ye(e),Ye(n)]}function ne(t,e){return{type:"FeatureCollection",features:t.features.map(function(t){return re(t,e)})}}function re(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:oe(t.geometry,e)}}function ie(t,e){return{type:"GeometryCollection",geometries:t.geometries.map(function(t){return oe(t,e)})}}function oe(t,n){if(!t)return null;if("GeometryCollection"===t.type)return ie(t,n);var r;switch(t.type){case"Point":case"MultiPoint":r=yi;break;case"LineString":case"MultiLineString":r=_i;break;case"Polygon":case"MultiPolygon":case"Sphere":r=bi;break;default:return null}return e.geoStream(t,n(r)),r.result()}function ae(t){function e(e,r){var i=n?Xe(e*n/2)/n:e/2;if(!r)return[2*i,-t];var o=2*De(i*Ye(r)),a=1/Xe(r);return[Ye(o)*a,r+(1-Be(o))*a-t]}var n=Ye(t);return e.invert=function(e,r){if(Le(r+=t)<We)return[n?2*De(n*e/2)/n:e,0];var a,s=e*e+r*r,u=0,l=10;do{var c=Xe(u),h=1/Be(u),f=s-2*r*u+u*u;u-=a=(c*f+2*(u-r))/(2+f*h*h+2*(u-r)*c)}while(Le(a)>We&&--l>0);var p=e*(c=Xe(u)),d=Xe(Le(r)<Le(u+1/c)?.5*i(p):.5*o(p)+Ke/4)/Ye(u);return[n?2*De(n*d)/n:2*d,u]},e}function se(t,e){var n,r=Ve(18,36*Le(e)/Ke),i=Fe(r),o=r-i,a=(n=Ti[i])[0],s=n[1],u=(n=Ti[++i])[0],l=n[1],c=(n=Ti[Ve(19,++i)])[0],h=n[1];return[t*(u+o*(c-a)/2+o*o*(c-2*u+a)/2),(e>0?Je:-Je)*(l+o*(h-s)/2+o*o*(h-2*l+s)/2)]}function ue(t){function e(e,n){var r=Be(n),i=(t-1)/(t-r*Be(e));return[i*r*Ye(e),i*Ye(n)]}return e.invert=function(e,n){var r=e*e+n*n,o=a(r),s=(t-a(1-r*(t+1)/(t-1)))/((t-1)/o+o/(t-1));return[Re(e*s,o*a(1-s*s)),o?i(n*s/o):0]},e}function le(t,e){function n(e,n){var a=r(e,n),s=a[1],u=s*o/(t-1)+i;return[a[0]*i/u,s/u]}var r=ue(t);if(!e)return r;var i=Be(e),o=Ye(e);return n.invert=function(e,n){var a=(t-1)/(t-1-n*o);return r.invert(a*e,a*n*i)},n}function ce(t){return t.length>0}function he(t){return Math.floor(t*ki)/ki}function fe(t){return t===Di||t===Bi?[0,t]:[Ii,he(t)]}function pe(t){var e=t[0],n=t[1],r=!1;return e<=Oi?(e=Ii,r=!0):e>=Li&&(e=ji,r=!0),n<=Ri?(n=Di,r=!0):n>=zi&&(n=Bi,r=!0),r?[e,n]:t}function de(t){return t.map(pe)}function ve(t,e,n){for(var r=0,i=t.length;r<i;++r){var o=t[r].slice();n.push({index:-1,polygon:e,ring:o});for(var a=0,s=o.length;a<s;++a){var u=o[a],l=u[0],c=u[1];if(l<=Oi||l>=Li||c<=Ri||c>=zi){o[a]=pe(u);for(var h=a+1;h<s;++h){var f=o[h],p=f[0],d=f[1];if(p>Oi&&p<Li&&d>Ri&&d<zi)break}if(h===a+1)continue;if(a){var v={index:-1,polygon:e,ring:o.slice(0,a+1)};v.ring[v.ring.length-1]=fe(c),n[n.length-1]=v}else n.pop();if(h>=s)break;n.push({index:-1,polygon:e,ring:o=o.slice(h-1)}),o[0]=fe(o[0][1]),a=-1,s=o.length}}}}function ge(t){var e,n,r,i,o,a,s=t.length,u={},l={};for(e=0;e<s;++e)n=t[e],r=n.ring[0],o=n.ring[n.ring.length-1],r[0]!==o[0]||r[1]!==o[1]?(n.index=e,u[r]=l[o]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<s;++e)if(n=t[e]){if(r=n.ring[0],o=n.ring[n.ring.length-1],i=l[r],a=u[o],delete u[r],delete l[o],r[0]===o[0]&&r[1]===o[1]){n.polygon.push(n.ring);continue}i?(delete l[r],delete u[i.ring[0]],i.ring.pop(),t[i.index]=null,n={index:-1,polygon:i.polygon,ring:i.ring.concat(n.ring)},i===a?n.polygon.push(n.ring):(n.index=s++,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n))):a?(delete u[o],delete l[a.ring[a.ring.length-1]],n.ring.pop(),n={index:s++,polygon:a.polygon,ring:n.ring.concat(a.ring)},t[a.index]=null,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function me(t){var e={type:"Feature",geometry:ye(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function ye(t){if(null==t)return t;var e,n,r,i;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(ye)};break;case"Point":e={type:"Point",coordinates:pe(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:de(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(de)};break;case"Polygon":var o=[];ve(t.coordinates,o,n=[]),ge(n),e={type:"Polygon",coordinates:o};break;case"MultiPolygon":n=[],r=-1,i=t.coordinates.length;for(var a=new Array(i);++r<i;)ve(t.coordinates[r],a[r]=[],n);ge(n),e={type:"MultiPolygon",coordinates:a.filter(ce)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function _e(t,e){var n=Xe(e/2),r=Ye(Qe*n);return[t*(.74482-.34588*r*r),1.70711*n]}function be(t){function n(t,n){var i=e.geoGnomonicRaw(t,n);return i[0]*=r,i}var r=Be(t);return n.invert=function(t,n){return e.geoGnomonicRaw.invert(t/r,n)},n}function xe(){return we([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function we(t,e){return Ui(be,t,e)}function Se(t){function n(e,n){var u=o(Be(n)*Be(e-r)),l=o(Be(n)*Be(e-i)),c=n<0?-1:1;return u*=u,l*=l,[(u-l)/(2*t),c*a(4*s*l-(s-u+l)*(s-u+l))/(2*t)]}if(!(t*=2))return e.geoAzimuthalEquidistantRaw;var r=-t/2,i=-r,s=t*t,u=Xe(i),l=.5/Ye(i);return n.invert=function(t,e){var n,s,c=e*e,h=Be(a(c+(n=t+r)*n)),f=Be(a(c+(n=t+i)*n));return[Re(s=h-f,n=(h+f)*u),(e<0?-1:1)*o(a(n*n+s*s)*l)]},n}function Ee(){return Me([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Me(t,e){return Ui(Se,t,e)}function Te(t,e){if(Le(e)<We)return[t,0];var n=Le(e/Je),r=i(n);if(Le(t)<We||Le(Le(e)-Je)<We)return[0,He(e)*Ke*Xe(r/2)];var o=Be(r),s=Le(Ke/t-t/Ke)/2,u=s*s,l=o/(n+o-1),c=l*(2/n-1),h=c*c,f=h+u,p=l-h,d=u+l;return[He(t)*Ke*(s*p+a(u*p*p-f*(l*l-h)))/f,He(e)*Ke*(c*d-s*a((u+1)*f-d*d))/f]}function Ce(t,e){if(Le(e)<We)return[t,0];var n=Le(e/Je),r=i(n);if(Le(t)<We||Le(Le(e)-Je)<We)return[0,He(e)*Ke*Xe(r/2)];var o=Be(r),s=Le(Ke/t-t/Ke)/2,u=s*s,l=o*(a(1+u)-s*o)/(1+u*n*n);return[He(t)*Ke*l,He(e)*Ke*a(1-l*(2*s+l))]}function Ae(t,e){if(Le(e)<We)return[t,0];var n=e/Je,r=i(n);if(Le(t)<We||Le(Le(e)-Je)<We)return[0,Ke*Xe(r/2)];var o=(Ke/t-t/Ke)/2,s=n/(1+Be(r));return[Ke*(He(t)*a(o*o+1-s*s)-o),Ke*s]}function Pe(t,e){if(!e)return[t,0];var n=Le(e);if(!t||n===Je)return[0,e];var r=n/Je,i=r*r,o=(8*r-i*(i+2)-5)/(2*i*(r-1)),s=o*o,u=r*o,l=i+s+2*u,c=r+3*o,h=t/Je,f=h+1/h,p=He(Le(t)-Je)*a(f*f-4),d=p*p,v=l*(i+s*d-1)+(1-i)*(i*(c*c+4*s)+12*u*s+4*s*s),g=(p*(l+s-1)+2*a(v))/(4*l+d);return[He(t)*Je*g,He(e)*Je*a(1+p*Le(g)-g*g)]}function ke(t,e){return[t*a(1-3*e*e/(Ke*Ke)),e]}function Ie(t,e){var n=.90631*Ye(e),r=a(1-n*n),i=a(2/(1+r*Be(t/=3)));return[2.66723*r*i*Ye(t),1.24104*n*i]}function Oe(t,e){var n=Be(e),r=Be(t)*n,i=1-r,o=Be(t=Re(Ye(t)*n,-Ye(e))),s=Ye(t);return n=a(1-r*r),[s*n-o*i,-o*n-s*i]}function je(t,e){var n=p(t,e);return[(n[0]+t/Je)/2,(n[1]+e)/2]}var Le=Math.abs,De=Math.atan,Re=Math.atan2,Be=Math.cos,ze=Math.exp,Fe=Math.floor,Ne=Math.log,Ue=Math.max,Ve=Math.min,Ge=Math.pow,qe=Math.round,He=Math.sign||function(t){return t>0?1:t<0?-1:0},Ye=Math.sin,Xe=Math.tan,We=1e-6,Ze=1e-12,Ke=Math.PI,Je=Ke/2,Qe=Ke/4,$e=Math.SQRT1_2,tn=a(2),en=a(Ke),nn=2*Ke,rn=180/Ke,on=Ke/180,an=function(){var t=Je,n=e.geoProjectionMutator(f),r=n(t);return r.radius=function(e){return arguments.length?n(t=e*on):t*rn},r.scale(179.976).clipAngle(147)};p.invert=function(t,e){if(!(t*t+4*e*e>Ke*Ke+We)){var n=t,r=e,i=25;do{var s,u=Ye(n),l=Ye(n/2),c=Be(n/2),h=Ye(r),f=Be(r),p=Ye(2*r),d=h*h,v=f*f,g=l*l,m=1-v*c*c,y=m?o(f*c)*a(s=1/m):s=0,_=2*y*f*l-t,b=y*h-e,x=s*(v*g+y*f*c*d),w=s*(.5*u*p-2*y*h*l),S=.25*s*(p*l-y*h*v*u),E=s*(d*c+y*g*f),M=w*S-E*x;if(!M)break;var T=(b*w-_*E)/M,C=(_*S-b*x)/M;n-=T,r-=C}while((Le(T)>We||Le(C)>We)&&--i>0);return[n,r]}};var sn=function(){return e.geoProjection(p).scale(152.63)},un=function(){var t=20*on,n=t>=0?1:-1,r=Xe(n*t),i=e.geoProjectionMutator(d),o=i(t),a=o.stream;return o.parallel=function(e){return arguments.length?(r=Xe((n=(t=e*on)>=0?1:-1)*t),i(t)):t*rn},o.stream=function(e){var i=o.rotate(),s=a(e),u=(o.rotate([0,0]),a(e));return o.rotate(i),s.sphere=function(){u.polygonStart(),u.lineStart();for(var e=-180*n;n*e<180;e+=90*n)u.point(e,90*n);for(;n*(e-=t)>=-180;)u.point(e,n*-Re(Be(e*on/2),r)*rn);u.lineEnd(),u.polygonEnd()},s},o.scale(218.695).center([0,28.0974])};v.invert=function(t,e){if(t*=3/8,e*=3/8,!t&&Le(e)>1)return null;var n=t*t,r=e*e,o=1+n+r,s=a((o-a(o*o-4*e*e))/2),f=i(s)/3,p=s?h(Le(e/s))/3:c(Le(t))/3,d=Be(f),v=l(p),g=v*v-d*d;return[2*He(t)*Re(u(p)*d,.25-g),2*He(e)*Re(v*Ye(f),.25+g)]};var ln=function(){return e.geoProjection(v).scale(66.1603)},cn=a(8),hn=Ne(1+tn);g.invert=function(t,e){if((r=Le(e))<hn)return[t,2*De(ze(e))-Je];var n,r,i=Qe,o=25;do{var a=Be(i/2),s=Xe(i/2);i-=n=(cn*(i-Qe)-Ne(s)-r)/(cn-a*a/(2*s))}while(Le(n)>Ze&&--o>0);return[t/(Be(i)*(cn-1/Ye(i))),He(e)*i]};var fn=function(){return e.geoProjection(g).scale(112.314)},pn=function(){var t=5,n=e.geoProjectionMutator(m),r=n(t),o=r.stream,a=.01,s=-Be(a*on),u=Ye(a*on);return r.lobes=function(e){return arguments.length?n(t=+e):t},r.stream=function(e){var n=r.rotate(),l=o(e),c=(r.rotate([0,0]),o(e));return r.rotate(n),l.sphere=function(){c.polygonStart(),c.lineStart();for(var e=0,n=360/t,r=2*Ke/t,o=90-180/t,l=Je;e<t;++e,o-=n,l-=r)c.point(Re(u*Be(l),s)*rn,i(u*Ye(l))*rn),o<-90?(c.point(-90,-180-o-a),c.point(-90,-180-o+a)):(c.point(90,o+a),c.point(90,o-a));c.lineEnd(),c.polygonEnd()},l},r.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},dn=_(tn/Je,tn,Ke),vn=function(){return e.geoProjection(dn).scale(169.529)},gn=2.00276,mn=1.11072;b.invert=function(t,e){var n,r,i=gn*e,o=e<0?-Qe:Qe,a=25;do{r=i-tn*Ye(o),o-=n=(Ye(2*o)+2*o-Ke*Ye(r))/(2*Be(2*o)+2+Ke*Be(r)*tn*Be(o))}while(Le(n)>We&&--a>0);return r=i-tn*Ye(o),[t*(1/Be(r)+mn/Be(o))/gn,r]};var yn=function(){return e.geoProjection(b).scale(160.857)},_n=function(t){var n=0,r=e.geoProjectionMutator(t),i=r(n);return i.parallel=function(t){return arguments.length?r(n=t*on):n*rn},i};x.invert=function(t,e){return[t/Be(e),e]};var bn=function(){return e.geoProjection(x).scale(152.63)},xn=function(){return _n(w).scale(123.082).center([0,26.1441]).parallel(45)},wn=function(){var t=.5,n=e.geoProjectionMutator(S),r=n(t);return r.fraction=function(e){return arguments.length?n(t=+e):t},r.scale(158.837)},Sn=_(1,4/Ke,Ke),En=function(){return e.geoProjection(Sn).scale(152.63)};I.invert=function(t,e){var n=(n=e/en-1)*n;return[n>0?t*a(Ke/n)/2:0,i(1-n)]};var Mn=function(){return e.geoProjection(I).scale(95.6464).center([0,30])},Tn=function(){return _n(O).scale(249.828).clipAngle(90)},Cn=a(3);j.invert=function(t,e){var n=3*i(e/(Cn*en));return[en*t/(Cn*(2*Be(2*n/3)-1)),n]};var An=function(){return e.geoProjection(j).scale(156.19)},Pn=function(){return _n(L).parallel(38.58).scale(195.044)},kn=function(){return _n(D).scale(124.75)};R.invert=function(t,e){var n=a(8/(3*Ke)),r=e/n;return[t/(n*(1-Le(r)/Ke)),r]};var In=function(){return e.geoProjection(R).scale(165.664)};B.invert=function(t,e){var n=2-Le(e)/a(2*Ke/3);return[t*a(6*Ke)/(2*n),He(e)*i((4-n*n)/3)]};var On=function(){return e.geoProjection(B).scale(165.664)};z.invert=function(t,e){var n=a(Ke*(4+Ke))/2;return[t*n/(1+a(1-e*e*(4+Ke)/(4*Ke))),e*n/2]};var jn=function(){return e.geoProjection(z).scale(180.739)};F.invert=function(t,e){var n=e*a((4+Ke)/Ke)/2,r=i(n),o=Be(r);return[t/(2/a(Ke*(4+Ke))*(1+o)),i((r+n*(o+2))/(2+Je))]};var Ln=function(){return e.geoProjection(F).scale(180.739)};N.invert=function(t,e){var n=a(2+Ke),r=e*n/2;return[n*t/(1+Be(r)),r]};var Dn=function(){return e.geoProjection(N).scale(173.044)};U.invert=function(t,e){var n=1+Je,r=a(n/2);return[2*t*r/(1+Be(e*=r)),i((e+Ye(e))/n)]};var Rn=function(){return e.geoProjection(U).scale(173.044)},Bn=3+2*tn;V.invert=function(t,e){if(!(n=v.invert(t/1.2,1.065*e)))return null;var n,r=n[0],i=n[1],o=20;t/=Bn,e/=Bn;do{var s=r/2,u=i/2,l=Ye(s),c=Be(s),h=Ye(u),f=Be(u),p=Be(i),d=a(p),g=h/(f+tn*c*d),m=g*g,y=a(2/(1+m)),_=tn*f+(c+l)*d,b=tn*f+(c-l)*d,x=_/b,w=a(x),S=w-1/w,E=w+1/w,M=y*S-2*Ne(w)-t,T=y*g*E-2*De(g)-e,C=h&&$e*d*l*m/h,A=(tn*c*f+d)/(2*(f+tn*c*d)*(f+tn*c*d)*d),P=-.5*g*y*y*y,k=P*C,I=P*A,O=(O=2*f+tn*d*(c-l))*O*w,j=(tn*c*f*d+p)/O,L=-tn*l*h/(d*O),D=S*k-2*j/w+y*(j+j/x),R=S*I-2*L/w+y*(L+L/x),B=g*E*k-2*C/(1+m)+y*E*C+y*g*(j-j/x),z=g*E*I-2*A/(1+m)+y*E*A+y*g*(L-L/x),F=R*B-z*D;if(!F)break;var N=(T*R-M*z)/F,U=(M*B-T*D)/F;r-=N,i=Ue(-Je,Ve(Je,i-U))}while((Le(N)>We||Le(U)>We)&&--o>0);return Le(Le(i)-Je)<We?[0,i]:o&&[r,i]};var zn=function(){return e.geoProjection(V).scale(62.5271)},Fn=Be(35*on);G.invert=function(t,e){var n=e/(1+Fn);return[t&&t/(Fn*a(1-n*n)),2*De(n)]};var Nn=function(){return e.geoProjection(G).scale(137.152)};q.invert=function(t,e){var n=De(e/en),r=Be(n),i=2*n;return[t*en/2/(Be(i)*r*r),i]};var Un=function(){return e.geoProjection(q).scale(135.264)},Vn=function(t){function n(t){return o(H(t))}function r(t){n[t]=function(e){return arguments.length?(o[t](e),n):o[t]()}}null==t&&(t=e.geoOrthographic);var o=t(),a=e.geoEquirectangular().scale(rn).precision(0).clipAngle(null).translate([0,0]);return o.invert&&(n.invert=function(t){return Y(o.invert(t))}),n.stream=function(t){var e=o.stream(t),n=a.stream({point:function(t,n){e.point(t/2,i(Xe(-n/2*on))*rn)},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}});return n.sphere=e.sphere,n},n.rotate=function(t){return arguments.length?(a.rotate(t),n):a.rotate()},n.center=function(t){return arguments.length?(o.center(H(t)),n):Y(o.center())},r("clipAngle"),r("clipExtent"),r("scale"),r("translate"),r("precision"),n.scale(249.5)},Gn=function(){var t=6,n=30*on,r=Be(n),o=Ye(n),a=e.geoProjectionMutator(X),s=a(n,t),u=s.stream,l=.01,c=-Be(l*on),h=Ye(l*on);return s.radius=function(e){return arguments.length?(r=Be(n=e*on),o=Ye(n),a(n,t)):n*rn},s.lobes=function(e){return arguments.length?a(n,t=+e):t},s.stream=function(e){var n=s.rotate(),a=u(e),l=(s.rotate([0,0]),u(e));return s.rotate(n),a.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,n=2*Ke/t,a=0;e<t;++e,a-=n)l.point(Re(h*Be(a),c)*rn,i(h*Ye(a))*rn),l.point(Re(o*Be(a-n/2),r)*rn,i(o*Ye(a-n/2))*rn);l.lineEnd(),l.polygonEnd()},a},s.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},qn=function(t,e,n,r,o,s,u,l){function c(a,c){if(!c)return[t*a/Ke,0];var h=c*c,f=t+h*(e+h*(n+h*r)),p=c*(o-1+h*(s-l+h*u)),d=(f*f+p*p)/(2*p),v=a*i(f/d)/Ke;return[d*Ye(v),c*(1+h*l)+d*(1-Be(v))]}return arguments.length<8&&(l=0),c.invert=function(c,h){var f,p,d=Ke*c/t,v=h,g=50;do{var m=v*v,y=t+m*(e+m*(n+m*r)),_=v*(o-1+m*(s-l+m*u)),b=y*y+_*_,x=2*_,w=b/x,S=w*w,E=i(y/w)/Ke,M=d*E,T=y*y,C=(2*e+m*(4*n+6*m*r))*v,A=o+m*(3*s+5*m*u),P=2*(y*C+_*(A-1)),k=2*(A-1),I=(P*x-b*k)/(x*x),O=Be(M),j=Ye(M),L=w*O,D=w*j,R=d/Ke*(1/a(1-T/S))*(C*w-y*I)/S,B=D-c,z=v*(1+m*l)+w-L-h,F=I*j+L*R,N=L*E,U=1+I-(I*O-D*R),V=D*E,G=F*V-U*N;if(!G)break;d-=f=(z*F-B*U)/G,v-=p=(B*V-z*N)/G}while((Le(f)>We||Le(p)>We)&&--g>0);return[d,v]},c},Hn=qn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Yn=function(){return e.geoProjection(Hn).scale(149.995)},Xn=qn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Wn=function(){return e.geoProjection(Xn).scale(153.93)},Zn=qn(5/6*Ke,-.62636,-.0344,0,1.3493,-.05524,0,.045),Kn=function(){return e.geoProjection(Zn).scale(130.945)};K.invert=function(t,e){var n,r=t,i=e,o=50;do{var a=i*i;i-=n=(i*(1+a/12)-e)/(1+a/4)}while(Le(n)>We&&--o>0);o=50,t/=1-.162388*a;do{var s=(s=r*r)*s;r-=n=(r*(.87-952426e-9*s)-t)/(.87-.00476213*s)}while(Le(n)>We&&--o>0);return[r,i]};var Jn=function(){return e.geoProjection(K).scale(131.747)},Qn=qn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),$n=function(){return e.geoProjection(Qn).scale(131.087)},tr=function(t){function e(e,r){var i=e>0?-.5:.5,o=t(e+i*Ke,r);return o[0]-=i*n,o}var n=t(Je,0)[0]-t(-Je,0)[0];return t.invert&&(e.invert=function(e,r){var i=e>0?-.5:.5,o=t.invert(e+i*n,r),a=o[0]-i*Ke;return a<-Ke?a+=2*Ke:a>Ke&&(a-=2*Ke),o[0]=a,o}),e};J.invert=function(t,e){Le(t)>1&&(t=2*He(t)-t),Le(e)>1&&(e=2*He(e)-e);var n=He(t),r=He(e),o=-n*t,a=-r*e,s=a/o<1,u=$(s?a:o,s?o:a),l=u[0],c=u[1],h=Be(c);return s&&(l=-Je-l),[n*(Re(Ye(l)*h,-Ye(c))+Ke),r*i(Be(l)*h)]};var er=function(){return e.geoProjection(tr(J)).scale(239.75)};it.invert=function(t,e){var n=(tn-1)/(tn+1),r=a(1-n*n),i=rt(Je,r*r),o=-1,s=tt(.5*i-e,-t,r*r),u=at(s[0],s[1]);return[Re(u[1],u[0])/o,2*De(ze(.5/o*Ne(n*u[0]*u[0]+n*u[1]*u[1])))-Je]};var nr=function(){return e.geoProjection(tr(it)).scale(151.496)};ut.invert=function(t,e){var n=2*i(e/2);return[t*Be(n/2)/Be(n),n]};var rr=function(){var t=2,n=e.geoProjectionMutator(st),r=n(t);return r.coefficient=function(e){return arguments.length?n(t=+e):t},r.scale(169.529)},ir=function(){var t=0,n=e.geoProjectionMutator(lt),r=n(t),i=r.rotate,o=r.stream,a=e.geoCircle();return r.parallel=function(e){if(!arguments.length)return t*rn;var i=r.rotate();return n(t=e*on).rotate(i)},r.rotate=function(e){return arguments.length?(i.call(r,[e[0],e[1]-t*rn]),a.center([-e[0],-e[1]]),r):(e=i.call(r),e[1]+=t*rn,e)},r.stream=function(t){return t=o(t),t.sphere=function(){t.polygonStart();var e,n=.01,r=a.radius(90-n)().coordinates[0],i=r.length-1,o=-1;for(t.lineStart();++o<i;)t.point((e=r[o])[0],e[1]);for(t.lineEnd(),r=a.radius(90+n)().coordinates[0],i=r.length-1,t.lineStart();--o>=0;)t.point((e=r[o])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},r.scale(79.4187).parallel(45).clipAngle(179.999)},or=41+48/36+37/3600,ar=L(0),sr=function(){var t=4,n=e.geoProjectionMutator(ht),r=n(t),i=r.stream;return r.lobes=function(e){return arguments.length?n(t=+e):t},r.stream=function(n){var o=r.rotate(),a=i(n),s=(r.rotate([0,0]),i(n));return r.rotate(o),a.sphere=function(){e.geoStream(ft(180/t),s)},a},r.scale(239.75)},ur=function(){var t=1,n=e.geoProjectionMutator(pt),r=n(t);return r.ratio=function(e){return arguments.length?n(t=+e):t},r.scale(167.774).center([0,18.67])},lr=.7109889596207567,cr=.0528035274542;dt.invert=function(t,e){return e>-lr?dn.invert(t,e-cr):x.invert(t,e)};var hr=function(){return e.geoProjection(dt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};vt.invert=function(t,e){return Le(e)>lr?dn.invert(t,e+(e>0?cr:-cr)):x.invert(t,e)};var fr=function(){return e.geoProjection(vt).scale(152.63)},pr=function(t,n){function r(e,r){for(var i=r<0?-1:1,o=n[+(r<0)],a=0,s=o.length-1;a<s&&e>o[a][2][0];++a);var u=t(e-o[a][1][0],r);return u[0]+=t(o[a][1][0],i*r>i*o[a][0][1]?o[a][0][1]:r)[0],u}var i=yt(n);n=n.map(function(t){return t.map(function(t){return[[t[0][0]*on,t[0][1]*on],[t[1][0]*on,t[1][1]*on],[t[2][0]*on,t[2][1]*on]]})});var o=n.map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],o=t(e[1][0],e[0][1])[1],a=t(e[1][0],e[1][1])[1];return o>a&&(n=o,o=a,a=n),[[r,o],[i,a]]})});t.invert&&(r.invert=function(e,i){for(var a=o[+(i<0)],s=n[+(i<0)],u=0,l=a.length;u<l;++u){var c=a[u];if(c[0][0]<=e&&e<c[1][0]&&c[0][1]<=i&&i<c[1][1]){var h=t.invert(e-t(s[u][1][0],0)[0],i);return h[0]+=s[u][1][0],gt(r(h[0],h[1]),[e,i])?h:null}}});var a=e.geoProjection(r),s=a.stream;return a.stream=function(t){var n=a.rotate(),r=s(t),o=(a.rotate([0,0]),s(t));return a.rotate(n),r.sphere=function(){e.geoStream(i,o)},r},a},dr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],vr=function(){return pr(b,dr).scale(160.857)},gr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],mr=function(){return pr(vt,gr).scale(152.63)},yr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],_r=function(){return pr(dn,yr).scale(169.529)},br=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],xr=function(){return pr(dn,br).scale(169.529).rotate([20,0])},wr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Sr=function(){return pr(dt,wr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},Er=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],Mr=function(){return pr(x,Er).scale(152.63).rotate([-20,0])};_t.invert=function(t,e){return[nn/3*t/a(Ke*Ke/3-e*e),e]};var Tr=function(){return e.geoProjection(_t).scale(158.837)},Cr=function(){var t=.5,n=e.geoProjectionMutator(bt),r=n(t);return r.spacing=function(e){return arguments.length?n(t=+e):t},r.scale(124.75)},Ar=Ke/tn;xt.invert=function(t,e){var n=Le(t),r=Le(e),i=We,s=Je;r<Ar?s*=r/Ar:i+=6*o(Ar/r);for(var u=0;u<25;u++){var l=Ye(s),c=a(Be(s)),h=Ye(s/2),f=Be(s/2),p=Ye(i/6),d=Be(i/6),v=.5*i*(1+c)-n,g=s/(f*d)-r,m=c?-.25*i*l/c:0,y=.5*(1+c),_=(1+.5*s*h/f)/(f*d),b=s/f*(p/6)/(d*d),x=m*b-_*y,w=(v*b-g*y)/x,S=(g*m-v*_)/x;if(s-=w,i-=S,Le(w)<We&&Le(S)<We)break}return[t<0?-i:i,e<0?-s:s]};var Pr=function(){return e.geoProjection(xt).scale(97.2672)};wt.invert=function(t,e){var n=He(t)*Ke,r=e/2,i=50;do{var o=n*n,a=r*r,s=n*r,u=n*(.975534+a*(-.0143059*o-.119161+-.0547009*a))-t,l=r*(1.00384+o*(.0802894+-.02855*a+199025e-9*o)+a*(.0998909+-.0491032*a))-e,c=.975534-a*(.119161+3*o*.0143059+.0547009*a),h=-s*(.238322+.2188036*a+.0286118*o),f=s*(.1605788+7961e-7*o+-.0571*a),p=1.00384+o*(.0802894+199025e-9*o)+a*(3*(.0998909-.02855*o)-.245516*a),d=h*f-p*c,v=(l*h-u*p)/d,g=(u*f-l*c)/d;n-=v,r-=g}while((Le(v)>We||Le(g)>We)&&--i>0);return i&&[n,r]};var kr=function(){return e.geoProjection(wt).scale(139.98)};St.invert=function(t,e){var n=t*t,r=e*e,s=r+1,u=t?$e*a((s-a(n*n+2*n*(r-1)+s*s))/n+1):1/a(s);return[i(t*u),He(e)*o(u)]};var Ir=function(){return e.geoProjection(St).scale(144.049).clipAngle(89.999)},Or=function(){return _n(Et).parallel(40).scale(158.837)};Mt.invert=function(t,e){return[t,2.5*De(ze(.8*e))-.625*Ke]};var jr=function(){return e.geoProjection(Mt).scale(108.318)},Lr=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Dr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Rr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Br=[[.9245,0],[0,0],[.01943,0]],zr=[[.721316,0],[0,0],[-.00881625,-.00617325]],Fr=a(6),Nr=a(7);jt.invert=function(t,e){var n=3*i(e*Nr/9);return[t*Nr/(Fr*(2*Be(2*n/3)-1)),i(3*Ye(n)*Fr/7)]};var Ur=function(){return e.geoProjection(jt).scale(164.859)};Lt.invert=function(t,e){var n=e*a(2+tn)/(2*a(3)),r=2*i(n);return[3*tn*t/(1+2*Be(r)/Be(r/2)),i((n+Ye(r))/(1+$e))]};var Vr=function(){return e.geoProjection(Lt).scale(188.209)};Dt.invert=function(t,e){var n=a(6/(4+Ke)),r=e/n;return Le(Le(r)-Je)<We&&(r=r<0?-Je:Je),[1.5*t/(n*(.5+Be(r))),i((r/2+Ye(r))/(1+Ke/4))]};var Gr=function(){return e.geoProjection(Dt).scale(166.518)};Rt.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Le(n)>We&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var qr=function(){return e.geoProjection(Rt).scale(175.295)};Bt.invert=function(t,e){var n,r,i,o,a=e,s=25;do{r=a*a,i=r*r,a-=n=(a*(1.01183+i*i*(.01926*r-.02625-.00396*i))-e)/(1.01183+i*i*(.21186*r-.23625+-.05148*i))}while(Le(n)>Ze&&--s>0);return r=a*a,i=r*r,o=r*i,[t/(.84719-.13063*r+o*o*(.05494*r-.04515-.02326*i+.00331*o)),a]};var Hr=function(){return e.geoProjection(Bt).scale(175.295)};zt.invert=function(t,e){for(var n=e/2,r=0,i=1/0;r<10&&Le(i)>We;++r){var o=Be(e/2);e-=i=(e-Xe(e/2)-n)/(1-.5/(o*o))}return[2*t/(1+Be(e)),e]};var Yr=function(){return e.geoProjection(zt).scale(152.63)},Xr=1.0148,Wr=.23185,Zr=-.14499,Kr=.02406,Jr=Xr,Qr=5*Wr,$r=7*Zr,ti=9*Kr,ei=1.790857183;Ft.invert=function(t,e){e>ei?e=ei:e<-ei&&(e=-ei);var n,r=e;do{var i=r*r;r-=n=(r*(Xr+i*i*(Wr+i*(Zr+Kr*i)))-e)/(Jr+i*i*(Qr+i*($r+ti*i)))}while(Le(n)>We);return[t,r]};var ni=function(){return e.geoProjection(Ft).scale(139.319)};Nt.invert=function(t,e){if(Le(e)<We)return[t,0];var n,r=t*t+e*e,a=.5*e,s=10;do{var u=Xe(a),l=1/Be(a),c=r-2*e*a+a*a;a-=n=(u*c+2*(a-e))/(2+c*l*l+2*(a-e)*u)}while(Le(n)>We&&--s>0);return u=Xe(a),[(Le(e)<Le(a+1/u)?i(t*u):He(t)*(o(Le(t*u))+Je))/Ye(a),a]};var ri=function(){return e.geoProjection(Nt).scale(103.74)},ii=function(t,e){var n=Gt(t[1],t[0]),r=Gt(e[1],e[0]),i=Ht(n,r),o=qt(n)/qt(r);return Vt([1,0,t[0][0],0,1,t[0][1]],Vt([o,0,0,0,o,0],Vt([Be(i),Ye(i),0,-Ye(i),Be(i),0],[1,0,-e[0][0],0,1,-e[0][1]])))},oi=function(t,n,r){function i(t,e){if(t.edges=Zt(t.face),e.face){var n=t.shared=Wt(t.face,e.face),r=ii(n.map(e.project),n.map(t.project));t.transform=e.transform?Vt(e.transform,r):r;for(var o=e.edges,a=0,s=o.length;a<s;++a)Xt(n[0],o[a][1])&&Xt(n[1],o[a][0])&&(o[a]=t),Xt(n[0],o[a][0])&&Xt(n[1],o[a][1])&&(o[a]=t);for(o=t.edges,a=0,s=o.length;a<s;++a)Xt(n[0],o[a][0])&&Xt(n[1],o[a][1])&&(o[a]=e),Xt(n[0],o[a][1])&&Xt(n[1],o[a][0])&&(o[a]=e)}else t.transform=e.transform;return t.children&&t.children.forEach(function(e){i(e,t)}),t}function o(t,e){var r,i=n(t,e),o=i.project([t*rn,e*rn]);return(r=i.transform)?[r[0]*o[0]+r[1]*o[1]+r[2],-(r[3]*o[0]+r[4]*o[1]+r[5])]:(o[1]=-o[1],o)}function a(t,e){var n=t.project.invert,r=t.transform,i=e;if(r&&(r=Ut(r),i=[r[0]*i[0]+r[1]*i[1]+r[2],r[3]*i[0]+r[4]*i[1]+r[5]]),n&&t===s(o=n(i)))return o;for(var o,u=t.children,l=0,c=u&&u.length;l<c;++l)if(o=a(u[l],e))return o}function s(t){return n(t[0]*on,t[1]*on)}r=null==r?-Ke/6:r,i(t,{transform:[Be(r),Ye(r),0,-Ye(r),Be(r),0]}),Kt(t)&&(o.invert=function(e,n){var r=a(t,[e,-n]);return r&&(r[0]*=on,r[1]*=on,r)});var u=e.geoProjection(o),l=u.stream;return u.stream=function(e){var n=u.rotate(),r=l(e),i=(u.rotate([0,0]),l(e));return u.rotate(n),r.sphere=function(){i.polygonStart(),i.lineStart(),Yt(i,t),i.lineEnd(),i.polygonEnd()},r},u},ai=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],si=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return ai[t]})}),ui=function(t){t=t||function(t){var n=e.geoCentroid({type:"MultiPoint",coordinates:t});return e.geoGnomonic().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=si.map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,e){var r=n[t];r&&(r.children||(r.children=[])).push(n[e])}),oi(n[0],function(t,e){return n[t<-Ke/2?e<0?6:4:t<0?e<0?2:0:t<Ke/2?e<0?3:1:e<0?7:5]}).scale(101.858).center([0,45])},li=2/a(3);Jt.invert=function(t,e){return I.invert(t/li,e)};var ci=function(t){t=t||function(t){var n=e.geoCentroid({type:"MultiPoint",coordinates:t});return e.geoProjection(Jt).translate([0,0]).scale(1).rotate(n[1]>0?[-n[0],0]:[180-n[0],180])};var n=si.map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,e){var r=n[t];r&&(r.children||(r.children=[])).push(n[e])}),oi(n[0],function(t,e){return n[t<-Ke/2?e<0?6:4:t<0?e<0?2:0:t<Ke/2?e<0?3:1:e<0?7:5]}).scale(121.906).center([0,48.5904])},hi=function(t){function n(t,e){var n=Be(e),r=[n*Be(t),n*Ye(t),Ye(e)],o=t<-Ke/2?e<0?6:4:t<0?e<0?2:0:t<Ke/2?e<0?3:1:e<0?7:5,s=i[o];return a[Qt(s[0],r)<0?8+3*o:Qt(s[1],r)<0?8+3*o+1:Qt(s[2],r)<0?8+3*o+2:o]}t=t||function(t){var n=6===t.length?e.geoCentroid({type:"MultiPoint",coordinates:t}):t[0];return e.geoGnomonic().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var r=si.map(function(t){for(var e,n=t.map(ee),r=n.length,i=n[r-1],o=[],a=0;a<r;++a)e=n[a],o.push(te([.9486832980505138*i[0]+.31622776601683794*e[0],.9486832980505138*i[1]+.31622776601683794*e[1],.9486832980505138*i[2]+.31622776601683794*e[2]]),te([.9486832980505138*e[0]+.31622776601683794*i[0],.9486832980505138*e[1]+.31622776601683794*i[1],.9486832980505138*e[2]+.31622776601683794*i[2]])),i=e;return o}),i=[],o=[-1,0,0,1,0,1,4,5];r.forEach(function(t,e){for(var n=si[e],a=n.length,s=i[e]=[],u=0;u<a;++u)r.push([n[u],t[(2*u+2)%(2*a)],t[(2*u+1)%(2*a)]]),o.push(e),s.push($t(ee(t[(2*u+2)%(2*a)]),ee(t[(2*u+1)%(2*a)])))});var a=r.map(function(e){return{project:t(e),face:e}});return o.forEach(function(t,e){var n=a[t];n&&(n.children||(n.children=[])).push(a[e])}),oi(a[0],n).scale(110.625).center([0,45])},fi=function(){},pi=function(t){if((e=t.length)<4)return!1;for(var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0},di=function(t,e){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],l=u[0],c=u[1],h=t[s],f=h[0],p=h[1];c>r^p>r&&n<(f-l)*(r-c)/(p-c)+l&&(i=!i)}return i},vi=function(t,e){var n,r=e.stream;if(!r)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=re;break;case"FeatureCollection":n=ne;break;default:n=oe}return n(t,r)},gi=[],mi=[],yi={point:function(t,e){gi.push([t,e])},result:function(){var t=gi.length?gi.length<2?{type:"Point",coordinates:gi[0]}:{type:"MultiPoint",coordinates:gi}:null;return gi=[],t}},_i={lineStart:fi,point:function(t,e){gi.push([t,e])},lineEnd:function(){gi.length&&(mi.push(gi),gi=[])},result:function(){var t=mi.length?mi.length<2?{type:"LineString",coordinates:mi[0]}:{type:"MultiLineString",coordinates:mi}:null;return mi=[],t}},bi={polygonStart:fi,lineStart:fi,point:function(t,e){gi.push([t,e])},lineEnd:function(){var t=gi.length;if(t){do{gi.push(gi[0].slice())}while(++t<4);mi.push(gi),gi=[]}},polygonEnd:fi,result:function(){if(!mi.length)return null;var t=[],e=[];return mi.forEach(function(n){pi(n)?t.push([n]):e.push(n)}),e.forEach(function(e){var n=e[0];t.some(function(t){if(di(t[0],n))return t.push(e),!0})||t.push([e])}),mi=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},xi=function(t){function n(e,n){var i=Le(e)<Je,o=t(i?e:e>0?e-Ke:e+Ke,n),a=(o[0]-o[1])*$e,s=(o[0]+o[1])*$e;if(i)return[a,s];var u=r*$e,l=a>0^s>0?-1:1;return[l*a-He(s)*u,l*s-He(a)*u]}var r=t(Je,0)[0]-t(-Je,0)[0];return t.invert&&(n.invert=function(e,n){var i=(e+n)*$e,o=(n-e)*$e,a=Le(i)<.5*r&&Le(o)<.5*r;if(!a){var s=r*$e,u=i>0^o>0?-1:1,l=-u*e+(o>0?1:-1)*s,c=-u*n+(i>0?1:-1)*s;i=(-l-c)*$e,o=(l-c)*$e}var h=t.invert(i,o);return a||(h[0]+=i>0?Ke:-Ke),h}),e.geoProjection(n).rotate([-90,-90,45]).clipAngle(179.999)},wi=function(){return xi(J).scale(176.423)},Si=function(){return xi(it).scale(111.48)},Ei=function(t,e){function n(t){var n=t.length,r=2,i=new Array(n);for(i[0]=+t[0].toFixed(e),i[1]=+t[1].toFixed(e);r<n;)i[r]=t[r],++r;return i}function r(t){return t.map(n)}function i(t){return t.map(r)}function o(t){if(null==t)return t;var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(o)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:r(t.coordinates)};break;case"MultiLineString":case"Polygon":e={type:t.type,coordinates:i(t.coordinates)};break;case"MultiPolygon":e={type:"MultiPolygon",coordinates:t.coordinates.map(i)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function a(t){var e={type:"Feature",properties:t.properties,geometry:o(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),e}if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");if(null!=t)switch(t.type){case"Feature":return a(t);case"FeatureCollection":var s={type:"FeatureCollection",features:t.features.map(a)};return null!=t.bbox&&(s.bbox=t.bbox),s;default:return o(t)}return t},Mi=function(){return _n(ae).scale(131.215)},Ti=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Ti.forEach(function(t){t[1]*=1.0144}),se.invert=function(t,e){var n=e/Je,r=90*n,i=Ve(18,Le(r/5)),o=Ue(0,Fe(i));do{var a=Ti[o][1],s=Ti[o+1][1],u=Ti[Ve(19,o+2)][1],l=u-a,c=u-2*s+a,h=2*(Le(n)-s)/l,f=c/l,p=h*(1-f*h*(1-2*f*h));if(p>=0||1===o){r=(e>=0?5:-5)*(p+i);var d,v=50;do{i=Ve(18,Le(r)/5),o=Fe(i),p=i-o,a=Ti[o][1],s=Ti[o+1][1],u=Ti[Ve(19,o+2)][1],r-=(d=(e>=0?Je:-Je)*(s+p*(u-a)/2+p*p*(u-2*s+a)/2)-e)*rn}while(Le(d)>Ze&&--v>0);break}}while(--o>=0);var g=Ti[o][0],m=Ti[o+1][0],y=Ti[Ve(19,o+2)][0];return[t/(m+p*(y-g)/2+p*p*(y-2*m+g)/2),r*on]};var Ci=function(){return e.geoProjection(se).scale(152.63)},Ai=function(){var t=2,n=0,r=e.geoProjectionMutator(le),i=r(t,n);return i.distance=function(e){return arguments.length?r(t=+e,n):t},i.tilt=function(e){return arguments.length?r(t,n=e*on):n*rn},i.scale(432.147).clipAngle(o(1/t)*rn-1e-6)},Pi=1e-4,ki=1e4,Ii=-180,Oi=Ii+Pi,ji=180,Li=ji-Pi,Di=-90,Ri=Di+Pi,Bi=90,zi=Bi-Pi,Fi=function(t){if(null==t)return t;switch(t.type){case"Feature":return me(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(me)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return ye(t)}};_e.invert=function(t,e){var n=e/1.70711,r=Ye(Qe*n);return[t/(.74482-.34588*r*r),2*De(n)]};var Ni=function(){return e.geoProjection(_e).scale(146.153)},Ui=function(t,n,r){var o=e.geoInterpolate(n,r),a=o(.5),s=e.geoRotation([-a[0],-a[1]])(n),u=o.distance/2,l=-i(Ye(s[1]*on)/Ye(u)),c=[-a[0],-a[1],-(s[0]>0?Ke-l:l)*rn],h=e.geoProjection(t(u)).rotate(c),f=e.geoRotation(c),p=h.center;return delete h.rotate,h.center=function(t){return arguments.length?p(f(t)):f.invert(p())},h.clipAngle(90)};Te.invert=function(t,e){if(Le(e)<We)return[t,0];if(Le(t)<We)return[0,Je*Ye(2*De(e/Ke))];var n=(t/=Ke)*t,r=(e/=Ke)*e,i=n+r,s=i*i,u=-Le(e)*(1+i),l=u-2*r+n,c=-2*u+1+2*r+s,h=r/c+(2*l*l*l/(c*c*c)-9*u*l/(c*c))/27,f=(u-l*l/(3*c))/c,p=2*a(-f/3),d=o(3*h/(f*p))/3;return[Ke*(i-1+a(1+2*(n-r)+s))/(2*t),He(e)*Ke*(-p*Be(d+Ke/3)-l/(3*c))]};var Vi=function(){return e.geoProjection(Te).scale(79.4183)};Ce.invert=function(t,e){if(!t)return[0,Je*Ye(2*De(e/Ke))];var n=Le(t/Ke),r=(1-n*n-(e/=Ke)*e)/(2*n),i=r*r,o=a(i+1);return[He(t)*Ke*(o-r),He(e)*Je*Ye(2*Re(a((1-2*r*n)*(r+o)-n),a(o+r+n)))]};var Gi=function(){return e.geoProjection(Ce).scale(79.4183)};Ae.invert=function(t,e){if(!e)return[t,0];var n=e/Ke,r=(Ke*Ke*(1-n*n)-t*t)/(2*Ke*t);return[t?Ke*(He(t)*a(r*r+1)-r):0,Je*Ye(2*De(n))]};var qi=function(){return e.geoProjection(Ae).scale(79.4183)};Pe.invert=function(t,e){var n;if(!t||!e)return[t,e];e/=Ke;var r=He(t)*t/Je,i=(r*r-1+4*e*e)/Le(r),o=i*i,s=2*e,u=50;do{var l=s*s,c=(8*s-l*(l+2)-5)/(2*l*(s-1)),h=(3*s-l*s-10)/(2*l*s),f=c*c,p=s*c,d=s+c,v=d*d,g=s+3*c,m=v*(l+f*o-1)+(1-l)*(l*(g*g+4*f)+f*(12*p+4*f)),y=-2*d*(4*p*f+(1-4*l+3*l*l)*(1+h)+f*(14*l-6-o+(8*l-8-2*o)*h)+p*(12*l-8+(10*l-10-o)*h)),_=a(m);s-=n=(i*(v+f-1)+2*_-r*(4*v+o))/(i*(2*c*h+2*d*(1+h))+y/_-8*d*(i*(-1+f+v)+2*_)*(1+h)/(o+4*v))}while(n>We&&--u>0);return[He(t)*(a(i*i+4)+i)*Ke/4,Je*s]};var Hi=function(){return e.geoProjection(Pe).scale(127.16)},Yi=4*Ke+3*a(3),Xi=2*a(2*Ke*a(3)/Yi),Wi=_(Xi*a(3)/Ke,Xi,Yi/6),Zi=function(){return e.geoProjection(Wi).scale(176.84)};ke.invert=function(t,e){return[t/a(1-3*e*e/(Ke*Ke)),e]};var Ki=function(){return e.geoProjection(ke).scale(152.63)};Ie.invert=function(t,e){var n=t/2.66723,r=e/1.24104,o=a(n*n+r*r),s=2*i(o/2);return[3*Re(t*Xe(s),2.66723*o),o&&i(e*Ye(s)/(1.24104*.90631*o))]};var Ji=function(){return e.geoProjection(Ie).scale(172.632)};Oe.invert=function(t,e){var n=(t*t+e*e)/-2,r=a(-n*(2+n)),o=e*n+t*r,s=t*n-e*r,u=a(s*s+o*o);return[Re(r*o,u*(1+n)),u?-i(r*s/u):0]};var Qi=function(){return e.geoProjection(Oe).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)};je.invert=function(t,e){var n=t,r=e,i=25;do{var s,u=Be(r),l=Ye(r),c=Ye(2*r),h=l*l,f=u*u,p=Ye(n),d=Be(n/2),v=Ye(n/2),g=v*v,m=1-f*d*d,y=m?o(u*d)*a(s=1/m):s=0,_=.5*(2*y*u*v+n/Je)-t,b=.5*(y*l+r)-e,x=.5*s*(f*g+y*u*d*h)+.5/Je,w=s*(p*c/4-y*l*v),S=.125*s*(c*v-y*l*f*p),E=.5*s*(h*d+y*g*u)+.5,M=w*S-E*x,T=(b*w-_*E)/M,C=(_*S-b*x)/M;n-=T,r-=C}while((Le(T)>We||Le(C)>We)&&--i>0);return[n,r]};var $i=function(){return e.geoProjection(je).scale(158.837)};t.geoAiry=an,t.geoAiryRaw=f,t.geoAitoff=sn,t.geoAitoffRaw=p,t.geoArmadillo=un,t.geoArmadilloRaw=d,t.geoAugust=ln,t.geoAugustRaw=v,t.geoBaker=fn,t.geoBakerRaw=g,t.geoBerghaus=pn,t.geoBerghausRaw=m,t.geoBoggs=yn,t.geoBoggsRaw=b,t.geoBonne=xn,t.geoBonneRaw=w,t.geoBottomley=wn,t.geoBottomleyRaw=S,t.geoBromley=En,t.geoBromleyRaw=Sn,t.geoChamberlin=k,t.geoChamberlinRaw=C,t.geoChamberlinAfrica=P,t.geoCollignon=Mn,t.geoCollignonRaw=I,t.geoCraig=Tn,t.geoCraigRaw=O,t.geoCraster=An,t.geoCrasterRaw=j,t.geoCylindricalEqualArea=Pn,t.geoCylindricalEqualAreaRaw=L,t.geoCylindricalStereographic=kn,t.geoCylindricalStereographicRaw=D,t.geoEckert1=In,t.geoEckert1Raw=R,t.geoEckert2=On,t.geoEckert2Raw=B,t.geoEckert3=jn,t.geoEckert3Raw=z,t.geoEckert4=Ln,t.geoEckert4Raw=F,t.geoEckert5=Dn,t.geoEckert5Raw=N,t.geoEckert6=Rn,t.geoEckert6Raw=U,t.geoEisenlohr=zn,t.geoEisenlohrRaw=V,t.geoFahey=Nn,t.geoFaheyRaw=G,t.geoFoucaut=Un,t.geoFoucautRaw=q,t.geoGilbert=Vn,t.geoGingery=Gn,t.geoGingeryRaw=X,t.geoGinzburg4=Yn,t.geoGinzburg4Raw=Hn,t.geoGinzburg5=Wn,t.geoGinzburg5Raw=Xn,t.geoGinzburg6=Kn,t.geoGinzburg6Raw=Zn,t.geoGinzburg8=Jn,t.geoGinzburg8Raw=K,t.geoGinzburg9=$n,t.geoGinzburg9Raw=Qn,t.geoGringorten=er,t.geoGringortenRaw=J,t.geoGuyou=nr,t.geoGuyouRaw=it,t.geoHammer=rr,t.geoHammerRaw=st,t.geoHammerRetroazimuthal=ir,t.geoHammerRetroazimuthalRaw=lt,t.geoHealpix=sr,t.geoHealpixRaw=ht,t.geoHill=ur,t.geoHillRaw=pt,t.geoHomolosine=fr,t.geoHomolosineRaw=vt,t.geoInterrupt=pr,t.geoInterruptedBoggs=vr,t.geoInterruptedHomolosine=mr,t.geoInterruptedMollweide=_r,t.geoInterruptedMollweideHemispheres=xr,t.geoInterruptedSinuMollweide=Sr,t.geoInterruptedSinusoidal=Mr,t.geoKavrayskiy7=Tr,t.geoKavrayskiy7Raw=_t,t.geoLagrange=Cr,t.geoLagrangeRaw=bt,t.geoLarrivee=Pr,t.geoLarriveeRaw=xt,t.geoLaskowski=kr,t.geoLaskowskiRaw=wt,t.geoLittrow=Ir,t.geoLittrowRaw=St,t.geoLoximuthal=Or,t.geoLoximuthalRaw=Et,t.geoMiller=jr,t.geoMillerRaw=Mt,t.geoModifiedStereographic=Ot,t.geoModifiedStereographicRaw=Tt,t.geoModifiedStereographicAlaska=Ct,t.geoModifiedStereographicGs48=At,t.geoModifiedStereographicGs50=Pt,t.geoModifiedStereographicMiller=kt,t.geoModifiedStereographicLee=It,t.geoMollweide=vn,t.geoMollweideRaw=dn,t.geoMtFlatPolarParabolic=Ur,t.geoMtFlatPolarParabolicRaw=jt,t.geoMtFlatPolarQuartic=Vr,t.geoMtFlatPolarQuarticRaw=Lt,t.geoMtFlatPolarSinusoidal=Gr,t.geoMtFlatPolarSinusoidalRaw=Dt,t.geoNaturalEarth=qr,t.geoNaturalEarthRaw=Rt,t.geoNaturalEarth2=Hr,t.geoNaturalEarth2Raw=Bt,t.geoNellHammer=Yr,t.geoNellHammerRaw=zt,t.geoPatterson=ni,t.geoPattersonRaw=Ft,t.geoPolyconic=ri,t.geoPolyconicRaw=Nt,t.geoPolyhedral=oi,t.geoPolyhedralButterfly=ui,t.geoPolyhedralCollignon=ci,t.geoPolyhedralWaterman=hi,t.geoProject=vi,t.geoGringortenQuincuncial=wi,t.geoPeirceQuincuncial=Si,t.geoPierceQuincuncial=Si,t.geoQuantize=Ei,t.geoQuincuncial=xi,t.geoRectangularPolyconic=Mi,t.geoRectangularPolyconicRaw=ae,t.geoRobinson=Ci,t.geoRobinsonRaw=se,t.geoSatellite=Ai,t.geoSatelliteRaw=le,t.geoSinuMollweide=hr,t.geoSinuMollweideRaw=dt,t.geoSinusoidal=bn,t.geoSinusoidalRaw=x,t.geoStitch=Fi,t.geoTimes=Ni,t.geoTimesRaw=_e,t.geoTwoPointAzimuthal=we,t.geoTwoPointAzimuthalRaw=be,t.geoTwoPointAzimuthalUsa=xe,t.geoTwoPointEquidistant=Me,t.geoTwoPointEquidistantRaw=Se,t.geoTwoPointEquidistantUsa=Ee,t.geoVanDerGrinten=Vi,t.geoVanDerGrintenRaw=Te,t.geoVanDerGrinten2=Gi,t.geoVanDerGrinten2Raw=Ce,t.geoVanDerGrinten3=qi,t.geoVanDerGrinten3Raw=Ae,t.geoVanDerGrinten4=Hi,t.geoVanDerGrinten4Raw=Pe,t.geoWagner4=Zi,t.geoWagner4Raw=Wi,t.geoWagner6=Ki,t.geoWagner6Raw=ke,t.geoWagner7=Ji,t.geoWagner7Raw=Ie,t.geoWiechel=Qi,t.geoWiechelRaw=Oe,t.geoWinkel3=$i,t.geoWinkel3Raw=je,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.11.9@d3-geo/dist/d3-geo.js":function(t,e,n){!function(t,r){r(e,n("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))}(0,function(t,e){"use strict";function n(){return new r}function r(){this.reset()}function i(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function o(t){return t>1?0:t<-1?zn:Math.acos(t)}function a(t){return t>1?Fn:t<-1?-Fn:Math.asin(t)}function s(t){return(t=Qn(t/2))*t}function u(){}function l(t,e){t&&rr.hasOwnProperty(t.type)&&rr[t.type](t,e)}function c(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function h(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)c(t[n],e,1);e.polygonEnd()}function f(t,e){t&&nr.hasOwnProperty(t.type)?nr[t.type](t,e):l(t,e)}function p(){ar.point=v}function d(){g(rn,on)}function v(t,e){ar.point=g,rn=t,on=e,t*=Gn,e*=Gn,an=t,sn=Xn(e=e/2+Nn),un=Qn(e)}function g(t,e){t*=Gn,e*=Gn,e=e/2+Nn;var n=t-an,r=n>=0?1:-1,i=r*n,o=Xn(e),a=Qn(e),s=un*a,u=sn*o+s*Xn(i),l=s*r*Qn(i);ir.add(Yn(l,u)),an=t,sn=o,un=a}function m(t){return or.reset(),f(t,ar),2*or}function y(t){return[Yn(t[1],t[0]),a(t[2])]}function _(t){var e=t[0],n=t[1],r=Xn(n);return[r*Xn(e),r*Qn(e),Qn(n)]}function b(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function x(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function w(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function S(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function E(t){var e=tr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function M(t,e){mn.push(yn=[ln=t,hn=t]),e<cn&&(cn=e),e>fn&&(fn=e)}function T(t,e){var n=_([t*Gn,e*Gn]);if(gn){var r=x(gn,n),i=[r[1],-r[0],0],o=x(i,r);E(o),o=y(o);var a,s=t-pn,u=s>0?1:-1,l=o[0]*Vn*u,c=qn(s)>180;c^(u*pn<l&&l<u*t)?(a=o[1]*Vn)>fn&&(fn=a):(l=(l+360)%360-180,c^(u*pn<l&&l<u*t)?(a=-o[1]*Vn)<cn&&(cn=a):(e<cn&&(cn=e),e>fn&&(fn=e))),c?t<pn?O(ln,t)>O(ln,hn)&&(hn=t):O(t,hn)>O(ln,hn)&&(ln=t):hn>=ln?(t<ln&&(ln=t),t>hn&&(hn=t)):t>pn?O(ln,t)>O(ln,hn)&&(hn=t):O(t,hn)>O(ln,hn)&&(ln=t)}else mn.push(yn=[ln=t,hn=t]);e<cn&&(cn=e),e>fn&&(fn=e),gn=n,pn=t}function C(){ur.point=T}function A(){yn[0]=ln,yn[1]=hn,ur.point=M,gn=null}function P(t,e){if(gn){var n=t-pn;sr.add(qn(n)>180?n+(n>0?360:-360):n)}else dn=t,vn=e;ar.point(t,e),T(t,e)}function k(){ar.lineStart()}function I(){P(dn,vn),ar.lineEnd(),qn(sr)>Rn&&(ln=-(hn=180)),yn[0]=ln,yn[1]=hn,gn=null}function O(t,e){return(e-=t)<0?e+360:e}function j(t,e){return t[0]-e[0]}function L(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function D(t){var e,n,r,i,o,a,s;if(fn=hn=-(ln=cn=1/0),mn=[],f(t,ur),n=mn.length){for(mn.sort(j),e=1,r=mn[0],o=[r];e<n;++e)i=mn[e],L(r,i[0])||L(r,i[1])?(O(r[0],i[1])>O(r[0],r[1])&&(r[1]=i[1]),O(i[0],r[1])>O(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=O(r[1],i[0]))>a&&(a=s,ln=i[0],hn=r[1])}return mn=yn=null,ln===1/0||cn===1/0?[[NaN,NaN],[NaN,NaN]]:[[ln,cn],[hn,fn]]}function R(t,e){t*=Gn,e*=Gn;var n=Xn(e);B(n*Xn(t),n*Qn(t),Qn(e))}function B(t,e,n){++_n,xn+=(t-xn)/_n,wn+=(e-wn)/_n,Sn+=(n-Sn)/_n}function z(){lr.point=F}function F(t,e){t*=Gn,e*=Gn;var n=Xn(e);On=n*Xn(t),jn=n*Qn(t),Ln=Qn(e),lr.point=N,B(On,jn,Ln)}function N(t,e){t*=Gn,e*=Gn;var n=Xn(e),r=n*Xn(t),i=n*Qn(t),o=Qn(e),a=Yn(tr((a=jn*o-Ln*i)*a+(a=Ln*r-On*o)*a+(a=On*i-jn*r)*a),On*r+jn*i+Ln*o);bn+=a,En+=a*(On+(On=r)),Mn+=a*(jn+(jn=i)),Tn+=a*(Ln+(Ln=o)),B(On,jn,Ln)}function U(){lr.point=R}function V(){lr.point=q}function G(){H(kn,In),lr.point=R}function q(t,e){kn=t,In=e,t*=Gn,e*=Gn,lr.point=H;var n=Xn(e);On=n*Xn(t),jn=n*Qn(t),Ln=Qn(e),B(On,jn,Ln)}function H(t,e){t*=Gn,e*=Gn;var n=Xn(e),r=n*Xn(t),i=n*Qn(t),o=Qn(e),s=jn*o-Ln*i,u=Ln*r-On*o,l=On*i-jn*r,c=tr(s*s+u*u+l*l),h=a(c),f=c&&-h/c;Cn+=f*s,An+=f*u,Pn+=f*l,bn+=h,En+=h*(On+(On=r)),Mn+=h*(jn+(jn=i)),Tn+=h*(Ln+(Ln=o)),B(On,jn,Ln)}function Y(t){_n=bn=xn=wn=Sn=En=Mn=Tn=Cn=An=Pn=0,f(t,lr);var e=Cn,n=An,r=Pn,i=e*e+n*n+r*r;return i<Bn&&(e=En,n=Mn,r=Tn,bn<Rn&&(e=xn,n=wn,r=Sn),(i=e*e+n*n+r*r)<Bn)?[NaN,NaN]:[Yn(n,e)*Vn,a(r/tr(i))*Vn]}function X(t){return function(){return t}}function W(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Z(t,e){return[qn(t)>zn?t+Math.round(-t/Un)*Un:t,e]}function K(t,e,n){return(t%=Un)?e||n?W(Q(t),$(e,n)):Q(t):e||n?$(e,n):Z}function J(t){return function(e,n){return e+=t,[e>zn?e-Un:e<-zn?e+Un:e,n]}}function Q(t){var e=J(t);return e.invert=J(-t),e}function $(t,e){function n(t,e){var n=Xn(e),u=Xn(t)*n,l=Qn(t)*n,c=Qn(e),h=c*r+u*i;return[Yn(l*o-h*s,u*r-c*i),a(h*o+l*s)]}var r=Xn(t),i=Qn(t),o=Xn(e),s=Qn(e);return n.invert=function(t,e){var n=Xn(e),u=Xn(t)*n,l=Qn(t)*n,c=Qn(e),h=c*o-l*s;return[Yn(l*o+c*s,u*r+h*i),a(h*r-u*i)]},n}function tt(t){function e(e){return e=t(e[0]*Gn,e[1]*Gn),e[0]*=Vn,e[1]*=Vn,e}return t=K(t[0]*Gn,t[1]*Gn,t.length>2?t[2]*Gn:0),e.invert=function(e){return e=t.invert(e[0]*Gn,e[1]*Gn),e[0]*=Vn,e[1]*=Vn,e},e}function et(t,e,n,r,i,o){if(n){var a=Xn(e),s=Qn(e),u=r*n;null==i?(i=e+r*Un,o=e-u/2):(i=nt(a,i),o=nt(a,o),(r>0?i<o:i>o)&&(i+=r*Un));for(var l,c=i;r>0?c>o:c<o;c-=u)l=y([a,-s*Xn(c),-s*Qn(c)]),t.point(l[0],l[1])}}function nt(t,e){e=_(e),e[0]-=t,E(e);var n=o(-e[1]);return((-e[2]<0?-n:n)+Un-Rn)%Un}function rt(){function t(t,e){n.push(t=r(t,e)),t[0]*=Vn,t[1]*=Vn}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*Gn,u=a.apply(this,arguments)*Gn;return n=[],r=K(-t[0]*Gn,-t[1]*Gn,0).invert,et(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=X([0,0]),o=X(90),a=X(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:X([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:X(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:X(+t),e):a},e}function it(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:u,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ot(t,e){return qn(t[0]-e[0])<Rn&&qn(t[1]-e[1])<Rn}function at(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function st(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(ot(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s.push(n=new at(r,t,null,!0)),u.push(n.o=new at(r,null,n,!1)),s.push(n=new at(a,t,null,!1)),u.push(n.o=new at(a,null,n,!0))}}),s.length){for(u.sort(e),ut(s),ut(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,l=f.z,p=!p}while(!f.v);i.lineEnd()}}}function ut(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function lt(t){return qn(t[0])<=zn?t[0]:$n(t[0])*((qn(t[0])+zn)%Un-zn)}function ct(t,e){var n=lt(e),r=e[1],i=Qn(r),o=[Qn(n),-Xn(n),0],s=0,u=0;xr.reset(),1===i?r=Fn+Rn:-1===i&&(r=-Fn-Rn);for(var l=0,c=t.length;l<c;++l)if(f=(h=t[l]).length)for(var h,f,p=h[f-1],d=lt(p),v=p[1]/2+Nn,g=Qn(v),m=Xn(v),y=0;y<f;++y,d=w,g=M,m=T,p=b){var b=h[y],w=lt(b),S=b[1]/2+Nn,M=Qn(S),T=Xn(S),C=w-d,A=C>=0?1:-1,P=A*C,k=P>zn,I=g*M;if(xr.add(Yn(I*A*Qn(P),m*T+I*Xn(P))),s+=k?C+A*Un:C,k^d>=n^w>=n){var O=x(_(p),_(b));E(O);var j=x(o,O);E(j);var L=(k^C>=0?-1:1)*a(j[2]);(r>L||r===L&&(O[0]||O[1]))&&(u+=k^C>=0?1:-1)}}return(s<-Rn||s<Rn&&xr<-Rn)^1&u}function ht(t,n,r,i){return function(o){function a(e,n){t(e,n)&&o.point(e,n)}function s(t,e){g.point(t,e)}function u(){b.point=s,g.lineStart()}function l(){b.point=a,g.lineEnd()}function c(t,e){v.push([t,e]),y.point(t,e)}function h(){y.lineStart(),v=[]}function f(){c(v[0][0],v[0][1]),y.lineEnd();var t,e,n,r,i=y.clean(),a=m.result(),s=a.length;if(v.pop(),p.push(v),v=null,s)if(1&i){if(n=a[0],(e=n.length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(ft))}var p,d,v,g=n(o),m=it(),y=n(m),_=!1,b={point:a,lineStart:u,lineEnd:l,polygonStart:function(){b.point=c,b.lineStart=h,b.lineEnd=f,d=[],p=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=l,d=e.merge(d);var t=ct(p,i);d.length?(_||(o.polygonStart(),_=!0),st(d,pt,t,r,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return b}}function ft(t){return t.length>1}function pt(t,e){return((t=t.x)[0]<0?t[1]-Fn-Rn:Fn-t[1])-((e=e.x)[0]<0?e[1]-Fn-Rn:Fn-e[1])}function dt(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?zn:-zn,u=qn(o-n);qn(u-zn)<Rn?(t.point(n,r=(r+a)/2>0?Fn:-Fn),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=zn&&(qn(n-i)<Rn&&(n-=i*Rn),qn(o-s)<Rn&&(o-=s*Rn),r=vt(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function vt(t,e,n,r){var i,o,a=Qn(t-n);return qn(a)>Rn?Hn((Qn(e)*(o=Xn(r))*Qn(n)-Qn(r)*(i=Xn(e))*Qn(t))/(i*o*a)):(e+r)/2}function gt(t,e,n,r){var i;if(null==t)i=n*Fn,r.point(-zn,i),r.point(0,i),r.point(zn,i),r.point(zn,0),r.point(zn,-i),r.point(0,-i),r.point(-zn,-i),r.point(-zn,0),r.point(-zn,i);else if(qn(t[0]-e[0])>Rn){var o=t[0]<e[0]?zn:-zn;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function mt(t){function e(e,n,r,i){et(i,t,s,r,e,n)}function n(t,e){return Xn(t)*Xn(e)>a}function r(t){var e,r,a,s,c;return{lineStart:function(){s=a=!1,c=1},point:function(h,f){var p,d=[h,f],v=n(h,f),g=u?v?0:o(h,f):v?o(h+(h<0?zn:-zn),f):0;if(!e&&(s=a=v)&&t.lineStart(),v!==a&&(!(p=i(e,d))||ot(e,p)||ot(d,p))&&(d[0]+=Rn,d[1]+=Rn,v=n(d[0],d[1])),v!==a)c=0,v?(t.lineStart(),p=i(d,e),t.point(p[0],p[1])):(p=i(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(l&&e&&u^v){var m;g&r||!(m=i(d,e,!0))||(c=0,u?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&ot(e,d)||t.point(d[0],d[1]),e=d,a=v,r=g},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return c|(s&&a)<<1}}}function i(t,e,n){var r=_(t),i=_(e),o=[1,0,0],s=x(r,i),u=b(s,s),l=s[0],c=u-l*l;if(!c)return!n&&t;var h=a*u/c,f=-a*l/c,p=x(o,s),d=S(o,h);w(d,S(s,f));var v=p,g=b(d,v),m=b(v,v),E=g*g-m*(b(d,d)-1);if(!(E<0)){var M=tr(E),T=S(v,(-g-M)/m);if(w(T,d),T=y(T),!n)return T;var C,A=t[0],P=e[0],k=t[1],I=e[1];P<A&&(C=A,A=P,P=C);var O=P-A,j=qn(O-zn)<Rn,L=j||O<Rn;if(!j&&I<k&&(C=k,k=I,I=C),L?j?k+I>0^T[1]<(qn(T[0]-A)<Rn?k:I):k<=T[1]&&T[1]<=I:O>zn^(A<=T[0]&&T[0]<=P)){var D=S(v,(-g+M)/m);return w(D,d),[T,y(D)]}}}function o(e,n){var r=u?t:zn-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=Xn(t),s=6*Gn,u=a>0,l=qn(a)>Rn;return ht(n,r,e,u?[0,-t]:[-zn,t-zn])}function yt(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=e[0],c=e[1],h=0,f=1,p=l-s,d=c-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*p,t[1]=u+h*d),f<1&&(e[0]=s+f*p,e[1]=u+f*d),!0}}}}}function _t(t,n,r,i){function o(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function a(e,o,a,u){var c=0,h=0;if(null==e||(c=s(e,a))!==(h=s(o,a))||l(e,o)<0^a>0)do{u.point(0===c||3===c?t:r,c>1?i:n)}while((c=(c+a+4)%4)!==h);else u.point(o[0],o[1])}function s(e,i){return qn(e[0]-t)<Rn?i>0?0:3:qn(e[0]-r)<Rn?i>0?2:1:qn(e[1]-n)<Rn?i>0?1:0:i>0?3:2}function u(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t,e){o(t,e)&&C.point(t,e)}function c(){for(var e=0,n=0,r=m.length;n<r;++n)for(var o,a,s=m[n],u=1,l=s.length,c=s[0],h=c[0],f=c[1];u<l;++u)o=h,a=f,c=s[u],h=c[0],f=c[1],a<=i?f>i&&(h-o)*(i-a)>(f-a)*(t-o)&&++e:f<=i&&(h-o)*(i-a)<(f-a)*(t-o)&&--e;return e}function h(){C=A,g=[],m=[],T=!0}function f(){var t=c(),n=T&&t,r=(g=e.merge(g)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),r&&st(g,u,t,a,s),s.polygonEnd()),C=s,g=m=y=null}function p(){P.point=v,m&&m.push(y=[]),M=!0,E=!1,w=S=NaN}function d(){g&&(v(_,b),x&&E&&A.rejoin(),g.push(A.result())),P.point=l,E&&C.lineEnd()}function v(e,a){var s=o(e,a);if(m&&y.push([e,a]),M)_=e,b=a,x=s,M=!1,s&&(C.lineStart(),C.point(e,a));else if(s&&E)C.point(e,a);else{var u=[w=Math.max(Er,Math.min(Sr,w)),S=Math.max(Er,Math.min(Sr,S))],l=[e=Math.max(Er,Math.min(Sr,e)),a=Math.max(Er,Math.min(Sr,a))];yt(u,l,t,n,r,i)?(E||(C.lineStart(),C.point(u[0],u[1])),C.point(l[0],l[1]),s||C.lineEnd(),T=!1):s&&(C.lineStart(),C.point(e,a),T=!1)}w=e,S=a,E=s}var g,m,y,_,b,x,w,S,E,M,T,C=s,A=it(),P={point:l,lineStart:p,lineEnd:d,polygonStart:h,polygonEnd:f};return P}}function bt(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=_t(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}function xt(){Tr.point=St,Tr.lineEnd=wt}function wt(){Tr.point=Tr.lineEnd=u}function St(t,e){t*=Gn,e*=Gn,cr=t,hr=Qn(e),fr=Xn(e),Tr.point=Et}function Et(t,e){t*=Gn,e*=Gn;var n=Qn(e),r=Xn(e),i=qn(t-cr),o=Xn(i),a=Qn(i),s=r*a,u=fr*n-hr*r*o,l=hr*n+fr*r*o;Mr.add(Yn(tr(s*s+u*u),l)),cr=t,hr=n,fr=r}function Mt(t){return Mr.reset(),f(t,Tr),+Mr}function Tt(t,e){return Cr[0]=t,Cr[1]=e,Mt(Ar)}function Ct(t,e){return!(!t||!kr.hasOwnProperty(t.type))&&kr[t.type](t,e)}function At(t,e){return 0===Tt(t,e)}function Pt(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Tt(t[o],e)))return!0;if(o>0&&(i=Tt(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Bn*i)return!0;n=r}return!1}function kt(t,e){return!!ct(t.map(It),Ot(e))}function It(t){return t=t.map(Ot),t.pop(),t}function Ot(t){return[t[0]*Gn,t[1]*Gn]}function jt(t,e){return(t&&Pr.hasOwnProperty(t.type)?Pr[t.type]:Ct)(t,e)}function Lt(t,n,r){var i=e.range(t,n-Rn,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function Dt(t,n,r){var i=e.range(t,n-Rn,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function Rt(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return e.range(Wn(a/m)*m,o,m).map(p).concat(e.range(Wn(c/y)*y,l,y).map(d)).concat(e.range(Wn(i/v)*v,r,v).filter(function(t){return qn(t%m)>Rn}).map(h)).concat(e.range(Wn(u/g)*g,s,g).filter(function(t){return qn(t%y)>Rn}).map(f))}var r,i,o,a,s,u,l,c,h,f,p,d,v=10,g=v,m=90,y=360,_=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(d(l).slice(1),p(o).reverse().slice(1),d(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],o=+e[1][0],c=+e[0][1],l=+e[1][1],a>o&&(e=a,a=o,o=e),c>l&&(e=c,c=l,l=e),t.precision(_)):[[a,c],[o,l]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],u=+e[0][1],s=+e[1][1],i>r&&(e=i,i=r,r=e),u>s&&(e=u,u=s,s=e),t.precision(_)):[[i,u],[r,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.stepMinor=function(e){return arguments.length?(v=+e[0],g=+e[1],t):[v,g]},t.precision=function(e){return arguments.length?(_=+e,h=Lt(u,s,90),f=Dt(i,r,_),p=Lt(c,l,90),d=Dt(a,o,_),t):_},t.extentMajor([[-180,-90+Rn],[180,90-Rn]]).extentMinor([[-180,-80-Rn],[180,80+Rn]])}function Bt(){return Rt()()}function zt(t,e){var n=t[0]*Gn,r=t[1]*Gn,i=e[0]*Gn,o=e[1]*Gn,u=Xn(r),l=Qn(r),c=Xn(o),h=Qn(o),f=u*Xn(n),p=u*Qn(n),d=c*Xn(i),v=c*Qn(i),g=2*a(tr(s(o-r)+u*c*s(i-n))),m=Qn(g),y=g?function(t){var e=Qn(t*=g)/m,n=Qn(g-t)/m,r=n*f+e*d,i=n*p+e*v,o=n*l+e*h;return[Yn(i,r)*Vn,Yn(o,tr(r*r+i*i))*Vn]}:function(){return[n*Vn,r*Vn]};return y.distance=g,y}function Ft(t){return t}function Nt(){jr.point=Ut}function Ut(t,e){jr.point=Vt,pr=vr=t,dr=gr=e}function Vt(t,e){Or.add(gr*t-vr*e),vr=t,gr=e}function Gt(){Vt(pr,dr)}function qt(t,e){t<Lr&&(Lr=t),t>Rr&&(Rr=t),e<Dr&&(Dr=e),e>Br&&(Br=e)}function Ht(t,e){Fr+=t,Nr+=e,++Ur}function Yt(){Wr.point=Xt}function Xt(t,e){Wr.point=Wt,Ht(_r=t,br=e)}function Wt(t,e){var n=t-_r,r=e-br,i=tr(n*n+r*r);Vr+=i*(_r+t)/2,Gr+=i*(br+e)/2,qr+=i,Ht(_r=t,br=e)}function Zt(){Wr.point=Ht}function Kt(){Wr.point=Qt}function Jt(){$t(mr,yr)}function Qt(t,e){Wr.point=$t,Ht(mr=_r=t,yr=br=e)}function $t(t,e){var n=t-_r,r=e-br,i=tr(n*n+r*r);Vr+=i*(_r+t)/2,Gr+=i*(br+e)/2,qr+=i,i=br*t-_r*e,Hr+=i*(_r+t),Yr+=i*(br+e),Xr+=3*i,Ht(_r=t,br=e)}function te(t){this._context=t}function ee(t,e){ei.point=ne,Kr=Qr=t,Jr=$r=e}function ne(t,e){Qr-=t,$r-=e,ti.add(tr(Qr*Qr+$r*$r)),Qr=t,$r=e}function re(){this._string=[]}function ie(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function oe(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),f(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return f(t,r(jr)),jr.result()},n.measure=function(t){return f(t,r(ei)),ei.result()},n.bounds=function(t){return f(t,r(zr)),zr.result()},n.centroid=function(t){return f(t,r(Wr)),Wr.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,Ft):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new re):new te(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)}function ae(t){return{stream:se(t)}}function se(t){return function(e){var n=new ue;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ue(){}function le(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),f(n,t.stream(zr)),e(zr.result()),null!=r&&t.clipExtent(r),t}function ce(t,e,n){return le(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])},n)}function he(t,e,n){return ce(t,[[0,0],e],n)}function fe(t,e,n){return le(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function pe(t,e,n){return le(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}function de(t,e){return+e?ge(t,e):ve(t)}function ve(t){return se({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function ge(t,e){function n(r,i,o,s,u,l,c,h,f,p,d,v,g,m){var y=c-r,_=h-i,b=y*y+_*_;if(b>4*e&&g--){var x=s+p,w=u+d,S=l+v,E=tr(x*x+w*w+S*S),M=a(S/=E),T=qn(qn(S)-1)<Rn||qn(o-f)<Rn?(o+f)/2:Yn(w,x),C=t(T,M),A=C[0],P=C[1],k=A-r,I=P-i,O=_*k-y*I;(O*O/b>e||qn((y*k+_*I)/b-.5)>.3||s*p+u*d+l*v<ri)&&(n(r,i,o,s,u,l,A,P,T,x/=E,w/=E,S,g,m),m.point(A,P),n(A,P,T,x,w,S,c,h,f,p,d,v,g,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){m=NaN,S.point=o,e.lineStart()}function o(r,i){var o=_([r,i]),a=t(r,i);n(m,y,g,b,x,w,m=a[0],y=a[1],g=r,b=o[0],x=o[1],w=o[2],ni,e),e.point(m,y)}function a(){S.point=r,e.lineEnd()}function s(){i(),S.point=u,S.lineEnd=l}function u(t,e){o(c=t,e),h=m,f=y,p=b,d=x,v=w,S.point=o}function l(){n(m,y,g,b,x,w,h,f,c,p,d,v,ni,e),S.lineEnd=a,a()}var c,h,f,p,d,v,g,m,y,b,x,w,S={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),S.lineStart=s},polygonEnd:function(){e.polygonEnd(),S.lineStart=i}};return S}}function me(t){return se({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function ye(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r}function _e(t,e,n,r){function i(t,r){return[s*t-u*r+e,n-u*t-s*r]}var o=Xn(r),a=Qn(r),s=o*t,u=a*t,l=o/t,c=a/t,h=(a*n-o*e)/t,f=(a*e+o*n)/t;return i.invert=function(t,e){return[l*t-c*e+h,f-c*t-l*e]},i}function be(t){return xe(function(){return t})()}function xe(t){function e(t){return f(t[0]*Gn,t[1]*Gn)}function n(t){return(t=f.invert(t[0],t[1]))&&[t[0]*Vn,t[1]*Vn]}function r(){var t=_e(v,0,0,S).apply(null,o(y,_)),e=(S?_e:ye)(v,g-t[0],m-t[1],S);return a=K(b,x,w),h=W(o,e),f=W(a,h),c=de(h,A),i()}function i(){return p=d=null,e}var o,a,s,u,l,c,h,f,p,d,v=150,g=480,m=250,y=0,_=0,b=0,x=0,w=0,S=0,E=null,M=wr,T=null,C=Ft,A=.5;return e.stream=function(t){return p&&d===t?p:p=ii(me(a)(M(c(C(d=t)))))},e.preclip=function(t){return arguments.length?(M=t,E=void 0,i()):M},e.postclip=function(t){return arguments.length?(C=t,T=s=u=l=null,i()):C},e.clipAngle=function(t){return arguments.length?(M=+t?mt(E=t*Gn):(E=null,wr),i()):E*Vn},e.clipExtent=function(t){return arguments.length?(C=null==t?(T=s=u=l=null,Ft):_t(T=+t[0][0],s=+t[0][1],u=+t[1][0],l=+t[1][1]),i()):null==T?null:[[T,s],[u,l]]},e.scale=function(t){return arguments.length?(v=+t,r()):v},e.translate=function(t){return arguments.length?(g=+t[0],m=+t[1],r()):[g,m]},e.center=function(t){return arguments.length?(y=t[0]%360*Gn,_=t[1]%360*Gn,r()):[y*Vn,_*Vn]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Gn,x=t[1]%360*Gn,w=t.length>2?t[2]%360*Gn:0,r()):[b*Vn,x*Vn,w*Vn]},e.angle=function(t){return arguments.length?(S=t%360*Gn,r()):S*Vn},e.precision=function(t){return arguments.length?(c=de(h,A=t*t),i()):tr(A)},e.fitExtent=function(t,n){return ce(e,t,n)},e.fitSize=function(t,n){return he(e,t,n)},e.fitWidth=function(t,n){return fe(e,t,n)},e.fitHeight=function(t,n){return pe(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function we(t){var e=0,n=zn/3,r=xe(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Gn,n=t[1]*Gn):[e*Vn,n*Vn]},i}function Se(t){function e(t,e){return[t*n,Qn(e)/n]}var n=Xn(t);return e.invert=function(t,e){return[t/n,a(e*n)]},e}function Ee(t,e){function n(t,e){var n=tr(o-2*i*Qn(e))/i;return[n*Qn(t*=i),s-n*Xn(t)]}var r=Qn(t),i=(r+Qn(e))/2;if(qn(i)<Rn)return Se(t);var o=1+r*(2*i-r),s=tr(o)/i;return n.invert=function(t,e){var n=s-e;return[Yn(t,qn(n))/i*$n(n),a((o-(t*t+n*n)*i*i)/(2*i))]},n}function Me(){return we(Ee).scale(155.424).center([0,33.6442])}function Te(){return Me().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ce(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Ae(){function t(t){var e=t[0],n=t[1];return s=null,i.point(e,n),s||(o.point(e,n),s)||(a.point(e,n),s)}function e(){return n=r=null,t}var n,r,i,o,a,s,u=Te(),l=Me().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Me().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?l:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:u).invert(t)},t.stream=function(t){return n&&r===t?n:n=Ce([u.stream(r=t),l.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),l.scale(.35*e),c.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),r=+t[0],s=+t[1];return i=u.translate(t).clipExtent([[r-.455*n,s-.238*n],[r+.455*n,s+.238*n]]).stream(h),o=l.translate([r-.307*n,s+.201*n]).clipExtent([[r-.425*n+Rn,s+.12*n+Rn],[r-.214*n-Rn,s+.234*n-Rn]]).stream(h),a=c.translate([r-.205*n,s+.212*n]).clipExtent([[r-.214*n+Rn,s+.166*n+Rn],[r-.115*n-Rn,s+.234*n-Rn]]).stream(h),e()},t.fitExtent=function(e,n){return ce(t,e,n)},t.fitSize=function(e,n){return he(t,e,n)},t.fitWidth=function(e,n){return fe(t,e,n)},t.fitHeight=function(e,n){return pe(t,e,n)},t.scale(1070)}function Pe(t){return function(e,n){var r=Xn(e),i=Xn(n),o=t(r*i);return[o*i*Qn(e),o*Qn(n)]}}function ke(t){return function(e,n){var r=tr(e*e+n*n),i=t(r),o=Qn(i),s=Xn(i);return[Yn(e*o,r*s),a(r&&n*o/r)]}}function Ie(){return be(oi).scale(124.75).clipAngle(179.999)}function Oe(){return be(ai).scale(79.4188).clipAngle(179.999)}function je(t,e){return[t,Kn(er((Fn+e)/2))]}function Le(){return De(je).scale(961/Un)}function De(t){function e(){var e=zn*s(),a=o(tt(o.rotate()).invert([0,0]));return l(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===je?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,r),i]]:[[c,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=be(t),a=o.center,s=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}function Re(t){return er((Fn+t)/2)}function Be(t,e){function n(t,e){o>0?e<-Fn+Rn&&(e=-Fn+Rn):e>Fn-Rn&&(e=Fn-Rn);var n=o/Jn(Re(e),i);return[n*Qn(i*t),o-n*Xn(i*t)]}var r=Xn(t),i=t===e?Qn(t):Kn(r/Xn(e))/Kn(Re(e)/Re(t)),o=r*Jn(Re(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=$n(i)*tr(t*t+n*n);return[Yn(t,qn(n))/i*$n(n),2*Hn(Jn(o/r,1/i))-Fn]},n):je}function ze(){return we(Be).scale(109.5).parallels([30,30])}function Fe(t,e){return[t,e]}function Ne(){return be(Fe).scale(152.63)}function Ue(t,e){function n(t,e){var n=o-e,r=i*t;return[n*Qn(r),o-n*Xn(r)]}var r=Xn(t),i=t===e?Qn(t):(r-Xn(e))/(e-t),o=r/i+t;return qn(i)<Rn?Fe:(n.invert=function(t,e){var n=o-e;return[Yn(t,qn(n))/i*$n(n),o-$n(i)*tr(t*t+n*n)]},n)}function Ve(){return we(Ue).scale(131.154).center([0,13.9389])}function Ge(t,e){var n=a(hi*Qn(e)),r=n*n,i=r*r*r;return[t*Xn(n)/(hi*(si+3*ui*r+i*(7*li+9*ci*r))),n*(si+ui*r+i*(li+ci*r))]}function qe(){return be(Ge).scale(177.158)}function He(t,e){var n=Xn(e),r=Xn(t)*n;return[n*Qn(t)/r,Qn(e)/r]}function Ye(){return be(He).scale(144.049).clipAngle(60)}function Xe(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?Ft:se({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function We(){function t(){return i=o=null,a}var e,n,r,i,o,a,s=1,u=0,l=0,c=1,h=1,f=Ft,p=null,d=Ft;return a={stream:function(t){return i&&o===t?i:i=f(d(o=t))},postclip:function(i){return arguments.length?(d=i,p=e=n=r=null,t()):d},clipExtent:function(i){return arguments.length?(d=null==i?(p=e=n=r=null,Ft):_t(p=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,e],[n,r]]},scale:function(e){return arguments.length?(f=Xe((s=+e)*c,s*h,u,l),t()):s},translate:function(e){return arguments.length?(f=Xe(s*c,s*h,u=+e[0],l=+e[1]),t()):[u,l]},reflectX:function(e){return arguments.length?(f=Xe(s*(c=e?-1:1),s*h,u,l),t()):c<0},reflectY:function(e){return arguments.length?(f=Xe(s*c,s*(h=e?-1:1),u,l),t()):h<0},fitExtent:function(t,e){return ce(a,t,e)},fitSize:function(t,e){return he(a,t,e)},fitWidth:function(t,e){return fe(a,t,e)},fitHeight:function(t,e){return pe(a,t,e)}}}function Ze(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Ke(){return be(Ze).scale(175.295)}function Je(t,e){return[Xn(e)*Qn(t),Qn(e)]}function Qe(){return be(Je).scale(249.5).clipAngle(90+Rn)}function $e(t,e){var n=Xn(e),r=1+Xn(t)*n;return[n*Qn(t)/r,Qn(e)/r]}function tn(){return be($e).scale(250).clipAngle(142)}function en(t,e){return[Kn(er((Fn+e)/2)),-t]}function nn(){var t=De(en),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){i(Dn,t,this.t),i(this,Dn.s,this.s),this.s?this.t+=Dn.t:this.s=Dn.t},valueOf:function(){return this.s}};var rn,on,an,sn,un,ln,cn,hn,fn,pn,dn,vn,gn,mn,yn,_n,bn,xn,wn,Sn,En,Mn,Tn,Cn,An,Pn,kn,In,On,jn,Ln,Dn=new r,Rn=1e-6,Bn=1e-12,zn=Math.PI,Fn=zn/2,Nn=zn/4,Un=2*zn,Vn=180/zn,Gn=zn/180,qn=Math.abs,Hn=Math.atan,Yn=Math.atan2,Xn=Math.cos,Wn=Math.ceil,Zn=Math.exp,Kn=Math.log,Jn=Math.pow,Qn=Math.sin,$n=Math.sign||function(t){return t>0?1:t<0?-1:0},tr=Math.sqrt,er=Math.tan,nr={Feature:function(t,e){l(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)l(n[r].geometry,e)}},rr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){c(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)c(n[r],e,0)},Polygon:function(t,e){h(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)h(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)l(n[r],e)}},ir=n(),or=n(),ar={point:u,lineStart:u,lineEnd:u,polygonStart:function(){ir.reset(),ar.lineStart=p,ar.lineEnd=d},polygonEnd:function(){var t=+ir;or.add(t<0?Un+t:t),this.lineStart=this.lineEnd=this.point=u},sphere:function(){or.add(Un)}},sr=n(),ur={point:M,lineStart:C,lineEnd:A,polygonStart:function(){ur.point=P,ur.lineStart=k,ur.lineEnd=I,sr.reset(),ar.polygonStart()},polygonEnd:function(){ar.polygonEnd(),ur.point=M,ur.lineStart=C,ur.lineEnd=A,ir<0?(ln=-(hn=180),cn=-(fn=90)):sr>Rn?fn=90:sr<-Rn&&(cn=-90),yn[0]=ln,yn[1]=hn},sphere:function(){ln=-(hn=180),cn=-(fn=90)}},lr={sphere:u,point:R,lineStart:z,lineEnd:U,polygonStart:function(){lr.lineStart=V,lr.lineEnd=G},polygonEnd:function(){lr.lineStart=z,lr.lineEnd=U}};Z.invert=Z;var cr,hr,fr,pr,dr,vr,gr,mr,yr,_r,br,xr=n(),wr=ht(function(){return!0},dt,gt,[-zn,-Fn]),Sr=1e9,Er=-Sr,Mr=n(),Tr={sphere:u,point:u,lineStart:xt,lineEnd:u,polygonStart:u,polygonEnd:u},Cr=[null,null],Ar={type:"LineString",coordinates:Cr},Pr={Feature:function(t,e){return Ct(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Ct(n[r].geometry,e))return!0;return!1}},kr={Sphere:function(){return!0},Point:function(t,e){return At(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(At(n[r],e))return!0;return!1},LineString:function(t,e){return Pt(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Pt(n[r],e))return!0;return!1},Polygon:function(t,e){return kt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(kt(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Ct(n[r],e))return!0;return!1}},Ir=n(),Or=n(),jr={point:u,lineStart:u,lineEnd:u,polygonStart:function(){jr.lineStart=Nt,jr.lineEnd=Gt},polygonEnd:function(){jr.lineStart=jr.lineEnd=jr.point=u,Ir.add(qn(Or)),Or.reset()},result:function(){var t=Ir/2;return Ir.reset(),t}},Lr=1/0,Dr=Lr,Rr=-Lr,Br=Rr,zr={point:qt,lineStart:u,lineEnd:u,polygonStart:u,polygonEnd:u,result:function(){var t=[[Lr,Dr],[Rr,Br]];return Rr=Br=-(Dr=Lr=1/0),t}},Fr=0,Nr=0,Ur=0,Vr=0,Gr=0,qr=0,Hr=0,Yr=0,Xr=0,Wr={point:Ht,lineStart:Yt,lineEnd:Zt,polygonStart:function(){Wr.lineStart=Kt,Wr.lineEnd=Jt},polygonEnd:function(){Wr.point=Ht,Wr.lineStart=Yt,Wr.lineEnd=Zt},result:function(){var t=Xr?[Hr/Xr,Yr/Xr]:qr?[Vr/qr,Gr/qr]:Ur?[Fr/Ur,Nr/Ur]:[NaN,NaN];return Fr=Nr=Ur=Vr=Gr=qr=Hr=Yr=Xr=0,t}};te.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Un)}},result:u};var Zr,Kr,Jr,Qr,$r,ti=n(),ei={point:u,lineStart:function(){ei.point=ee},lineEnd:function(){Zr&&ne(Kr,Jr),ei.point=u},polygonStart:function(){Zr=!0},polygonEnd:function(){Zr=null},result:function(){var t=+ti;return ti.reset(),t}};re.prototype={_radius:4.5,_circle:ie(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=ie(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ue.prototype={constructor:ue,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ni=16,ri=Xn(30*Gn),ii=se({point:function(t,e){this.stream.point(t*Gn,e*Gn)}}),oi=Pe(function(t){return tr(2/(1+t))});oi.invert=ke(function(t){return 2*a(t/2)});var ai=Pe(function(t){return(t=o(t))&&t/Qn(t)});ai.invert=ke(function(t){return t}),je.invert=function(t,e){return[t,2*Hn(Zn(e))-Fn]},Fe.invert=Fe;var si=1.340264,ui=-.081106,li=893e-6,ci=.003796,hi=tr(3)/2,fi=12;Ge.invert=function(t,e){for(var n,r,i,o=e,s=o*o,u=s*s*s,l=0;l<fi&&(r=o*(si+ui*s+u*(li+ci*s))-e,i=si+3*ui*s+u*(7*li+9*ci*s),o-=n=r/i,s=o*o,u=s*s*s,!(qn(n)<Bn));++l);return[hi*t*(si+3*ui*s+u*(7*li+9*ci*s))/Xn(o),a(Qn(o)/hi)]},He.invert=ke(Hn),Ze.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(qn(n)>Rn&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Je.invert=ke(a),$e.invert=ke(function(t){return 2*Hn(t)}),en.invert=function(t,e){return[-e,2*Hn(Zn(t))-Fn]},t.geoAlbers=Te,t.geoAlbersUsa=Ae,t.geoArea=m,t.geoAzimuthalEqualArea=Ie,t.geoAzimuthalEqualAreaRaw=oi,t.geoAzimuthalEquidistant=Oe,t.geoAzimuthalEquidistantRaw=ai,t.geoBounds=D,t.geoCentroid=Y,t.geoCircle=rt,t.geoClipAntimeridian=wr,t.geoClipCircle=mt,t.geoClipExtent=bt,t.geoClipRectangle=_t,t.geoConicConformal=ze,t.geoConicConformalRaw=Be,t.geoConicEqualArea=Me,t.geoConicEqualAreaRaw=Ee,t.geoConicEquidistant=Ve,t.geoConicEquidistantRaw=Ue,t.geoContains=jt,t.geoDistance=Tt,t.geoEqualEarth=qe,t.geoEqualEarthRaw=Ge,t.geoEquirectangular=Ne,t.geoEquirectangularRaw=Fe,t.geoGnomonic=Ye,t.geoGnomonicRaw=He,t.geoGraticule=Rt,t.geoGraticule10=Bt,t.geoIdentity=We,t.geoInterpolate=zt,t.geoLength=Mt,t.geoMercator=Le,t.geoMercatorRaw=je,t.geoNaturalEarth1=Ke,t.geoNaturalEarth1Raw=Ze,t.geoOrthographic=Qe,t.geoOrthographicRaw=Je,t.geoPath=oe,t.geoProjection=be,t.geoProjectionMutator=xe,t.geoRotation=tt,t.geoStereographic=tn,t.geoStereographicRaw=$e,t.geoStream=f,t.geoTransform=ae,t.geoTransverseMercator=nn,t.geoTransverseMercatorRaw=en,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js":function(t,e,n){!function(t,r){r(e,n("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))}(0,function(t,e){"use strict";function n(){this.reset()}function r(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function i(t){return t>1?0:t<-1?Ve:Math.acos(t)}function o(t){return t>1?Ge:t<-1?-Ge:Math.asin(t)}function a(t){return(t=nn(t/2))*t}function s(){}function u(t,e){t&&un.hasOwnProperty(t.type)&&un[t.type](t,e)}function l(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function c(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)l(t[n],e,1);e.polygonEnd()}function h(){fn.point=p}function f(){d(ue,le)}function p(t,e){fn.point=d,ue=t,le=e,t*=Xe,e*=Xe,ce=t,he=Je(e=e/2+qe),fe=nn(e)}function d(t,e){t*=Xe,e*=Xe,e=e/2+qe;var n=t-ce,r=n>=0?1:-1,i=r*n,o=Je(e),a=nn(e),s=fe*a,u=he*o+s*Je(i),l=s*r*nn(i);cn.add(Ke(l,u)),ce=t,he=o,fe=a}function v(t){return[Ke(t[1],t[0]),o(t[2])]}function g(t){var e=t[0],n=t[1],r=Je(n);return[r*Je(e),r*nn(e),nn(n)]}function m(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function y(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function _(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function b(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function x(t){var e=on(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function w(t,e){xe.push(we=[pe=t,ve=t]),e<de&&(de=e),e>ge&&(ge=e)}function S(t,e){var n=g([t*Xe,e*Xe]);if(be){var r=y(be,n),i=[r[1],-r[0],0],o=y(i,r);x(o),o=v(o);var a,s=t-me,u=s>0?1:-1,l=o[0]*Ye*u,c=We(s)>180;c^(u*me<l&&l<u*t)?(a=o[1]*Ye)>ge&&(ge=a):(l=(l+360)%360-180,c^(u*me<l&&l<u*t)?(a=-o[1]*Ye)<de&&(de=a):(e<de&&(de=e),e>ge&&(ge=e))),c?t<me?P(pe,t)>P(pe,ve)&&(ve=t):P(t,ve)>P(pe,ve)&&(pe=t):ve>=pe?(t<pe&&(pe=t),t>ve&&(ve=t)):t>me?P(pe,t)>P(pe,ve)&&(ve=t):P(t,ve)>P(pe,ve)&&(pe=t)}else xe.push(we=[pe=t,ve=t]);e<de&&(de=e),e>ge&&(ge=e),be=n,me=t}function E(){vn.point=S}function M(){we[0]=pe,we[1]=ve,vn.point=w,be=null}function T(t,e){if(be){var n=t-me;dn.add(We(n)>180?n+(n>0?360:-360):n)}else ye=t,_e=e;fn.point(t,e),S(t,e)}function C(){fn.lineStart()}function A(){T(ye,_e),fn.lineEnd(),We(dn)>Ne&&(pe=-(ve=180)),we[0]=pe,we[1]=ve,be=null}function P(t,e){return(e-=t)<0?e+360:e}function k(t,e){return t[0]-e[0]}function I(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function O(t,e){t*=Xe,e*=Xe;var n=Je(e);j(n*Je(t),n*nn(t),nn(e))}function j(t,e,n){++Se,Me+=(t-Me)/Se,Te+=(e-Te)/Se,Ce+=(n-Ce)/Se}function L(){mn.point=D}function D(t,e){t*=Xe,e*=Xe;var n=Je(e);Re=n*Je(t),Be=n*nn(t),ze=nn(e),mn.point=R,j(Re,Be,ze)}function R(t,e){t*=Xe,e*=Xe;var n=Je(e),r=n*Je(t),i=n*nn(t),o=nn(e),a=Ke(on((a=Be*o-ze*i)*a+(a=ze*r-Re*o)*a+(a=Re*i-Be*r)*a),Re*r+Be*i+ze*o);Ee+=a,Ae+=a*(Re+(Re=r)),Pe+=a*(Be+(Be=i)),ke+=a*(ze+(ze=o)),j(Re,Be,ze)}function B(){mn.point=O}function z(){mn.point=N}function F(){U(Le,De),mn.point=O}function N(t,e){Le=t,De=e,t*=Xe,e*=Xe,mn.point=U;var n=Je(e);Re=n*Je(t),Be=n*nn(t),ze=nn(e),j(Re,Be,ze)}function U(t,e){t*=Xe,e*=Xe;var n=Je(e),r=n*Je(t),i=n*nn(t),a=nn(e),s=Be*a-ze*i,u=ze*r-Re*a,l=Re*i-Be*r,c=on(s*s+u*u+l*l),h=o(c),f=c&&-h/c;Ie+=f*s,Oe+=f*u,je+=f*l,Ee+=h,Ae+=h*(Re+(Re=r)),Pe+=h*(Be+(Be=i)),ke+=h*(ze+(ze=a)),j(Re,Be,ze)}function V(t,e){return[t>Ve?t-He:t<-Ve?t+He:t,e]}function G(t,e,n){return(t%=He)?e||n?bn(H(t),Y(e,n)):H(t):e||n?Y(e,n):V}function q(t){return function(e,n){return e+=t,[e>Ve?e-He:e<-Ve?e+He:e,n]}}function H(t){var e=q(t);return e.invert=q(-t),e}function Y(t,e){function n(t,e){var n=Je(e),u=Je(t)*n,l=nn(t)*n,c=nn(e),h=c*r+u*i;return[Ke(l*a-h*s,u*r-c*i),o(h*a+l*s)]}var r=Je(t),i=nn(t),a=Je(e),s=nn(e);return n.invert=function(t,e){var n=Je(e),u=Je(t)*n,l=nn(t)*n,c=nn(e),h=c*a-l*s;return[Ke(l*a+c*s,u*r+h*i),o(h*r-u*i)]},n}function X(t,e,n,r,i,o){if(n){var a=Je(e),s=nn(e),u=r*n;null==i?(i=e+r*He,o=e-u/2):(i=W(a,i),o=W(a,o),(r>0?i<o:i>o)&&(i+=r*He));for(var l,c=i;r>0?c>o:c<o;c-=u)l=v([a,-s*Je(c),-s*nn(c)]),t.point(l[0],l[1])}}function W(t,e){e=g(e),e[0]-=t,x(e);var n=i(-e[1]);return((-e[2]<0?-n:n)+He-Ne)%He}function Z(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function K(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function J(t,n,r,i){function o(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function a(e,o,a,u){var c=0,h=0;if(null==e||(c=s(e,a))!==(h=s(o,a))||l(e,o)<0^a>0)do{u.point(0===c||3===c?t:r,c>1?i:n)}while((c=(c+a+4)%4)!==h);else u.point(o[0],o[1])}function s(e,i){return We(e[0]-t)<Ne?i>0?0:3:We(e[0]-r)<Ne?i>0?2:1:We(e[1]-n)<Ne?i>0?1:0:i>0?3:2}function u(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t,e){o(t,e)&&C.point(t,e)}function c(){for(var e=0,n=0,r=m.length;n<r;++n)for(var o,a,s=m[n],u=1,l=s.length,c=s[0],h=c[0],f=c[1];u<l;++u)o=h,a=f,c=s[u],h=c[0],f=c[1],a<=i?f>i&&(h-o)*(i-a)>(f-a)*(t-o)&&++e:f<=i&&(h-o)*(i-a)<(f-a)*(t-o)&&--e;return e}function h(){C=A,g=[],m=[],T=!0}function f(){var t=c(),n=T&&t,r=(g=e.merge(g)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),r&&Bn(g,u,t,a,s),s.polygonEnd()),C=s,g=m=y=null}function p(){P.point=v,m&&m.push(y=[]),M=!0,E=!1,w=S=NaN}function d(){g&&(v(_,b),x&&E&&A.rejoin(),g.push(A.result())),P.point=l,E&&C.lineEnd()}function v(e,a){var s=o(e,a);if(m&&y.push([e,a]),M)_=e,b=a,x=s,M=!1,s&&(C.lineStart(),C.point(e,a));else if(s&&E)C.point(e,a);else{var u=[w=Math.max(Fn,Math.min(zn,w)),S=Math.max(Fn,Math.min(zn,S))],l=[e=Math.max(Fn,Math.min(zn,e)),a=Math.max(Fn,Math.min(zn,a))];Dn(u,l,t,n,r,i)?(E||(C.lineStart(),C.point(u[0],u[1])),C.point(l[0],l[1]),s||C.lineEnd(),T=!1):s&&(C.lineStart(),C.point(e,a),T=!1)}w=e,S=a,E=s}var g,m,y,_,b,x,w,S,E,M,T,C=s,A=Ln(),P={point:l,lineStart:p,lineEnd:d,polygonStart:h,polygonEnd:f};return P}}function Q(){qn.point=tt,qn.lineEnd=$}function $(){qn.point=qn.lineEnd=s}function tt(t,e){t*=Xe,e*=Xe,xn=t,wn=nn(e),Sn=Je(e),qn.point=et}function et(t,e){t*=Xe,e*=Xe;var n=nn(e),r=Je(e),i=We(t-xn),o=Je(i),a=nn(i),s=r*a,u=Sn*n-wn*r*o,l=wn*n+Sn*r*o;Gn.add(Ke(on(s*s+u*u),l)),xn=t,wn=n,Sn=r}function nt(t,e){return!(!t||!Kn.hasOwnProperty(t.type))&&Kn[t.type](t,e)}function rt(t,e){return 0===Wn(t,e)}function it(t,e){var n=Wn(t[0],t[1]);return Wn(t[0],e)+Wn(e,t[1])<=n+Ne}function ot(t,e){return!!Vn(t.map(at),st(e))}function at(t){return t=t.map(st),t.pop(),t}function st(t){return[t[0]*Xe,t[1]*Xe]}function ut(t,n,r){var i=e.range(t,n-Ne,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function lt(t,n,r){var i=e.range(t,n-Ne,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function ct(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return e.range(Qe(a/m)*m,o,m).map(p).concat(e.range(Qe(c/y)*y,l,y).map(d)).concat(e.range(Qe(i/v)*v,r,v).filter(function(t){return We(t%m)>Ne}).map(h)).concat(e.range(Qe(u/g)*g,s,g).filter(function(t){return We(t%y)>Ne}).map(f))}var r,i,o,a,s,u,l,c,h,f,p,d,v=10,g=v,m=90,y=360,_=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(d(l).slice(1),p(o).reverse().slice(1),d(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],o=+e[1][0],c=+e[0][1],l=+e[1][1],a>o&&(e=a,a=o,o=e),c>l&&(e=c,c=l,l=e),t.precision(_)):[[a,c],[o,l]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],u=+e[0][1],s=+e[1][1],i>r&&(e=i,i=r,r=e),u>s&&(e=u,u=s,s=e),t.precision(_)):[[i,u],[r,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.stepMinor=function(e){return arguments.length?(v=+e[0],g=+e[1],t):[v,g]},t.precision=function(e){return arguments.length?(_=+e,h=ut(u,s,90),f=lt(i,r,_),p=ut(c,l,90),d=lt(a,o,_),t):_},t.extentMajor([[-180,-90+Ne],[180,90-Ne]]).extentMinor([[-180,-80-Ne],[180,80+Ne]])}function ht(){return ct()()}function ft(){nr.point=pt}function pt(t,e){nr.point=dt,En=Tn=t,Mn=Cn=e}function dt(t,e){er.add(Cn*t-Tn*e),Tn=t,Cn=e}function vt(){dt(En,Mn)}function gt(t,e){t<rr&&(rr=t),t>or&&(or=t),e<ir&&(ir=e),e>ar&&(ar=e)}function mt(t,e){ur+=t,lr+=e,++cr}function yt(){mr.point=_t}function _t(t,e){mr.point=bt,mt(kn=t,In=e)}function bt(t,e){var n=t-kn,r=e-In,i=on(n*n+r*r);hr+=i*(kn+t)/2,fr+=i*(In+e)/2,pr+=i,mt(kn=t,In=e)}function xt(){mr.point=mt}function wt(){mr.point=Et}function St(){Mt(An,Pn)}function Et(t,e){mr.point=Mt,mt(An=kn=t,Pn=In=e)}function Mt(t,e){var n=t-kn,r=e-In,i=on(n*n+r*r);hr+=i*(kn+t)/2,fr+=i*(In+e)/2,pr+=i,i=In*t-kn*e,dr+=i*(kn+t),vr+=i*(In+e),gr+=3*i,mt(kn=t,In=e)}function Tt(t){this._context=t}function Ct(t,e){Er.point=At,_r=xr=t,br=wr=e}function At(t,e){xr-=t,wr-=e,Sr.add(on(xr*xr+wr*wr)),xr=t,wr=e}function Pt(){this._string=[]}function kt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function It(t){return t.length>1}function Ot(t,e){return((t=t.x)[0]<0?t[1]-Ge-Ne:Ge-t[1])-((e=e.x)[0]<0?e[1]-Ge-Ne:Ge-e[1])}function jt(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ve:-Ve,u=We(o-n);We(u-Ve)<Ne?(t.point(n,r=(r+a)/2>0?Ge:-Ge),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ve&&(We(n-i)<Ne&&(n-=i*Ne),We(o-s)<Ne&&(o-=s*Ne),r=Lt(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Lt(t,e,n,r){var i,o,a=nn(t-n);return We(a)>Ne?Ze((nn(e)*(o=Je(r))*nn(n)-nn(r)*(i=Je(e))*nn(t))/(i*o*a)):(e+r)/2}function Dt(t,e,n,r){var i;if(null==t)i=n*Ge,r.point(-Ve,i),r.point(0,i),r.point(Ve,i),r.point(Ve,0),r.point(Ve,-i),r.point(0,-i),r.point(-Ve,-i),r.point(-Ve,0),r.point(-Ve,i);else if(We(t[0]-e[0])>Ne){var o=t[0]<e[0]?Ve:-Ve;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Rt(t){return function(e){var n=new Bt;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Bt(){}function zt(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),ln(n,t.stream(sr));var a=sr.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}function Ft(t,e,n){return zt(t,[[0,0],e],n)}function Nt(t){return Rt({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Ut(t,e){function n(r,i,a,s,u,l,c,h,f,p,d,v,g,m){var y=c-r,_=h-i,b=y*y+_*_;if(b>4*e&&g--){var x=s+p,w=u+d,S=l+v,E=on(x*x+w*w+S*S),M=o(S/=E),T=We(We(S)-1)<Ne||We(a-f)<Ne?(a+f)/2:Ke(w,x),C=t(T,M),A=C[0],P=C[1],k=A-r,I=P-i,O=_*k-y*I;(O*O/b>e||We((y*k+_*I)/b-.5)>.3||s*p+u*d+l*v<Ir)&&(n(r,i,a,s,u,l,A,P,T,x/=E,w/=E,S,g,m),m.point(A,P),n(A,P,T,x,w,S,c,h,f,p,d,v,g,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,S.point=o,e.lineStart()}function o(r,i){var o=g([r,i]),a=t(r,i);n(y,_,m,b,x,w,y=a[0],_=a[1],m=r,b=o[0],x=o[1],w=o[2],kr,e),e.point(y,_)}function a(){S.point=r,e.lineEnd()}function s(){i(),S.point=u,S.lineEnd=l}function u(t,e){o(c=t,e),h=y,f=_,p=b,d=x,v=w,S.point=o}function l(){n(y,_,m,b,x,w,h,f,c,p,d,v,kr,e),S.lineEnd=a,a()}var c,h,f,p,d,v,m,y,_,b,x,w,S={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),S.lineStart=s},polygonEnd:function(){e.polygonEnd(),S.lineStart=i}};return S}}function Vt(t){return Gt(function(){return t})()}function Gt(t){function e(t){return t=c(t[0]*Xe,t[1]*Xe),[t[0]*g+s,u-t[1]*g]}function n(t){return(t=c.invert((t[0]-s)/g,(u-t[1])/g))&&[t[0]*Ye,t[1]*Ye]}function r(t,e){return t=a(t,e),[t[0]*g+s,u-t[1]*g]}function i(){c=bn(l=G(x,w,S),a);var t=a(_,b);return s=m-t[0]*g,u=y+t[1]*g,o()}function o(){return d=v=null,e}var a,s,u,l,c,h,f,p,d,v,g=150,m=480,y=250,_=0,b=0,x=0,w=0,S=0,E=null,M=Cr,T=null,C=$n,A=.5,P=Or(r,A);return e.stream=function(t){return d&&v===t?d:d=jr(M(l,P(C(v=t))))},e.clipAngle=function(t){return arguments.length?(M=+t?Ar(E=t*Xe,6*Xe):(E=null,Cr),o()):E*Ye},e.clipExtent=function(t){return arguments.length?(C=null==t?(T=h=f=p=null,$n):J(T=+t[0][0],h=+t[0][1],f=+t[1][0],p=+t[1][1]),o()):null==T?null:[[T,h],[f,p]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],i()):[m,y]},e.center=function(t){return arguments.length?(_=t[0]%360*Xe,b=t[1]%360*Xe,i()):[_*Ye,b*Ye]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Xe,w=t[1]%360*Xe,S=t.length>2?t[2]%360*Xe:0,i()):[x*Ye,w*Ye,S*Ye]},e.precision=function(t){return arguments.length?(P=Or(r,A=t*t),o()):on(A)},e.fitExtent=function(t,n){return zt(e,t,n)},e.fitSize=function(t,n){return Ft(e,t,n)},function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function qt(t){var e=0,n=Ve/3,r=Gt(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Xe,n=t[1]*Xe):[e*Ye,n*Ye]},i}function Ht(t){function e(t,e){return[t*n,nn(e)/n]}var n=Je(t);return e.invert=function(t,e){return[t/n,o(e*n)]},e}function Yt(t,e){function n(t,e){var n=on(a-2*i*nn(e))/i;return[n*nn(t*=i),s-n*Je(t)]}var r=nn(t),i=(r+nn(e))/2;if(We(i)<Ne)return Ht(t);var a=1+r*(2*i-r),s=on(a)/i;return n.invert=function(t,e){var n=s-e;return[Ke(t,We(n))/i*rn(n),o((a-(t*t+n*n)*i*i)/(2*i))]},n}function Xt(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Wt(t){return function(e,n){var r=Je(e),i=Je(n),o=t(r*i);return[o*i*nn(e),o*nn(n)]}}function Zt(t){return function(e,n){var r=on(e*e+n*n),i=t(r),a=nn(i),s=Je(i);return[Ke(e*a,r*s),o(r&&n*a/r)]}}function Kt(t,e){return[t,tn(an((Ge+e)/2))]}function Jt(t){function e(){var e=Ve*s(),a=o(On(o.rotate()).invert([0,0]));return l(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===Kt?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,r),i]]:[[c,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=Vt(t),a=o.center,s=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}function Qt(t){return an((Ge+t)/2)}function $t(t,e){function n(t,e){o>0?e<-Ge+Ne&&(e=-Ge+Ne):e>Ge-Ne&&(e=Ge-Ne);var n=o/en(Qt(e),i);return[n*nn(i*t),o-n*Je(i*t)]}var r=Je(t),i=t===e?nn(t):tn(r/Je(e))/tn(Qt(e)/Qt(t)),o=r*en(Qt(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=rn(i)*on(t*t+n*n);return[Ke(t,We(n))/i*rn(n),2*Ze(en(o/r,1/i))-Ge]},n):Kt}function te(t,e){return[t,e]}function ee(t,e){function n(t,e){var n=o-e,r=i*t;return[n*nn(r),o-n*Je(r)]}var r=Je(t),i=t===e?nn(t):(r-Je(e))/(e-t),o=r/i+t;return We(i)<Ne?te:(n.invert=function(t,e){var n=o-e;return[Ke(t,We(n))/i*rn(n),o-rn(i)*on(t*t+n*n)]},n)}function ne(t,e){var n=Je(e),r=Je(t)*n;return[n*nn(t)/r,nn(e)/r]}function re(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?$n:Rt({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function ie(t,e){return[Je(e)*nn(t),nn(e)]}function oe(t,e){var n=Je(e),r=1+Je(t)*n;return[n*nn(t)/r,nn(e)/r]}function ae(t,e){return[tn(an((Ge+e)/2)),-t]}var se=function(){return new n};n.prototype={constructor:n,reset:function(){this.s=this.t=0},add:function(t){r(Fe,t,this.t),r(this,Fe.s,this.s),this.s?this.t+=Fe.t:this.s=Fe.t},valueOf:function(){return this.s}};var ue,le,ce,he,fe,pe,de,ve,ge,me,ye,_e,be,xe,we,Se,Ee,Me,Te,Ce,Ae,Pe,ke,Ie,Oe,je,Le,De,Re,Be,ze,Fe=new n,Ne=1e-6,Ue=1e-12,Ve=Math.PI,Ge=Ve/2,qe=Ve/4,He=2*Ve,Ye=180/Ve,Xe=Ve/180,We=Math.abs,Ze=Math.atan,Ke=Math.atan2,Je=Math.cos,Qe=Math.ceil,$e=Math.exp,tn=Math.log,en=Math.pow,nn=Math.sin,rn=Math.sign||function(t){return t>0?1:t<0?-1:0},on=Math.sqrt,an=Math.tan,sn={Feature:function(t,e){u(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)u(n[r].geometry,e)}},un={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){l(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)l(n[r],e,0)},Polygon:function(t,e){c(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)c(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)u(n[r],e)}},ln=function(t,e){t&&sn.hasOwnProperty(t.type)?sn[t.type](t,e):u(t,e)},cn=se(),hn=se(),fn={point:s,lineStart:s,lineEnd:s,polygonStart:function(){cn.reset(),fn.lineStart=h,fn.lineEnd=f},polygonEnd:function(){var t=+cn;hn.add(t<0?He+t:t),this.lineStart=this.lineEnd=this.point=s},sphere:function(){hn.add(He)}},pn=function(t){return hn.reset(),ln(t,fn),2*hn},dn=se(),vn={point:w,lineStart:E,lineEnd:M,polygonStart:function(){vn.point=T,vn.lineStart=C,vn.lineEnd=A,dn.reset(),fn.polygonStart()},polygonEnd:function(){fn.polygonEnd(),vn.point=w,vn.lineStart=E,vn.lineEnd=M,cn<0?(pe=-(ve=180),de=-(ge=90)):dn>Ne?ge=90:dn<-Ne&&(de=-90),we[0]=pe,we[1]=ve}},gn=function(t){var e,n,r,i,o,a,s;if(ge=ve=-(pe=de=1/0),xe=[],ln(t,vn),n=xe.length){for(xe.sort(k),e=1,r=xe[0],o=[r];e<n;++e)i=xe[e],I(r,i[0])||I(r,i[1])?(P(r[0],i[1])>P(r[0],r[1])&&(r[1]=i[1]),P(i[0],r[1])>P(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=P(r[1],i[0]))>a&&(a=s,pe=i[0],ve=r[1])}return xe=we=null,pe===1/0||de===1/0?[[NaN,NaN],[NaN,NaN]]:[[pe,de],[ve,ge]]},mn={sphere:s,point:O,lineStart:L,lineEnd:B,polygonStart:function(){mn.lineStart=z,mn.lineEnd=F},polygonEnd:function(){mn.lineStart=L,mn.lineEnd=B}},yn=function(t){Se=Ee=Me=Te=Ce=Ae=Pe=ke=Ie=Oe=je=0,ln(t,mn);var e=Ie,n=Oe,r=je,i=e*e+n*n+r*r;return i<Ue&&(e=Ae,n=Pe,r=ke,Ee<Ne&&(e=Me,n=Te,r=Ce),(i=e*e+n*n+r*r)<Ue)?[NaN,NaN]:[Ke(n,e)*Ye,o(r/on(i))*Ye]},_n=function(t){return function(){return t}},bn=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};V.invert=V;var xn,wn,Sn,En,Mn,Tn,Cn,An,Pn,kn,In,On=function(t){function e(e){return e=t(e[0]*Xe,e[1]*Xe),e[0]*=Ye,e[1]*=Ye,e}return t=G(t[0]*Xe,t[1]*Xe,t.length>2?t[2]*Xe:0),e.invert=function(e){return e=t.invert(e[0]*Xe,e[1]*Xe),e[0]*=Ye,e[1]*=Ye,e},e},jn=function(){function t(t,e){n.push(t=r(t,e)),t[0]*=Ye,t[1]*=Ye}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*Xe,u=a.apply(this,arguments)*Xe;return n=[],r=G(-t[0]*Xe,-t[1]*Xe,0).invert,X(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=_n([0,0]),o=_n(90),a=_n(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:_n([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:_n(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:_n(+t),e):a},e},Ln=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:s,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Dn=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=e[0],c=e[1],h=0,f=1,p=l-s,d=c-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*p,t[1]=u+h*d),f<1&&(e[0]=s+f*p,e[1]=u+f*d),!0}}}}},Rn=function(t,e){return We(t[0]-e[0])<Ne&&We(t[1]-e[1])<Ne},Bn=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Rn(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s.push(n=new Z(r,t,null,!0)),u.push(n.o=new Z(r,null,n,!1)),s.push(n=new Z(a,t,null,!1)),u.push(n.o=new Z(a,null,n,!0))}}),s.length){for(u.sort(e),K(s),K(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,l=f.z,p=!p}while(!f.v);i.lineEnd()}}},zn=1e9,Fn=-zn,Nn=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=J(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},Un=se(),Vn=function(t,e){var n=e[0],r=e[1],i=[nn(n),-Je(n),0],a=0,s=0;Un.reset();for(var u=0,l=t.length;u<l;++u)if(h=(c=t[u]).length)for(var c,h,f=c[h-1],p=f[0],d=f[1]/2+qe,v=nn(d),m=Je(d),_=0;_<h;++_,p=w,v=E,m=M,f=b){var b=c[_],w=b[0],S=b[1]/2+qe,E=nn(S),M=Je(S),T=w-p,C=T>=0?1:-1,A=C*T,P=A>Ve,k=v*E;if(Un.add(Ke(k*C*nn(A),m*M+k*Je(A))),a+=P?T+C*He:T,P^p>=n^w>=n){var I=y(g(f),g(b));x(I);var O=y(i,I);x(O);var j=(P^T>=0?-1:1)*o(O[2]);(r>j||r===j&&(I[0]||I[1]))&&(s+=P^T>=0?1:-1)}}return(a<-Ne||a<Ne&&Un<-Ne)^1&s},Gn=se(),qn={sphere:s,point:s,lineStart:Q,lineEnd:s,polygonStart:s,polygonEnd:s},Hn=function(t){return Gn.reset(),ln(t,qn),+Gn},Yn=[null,null],Xn={type:"LineString",coordinates:Yn},Wn=function(t,e){return Yn[0]=t,Yn[1]=e,Hn(Xn)},Zn={Feature:function(t,e){return nt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(nt(n[r].geometry,e))return!0;return!1}},Kn={Sphere:function(){return!0},Point:function(t,e){return rt(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(rt(n[r],e))return!0;return!1},LineString:function(t,e){return it(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(it(n[r],e))return!0;return!1},Polygon:function(t,e){return ot(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ot(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(nt(n[r],e))return!0;return!1}},Jn=function(t,e){return(t&&Zn.hasOwnProperty(t.type)?Zn[t.type]:nt)(t,e)},Qn=function(t,e){var n=t[0]*Xe,r=t[1]*Xe,i=e[0]*Xe,s=e[1]*Xe,u=Je(r),l=nn(r),c=Je(s),h=nn(s),f=u*Je(n),p=u*nn(n),d=c*Je(i),v=c*nn(i),g=2*o(on(a(s-r)+u*c*a(i-n))),m=nn(g),y=g?function(t){var e=nn(t*=g)/m,n=nn(g-t)/m,r=n*f+e*d,i=n*p+e*v,o=n*l+e*h;return[Ke(i,r)*Ye,Ke(o,on(r*r+i*i))*Ye]}:function(){return[n*Ye,r*Ye]};return y.distance=g,y},$n=function(t){return t},tr=se(),er=se(),nr={point:s,lineStart:s,lineEnd:s,polygonStart:function(){nr.lineStart=ft,nr.lineEnd=vt},polygonEnd:function(){nr.lineStart=nr.lineEnd=nr.point=s,tr.add(We(er)),er.reset()},result:function(){var t=tr/2;return tr.reset(),t}},rr=1/0,ir=rr,or=-rr,ar=or,sr={point:gt,lineStart:s,lineEnd:s,polygonStart:s,polygonEnd:s,result:function(){var t=[[rr,ir],[or,ar]];return or=ar=-(ir=rr=1/0),t}},ur=0,lr=0,cr=0,hr=0,fr=0,pr=0,dr=0,vr=0,gr=0,mr={point:mt,lineStart:yt,lineEnd:xt,polygonStart:function(){mr.lineStart=wt,mr.lineEnd=St},polygonEnd:function(){mr.point=mt,mr.lineStart=yt,mr.lineEnd=xt},result:function(){var t=gr?[dr/gr,vr/gr]:pr?[hr/pr,fr/pr]:cr?[ur/cr,lr/cr]:[NaN,NaN];return ur=lr=cr=hr=fr=pr=dr=vr=gr=0,t}};Tt.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,He)}},result:s};var yr,_r,br,xr,wr,Sr=se(),Er={point:s,lineStart:function(){Er.point=Ct},lineEnd:function(){yr&&At(_r,br),Er.point=s},polygonStart:function(){yr=!0},polygonEnd:function(){yr=null},result:function(){var t=+Sr;return Sr.reset(),t}};Pt.prototype={_radius:4.5,_circle:kt(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=kt(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Mr=function(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),ln(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return ln(t,r(nr)),nr.result()},n.measure=function(t){return ln(t,r(Er)),Er.result()},n.bounds=function(t){return ln(t,r(sr)),sr.result()},n.centroid=function(t){return ln(t,r(mr)),mr.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,$n):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new Pt):new Tt(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)},Tr=function(t,n,r,i){return function(o,a){function s(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function u(t,e){var n=o(t,e);m.point(n[0],n[1])}function l(){w.point=u,m.lineStart()}function c(){w.point=s,m.lineEnd()}function h(t,e){g.push([t,e]);var n=o(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function p(){h(g[0][0],g[0][1]),b.lineEnd();var t,e,n,r,i=b.clean(),o=_.result(),s=o.length;if(g.pop(),d.push(g),g=null,s)if(1&i){if(n=o[0],(e=n.length-1)>0){for(x||(a.polygonStart(),x=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else s>1&&2&i&&o.push(o.pop().concat(o.shift())),v.push(o.filter(It))}var d,v,g,m=n(a),y=o.invert(i[0],i[1]),_=Ln(),b=n(_),x=!1,w={point:s,lineStart:l,lineEnd:c,polygonStart:function(){w.point=h,w.lineStart=f,w.lineEnd=p,v=[],d=[]},polygonEnd:function(){w.point=s,w.lineStart=l,w.lineEnd=c,v=e.merge(v);var t=Vn(d,y);v.length?(x||(a.polygonStart(),x=!0),Bn(v,Ot,t,r,a)):t&&(x||(a.polygonStart(),x=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),v=d=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return w}},Cr=Tr(function(){return!0},jt,Dt,[-Ve,-Ge]),Ar=function(t,e){function n(n,r,i,o){X(o,t,e,i,n,r)}function r(t,e){return Je(t)*Je(e)>s}function i(t){var e,n,i,s,c;return{lineStart:function(){s=i=!1,c=1},point:function(h,f){var p,d=[h,f],v=r(h,f),g=u?v?0:a(h,f):v?a(h+(h<0?Ve:-Ve),f):0;if(!e&&(s=i=v)&&t.lineStart(),v!==i&&(!(p=o(e,d))||Rn(e,p)||Rn(d,p))&&(d[0]+=Ne,d[1]+=Ne,v=r(d[0],d[1])),v!==i)c=0,v?(t.lineStart(),p=o(d,e),t.point(p[0],p[1])):(p=o(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(l&&e&&u^v){var m;g&n||!(m=o(d,e,!0))||(c=0,u?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&Rn(e,d)||t.point(d[0],d[1]),e=d,i=v,n=g},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return c|(s&&i)<<1}}}function o(t,e,n){var r=g(t),i=g(e),o=[1,0,0],a=y(r,i),u=m(a,a),l=a[0],c=u-l*l;if(!c)return!n&&t;var h=s*u/c,f=-s*l/c,p=y(o,a),d=b(o,h);_(d,b(a,f));var x=p,w=m(d,x),S=m(x,x),E=w*w-S*(m(d,d)-1);if(!(E<0)){var M=on(E),T=b(x,(-w-M)/S);if(_(T,d),T=v(T),!n)return T;var C,A=t[0],P=e[0],k=t[1],I=e[1];P<A&&(C=A,A=P,P=C);var O=P-A,j=We(O-Ve)<Ne,L=j||O<Ne;if(!j&&I<k&&(C=k,k=I,I=C),L?j?k+I>0^T[1]<(We(T[0]-A)<Ne?k:I):k<=T[1]&&T[1]<=I:O>Ve^(A<=T[0]&&T[0]<=P)){var D=b(x,(-w+M)/S);return _(D,d),[T,v(D)]}}}function a(e,n){var r=u?t:Ve-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var s=Je(t),u=s>0,l=We(s)>Ne;return Tr(r,i,n,u?[0,-t]:[-Ve,t-Ve])},Pr=function(t){return{stream:Rt(t)}};Bt.prototype={constructor:Bt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var kr=16,Ir=Je(30*Xe),Or=function(t,e){return+e?Ut(t,e):Nt(t)},jr=Rt({point:function(t,e){this.stream.point(t*Xe,e*Xe)}}),Lr=function(){return qt(Yt).scale(155.424).center([0,33.6442])},Dr=function(){return Lr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Rr=function(){function t(t){var e=t[0],n=t[1];return s=null,i.point(e,n),s||(o.point(e,n),s)||(a.point(e,n),s)}function e(){return n=r=null,t}var n,r,i,o,a,s,u=Dr(),l=Lr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Lr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?l:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:u).invert(t)},t.stream=function(t){return n&&r===t?n:n=Xt([u.stream(r=t),l.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),l.scale(.35*e),c.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),r=+t[0],s=+t[1];return i=u.translate(t).clipExtent([[r-.455*n,s-.238*n],[r+.455*n,s+.238*n]]).stream(h),o=l.translate([r-.307*n,s+.201*n]).clipExtent([[r-.425*n+Ne,s+.12*n+Ne],[r-.214*n-Ne,s+.234*n-Ne]]).stream(h),a=c.translate([r-.205*n,s+.212*n]).clipExtent([[r-.214*n+Ne,s+.166*n+Ne],[r-.115*n-Ne,s+.234*n-Ne]]).stream(h),e()},t.fitExtent=function(e,n){return zt(t,e,n)},t.fitSize=function(e,n){return Ft(t,e,n)},t.scale(1070)},Br=Wt(function(t){return on(2/(1+t))});Br.invert=Zt(function(t){return 2*o(t/2)});var zr=function(){return Vt(Br).scale(124.75).clipAngle(179.999)},Fr=Wt(function(t){return(t=i(t))&&t/nn(t)});Fr.invert=Zt(function(t){return t});var Nr=function(){return Vt(Fr).scale(79.4188).clipAngle(179.999)};Kt.invert=function(t,e){return[t,2*Ze($e(e))-Ge]};var Ur=function(){return Jt(Kt).scale(961/He)},Vr=function(){return qt($t).scale(109.5).parallels([30,30])};te.invert=te;var Gr=function(){return Vt(te).scale(152.63)},qr=function(){return qt(ee).scale(131.154).center([0,13.9389])};ne.invert=Zt(Ze);var Hr=function(){return Vt(ne).scale(144.049).clipAngle(60)},Yr=function(){function t(){return i=o=null,a}var e,n,r,i,o,a,s=1,u=0,l=0,c=1,h=1,f=$n,p=null,d=$n;return a={stream:function(t){return i&&o===t?i:i=f(d(o=t))},clipExtent:function(i){return arguments.length?(d=null==i?(p=e=n=r=null,$n):J(p=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,e],[n,r]]},scale:function(e){return arguments.length?(f=re((s=+e)*c,s*h,u,l),t()):s},translate:function(e){return arguments.length?(f=re(s*c,s*h,u=+e[0],l=+e[1]),t()):[u,l]},reflectX:function(e){return arguments.length?(f=re(s*(c=e?-1:1),s*h,u,l),t()):c<0},reflectY:function(e){return arguments.length?(f=re(s*c,s*(h=e?-1:1),u,l),t()):h<0},fitExtent:function(t,e){return zt(a,t,e)},fitSize:function(t,e){return Ft(a,t,e)}}};ie.invert=Zt(o);var Xr=function(){return Vt(ie).scale(249.5).clipAngle(90+Ne)};oe.invert=Zt(function(t){return 2*Ze(t)});var Wr=function(){return Vt(oe).scale(250).clipAngle(142)};ae.invert=function(t,e){return[-e,2*Ze($e(t))-Ge]};var Zr=function(){var t=Jt(ae),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.geoArea=pn,t.geoBounds=gn,t.geoCentroid=yn,t.geoCircle=jn,t.geoClipExtent=Nn,t.geoContains=Jn,t.geoDistance=Wn,t.geoGraticule=ct,t.geoGraticule10=ht,t.geoInterpolate=Qn,t.geoLength=Hn,t.geoPath=Mr,t.geoAlbers=Dr,t.geoAlbersUsa=Rr,t.geoAzimuthalEqualArea=zr,t.geoAzimuthalEqualAreaRaw=Br,t.geoAzimuthalEquidistant=Nr,t.geoAzimuthalEquidistantRaw=Fr,t.geoConicConformal=Vr,t.geoConicConformalRaw=$t,t.geoConicEqualArea=Lr,t.geoConicEqualAreaRaw=Yt,t.geoConicEquidistant=qr,t.geoConicEquidistantRaw=ee,t.geoEquirectangular=Gr,t.geoEquirectangularRaw=te,t.geoGnomonic=Hr,t.geoGnomonicRaw=ne,t.geoIdentity=Yr,t.geoProjection=Vt,t.geoProjectionMutator=Gt,t.geoMercator=Ur,t.geoMercatorRaw=Kt,t.geoOrthographic=Xr,t.geoOrthographicRaw=ie,t.geoStereographic=Wr,t.geoStereographicRaw=oe,t.geoTransverseMercator=Zr,t.geoTransverseMercatorRaw=ae,t.geoRotation=On,t.geoStream=ln,t.geoTransform=Pr,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hexjson@1.1.0@d3-hexjson/build/d3-hexjson.js":function(t,e,n){!function(t,r){r(e,n("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))}(0,function(t,e){"use strict";function n(t,n,s){var u=t.layout,l=[],c=0;Object.keys(t.hexes).forEach(function(e){t.hexes[e].key=e,l.push(t.hexes[e])});var h=e.max(l,function(t){return+t.q}),f=e.min(l,function(t){return+t.q}),p=e.max(l,function(t){return+t.r}),d=e.min(l,function(t){return+t.r}),v=h-f+1,g=p-d+1;c="odd-r"===u||"even-r"===u?e.min([n/((v+.5)*Math.sqrt(3)),s/(1.5*(g+1/3))]):e.min([s/((g+.5)*Math.sqrt(3)),n/(1.5*(v+1/3))]);var m=c*Math.sqrt(3),y=o(u,m,c),_=a(y);return l.forEach(function(t){t.qc=t.q-f,t.rc=p-t.r,t.x=r(t,u,m,c),t.y=i(t,u,m,c),t.vertices=y,t.points=_}),l}function r(t,e,n,r){var i=0,o=0;switch(e){case"odd-r":o=t.rc%2==1?n:n/2,i=t.qc*n+o;break;case"even-r":o=t.rc%2==0?n:n/2,i=t.qc*n+o;break;case"odd-q":case"even-q":i=t.qc*r*1.5+r}return i}function i(t,e,n,r){var i=0,o=0;switch(e){case"odd-r":case"even-r":i=t.rc*r*1.5+r;break;case"odd-q":o=t.qc%2==1?n:n/2,i=t.rc*n+o;break;case"even-q":o=t.qc%2==0?n:n/2,i=t.rc*n+o}return i}function o(t,e,n){var r=[];switch(t){case"odd-r":case"even-r":r.push({x:0,y:0-n}),r.push({x:0+.5*e,y:0-.5*n}),r.push({x:0+.5*e,y:0+.5*n}),r.push({x:0,y:0+n}),r.push({x:0-.5*e,y:0+.5*n}),r.push({x:0-.5*e,y:0-.5*n});break;case"odd-q":case"even-q":r.push({x:0-n,y:0}),r.push({x:0-.5*n,y:0-.5*e}),r.push({x:0+.5*n,y:0-.5*e}),r.push({x:0+n,y:0}),r.push({x:0+.5*n,y:0+.5*e}),r.push({x:0-.5*n,y:0+.5*e})}return r}function a(t){var e="";return t.forEach(function(t){e+=t.x+","+t.y+" "}),e.substring(0,e.length-1)}function s(t){var n={};n.layout=t.layout,n.hexes={};var r=[];Object.keys(t.hexes).forEach(function(e){r.push(t.hexes[e])});var i,o,a,s=e.max(r,function(t){return+t.q}),u=e.min(r,function(t){return+t.q}),l=e.max(r,function(t){return+t.r}),c=e.min(r,function(t){return+t.r});for(i=u;i<=s;i++)for(o=c;o<=l;o++)a="Q"+i+"R"+o,n.hexes[a]={q:i,r:o};return n}function u(t,n,o,a){var s=[],u=t.layout;Object.keys(t.hexes).forEach(function(e){s.push(t.hexes[e])});var l,c=e.max(s,function(t){return+t.q}),h=e.min(s,function(t){return+t.q}),f=e.max(s,function(t){return+t.r}),p=e.min(s,function(t){return+t.r}),d=c-h+1,v=f-p+1;l="odd-r"===u||"even-r"===u?e.min([n/((d+.5)*Math.sqrt(3)),o/(1.5*(v+1/3))]):e.min([o/((v+.5)*Math.sqrt(3)),n/(1.5*(d+1/3))]);var g=l*Math.sqrt(3),m=[],y=l*l*4,_=s.length;if(_>1){s.forEach(function(t){t.qc=t.q-h,t.rc=f-t.r,t.x=r(t,u,g,l),t.y=i(t,u,g,l)});for(var b=0;b<_-1;b++)for(var x=b+1;x<_;x++){var w=s[b],S=s[x];if(w[a]!==S[a]&&Math.abs(w.q-S.q)<=1&&Math.abs(w.r-S.r)<=1&&(w.x-S.x)*(w.x-S.x)+(w.y-S.y)*(w.y-S.y)<y){var E={};E.x=S.x+(w.x-S.x)/2,E.y=S.y+(w.y-S.y)/2;var M={},T=4*Math.sqrt(3);M.dx=(w.y-S.y)/T,M.dy=-(w.x-S.x)/T,m.push({x:E.x-2*M.dx,y:E.y-2*M.dy}),m.push({x:E.x-M.dx,y:E.y-M.dy}),m.push({x:E.x,y:E.y}),m.push({x:E.x+M.dx,y:E.y+M.dy}),m.push({x:E.x+2*M.dx,y:E.y+2*M.dy})}}}return m}function l(t,n,o,a){var s=[],u=t.layout;Object.keys(t.hexes).forEach(function(e){s.push(t.hexes[e])});var l,c=e.max(s,function(t){return+t.q}),h=e.min(s,function(t){return+t.q}),f=e.max(s,function(t){return+t.r}),p=e.min(s,function(t){return+t.r}),d=c-h+1,v=f-p+1;l="odd-r"===u||"even-r"===u?e.min([n/((d+.5)*Math.sqrt(3)),o/(1.5*(v+1/3))]):e.min([o/((v+.5)*Math.sqrt(3)),n/(1.5*(d+1/3))]);var g=l*Math.sqrt(3),m=[],y=l*l*4,_=s.length;if(_>1){s.forEach(function(t){t.qc=t.q-h,t.rc=f-t.r,t.x=r(t,u,g,l),t.y=i(t,u,g,l)});for(var b=0;b<_-1;b++)for(var x=b+1;x<_;x++){var w=s[b],S=s[x];if(w[a]!==S[a]&&Math.abs(w.q-S.q)<=1&&Math.abs(w.r-S.r)<=1&&(w.x-S.x)*(w.x-S.x)+(w.y-S.y)*(w.y-S.y)<y){var E={};E.x=S.x+(w.x-S.x)/2,E.y=S.y+(w.y-S.y)/2;var M={},T=1;w[a]<S[a]&&(T=-1);var C=2*Math.sqrt(3)*T;M.dx=(w.y-S.y)/C,M.dy=-(w.x-S.x)/C,m.push({x1:E.x-M.dx,y1:E.y-M.dy,x2:E.x+M.dx,y2:E.y+M.dy})}}}return m}t.renderHexJSON=n,t.getGridForHexJSON=s,t.getBoundaryDotsForHexJSON=u,t.getBoundarySegmentsForHexJSON=l,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t,e){return t.parent===e.parent?1:2}function n(t){return t.reduce(r,0)/t.length}function r(t,e){return t+e.x}function i(t){return 1+t.reduce(o,0)}function o(t,e){return Math.max(t,e.y)}function a(t){for(var e;e=t.children;)t=e[0];return t}function s(t){for(var e;e=t.children;)t=e[e.length-1];return t}function u(){function t(t){var e,c=0;t.eachAfter(function(t){var o=t.children;o?(t.x=n(o),t.y=i(o)):(t.x=e?c+=r(t,e):0,t.y=0,e=t)});var h=a(t),f=s(t),p=h.x-r(h,f)/2,d=f.x+r(f,h)/2;return t.eachAfter(l?function(e){e.x=(e.x-t.x)*o,e.y=(t.y-e.y)*u}:function(e){e.x=(e.x-p)/(d-p)*o,e.y=(1-(t.y?e.y/t.y:1))*u})}var r=e,o=1,u=1,l=!1;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(l=!1,o=+e[0],u=+e[1],t):l?null:[o,u]},t.nodeSize=function(e){return arguments.length?(l=!0,o=+e[0],u=+e[1],t):l?[o,u]:null},t}function l(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function c(){return this.eachAfter(l)}function h(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this}function f(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this}function p(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this}function d(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function v(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function g(t){for(var e=this,n=m(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function m(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function y(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function _(){var t=[];return this.each(function(e){t.push(e)}),t}function b(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function x(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function w(t,e){var n,r,i,o,a,s=new C(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=E);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)l.push(r=n.children[o]=new C(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(T)}function S(){return w(this).eachBefore(M)}function E(t){return t.children}function M(t){t.data=t.data.data}function T(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function C(t){this.data=t,this.depth=this.height=0,this.parent=null}function A(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}function P(t){for(var e,n,r=0,i=(t=A(_t.call(t))).length,o=[];r<i;)e=t[r],n&&O(n,e)?++r:(n=L(o=k(o,e)),r=0);return n}function k(t,e){var n,r;if(j(e,t))return[e];for(n=0;n<t.length;++n)if(I(e,t[n])&&j(R(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(I(R(t[n],t[r]),e)&&I(R(t[n],e),t[r])&&I(R(t[r],e),t[n])&&j(B(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function I(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function O(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function j(t,e){for(var n=0;n<e.length;++n)if(!O(t,e[n]))return!1;return!0}function L(t){switch(t.length){case 1:return D(t[0]);case 2:return R(t[0],t[1]);case 3:return B(t[0],t[1],t[2])}}function D(t){return{x:t.x,y:t.y,r:t.r}}function R(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,l=a-r,c=s-i,h=Math.sqrt(u*u+l*l);return{x:(n+o+u/h*c)/2,y:(r+a+l/h*c)/2,r:(h+i+s)/2}}function B(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,l=n.x,c=n.y,h=n.r,f=r-a,p=r-l,d=i-s,v=i-c,g=u-o,m=h-o,y=r*r+i*i-o*o,_=y-a*a-s*s+u*u,b=y-l*l-c*c+h*h,x=p*d-f*v,w=(d*b-v*_)/(2*x)-r,S=(v*g-d*m)/x,E=(p*_-f*b)/(2*x)-i,M=(f*m-p*g)/x,T=S*S+M*M-1,C=2*(o+w*S+E*M),A=w*w+E*E-o*o,P=-(T?(C+Math.sqrt(C*C-4*T*A))/(2*T):A/C);return{x:r+w+S*P,y:i+E+M*P,r:P}}function z(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,l=s*s+u*u;l?(i=e.r+n.r,i*=i,a=t.r+n.r,a*=a,i>a?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function F(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function N(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function U(t){this._=t,this.next=null,this.previous=null}function V(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,l,c,h;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;z(n,e,r=t[2]),e=new U(e),n=new U(n),r=new U(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){z(e._,n._,r=t[s]),r=new U(r),u=n.next,l=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(F(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}c+=u._.r,u=u.next}else{if(F(l._,r._)){e=l,e.next=n,n.previous=e,--s;continue t}h+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=N(e);(r=r.next)!==n;)(a=N(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=P(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function G(t){return V(t),t}function q(t){return null==t?null:H(t)}function H(t){if("function"!=typeof t)throw new Error;return t}function Y(){return 0}function X(t){return function(){return t}}function W(t){return Math.sqrt(t.value)}function Z(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(K(e)).eachAfter(J(i,.5)).eachBefore(Q(1)):t.eachBefore(K(W)).eachAfter(J(Y,1)).eachAfter(J(i,t.r/Math.min(n,r))).eachBefore(Q(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=Y;return t.radius=function(n){return arguments.length?(e=q(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:X(+e),t):i},t}function K(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function J(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=V(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function Q(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function $(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function tt(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(r-e)/t.value;++s<u;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l}function et(){function t(t){var a=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/a,t.eachBefore(e(r,a)),o&&t.eachBefore($),t}function e(t,e){return function(n){n.children&&tt(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,a=n.x1-i,s=n.y1-i;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),n.x0=r,n.y0=o,n.x1=a,n.y1=s}}var n=1,r=1,i=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t}function nt(t){return t.id}function rt(t){return t.parentId}function it(){function t(t){var r,i,o,a,s,u,l,c=t.length,h=new Array(c),f={};for(i=0;i<c;++i)r=t[i],s=h[i]=new C(r),null!=(u=e(r,i,t))&&(u+="")&&(l=bt+(s.id=u),f[l]=l in f?wt:s);for(i=0;i<c;++i)if(s=h[i],null!=(u=n(t[i],i,t))&&(u+="")){if(!(a=f[bt+u]))throw new Error("missing: "+u);if(a===wt)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=xt,o.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(T),o.parent=null,c>0)throw new Error("cycle");return o}var e=nt,n=rt;return t.id=function(n){return arguments.length?(e=H(n),t):e},t.parentId=function(e){return arguments.length?(n=H(e),t):n},t}function ot(t,e){return t.parent===e.parent?1:2}function at(t){var e=t.children;return e?e[0]:t.t}function st(t){var e=t.children;return e?e[e.length-1]:t.t}function ut(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function lt(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function ct(t,e,n){return t.a.parent===e.parent?t.a:n}function ht(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function ft(t){for(var e,n,r,i,o,a=new ht(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new ht(r[i],i)),n.parent=e;return(a.parent=new ht(null,0)).children=[a],a}function pt(){function t(t){var r=ft(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),u)t.eachBefore(i);else{var l=t,c=t,h=t;t.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)});var f=l===c?1:o(l,c)/2,p=f-l.x,d=a/(c.x+f+p),v=s/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){lt(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,a=t,s=e,u=i.parent.children[0],l=i.m,c=a.m,h=s.m,f=u.m;s=st(s),i=at(i),s&&i;)u=at(u),a=st(a),a.a=t,r=s.z+h-i.z-l+o(s._,i._),r>0&&(ut(ct(s,t,n),t,r),l+=r,c+=r),h+=s.m,l+=i.m,f+=u.m,c+=a.m;s&&!st(a)&&(a.t=s,a.m+=h-c),i&&!at(u)&&(u.t=i,u.m+=l-f,n=t)}return n}function i(t){t.x*=a,t.y=t.depth*s}var o=ot,a=1,s=1,u=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(u=!1,a=+e[0],s=+e[1],t):u?null:[a,s]},t.nodeSize=function(e){return arguments.length?(u=!0,a=+e[0],s=+e[1],t):u?[a,s]:null},t}function dt(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(i-n)/t.value;++s<u;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l}function vt(t,e,n,r,i,o){for(var a,s,u,l,c,h,f,p,d,v,g,m=[],y=e.children,_=0,b=0,x=y.length,w=e.value;_<x;){u=i-n,l=o-r;do{c=y[b++].value}while(!c&&b<x);for(h=f=c,v=Math.max(l/u,u/l)/(w*t),g=c*c*v,d=Math.max(f/g,g/h);b<x;++b){if(c+=s=y[b].value,s<h&&(h=s),s>f&&(f=s),g=c*c*v,(p=Math.max(f/g,g/h))>d){c-=s;break}d=p}m.push(a={value:c,dice:u<l,children:y.slice(_,b)}),a.dice?tt(a,n,r,i,w?r+=l*c/w:o):dt(a,n,r,w?n+=u*c/w:i,o),w-=c,_=b}return m}function gt(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(e),a=[0],r&&t.eachBefore($),t}function e(t){var e=a[t.depth],r=t.x0+e,i=t.y0+e,o=t.x1-e,f=t.y1-e;o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=f,t.children&&(e=a[t.depth+1]=s(t)/2,r+=h(t)-e,i+=u(t)-e,o-=l(t)-e,f-=c(t)-e,o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),n(t,r,i,o,f))}var n=Et,r=!1,i=1,o=1,a=[0],s=Y,u=Y,l=Y,c=Y,h=Y;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],o=+e[1],t):[i,o]},t.tile=function(e){return arguments.length?(n=H(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:X(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:X(+e),t):u},t.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:X(+e),t):l},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:X(+e),t):c},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:X(+e),t):h},t}function mt(t,e,n,r,i){function o(t,e,n,r,i,a,s){if(t>=e-1){var l=u[t];return l.x0=r,l.y0=i,l.x1=a,l.y1=s,void 0}for(var h=c[t],f=n/2+h,p=t+1,d=e-1;p<d;){var v=p+d>>>1;c[v]<f?p=v+1:d=v}f-c[p-1]<c[p]-f&&t+1<p&&--p;var g=c[p]-h,m=n-g;if(a-r>s-i){var y=(r*m+a*g)/n;o(t,p,g,r,i,y,s),o(p,e,m,y,i,a,s)}else{var _=(i*m+s*g)/n;o(t,p,g,r,i,a,_),o(p,e,m,r,_,a,s)}}var a,s,u=t.children,l=u.length,c=new Array(l+1);for(c[0]=s=a=0;a<l;++a)c[a+1]=s+=u[a].value;o(0,l,t.value,e,n,r,i)}function yt(t,e,n,r,i){(1&t.depth?dt:tt)(t,e,n,r,i)}C.prototype=w.prototype={constructor:C,count:c,each:h,eachAfter:p,eachBefore:f,sum:d,sort:v,path:g,ancestors:y,descendants:_,leaves:b,links:x,copy:S};var _t=Array.prototype.slice,bt="$",xt={depth:-1},wt={};ht.prototype=Object.create(C.prototype);var St=(1+Math.sqrt(5))/2,Et=function t(e){function n(t,n,r,i,o){vt(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(St),Mt=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,l,c,h=-1,f=a.length,p=t.value;++h<f;){for(s=a[h],u=s.children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?tt(s,n,r,i,r+=(o-r)*s.value/p):dt(s,n,r,n+=(i-n)*s.value/p,o),p-=s.value}else t._squarify=a=vt(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(St);t.cluster=u,t.hierarchy=w,t.pack=Z,t.packEnclose=P,t.packSiblings=G,t.partition=et,t.stratify=it,t.tree=pt,t.treemap=gt,t.treemapBinary=mt,t.treemapDice=tt,t.treemapResquarify=Mt,t.treemapSlice=dt,t.treemapSliceDice=yt,t.treemapSquarify=Et,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}var r=Math.PI,i=2*r,o=1e-6,a=i-o;e.prototype=n.prototype={constructor:e,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var s=this._x1,u=this._y1,l=n-t,c=i-e,h=s-t,f=u-e,p=h*h+f*f;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(p>o)if(Math.abs(f*l-c*h)>o&&a){var d=n-s,v=i-u,g=l*l+c*c,m=d*d+v*v,y=Math.sqrt(g),_=Math.sqrt(p),b=a*Math.tan((r-Math.acos((g+p-m)/(2*y*_)))/2),x=b/_,w=b/y;Math.abs(x-1)>o&&(this._+="L"+(t+x*h)+","+(e+x*f)),this._+="A"+a+","+a+",0,0,"+ +(f*d>h*v)+","+(this._x1=t+w*l)+","+(this._y1=e+w*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,s,u,l){t=+t,e=+e,n=+n,l=!!l;var c=n*Math.cos(s),h=n*Math.sin(s),f=t+c,p=e+h,d=1^l,v=l?s-u:u-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+f+","+p:(Math.abs(this._x1-f)>o||Math.abs(this._y1-p)>o)&&(this._+="L"+f+","+p),n&&(v<0&&(v=v%i+i),v>a?this._+="A"+n+","+n+",0,1,"+d+","+(t-c)+","+(e-h)+"A"+n+","+n+",0,1,"+d+","+(this._x1=f)+","+(this._y1=p):v>o&&(this._+="A"+n+","+n+",0,"+ +(v>=r)+","+d+","+(this._x1=t+n*Math.cos(u))+","+(this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js":function(t,e,n){var r=n("./node_modules/_tslib@1.11.1@tslib/tslib.js");!function(t,r){r(e,n("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"),n("./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js"),n("./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js"))}(0,function(t,e,n,i){"use strict";function o(t){return t.target.depth}function a(t){return t.depth}function s(t,e){return e-1-t.height}function u(t,e){return t.sourceLinks.length?t.depth:e-1}function l(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?e.min(t.sourceLinks,o)-1:0}function c(t){return function(){return t}}function h(t,e){return p(t.source,e.source)||t.index-e.index}function f(t,e){return p(t.target,e.target)||t.index-e.index}function p(t,e){return t.y0-e.y0}function d(t){return t.value}function v(t){return t.index}function g(t){return t.nodes}function m(t){return t.links}function y(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function _(){function t(){var t={nodes:A.apply(null,arguments),links:P.apply(null,arguments)};return i(t),o(t),a(t),s(t),l(t),t}function i(t){t.nodes.forEach(function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]});var e=n.map(t.nodes,T);t.links.forEach(function(t,n){t.index=n;var r=t.source,i=t.target;"object"!=typeof r&&(r=t.source=y(e,r)),"object"!=typeof i&&(i=t.target=y(e,i)),r.sourceLinks.push(t),i.targetLinks.push(t)})}function o(t){t.nodes.forEach(function(t){t.value=Math.max(e.sum(t.sourceLinks,d),e.sum(t.targetLinks,d))})}function a(t){var e,n,r,i=t.nodes.length;for(e=t.nodes,n=[],r=0;e.length;++r,e=n,n=[]){if(r>i)throw new Error("circular link");e.forEach(function(t){t.depth=r,t.sourceLinks.forEach(function(t){n.indexOf(t.target)<0&&n.push(t.target)})})}for(e=t.nodes,n=[],r=0;e.length;++r,e=n,n=[]){if(r>i)throw new Error("circular link");e.forEach(function(t){t.height=r,t.targetLinks.forEach(function(t){n.indexOf(t.source)<0&&n.push(t.source)})})}var o=(w-b-E)/(r-1);t.nodes.forEach(function(t){t.x1=(t.x0=b+Math.max(0,Math.min(r-1,Math.floor(C.call(null,t,r))))*o)+E})}function s(t){function i(){var n=e.min(u,function(t){return(S-x-(t.length-1)*M)/e.sum(t,d)});u.forEach(function(t){null!=_&&t.sort(_),t.forEach(function(t,e){t.y1=(t.y0=e)+t.value*n})}),t.links.forEach(function(t){t.width=t.value*n})}function o(t){u.forEach(function(e){e.forEach(function(e){var n,i,o,a,s=e.y0;try{for(var u=r.__values(e.sourceLinks.sort(f)),l=u.next();!l.done;l=u.next()){var c=l.value,h=c.target,p=c.width,d=c.value;if(d>0){var v=0;try{for(var g=(o=void 0,r.__values(h.targetLinks)),m=g.next();!m.done;m=g.next()){var y=m.value,_=y.source,b=y.width;if(_===e)break;v+=b+M/2}}catch(t){o={error:t}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}v=(s-v-h.y0)*t*(d/Math.min(e.value,h.value)),h.y0+=v,h.y1+=v}s+=p+M/2}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}})})}function a(t){u.slice().reverse().forEach(function(e){e.forEach(function(e){var n,i,o,a,s=e.y0;try{for(var u=r.__values(e.targetLinks.sort(h)),l=u.next();!l.done;l=u.next()){var c=l.value,f=c.source,p=c.width,d=c.value;if(d>0){var v=0;try{for(var g=(o=void 0,r.__values(f.sourceLinks)),m=g.next();!m.done;m=g.next()){var y=m.value,_=y.target,b=y.width;if(_===e)break;v+=b+M/2}}catch(t){o={error:t}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}v=(s-v-f.y0)*t*(d/Math.min(e.value,f.value)),f.y0+=v,f.y1+=v}s+=p+M/2}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}})})}function s(){u.forEach(function(t){var e,n,r,i=x,o=t.length;for(void 0===_&&t.sort(p),r=0;r<o;++r)e=t[r],n=i-e.y0,n>0&&(e.y0+=n,e.y1+=n),i=e.y1+M;if((n=i-M-S)>0)for(i=e.y0-=n,e.y1-=n,r=o-2;r>=0;--r)e=t[r],n=e.y1+M-i,n>0&&(e.y0-=n,e.y1-=n),i=e.y0})}var u=n.nest().key(function(t){return t.x0}).sortKeys(e.ascending).entries(t.nodes).map(function(t){return t.values});i(),s();for(var l=.9,c=k;c>0;--c,l*=.9)a(l),s(),o(l),s()}function l(t){t.nodes.forEach(function(t){t.sourceLinks.sort(f),t.targetLinks.sort(h)}),t.nodes.forEach(function(t){var e=t.y0,n=e;t.sourceLinks.forEach(function(t){t.y0=e+t.width/2,e+=t.width}),t.targetLinks.forEach(function(t){t.y1=n+t.width/2,n+=t.width})})}var _,b=0,x=0,w=1,S=1,E=24,M=8,T=v,C=u,A=g,P=m,k=6;return t.update=function(t){return l(t),t},t.nodeId=function(e){return arguments.length?(T="function"==typeof e?e:c(e),t):T},t.nodeAlign=function(e){return arguments.length?(C="function"==typeof e?e:c(e),t):C},t.nodeSort=function(e){return arguments.length?(_=e,t):_},t.nodeWidth=function(e){return arguments.length?(E=+e,t):E},t.nodePadding=function(e){return arguments.length?(M=+e,t):M},t.nodes=function(e){return arguments.length?(A="function"==typeof e?e:c(e),t):A},t.links=function(e){return arguments.length?(P="function"==typeof e?e:c(e),t):P},t.size=function(e){return arguments.length?(b=x=0,w=+e[0],S=+e[1],t):[w-b,S-x]},t.extent=function(e){return arguments.length?(b=+e[0][0],w=+e[1][0],x=+e[0][1],S=+e[1][1],t):[[b,x],[w,S]]},t.iterations=function(e){return arguments.length?(k=+e,t):k},t}function b(t){return[t.source.x1,t.y0]}function x(t){return[t.target.x0,t.y1]}function w(){return i.linkHorizontal().source(b).target(x)}t.sankey=_,t.sankeyCenter=l,t.sankeyLeft=a,t.sankeyRight=s,t.sankeyJustify=u,t.sankeyLinkHorizontal=w,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js":function(t,e,n){!function(t,r){r(e,n("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))}(0,function(t,e){"use strict";function n(t){return function(){return t}}function r(t){return t>1?0:t<-1?Vt:Math.acos(t)}function i(t){return t>=1?Gt:t<=-1?-Gt:Math.asin(t)}function o(t){return t.innerRadius}function a(t){return t.outerRadius}function s(t){return t.startAngle}function u(t){return t.endAngle}function l(t){return t&&t.padAngle}function c(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,h=s-o,f=h*u-c*l;if(!(f*f<Ut))return f=(c*(e-o)-h*(t-i))/f,[t+f*u,e+f*l]}function h(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/Nt(s*s+u*u),c=l*u,h=-l*s,f=t+c,p=e+h,d=n+c,v=r+h,g=(f+d)/2,m=(p+v)/2,y=d-f,_=v-p,b=y*y+_*_,x=i-o,w=f*v-d*p,S=(_<0?-1:1)*Nt(Bt(0,x*x*b-w*w)),E=(w*_-y*S)/b,M=(-w*y-_*S)/b,T=(w*_+y*S)/b,C=(-w*y+_*S)/b,A=E-g,P=M-m,k=T-g,I=C-m;return A*A+P*P>k*k+I*I&&(E=T,M=C),{cx:E,cy:M,x01:-c,y01:-h,x11:E*(i/x-1),y11:M*(i/x-1)}}function f(){function t(){var t,n,o=+f.apply(this,arguments),a=+p.apply(this,arguments),s=g.apply(this,arguments)-Gt,u=m.apply(this,arguments)-Gt,l=Lt(u-s),b=u>s;if(_||(_=t=e.path()),a<o&&(n=a,a=o,o=n),a>Ut)if(l>qt-Ut)_.moveTo(a*Rt(s),a*Ft(s)),_.arc(0,0,a,s,u,!b),o>Ut&&(_.moveTo(o*Rt(u),o*Ft(u)),_.arc(0,0,o,u,s,b));else{var x,w,S=s,E=u,M=s,T=u,C=l,A=l,P=y.apply(this,arguments)/2,k=P>Ut&&(v?+v.apply(this,arguments):Nt(o*o+a*a)),I=zt(Lt(a-o)/2,+d.apply(this,arguments)),O=I,j=I;if(k>Ut){var L=i(k/o*Ft(P)),D=i(k/a*Ft(P));(C-=2*L)>Ut?(L*=b?1:-1,M+=L,T-=L):(C=0,M=T=(s+u)/2),(A-=2*D)>Ut?(D*=b?1:-1,S+=D,E-=D):(A=0,S=E=(s+u)/2)}var R=a*Rt(S),B=a*Ft(S),z=o*Rt(T),F=o*Ft(T);if(I>Ut){var N,U=a*Rt(E),V=a*Ft(E),G=o*Rt(M),q=o*Ft(M);if(l<Vt&&(N=c(R,B,G,q,U,V,z,F))){var H=R-N[0],Y=B-N[1],X=U-N[0],W=V-N[1],Z=1/Ft(r((H*X+Y*W)/(Nt(H*H+Y*Y)*Nt(X*X+W*W)))/2),K=Nt(N[0]*N[0]+N[1]*N[1]);O=zt(I,(o-K)/(Z-1)),j=zt(I,(a-K)/(Z+1))}}A>Ut?j>Ut?(x=h(G,q,R,B,a,j,b),w=h(U,V,z,F,a,j,b),_.moveTo(x.cx+x.x01,x.cy+x.y01),j<I?_.arc(x.cx,x.cy,j,Dt(x.y01,x.x01),Dt(w.y01,w.x01),!b):(_.arc(x.cx,x.cy,j,Dt(x.y01,x.x01),Dt(x.y11,x.x11),!b),_.arc(0,0,a,Dt(x.cy+x.y11,x.cx+x.x11),Dt(w.cy+w.y11,w.cx+w.x11),!b),_.arc(w.cx,w.cy,j,Dt(w.y11,w.x11),Dt(w.y01,w.x01),!b))):(_.moveTo(R,B),_.arc(0,0,a,S,E,!b)):_.moveTo(R,B),o>Ut&&C>Ut?O>Ut?(x=h(z,F,U,V,o,-O,b),w=h(R,B,G,q,o,-O,b),_.lineTo(x.cx+x.x01,x.cy+x.y01),O<I?_.arc(x.cx,x.cy,O,Dt(x.y01,x.x01),Dt(w.y01,w.x01),!b):(_.arc(x.cx,x.cy,O,Dt(x.y01,x.x01),Dt(x.y11,x.x11),!b),_.arc(0,0,o,Dt(x.cy+x.y11,x.cx+x.x11),Dt(w.cy+w.y11,w.cx+w.x11),b),_.arc(w.cx,w.cy,O,Dt(w.y11,w.x11),Dt(w.y01,w.x01),!b))):_.arc(0,0,o,T,M,b):_.lineTo(z,F)}else _.moveTo(0,0);if(_.closePath(),t)return _=null,t+""||null}var f=o,p=a,d=n(0),v=null,g=s,m=u,y=l,_=null;return t.centroid=function(){var t=(+f.apply(this,arguments)+ +p.apply(this,arguments))/2,e=(+g.apply(this,arguments)+ +m.apply(this,arguments))/2-Vt/2;return[Rt(e)*t,Ft(e)*t]},t.innerRadius=function(e){return arguments.length?(f="function"==typeof e?e:n(+e),t):f},t.outerRadius=function(e){return arguments.length?(p="function"==typeof e?e:n(+e),t):p},t.cornerRadius=function(e){return arguments.length?(d="function"==typeof e?e:n(+e),t):d},t.padRadius=function(e){return arguments.length?(v=null==e?null:"function"==typeof e?e:n(+e),t):v},t.startAngle=function(e){return arguments.length?(g="function"==typeof e?e:n(+e),t):g},t.endAngle=function(e){return arguments.length?(m="function"==typeof e?e:n(+e),t):m},t.padAngle=function(e){return arguments.length?(y="function"==typeof e?e:n(+e),t):y},t.context=function(e){return arguments.length?(_=null==e?null:e,t):_},t}function p(t){this._context=t}function d(t){return new p(t)}function v(t){return t[0]}function g(t){return t[1]}function m(){function t(t){var n,l,c,h=t.length,f=!1;for(null==a&&(u=s(c=e.path())),n=0;n<=h;++n)!(n<h&&o(l=t[n],n,t))===f&&((f=!f)?u.lineStart():u.lineEnd()),f&&u.point(+r(l,n,t),+i(l,n,t));if(c)return u=null,c+""||null}var r=v,i=g,o=n(!0),a=null,s=d,u=null;return t.x=function(e){return arguments.length?(r="function"==typeof e?e:n(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),t):i},t.defined=function(e){return arguments.length?(o="function"==typeof e?e:n(!!e),t):o},t.curve=function(e){return arguments.length?(s=e,null!=a&&(u=s(a)),t):s},t.context=function(e){return arguments.length?(null==e?a=u=null:u=s(a=e),t):a},t}function y(){function t(t){var n,r,f,p,d,v=t.length,g=!1,m=new Array(v),y=new Array(v);for(null==l&&(h=c(d=e.path())),n=0;n<=v;++n){if(!(n<v&&u(p=t[n],n,t))===g)if(g=!g)r=n,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),f=n-1;f>=r;--f)h.point(m[f],y[f]);h.lineEnd(),h.areaEnd()}g&&(m[n]=+i(p,n,t),y[n]=+a(p,n,t),h.point(o?+o(p,n,t):m[n],s?+s(p,n,t):y[n]))}if(d)return h=null,d+""||null}function r(){return m().defined(u).curve(c).context(l)}var i=v,o=null,a=n(0),s=g,u=n(!0),l=null,c=d,h=null;return t.x=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),o=null,t):i},t.x0=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),t):i},t.x1=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:n(+e),t):o},t.y=function(e){return arguments.length?(a="function"==typeof e?e:n(+e),s=null,t):a},t.y0=function(e){return arguments.length?(a="function"==typeof e?e:n(+e),t):a},t.y1=function(e){return arguments.length?(s=null==e?null:"function"==typeof e?e:n(+e),t):s},t.lineX0=t.lineY0=function(){return r().x(i).y(a)},t.lineY1=function(){return r().x(i).y(s)},t.lineX1=function(){return r().x(o).y(a)},t.defined=function(e){return arguments.length?(u="function"==typeof e?e:n(!!e),t):u},t.curve=function(e){return arguments.length?(c=e,null!=l&&(h=c(l)),t):c},t.context=function(e){return arguments.length?(null==e?l=h=null:h=c(l=e),t):l},t}function _(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function b(t){return t}function x(){function t(t){var n,u,l,c,h,f=t.length,p=0,d=new Array(f),v=new Array(f),g=+o.apply(this,arguments),m=Math.min(qt,Math.max(-qt,a.apply(this,arguments)-g)),y=Math.min(Math.abs(m)/f,s.apply(this,arguments)),_=y*(m<0?-1:1);for(n=0;n<f;++n)(h=v[d[n]=n]=+e(t[n],n,t))>0&&(p+=h);for(null!=r?d.sort(function(t,e){return r(v[t],v[e])}):null!=i&&d.sort(function(e,n){return i(t[e],t[n])}),n=0,l=p?(m-f*_)/p:0;n<f;++n,g=c)u=d[n],h=v[u],c=g+(h>0?h*l:0)+_,v[u]={data:t[u],index:n,value:h,startAngle:g,endAngle:c,padAngle:y};return v}var e=b,r=_,i=null,o=n(0),a=n(qt),s=n(0);return t.value=function(r){return arguments.length?(e="function"==typeof r?r:n(+r),t):e},t.sortValues=function(e){return arguments.length?(r=e,i=null,t):r},t.sort=function(e){return arguments.length?(i=e,r=null,t):i},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:n(+e),t):o},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:n(+e),t):a},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:n(+e),t):s},t}function w(t){this._curve=t}function S(t){function e(e){return new w(t(e))}return e._curve=t,e}function E(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(S(t)):e()._curve},t}function M(){return E(m().curve(Ht))}function T(){var t=y().curve(Ht),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return E(n())},delete t.lineX0,t.lineEndAngle=function(){return E(r())},delete t.lineX1,t.lineInnerRadius=function(){return E(i())},delete t.lineY0,t.lineOuterRadius=function(){return E(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(S(t)):e()._curve},t}function C(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function A(t){return t.source}function P(t){return t.target}function k(t){function r(){var n,r=Yt.call(arguments),l=i.apply(this,r),c=o.apply(this,r);if(u||(u=n=e.path()),t(u,+a.apply(this,(r[0]=l,r)),+s.apply(this,r),+a.apply(this,(r[0]=c,r)),+s.apply(this,r)),n)return u=null,n+""||null}var i=A,o=P,a=v,s=g,u=null;return r.source=function(t){return arguments.length?(i=t,r):i},r.target=function(t){return arguments.length?(o=t,r):o},r.x=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),r):a},r.y=function(t){return arguments.length?(s="function"==typeof t?t:n(+t),r):s},r.context=function(t){return arguments.length?(u=null==t?null:t,r):u},r}function I(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function O(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function j(t,e,n,r,i){var o=C(e,n),a=C(e,n=(n+i)/2),s=C(r,n),u=C(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function L(){return k(I)}function D(){return k(O)}function R(){var t=k(j);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}function B(){function t(){var t;if(o||(o=t=e.path()),r.apply(this,arguments).draw(o,+i.apply(this,arguments)),t)return o=null,t+""||null}var r=n(Xt),i=n(64),o=null;return t.type=function(e){return arguments.length?(r="function"==typeof e?e:n(e),t):r},t.size=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),t):i},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t}function z(){}function F(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function N(t){this._context=t}function U(t){return new N(t)}function V(t){this._context=t}function G(t){return new V(t)}function q(t){this._context=t}function H(t){return new q(t)}function Y(t,e){this._basis=new N(t),this._beta=e}function X(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function W(t,e){this._context=t,this._k=(1-e)/6}function Z(t,e){this._context=t,this._k=(1-e)/6}function K(t,e){this._context=t,this._k=(1-e)/6}function J(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Ut){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Ut){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Q(t,e){this._context=t,this._alpha=e}function $(t,e){this._context=t,this._alpha=e}function tt(t,e){this._context=t,this._alpha=e}function et(t){this._context=t}function nt(t){return new et(t)}function rt(t){return t<0?-1:1}function it(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(rt(o)+rt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function ot(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function at(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function st(t){this._context=t}function ut(t){this._context=new lt(t)}function lt(t){this._context=t}function ct(t){return new st(t)}function ht(t){return new ut(t)}function ft(t){this._context=t}function pt(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function dt(t){return new ft(t)}function vt(t,e){this._context=t,this._t=e}function gt(t){return new vt(t,.5)}function mt(t){return new vt(t,0)}function yt(t){return new vt(t,1)}function _t(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function bt(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function xt(t,e){return t[e]}function wt(){function t(t){var n,a,s=e.apply(this,arguments),u=t.length,l=s.length,c=new Array(l);for(n=0;n<l;++n){for(var h,f=s[n],p=c[n]=new Array(u),d=0;d<u;++d)p[d]=h=[0,+o(t[d],f,d,t)],h.data=t[d];p.key=f}for(n=0,a=r(c);n<l;++n)c[a[n]].index=n;return i(c,a),c}var e=n([]),r=bt,i=_t,o=xt;return t.keys=function(r){return arguments.length?(e="function"==typeof r?r:n(Yt.call(r)),t):e},t.value=function(e){return arguments.length?(o="function"==typeof e?e:n(+e),t):o},t.order=function(e){return arguments.length?(r=null==e?bt:"function"==typeof e?e:n(Yt.call(e)),t):r},t.offset=function(e){return arguments.length?(i=null==e?_t:e,t):i},t}function St(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}_t(t,e)}}function Et(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,l=t[e[0]].length;u<l;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}function Mt(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}_t(t,e)}}function Tt(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],h=c[a][1]||0,f=c[a-1][1]||0,p=(h-f)/2,d=0;d<s;++d){var v=t[e[d]];p+=(v[a][1]||0)-(v[a-1][1]||0)}u+=h,l+=p*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,_t(t,e)}}function Ct(t){var e=t.map(At);return bt(t).sort(function(t,n){return e[t]-e[n]})}function At(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function Pt(t){var e=t.map(kt);return bt(t).sort(function(t,n){return e[t]-e[n]})}function kt(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function It(t){return Pt(t).reverse()}function Ot(t){var e,n,r=t.length,i=t.map(kt),o=Ct(t),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)}function jt(t){return bt(t).reverse()}var Lt=Math.abs,Dt=Math.atan2,Rt=Math.cos,Bt=Math.max,zt=Math.min,Ft=Math.sin,Nt=Math.sqrt,Ut=1e-12,Vt=Math.PI,Gt=Vt/2,qt=2*Vt;p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Ht=S(d);w.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Yt=Array.prototype.slice,Xt={draw:function(t,e){var n=Math.sqrt(e/Vt);t.moveTo(n,0),t.arc(0,0,n,0,qt)}},Wt={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Zt=Math.sqrt(1/3),Kt=2*Zt,Jt={draw:function(t,e){var n=Math.sqrt(e/Kt),r=n*Zt;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Qt=.8908130915292852,$t=Math.sin(Vt/10)/Math.sin(7*Vt/10),te=Math.sin(qt/10)*$t,ee=-Math.cos(qt/10)*$t,ne={draw:function(t,e){var n=Math.sqrt(e*Qt),r=te*n,i=ee*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=qt*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},re={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},ie=Math.sqrt(3),oe={draw:function(t,e){var n=-Math.sqrt(e/(3*ie));t.moveTo(0,2*n),t.lineTo(-ie*n,-n),t.lineTo(ie*n,-n),t.closePath()}},ae=-.5,se=Math.sqrt(3)/2,ue=1/Math.sqrt(12),le=3*(ue/2+1),ce={draw:function(t,e){var n=Math.sqrt(e/le),r=n/2,i=n*ue,o=r,a=n*ue+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(ae*r-se*i,se*r+ae*i),t.lineTo(ae*o-se*a,se*o+ae*a),t.lineTo(ae*s-se*u,se*s+ae*u),t.lineTo(ae*r+se*i,ae*i-se*r),t.lineTo(ae*o+se*a,ae*a-se*o),t.lineTo(ae*s+se*u,ae*u-se*s),t.closePath()}},he=[Xt,Wt,Jt,re,ne,oe,ce];N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:F(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:F(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},V.prototype={areaStart:z,areaEnd:z,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:F(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:F(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Y.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var fe=function t(e){function n(t){return 1===e?new N(t):new Y(t,e)}return n.beta=function(e){return t(+e)},n}(.85);W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:X(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:X(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var pe=function t(e){function n(t){return new W(t,e)}return n.tension=function(e){return t(+e)},n}(0);Z.prototype={areaStart:z,areaEnd:z,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:X(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var de=function t(e){function n(t){return new Z(t,e)}return n.tension=function(e){return t(+e)},n}(0);K.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:X(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ve=function t(e){function n(t){return new K(t,e)}return n.tension=function(e){return t(+e)},n}(0);Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:J(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ge=function t(e){function n(t){return e?new Q(t,e):new W(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);$.prototype={areaStart:z,areaEnd:z,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:J(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var me=function t(e){function n(t){return e?new $(t,e):new Z(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:J(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ye=function t(e){function n(t){return e?new tt(t,e):new K(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);et.prototype={areaStart:z,areaEnd:z,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},st.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:at(this,this._t0,ot(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,at(this,ot(this,n=it(this,t,e)),n);break;default:at(this,this._t0,n=it(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ut.prototype=Object.create(st.prototype)).point=function(t,e){st.prototype.point.call(this,e,t)},lt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=pt(t),i=pt(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},t.arc=f,t.area=y,t.areaRadial=T,t.curveBasis=U,t.curveBasisClosed=G,t.curveBasisOpen=H,t.curveBundle=fe,t.curveCardinal=pe,t.curveCardinalClosed=de,t.curveCardinalOpen=ve,t.curveCatmullRom=ge,t.curveCatmullRomClosed=me,t.curveCatmullRomOpen=ye,t.curveLinear=d,t.curveLinearClosed=nt,t.curveMonotoneX=ct,t.curveMonotoneY=ht,t.curveNatural=dt,t.curveStep=gt,t.curveStepAfter=yt,t.curveStepBefore=mt,t.line=m,t.lineRadial=M,t.linkHorizontal=L,t.linkRadial=R,t.linkVertical=D,t.pie=x,t.pointRadial=C,t.radialArea=T,t.radialLine=M,t.stack=wt,t.stackOffsetDiverging=Et,t.stackOffsetExpand=St,t.stackOffsetNone=_t,t.stackOffsetSilhouette=Mt,t.stackOffsetWiggle=Tt,t.stackOrderAppearance=Ct,t.stackOrderAscending=Pt,t.stackOrderDescending=It,t.stackOrderInsideOut=Ot,t.stackOrderNone=bt,t.stackOrderReverse=jt,t.symbol=B,t.symbolCircle=Xt,t.symbolCross=Wt,t.symbolDiamond=Jt,t.symbolSquare=re,t.symbolStar=ne,t.symbolTriangle=oe,t.symbolWye=ce,t.symbols=he,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t){return function(){return t}}function n(t){return t[0]}function r(t){return t[1]}function i(){this._=null}function o(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function a(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function s(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function u(t){for(;t.L;)t=t.L;return t}function l(t,e,n,r){var i=[null,null],o=F.push(i)-1;return i.left=t,i.right=e,n&&h(i,t,e,n),r&&h(i,e,t,r),B[t.index].halfedges.push(o),B[e.index].halfedges.push(o),i}function c(t,e,n){var r=[e,n];return r.left=t,r}function h(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function f(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],l=a[1],c=s[0],h=s[1],f=0,p=1,d=c-u,v=h-l;if(o=e-u,d||!(o>0)){if(o/=d,d<0){if(o<f)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>f&&(f=o)}else if(d>0){if(o<f)return;o<p&&(p=o)}if(o=n-l,v||!(o>0)){if(o/=v,v<0){if(o<f)return;o<p&&(p=o)}else if(v>0){if(o>p)return;o>f&&(f=o)}if(o=i-l,v||!(o<0)){if(o/=v,v<0){if(o>p)return;o>f&&(f=o)}else if(v>0){if(o<f)return;o<p&&(p=o)}return!(f>0||p<1)||(f>0&&(t[0]=[u+f*d,l+f*v]),p<1&&(t[1]=[u+p*d,l+p*v]),!0)}}}}}function p(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],v=(h+p)/2,g=(f+d)/2;if(d===f){if(v<e||v>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[v,n];o=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];o=[v,n]}}else if(a=(h-p)/(d-f),s=g-a*v,a<-1||a>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function d(t,e,n,r){for(var i,o=F.length;o--;)p(i=F[o],t,e,n,r)&&f(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>V||Math.abs(i[0][1]-i[1][1])>V)||delete F[o]}function v(t){return B[t.index]={site:t,halfedges:[]}}function g(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function m(t,e){return e[+(e.left!==t.site)]}function y(t,e){return e[+(e.left===t.site)]}function _(){for(var t,e,n,r,i=0,o=B.length;i<o;++i)if((t=B[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=g(t,F[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}function b(t,e,n,r){var i,o,a,s,u,l,h,f,p,d,v,g,_=B.length,b=!0;for(i=0;i<_;++i)if(o=B[i]){for(a=o.site,u=o.halfedges,s=u.length;s--;)F[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=y(o,F[u[s]]),v=d[0],g=d[1],h=m(o,F[u[++s%l]]),f=h[0],p=h[1],(Math.abs(v-f)>V||Math.abs(g-p)>V)&&(u.splice(s,0,F.push(c(a,d,Math.abs(v-t)<V&&r-g>V?[t,Math.abs(f-t)<V?p:r]:Math.abs(g-r)<V&&n-v>V?[Math.abs(p-r)<V?f:n,r]:Math.abs(v-n)<V&&g-e>V?[n,Math.abs(f-n)<V?p:e]:Math.abs(g-e)<V&&v-t>V?[Math.abs(p-e)<V?f:t,e]:null))-1),++l);l&&(b=!1)}if(b){var x,w,S,E=1/0;for(i=0,b=null;i<_;++i)(o=B[i])&&(a=o.site,x=a[0]-t,w=a[1]-e,(S=x*x+w*w)<E&&(E=S,b=o));if(b){var M=[t,e],T=[t,r],C=[n,r],A=[n,e];b.halfedges.push(F.push(c(a=b.site,M,T))-1,F.push(c(a,T,C))-1,F.push(c(a,C,A))-1,F.push(c(a,A,M))-1)}}for(i=0;i<_;++i)(o=B[i])&&(o.halfedges.length||delete B[i])}function x(){o(this),this.x=this.y=this.arc=this.site=this.cy=null}function w(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,h=o[1]-s,f=2*(u*h-l*c);if(!(f>=-G)){var p=u*u+l*l,d=c*c+h*h,v=(h*p-l*d)/f,g=(u*d-c*p)/f,m=N.pop()||new x;m.arc=t,m.site=i,m.x=v+a,m.y=(m.cy=g+s)+Math.sqrt(v*v+g*g),t.circle=m;for(var y=null,_=z._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}z.insert(y,m),y||(D=m)}}}}function S(t){var e=t.circle;e&&(e.P||(D=e.N),z.remove(e),N.push(e),o(e),t.circle=null)}function E(){o(this),this.edge=this.site=this.circle=null}function M(t){var e=U.pop()||new E;return e.site=t,e}function T(t){S(t),R.remove(t),U.push(t),o(t)}function C(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];T(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<V&&Math.abs(r-u.circle.cy)<V;)o=u.P,s.unshift(u),T(u),u=o;s.unshift(u),S(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<V&&Math.abs(r-c.circle.cy)<V;)a=c.N,s.push(c),T(c),c=a;s.push(c),S(c);var f,p=s.length;for(f=1;f<p;++f)c=s[f],u=s[f-1],h(c.edge,u.site,c.site,i);u=s[0],c=s[p-1],c.edge=l(u.site,c.site,null,i),w(u),w(c)}function A(t){for(var e,n,r,i,o=t[0],a=t[1],s=R._;s;)if((r=P(s,a)-o)>V)s=s.L;else{if(!((i=o-k(s,a))>V)){r>-V?(e=s.P,n=s):i>-V?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}v(t);var u=M(t);if(R.insert(e,u),e||n){if(e===n)return S(e),n=M(e.site),R.insert(u,n),u.edge=n.edge=l(e.site,u.site),w(e),void w(n);if(!n)return void(u.edge=l(e.site,u.site));S(e),S(n);var c=e.site,f=c[0],p=c[1],d=t[0]-f,g=t[1]-p,m=n.site,y=m[0]-f,_=m[1]-p,b=2*(d*_-g*y),x=d*d+g*g,E=y*y+_*_,T=[(_*x-g*E)/b+f,(d*E-y*x)/b+p];h(n.edge,c,m,T),u.edge=l(c,t,null,T),n.edge=l(t,m,null,T),w(e),w(n)}}function P(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var s=n[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function k(t,e){var n=t.N;if(n)return P(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function I(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function O(t,e){return e[1]-t[1]||e[0]-t[0]}function j(t,e){var n,r,o,a=t.sort(O).pop();for(F=[],B=new Array(t.length),R=new i,z=new i;;)if(o=D,a&&(!o||a[1]<o.y||a[1]===o.y&&a[0]<o.x))a[0]===n&&a[1]===r||(A(a),n=a[0],r=a[1]),a=t.pop();else{if(!o)break;C(o.arc)}if(_(),e){var s=+e[0][0],u=+e[0][1],l=+e[1][0],c=+e[1][1];d(s,u,l,c),b(s,u,l,c)}this.edges=F,this.cells=B,R=z=F=B=null}function L(){function t(t){return new j(t.map(function(e,n){var r=[Math.round(i(e,n,t)/V)*V,Math.round(o(e,n,t)/V)*V];return r.index=n,r.data=e,r}),a)}var i=n,o=r,a=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(i="function"==typeof n?n:e(+n),t):i},t.y=function(n){return arguments.length?(o="function"==typeof n?n:e(+n),t):o},t.extent=function(e){return arguments.length?(a=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},t.size=function(e){return arguments.length?(a=null==e?null:[[0,0],[+e[0],+e[1]]],t):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]},t}i.prototype={constructor:i,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=u(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(a(this,n),t=n,n=t.U),n.C=!1,r.C=!0,s(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(s(this,n),t=n,n=t.U),n.C=!1,r.C=!0,a(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,l=t.R;if(n=o?l?u(l):o:l,i?i.L===t?i.L=n:i.R=n:this._=n,o&&l?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==l?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=l,l.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,a(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,s(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,a(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,s(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,a(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,s(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var D,R,B,z,F,N=[],U=[],V=1e-6,G=1e-12;j.prototype={constructor:j,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return m(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,l=e[i[o-1]],c=l.left===s?l.right:l.left;++u<o;)a=c,l=e[i[u]],c=l.left===s?l.right:l.left,a&&c&&r<a.index&&r<c.index&&I(s,a,c)<0&&t.push([s.data,a.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],h=u*u+l*l;h<c&&(c=h,a=s.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}},t.voronoi=L,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_dagre@0.8.5@dagre/index.js":function(t,e,n){t.exports={graphlib:n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js"),layout:n("./node_modules/_dagre@0.8.5@dagre/lib/layout.js"),debug:n("./node_modules/_dagre@0.8.5@dagre/lib/debug.js"),util:{time:n("./node_modules/_dagre@0.8.5@dagre/lib/util.js").time,notime:n("./node_modules/_dagre@0.8.5@dagre/lib/util.js").notime},version:n("./node_modules/_dagre@0.8.5@dagre/lib/version.js")}},"./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js":function(t,e,n){"use strict";function r(t){function e(t){return function(e){return t.edge(e).weight}}var n="greedy"===t.graph().acyclicer?s(t,e(t)):i(t);a.forEach(n,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,a.uniqueId("rev"))})}function i(t){function e(o){a.has(i,o)||(i[o]=!0,r[o]=!0,a.forEach(t.outEdges(o),function(t){a.has(r,t.w)?n.push(t):e(t.w)}),delete r[o])}var n=[],r={},i={};return a.forEach(t.nodes(),e),n}function o(t){a.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var a=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),s=n("./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js");t.exports={run:r,undo:o}},"./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js":function(t,e,n){function r(t){function e(n){var r=t.children(n),a=t.node(n);if(r.length&&o.forEach(r,e),o.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)i(t,"borderLeft","_bl",n,a,s),i(t,"borderRight","_br",n,a,s)}}o.forEach(t.children(),e)}function i(t,e,n,r,i,o){var s={width:0,height:0,rank:o,borderType:e},u=i[e][o-1],l=a.addDummyNode(t,"border",s,n);i[e][o]=l,t.setParent(l,r),u&&t.setEdge(u,l,{weight:1})}var o=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),a=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js":function(t,e,n){"use strict";function r(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)}function i(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||s(t),"lr"!==e&&"rl"!==e||(l(t),o(t))}function o(t){h.forEach(t.nodes(),function(e){a(t.node(e))}),h.forEach(t.edges(),function(e){a(t.edge(e))})}function a(t){var e=t.width;t.width=t.height,t.height=e}function s(t){h.forEach(t.nodes(),function(e){u(t.node(e))}),h.forEach(t.edges(),function(e){var n=t.edge(e);h.forEach(n.points,u),h.has(n,"y")&&u(n)})}function u(t){t.y=-t.y}function l(t){h.forEach(t.nodes(),function(e){c(t.node(e))}),h.forEach(t.edges(),function(e){var n=t.edge(e);h.forEach(n.points,c),h.has(n,"x")&&c(n)})}function c(t){var e=t.x;t.x=t.y,t.y=e}var h=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports={adjust:r,undo:i}},"./node_modules/_dagre@0.8.5@dagre/lib/data/list.js":function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,i)),n=n._prev;return"["+t.join(", ")+"]"}},"./node_modules/_dagre@0.8.5@dagre/lib/debug.js":function(t,e,n){function r(t){var e=o.buildLayerMatrix(t),n=new a({compound:!0,multigraph:!0}).setGraph({});return i.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),i.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),i.forEach(e,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),i.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}var i=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),o=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),a=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;t.exports={debugOrdering:r}},"./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js":function(t,e,n){var r;try{r=n("./node_modules/_graphlib@2.1.8@graphlib/index.js")}catch(t){}r||(r=window.graphlib),t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js":function(t,e,n){function r(t,e){if(t.nodeCount()<=1)return[];var n=a(t,e||h),r=i(n.graph,n.buckets,n.zeroIdx);return u.flatten(u.map(r,function(e){return t.outEdges(e.v,e.w)}),!0)}function i(t,e,n){for(var r,i=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)o(t,e,n,r);for(;r=a.dequeue();)o(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(o(t,e,n,r,!0));break}}return i}function o(t,e,n,r,i){var o=i?[]:void 0;return u.forEach(t.inEdges(r.v),function(r){var a=t.edge(r),u=t.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,s(e,n,u)}),u.forEach(t.outEdges(r.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,s(e,n,a)}),t.removeNode(r.v),o}function a(t,e){var n=new l,r=0,i=0;u.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),u.forEach(t.edges(),function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)});var o=u.range(i+r+3).map(function(){return new c}),a=r+1;return u.forEach(n.nodes(),function(t){s(o,a,n.node(t))}),{graph:n,buckets:o,zeroIdx:a}}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var u=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,c=n("./node_modules/_dagre@0.8.5@dagre/lib/data/list.js");t.exports=r;var h=u.constant(1)},"./node_modules/_dagre@0.8.5@dagre/lib/layout.js":function(t,e,n){"use strict";function r(t,e){var n=e&&e.debugTiming?j.time:j.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return a(t)});n("  runLayout",function(){i(e,n)}),n("  updateInputGraph",function(){o(t,e)})})}function i(t,e){e("    makeSpaceForEdgeLabels",function(){s(t)}),e("    removeSelfEdges",function(){g(t)}),e("    acyclic",function(){w.run(t)}),e("    nestingGraph.run",function(){A.run(t)}),e("    rank",function(){E(j.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){u(t)}),e("    removeEmptyRanks",function(){C(t)}),e("    nestingGraph.cleanup",function(){A.cleanup(t)}),e("    normalizeRanks",function(){M(t)}),e("    assignRankMinMax",function(){l(t)}),e("    removeEdgeLabelProxies",function(){c(t)}),e("    normalize.run",function(){S.run(t)}),e("    parentDummyChains",function(){T(t)}),e("    addBorderSegments",function(){P(t)}),e("    order",function(){I(t)}),e("    insertSelfEdges",function(){m(t)}),e("    adjustCoordinateSystem",function(){k.adjust(t)}),e("    position",function(){O(t)}),e("    positionSelfEdges",function(){y(t)}),e("    removeBorderNodes",function(){v(t)}),e("    normalize.undo",function(){S.undo(t)}),e("    fixupEdgeLabelCoords",function(){p(t)}),e("    undoCoordinateSystem",function(){k.undo(t)}),e("    translateGraph",function(){h(t)}),e("    assignNodeIntersects",function(){f(t)}),e("    reversePoints",function(){d(t)}),e("    acyclic.undo",function(){w.undo(t)})}function o(t,e){x.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),x.forEach(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,x.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function a(t){var e=new L({multigraph:!0,compound:!0}),n=b(t.graph());return e.setGraph(x.merge({},R,_(n,D),x.pick(n,B))),x.forEach(t.nodes(),function(n){var r=b(t.node(n));e.setNode(n,x.defaults(_(r,z),F)),e.setParent(n,t.parent(n))}),x.forEach(t.edges(),function(n){var r=b(t.edge(n));e.setEdge(n,x.merge({},U,_(r,N),x.pick(r,V)))}),e}function s(t){var e=t.graph();e.ranksep/=2,x.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function u(t){x.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};j.addDummyNode(t,"edge-proxy",o,"_ep")}})}function l(t){var e=0;x.forEach(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=x.max(e,r.maxRank))}),t.graph().maxRank=e}function c(t){x.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function h(t){function e(t){var e=t.x,a=t.y,s=t.width,u=t.height;n=Math.min(n,e-s/2),r=Math.max(r,e+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;x.forEach(t.nodes(),function(n){e(t.node(n))}),x.forEach(t.edges(),function(n){var r=t.edge(n);x.has(r,"x")&&e(r)}),n-=s,i-=u,x.forEach(t.nodes(),function(e){var r=t.node(e);r.x-=n,r.y-=i}),x.forEach(t.edges(),function(e){var r=t.edge(e);x.forEach(r.points,function(t){t.x-=n,t.y-=i}),x.has(r,"x")&&(r.x-=n),x.has(r,"y")&&(r.y-=i)}),a.width=r-n+s,a.height=o-i+u}function f(t){x.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(j.intersectRect(o,n)),i.points.push(j.intersectRect(a,r))})}function p(t){x.forEach(t.edges(),function(e){var n=t.edge(e);if(x.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function d(t){x.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function v(t){x.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(x.last(n.borderLeft)),a=t.node(x.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),x.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function g(t){x.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function m(t){var e=j.buildLayerMatrix(t);x.forEach(e,function(e){var n=0;x.forEach(e,function(e,r){var i=t.node(e);i.order=r+n,x.forEach(i.selfEdges,function(e){j.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}function y(t){x.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function _(t,e){return x.mapValues(x.pick(t,e),Number)}function b(t){var e={};return x.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}var x=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),w=n("./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js"),S=n("./node_modules/_dagre@0.8.5@dagre/lib/normalize.js"),E=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js"),M=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js").normalizeRanks,T=n("./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js"),C=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js").removeEmptyRanks,A=n("./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js"),P=n("./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js"),k=n("./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js"),I=n("./node_modules/_dagre@0.8.5@dagre/lib/order/index.js"),O=n("./node_modules/_dagre@0.8.5@dagre/lib/position/index.js"),j=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),L=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;t.exports=r;var D=["nodesep","edgesep","ranksep","marginx","marginy"],R={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},B=["acyclicer","ranker","rankdir","align"],z=["width","height"],F={width:0,height:0},N=["minlen","weight","width","height","labeloffset"],U={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},V=["labelpos"]},"./node_modules/_dagre@0.8.5@dagre/lib/lodash.js":function(t,e,n){var r;try{r={cloneDeep:n("./node_modules/_lodash@4.17.15@lodash/cloneDeep.js"),constant:n("./node_modules/_lodash@4.17.15@lodash/constant.js"),defaults:n("./node_modules/_lodash@4.17.15@lodash/defaults.js"),each:n("./node_modules/_lodash@4.17.15@lodash/each.js"),filter:n("./node_modules/_lodash@4.17.15@lodash/filter.js"),find:n("./node_modules/_lodash@4.17.15@lodash/find.js"),flatten:n("./node_modules/_lodash@4.17.15@lodash/flatten.js"),forEach:n("./node_modules/_lodash@4.17.15@lodash/forEach.js"),forIn:n("./node_modules/_lodash@4.17.15@lodash/forIn.js"),has:n("./node_modules/_lodash@4.17.15@lodash/has.js"),isUndefined:n("./node_modules/_lodash@4.17.15@lodash/isUndefined.js"),last:n("./node_modules/_lodash@4.17.15@lodash/last.js"),map:n("./node_modules/_lodash@4.17.15@lodash/map.js"),mapValues:n("./node_modules/_lodash@4.17.15@lodash/mapValues.js"),max:n("./node_modules/_lodash@4.17.15@lodash/max.js"),merge:n("./node_modules/_lodash@4.17.15@lodash/merge.js"),min:n("./node_modules/_lodash@4.17.15@lodash/min.js"),minBy:n("./node_modules/_lodash@4.17.15@lodash/minBy.js"),now:n("./node_modules/_lodash@4.17.15@lodash/now.js"),pick:n("./node_modules/_lodash@4.17.15@lodash/pick.js"),range:n("./node_modules/_lodash@4.17.15@lodash/range.js"),reduce:n("./node_modules/_lodash@4.17.15@lodash/reduce.js"),sortBy:n("./node_modules/_lodash@4.17.15@lodash/sortBy.js"),uniqueId:n("./node_modules/_lodash@4.17.15@lodash/uniqueId.js"),values:n("./node_modules/_lodash@4.17.15@lodash/values.js"),zipObject:n("./node_modules/_lodash@4.17.15@lodash/zipObject.js")}}catch(t){}r||(r=window._),t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js":function(t,e,n){function r(t){var e=l.addDummyNode(t,"root",{},"_root"),n=o(t),r=u.max(u.values(n))-1,s=2*r+1;t.graph().nestingRoot=e,u.forEach(t.edges(),function(e){t.edge(e).minlen*=s});var c=a(t)+1;u.forEach(t.children(),function(o){i(t,e,s,c,r,n,o)}),t.graph().nodeRankFactor=s}function i(t,e,n,r,o,a,s){var c=t.children(s);if(!c.length)return void(s!==e&&t.setEdge(e,s,{weight:0,minlen:n}));var h=l.addBorderNode(t,"_bt"),f=l.addBorderNode(t,"_bb"),p=t.node(s);t.setParent(h,s),p.borderTop=h,t.setParent(f,s),p.borderBottom=f,u.forEach(c,function(u){i(t,e,n,r,o,a,u);var l=t.node(u),c=l.borderTop?l.borderTop:u,p=l.borderBottom?l.borderBottom:u,d=l.borderTop?r:2*r,v=c!==p?1:o-a[s]+1;t.setEdge(h,c,{weight:d,minlen:v,nestingEdge:!0}),t.setEdge(p,f,{weight:d,minlen:v,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,h,{weight:0,minlen:o+a[s]})}function o(t){function e(r,i){var o=t.children(r);o&&o.length&&u.forEach(o,function(t){e(t,i+1)}),n[r]=i}var n={};return u.forEach(t.children(),function(t){e(t,1)}),n}function a(t){return u.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function s(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,u.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}var u=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js");t.exports={run:r,cleanup:s}},"./node_modules/_dagre@0.8.5@dagre/lib/normalize.js":function(t,e,n){"use strict";function r(t){t.graph().dummyChains=[],a.forEach(t.edges(),function(e){i(t,e)})}function i(t,e){var n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,a=e.name,u=t.edge(e),l=u.labelRank;if(o!==r+1){t.removeEdge(e);var c,h,f;for(f=0,++r;r<o;++f,++r)u.points=[],h={width:0,height:0,edgeLabel:u,edgeObj:e,rank:r},c=s.addDummyNode(t,"edge",h,"_d"),r===l&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),t.setEdge(n,c,{weight:u.weight},a),0===f&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,i,{weight:u.weight},a)}}function o(t){a.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}var a=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),s=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js");t.exports={run:r,undo:o}},"./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js":function(t,e,n){function r(t,e,n){var r,o={};i.forEach(n,function(n){for(var i,a,s=t.parent(n);s;){if(i=t.parent(s),i?(a=o[i],o[i]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=i}})}var i=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js":function(t,e,n){function r(t,e){return i.map(e,function(e){var n=t.inEdges(e);if(n.length){var r=i.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})}var i=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js":function(t,e,n){function r(t,e,n){var r=i(t),s=new a({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(e){return t.node(e)});return o.forEach(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||r),o.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,r=s.edge(n,i),a=o.isUndefined(r)?0:r.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),o.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}function i(t){for(var e;t.hasNode(e=o.uniqueId("_root")););return e}var o=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),a=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js":function(t,e,n){"use strict";function r(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}function i(t,e,n){for(var r=o.zipObject(n,o.map(n,function(t,e){return e})),i=o.flatten(o.map(e,function(e){return o.sortBy(o.map(t.outEdges(e),function(e){return{pos:r[e.w],weight:t.edge(e).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=o.map(new Array(s),function(){return 0}),l=0;return o.forEach(i.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),e=e-1>>1,u[e]+=t.weight;l+=t.weight*n})),l}var o=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/index.js":function(t,e,n){"use strict";function r(t){var e=d.maxRank(t),n=i(t,s.range(1,e+1),"inEdges"),r=i(t,s.range(e-1,-1,-1),"outEdges"),c=u(t);a(t,c);for(var h,f=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){o(p%2?n:r,p%4>=2),c=d.buildLayerMatrix(t);var g=l(t,c);g<f&&(v=0,h=s.cloneDeep(c),f=g)}a(t,h)}function i(t,e,n){return s.map(e,function(e){return h(t,e,n)})}function o(t,e){var n=new p;s.forEach(t,function(t){var r=t.graph().root,i=c(t,r,n,e);s.forEach(i.vs,function(e,n){t.node(e).order=n}),f(t,n,i.vs)})}function a(t,e){s.forEach(e,function(e){s.forEach(e,function(e,n){t.node(e).order=n})})}var s=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=n("./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js"),l=n("./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js"),c=n("./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js"),h=n("./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js"),f=n("./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js"),p=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,d=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js":function(t,e,n){"use strict";function r(t){function e(r){if(!i.has(n,r)){n[r]=!0;var o=t.node(r);a[o.rank].push(r),i.forEach(t.successors(r),e)}}var n={},r=i.filter(t.nodes(),function(e){return!t.children(e).length}),o=i.max(i.map(r,function(e){return t.node(e).rank})),a=i.map(i.range(o+1),function(){return[]}),s=i.sortBy(r,function(e){return t.node(e).rank});return i.forEach(s,e),a}var i=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js":function(t,e,n){"use strict";function r(t,e){var n={};return a.forEach(t,function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};a.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)}),a.forEach(e.edges(),function(t){var e=n[t.v],r=n[t.w];a.isUndefined(e)||a.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))}),i(a.filter(n,function(t){return!t.indegree}))}function i(t){function e(t){return function(e){e.merged||(a.isUndefined(e.barycenter)||a.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&o(t,e)}}function n(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(var r=[];t.length;){var i=t.pop();r.push(i),a.forEach(i.in.reverse(),e(i)),a.forEach(i.out,n(i))}return a.map(a.filter(r,function(t){return!t.merged}),function(t){return a.pick(t,["vs","i","barycenter","weight"])})}function o(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var a=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js":function(t,e,n){function r(t,e,n,c){var h=t.children(e),f=t.node(e),p=f?f.borderLeft:void 0,d=f?f.borderRight:void 0,v={};p&&(h=a.filter(h,function(t){return t!==p&&t!==d}));var g=s(t,h);a.forEach(g,function(e){if(t.children(e.v).length){var i=r(t,e.v,n,c);v[e.v]=i,a.has(i,"barycenter")&&o(e,i)}});var m=u(g,n);i(m,v);var y=l(m,c);if(p&&(y.vs=a.flatten([p,y.vs,d],!0),t.predecessors(p).length)){var _=t.node(t.predecessors(p)[0]),b=t.node(t.predecessors(d)[0]);a.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+_.order+b.order)/(y.weight+2),y.weight+=2}return y}function i(t,e){a.forEach(t,function(t){t.vs=a.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function o(t,e){a.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var a=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),s=n("./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js"),u=n("./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js"),l=n("./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js":function(t,e,n){function r(t,e){var n=s.partition(t,function(t){return a.has(t,"barycenter")}),r=n.lhs,u=a.sortBy(n.rhs,function(t){return-t.i}),l=[],c=0,h=0,f=0;r.sort(o(!!e)),f=i(l,u,f),a.forEach(r,function(t){f+=t.vs.length,l.push(t.vs),c+=t.barycenter*t.weight,h+=t.weight,f=i(l,u,f)});var p={vs:a.flatten(l,!0)};return h&&(p.barycenter=c/h,p.weight=h),p}function i(t,e,n){for(var r;e.length&&(r=a.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function o(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var a=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),s=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js":function(t,e,n){function r(t){var e=o(t);a.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),o=r.edgeObj,a=i(t,e,o.v,o.w),s=a.path,u=a.lca,l=0,c=s[l],h=!0;n!==o.w;){if(r=t.node(n),h){for(;(c=s[l])!==u&&t.node(c).maxRank<r.rank;)l++;c===u&&(h=!1)}if(!h){for(;l<s.length-1&&t.node(c=s[l+1]).minRank<=r.rank;)l++;c=s[l]}t.setParent(n,c),n=t.successors(n)[0]}})}function i(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||l>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}function o(t){function e(i){var o=r;a.forEach(t.children(i),e),n[i]={low:o,lim:r++}}var n={},r=0;return a.forEach(t.children(),e),n}var a=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js":function(t,e,n){"use strict";function r(t,e){function n(e,n){var i=0,s=0,u=e.length,l=m.last(n);return m.forEach(n,function(e,c){var h=o(t,e),f=h?t.node(h).order:u;(h||e===l)&&(m.forEach(n.slice(s,c+1),function(e){m.forEach(t.predecessors(e),function(n){var o=t.node(n),s=o.order;!(s<i||f<s)||o.dummy&&t.node(e).dummy||a(r,n,e)})}),s=c+1,i=f)}),n}var r={};return m.reduce(e,n),r}function i(t,e){function n(e,n,r,o,s){var u;m.forEach(m.range(n,r),function(n){u=e[n],t.node(u).dummy&&m.forEach(t.predecessors(u),function(e){var n=t.node(e);n.dummy&&(n.order<o||n.order>s)&&a(i,e,u)})})}function r(e,r){var i,o=-1,a=0;return m.forEach(r,function(s,u){if("border"===t.node(s).dummy){var l=t.predecessors(s);l.length&&(i=t.node(l[0]).order,n(r,a,u,o,i),a=u,o=i)}n(r,a,r.length,i,e.length)}),r}var i={};return m.reduce(e,r),i}function o(t,e){if(t.node(e).dummy)return m.find(t.predecessors(e),function(e){return t.node(e).dummy})}function a(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function s(t,e,n){if(e>n){var r=e;e=n,n=r}return m.has(t[e],n)}function u(t,e,n,r){var i={},o={},a={};return m.forEach(e,function(t){m.forEach(t,function(t,e){i[t]=t,o[t]=t,a[t]=e})}),m.forEach(e,function(t){var e=-1;m.forEach(t,function(t){var u=r(t);if(u.length){u=m.sortBy(u,function(t){return a[t]});for(var l=(u.length-1)/2,c=Math.floor(l),h=Math.ceil(l);c<=h;++c){var f=u[c];o[t]===t&&e<a[f]&&!s(n,t,f)&&(o[f]=t,o[t]=i[t]=i[f],e=a[f])}}})}),{root:i,align:o}}function l(t,e,n,r,i){function o(t,e){for(var n=l.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}function a(t){u[t]=l.inEdges(t).reduce(function(t,e){return Math.max(t,u[e.v]+l.edge(e))},0)}function s(e){var n=l.outEdges(e).reduce(function(t,e){return Math.min(t,u[e.w]-l.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==h&&(u[e]=Math.max(u[e],n))}var u={},l=c(t,e,n,i),h=i?"borderLeft":"borderRight";return o(a,l.predecessors.bind(l)),o(s,l.successors.bind(l)),m.forEach(r,function(t){u[t]=u[n[t]]}),u}function c(t,e,n,r){var i=new y,o=t.graph(),a=v(o.nodesep,o.edgesep,r);return m.forEach(e,function(e){var r;m.forEach(e,function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),u||0))}r=e})}),i}function h(t,e){return m.minBy(m.values(e),function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return m.forIn(e,function(e,i){var o=g(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)}),n-r})}function f(t,e){var n=m.values(e),r=m.min(n),i=m.max(n);m.forEach(["u","d"],function(n){m.forEach(["l","r"],function(o){var a,s=n+o,u=t[s];if(u!==e){var l=m.values(u);a="l"===o?r-m.min(l):i-m.max(l),a&&(t[s]=m.mapValues(u,function(t){return t+a}))}})})}function p(t,e){return m.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=m.sortBy(m.map(t,r));return(i[1]+i[2])/2})}function d(t){var e,n=_.buildLayerMatrix(t),o=m.merge(r(t,n),i(t,n)),a={};m.forEach(["u","d"],function(r){e="u"===r?n:m.values(n).reverse(),m.forEach(["l","r"],function(n){"r"===n&&(e=m.map(e,function(t){return m.values(t).reverse()}));var i=("u"===r?t.predecessors:t.successors).bind(t),s=u(t,e,o,i),c=l(t,e,s.root,s.align,"r"===n);"r"===n&&(c=m.mapValues(c,function(t){return-t})),a[r+n]=c})});var s=h(t,a);return f(a,s),p(a,t.graph().align)}function v(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),l=0;if(l+=s.width/2,m.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=n?a:-a),a=0,l+=(s.dummy?e:t)/2,l+=(u.dummy?e:t)/2,l+=u.width/2,m.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=n?a:-a),a=0,l}}function g(t,e){return t.node(e).width}var m=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),y=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,_=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js");t.exports={positionX:d,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:h,balance:p}},"./node_modules/_dagre@0.8.5@dagre/lib/position/index.js":function(t,e,n){"use strict";function r(t){t=a.asNonCompoundGraph(t),i(t),o.forEach(s(t),function(e,n){t.node(n).x=e})}function i(t){var e=a.buildLayerMatrix(t),n=t.graph().ranksep,r=0;o.forEach(e,function(e){var i=o.max(o.map(e,function(e){return t.node(e).height}));o.forEach(e,function(e){t.node(e).y=r+i/2}),r+=i+n})}var o=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),a=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=n("./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js").positionX;t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js":function(t,e,n){"use strict";function r(t){var e=new u({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var s,c;i(e,t)<r;)s=o(e,t),c=e.hasNode(s.v)?l(t,s):-l(t,s),a(e,t,c);return e}function i(t,e){function n(r){s.forEach(e.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||l(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return s.forEach(t.nodes(),n),t.nodeCount()}function o(t,e){return s.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return l(e,n)})}function a(t,e,n){s.forEach(t.nodes(),function(t){e.node(t).rank+=n})}var s=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,l=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack;t.exports=r},"./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js":function(t,e,n){"use strict";function r(t){switch(t.graph().ranker){case"network-simplex":o(t);break;case"tight-tree":i(t);break;case"longest-path":c(t);break;default:o(t)}}function i(t){s(t),u(t)}function o(t){l(t)}var a=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js"),s=a.longestPath,u=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),l=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js");t.exports=r;var c=s},"./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js":function(t,e,n){"use strict";function r(t){t=x(t),y(t);var e=g(t);s(e),i(e,t);for(var n,r;n=l(e);)r=c(e,t,n),h(e,t,n,r)}function i(t,e){var n=b(t,t.nodes());n=n.slice(0,n.length-1),v.forEach(n,function(n){o(t,e,n)})}function o(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=a(t,e,n)}function a(t,e,n){var r=t.node(n),i=r.parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,v.forEach(e.nodeEdges(n),function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==i){var l=a===o,c=e.edge(r).weight;if(s+=l?c:-c,p(t,n,u)){var h=t.edge(n,u).cutvalue;s+=l?-h:h}}}),s}function s(t,e){arguments.length<2&&(e=t.nodes()[0]),u(t,{},1,e)}function u(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,v.forEach(t.neighbors(r),function(i){v.has(e,i)||(n=u(t,e,n,i,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function l(t){return v.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function c(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=v.filter(e.edges(),function(e){return u===d(t,t.node(e.v),s)&&u!==d(t,t.node(e.w),s)});return v.minBy(l,function(t){return m(e,t)})}function h(t,e,n,r){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(r.v,r.w,{}),s(t),i(t,e),f(t,e)}function f(t,e){var n=v.find(t.nodes(),function(t){return!e.node(t).parent}),r=_(t,n);r=r.slice(1),v.forEach(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}function p(t,e,n){return t.hasEdge(e,n)}function d(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var v=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),g=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),m=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack,y=n("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").longestPath,_=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.preorder,b=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.postorder,x=n("./node_modules/_dagre@0.8.5@dagre/lib/util.js").simplify;t.exports=r,r.initLowLimValues=s,r.initCutValues=i,r.calcCutValue=a,r.leaveEdge=l,r.enterEdge=c,r.exchangeEdges=h},"./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js":function(t,e,n){"use strict";function r(t){function e(r){var i=t.node(r);if(o.has(n,r))return i.rank;n[r]=!0;var a=o.min(o.map(t.outEdges(r),function(n){return e(n.w)-t.edge(n).minlen}));return a!==Number.POSITIVE_INFINITY&&void 0!==a&&null!==a||(a=0),i.rank=a}var n={};o.forEach(t.sources(),e)}function i(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var o=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");t.exports={longestPath:r,slack:i}},"./node_modules/_dagre@0.8.5@dagre/lib/util.js":function(t,e,n){"use strict";function r(t,e,n,r){var i;do{i=m.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function i(t){var e=(new y).setGraph(t.graph());return m.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),m.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function o(t){var e=new y({multigraph:t.isMultigraph()}).setGraph(t.graph());return m.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),m.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function a(t){var e=m.map(t.nodes(),function(e){var n={};return m.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return m.zipObject(t.nodes(),e)}function s(t){var e=m.map(t.nodes(),function(e){var n={};return m.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return m.zipObject(t.nodes(),e)}function u(t,e){var n=t.x,r=t.y,i=e.x-n,o=e.y-r,a=t.width/2,s=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,l=s):(i<0&&(a=-a),u=a,l=a*o/i),{x:n+u,y:r+l}}function l(t){var e=m.map(m.range(p(t)+1),function(){return[]});return m.forEach(t.nodes(),function(n){var r=t.node(n),i=r.rank;m.isUndefined(i)||(e[i][r.order]=n)}),e}function c(t){var e=m.min(m.map(t.nodes(),function(e){return t.node(e).rank}));m.forEach(t.nodes(),function(n){var r=t.node(n);m.has(r,"rank")&&(r.rank-=e)})}function h(t){var e=m.min(m.map(t.nodes(),function(e){return t.node(e).rank})),n=[];m.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;m.forEach(n,function(e,n){m.isUndefined(e)&&n%i!=0?--r:r&&m.forEach(e,function(e){t.node(e).rank+=r})})}function f(t,e,n,i){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=i),r(t,"border",o,e)}function p(t){return m.max(m.map(t.nodes(),function(e){var n=t.node(e).rank;if(!m.isUndefined(n))return n}))}function d(t,e){var n={lhs:[],rhs:[]};return m.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function v(t,e){var n=m.now();try{return e()}finally{console.log(t+" time: "+(m.now()-n)+"ms")}}function g(t,e){return e()}var m=n("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),y=n("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;t.exports={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:u,buildLayerMatrix:l,normalizeRanks:c,removeEmptyRanks:h,addBorderNode:f,maxRank:p,partition:d,time:v,notime:g}},"./node_modules/_dagre@0.8.5@dagre/lib/version.js":function(t,e){t.exports="0.8.5"},"./node_modules/_graphlib@2.1.8@graphlib/index.js":function(t,e,n){var r=n("./node_modules/_graphlib@2.1.8@graphlib/lib/index.js");t.exports={Graph:r.Graph,json:n("./node_modules/_graphlib@2.1.8@graphlib/lib/json.js"),alg:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js"),version:r.version}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js":function(t,e,n){function r(t){function e(o){i.has(r,o)||(r[o]=!0,n.push(o),i.each(t.successors(o),e),i.each(t.predecessors(o),e))}var n,r={},o=[];return i.each(t.nodes(),function(t){n=[],e(t),n.length&&o.push(n)}),o}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js":function(t,e,n){function r(t,e,n){o.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],s={};return o.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,s,r,a)}),a}function i(t,e,n,r,a,s){o.has(r,e)||(r[e]=!0,n||s.push(e),o.each(a(e),function(e){i(t,e,n,r,a,s)}),n&&s.push(e))}var o=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js":function(t,e,n){function r(t,e,n){return o.transform(t.nodes(),function(r,o){r[o]=i(t,o,e,n)},{})}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),o=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js":function(t,e,n){function r(t,e,n,r){return i(t,String(e),n||s,r||function(e){return t.outEdges(e)})}function i(t,e,n,r){var i,o,s={},u=new a,l=function(t){var e=t.v!==i?t.v:t.w,r=s[e],a=n(t),l=o.distance+a;if(a<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+a);l<r.distance&&(r.distance=l,r.predecessor=i,u.decrease(e,l))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});u.size()>0&&(i=u.removeMin(),o=s[i],o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);return s}var o=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),a=n("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");t.exports=r;var s=o.constant(1)},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js":function(t,e,n){function r(t){return i.filter(o(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),o=n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js":function(t,e,n){function r(t,e,n){return i(t,e||a,n||function(e){return t.outEdges(e)})}function i(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}var o=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r;var a=o.constant(1)},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js":function(t,e,n){t.exports={components:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js"),dijkstra:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),dijkstraAll:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js"),findCycles:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js"),floydWarshall:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js"),isAcyclic:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js"),postorder:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js"),preorder:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js"),prim:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js"),tarjan:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js"),topsort:n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js":function(t,e,n){function r(t){try{i(t)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js":function(t,e,n){function r(t,e){return i(t,e,"post")}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js":function(t,e,n){function r(t,e){return i(t,e,"pre")}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js":function(t,e,n){function r(t,e){function n(t){var n=t.v===r?t.w:t.v,i=l.priority(n);if(void 0!==i){var o=e(t);o<i&&(u[n]=r,l.decrease(n,o))}}var r,s=new o,u={},l=new a;if(0===t.nodeCount())return s;i.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),l.decrease(t.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),i.has(u,r))s.setEdge(r,u[r]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(r).forEach(n)}return s}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),o=n("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),a=n("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js":function(t,e,n){function r(t){function e(s){var u=o[s]={onStack:!0,lowlink:n,index:n++};if(r.push(s),t.successors(s).forEach(function(t){i.has(o,t)?o[t].onStack&&(u.lowlink=Math.min(u.lowlink,o[t].index)):(e(t),u.lowlink=Math.min(u.lowlink,o[t].lowlink))}),u.lowlink===u.index){var l,c=[];do{l=r.pop(),o[l].onStack=!1,c.push(l)}while(s!==l);a.push(c)}}var n=0,r=[],o={},a=[];return t.nodes().forEach(function(t){i.has(o,t)||e(t)}),a}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js":function(t,e,n){function r(t){function e(s){if(o.has(r,s))throw new i;o.has(n,s)||(r[s]=!0,n[s]=!0,o.each(t.predecessors(s),e),delete r[s],a.push(s))}var n={},r={},a=[];if(o.each(t.sinks(),e),o.size(n)!==t.nodeCount())throw new i;return a}function i(){}var o=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r,r.CycleException=i,i.prototype=new Error},"./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js":function(t,e,n){function r(){this._arr=[],this._keyIndices={}}var i=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(t){return t.key})},r.prototype.has=function(t){return i.has(this._keyIndices,t)},r.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!i.has(n,t)){var r=this._arr,o=r.length;return n[t]=o,r.push({key:t,priority:e}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},r.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},r.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&(e=t>>1,!(n[e].priority<r));)this._swap(t,e),t=e},r.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},"./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js":function(t,e,n){"use strict";function r(t){this._isDirected=!l.has(t,"directed")||t.directed,this._isMultigraph=!!l.has(t,"multigraph")&&t.multigraph,this._isCompound=!!l.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=l.constant(void 0),this._defaultEdgeLabelFn=l.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[h]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function o(t,e){--t[e]||delete t[e]}function a(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+f+o+f+(l.isUndefined(r)?c:r)}function s(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function u(t,e){return a(t,e.v,e.w,e.name)}var l=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");t.exports=r;var c="\0",h="\0",f="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(t){return this._label=t,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(t){return l.isFunction(t)||(t=l.constant(t)),this._defaultNodeLabelFn=t,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return l.keys(this._nodes)},r.prototype.sources=function(){var t=this;return l.filter(this.nodes(),function(e){return l.isEmpty(t._in[e])})},r.prototype.sinks=function(){var t=this;return l.filter(this.nodes(),function(e){return l.isEmpty(t._out[e])})},r.prototype.setNodes=function(t,e){var n=arguments,r=this;return l.each(t,function(t){n.length>1?r.setNode(t,e):r.setNode(t)}),this},r.prototype.setNode=function(t,e){return l.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=h,this._children[t]={},this._children[h][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},r.prototype.node=function(t){return this._nodes[t]},r.prototype.hasNode=function(t){return l.has(this._nodes,t)},r.prototype.removeNode=function(t){var e=this;if(l.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],l.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),l.each(l.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],l.each(l.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},r.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(l.isUndefined(e))e=h;else{e+="";for(var n=e;!l.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},r.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},r.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==h)return e}},r.prototype.children=function(t){if(l.isUndefined(t)&&(t=h),this._isCompound){var e=this._children[t];if(e)return l.keys(e)}else{if(t===h)return this.nodes();if(this.hasNode(t))return[]}},r.prototype.predecessors=function(t){var e=this._preds[t];if(e)return l.keys(e)},r.prototype.successors=function(t){var e=this._sucs[t];if(e)return l.keys(e)},r.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return l.union(e,this.successors(t))},r.prototype.isLeaf=function(t){var e;return e=this.isDirected()?this.successors(t):this.neighbors(t),0===e.length},r.prototype.filterNodes=function(t){function e(t){var o=r.parent(t);return void 0===o||n.hasNode(o)?(i[t]=o,o):o in i?i[o]:e(o)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;l.each(this._nodes,function(e,r){t(r)&&n.setNode(r,e)}),l.each(this._edgeObjs,function(t){n.hasNode(t.v)&&n.hasNode(t.w)&&n.setEdge(t,r.edge(t))});var i={};return this._isCompound&&l.each(n.nodes(),function(t){n.setParent(t,e(t))}),n},r.prototype.setDefaultEdgeLabel=function(t){return l.isFunction(t)||(t=l.constant(t)),this._defaultEdgeLabelFn=t,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return l.values(this._edgeObjs)},r.prototype.setPath=function(t,e){var n=this,r=arguments;return l.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},r.prototype.setEdge=function(){var t,e,n,r,o=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(t=u.v,e=u.w,n=u.name,2===arguments.length&&(r=arguments[1],o=!0)):(t=u,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),t=""+t,e=""+e,l.isUndefined(n)||(n=""+n);var c=a(this._isDirected,t,e,n);if(l.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=r),this;if(!l.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=o?r:this._defaultEdgeLabelFn(t,e,n);var h=s(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[c]=h,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][c]=h,this._out[t][c]=h,this._edgeCount++,this},r.prototype.edge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return l.has(this._edgeLabels,r)},r.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],o(this._preds[e],t),o(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},r.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=l.values(n);return e?l.filter(r,function(t){return t.v===e}):r}},r.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=l.values(n);return e?l.filter(r,function(t){return t.w===e}):r}},r.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},"./node_modules/_graphlib@2.1.8@graphlib/lib/index.js":function(t,e,n){t.exports={Graph:n("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),version:n("./node_modules/_graphlib@2.1.8@graphlib/lib/version.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/json.js":function(t,e,n){function r(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:o(t)};return s.isUndefined(t.graph())||(e.value=s.clone(t.graph())),e}function i(t){return s.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return s.isUndefined(n)||(i.value=n),s.isUndefined(r)||(i.parent=r),i})}function o(t){return s.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return s.isUndefined(e.name)||(r.name=e.name),s.isUndefined(n)||(r.value=n),r})}function a(t){var e=new u(t.options).setGraph(t.value);return s.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),s.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var s=n("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=n("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js");t.exports={write:r,read:a}},"./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js":function(t,e,n){var r;try{r={clone:n("./node_modules/_lodash@4.17.15@lodash/clone.js"),constant:n("./node_modules/_lodash@4.17.15@lodash/constant.js"),each:n("./node_modules/_lodash@4.17.15@lodash/each.js"),filter:n("./node_modules/_lodash@4.17.15@lodash/filter.js"),has:n("./node_modules/_lodash@4.17.15@lodash/has.js"),isArray:n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),isEmpty:n("./node_modules/_lodash@4.17.15@lodash/isEmpty.js"),isFunction:n("./node_modules/_lodash@4.17.15@lodash/isFunction.js"),isUndefined:n("./node_modules/_lodash@4.17.15@lodash/isUndefined.js"),keys:n("./node_modules/_lodash@4.17.15@lodash/keys.js"),map:n("./node_modules/_lodash@4.17.15@lodash/map.js"),reduce:n("./node_modules/_lodash@4.17.15@lodash/reduce.js"),size:n("./node_modules/_lodash@4.17.15@lodash/size.js"),transform:n("./node_modules/_lodash@4.17.15@lodash/transform.js"),union:n("./node_modules/_lodash@4.17.15@lodash/union.js"),values:n("./node_modules/_lodash@4.17.15@lodash/values.js")}}catch(t){}r||(r=window._),t.exports=r},"./node_modules/_graphlib@2.1.8@graphlib/lib/version.js":function(t,e){t.exports="2.1.8"},"./node_modules/_isarray@0.0.1@isarray/index.js":function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},"./node_modules/_lodash@4.17.15@lodash/_DataView.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_getNative.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),o=r(i,"DataView");t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_Hash.js":function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n("./node_modules/_lodash@4.17.15@lodash/_hashClear.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_hashDelete.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_hashGet.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_hashHas.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_hashSet.js");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_ListCache.js":function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n("./node_modules/_lodash@4.17.15@lodash/_listCacheClear.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_listCacheDelete.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_listCacheGet.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_listCacheHas.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_listCacheSet.js");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_Map.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_getNative.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),o=r(i,"Map");t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_MapCache.js":function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n("./node_modules/_lodash@4.17.15@lodash/_mapCacheClear.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_mapCacheDelete.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_mapCacheGet.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_mapCacheHas.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_mapCacheSet.js");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_Promise.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_getNative.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),o=r(i,"Promise");t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_Set.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_getNative.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),o=r(i,"Set");t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_SetCache.js":function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=n("./node_modules/_lodash@4.17.15@lodash/_MapCache.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_setCacheAdd.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_setCacheHas.js");r.prototype.add=r.prototype.push=o,r.prototype.has=a,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_Stack.js":function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=n("./node_modules/_lodash@4.17.15@lodash/_ListCache.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_stackClear.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_stackDelete.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_stackGet.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_stackHas.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_stackSet.js");r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=l,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_Symbol.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),i=r.Symbol;t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_Uint8Array.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),i=r.Uint8Array;t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_WeakMap.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_getNative.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),o=r(i,"WeakMap");t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_apply.js":function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_arrayEach.js":function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_arrayFilter.js":function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_arrayIncludes.js":function(t,e,n){function r(t,e){return!!(null==t?0:t.length)&&i(t,e,0)>-1}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseIndexOf.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_arrayIncludesWith.js":function(t,e){function n(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_arrayLikeKeys.js":function(t,e,n){function r(t,e){var n=a(t),r=!n&&o(t),c=!n&&!r&&s(t),f=!n&&!r&&!c&&l(t),p=n||r||c||f,d=p?i(t.length,String):[],v=d.length;for(var g in t)!e&&!h.call(t,g)||p&&("length"==g||c&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,v))||d.push(g);return d}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseTimes.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArguments.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isBuffer.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_isIndex.js"),l=n("./node_modules/_lodash@4.17.15@lodash/isTypedArray.js"),c=Object.prototype,h=c.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_arrayMap.js":function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_arrayPush.js":function(t,e){function n(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_arrayReduce.js":function(t,e){function n(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_arraySome.js":function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_asciiSize.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseProperty.js"),i=r("length");t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_assignMergeValue.js":function(t,e,n){function r(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseAssignValue.js"),o=n("./node_modules/_lodash@4.17.15@lodash/eq.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_assignValue.js":function(t,e,n){function r(t,e,n){var r=t[e];s.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||i(t,e,n)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseAssignValue.js"),o=n("./node_modules/_lodash@4.17.15@lodash/eq.js"),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_assocIndexOf.js":function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=n("./node_modules/_lodash@4.17.15@lodash/eq.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseAssign.js":function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_copyObject.js"),o=n("./node_modules/_lodash@4.17.15@lodash/keys.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseAssignIn.js":function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_copyObject.js"),o=n("./node_modules/_lodash@4.17.15@lodash/keysIn.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseAssignValue.js":function(t,e,n){function r(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var i=n("./node_modules/_lodash@4.17.15@lodash/_defineProperty.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseClone.js":function(t,e,n){function r(t,e,n,j,L,D){var R,B=e&M,z=e&T,F=e&C;if(n&&(R=L?n(t,j,L,D):n(t)),void 0!==R)return R;if(!w(t))return t;var N=_(t);if(N){if(R=g(t),!B)return c(t,R)}else{var U=v(t),V=U==P||U==k;if(b(t))return l(t,B);if(U==I||U==A||V&&!L){if(R=z||V?{}:y(t),!B)return z?f(t,u(R,t)):h(t,s(R,t))}else{if(!O[U])return L?t:{};R=m(t,U,B)}}D||(D=new i);var G=D.get(t);if(G)return G;D.set(t,R),S(t)?t.forEach(function(i){R.add(r(i,e,n,i,t,D))}):x(t)&&t.forEach(function(i,o){R.set(o,r(i,e,n,o,t,D))});var q=F?z?d:p:z?keysIn:E,H=N?void 0:q(t);return o(H||t,function(i,o){H&&(o=i,i=t[o]),a(R,o,r(i,e,n,o,t,D))}),R}var i=n("./node_modules/_lodash@4.17.15@lodash/_Stack.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_arrayEach.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_assignValue.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_baseAssign.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_baseAssignIn.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_cloneBuffer.js"),c=n("./node_modules/_lodash@4.17.15@lodash/_copyArray.js"),h=n("./node_modules/_lodash@4.17.15@lodash/_copySymbols.js"),f=n("./node_modules/_lodash@4.17.15@lodash/_copySymbolsIn.js"),p=n("./node_modules/_lodash@4.17.15@lodash/_getAllKeys.js"),d=n("./node_modules/_lodash@4.17.15@lodash/_getAllKeysIn.js"),v=n("./node_modules/_lodash@4.17.15@lodash/_getTag.js"),g=n("./node_modules/_lodash@4.17.15@lodash/_initCloneArray.js"),m=n("./node_modules/_lodash@4.17.15@lodash/_initCloneByTag.js"),y=n("./node_modules/_lodash@4.17.15@lodash/_initCloneObject.js"),_=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),b=n("./node_modules/_lodash@4.17.15@lodash/isBuffer.js"),x=n("./node_modules/_lodash@4.17.15@lodash/isMap.js"),w=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),S=n("./node_modules/_lodash@4.17.15@lodash/isSet.js"),E=n("./node_modules/_lodash@4.17.15@lodash/keys.js"),M=1,T=2,C=4,A="[object Arguments]",P="[object Function]",k="[object GeneratorFunction]",I="[object Object]",O={};O[A]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[I]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[P]=O["[object WeakMap]"]=!1,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseCreate.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_baseEach.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseForOwn.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_createBaseEach.js"),o=i(r);t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_baseExtremum.js":function(t,e,n){function r(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(void 0===u?s===s&&!i(s):n(s,u)))var u=s,l=a}return l}var i=n("./node_modules/_lodash@4.17.15@lodash/isSymbol.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseFilter.js":function(t,e,n){function r(t,e){var n=[];return i(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseEach.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseFindIndex.js":function(t,e){function n(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseFlatten.js":function(t,e,n){function r(t,e,n,a,s){var u=-1,l=t.length;for(n||(n=o),s||(s=[]);++u<l;){var c=t[u];e>0&&n(c)?e>1?r(c,e-1,n,a,s):i(s,c):a||(s[s.length]=c)}return s}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayPush.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_isFlattenable.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseFor.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_createBaseFor.js"),i=r();t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_baseForOwn.js":function(t,e,n){function r(t,e){return t&&i(t,e,o)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseFor.js"),o=n("./node_modules/_lodash@4.17.15@lodash/keys.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseGet.js":function(t,e,n){function r(t,e){e=i(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[o(e[n++])];return n&&n==r?t:void 0}var i=n("./node_modules/_lodash@4.17.15@lodash/_castPath.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_toKey.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseGetAllKeys.js":function(t,e,n){function r(t,e,n){var r=e(t);return o(t)?r:i(r,n(t))}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayPush.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArray.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js":function(t,e,n){function r(t){return null==t?void 0===t?u:s:l&&l in Object(t)?o(t):a(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_Symbol.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getRawTag.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_objectToString.js"),s="[object Null]",u="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseGt.js":function(t,e){function n(t,e){return t>e}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseHas.js":function(t,e){function n(t,e){return null!=t&&i.call(t,e)}var r=Object.prototype,i=r.hasOwnProperty;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseHasIn.js":function(t,e){function n(t,e){return null!=t&&e in Object(t)}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseIndexOf.js":function(t,e,n){function r(t,e,n){return e===e?a(t,e,n):i(t,o,n)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseFindIndex.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseIsNaN.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_strictIndexOf.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsArguments.js":function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),a="[object Arguments]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsEqual.js":function(t,e,n){function r(t,e,n,a,s){return t===e||(null==t||null==e||!o(t)&&!o(e)?t!==t&&e!==e:i(t,e,n,a,r,s))}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseIsEqualDeep.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsEqualDeep.js":function(t,e,n){function r(t,e,n,r,g,y){var _=l(t),b=l(e),x=_?d:u(t),w=b?d:u(e);x=x==p?v:x,w=w==p?v:w;var S=x==v,E=w==v,M=x==w;if(M&&c(t)){if(!c(e))return!1;_=!0,S=!1}if(M&&!S)return y||(y=new i),_||h(t)?o(t,e,n,r,g,y):a(t,e,x,n,r,g,y);if(!(n&f)){var T=S&&m.call(t,"__wrapped__"),C=E&&m.call(e,"__wrapped__");if(T||C){var A=T?t.value():t,P=C?e.value():e;return y||(y=new i),g(A,P,n,r,y)}}return!!M&&(y||(y=new i),s(t,e,n,r,g,y))}var i=n("./node_modules/_lodash@4.17.15@lodash/_Stack.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_equalArrays.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_equalByTag.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_equalObjects.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_getTag.js"),l=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),c=n("./node_modules/_lodash@4.17.15@lodash/isBuffer.js"),h=n("./node_modules/_lodash@4.17.15@lodash/isTypedArray.js"),f=1,p="[object Arguments]",d="[object Array]",v="[object Object]",g=Object.prototype,m=g.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsMap.js":function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n("./node_modules/_lodash@4.17.15@lodash/_getTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),a="[object Map]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsMatch.js":function(t,e,n){function r(t,e,n,r){var u=n.length,l=u,c=!r;if(null==t)return!l;for(t=Object(t);u--;){var h=n[u];if(c&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++u<l;){h=n[u];var f=h[0],p=t[f],d=h[1];if(c&&h[2]){if(void 0===p&&!(f in t))return!1}else{var v=new i;if(r)var g=r(p,d,f,t,e,v);if(!(void 0===g?o(d,p,a|s,r,v):g))return!1}}return!0}var i=n("./node_modules/_lodash@4.17.15@lodash/_Stack.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseIsEqual.js"),a=1,s=2;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsNaN.js":function(t,e){function n(t){return t!==t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseIsNative.js":function(t,e,n){function r(t){return!(!a(t)||o(t))&&(i(t)?d:l).test(s(t))}var i=n("./node_modules/_lodash@4.17.15@lodash/isFunction.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_isMasked.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_toSource.js"),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,f=c.toString,p=h.hasOwnProperty,d=RegExp("^"+f.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsSet.js":function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n("./node_modules/_lodash@4.17.15@lodash/_getTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),a="[object Set]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIsTypedArray.js":function(t,e,n){function r(t){return a(t)&&o(t.length)&&!!s[i(t)]}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isLength.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js":function(t,e,n){function r(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?s(t)?o(t[0],t[1]):i(t):u(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseMatches.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseMatchesProperty.js"),a=n("./node_modules/_lodash@4.17.15@lodash/identity.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),u=n("./node_modules/_lodash@4.17.15@lodash/property.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseKeys.js":function(t,e,n){function r(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}var i=n("./node_modules/_lodash@4.17.15@lodash/_isPrototype.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_nativeKeys.js"),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseKeysIn.js":function(t,e,n){function r(t){if(!i(t))return a(t);var e=o(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var i=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_isPrototype.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_nativeKeysIn.js"),s=Object.prototype,u=s.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseLt.js":function(t,e){function n(t,e){return t<e}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseMap.js":function(t,e,n){function r(t,e){var n=-1,r=o(t)?Array(t.length):[];return i(t,function(t,i,o){r[++n]=e(t,i,o)}),r}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseEach.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseMatches.js":function(t,e,n){function r(t){var e=o(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseIsMatch.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getMatchData.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_matchesStrictComparable.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseMatchesProperty.js":function(t,e,n){function r(t,e){return s(t)&&u(e)?l(c(t),e):function(n){var r=o(n,t);return void 0===r&&r===e?a(n,t):i(e,r,h|f)}}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseIsEqual.js"),o=n("./node_modules/_lodash@4.17.15@lodash/get.js"),a=n("./node_modules/_lodash@4.17.15@lodash/hasIn.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_isKey.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_isStrictComparable.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_matchesStrictComparable.js"),c=n("./node_modules/_lodash@4.17.15@lodash/_toKey.js"),h=1,f=2;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseMerge.js":function(t,e,n){function r(t,e,n,h,f){t!==e&&a(e,function(a,l){if(f||(f=new i),u(a))s(t,e,l,n,r,h,f);else{var p=h?h(c(t,l),a,l+"",t,e,f):void 0;void 0===p&&(p=a),o(t,l,p)}},l)}var i=n("./node_modules/_lodash@4.17.15@lodash/_Stack.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_assignMergeValue.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseFor.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_baseMergeDeep.js"),u=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),l=n("./node_modules/_lodash@4.17.15@lodash/keysIn.js"),c=n("./node_modules/_lodash@4.17.15@lodash/_safeGet.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseMergeDeep.js":function(t,e,n){function r(t,e,n,r,_,b,x){var w=m(t,n),S=m(e,n),E=x.get(S);if(E)return void i(t,n,E);var M=b?b(w,S,n+"",t,e,x):void 0,T=void 0===M;if(T){var C=c(S),A=!C&&f(S),P=!C&&!A&&g(S);M=S,C||A||P?c(w)?M=w:h(w)?M=s(w):A?(T=!1,M=o(S,!0)):P?(T=!1,M=a(S,!0)):M=[]:v(S)||l(S)?(M=w,l(w)?M=y(w):d(w)&&!p(w)||(M=u(S))):T=!1}T&&(x.set(S,M),_(M,S,r,b,x),x.delete(S)),i(t,n,M)}var i=n("./node_modules/_lodash@4.17.15@lodash/_assignMergeValue.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_cloneBuffer.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_cloneTypedArray.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_copyArray.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_initCloneObject.js"),l=n("./node_modules/_lodash@4.17.15@lodash/isArguments.js"),c=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),h=n("./node_modules/_lodash@4.17.15@lodash/isArrayLikeObject.js"),f=n("./node_modules/_lodash@4.17.15@lodash/isBuffer.js"),p=n("./node_modules/_lodash@4.17.15@lodash/isFunction.js"),d=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),v=n("./node_modules/_lodash@4.17.15@lodash/isPlainObject.js"),g=n("./node_modules/_lodash@4.17.15@lodash/isTypedArray.js"),m=n("./node_modules/_lodash@4.17.15@lodash/_safeGet.js"),y=n("./node_modules/_lodash@4.17.15@lodash/toPlainObject.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseOrderBy.js":function(t,e,n){function r(t,e,n){var r=-1;e=i(e.length?e:[c],u(o));var h=a(t,function(t,n,o){return{criteria:i(e,function(e){return e(t)}),index:++r,value:t}});return s(h,function(t,e){return l(t,e,n)})}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayMap.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseMap.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_baseSortBy.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_baseUnary.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_compareMultiple.js"),c=n("./node_modules/_lodash@4.17.15@lodash/identity.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_basePick.js":function(t,e,n){function r(t,e){return i(t,e,function(e,n){return o(t,n)})}var i=n("./node_modules/_lodash@4.17.15@lodash/_basePickBy.js"),o=n("./node_modules/_lodash@4.17.15@lodash/hasIn.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_basePickBy.js":function(t,e,n){function r(t,e,n){for(var r=-1,s=e.length,u={};++r<s;){var l=e[r],c=i(t,l);n(c,l)&&o(u,a(l,t),c)}return u}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGet.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseSet.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_castPath.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseProperty.js":function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_basePropertyDeep.js":function(t,e,n){function r(t){return function(e){return i(e,t)}}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGet.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseRange.js":function(t,e){function n(t,e,n,o){for(var a=-1,s=i(r((e-t)/(n||1)),0),u=Array(s);s--;)u[o?s:++a]=t,t+=n;return u}var r=Math.ceil,i=Math.max;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseReduce.js":function(t,e){function n(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseRest.js":function(t,e,n){function r(t,e){return a(o(t,e,i),t+"")}var i=n("./node_modules/_lodash@4.17.15@lodash/identity.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_overRest.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_setToString.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseSet.js":function(t,e,n){function r(t,e,n,r){if(!s(t))return t;e=o(e,t);for(var l=-1,c=e.length,h=c-1,f=t;null!=f&&++l<c;){var p=u(e[l]),d=n;if(l!=h){var v=f[p];d=r?r(v,p,f):void 0,void 0===d&&(d=s(v)?v:a(e[l+1])?[]:{})}i(f,p,d),f=f[p]}return t}var i=n("./node_modules/_lodash@4.17.15@lodash/_assignValue.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_castPath.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_isIndex.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_toKey.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseSetToString.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/constant.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_defineProperty.js"),o=n("./node_modules/_lodash@4.17.15@lodash/identity.js"),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},"./node_modules/_lodash@4.17.15@lodash/_baseSortBy.js":function(t,e){function n(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseTimes.js":function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseToString.js":function(t,e,n){function r(t){if("string"==typeof t)return t;if(a(t))return o(t,r)+"";if(s(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=n("./node_modules/_lodash@4.17.15@lodash/_Symbol.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_arrayMap.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isSymbol.js"),u=1/0,l=i?i.prototype:void 0,c=l?l.toString:void 0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseUnary.js":function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_baseUniq.js":function(t,e,n){function r(t,e,n){var r=-1,h=o,f=t.length,p=!0,d=[],v=d;if(n)p=!1,h=a;else if(f>=c){var g=e?null:u(t);if(g)return l(g);p=!1,h=s,v=new i}else v=e?[]:d;t:for(;++r<f;){var m=t[r],y=e?e(m):m;if(m=n||0!==m?m:0,p&&y===y){for(var _=v.length;_--;)if(v[_]===y)continue t;e&&v.push(y),d.push(m)}else h(v,y,n)||(v!==d&&v.push(y),d.push(m))}return d}var i=n("./node_modules/_lodash@4.17.15@lodash/_SetCache.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_arrayIncludes.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_arrayIncludesWith.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_cacheHas.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_createSet.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_setToArray.js"),c=200;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseValues.js":function(t,e,n){function r(t,e){return i(e,function(e){return t[e]})}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayMap.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_baseZipObject.js":function(t,e){function n(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_cacheHas.js":function(t,e){function n(t,e){return t.has(e)}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_castFunction.js":function(t,e,n){function r(t){return"function"==typeof t?t:i}var i=n("./node_modules/_lodash@4.17.15@lodash/identity.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_castPath.js":function(t,e,n){function r(t,e){return i(t)?t:o(t,e)?[t]:a(s(t))}var i=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_isKey.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_stringToPath.js"),s=n("./node_modules/_lodash@4.17.15@lodash/toString.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_cloneArrayBuffer.js":function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}var i=n("./node_modules/_lodash@4.17.15@lodash/_Uint8Array.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_cloneBuffer.js":function(t,e,n){(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=l?l(n):new t.constructor(n);return t.copy(r),r}var i=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?i.Buffer:void 0,l=u?u.allocUnsafe:void 0;t.exports=r}).call(this,n("./node_modules/_webpack@4.42.1@webpack/buildin/module.js")(t))},"./node_modules/_lodash@4.17.15@lodash/_cloneDataView.js":function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var i=n("./node_modules/_lodash@4.17.15@lodash/_cloneArrayBuffer.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_cloneRegExp.js":function(t,e){function n(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_cloneSymbol.js":function(t,e,n){function r(t){return a?Object(a.call(t)):{}}var i=n("./node_modules/_lodash@4.17.15@lodash/_Symbol.js"),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_cloneTypedArray.js":function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var i=n("./node_modules/_lodash@4.17.15@lodash/_cloneArrayBuffer.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_compareAscending.js":function(t,e,n){function r(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t===t,a=i(t),s=void 0!==e,u=null===e,l=e===e,c=i(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}var i=n("./node_modules/_lodash@4.17.15@lodash/isSymbol.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_compareMultiple.js":function(t,e,n){function r(t,e,n){for(var r=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++r<s;){var l=i(o[r],a[r]);if(l){if(r>=u)return l;return l*("desc"==n[r]?-1:1)}}return t.index-e.index}var i=n("./node_modules/_lodash@4.17.15@lodash/_compareAscending.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_copyArray.js":function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_copyObject.js":function(t,e,n){function r(t,e,n,r){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=r?r(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?o(n,l,c):i(n,l,c)}return n}var i=n("./node_modules/_lodash@4.17.15@lodash/_assignValue.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseAssignValue.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_copySymbols.js":function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=n("./node_modules/_lodash@4.17.15@lodash/_copyObject.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getSymbols.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_copySymbolsIn.js":function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=n("./node_modules/_lodash@4.17.15@lodash/_copyObject.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getSymbolsIn.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_coreJsData.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),i=r["__core-js_shared__"];t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_createAssigner.js":function(t,e,n){function r(t){return i(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e})}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseRest.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_isIterateeCall.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_createBaseEach.js":function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==r(s[a],a,s););return n}}var i=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_createBaseFor.js":function(t,e){function n(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_createFind.js":function(t,e,n){function r(t){return function(e,n,r){var s=Object(e);if(!o(e)){var u=i(n,3);e=a(e),n=function(t){return u(s[t],t,s)}}var l=t(e,n,r);return l>-1?s[u?e[l]:l]:void 0}}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js"),a=n("./node_modules/_lodash@4.17.15@lodash/keys.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_createRange.js":function(t,e,n){function r(t){return function(e,n,r){return r&&"number"!=typeof r&&o(e,n,r)&&(n=r=void 0),e=a(e),void 0===n?(n=e,e=0):n=a(n),r=void 0===r?e<n?1:-1:a(r),i(e,n,r,t)}}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseRange.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_isIterateeCall.js"),a=n("./node_modules/_lodash@4.17.15@lodash/toFinite.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_createSet.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_Set.js"),i=n("./node_modules/_lodash@4.17.15@lodash/noop.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_setToArray.js"),a=1/0,s=r&&1/o(new r([,-0]))[1]==a?function(t){return new r(t)}:i;t.exports=s},"./node_modules/_lodash@4.17.15@lodash/_defineProperty.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_getNative.js"),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_equalArrays.js":function(t,e,n){function r(t,e,n,r,l,c){var h=n&s,f=t.length,p=e.length;if(f!=p&&!(h&&p>f))return!1;var d=c.get(t);if(d&&c.get(e))return d==e;var v=-1,g=!0,m=n&u?new i:void 0;for(c.set(t,e),c.set(e,t);++v<f;){var y=t[v],_=e[v];if(r)var b=h?r(_,y,v,e,t,c):r(y,_,v,t,e,c);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!o(e,function(t,e){if(!a(m,e)&&(y===t||l(y,t,n,r,c)))return m.push(e)})){g=!1;break}}else if(y!==_&&!l(y,_,n,r,c)){g=!1;break}}return c.delete(t),c.delete(e),g}var i=n("./node_modules/_lodash@4.17.15@lodash/_SetCache.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_arraySome.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_cacheHas.js"),s=1,u=2;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_equalByTag.js":function(t,e,n){function r(t,e,n,r,i,S,M){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!S(new o(t),new o(e)));case f:case p:case g:return a(+t,+e);case d:return t.name==e.name&&t.message==e.message;case m:case _:return t==e+"";case v:var T=u;case y:var C=r&c;if(T||(T=l),t.size!=e.size&&!C)return!1;var A=M.get(t);if(A)return A==e;r|=h,M.set(t,e);var P=s(T(t),T(e),r,i,S,M);return M.delete(t),P;case b:if(E)return E.call(t)==E.call(e)}return!1}var i=n("./node_modules/_lodash@4.17.15@lodash/_Symbol.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_Uint8Array.js"),a=n("./node_modules/_lodash@4.17.15@lodash/eq.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_equalArrays.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_mapToArray.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_setToArray.js"),c=1,h=2,f="[object Boolean]",p="[object Date]",d="[object Error]",v="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",_="[object String]",b="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",S=i?i.prototype:void 0,E=S?S.valueOf:void 0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_equalObjects.js":function(t,e,n){function r(t,e,n,r,a,u){var l=n&o,c=i(t),h=c.length;if(h!=i(e).length&&!l)return!1;for(var f=h;f--;){var p=c[f];if(!(l?p in e:s.call(e,p)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var v=!0;u.set(t,e),u.set(e,t);for(var g=l;++f<h;){p=c[f];var m=t[p],y=e[p];if(r)var _=l?r(y,m,p,e,t,u):r(m,y,p,t,e,u);if(!(void 0===_?m===y||a(m,y,n,r,u):_)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(v=!1)}return u.delete(t),u.delete(e),v}var i=n("./node_modules/_lodash@4.17.15@lodash/_getAllKeys.js"),o=1,a=Object.prototype,s=a.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_flatRest.js":function(t,e,n){function r(t){return a(o(t,void 0,i),t+"")}var i=n("./node_modules/_lodash@4.17.15@lodash/flatten.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_overRest.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_setToString.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_freeGlobal.js":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("./node_modules/_webpack@4.42.1@webpack/buildin/global.js"))},"./node_modules/_lodash@4.17.15@lodash/_getAllKeys.js":function(t,e,n){function r(t){return i(t,a,o)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetAllKeys.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getSymbols.js"),a=n("./node_modules/_lodash@4.17.15@lodash/keys.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_getAllKeysIn.js":function(t,e,n){function r(t){return i(t,a,o)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetAllKeys.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getSymbolsIn.js"),a=n("./node_modules/_lodash@4.17.15@lodash/keysIn.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_getMapData.js":function(t,e,n){function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=n("./node_modules/_lodash@4.17.15@lodash/_isKeyable.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_getMatchData.js":function(t,e,n){function r(t){for(var e=o(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,i(a)]}return e}var i=n("./node_modules/_lodash@4.17.15@lodash/_isStrictComparable.js"),o=n("./node_modules/_lodash@4.17.15@lodash/keys.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_getNative.js":function(t,e,n){function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseIsNative.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getValue.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_getPrototype.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_overArg.js"),i=r(Object.getPrototypeOf,Object);t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_getRawTag.js":function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n("./node_modules/_lodash@4.17.15@lodash/_Symbol.js"),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_getSymbols.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_arrayFilter.js"),i=n("./node_modules/_lodash@4.17.15@lodash/stubArray.js"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return a.call(t,e)}))}:i;t.exports=u},"./node_modules/_lodash@4.17.15@lodash/_getSymbolsIn.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_arrayPush.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_getPrototype.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getSymbols.js"),a=n("./node_modules/_lodash@4.17.15@lodash/stubArray.js"),s=Object.getOwnPropertySymbols,u=s?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=u},"./node_modules/_lodash@4.17.15@lodash/_getTag.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_DataView.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_Map.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_Promise.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_Set.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_WeakMap.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_toSource.js"),c="[object Map]",h="[object Promise]",f="[object Set]",p="[object WeakMap]",d="[object DataView]",v=l(r),g=l(i),m=l(o),y=l(a),_=l(s),b=u;(r&&b(new r(new ArrayBuffer(1)))!=d||i&&b(new i)!=c||o&&b(o.resolve())!=h||a&&b(new a)!=f||s&&b(new s)!=p)&&(b=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return d;case g:return c;case m:return h;case y:return f;case _:return p}return e}),t.exports=b},"./node_modules/_lodash@4.17.15@lodash/_getValue.js":function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_hasPath.js":function(t,e,n){function r(t,e,n){e=i(e,t);for(var r=-1,c=e.length,h=!1;++r<c;){var f=l(e[r]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++r!=c?h:!!(c=null==t?0:t.length)&&u(c)&&s(f,c)&&(a(t)||o(t))}var i=n("./node_modules/_lodash@4.17.15@lodash/_castPath.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArguments.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_isIndex.js"),u=n("./node_modules/_lodash@4.17.15@lodash/isLength.js"),l=n("./node_modules/_lodash@4.17.15@lodash/_toKey.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_hasUnicode.js":function(t,e){function n(t){return c.test(t)}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\ufe0e\\ufe0f",l="\\u200d",c=RegExp("["+l+r+s+u+"]");t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_hashClear.js":function(t,e,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n("./node_modules/_lodash@4.17.15@lodash/_nativeCreate.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_hashDelete.js":function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_hashGet.js":function(t,e,n){function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var i=n("./node_modules/_lodash@4.17.15@lodash/_nativeCreate.js"),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_hashHas.js":function(t,e,n){function r(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_nativeCreate.js"),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_hashSet.js":function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?o:e,this}var i=n("./node_modules/_lodash@4.17.15@lodash/_nativeCreate.js"),o="__lodash_hash_undefined__";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_initCloneArray.js":function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&i.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,i=r.hasOwnProperty;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_initCloneByTag.js":function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case m:return i(t);case l:case c:return new r(+t);case y:return o(t,n);case _:case b:case x:case w:case S:case E:case M:case T:case C:return u(t,n);case h:return new r;case f:case v:return new r(t);case p:return a(t);case d:return new r;case g:return s(t)}}var i=n("./node_modules/_lodash@4.17.15@lodash/_cloneArrayBuffer.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_cloneDataView.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_cloneRegExp.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_cloneSymbol.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_cloneTypedArray.js"),l="[object Boolean]",c="[object Date]",h="[object Map]",f="[object Number]",p="[object RegExp]",d="[object Set]",v="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",M="[object Uint8ClampedArray]",T="[object Uint16Array]",C="[object Uint32Array]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_initCloneObject.js":function(t,e,n){function r(t){return"function"!=typeof t.constructor||a(t)?{}:i(o(t))}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseCreate.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getPrototype.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_isPrototype.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_isFlattenable.js":function(t,e,n){function r(t){return a(t)||o(t)||!!(s&&t&&t[s])}var i=n("./node_modules/_lodash@4.17.15@lodash/_Symbol.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArguments.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),s=i?i.isConcatSpreadable:void 0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_isIndex.js":function(t,e){function n(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_isIterateeCall.js":function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&a(e,n.length):"string"==r&&e in n)&&i(n[e],t)}var i=n("./node_modules/_lodash@4.17.15@lodash/eq.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_isIndex.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isObject.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_isKey.js":function(t,e,n){function r(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(s.test(t)||!a.test(t)||null!=e&&t in Object(e))}var i=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isSymbol.js"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_isKeyable.js":function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_isMasked.js":function(t,e,n){function r(t){return!!o&&o in t}var i=n("./node_modules/_lodash@4.17.15@lodash/_coreJsData.js"),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_isPrototype.js":function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_isStrictComparable.js":function(t,e,n){function r(t){return t===t&&!i(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/isObject.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_listCacheClear.js":function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_listCacheDelete.js":function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var i=n("./node_modules/_lodash@4.17.15@lodash/_assocIndexOf.js"),o=Array.prototype,a=o.splice;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_listCacheGet.js":function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=n("./node_modules/_lodash@4.17.15@lodash/_assocIndexOf.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_listCacheHas.js":function(t,e,n){function r(t){return i(this.__data__,t)>-1}var i=n("./node_modules/_lodash@4.17.15@lodash/_assocIndexOf.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_listCacheSet.js":function(t,e,n){function r(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var i=n("./node_modules/_lodash@4.17.15@lodash/_assocIndexOf.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_mapCacheClear.js":function(t,e,n){function r(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=n("./node_modules/_lodash@4.17.15@lodash/_Hash.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_ListCache.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_Map.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_mapCacheDelete.js":function(t,e,n){function r(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}var i=n("./node_modules/_lodash@4.17.15@lodash/_getMapData.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_mapCacheGet.js":function(t,e,n){function r(t){return i(this,t).get(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_getMapData.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_mapCacheHas.js":function(t,e,n){function r(t){return i(this,t).has(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_getMapData.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_mapCacheSet.js":function(t,e,n){function r(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var i=n("./node_modules/_lodash@4.17.15@lodash/_getMapData.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_mapToArray.js":function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_matchesStrictComparable.js":function(t,e){function n(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_memoizeCapped.js":function(t,e,n){function r(t){var e=i(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}var i=n("./node_modules/_lodash@4.17.15@lodash/memoize.js"),o=500;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_nativeCreate.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_getNative.js"),i=r(Object,"create");t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_nativeKeys.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_overArg.js"),i=r(Object.keys,Object);t.exports=i},"./node_modules/_lodash@4.17.15@lodash/_nativeKeysIn.js":function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_nodeUtil.js":function(t,e,n){(function(t){var r=n("./node_modules/_lodash@4.17.15@lodash/_freeGlobal.js"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=u}).call(this,n("./node_modules/_webpack@4.42.1@webpack/buildin/module.js")(t))},"./node_modules/_lodash@4.17.15@lodash/_objectToString.js":function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_overArg.js":function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_overRest.js":function(t,e,n){function r(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),u=Array(s);++a<s;)u[a]=r[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=r[a];return l[e]=n(u),i(t,this,l)}}var i=n("./node_modules/_lodash@4.17.15@lodash/_apply.js"),o=Math.max;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_root.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_freeGlobal.js"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_safeGet.js":function(t,e){function n(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_setCacheAdd.js":function(t,e){function n(t){return this.__data__.set(t,r),this}var r="__lodash_hash_undefined__";t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_setCacheHas.js":function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_setToArray.js":function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_setToString.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseSetToString.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_shortOut.js"),o=i(r);t.exports=o},"./node_modules/_lodash@4.17.15@lodash/_shortOut.js":function(t,e){function n(t){var e=0,n=0;return function(){var a=o(),s=i-(a-n);if(n=a,s>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,i=16,o=Date.now;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_stackClear.js":function(t,e,n){function r(){this.__data__=new i,this.size=0}var i=n("./node_modules/_lodash@4.17.15@lodash/_ListCache.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_stackDelete.js":function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_stackGet.js":function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_stackHas.js":function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_stackSet.js":function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}var i=n("./node_modules/_lodash@4.17.15@lodash/_ListCache.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_Map.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_MapCache.js"),s=200;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_strictIndexOf.js":function(t,e){function n(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_stringSize.js":function(t,e,n){function r(t){return o(t)?a(t):i(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_asciiSize.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_hasUnicode.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_unicodeSize.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_stringToPath.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_memoizeCapped.js"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=a},"./node_modules/_lodash@4.17.15@lodash/_toKey.js":function(t,e,n){function r(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var i=n("./node_modules/_lodash@4.17.15@lodash/isSymbol.js"),o=1/0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/_toSource.js":function(t,e){function n(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,i=r.toString;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/_unicodeSize.js":function(t,e){function n(t){for(var e=w.lastIndex=0;w.test(t);)++e;return e}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\ufe0e\\ufe0f",l="["+r+"]",c="["+s+"]",h="\\ud83c[\\udffb-\\udfff]",f="(?:"+c+"|"+h+")",p="[^"+r+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",m=f+"?",y="["+u+"]?",_="(?:"+g+"(?:"+[p,d,v].join("|")+")"+y+m+")*",b=y+m+_,x="(?:"+[p+c+"?",c,d,v,l].join("|")+")",w=RegExp(h+"(?="+h+")|"+x+b,"g");t.exports=n},"./node_modules/_lodash@4.17.15@lodash/clone.js":function(t,e,n){function r(t){return i(t,o)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseClone.js"),o=4;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/cloneDeep.js":function(t,e,n){function r(t){return i(t,o|a)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseClone.js"),o=1,a=4;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/constant.js":function(t,e){function n(t){return function(){return t}}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/defaults.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseRest.js"),i=n("./node_modules/_lodash@4.17.15@lodash/eq.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_isIterateeCall.js"),a=n("./node_modules/_lodash@4.17.15@lodash/keysIn.js"),s=Object.prototype,u=s.hasOwnProperty,l=r(function(t,e){t=Object(t);var n=-1,r=e.length,l=r>2?e[2]:void 0;for(l&&o(e[0],e[1],l)&&(r=1);++n<r;)for(var c=e[n],h=a(c),f=-1,p=h.length;++f<p;){var d=h[f],v=t[d];(void 0===v||i(v,s[d])&&!u.call(t,d))&&(t[d]=c[d])}return t});t.exports=l},"./node_modules/_lodash@4.17.15@lodash/each.js":function(t,e,n){t.exports=n("./node_modules/_lodash@4.17.15@lodash/forEach.js")},"./node_modules/_lodash@4.17.15@lodash/eq.js":function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/filter.js":function(t,e,n){function r(t,e){return(s(t)?i:o)(t,a(e,3))}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayFilter.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseFilter.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isArray.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/find.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_createFind.js"),i=n("./node_modules/_lodash@4.17.15@lodash/findIndex.js"),o=r(i);t.exports=o},"./node_modules/_lodash@4.17.15@lodash/findIndex.js":function(t,e,n){function r(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var u=null==n?0:a(n);return u<0&&(u=s(r+u,0)),i(t,o(e,3),u)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseFindIndex.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),a=n("./node_modules/_lodash@4.17.15@lodash/toInteger.js"),s=Math.max;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/flatten.js":function(t,e,n){function r(t){return(null==t?0:t.length)?i(t,1):[]}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseFlatten.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/forEach.js":function(t,e,n){function r(t,e){return(s(t)?i:o)(t,a(e))}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayEach.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseEach.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_castFunction.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isArray.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/forIn.js":function(t,e,n){function r(t,e){return null==t?t:i(t,o(e),a)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseFor.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_castFunction.js"),a=n("./node_modules/_lodash@4.17.15@lodash/keysIn.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/get.js":function(t,e,n){function r(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGet.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/has.js":function(t,e,n){function r(t,e){return null!=t&&o(t,e,i)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseHas.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_hasPath.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/hasIn.js":function(t,e,n){function r(t,e){return null!=t&&o(t,e,i)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseHasIn.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_hasPath.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/identity.js":function(t,e){function n(t){return t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/isArguments.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseIsArguments.js"),i=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},"./node_modules/_lodash@4.17.15@lodash/isArray.js":function(t,e){var n=Array.isArray;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/isArrayLike.js":function(t,e,n){function r(t){return null!=t&&o(t.length)&&!i(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/isFunction.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isLength.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/isArrayLikeObject.js":function(t,e,n){function r(t){return o(t)&&i(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/isBuffer.js":function(t,e,n){(function(t){var r=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),i=n("./node_modules/_lodash@4.17.15@lodash/stubFalse.js"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||i;t.exports=c}).call(this,n("./node_modules/_webpack@4.42.1@webpack/buildin/module.js")(t))},"./node_modules/_lodash@4.17.15@lodash/isEmpty.js":function(t,e,n){function r(t){if(null==t)return!0;if(u(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||h(t)||a(t)))return!t.length;var e=o(t);if(e==f||e==p)return!t.size;if(c(t))return!i(t).length;for(var n in t)if(v.call(t,n))return!1;return!0}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseKeys.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getTag.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArguments.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),u=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js"),l=n("./node_modules/_lodash@4.17.15@lodash/isBuffer.js"),c=n("./node_modules/_lodash@4.17.15@lodash/_isPrototype.js"),h=n("./node_modules/_lodash@4.17.15@lodash/isTypedArray.js"),f="[object Map]",p="[object Set]",d=Object.prototype,v=d.hasOwnProperty;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/isFunction.js":function(t,e,n){function r(t){if(!o(t))return!1;var e=i(t);return e==s||e==u||e==a||e==l}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/isLength.js":function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},"./node_modules/_lodash@4.17.15@lodash/isMap.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseIsMap.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_baseUnary.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_nodeUtil.js"),a=o&&o.isMap,s=a?i(a):r;t.exports=s},"./node_modules/_lodash@4.17.15@lodash/isObject.js":function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/isObjectLike.js":function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/isPlainObject.js":function(t,e,n){function r(t){if(!a(t)||i(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getPrototype.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=c.call(Object);t.exports=r},"./node_modules/_lodash@4.17.15@lodash/isSet.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseIsSet.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_baseUnary.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_nodeUtil.js"),a=o&&o.isSet,s=a?i(a):r;t.exports=s},"./node_modules/_lodash@4.17.15@lodash/isString.js":function(t,e,n){function r(t){return"string"==typeof t||!o(t)&&a(t)&&i(t)==s}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),s="[object String]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/isSymbol.js":function(t,e,n){function r(t){return"symbol"==typeof t||o(t)&&i(t)==a}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseGetTag.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isObjectLike.js"),a="[object Symbol]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/isTypedArray.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseIsTypedArray.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_baseUnary.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_nodeUtil.js"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},"./node_modules/_lodash@4.17.15@lodash/isUndefined.js":function(t,e){function n(t){return void 0===t}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/keys.js":function(t,e,n){function r(t){return a(t)?i(t):o(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayLikeKeys.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseKeys.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/keysIn.js":function(t,e,n){function r(t){return a(t)?i(t,!0):o(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayLikeKeys.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseKeysIn.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/last.js":function(t,e){function n(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/map.js":function(t,e,n){function r(t,e){return(s(t)?i:a)(t,o(e,3))}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayMap.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseMap.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isArray.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/mapValues.js":function(t,e,n){function r(t,e){var n={};return e=a(e,3),o(t,function(t,r,o){i(n,r,e(t,r,o))}),n}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseAssignValue.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseForOwn.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/max.js":function(t,e,n){function r(t){return t&&t.length?i(t,a,o):void 0}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseExtremum.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseGt.js"),a=n("./node_modules/_lodash@4.17.15@lodash/identity.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/memoize.js":function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(r.Cache||i),n}var i=n("./node_modules/_lodash@4.17.15@lodash/_MapCache.js"),o="Expected a function";r.Cache=i,t.exports=r},"./node_modules/_lodash@4.17.15@lodash/merge.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseMerge.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_createAssigner.js"),o=i(function(t,e,n){r(t,e,n)});t.exports=o},"./node_modules/_lodash@4.17.15@lodash/min.js":function(t,e,n){function r(t){return t&&t.length?i(t,a,o):void 0}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseExtremum.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseLt.js"),a=n("./node_modules/_lodash@4.17.15@lodash/identity.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/minBy.js":function(t,e,n){function r(t,e){return t&&t.length?i(t,o(e,2),a):void 0}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseExtremum.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseLt.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/noop.js":function(t,e){function n(){}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/now.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_root.js"),i=function(){return r.Date.now()};t.exports=i},"./node_modules/_lodash@4.17.15@lodash/pick.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_basePick.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_flatRest.js"),o=i(function(t,e){return null==t?{}:r(t,e)});t.exports=o},"./node_modules/_lodash@4.17.15@lodash/property.js":function(t,e,n){function r(t){return a(t)?i(s(t)):o(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseProperty.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_basePropertyDeep.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_isKey.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_toKey.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/range.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_createRange.js"),i=r();t.exports=i},"./node_modules/_lodash@4.17.15@lodash/reduce.js":function(t,e,n){function r(t,e,n){var r=u(t)?i:s,l=arguments.length<3;return r(t,a(e,4),n,l,o)}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayReduce.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseEach.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_baseReduce.js"),u=n("./node_modules/_lodash@4.17.15@lodash/isArray.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/size.js":function(t,e,n){function r(t){if(null==t)return 0;if(a(t))return s(t)?u(t):t.length;var e=o(t);return e==l||e==c?t.size:i(t).length}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseKeys.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_getTag.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArrayLike.js"),s=n("./node_modules/_lodash@4.17.15@lodash/isString.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_stringSize.js"),l="[object Map]",c="[object Set]";t.exports=r},"./node_modules/_lodash@4.17.15@lodash/sortBy.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseFlatten.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_baseOrderBy.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseRest.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_isIterateeCall.js"),s=o(function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])});t.exports=s},"./node_modules/_lodash@4.17.15@lodash/stubArray.js":function(t,e){function n(){return[]}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/stubFalse.js":function(t,e){function n(){return!1}t.exports=n},"./node_modules/_lodash@4.17.15@lodash/toFinite.js":function(t,e,n){function r(t){if(!t)return 0===t?t:0;if((t=i(t))===o||t===-o){return(t<0?-1:1)*a}return t===t?t:0}var i=n("./node_modules/_lodash@4.17.15@lodash/toNumber.js"),o=1/0,a=1.7976931348623157e308;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/toInteger.js":function(t,e,n){function r(t){var e=i(t),n=e%1;return e===e?n?e-n:e:0}var i=n("./node_modules/_lodash@4.17.15@lodash/toFinite.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/toNumber.js":function(t,e,n){function r(t){if("number"==typeof t)return t;if(o(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=l.test(t);return n||c.test(t)?h(t.slice(2),n?2:8):u.test(t)?a:+t}var i=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),o=n("./node_modules/_lodash@4.17.15@lodash/isSymbol.js"),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/toPlainObject.js":function(t,e,n){function r(t){return i(t,o(t))}var i=n("./node_modules/_lodash@4.17.15@lodash/_copyObject.js"),o=n("./node_modules/_lodash@4.17.15@lodash/keysIn.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/toString.js":function(t,e,n){function r(t){return null==t?"":i(t)}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseToString.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/transform.js":function(t,e,n){function r(t,e,n){var r=l(t),d=r||c(t)||p(t);if(e=s(e,4),null==n){var v=t&&t.constructor;n=d?r?new v:[]:f(t)&&h(v)?o(u(t)):{}}return(d?i:a)(t,function(t,r,i){return e(n,t,r,i)}),n}var i=n("./node_modules/_lodash@4.17.15@lodash/_arrayEach.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseCreate.js"),a=n("./node_modules/_lodash@4.17.15@lodash/_baseForOwn.js"),s=n("./node_modules/_lodash@4.17.15@lodash/_baseIteratee.js"),u=n("./node_modules/_lodash@4.17.15@lodash/_getPrototype.js"),l=n("./node_modules/_lodash@4.17.15@lodash/isArray.js"),c=n("./node_modules/_lodash@4.17.15@lodash/isBuffer.js"),h=n("./node_modules/_lodash@4.17.15@lodash/isFunction.js"),f=n("./node_modules/_lodash@4.17.15@lodash/isObject.js"),p=n("./node_modules/_lodash@4.17.15@lodash/isTypedArray.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/union.js":function(t,e,n){var r=n("./node_modules/_lodash@4.17.15@lodash/_baseFlatten.js"),i=n("./node_modules/_lodash@4.17.15@lodash/_baseRest.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseUniq.js"),a=n("./node_modules/_lodash@4.17.15@lodash/isArrayLikeObject.js"),s=i(function(t){return o(r(t,1,a,!0))});t.exports=s},"./node_modules/_lodash@4.17.15@lodash/uniqueId.js":function(t,e,n){function r(t){var e=++o;return i(t)+e}var i=n("./node_modules/_lodash@4.17.15@lodash/toString.js"),o=0;t.exports=r},"./node_modules/_lodash@4.17.15@lodash/values.js":function(t,e,n){function r(t){return null==t?[]:i(t,o(t))}var i=n("./node_modules/_lodash@4.17.15@lodash/_baseValues.js"),o=n("./node_modules/_lodash@4.17.15@lodash/keys.js");t.exports=r},"./node_modules/_lodash@4.17.15@lodash/zipObject.js":function(t,e,n){function r(t,e){return o(t||[],e||[],i)}var i=n("./node_modules/_lodash@4.17.15@lodash/_assignValue.js"),o=n("./node_modules/_lodash@4.17.15@lodash/_baseZipObject.js");t.exports=r},"./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js":function(t,e){function n(t){var e=[];return t.replace(o,function(t,n,o){var a=n.toLowerCase();for(o=r(o),"m"==a&&o.length>2&&(e.push([n].concat(o.splice(0,2))),a="l",n="m"==n?"l":"L");;){if(o.length==i[a])return o.unshift(n),e.push(o);if(o.length<i[a])throw new Error("malformed path data");e.push([n].concat(o.splice(0,i[a])))}}),e}function r(t){var e=t.match(a);return e?e.map(Number):[]}t.exports=n;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},"./node_modules/_point-at-length@1.1.0@point-at-length/index.js":function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);this._path=u(t)?t:s(t),this._path=l(this._path),this._path=a(this._path),this._path=o(this._path)}function i(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function o(t){for(var e,n=0,r=0,i={S:{to:"C",x:3},T:{to:"Q",x:1}},o=0,a=t.length;o<a;o++){var s=t[o],u=i[s[0]];u&&(s[0]=u.to,e&&(e[0]===u.to?(n=2*e[u.x+2]-e[u.x],r=2*e[u.x+3]-e[u.x+1]):(n=e[e.length-2],r=e[e.length-1])),s.splice(1,0,n,r)),e=s}return t}function a(t){for(var e,n=[],r=["L",0,0],i=0,o=t.length;i<o;i++){var a=t[i];switch(a[0]){case"M":r=["L",a[1],a[2]],n.push(a);break;case"Z":n.push(r);break;case"H":e=n[n.length-1]||["L",0,0],n.push(["L",a[1],e[e.length-1]]);break;case"V":e=n[n.length-1]||["L",0,0],n.push(["L",e[e.length-2],a[1]]);break;default:n.push(a)}}return n}var s=n("./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js"),u=n("./node_modules/_isarray@0.0.1@isarray/index.js"),l=n("./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js");t.exports=r,r.prototype.at=function(t,e){return this._walk(t,e).pos},r.prototype.length=function(){return this._walk(null).length},r.prototype._walk=function(t,e){function n(t,e){return Math.pow(1-e,3)*l[0]+3*Math.pow(1-e,2)*e*t[1]+3*(1-e)*Math.pow(e,2)*t[3]+Math.pow(e,3)*t[5]}function r(t,e){return Math.pow(1-e,3)*l[1]+3*Math.pow(1-e,2)*e*t[2]+3*(1-e)*Math.pow(e,2)*t[4]+Math.pow(e,3)*t[6]}function o(t,e){return Math.pow(1-e,2)*l[0]+2*(1-e)*e*t[1]+Math.pow(e,2)*t[3]}function a(t,e){return Math.pow(1-e,2)*l[1]+2*(1-e)*e*t[2]+Math.pow(e,2)*t[4]}for(var s=[0,0],u=[0,0,0],l=[0,0],c=0,h=0;h<this._path.length;h++){var f=this._path[h];if("M"===f[0]){if(s[0]=f[1],s[1]=f[2],0===t)return{length:c,pos:s}}else if("C"===f[0]){u[0]=l[0]=s[0],u[1]=l[1]=s[1],u[2]=c;for(var p=100,d=0;d<=p;d++){var v=d/p,g=n(f,v),m=r(f,v);if(c+=i(s[0],s[1],g,m),s[0]=g,s[1]=m,"number"==typeof t&&c>=t){var y=(c-t)/(c-u[2]),_=[s[0]*(1-y)+u[0]*y,s[1]*(1-y)+u[1]*y];return{length:c,pos:_}}u[0]=s[0],u[1]=s[1],u[2]=c}}else if("Q"===f[0]){u[0]=l[0]=s[0],u[1]=l[1]=s[1],u[2]=c;for(var p=100,d=0;d<=p;d++){var v=d/p,g=o(f,v),m=a(f,v);if(c+=i(s[0],s[1],g,m),s[0]=g,s[1]=m,"number"==typeof t&&c>=t){var y=(c-t)/(c-u[2]),_=[s[0]*(1-y)+u[0]*y,s[1]*(1-y)+u[1]*y];return{length:c,pos:_}}u[0]=s[0],u[1]=s[1],u[2]=c}}else if("L"===f[0]){if(u[0]=s[0],u[1]=s[1],u[2]=c,c+=i(s[0],s[1],f[1],f[2]),s[0]=f[1],s[1]=f[2],"number"==typeof t&&c>=t){var y=(c-t)/(c-u[2]),_=[s[0]*(1-y)+u[0]*y,s[1]*(1-y)+u[1]*y];return{length:c,pos:_}}u[0]=s[0],u[1]=s[1],u[2]=c}}return{length:c,pos:s}}},"./node_modules/_regression@2.0.1@regression/dist/regression.js":function(t,e,n){var r,i,o;!function(n,a){i=[t],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){var n=[],r=[];t.forEach(function(t,i){null!==t[1]&&(r.push(t),n.push(e[i]))});var i=r.reduce(function(t,e){return t+e[1]},0),o=i/r.length,a=r.reduce(function(t,e){var n=e[1]-o;return t+n*n},0);return 1-r.reduce(function(t,e,r){var i=n[r],o=e[1]-i[1];return t+o*o},0)/a}function i(t,e){for(var n=t,r=t.length-1,i=[e],o=0;o<r;o++){for(var a=o,s=o+1;s<r;s++)Math.abs(n[o][s])>Math.abs(n[o][a])&&(a=s);for(var u=o;u<r+1;u++){var l=n[u][o];n[u][o]=n[u][a],n[u][a]=l}for(var c=o+1;c<r;c++)for(var h=r;h>=o;h--)n[h][c]-=n[h][o]*n[o][c]/n[o][o]}for(var f=r-1;f>=0;f--){for(var p=0,d=f+1;d<r;d++)p+=n[d][f]*i[d];i[f]=(n[r][f]-p)/n[f][f]}return i}function o(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function a(){var t=function(t,n){return s({_round:o},t,e({},n,function(t,e){return l[n](t,s({},u,e))}))};return Object.keys(l).reduce(t,{})}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u={order:2,precision:2,period:null},l={linear:function(t,e){for(var n=[0,0,0,0,0],i=0,a=0;a<t.length;a++)null!==t[a][1]&&(i++,n[0]+=t[a][0],n[1]+=t[a][1],n[2]+=t[a][0]*t[a][0],n[3]+=t[a][0]*t[a][1],n[4]+=t[a][1]*t[a][1]);var s=i*n[2]-n[0]*n[0],u=i*n[3]-n[0]*n[1],l=0===s?0:o(u/s,e.precision),c=o(n[1]/i-l*n[0]/i,e.precision),h=function(t){return[o(t,e.precision),o(l*t+c,e.precision)]},f=t.map(function(t){return h(t[0])});return{points:f,predict:h,equation:[l,c],r2:o(r(t,f),e.precision),string:0===c?"y = "+l+"x":"y = "+l+"x + "+c}},exponential:function(t,e){for(var n=[0,0,0,0,0,0],i=0;i<t.length;i++)null!==t[i][1]&&(n[0]+=t[i][0],n[1]+=t[i][1],n[2]+=t[i][0]*t[i][0]*t[i][1],n[3]+=t[i][1]*Math.log(t[i][1]),n[4]+=t[i][0]*t[i][1]*Math.log(t[i][1]),n[5]+=t[i][0]*t[i][1]);var a=n[1]*n[2]-n[5]*n[5],s=Math.exp((n[2]*n[3]-n[5]*n[4])/a),u=(n[1]*n[4]-n[5]*n[3])/a,l=o(s,e.precision),c=o(u,e.precision),h=function(t){return[o(t,e.precision),o(l*Math.exp(c*t),e.precision)]},f=t.map(function(t){return h(t[0])});return{points:f,predict:h,equation:[l,c],string:"y = "+l+"e^("+c+"x)",r2:o(r(t,f),e.precision)}},logarithmic:function(t,e){for(var n=[0,0,0,0],i=t.length,a=0;a<i;a++)null!==t[a][1]&&(n[0]+=Math.log(t[a][0]),n[1]+=t[a][1]*Math.log(t[a][0]),n[2]+=t[a][1],n[3]+=Math.pow(Math.log(t[a][0]),2));var s=(i*n[1]-n[2]*n[0])/(i*n[3]-n[0]*n[0]),u=o(s,e.precision),l=o((n[2]-u*n[0])/i,e.precision),c=function(t){return[o(t,e.precision),o(o(l+u*Math.log(t),e.precision),e.precision)]},h=t.map(function(t){return c(t[0])});return{points:h,predict:c,equation:[l,u],string:"y = "+l+" + "+u+" ln(x)",r2:o(r(t,h),e.precision)}},power:function(t,e){for(var n=[0,0,0,0,0],i=t.length,a=0;a<i;a++)null!==t[a][1]&&(n[0]+=Math.log(t[a][0]),n[1]+=Math.log(t[a][1])*Math.log(t[a][0]),n[2]+=Math.log(t[a][1]),n[3]+=Math.pow(Math.log(t[a][0]),2));var s=(i*n[1]-n[0]*n[2])/(i*n[3]-Math.pow(n[0],2)),u=(n[2]-s*n[0])/i,l=o(Math.exp(u),e.precision),c=o(s,e.precision),h=function(t){return[o(t,e.precision),o(o(l*Math.pow(t,c),e.precision),e.precision)]},f=t.map(function(t){return h(t[0])});return{points:f,predict:h,equation:[l,c],string:"y = "+l+"x^"+c,r2:o(r(t,f),e.precision)}},polynomial:function(t,e){for(var a=[],s=[],u=0,l=0,c=t.length,h=e.order+1,f=0;f<h;f++){for(var p=0;p<c;p++)null!==t[p][1]&&(u+=Math.pow(t[p][0],f)*t[p][1]);a.push(u),u=0;for(var d=[],v=0;v<h;v++){for(var g=0;g<c;g++)null!==t[g][1]&&(l+=Math.pow(t[g][0],f+v));d.push(l),l=0}s.push(d)}s.push(a);for(var m=i(s,h).map(function(t){return o(t,e.precision)}),y=function(t){return[o(t,e.precision),o(m.reduce(function(e,n,r){return e+n*Math.pow(t,r)},0),e.precision)]},_=t.map(function(t){return y(t[0])}),b="y = ",x=m.length-1;x>=0;x--)b+=x>1?m[x]+"x^"+x+" + ":1===x?m[x]+"x + ":m[x];return{string:b,points:_,predict:y,equation:[].concat(n(m)).reverse(),r2:o(r(t,_),e.precision)}}};t.exports=a()})},"./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+r}function n(t){if(0===t.length)throw new Error("mean requires at least one data point");return e(t)/t.length}function r(t,e){var r,i,o=n(t),a=0;if(2===e)for(i=0;i<t.length;i++)a+=(r=t[i]-o)*r;else for(i=0;i<t.length;i++)a+=Math.pow(t[i]-o,e);return a}function i(t){if(0===t.length)throw new Error("variance requires at least one data point");return r(t,2)/t.length}function o(t){if(1===t.length)return 0;var e=i(t);return Math.sqrt(e)}function a(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],n=NaN,r=0,i=1,o=1;o<t.length+1;o++)t[o]!==e?(r<i&&(r=i,n=e),i=1,e=t[o]):i++;return n}function s(t){return t.slice().sort(function(t,e){return t-e})}function u(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function l(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function c(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||1<e)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function h(t,e,n,r){for(n=n||0,r=r||t.length-1;n<r;){if(600<r-n){var i=r-n+1,o=e-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*s*(i-s)/i);o-i/2<0&&(u*=-1),h(t,e,Math.max(n,Math.floor(e-o*s/i+u)),Math.min(r,Math.floor(e+(i-o)*s/i+u)))}var l=t[e],c=n,p=r;for(f(t,n,e),t[r]>l&&f(t,n,r);c<p;){for(f(t,c,p),c++,p--;t[c]<l;)c++;for(;t[p]>l;)p--}t[n]===l?f(t,n,p):f(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function f(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(g(t.length,e[r]));n.push(t.length-1),n.sort(v);for(var i=[0,n.length-1];i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var s=Math.floor((a+o)/2);d(t,n[s],n[a],n[o]),i.push(a,s,s,o)}}}(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=c(n,e[i]);return r}return d(n,g(n.length,e),0,n.length-1),c(n,e)}function d(t,e,n,r){e%1==0?h(t,e,n,r):(h(t,e=Math.floor(e),n,r),h(t,e+1,e+1,r))}function v(t,e){return t-e}function g(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}function m(t,e){if(e<t[0])return 0;if(e>t[t.length-1])return 1;var n=function(t,e){for(var n=0,r=0,i=t.length;r<i;)e<=t[n=r+i>>>1]?i=n:r=-~n;return r}(t,e);if(t[n]!==e)return n/t.length;n++;var r=function(t,e){for(var n=0,r=0,i=t.length;r<i;)e>=t[n=r+i>>>1]?r=-~n:i=n;return r}(t,e);if(r===n)return n/t.length;var i=r-n+1;return i*(r+n)/2/i/t.length}function y(t){var e=p(t,.75),n=p(t,.25);if("number"==typeof e&&"number"==typeof n)return e-n}function _(t){return+p(t,.5)}function b(t){for(var e=_(t),n=[],r=0;r<t.length;r++)n.push(Math.abs(t[r]-e));return _(n)}function x(t,e){e=e||Math.random;for(var n,r,i=t.length;0<i;)r=Math.floor(e()*i--),n=t[i],t[i]=t[r],t[r]=n;return t}function w(t,e){return x(t.slice().slice(),e)}function S(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}function E(t,e){for(var n=[],r=0;r<t;r++){for(var i=[],o=0;o<e;o++)i.push(0);n.push(i)}return n}function M(t,e,n,r){var i;if(0<t){var o=(n[e]-n[t-1])/(e-t+1);i=r[e]-r[t-1]-(e-t+1)*o*o}else i=r[e]-n[e]*n[e]/(e+1);return i<0?0:i}function T(t,e,n,r,i,o,a){if(!(e<t)){var s=Math.floor((t+e)/2);r[n][s]=r[n-1][s-1],i[n][s]=s;var u=n;n<t&&(u=Math.max(u,i[n][t-1]||0)),u=Math.max(u,i[n-1][s]||0);var l,c,h,f=s-1;e<r.length-1&&(f=Math.min(f,i[n][e+1]||0));for(var p=f;u<=p&&!((l=M(p,s,o,a))+r[n-1][u-1]>=r[n][s]);--p)(c=M(u,s,o,a)+r[n-1][u-1])<r[n][s]&&(r[n][s]=c,i[n][s]=u),u++,(h=l+r[n-1][p-1])<r[n][s]&&(r[n][s]=h,i[n][s]=p);T(t,s-1,n,r,i,o,a),T(s+1,e,n,r,i,o,a)}}function C(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var r=n(t),i=n(e),o=0,a=0;a<t.length;a++)o+=(t[a]-r)*(e[a]-i);return o/(t.length-1)}function A(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return r(t,2)/(t.length-1)}function P(t){var e=A(t);return Math.sqrt(e)}function k(t,e,n,r){return(t*e+n*r)/(e+r)}function I(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return Math.sqrt(e/t.length)}function O(){this.totalCount=0,this.data={}}function j(){this.weights=[],this.bias=0}function L(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,n=2;n<=t;n++)e*=n;return e}function D(t,e,n){var r,i;if(void 0===e)r=H.gaussian;else if("string"==typeof e){if(!H[e])throw new Error('Unknown kernel "'+e+'"');r=H[e]}else r=e;if(void 0===n)i=Y.nrd(t);else if("string"==typeof n){if(!Y[n])throw new Error('Unknown bandwidth method "'+n+'"');i=Y[n](t)}else i=n;return function(e){var n=0,o=0;for(n=0;n<t.length;n++)o+=r((e-t[n])/i);return o/i/t.length}}function R(t){for(var e=t,n=t,r=1;r<15;r++)e+=n*=t*t/(2*r+1);return Math.round(1e4*(.5+e/X*Math.exp(-t*t/2)))/1e4}function B(t){var e=1/(1+.5*Math.abs(t)),n=e*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*e+.37409196*Math.pow(e,2)+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9));return 0<=t?1-n:n-1}function z(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return 0<=t?n:-n}function F(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}O.prototype.train=function(t,e){for(var n in this.data[e]||(this.data[e]={}),t){var r=t[n];void 0===this.data[e][n]&&(this.data[e][n]={}),void 0===this.data[e][n][r]&&(this.data[e][n][r]=0),this.data[e][n][r]++}this.totalCount++},O.prototype.score=function(t){var e,n={};for(var r in t){var i=t[r];for(e in this.data)n[e]={},this.data[e][r]?n[e][r+"_"+i]=(this.data[e][r][i]||0)/this.totalCount:n[e][r+"_"+i]=0}var o={};for(e in n)for(var a in o[e]=0,n[e])o[e]+=n[e][a];return o},j.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,n=0;n<this.weights.length;n++)e+=this.weights[n]*t[n];return 0<(e+=this.bias)?1:0},j.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var n=this.predict(t);if(n!==e){for(var r=e-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*t[i];this.bias+=r}return this};for(var N=1e-4,U=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],V=Math.log(Math.sqrt(2*Math.PI)),G={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},q=Math.sqrt(2*Math.PI),H={gaussian:function(t){return Math.exp(-.5*t*t)/q}},Y={nrd:function(t){var e=P(t),n=y(t);return"number"==typeof n&&(e=Math.min(e,n/1.34)),1.06*e*Math.pow(t.length,-.2)}},X=Math.sqrt(2*Math.PI),W=[],Z=0;Z<=3.09;Z+=.01)W.push(R(Z));t.linearRegression=function(t){var e,n,r=t.length;if(1===r)n=t[e=0][1];else{for(var i,o,a,s=0,u=0,l=0,c=0,h=0;h<r;h++)s+=o=(i=t[h])[0],u+=a=i[1],l+=o*o,c+=o*a;n=u/r-(e=(r*c-s*u)/(r*l-s*s))*s/r}return{m:e,b:n}},t.linearRegressionLine=function(t){return function(e){return t.b+t.m*e}},t.standardDeviation=o,t.rSquared=function(t,e){if(t.length<2)return 1;for(var n,r=0,i=0;i<t.length;i++)r+=t[i][1];n=r/t.length;for(var o=0,a=0;a<t.length;a++)o+=Math.pow(n-t[a][1],2);for(var s=0,u=0;u<t.length;u++)s+=Math.pow(t[u][1]-e(t[u][0]),2);return 1-s/o},t.mode=function(t){return a(s(t))},t.modeFast=function(t){for(var e,n=new Map,r=0,i=0;i<t.length;i++){var o=n.get(t[i]);void 0===o?o=1:o++,r<o&&(e=t[i],r=o),n.set(t[i],o)}if(0===r)throw new Error("mode requires at last one data point");return e},t.modeSorted=a,t.min=u,t.max=l,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var e=t[0],n=t[0],r=1;r<t.length;r++)t[r]>n&&(n=t[r]),t[r]<e&&(e=t[r]);return[e,n]},t.minSorted=function(t){return t[0]},t.maxSorted=function(t){return t[t.length-1]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.sum=e,t.sumSimple=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e},t.product=function(t){for(var e=1,n=0;n<t.length;n++)e*=t[n];return e},t.quantile=p,t.quantileSorted=c,t.quantileRank=function(t,e){return m(s(t),e)},t.quantileRankSorted=m,t.interquartileRange=y,t.iqr=y,t.medianAbsoluteDeviation=b,t.mad=b,t.chunk=function(t,e){var n=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},t.sampleWithReplacement=function(t,e,n){if(0===t.length)return[];n=n||Math.random;for(var r=t.length,i=[],o=0;o<e;o++){var a=Math.floor(n()*r);i.push(t[a])}return i},t.shuffle=w,t.shuffleInPlace=x,t.sample=function(t,e,n){return w(t,n).slice(0,e)},t.ckmeans=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var n=s(t);if(1===S(n))return[n];var r=E(e,n.length),i=E(e,n.length);!function(t,e,n){for(var r,i=e[0].length,o=t[Math.floor(i/2)],a=[],s=[],u=0;u<i;++u)r=t[u]-o,0===u?(a.push(r),s.push(r*r)):(a.push(a[u-1]+r),s.push(s[u-1]+r*r)),e[0][u]=M(0,u,a,s),n[0][u]=0;for(var l=1;l<e.length;++l)T(l<e.length-1?l:i-1,i-1,l,e,n,a,s)}(n,r,i);for(var o=[],a=i[0].length-1,u=i.length-1;0<=u;u--){var l=i[u][a];o[u]=n.slice(l,a+1),0<u&&(a=l-1)}return o},t.uniqueCountSorted=S,t.sumNthPowerDeviations=r,t.equalIntervalBreaks=function(t,e){if(t.length<2)return t;for(var n=u(t),r=l(t),i=[n],o=(r-n)/e,a=1;a<e;a++)i.push(i[0]+o*a);return i.push(r),i},t.sampleCovariance=C,t.sampleCorrelation=function(t,e){return C(t,e)/P(t)/P(e)},t.sampleVariance=A,t.sampleStandardDeviation=P,t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,r=n(t),i=0,o=0,a=0;a<t.length;a++)i+=(e=t[a]-r)*e,o+=e*e*e;var s=t.length-1,u=Math.sqrt(i/s),l=t.length;return l*o/((l-1)*(l-2)*Math.pow(u,3))},t.sampleKurtosis=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var r,i=n(t),o=0,a=0,s=0;s<e;s++)o+=(r=t[s]-i)*r,a+=r*r*r*r;return(e-1)/((e-2)*(e-3))*(e*(e+1)*a/(o*o)-3*(e-1))},t.permutationsHeap=function(t){for(var e=new Array(t.length),n=[t.slice()],r=0;r<t.length;r++)e[r]=0;for(r=0;r<t.length;)if(e[r]<r){var i=0;r%2!=0&&(i=e[r]);var o=t[i];t[i]=t[r],t[r]=o,n.push(t.slice()),e[r]++,r=0}else e[r]=0,r++;return n},t.combinations=function t(e,n){var r,i,o,a,s=[];for(r=0;r<e.length;r++)if(1===n)s.push([e[r]]);else for(o=t(e.slice(r+1,e.length),n-1),i=0;i<o.length;i++)(a=o[i]).unshift(e[r]),s.push(a);return s},t.combinationsReplacement=function t(e,n){for(var r=[],i=0;i<e.length;i++)if(1===n)r.push([e[i]]);else for(var o=t(e.slice(i,e.length),n-1),a=0;a<o.length;a++)r.push([e[i]].concat(o[a]));return r},t.addToMean=function(t,e,n){return t+(n-t)/(e+1)},t.combineMeans=k,t.combineVariances=function(t,e,n,r,i,o){var a=k(e,n,i,o);return(n*(t+Math.pow(e-a,2))+o*(r+Math.pow(i-a,2)))/(n+o)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("geometricMean requires only positive numbers as input");e*=t[n]}return Math.pow(e,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[n]}return t.length/e},t.average=n,t.mean=n,t.median=_,t.medianSorted=function(t){return c(t,.5)},t.subtractFromMean=function(t,e,n){return(t*e-n)/(e-1)},t.rootMeanSquare=I,t.rms=I,t.variance=i,t.tTest=function(t,e){return(n(t)-e)/(o(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,e,r){var i=t.length,o=e.length;if(!i||!o)return null;r||(r=0);var a=n(t),s=n(e),u=A(t),l=A(e);if("number"==typeof a&&"number"==typeof s&&"number"==typeof u&&"number"==typeof l){var c=((i-1)*u+(o-1)*l)/(i+o-2);return(a-s-r)/Math.sqrt(c*(1/i+1/o))}},t.BayesianClassifier=O,t.bayesian=O,t.PerceptronModel=j,t.perceptron=j,t.epsilon=N,t.factorial=L,t.gamma=function t(e){if("number"==typeof(n=e)&&isFinite(n)&&Math.floor(n)===n)return e<=0?NaN:L(e-1);var n;if(--e<0)return Math.PI/(Math.sin(Math.PI*-e)*t(-e));var r=e+.25;return Math.pow(e/Math.E,e)*Math.sqrt(2*Math.PI*(e+1/6))*(1+1/144/Math.pow(r,2)-1/12960/Math.pow(r,3)-257/207360/Math.pow(r,4)-52/2612736/Math.pow(r,5)+5741173/9405849600/Math.pow(r,6)+37529/18811699200/Math.pow(r,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var e=U[0],n=1;n<15;n++)e+=U[n]/(t+n);var r=5.2421875+t;return V+Math.log(e)-r+(t+.5)*Math.log(r)},t.bernoulliDistribution=function(t){if(t<0||1<t)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,e){if(!(e<0||1<e||t<=0||t%1!=0)){for(var n=0,r=0,i=[],o=1;i[n]=o*Math.pow(e,n)*Math.pow(1-e,t-n),r+=i[n],o=o*(t-++n+1)/n,r<1-N;);return i}},t.poissonDistribution=function(t){if(!(t<=0)){for(var e=0,n=0,r=[],i=1;r[e]=Math.exp(-t)*Math.pow(t,e)/i,n+=r[e],i*=++e,n<1-N;);return r}},t.chiSquaredDistributionTable=G,t.chiSquaredGoodnessOfFit=function(t,e,r){for(var i,o,a=0,s=e(n(t)),u=[],l=[],c=0;c<t.length;c++)void 0===u[t[c]]&&(u[t[c]]=0),u[t[c]]++;for(c=0;c<u.length;c++)void 0===u[c]&&(u[c]=0);for(o in s)o in u&&(l[+o]=s[o]*t.length);for(o=l.length-1;0<=o;o--)l[o]<3&&(l[o-1]+=l[o],l.pop(),u[o-1]+=u[o],u.pop());for(o=0;o<u.length;o++)a+=Math.pow(u[o]-l[o],2)/l[o];return i=u.length-1-1,G[i][r]<a},t.kernelDensityEstimation=D,t.kde=D,t.zScore=function(t,e,n){return(t-e)/n},t.cumulativeStdNormalProbability=function(t){var e=Math.abs(t),n=Math.min(Math.round(100*e),W.length-1);return 0<=t?W[n]:+(1-W[n]).toFixed(4)},t.standardNormalTable=W,t.errorFunction=B,t.erf=B,t.inverseErrorFunction=z,t.probit=function(t){return 0===t?t=N:1<=t&&(t=1-N),Math.sqrt(2)*z(2*t-1)},t.permutationTest=function(t,e,r,i){if(void 0===i&&(i=1e4),void 0===r&&(r="two_side"),"two_side"!==r&&"greater"!==r&&"less"!==r)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var o=n(t)-n(e),a=new Array(i),s=t.concat(e),u=Math.floor(s.length/2),l=0;l<i;l++){x(s);var c=s.slice(0,u),h=s.slice(u,s.length),f=n(c)-n(h);a[l]=f}var p=0;if("two_side"===r)for(l=0;l<=i;l++)Math.abs(a[l])>=Math.abs(o)&&(p+=1);else if("greater"===r)for(l=0;l<=i;l++)a[l]>=o&&(p+=1);else for(l=0;l<=i;l++)a[l]<=o&&(p+=1);return p/i},t.bisect=function(t,e,n,r,i){if("function"!=typeof t)throw new TypeError("func must be a function");for(var o=0;o<r;o++){var a=(e+n)/2;if(0===t(a)||Math.abs((n-e)/2)<i)return a;F(t(a))===F(t(e))?e=a:n=a}throw new Error("maximum number of iterations exceeded")},t.quickselect=h,t.sign=F,t.numericSort=s,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js":function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t){return t}function n(t){if(null==t)return e;var n,r,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(n=r=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(n+=t[0])*i+a,c[1]=(r+=t[1])*o+s;u<l;)c[u]=t[u],++u;return c}}function r(t){function e(t){t=o(t),t[0]<a&&(a=t[0]),t[0]>u&&(u=t[0]),t[1]<s&&(s=t[1]),t[1]>l&&(l=t[1])}function r(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(r);break;case"Point":e(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(e)}}var i,o=n(t.transform),a=1/0,s=a,u=-a,l=-a;t.arcs.forEach(function(t){for(var e,n=-1,r=t.length;++n<r;)e=o(t[n],n),e[0]<a&&(a=e[0]),e[0]>u&&(u=e[0]),e[1]<s&&(s=e[1]),e[1]>l&&(l=e[1])});for(i in t.objects)r(t.objects[i]);return[a,s,u,l]}function i(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function o(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return a(t,e)})}:a(t,e)}function a(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=s(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function s(t,e){function r(t,e){e.length&&e.pop();for(var n=h[t<0?~t:t],r=0,o=n.length;r<o;++r)e.push(c(n[r],r));t<0&&i(e,o)}function o(t){return c(t)}function a(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}function l(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(l)};case"Point":e=o(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(o);break;case"LineString":e=a(t.arcs);break;case"MultiLineString":e=t.arcs.map(a);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:n,coordinates:e}}var c=n(t.transform),h=t.arcs;return l(e)}function u(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),s.push(r)}}var i={},o={},a={},s=[],u=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++u],e[u]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),s=i[0],u=i[1];if(e=a[s])if(delete a[e.end],e.push(t),e.end=u,r=o[u]){delete o[r.start];var l=r===e?e:e.concat(r);o[l.start=e.start]=a[l.end=r.end]=l}else o[e.start]=a[e.end]=e;else if(e=o[u])if(delete o[e.start],e.unshift(t),e.start=s,r=a[s]){delete a[r.end];var c=r===e?e:r.concat(e);o[c.start=r.start]=a[c.end=e.end]=c}else o[e.start]=a[e.end]=e;else e=[t],o[e.start=s]=a[e.end=u]=e}),r(a,o),r(o,a),e.forEach(function(t){i[t<0?~t:t]||s.push([t])}),s}function l(t){return s(t,c.apply(this,arguments))}function c(t,e,n){var r,i,o;if(arguments.length>1)r=h(t,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:u(t,r)}}function h(t,e,n){function r(t){var e=t<0?~t:t;(c[e]||(c[e]=[])).push({i:t,g:u})}function i(t){t.forEach(r)}function o(t){t.forEach(i)}function a(t){t.forEach(o)}function s(t){switch(u=t,t.type){case"GeometryCollection":t.geometries.forEach(s);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":o(t.arcs);break;case"MultiPolygon":a(t.arcs)}}var u,l=[],c=[];return s(e),c.forEach(null==n?function(t){l.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&l.push(t[0].i)}),l}function f(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}function p(t){return s(t,d.apply(this,arguments))}function d(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)})}),a.push(t)}function i(e){return f(s(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},a=[],l=[];return e.forEach(n),a.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,l.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),a.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:l.map(function(e){var n,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&r.push(t)})})}),r=u(t,r),(n=r.length)>1)for(var a,s,l=1,c=i(r[0]);l<n;++l)(a=i(r[l]))>c&&(s=r[0],r[0]=r[l],r[l]=s,c=a);return r}).filter(function(t){return t.length>0})}}function v(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function g(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=i[t];n?n.push(e):i[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,e)}):t.type in a&&a[t.type](t.arcs,e)}var i={},o=t.map(function(){return[]}),a={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(r);for(var s in i)for(var u=i[s],l=u.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var f,p=u[c],d=u[h];(f=o[p])[s=v(f,d)]!==d&&f.splice(s,0,d),(f=o[d])[s=v(f,p)]!==p&&f.splice(s,0,p)}return o}function m(t){if(null==t)return e;var n,r,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(n=r=0);var u=2,l=t.length,c=new Array(l),h=Math.round((t[0]-a)/i),f=Math.round((t[1]-s)/o);for(c[0]=h-n,n=h,c[1]=f-r,r=f;u<l;)c[u]=t[u],++u;return c}}function y(t,e){function n(t){return p(t)}function i(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(i)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(n)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function o(t){var e,n=0,r=1,i=t.length,o=new Array(i);for(o[0]=p(t[0],0);++n<i;)((e=p(t[n],n))[0]||e[1])&&(o[r++]=e);return 1===r&&(o[r++]=[0,0]),o.length=r,o}if(t.transform)throw new Error("already quantized");if(e&&e.scale)h=t.bbox;else{if(!((a=Math.floor(e))>=2))throw new Error("n must be 2");h=t.bbox||r(t);var a,s=h[0],u=h[1],l=h[2],c=h[3];e={scale:[l-s?(l-s)/(a-1):1,c-u?(c-u)/(a-1):1],translate:[s,u]}}var h,f,p=m(e),d=t.objects,v={};for(f in d)v[f]=i(d[f]);return{type:"Topology",bbox:h,transform:e,objects:v,arcs:t.arcs.map(o)}}t.bbox=r,t.feature=o,t.merge=p,t.mergeArcs=d,t.mesh=l,t.meshArcs=c,t.neighbors=g,t.quantize=y,t.transform=n,t.untransform=m,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_tslib@1.11.1@tslib/tslib.js":function(t,e,n){(function(n){var r,i,o,a,s,u,l,c,h,f,p,d,v,g,m,y,_,b,x,w,S,E,M,T;!function(o){function a(t,e){return t!==s&&("function"==typeof Object.create?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(n,r){return t[n]=e?e(n,r):r}}var s="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:{};r=[e],void 0!==(i=function(t){o(a(s,a(t)))}.apply(e,r))&&(t.exports=i)}(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};o=function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},u=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},l=function(t,e){return function(n,r){e(n,r,t)}},c=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},f=function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},p=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},d=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},g=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t},m=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},y=function(t){return this instanceof y?(this.v=t,this):new y(t)},_=function(t,e,n){function r(t){c[t]&&(l[t]=function(e){return new Promise(function(n,r){h.push([t,e,n,r])>1||i(t,e)})})}function i(t,e){try{o(c[t](e))}catch(t){u(h[0][3],t)}}function o(t){t.value instanceof y?Promise.resolve(t.value.v).then(a,s):u(h[0][2],t)}function a(t){i("next",t)}function s(t){i("throw",t)}function u(t,e){t(e),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,c=n.apply(t,e||[]),h=[];return l={},r("next"),r("throw"),r("return"),l[Symbol.asyncIterator]=function(){return this},l},b=function(t){function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:y(t[e](n)),done:"return"===e}:i?i(n):n}:i}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n},x=function(t){function e(e){r[e]=t[e]&&function(r){return new Promise(function(i,o){r=t[e](r),n(i,o,r.done,r.value)})}}function n(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"==typeof d?d(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r)},w=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},S=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},E=function(t){return t&&t.__esModule?t:{default:t}},M=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},T=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},t("__extends",o),t("__assign",a),t("__rest",s),t("__decorate",u),t("__param",l),t("__metadata",c),t("__awaiter",h),t("__generator",f),t("__exportStar",p),t("__values",d),t("__read",v),t("__spread",g),t("__spreadArrays",m),t("__await",y),t("__asyncGenerator",_),t("__asyncDelegator",b),t("__asyncValues",x),t("__makeTemplateObject",w),t("__importStar",S),t("__importDefault",E),t("__classPrivateFieldGet",M),t("__classPrivateFieldSet",T)})}).call(this,n("./node_modules/_webpack@4.42.1@webpack/buildin/global.js"))},"./node_modules/_webpack@4.42.1@webpack/buildin/global.js":function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"./node_modules/_webpack@4.42.1@webpack/buildin/module.js":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js":function(t,e,n){var r;!function(e){"use strict";function i(){}function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function a(t){return function(){return this[t].apply(this,arguments)}}function s(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&s(t.listener)}var u=i.prototype,l=e.EventEmitter;u.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp){e={};for(n in r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n])}else e=r[t]||(r[t]=[]);return e},u.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},u.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},u.addListener=function(t,e){if(!s(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},u.on=a("addListener"),u.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},u.once=a("addOnceListener"),u.defineEvent=function(t){return this.getListeners(t),this},u.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},u.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&-1!==(n=o(i[r],e))&&i[r].splice(n,1);return this},u.off=a("removeListener"),u.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},u.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},u.manipulateListeners=function(t,e,n){var r,i,o=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)o.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?o.call(this,r,i):a.call(this,r,i));return this},u.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},u.removeAllListeners=a("removeEvent"),u.emitEvent=function(t,e){var n,r,i,o,a=this.getListenersAsObject(t);for(o in a)if(a.hasOwnProperty(o))for(n=a[o].slice(0),i=0;i<n.length;i++)r=n[i],!0===r.once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},u.trigger=a("emitEvent"),u.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},u.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},u._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},u._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return e.EventEmitter=l,i},void 0!==(r=function(){return i}.call(e,n,e,t))&&(t.exports=r)}("undefined"!=typeof window?window:this||{})},"./src/api/geo.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),a=n("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js"),s=n("./src/view.ts"),u=r.__importDefault(n("./src/util/get-geo-projection.ts")),l={geoArea:function(t){return o.geoArea(t)},geoAreaByName:function(t){return o.geoArea(this.geoFeatureByName(t))},geoCentroid:function(t){return o.geoCentroid(t)},geoCentroidByName:function(t){return o.geoCentroid(this.geoFeatureByName(t))},geoDistance:function(t,e){return o.geoDistance(t,e)},geoLength:function(t){return o.geoLength(t)},geoLengthByName:function(t){return o.geoLength(this.geoFeatureByName(t))},geoContains:function(t,e){return o.geoContains(t,e)},geoFeatureByName:function(t){var e,n=this.rows;return n.some(function(n){return n.name===t&&(e=n,!0)}),e},geoFeatureByPosition:function(t){var e,n=this.rows;return n.some(function(n){return!!o.geoContains(n,t)&&(e=n,!0)}),e},geoNameByPosition:function(t){var e=this.geoFeatureByPosition(t);if(e)return e.name},getGeoProjection:u.default,geoProject:function(t,e,n){return e=u.default(e,n),a.geoProject(t,e)},geoProjectByName:function(t,e,n){return e=u.default(e,n),a.geoProject(this.geoFeatureByName(t),e)},geoProjectPosition:function(t,e,n){return u.default(e,n)(t)},geoProjectInvert:function(t,e,n){return u.default(e,n).invert(t)}};i.assign(s.View.prototype,l)},"./src/api/hierarchy.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),i=n("./src/view.ts");r.assign(i.View.prototype,{getAllNodes:function(){var t=[],e=this.root;return e&&e.each?e.each(function(e){t.push(e)}):e&&e.eachNode&&e.eachNode(function(e){t.push(e)}),t},getAllLinks:function(){for(var t,e=[],n=[this.root];t=n.pop();){var r=t.children;r&&r.forEach(function(r){e.push({source:t,target:r}),n.push(r)})}return e}}),r.assign(i.View.prototype,{getAllEdges:i.View.prototype.getAllLinks})},"./src/api/partition.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=r.__importDefault(n("./src/util/partition.ts")),a=n("./src/view.ts");i.assign(a.View.prototype,{partition:function(t,e){return void 0===e&&(e=[]),o.default(this.rows,t,e)},group:function(t,e){void 0===e&&(e=[]);var n=this.partition(t,e);return i.values(n)},groups:function(t,e){return void 0===e&&(e=[]),this.group(t,e)}})},"./src/api/statistics.ts":function(t,e,n){"use strict";function r(t,e){var n=t.getColumn(e);return a.isArray(n)&&a.isArray(n[0])&&(n=a.flattenDeep(n)),n}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importStar(n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./src/view.ts"),u=i.__importDefault(n("./src/util/p-by-fraction.ts"));i.__importDefault(n("./src/constants.ts")).default.STATISTICS_METHODS.forEach(function(t){s.View.prototype[t]=function(e){return o[t](r(this,e))}});var l=o.quantile;a.assign(s.View.prototype,{average:s.View.prototype.mean,quantile:function(t,e){return l(r(this,t),e)},quantiles:function(t,e){var n=r(this,t);return e.map(function(t){return l(n,t)})},quantilesByFraction:function(t,e){return this.quantiles(t,u.default(e))},range:function(t){return[this.min(t),this.max(t)]},extent:function(t){return this.range(t)}})},"./src/connector/default.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js");n("./src/data-set.ts").DataSet.registerConnector("default",function(t,e){var n;if(!(n=r.isString(t)?e.getView(t):t))throw new TypeError("Invalid dataView");return r.deepMix([],n.rows)})},"./src/connector/dsv.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),i=n("./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js"),o=n("./src/data-set.ts");o.DataSet.registerConnector("dsv",function(t,e){void 0===e&&(e={});var n=e.delimiter||",";if(!r.isString(n))throw new TypeError("Invalid delimiter: must be a string!");return i.dsvFormat(n).parse(t)}),o.DataSet.registerConnector("csv",function(t){return i.csvParse(t)}),o.DataSet.registerConnector("tsv",function(t){return i.tsvParse(t)})},"./src/connector/geo-graticule.ts":function(t,e,n){"use strict";function r(t,e){e.dataType="geo-graticule";var n=i.geoGraticule().lines();return n.map(function(t,e){return t.index=""+e,t}),e.rows=n,n}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),o=n("./src/data-set.ts");e.default=r,o.DataSet.registerConnector("geo-graticule",r)},"./src/connector/geojson.ts":function(t,e,n){"use strict";function r(t,e,n){n.dataType=u.DataSet.CONSTANTS.GEO;var r=a.deepMix([],t.features);return r.forEach(function(t){t.name=t.properties.name,t.longitude=[],t.latitude=[];var e=t.pathData=l(t);o.default(e)._path.forEach(function(e){t.longitude.push(e[1]),t.latitude.push(e[2])});var n=l.centroid(t);t.centroidX=n[0],t.centroidY=n[1]}),r}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importDefault(n("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),u=n("./src/data-set.ts"),l=s.geoPath();u.DataSet.registerConnector("geo",r),u.DataSet.registerConnector("geojson",r),u.DataSet.registerConnector("GeoJSON",r),e.default=r},"./src/connector/graph.ts":function(t,e,n){"use strict";function r(t,e,n){e=i.assign({},a,e),n.dataType=o.DataSet.CONSTANTS.GRAPH;var r=e.nodes,s=e.edges;if(r&&!i.isFunction(r))throw new TypeError("Invalid nodes: must be a function!");if(s&&!i.isFunction(s))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:r(t),edges:s(t)},i.assign(n,n.graph),n.rows}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./src/data-set.ts"),a={nodes:function(t){return t.nodes},edges:function(t){return t.edges}};o.DataSet.registerConnector("graph",r),o.DataSet.registerConnector("diagram",r)},"./src/connector/hexjson.ts":function(t,e,n){"use strict";function r(t){return t.cx=t.x,t.cy=t.y,t.x=[],t.y=[],t.vertices.forEach(function(e){t.x.push(e.x+t.cx),t.y.push(e.y+t.cy)}),t}function i(t,e,n){n.dataType=s.DataSet.CONSTANTS.HEX,e=o.assign({},u,e);var i=e.width,l=e.height,c=o.deepMix([],t);n._HexJSON=c;var h=n._GridHexJSON=a.getGridForHexJSON(c),f=n.rows=a.renderHexJSON(c,i,l).map(r);return n._gridRows=a.renderHexJSON(h,i,l).map(r),f}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=n("./node_modules/_d3-hexjson@1.1.0@d3-hexjson/build/d3-hexjson.js"),s=n("./src/data-set.ts"),u={width:1,height:1};s.DataSet.registerConnector("hex",i),s.DataSet.registerConnector("hexjson",i),s.DataSet.registerConnector("hex-json",i),s.DataSet.registerConnector("HexJSON",i),e.default=i},"./src/connector/hierarchy.ts":function(t,e,n){"use strict";function r(t,e,n){n.dataType=a.DataSet.CONSTANTS.HIERARCHY;var r=e&&e.children?e.children:null;if(r&&!i.isFunction(r))throw new TypeError("Invalid children: must be a function!");return e.pureData?n.rows=n.root=t:n.rows=n.root=o.hierarchy(t,r),t}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js"),a=n("./src/data-set.ts");a.DataSet.registerConnector("hierarchy",r),a.DataSet.registerConnector("tree",r)},"./src/connector/topojson.ts":function(t,e,n){"use strict";function r(t,e,n){var r=e.object;if(!o.isString(r))throw new TypeError("Invalid object: must be a string!");var i=a.feature(t,t.objects[r]);return s.default(i,void 0,n)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=n("./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js"),s=i.__importDefault(n("./src/connector/geojson.ts")),u=n("./src/data-set.ts");u.DataSet.registerConnector("topojson",r),u.DataSet.registerConnector("TopoJSON",r)},"./src/constants.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},"./src/data-set.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=r.__importDefault(n("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),a=n("./src/view.ts"),s=r.__importDefault(n("./src/constants.ts")),u=function(t){function e(e){void 0===e&&(e={state:{}});var n=t.call(this)||this;return n.isDataSet=!0,n._onChangeTimer=null,n.views={},n.state={},n.state=e.state,n}return r.__extends(e,t),e.registerConnector=function(t,n){e.connectors[t]=n},e.getConnector=function(t){return e.connectors[t]||e.connectors.default},e.registerTransform=function(t,n){e.transforms[t]=n},e.getTransform=function(t){return e.transforms[t]||e.transforms.default},e.prototype._getUniqueViewName=function(){for(var t=i.uniqueId("view_");this.views[t];)t=i.uniqueId("view_");return t},e.prototype.createView=function(t,e){if(i.isNil(t)&&(t=this._getUniqueViewName()),i.isObject(t)&&(e=t,t=this._getUniqueViewName()),this.views[t])throw new Error("data view exists: "+t);var n=new a.View(this,e);return this.views[t]=n,n},e.prototype.getView=function(t){return this.views[t]},e.prototype.setView=function(t,e){this.views[t]=e},e.prototype.setState=function(t,e){var n=this;this.state[t]=e,this._onChangeTimer&&(window.clearTimeout(this._onChangeTimer),this._onChangeTimer=null),this._onChangeTimer=window.setTimeout(function(){n.emit("statechange",t,e)},16)},e.CONSTANTS=s.default,e.connectors={},e.transforms={},e.DataSet=e,e.DataView=a.View,e.View=a.View,e.version="____DATASET_VERSION____",e}(o.default);e.DataSet=u,i.assign(u,s.default),i.assign(u.prototype,{view:u.prototype.createView}),a.View.DataSet=u},"./src/index.ts":function(t,e,n){"use strict";n("./src/api/geo.ts"),n("./src/api/hierarchy.ts"),n("./src/api/partition.ts"),n("./src/api/statistics.ts"),n("./src/connector/default.ts"),n("./src/connector/dsv.ts"),n("./src/connector/geo-graticule.ts"),n("./src/connector/geojson.ts"),n("./src/connector/graph.ts"),n("./src/connector/hexjson.ts"),n("./src/connector/hierarchy.ts"),n("./src/connector/topojson.ts"),n("./src/transform/default.ts"),n("./src/transform/filter.ts"),n("./src/transform/fold.ts"),n("./src/transform/map.ts"),n("./src/transform/partition.ts"),n("./src/transform/percent.ts"),n("./src/transform/pick.ts"),n("./src/transform/proportion.ts"),n("./src/transform/rename.ts"),n("./src/transform/reverse.ts"),n("./src/transform/sort.ts"),n("./src/transform/sort-by.ts"),n("./src/transform/subset.ts"),n("./src/transform/fill-rows.ts"),n("./src/transform/impute.ts"),n("./src/transform/aggregate.ts"),n("./src/transform/regression.ts"),n("./src/transform/kde.ts"),n("./src/transform/bin/hexagon.ts"),n("./src/transform/bin/histogram.ts"),n("./src/transform/bin/quantile.ts"),n("./src/transform/bin/rectangle.ts"),n("./src/transform/geo/centroid.ts"),n("./src/transform/geo/projection.ts"),n("./src/transform/geo/region.ts"),n("./src/transform/diagram/arc.ts"),n("./src/transform/diagram/dagre.ts"),n("./src/transform/diagram/sankey.ts"),n("./src/transform/diagram/voronoi.ts"),n("./src/transform/hierarchy/cluster.ts"),n("./src/transform/hierarchy/compact-box.ts"),n("./src/transform/hierarchy/dendrogram.ts"),n("./src/transform/hierarchy/indented.ts"),n("./src/transform/hierarchy/pack.ts"),n("./src/transform/hierarchy/partition.ts"),n("./src/transform/hierarchy/tree.ts"),n("./src/transform/hierarchy/treemap.ts"),n("./src/transform/tag-cloud.ts"),n("./src/transform/waffle.ts"),n("./src/transform/kernel-smooth/density.ts"),n("./src/transform/kernel-smooth/regression.ts");var r=n("./src/data-set.ts");t.exports=r.DataSet},"./src/transform/aggregate.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},h,e);var n=c.getFields(e);if(!o.isArray(n))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var r=e.as||[];o.isString(r)&&(r=[r]);var i=e.operations;o.isString(i)&&(i=[i]);var a=[f];if(o.isArray(i)&&i.length||(console.warn('operations is not defined, will use [ "count" ] directly.'),i=a,r=i),1!==i.length||i[0]!==f){if(i.length!==n.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(r.length!==n.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var u=s.default(t.rows,e.groupBy),l=[];o.forIn(u,function(t){var e=t[0];i.forEach(function(i,o){var a=r[o],s=n[o];e[a]=p[i](t,s)}),l.push(e)}),t.rows=l}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=i.__importStar(n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),s=i.__importDefault(n("./src/util/partition.ts")),u=n("./src/data-set.ts"),l=u.DataSet.registerTransform,c=n("./src/util/option-parser.ts"),h={as:[],fields:[],groupBy:[],operations:[]},f="count",p={count:function(t){return t.length},distinct:function(t,e){return o.uniq(t.map(function(t){return t[e]})).length}};u.DataSet.CONSTANTS.STATISTICS_METHODS.forEach(function(t){p[t]=function(e,n){var r=e.map(function(t){return t[n]});return o.isArray(r)&&o.isArray(r[0])&&(r=o.flattenDeep(r)),a[t](r)}}),p.average=p.mean,l("aggregate",r),l("summary",r),e.default={VALID_AGGREGATES:o.keys(p)}},"./src/transform/bin/hexagon.ts":function(t,e,n){"use strict";function r(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}function i(t,e,n){var r=t-n;e/=2;var i=Math.floor(r/e);return[e*(i+(1===Math.abs(i%2)?1:0))+n,e*(i+(1===Math.abs(i%2)?0:1))+n]}function o(t,e,n){void 0===e&&(e=[1,1]),void 0===n&&(n=[0,0]);var o={},a=s.__read(e,2),u=a[0],l=a[1],c=s.__read(n,2),h=c[0],f=c[1];return t.forEach(function(t){var e,n,a,c,p,d=s.__read(t,2),v=d[0],g=d[1],m=s.__read(i(v,u,h),2),y=m[0],_=m[1],b=s.__read(i(g,l,f),2),x=b[0],w=b[1],S=r(v,g,y,x),E=r(v,g,_,w);S<E?(a="x"+y+"y"+x,e=s.__read([y,x],2),c=e[0],p=e[1]):(a="x"+_+"y"+w,n=s.__read([_,w],2),c=n[0],p=n[1]),o[a]=o[a]||{x:c,y:p,count:0},o[a].count++}),o}function a(t,e){e=u.assign({},h,e);var n=c.getFields(e);if(!u.isArray(n)||2!==n.length)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var r=s.__read(n,2),i=r[0],a=r[1],l=t.range(i),p=t.range(a),v=l[1]-l[0],g=p[1]-p[0],m=e.binWidth||[];if(2!==m.length){var y=s.__read(e.bins,2),_=y[0],b=y[1];if(_<=0||b<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");m=[v/_,g/b]}var x=s.__read(e.offset,2),w=x[0],S=x[1],E=3*m[0]/(f*m[1]),M=t.rows.map(function(t){return[t[i],E*t[a]]}),T=o(M,[m[0],E*m[1]],[w,E*S]),C=s.__read(e.as,3),A=C[0],P=C[1],k=C[2];if(!A||!P||!k)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var I=m[0]/f,O=d.map(function(t){return[Math.sin(t)*I,-Math.cos(t)*I]}),j=[],L=0;e.sizeByCount&&u.forIn(T,function(t){t.count>L&&(L=t.count)}),u.forIn(T,function(t){var n=t.x,r=t.y,i=t.count,o={};o[k]=i,e.sizeByCount?(o[A]=O.map(function(e){return n+t.count/L*e[0]}),o[P]=O.map(function(e){return(r+t.count/L*e[1])/E})):(o[A]=O.map(function(t){return n+t[0]}),o[P]=O.map(function(t){return(r+t[1])/E})),j.push(o)}),t.rows=j}Object.defineProperty(e,"__esModule",{value:!0});var s=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),u=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),l=n("./src/data-set.ts"),c=n("./src/util/option-parser.ts"),h={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},f=Math.sqrt(3),p=Math.PI/3,d=[0,p,2*p,3*p,4*p,5*p];l.DataSet.registerTransform("bin.hexagon",a),l.DataSet.registerTransform("bin.hex",a),l.DataSet.registerTransform("hexbin",a)},"./src/transform/bin/histogram.ts":function(t,e,n){"use strict";function r(t,e,n){var r=t-n,i=Math.floor(r/e);return[i*e+n,(i+1)*e+n]}function i(t,e){e=a.assign({},c,e);var n=l.getField(e);if(0!==t.rows.length){var i=t.range(n),u=i[1]-i[0],h=e.binWidth;if(!h){var f=e.bins;if(f<=0)throw new TypeError("Invalid bins: it must be a positive number!");h=u/f}var p=e.offset%h,d=[],v=e.groupBy,g=s.default(t.rows,v);a.forIn(g,function(t){var i={};t.map(function(t){return t[n]}).forEach(function(t){var e=o.__read(r(t,h,p),2),n=e[0],a=e[1],s=n+"-"+a;i[s]=i[s]||{x0:n,x1:a,count:0},i[s].count++});var s=o.__read(e.as,2),u=s[0],l=s[1];if(!u||!l)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var c=a.pick(t[0],v);a.forIn(i,function(t){var e=a.assign({},c);e[u]=[t.x0,t.x1],e[l]=t.count,d.push(e)})}),t.rows=d}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=o.__importDefault(n("./src/util/partition.ts")),u=n("./src/data-set.ts"),l=n("./src/util/option-parser.ts"),c={as:["x","count"],bins:30,offset:0,groupBy:[]};u.DataSet.registerTransform("bin.histogram",i),u.DataSet.registerTransform("bin.dot",i)},"./src/transform/bin/quantile.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},f,e);var n=h.getField(e),r=e.as;if(!o.isString(r))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var i=e.p,l=e.fraction;o.isArray(i)&&0!==i.length||(i=u.default(l));var c=t.rows,p=e.groupBy,d=s.default(c,p),v=[];o.forIn(d,function(t){var e=t[0],o=t.map(function(t){return t[n]}),s=i.map(function(t){return a.quantile(o,t)});e[r]=s,v.push(e)}),t.rows=v}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),s=i.__importDefault(n("./src/util/partition.ts")),u=i.__importDefault(n("./src/util/p-by-fraction.ts")),l=n("./src/data-set.ts"),c=l.DataSet.registerTransform,h=n("./src/util/option-parser.ts"),f={as:"_bin",groupBy:[],fraction:4};c("bin.quantile",r)},"./src/transform/bin/rectangle.ts":function(t,e,n){"use strict";function r(t,e,n){var r=t-n,i=Math.floor(r/e);return[i*e+n,(i+1)*e+n]}function i(t,e){e=a.assign({},c,e);var n=o.__read(l.getFields(e),2),i=n[0],s=n[1];if(!i||!s)throw new TypeError("Invalid fields: must be an array with 2 strings!");var u=t.range(i),h=t.range(s),f=u[1]-u[0],p=h[1]-h[0],d=e.binWidth||[];if(2!==d.length){var v=o.__read(e.bins,2),g=v[0],m=v[1];if(g<=0||m<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");d=[f/g,p/m]}var y=t.rows.map(function(t){return[t[i],t[s]]}),_={},b=o.__read(e.offset,2),x=b[0],w=b[1];y.forEach(function(t){var e=o.__read(r(t[0],d[0],x),2),n=e[0],i=e[1],a=o.__read(r(t[1],d[1],w),2),s=a[0],u=a[1],l=n+"-"+i+"-"+s+"-"+u;_[l]=_[l]||{x0:n,x1:i,y0:s,y1:u,count:0},_[l].count++});var S=[],E=o.__read(e.as,3),M=E[0],T=E[1],C=E[2];if(!M||!T||!C)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(e.sizeByCount){var A=0;a.forIn(_,function(t){t.count>A&&(A=t.count)}),a.forIn(_,function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1,a=t.count,s=a/A,u=o.__read([(e+n)/2,(r+i)/2],2),l=u[0],c=u[1],h=(n-e)*s/2,f=(i-r)*s/2,p=l-h,d=l+h,v=c-f,g=c+f,m={};m[M]=[p,d,d,p],m[T]=[v,v,g,g],m[C]=a,S.push(m)})}else a.forIn(_,function(t){var e={};e[M]=[t.x0,t.x1,t.x1,t.x0],e[T]=[t.y0,t.y0,t.y1,t.y1],e[C]=t.count,S.push(e)});t.rows=S}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./src/data-set.ts"),u=s.DataSet.registerTransform,l=n("./src/util/option-parser.ts"),c={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};u("bin.rectangle",i),u("bin.rect",i)},"./src/transform/default.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("./src/data-set.ts").DataSet.registerTransform("default",function(t){return t})},"./src/transform/diagram/arc.ts":function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n={}),t.forEach(function(t){var r=e.edgeSource(t),i=e.edgeTarget(t);n[r]||(n[r]={id:r}),n[i]||(n[i]={id:i})}),l.values(n)}function i(t,e,n){l.forIn(t,function(t,r){t.inEdges=e.filter(function(t){return""+n.target(t)==""+r}),t.outEdges=e.filter(function(t){return""+n.source(t)==""+r}),t.edges=t.outEdges.concat(t.inEdges),t.frequency=t.edges.length,t.value=0,t.inEdges.forEach(function(e){t.value+=n.targetWeight(e)}),t.outEdges.forEach(function(e){t.value+=n.sourceWeight(e)})})}function o(t,e){var n={weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,n){return(""+e.id(t)).localeCompare(""+e.id(n))}},r=n[e.sortBy];!r&&l.isFunction(e.sortBy)&&(r=e.sortBy),r&&t.sort(r)}function a(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.marginRatio;if(r<0||r>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var i=r/(2*n),o=e.thickness;if(o<=0||o>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var a=0;t.forEach(function(t){a+=t.value}),t.forEach(function(t){t.weight=t.value/a,t.width=t.weight*(1-r),t.height=o}),t.forEach(function(n,r){for(var a=0,s=r-1;s>=0;s--)a+=t[s].width+2*i;var u=n.minX=i+a,l=n.maxX=n.minX+n.width,c=n.minY=e.y-o/2,h=n.maxY=c+o;n.x=[u,l,l,u],n.y=[c,c,h,h]})}else{var s=1/n;t.forEach(function(t,n){t.x=(n+.5)*s,t.y=e.y})}}function s(t,e,n){if(n.weight){var r={};l.forIn(t,function(t,e){r[e]=t.value}),e.forEach(function(e){var i=n.source(e),o=n.target(e),a=t[i],s=t[o];if(a&&s){var u=r[i],l=n.sourceWeight(e),c=a.minX+(a.value-u)/a.value*a.width,h=c+l/a.value*a.width;r[i]-=l;var f=r[o],p=n.targetWeight(e),d=s.minX+(s.value-f)/s.value*s.width,v=d+p/s.value*s.width;r[o]-=p;var g=n.y;e.x=[c,h,d,v],e.y=[g,g,g,g]}})}else e.forEach(function(e){var r=t[n.source(e)],i=t[n.target(e)];r&&i&&(e.x=[r.x,i.x],e.y=[r.y,i.y])})}function u(t,e){e=l.assign({},h,e);var n={},u=t.nodes,c=t.edges;l.isArray(u)&&0!==u.length||(u=r(c,e,n)),u.forEach(function(t){var r=e.id(t);n[r]=t}),i(n,c,e),o(u,e),a(u,e),s(n,c,e),t.nodes=u,t.edges=c}Object.defineProperty(e,"__esModule",{value:!0});var l=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),c=n("./src/data-set.ts"),h={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};c.DataSet.registerTransform("diagram.arc",u),c.DataSet.registerTransform("arc",u)},"./src/transform/diagram/dagre.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},u,e);var n=new a.default.graphlib.Graph;n.setGraph({}),n.setDefaultEdgeLabel(function(){return{}}),t.nodes.forEach(function(t){var r=e.nodeId?e.nodeId(t):t.id;t.height||t.width||(t.height=t.width=e.edgesep),n.setNode(r,t)}),t.edges.forEach(function(t){n.setEdge(e.source(t),e.target(t))}),a.default.layout(n);var r=[],i=[];n.nodes().forEach(function(t){var e=n.node(t),i=e.x,o=e.y,a=e.height,s=e.width;e.x=[i-s/2,i+s/2,i+s/2,i-s/2],e.y=[o+a/2,o+a/2,o-a/2,o-a/2],r.push(e)}),n.edges().forEach(function(t){var e=n.edge(t).points,r={};r.x=e.map(function(t){return t.x}),r.y=e.map(function(t){return t.y}),i.push(r)}),t.nodes=r,t.edges=i}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=i.__importDefault(n("./node_modules/_dagre@0.8.5@dagre/index.js")),s=n("./src/data-set.ts"),u={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(t){return t.source},target:function(t){return t.target}};s.DataSet.registerTransform("diagram.dagre",r),s.DataSet.registerTransform("dagre",r)},"./src/transform/diagram/sankey.ts":function(t,e,n){"use strict";function r(t,e){e=i.assign({},u,e);var n=null;i.isString(e.nodeAlign)?n=s[e.nodeAlign]:i.isFunction(e.nodeAlign)&&(n=e.nodeAlign);var r=o.sankey().nodeSort(e.sort).links(function(t){return t.edges}).nodeWidth(e.nodeWidth).nodePadding(e.nodePadding).extent([[0,0],[1,1]]);i.isFunction(e.nodeId)&&r.nodeId(e.nodeId),n&&r.nodeAlign(n),r(t),t.nodes.forEach(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;t.x=[e,n,n,e],t.y=[r,r,i,i]}),t.edges.forEach(function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0;t.x=[r,r,i,i];var o=t.width/2;t.y=[t.y0+o,t.y0-o,t.y1+o,t.y1-o]})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js"),a=n("./src/data-set.ts"),s={sankeyLeft:o.sankeyLeft,sankeyRight:o.sankeyRight,sankeyCenter:o.sankeyCenter,sankeyJustify:o.sankeyJustify},u={value:function(t){return t.value},source:function(t){return t.source},target:function(t){return t.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02,sort:void 0};a.DataSet.registerTransform("diagram.sankey",r),a.DataSet.registerTransform("sankey",r)},"./src/transform/diagram/voronoi.ts":function(t,e,n){"use strict";function r(t,e){e=a.assign({},c,e);var n=e.as;if(!a.isArray(n)||2!==n.length)throw new TypeError("Invalid as: must be an array with two strings!");var r=n[0],i=n[1],s=l.getFields(e);if(!a.isArray(s)||2!==s.length)throw new TypeError("Invalid fields: must be an array with two strings!");var u=s[0],h=s[1],f=t.rows,p=f.map(function(t){return[t[u],t[h]]}),d=o.voronoi();e.extend&&d.extent(e.extend),e.size&&d.size(e.size);var v=d(p).polygons();f.forEach(function(t,e){var n=v[e].filter(function(t){return!!t});t[r]=n.map(function(t){return t[0]}),t[i]=n.map(function(t){return t[1]})})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importStar(n("./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./src/data-set.ts"),u=s.DataSet.registerTransform,l=n("./src/util/option-parser.ts"),c={as:["_x","_y"]};u("diagram.voronoi",r),u("voronoi",r)},"./src/transform/fill-rows.ts":function(t,e,n){"use strict";function r(t,e){var n=t.map(function(t){return t});return e.forEach(function(t){var e=n.indexOf(t);e>-1&&n.splice(e,1)}),n}function i(t,e){e=a.assign({},l,e);var n=t.rows,i=e.groupBy,o=e.orderBy,u=s.default(n,i,o),c=0,h=[];a.forIn(u,function(t){t.length>c&&(c=t.length,h=t)});var f=[],p={};if(h.forEach(function(t){var e=o.map(function(e){return t[e]}).join("-");f.push(e),p[e]=t}),"order"===e.fillBy){var d=h[0],v=[],g={};n.forEach(function(t){var e=o.map(function(e){return t[e]}).join("-");-1===v.indexOf(e)&&(v.push(e),g[e]=t)});r(v,f).forEach(function(t){var e={};i.forEach(function(t){e[t]=d[t]}),o.forEach(function(n){e[n]=g[t][n]}),n.push(e),h.push(e),f.push(t),p[t]=e}),c=h.length}a.forIn(u,function(t){if(t!==h&&t.length<c){var e=t[0],a=[];t.forEach(function(t){a.push(o.map(function(e){return t[e]}).join("-"))});r(f,a).some(function(r,a){if(a>=c-t.length)return!0;var s=p[r],u={};return i.forEach(function(t){u[t]=e[t]}),o.forEach(function(t){u[t]=s[t]}),n.push(u),!1})}})}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=o.__importDefault(n("./src/util/partition.ts")),u=n("./src/data-set.ts"),l={fillBy:"group",groupBy:[],orderBy:[]};u.DataSet.registerTransform("fill-rows",i),u.DataSet.registerTransform("fillRows",i)},"./src/transform/filter.ts":function(t,e,n){"use strict";function r(t){return!!t}Object.defineProperty(e,"__esModule",{value:!0}),n("./src/data-set.ts").DataSet.registerTransform("filter",function(t,e){t.rows=t.rows.filter(e.callback||r)})},"./src/transform/fold.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),i=n("./src/data-set.ts"),o=n("./src/util/option-parser.ts"),a={fields:[],key:"key",retains:[],value:"value"};i.DataSet.registerTransform("fold",function(t,e){var n=t.getColumnNames();e=r.assign({},a,e);var i=o.getFields(e);0===i.length&&(console.warn("warning: option fields is not specified, will fold all columns."),i=n);var s=e.key,u=e.value,l=e.retains;l&&0!==l.length||(l=r.difference(n,i));var c=[];t.rows.forEach(function(t){i.forEach(function(e){var n=r.pick(t,l);n[s]=e,n[u]=t[e],c.push(n)})}),t.rows=c})},"./src/transform/geo/centroid.ts":function(t,e,n){"use strict";function r(t,e){e=i.assign({},u,e);var n=s.getField(e),r=e.geoView||e.geoDataView;if(i.isString(r)&&t.dataSet&&(r=t.dataSet.getView(r)),!r||"geo"!==r.dataType)throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var o=e.as;if(!i.isArray(o)||2!==o.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var a=o[0],l=o[1];t.rows.forEach(function(t){var e=r.geoFeatureByName(t[n]);e&&(r._projectedAs?(t[a]=e[r._projectedAs[2]],t[l]=e[r._projectedAs[3]]):(t[a]=e.centroidX,t[l]=e.centroidY))})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./src/data-set.ts"),a=o.DataSet.registerTransform,s=n("./src/util/option-parser.ts"),u={as:["_centroid_x","_centroid_y"]};a("geo.centroid",r)},"./src/transform/geo/projection.ts":function(t,e,n){"use strict";function r(t,e){if("geo"!==t.dataType&&"geo-graticule"!==t.dataType)throw new TypeError("Invalid dataView: this transform is for Geo data only!");e=o.assign({},h,e);var n=e.projection;if(!n)throw new TypeError("Invalid projection!");n=c.default(n);var r=a.geoPath(n),u=e.as;if(!o.isArray(u)||4!==u.length)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');t._projectedAs=u;var l=i.__read(u,4),f=l[0],p=l[1],d=l[2],v=l[3];t.rows.forEach(function(t){t[f]=[],t[p]=[];var e=r(t);if(e){s.default(e)._path.forEach(function(e){t[f].push(e[1]),t[p].push(e[2])});var n=r.centroid(t);t[d]=n[0],t[v]=n[1]}}),t.rows=t.rows.filter(function(t){return 0!==t[f].length})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=n("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),s=i.__importDefault(n("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),u=n("./src/data-set.ts"),l=u.DataSet.registerTransform,c=i.__importDefault(n("./src/util/get-geo-projection.ts")),h={as:["_x","_y","_centroid_x","_centroid_y"]};l("geo.projection",r)},"./src/transform/geo/region.ts":function(t,e,n){"use strict";function r(t,e){e=i.assign({},u,e);var n=s.getField(e),r=e.geoView||e.geoDataView;if(i.isString(r)&&(r=t.dataSet.getView(r)),!r||"geo"!==r.dataType)throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var o=e.as;if(!i.isArray(o)||2!==o.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var a=o[0],l=o[1];t.rows.forEach(function(t){var e=r.geoFeatureByName(t[n]);e&&(r._projectedAs?(t[a]=e[r._projectedAs[0]],t[l]=e[r._projectedAs[1]]):(t[a]=e.longitude,t[l]=e.latitude))})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./src/data-set.ts"),a=o.DataSet.registerTransform,s=n("./src/util/option-parser.ts"),u={as:["_x","_y"]};a("geo.region",r)},"./src/transform/hierarchy/cluster.ts":function(t,e,n){"use strict";function r(t,e){if(t.dataType!==s.DataSet.CONSTANTS.HIERARCHY||!t.root)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=a.assign({},l,e);var r=e.as;if(!a.isArray(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var i=void 0;try{i=u.getField(e)}catch(t){console.warn(t)}i&&n.sum(function(t){return t[i]});var c=o.cluster();c.size(e.size),e.nodeSize&&c.nodeSize(e.nodeSize),e.separation&&c.separation(e.separation),c(n);var h=r[0],f=r[1];n.each(function(t){t[h]=t.x,t[f]=t.y})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importStar(n("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./src/data-set.ts"),u=n("./src/util/option-parser.ts"),l={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};s.DataSet.registerTransform("hierarchy.cluster",r),s.DataSet.registerTransform("dendrogram",r)},"./src/transform/hierarchy/compact-box.ts":function(t,e,n){"use strict";function r(t,e){var n=t.root;if(e=Object.assign({},s,e),t.dataType!==a.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=o.default.compactBox(n,e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importDefault(n("./node_modules/_@antv_hierarchy@0.6.2@@antv/hierarchy/build/hierarchy.js")),a=n("./src/data-set.ts"),s={};a.DataSet.registerTransform("hierarchy.compact-box",r),a.DataSet.registerTransform("compact-box-tree",r),a.DataSet.registerTransform("non-layered-tidy-tree",r),a.DataSet.registerTransform("mindmap-logical",r)},"./src/transform/hierarchy/dendrogram.ts":function(t,e,n){"use strict";function r(t,e){var n=t.root;if(e=Object.assign({},s,e),t.dataType!==a.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=o.default.dendrogram(n,e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importDefault(n("./node_modules/_@antv_hierarchy@0.6.2@@antv/hierarchy/build/hierarchy.js")),a=n("./src/data-set.ts"),s={};a.DataSet.registerTransform("hierarchy.dendrogram",r),a.DataSet.registerTransform("dendrogram",r)},"./src/transform/hierarchy/indented.ts":function(t,e,n){"use strict";function r(t,e){var n=t.root;if(e=Object.assign({},s,e),t.dataType!==a.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=o.default.indented(n,e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importDefault(n("./node_modules/_@antv_hierarchy@0.6.2@@antv/hierarchy/build/hierarchy.js")),a=n("./src/data-set.ts"),s={};a.DataSet.registerTransform("hierarchy.indented",r),a.DataSet.registerTransform("indented-tree",r)},"./src/transform/hierarchy/pack.ts":function(t,e,n){"use strict";function r(t,e){if(t.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=o.assign({},l,e);var r=e.as;if(!o.isArray(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var i;try{i=u.getField(e)}catch(t){console.warn(t)}i&&n.sum(function(t){return t[i]}).sort(function(t,e){return e[i]-t[i]});var c=a.pack();c.size(e.size),e.padding&&c.padding(e.padding),c(n);var h=r[0],f=r[1],p=r[2];n.each(function(t){t[h]=t.x,t[f]=t.y,t[p]=t.r})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=i.__importStar(n("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=n("./src/data-set.ts"),u=n("./src/util/option-parser.ts"),l={field:"value",size:[1,1],padding:0,as:["x","y","r"]};s.DataSet.registerTransform("hierarchy.pack",r),s.DataSet.registerTransform("hierarchy.circle-packing",r),s.DataSet.registerTransform("circle-packing",r)},"./src/transform/hierarchy/partition.ts":function(t,e,n){"use strict";function r(t,e){if(t.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=a.assign({},l,e);var r=e.as;if(!a.isArray(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var i;try{i=u.getField(e)}catch(t){console.warn(t)}i&&n.sum(function(t){return t[i]});var c=o.partition();c.size(e.size).round(e.round).padding(e.padding),c(n);var h=r[0],f=r[1];n.each(function(t){t[h]=[t.x0,t.x1,t.x1,t.x0],t[f]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach(function(e){-1===r.indexOf(e)&&delete t[e]})})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importStar(n("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./src/data-set.ts"),u=n("./src/util/option-parser.ts"),l={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};s.DataSet.registerTransform("hierarchy.partition",r),s.DataSet.registerTransform("adjacency",r)},"./src/transform/hierarchy/tree.ts":function(t,e,n){"use strict";function r(t,e){if(t.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=a.assign({},l,e);var r=e.as;if(!a.isArray(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var i;try{i=u.getField(e)}catch(t){console.warn(t)}i&&n.sum(function(t){return t[i]});var c=o.tree();c.size(e.size),e.nodeSize&&c.nodeSize(e.nodeSize),e.separation&&c.separation(e.separation),c(n);var h=r[0],f=r[1];n.each(function(t){t[h]=t.x,t[f]=t.y})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importStar(n("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./src/data-set.ts"),u=n("./src/util/option-parser.ts"),l={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};s.DataSet.registerTransform("hierarchy.tree",r),s.DataSet.registerTransform("tree",r)},"./src/transform/hierarchy/treemap.ts":function(t,e,n){"use strict";function r(t,e){if(t.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=a.assign({},l,e);var r=e.as;if(!a.isArray(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var i;try{i=u.getField(e)}catch(t){console.warn(t)}i&&n.sum(function(t){return t[i]});var c=o.treemap();c.tile(o[e.tile]).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft),c(n);var h=r[0],f=r[1];n.each(function(t){t[h]=[t.x0,t.x1,t.x1,t.x0],t[f]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach(function(e){-1===r.indexOf(e)&&delete t[e]})})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importStar(n("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=n("./src/data-set.ts"),u=n("./src/util/option-parser.ts"),l={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};s.DataSet.registerTransform("hierarchy.treemap",r),s.DataSet.registerTransform("treemap",r)},"./src/transform/impute.ts":function(t,e,n){"use strict";function r(t){return t.filter(function(t){return!a.isUndefined(t)})}function i(t,e){e=a.assign({},h,e);var n=c.getField(e),i=e.method;if(!i)throw new TypeError("Invalid method!");if("value"===i&&!a.has(e,"value"))throw new TypeError("Invalid value: it is nil.");var o=r(t.getColumn(n)),s=u.default(t.rows,e.groupBy);a.forIn(s,function(t){var s=r(t.map(function(t){return t[n]}));0===s.length&&(s=o),t.forEach(function(r){if(a.isUndefined(r[n]))if(a.isFunction(i))r[n]=i(r,s,e.value,t);else{if(!a.isString(i))throw new TypeError("Invalid method: must be a function or one of "+f.join(", "));r[n]=p[i](r,s,e.value)}})})}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=o.__importStar(n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),u=o.__importDefault(n("./src/util/partition.ts")),l=n("./src/data-set.ts"),c=n("./src/util/option-parser.ts"),h={groupBy:[]},f=["mean","median","max","min"],p={};f.forEach(function(t){p[t]=function(e,n){return s[t](n)}}),p.value=function(t,e,n){return n},l.DataSet.registerTransform("impute",i)},"./src/transform/kde.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},p,e);var n=h.getFields(e);if(!o.isArray(n)||n.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var r=e.as;if(!o.isArray(r)||3!==r.length)throw new TypeError("invalid as: must be an array of 3 strings!");var c=e.method;if(o.isString(c)){if(-1===d.indexOf(c))throw new TypeError("invalid method: "+c+". Must be one of "+d.join(", "));c=s.default[c]}if(!o.isFunction(c))throw new TypeError("invalid method: kernel method must be a function!");var v=e.extent;if(!o.isArray(v)||0===v.length){var g=[];o.each(n,function(e){var n=t.range(e);g=g.concat(n)}),v=[Math.min.apply(Math,i.__spread(g)),Math.max.apply(Math,i.__spread(g))]}var m=e.bandwidth;o.isString(m)&&u[m]?m=u[m](t.getColumn(n[0])):o.isFunction(m)?m=m(t.getColumn(n[0])):(!o.isNumber(m)||m<=0)&&(m=u.nrd(t.getColumn(n[0])));var y=a.default(v,e.step?e.step:m),_=[],b=e.groupBy,x=l.default(t.rows,b);o.forIn(x,function(t){var a={};o.each(n,function(n){var s=o.pick(t[0],b);a[n]=f.kernelDensityEstimation(t.map(function(t){return t[n]}),c,m);var u=i.__read(r,3),l=u[0],h=u[1],p=u[2];s[l]=n,s[h]=[],s[p]=[],o.each(y,function(t){var r=a[n](t);r>=e.minSize&&(s[h].push(t),s[p].push(r))}),_.push(s)})}),t.rows=_}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=i.__importDefault(n("./src/util/get-series-values.ts")),s=i.__importDefault(n("./src/util/kernel.ts")),u=i.__importStar(n("./src/util/bandwidth.ts")),l=i.__importDefault(n("./src/util/partition.ts")),c=n("./src/data-set.ts"),h=n("./src/util/option-parser.ts"),f=n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),p={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},d=o.keys(s.default),v=o.keys(u);c.DataSet.registerTransform("kernel-density-estimation",r),c.DataSet.registerTransform("kde",r),c.DataSet.registerTransform("KDE",r),e.default={KERNEL_METHODS:d,BANDWIDTH_METHODS:v}},"./src/transform/kernel-smooth/density.ts":function(t,e,n){"use strict";function r(t,e){var n,r;e=o.assign({},h,e);var u=l.getFields(e);if(!o.isArray(u)||2!==u.length)throw new TypeError("invalid fields: must be an array of 2 strings!");var p=i.__read(e.as,3),d=p[0],v=p[1],g=p[2];if(!o.isString(d)||!o.isString(v)||!o.isString(g))throw new TypeError("invalid as: must be an array of 3 strings!");var m;if(o.isString(e.method)){if(-1===f.indexOf(e.method))throw new TypeError("invalid method: "+e.method+". Must be one of "+f.join(", "));m=s.default[e.method]}var y,_,b=i.__read(u,2),x=b[0],w=b[1],S=e.extent,E=e.bandwidth;S&&Array.isArray(S)&&Array.isArray(S[0])&&Array.isArray(S[1])?(n=i.__read(S,2),y=n[0],_=n[1]):(y=t.range(x),_=t.range(w));var M,T;E&&Array.isArray(E)&&E.slice(0,2).every(o.isNumber)&&E.slice(0,2).every(function(t){return t>0})?(r=i.__read(E,2),M=r[0],T=r[1]):(M=c.silverman(t.getColumn(x)),T=c.silverman(t.getColumn(w)));for(var C=a.default(y,M),A=a.default(_,T),P=t.rows.length,k=[],I=0;I<C.length;I++)for(var O=0;O<A.length;O++){for(var j=0,L=C[I],D=A[O],R=0;R<P;R++)j+=m((L-t.rows[R][x])/M)*m((D-t.rows[R][w])/T);var B=1/(P*M*T)*j,z={};z[d]=L,z[v]=D,z[g]=B,k.push(z)}t.rows=k}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=i.__importDefault(n("./src/util/get-series-values.ts")),s=i.__importDefault(n("./src/util/kernel.ts")),u=n("./src/data-set.ts"),l=n("./src/util/option-parser.ts"),c=n("./src/util/bandwidth.ts"),h={as:["x","y","z"],method:"gaussian"},f=o.keys(s.default);u.DataSet.registerTransform("kernel-smooth.density",r),u.DataSet.registerTransform("kernel.density",r),e.default={KERNEL_METHODS:f}},"./src/transform/kernel-smooth/regression.ts":function(t,e,n){"use strict";function r(t,e,n,r){return t((r-n)/e)}function i(t){return function(e){return s.isArray(e)?e.map(function(e){return t(e)}):t(e)}}function o(t,e){e=s.assign({},d,e);var n=f.getFields(e);if(!s.isArray(n)||1!==n.length&&2!==n.length)throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var o=a.__read(e.as,2),c=o[0],g=o[1];if(!s.isString(c)||!s.isString(g))throw new TypeError("invalid as: must be an array of 2 strings!");var m,y=e.method;if(s.isString(y)){if(-1===v.indexOf(y))throw new TypeError("invalid method: "+y+". Must be one of "+v.join(", "));m=l.default[y]}var _=a.__read(n,2),b=_[0],x=_[1],w=t.getColumn(b),S=e.extent;!S&&s.isArray(S)||(S=t.range(b));var E=e.bandwidth;(!E||!s.isNumber(E)||E<=0)&&(E=p.silverman(w));var M,T=u.default(S,E),C=w.length,A=r.bind(null,m,E);if(s.isNil(x))M=i(function(t){var e=w.map(function(e){return A(t,e)}),n=h.sum(e),r=C*E;return n&&r?n/r:0});else{var P=t.getColumn(x);M=i(function(t){var e=w.map(function(e){return A(t,e)}),n=h.sum(e.map(function(t,e){return t*P[e]})),r=h.sum(e);return n&&r?n/r:0})}var k=T.map(function(t){var e={};return e[c]=t,e[g]=M(t),e});t.rows=k}Object.defineProperty(e,"__esModule",{value:!0});var a=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),s=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),u=a.__importDefault(n("./src/util/get-series-values.ts")),l=a.__importDefault(n("./src/util/kernel.ts")),c=n("./src/data-set.ts"),h=n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),f=n("./src/util/option-parser.ts"),p=n("./src/util/bandwidth.ts"),d={as:["x","y"],method:"gaussian"},v=s.keys(l.default);c.DataSet.registerTransform("kernel-smooth.regression",o),c.DataSet.registerTransform("kernel.regression",o),e.default={KERNEL_METHODS:v}},"./src/transform/map.ts":function(t,e,n){"use strict";function r(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),n("./src/data-set.ts").DataSet.registerTransform("map",function(t,e){t.rows=t.rows.map(e.callback||r)})},"./src/transform/partition.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},u,e),t.rows=o.values(a.default(t.rows,e.groupBy,e.orderBy))}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=i.__importDefault(n("./src/util/partition.ts")),s=n("./src/data-set.ts"),u={groupBy:[],orderBy:[]};s.DataSet.registerTransform("partition",function(t,e){e=o.assign({},u,e),t.rows=a.default(t.rows,e.groupBy,e.orderBy)}),s.DataSet.registerTransform("group",r),s.DataSet.registerTransform("groups",r)},"./src/transform/percent.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},c,e);var n=l.getField(e),r=e.dimension,i=e.groupBy,u=e.as;if(!o.isString(r))throw new TypeError("Invalid dimension: must be a string!");if(o.isArray(u)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),u=u[0]),!o.isString(u))throw new TypeError("Invalid as: must be a string!");var h=t.rows,f=[],p=s.default(h,i);o.forIn(p,function(t){var e=a.sum(t.map(function(t){return t[n]}));0===e&&console.warn("Invalid data: total sum of field "+n+" is 0!");var i=s.default(t,[r]);o.forIn(i,function(t){var i=a.sum(t.map(function(t){return t[n]})),o=t[0],s=o[r];o[n]=i,o[r]=s,o[u]=0===e?0:i/e,f.push(o)})}),t.rows=f}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),s=i.__importDefault(n("./src/util/partition.ts")),u=n("./src/data-set.ts"),l=n("./src/util/option-parser.ts"),c={groupBy:[],as:"_percent"};u.DataSet.registerTransform("percent",r)},"./src/transform/pick.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),i=n("./src/data-set.ts"),o=n("./src/util/option-parser.ts");i.DataSet.registerTransform("pick",function(t,e){var n=o.getFields(e,t.getColumnNames());t.rows=t.rows.map(function(t){return r.pick(t,n)})})},"./src/transform/proportion.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},l,e);var n=u.getField(e),r=e.dimension,i=e.groupBy,s=e.as;if(!o.isString(r))throw new TypeError("Invalid dimension: must be a string!");if(o.isArray(s)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),s=s[0]),!o.isString(s))throw new TypeError("Invalid as: must be a string!");var c=t.rows,h=[],f=a.default(c,i);o.forIn(f,function(t){var e=t.length,i=a.default(t,[r]);o.forIn(i,function(t){var i=t.length,o=t[0],a=o[r];o[n]=i,o[r]=a,o[s]=i/e,h.push(o)})}),t.rows=h}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=i.__importDefault(n("./src/util/partition.ts")),s=n("./src/data-set.ts"),u=n("./src/util/option-parser.ts"),l={groupBy:[],as:"_proportion"};s.DataSet.registerTransform("proportion",r)},"./src/transform/regression.ts":function(t,e,n){"use strict";function r(t,e){e=a.assign({},h,e);var n=l.getFields(e);if(!a.isArray(n)||2!==n.length)throw new TypeError("invalid fields: must be an array of 2 strings.");var r=i.__read(n,2),u=r[0],p=r[1],d=e.method;if(-1===f.indexOf(d))throw new TypeError("invalid method: "+d+". Must be one of "+f.join(", "));var v=t.rows.map(function(t){return[t[u],t[p]]}),g=o.default[d](v,e),m=e.extent;a.isArray(m)&&2===m.length||(m=t.range(u));var y=e.bandwidth;(!a.isNumber(y)||y<=0)&&(y=c.silverman(t.getColumn(u)));var _=s.default(m,y),b=[],x=i.__read(e.as,2),w=x[0],S=x[1];_.forEach(function(t){var e={},n=i.__read(g.predict(t),2),r=n[0],o=n[1];e[w]=r,e[S]=o,isFinite(o)&&b.push(e)}),t.rows=b}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importDefault(n("./node_modules/_regression@2.0.1@regression/dist/regression.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=i.__importDefault(n("./src/util/get-series-values.ts")),u=n("./src/data-set.ts"),l=n("./src/util/option-parser.ts"),c=n("./src/util/bandwidth.ts"),h={as:["x","y"],method:"linear",order:2,precision:2},f=["linear","exponential","logarithmic","power","polynomial"];u.DataSet.registerTransform("regression",r),e.default={REGRESSION_METHODS:f}},"./src/transform/rename.ts":function(t,e,n){"use strict";function r(t,e){var n=e.map||{},r={};i.isPlainObject(n)&&i.forIn(n,function(t,e){i.isString(t)&&i.isString(e)&&(r[e]=t)}),t.rows.forEach(function(t){i.forIn(r,function(e,n){var r=t[n];delete t[n],t[e]=r})})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./src/data-set.ts");o.DataSet.registerTransform("rename",r),o.DataSet.registerTransform("rename-fields",r)},"./src/transform/reverse.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("./src/data-set.ts").DataSet.registerTransform("reverse",function(t){t.rows.reverse()})},"./src/transform/sort-by.ts":function(t,e,n){"use strict";function r(t,e){var n=a.getFields(e,[t.getColumnName(0)]);if(!i.isArray(n))throw new TypeError("Invalid fields: must be an array with strings!");t.rows=i.sortBy(t.rows,n);var r=e.order;if(r&&-1===s.indexOf(r))throw new TypeError("Invalid order: "+r+" must be one of "+s.join(", "));"DESC"===r&&t.rows.reverse()}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=n("./src/data-set.ts"),a=n("./src/util/option-parser.ts"),s=["ASC","DESC"];o.DataSet.registerTransform("sort-by",r),o.DataSet.registerTransform("sortBy",r)},"./src/transform/sort.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("./src/data-set.ts").DataSet.registerTransform("sort",function(t,e){var n=t.getColumnName(0);t.rows.sort(e.callback||function(t,e){return t[n]-e[n]})})},"./src/transform/subset.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./src/data-set.ts"),i=n("./src/util/option-parser.ts");r.DataSet.registerTransform("subset",function(t,e){var n=e.startRowIndex||0,r=e.endRowIndex||t.rows.length-1,o=i.getFields(e,t.getColumnNames());t.rows=t.getSubset(n,r,o)})},"./src/transform/tag-cloud.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},l,e);var n=s.default();["font","fontSize","padding","rotate","size","spiral","timeInterval"].forEach(function(t){e[t]&&n[t](e[t])});var r=u.getFields(e),a=i.__read(r,2),c=a[0],h=a[1];if(!o.isString(c)||!o.isString(h))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var f=t.rows.map(function(t){return t.text=t[c],t.value=t[h],t});n.words(f),e.imageMask&&n.createMask(e.imageMask);var p=n.start(),d=p._tags,v=p._bounds;d.forEach(function(t){t.x+=e.size[0]/2,t.y+=e.size[1]/2});var g=i.__read(e.size,2),m=g[0],y=g[1],_=p.hasImage;d.push({text:"",value:0,x:_?0:v[0].x,y:_?0:v[0].y,opacity:0}),d.push({text:"",value:0,x:_?m:v[1].x,y:_?y:v[1].y,opacity:0}),t.rows=d,t._tagCloud=p}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=n("./src/data-set.ts"),s=i.__importDefault(n("./src/util/tag-cloud.ts")),u=n("./src/util/option-parser.ts"),l={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};a.DataSet.registerTransform("tag-cloud",r),a.DataSet.registerTransform("word-cloud",r)},"./src/transform/waffle.ts":function(t,e,n){"use strict";function r(t,e){e=o.assign({},c,e);var n=l.getFields(e),r=i.__read(n,2),u=r[0],h=r[1],f=i.__read(e.as,2),p=f[0],d=f[1],v=e.groupBy,g=s.default(t.rows,v),m=o.keys(g),y=i.__read(e.size,2),_=y[0],b=y[1],x=e.maxCount,w=m.length,S=b/w,E=e.rows,M=e.gapRatio,T=[],C=e.scale,A=0,P=0;o.forIn(g,function(t){var e=a.sum(o.map(t,function(t){return t[h]})),n=Math.ceil(e*C/E);e*C>x&&(C=x/e,n=Math.ceil(e*C/E)),P=_/n}),o.forIn(g,function(t){var e=[A*S,(A+1)*S],n=e[1]-e[0],r=n*(1-M)/E,i=0,a=0;o.each(t,function(t){for(var n=t[h],s=Math.round(n*C),l=0;l<s;l++){a===E&&(a=0,i++);var c=o.pick(t,[u,h].concat(v));c[p]=i*P+P/2,c[d]=a*r+r/2+e[0],c._wStep=P,c._hStep=r,a++,T.push(c)}}),A+=1}),t.rows=T}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a=n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),s=i.__importDefault(n("./src/util/partition.ts")),u=n("./src/data-set.ts"),l=n("./src/util/option-parser.ts"),c={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};u.DataSet.registerTransform("waffle",r)},"./src/util/bandwidth.ts":function(t,e,n){"use strict";function r(t){var e=o.standardDeviation(t),n=4*Math.pow(e,5),r=3*t.length;return Math.pow(n/r,.2)}function i(t){var e=o.standardDeviation(t),n=o.interquartileRange(t);return"number"==typeof n&&(e=Math.min(e,n/1.34)),1.06*e*Math.pow(t.length,-.2)}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js");e.silverman=r,e.nrd=i},"./src/util/get-geo-projection.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=r.__importStar(n("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js")),a=r.__importStar(n("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js")),s=r.__importStar(n("./node_modules/_d3-composite-projections@1.3.2@d3-composite-projections/d3-composite-projections.js"));e.default=function(t,e){if(void 0===e&&(e=!1),i.isFunction(t))return e?t:t();if(i.isString(t)){if(o[t])return e?o[t]:o[t]();if(a[t])return e?a[t]:a[t]();if(s[t])return e?s[t]:s[t]()}return null}},"./src/util/get-series-values.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_tslib@1.11.1@tslib/tslib.js");e.default=function(t,e){for(var n=e||1,i=r.__read(t,2),o=i[0],a=i[1],s=[],u=o;u<a;)s.push(u),u+=n;return s.push(a),s}},"./src/util/kernel.ts":function(t,e,n){"use strict";function r(t){return Math.abs(t)<=1?.5:0}function i(t){var e=1-Math.pow(Math.abs(t),3);return Math.pow(e,3)}Object.defineProperty(e,"__esModule",{value:!0}),e.default={boxcar:r,cosine:function(t){return Math.abs(t)<=1?Math.PI/4*Math.cos(Math.PI/2*t):0},epanechnikov:function(t){return Math.abs(t)<1?.75*(1-t*t):0},gaussian:function(t){return.3989422804*Math.exp(-.5*t*t)},quartic:function(t){if(Math.abs(t)<1){var e=1-t*t;return.9375*e*e}return 0},triangular:function(t){var e=Math.abs(t);return e<1?1-e:0},tricube:function(t){return Math.abs(t)<1?70/81*i(t):0},triweight:function(t){if(Math.abs(t)<1){var e=1-t*t;return 35/32*e*e*e}return 0},uniform:r}},"./src/util/option-parser.ts":function(t,e,n){"use strict";function r(t,e){var n=t.field,r=t.fields;if(o.isString(n))return n;if(o.isArray(n))return console.warn(a),n[0];if(console.warn(a+" will try to get fields instead."),o.isString(r))return r;if(o.isArray(r)&&r.length)return r[0];if(e)return e;throw new TypeError(a)}function i(t,e){var n=t.field,r=t.fields;if(o.isArray(r))return r;if(o.isString(r))return console.warn(s),[r];if(console.warn(s+" will try to get field instead."),o.isString(n))return console.warn(s),[n];if(o.isArray(n)&&n.length)return console.warn(s),n;if(e)return e;throw new TypeError(s)}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),a="Invalid field: it must be a string!",s="Invalid fields: it must be an array!";e.getField=r,e.getFields=i},"./src/util/p-by-fraction.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=1/t,n=[],r=0;r<=1;r+=e)n.push(r);return n}},"./src/util/partition.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),o=r.__importDefault(n("./src/util/simple-sort-by.ts"));e.default=function(t,e,n){void 0===n&&(n=[]);var r=t;n&&n.length&&(r=o.default(t,n));var a;return i.isFunction(e)?a=e:i.isArray(e)?a=function(t){return"_"+e.map(function(e){return t[e]}).join("-")}:i.isString(e)&&(a=function(t){return"_"+t[e]}),i.groupBy(r,a)}},"./src/util/simple-sort-by.ts":function(t,e,n){"use strict";function r(t,e){void 0===e&&(e=[]);var n=void 0;return i.isFunction(e)?n=e:i.isArray(e)?n=function(t,n){for(var r=0;r<e.length;r++){var i=e[r];if(t[i]<n[i])return-1;if(t[i]>n[i])return 1}return 0}:i.isString(e)&&(n=function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0}),t.sort(n)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js");e.default=r},"./src/util/tag-cloud.ts":function(t,e,n){"use strict";function r(t){return t.text}function i(){return"serif"}function o(){return"normal"}function a(t){return t.value}function s(){return 90*~~(2*Math.random())}function u(){return 1}function l(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,(x<<5)/o,w/o);var a=0,s=0,u=0,l=n.length;for(--r;++r<l;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font;var c=i.measureText(e.text+"m").width*o,h=e.size<<1;if(e.rotate){var f=Math.sin(e.rotate*b),p=Math.cos(e.rotate*b),d=c*p,v=c*f,g=h*p,m=h*f;c=Math.max(Math.abs(d+m),Math.abs(d-m))+31>>5<<5,h=~~Math.max(Math.abs(v+g),Math.abs(v-g))}else c=c+31>>5<<5;if(h>u&&(u=h),a+c>=x<<5&&(a=0,s+=u,u=0),s+h>=w)break;i.translate((a+(c>>1))/o,(s+(h>>1))/o),e.rotate&&i.rotate(e.rotate*b),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=h,e.xoff=a,e.yoff=s,e.x1=c>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=c}for(var y=i.getImageData(0,0,(x<<5)/o,w/o).data,_=[];--r>=0;)if(e=n[r],e.hasText){for(var c=e.width,S=c>>5,h=e.y1-e.y0,E=0;E<h*S;E++)_[E]=0;if(null==(a=e.xoff))return;s=e.yoff;for(var M=0,T=-1,C=0;C<h;C++){for(var E=0;E<c;E++){var A=S*C+(E>>5),P=y[(s+C)*(x<<5)+(a+E)<<2]?1<<31-E%32:0;_[A]|=P,M|=P}M?T=C:(e.y0++,h--,C--,s++)}e.y1=e.y0+T,e.sprite=_.slice(0,(e.y1-e.y0)*S)}}}function c(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,u=32-s,l=t.y1-t.y0,c=(t.y+t.y0)*n+(a>>5),h=0;h<l;h++){r=0;for(var f=0;f<=o;f++)if((r<<u|(f<o?(r=i[h*o+f])>>>s:0))&e[c+f])return!0;c+=n}return!1}function h(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function f(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function p(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function d(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(t){var o=t<0?-1:1;switch(Math.sqrt(1+4*o*t)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e}return[r,i]}}function v(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function g(){return document.createElement("canvas")}function m(t){return"function"==typeof t?t:function(){return t}}function y(){function t(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(x<<5)/e,t.height=w/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function e(t,e,r){for(var i,o,a,s=e.x,u=e.y,l=Math.sqrt(n[0]*n[0]+n[1]*n[1]),h=A(n),p=I()<.5?1:-1,d=-p;(i=h(d+=p))&&(o=~~i[0],a=~~i[1],!(Math.min(Math.abs(o),Math.abs(a))>=l));)if(e.x=s+o,e.y=u+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>n[0]||e.y+e.y1>n[1])&&(!r||!c(e,t,n[0]))&&(!r||f(e,r))){for(var v=e.sprite,g=e.width>>5,m=n[0]>>5,y=e.x-(g<<4),_=127&y,b=32-_,x=e.y1-e.y0,w=void 0,S=(e.y+e.y0)*m+(y>>5),E=0;E<x;E++){w=0;for(var M=0;M<=g;M++)t[S+M]|=w<<b|(M<g?(w=v[E*g+M])>>>_:0);S+=m}return delete e.sprite,!0}return!1}var n=[256,256],d=r,y=i,b=a,E=o,M=o,T=s,C=u,A=p,P=[],k=1/0,I=Math.random,O=g,j={};return j.canvas=function(t){return arguments.length?(O=m(t),j):O},j.start=function(){function r(){for(var t=Date.now();Date.now()-t<k&&++g<c;){var r=p[g];r.x=o*(I()+.5)>>1,r.y=a*(I()+.5)>>1,l(s,r,p,g),r.hasText&&e(u,r,m)&&(f.push(r),m?j.hasImage||h(m,r):m=[{x:r.x+r.x0,y:r.y+r.y0},{x:r.x+r.x1,y:r.y+r.y1}],r.x-=n[0]>>1,r.y-=n[1]>>1)}j._tags=f,j._bounds=m}var i=_.__read(n,2),o=i[0],a=i[1],s=t(O()),u=j.board?j.board:v((n[0]>>5)*n[1]),c=P.length,f=[],p=P.map(function(t,e){return t.text=d.call(this,t,e),t.font=y.call(this,t,e),t.style=E.call(this,t,e),t.weight=M.call(this,t,e),t.rotate=T.call(this,t,e),t.size=~~b.call(this,t,e),t.padding=C.call(this,t,e),t}).sort(function(t,e){return e.size-t.size}),g=-1,m=j.board?[{x:0,y:0},{x:o,y:a}]:null;return r(),j},j.createMask=function(t){var e=document.createElement("canvas"),r=_.__read(n,2),i=r[0],o=r[1],a=i>>5,s=v((i>>5)*o);e.width=i,e.height=o;var u=e.getContext("2d");u.drawImage(t,0,0,t.width,t.height,0,0,i,o);for(var l=u.getImageData(0,0,i,o).data,c=0;c<o;c++)for(var h=0;h<i;h++){var f=a*c+(h>>5),p=c*i+h<<2,d=l[p]>=250&&l[p+1]>=250&&l[p+2]>=250,g=d?1<<31-h%32:0;s[f]|=g}j.board=s,j.hasImage=!0},j.timeInterval=function(t){return arguments.length?(k=null==t?1/0:t,j):k},j.words=function(t){return arguments.length?(P=t,j):P},j.size=function(t){return arguments.length?(n=[+t[0],+t[1]],j):n},j.font=function(t){return arguments.length?(y=m(t),j):y},j.fontStyle=function(t){return arguments.length?(E=m(t),j):E},j.fontWeight=function(t){return arguments.length?(M=m(t),j):M},j.rotate=function(t){return arguments.length?(T=m(t),j):T},j.text=function(t){return arguments.length?(d=m(t),j):d},j.spiral=function(t){return arguments.length?(A=S[t]||t,j):A},j.fontSize=function(t){return arguments.length?(b=m(t),j):b},j.padding=function(t){return arguments.length?(C=m(t),j):C},j.random=function(t){return arguments.length?(I=t,j):I},j}Object.defineProperty(e,"__esModule",{value:!0});var _=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),b=Math.PI/180,x=64,w=2048,S={archimedean:p,rectangular:d};e.default=y},"./src/view.ts":function(t,e,n){"use strict";function r(t){var e={};return a.forIn(t,function(t,n){a.isObject(t)&&t.isView?e[n]=t:a.isArray(t)?e[n]=t.concat([]):a.isPlainObject(t)?e[n]=a.clone(t):e[n]=t}),e}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/_tslib@1.11.1@tslib/tslib.js"),o=i.__importDefault(n("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),a=n("./node_modules/_@antv_util@2.0.7@@antv/util/lib/index.js"),s=function(t){function e(e,n){var r=t.call(this)||this;if(r.isView=!0,r.isDataView=!0,r.watchingStates=null,r.dataType="table",r.transforms=[],r.origin=[],r.rows=[],e&&e.isDataSet?r.dataSet=e:(r.dataSet=null,n=e),r.loose=!r.dataSet,n&&(r.watchingStates=n.watchingStates),!r.loose){var i=r.watchingStates;e.on("statechange",function(t){a.isArray(i)?i.indexOf(t)>-1&&r._reExecute():r._reExecute()})}return r}return i.__extends(e,t),e.prototype._parseStateExpression=function(t){var e=this.dataSet;if(null!==e){var n=/^\$state\.(\w+)/.exec(t);return n?e.state[n[1]]:t}},e.prototype._preparseOptions=function(t){var e=this,n=r(t);return this.loose?n:(a.forIn(n,function(t,r){a.isString(t)&&/^\$state\./.test(t)&&(n[r]=e._parseStateExpression(t))}),n)},e.prototype._prepareSource=function(t,n){if(this._source={source:t,options:n},n){var r=this._preparseOptions(n);this.origin=e.DataSet.getConnector(r.type)(t,r,this)}else if(t instanceof e||a.isString(t))this.origin=e.DataSet.getConnector("default")(t,this.dataSet);else if(a.isArray(t))this.origin=t;else{if(!a.isObject(t)||!t.type)throw new TypeError("Invalid source");var r=this._preparseOptions(t);this.origin=e.DataSet.getConnector(r.type)(r,this)}return this.rows=a.deepMix([],this.origin),this},e.prototype.source=function(t,e){return this._prepareSource(t,e)._reExecuteTransforms(),this.trigger("change",[]),this},e.prototype.transform=function(t){return t&&t.type&&(this.transforms.push(t),this._executeTransform(t)),this},e.prototype._executeTransform=function(t){t=this._preparseOptions(t),e.DataSet.getTransform(t.type)(this,t)},e.prototype._reExecuteTransforms=function(){var t=this;this.transforms.forEach(function(e){t._executeTransform(e)})},e.prototype.addRow=function(t){this.rows.push(t)},e.prototype.removeRow=function(t){this.rows.splice(t,1)},e.prototype.updateRow=function(t,e){a.assign(this.rows[t],e)},e.prototype.findRows=function(t){return this.rows.filter(function(e){return a.isMatch(e,t)})},e.prototype.findRow=function(t){return a.find(this.rows,t)},e.prototype.getColumnNames=function(){var t=this.rows[0];return t?a.keys(t):[]},e.prototype.getColumnName=function(t){return this.getColumnNames()[t]},e.prototype.getColumnIndex=function(t){return this.getColumnNames().indexOf(t)},e.prototype.getColumn=function(t){return this.rows.map(function(e){return e[t]})},e.prototype.getColumnData=function(t){return this.getColumn(t)},e.prototype.getSubset=function(t,e,n){for(var r=[],i=t;i<=e;i++)r.push(a.pick(this.rows[i],n));return r},e.prototype.toString=function(t){return void 0===t&&(t=!1),t?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},e.prototype._reExecute=function(){var t=this._source,e=t.source,n=t.options;this._prepareSource(e,n),this._reExecuteTransforms(),this.trigger("change",[])},e}(o.default);e.View=s}})})},function(t,e,n){"use strict";function r(t,e,n){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}e.a=r},function(t,e,n){"use strict";function r(){o=document.createElement("table"),a=document.createElement("tr"),s=/^\s*<(\w+|!)[^>]*>/,u={tr:document.createElement("tbody"),tbody:o,thead:o,tfoot:o,td:a,th:a,"*":document.createElement("div")}}function i(t){o||r();var e=s.test(t)&&RegExp.$1;e&&e in u||(e="*");var n=u[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var i=n.childNodes[0];return n.removeChild(i),i}e.a=i;var o,a,s,u},function(t,e,n){"use strict";n(96),n(250)},function(t,e,n){"use strict";n(96),n(251)},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}e.a=r},function(t,e,n){"use strict";var r=n(1),i=n(254),o=n(123),a=n(517),s="px",u=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e},e.prototype.initContainer=function(){var t=this.get("container");n.i(o.h)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){},e.prototype.initTimeline=function(){var t=new a.a(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");o.i&&(n.style.width=t+s,n.style.height=e+s)},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");o.i&&e&&(e.style.cursor=t)},e.prototype.getPointByClient=function(t,e){var n=this.get("el"),r=n.getBoundingClientRect();return{x:t-r.left,y:e-r.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el"),r=n.getBoundingClientRect();return{x:t+r.left,y:e+r.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(i.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(254),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(255),o=n(256),a=function(t){function e(e){return t.call(this,e)||this}return n.i(r.__extends)(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.get("bbox");return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.get("canvasBox");return t||(t=this.calculateCanvasBBox(),this.set("canvasBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),r=t.minX,i=t.minY,a=t.maxX,s=t.maxY;if(e){var u=n.i(o.a)(e,[t.minX,t.minY]),l=n.i(o.a)(e,[t.maxX,t.minY]),c=n.i(o.a)(e,[t.minX,t.maxY]),h=n.i(o.a)(e,[t.maxX,t.maxY]);r=Math.min(u[0],l[0],c[0],h[0]),a=Math.max(u[0],l[0],c[0],h[0]),i=Math.min(u[1],l[1],c[1],h[1]),s=Math.max(u[1],l[1],c[1],h[1])}var f=this.attrs;if(f.shadowColor){var p=f.shadowBlur,d=void 0===p?0:p,v=f.shadowOffsetX,g=void 0===v?0:v,m=f.shadowOffsetY,y=void 0===m?0:m,_=r-d+g,b=a+d+g,x=i-d+y,w=s+d+y;r=Math.min(r,_),a=Math.max(a,b),i=Math.min(i,x),s=Math.max(s,w)}return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:s,width:a-r,height:s-i}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1];i=this.invertFromMatrix(i);var o=i[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(i.a);e.a=a},function(t,e,n){"use strict";function r(t,e,r){var i={},a=e.fromAttrs,s=e.toAttrs;if(!t.destroyed){var f;for(var p in s)if(!n.i(o.isEqual)(a[p],s[p]))if("path"===p){var d=s[p],v=a[p];d.length>v.length?(d=l.parsePathString(s[p]),v=l.parsePathString(a[p]),v=l.fillPathByDiff(v,d),v=l.formatPath(v,d),e.fromAttrs.path=v,e.toAttrs.path=d):e.pathFormatted||(d=l.parsePathString(s[p]),v=l.parsePathString(a[p]),v=l.formatPath(v,d),e.fromAttrs.path=v,e.toAttrs.path=d,e.pathFormatted=!0),i[p]=[];for(var g=0;g<d.length;g++){for(var m=d[g],y=v[g],_=[],b=0;b<m.length;b++)n.i(o.isNumber)(m[b])&&y&&n.i(o.isNumber)(y[b])?(f=n.i(u.a)(y[b],m[b]),_.push(f(r))):_.push(m[b]);i[p].push(_)}}else if("matrix"===p){var x=n.i(u.d)(a[p]||h,s[p]||h),w=x(r);i[p]=w}else n.i(c.a)(p)&&n.i(c.b)(s[p])?i[p]=s[p]:n.i(o.isFunction)(s[p])||(f=n.i(u.a)(a[p],s[p]),i[p]=f(r));t.attr(i)}}function i(t,e,n){var i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o,a=e.duration,u=e.easing;if(n=n-i-e.delay,e.repeat)o=n%a/a,o=s[u](o);else{if(!((o=n/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;o=s[u](o)}if(e.onFrame){var l=e.onFrame(o);t.attr(l)}else r(t,e,o);return!1}var o=n(0),a=n(1084),s=n(1029),u=n(375),l=n(257),c=n(519),h=[1,0,0,0,1,0,0,0,1],f=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this,o=!1;this.timer=a.a(function(a){if(r.current=a,r.animators.length>0){for(var s=r.animators.length-1;s>=0;s--)if(t=r.animators[s],t.destroyed)r.removeAnimator(s);else{if(!t.isAnimatePaused()){e=t.get("animations");for(var u=e.length-1;u>=0;u--)n=e[u],(o=i(t,n,a))&&(e.splice(u,1),o=!1,n.callback&&n.callback())}0===e.length&&r.removeAnimator(s)}r.canvas.get("autoDraw")||r.canvas.draw()}})},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}();e.a=f},function(t,e,n){"use strict";var r=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},i=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)}},function(t,e,n){"use strict";function r(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){var e=t.attr(),n=e.x1,r=e.y1,o=e.x2,a=e.y2,s=Math.min(n,o),u=Math.max(n,o),l=Math.min(r,a),c=Math.max(r,a),h={minX:s,maxX:u,minY:l,maxY:c};return h=i.mergeArrowBBox(t,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(168);e.default=r},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=[],o=[],l=0;l<t.length;l++){var c=t[l],h=c.currentPoint,f=c.params,p=c.prePoint,d=void 0;switch(c.command){case"Q":d=a.default.box(p[0],p[1],f[1],f[2],f[3],f[4]);break;case"C":d=s.default.box(p[0],p[1],f[1],f[2],f[3],f[4],f[5],f[6]);break;case"A":var v=c.arcParams;d=u.default.box(v.cx,v.cy,v.rx,v.ry,v.xRotation,v.startAngle,v.endAngle);break;default:n.push(h[0]),r.push(h[1])}d&&(c.box=d,n.push(d.x,d.x+d.width),r.push(d.y,d.y+d.height)),e&&("L"===c.command||"M"===c.command)&&c.prePoint&&c.nextPoint&&o.push(c)}n=n.filter(function(t){return!Number.isNaN(t)}),r=r.filter(function(t){return!Number.isNaN(t)});var g=Math.min.apply(null,n),m=Math.min.apply(null,r),y=Math.max.apply(null,n),_=Math.max.apply(null,r);if(0===o.length)return{x:g,y:m,width:y-g,height:_-m};for(var l=0;l<o.length;l++){var c=o[l],h=c.currentPoint,b=void 0;h[0]===g?(b=i(c,e),g-=b.xExtra):h[0]===y&&(b=i(c,e),y+=b.xExtra),h[1]===m?(b=i(c,e),m-=b.yExtra):h[1]===_&&(b=i(c,e),_+=b.yExtra)}return{x:g,y:m,width:y-g,height:_-m}}function i(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||0===Math.sin(u)||c.default(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),h=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return l=l>Math.PI/2?Math.PI-l:l,h=h>Math.PI/2?Math.PI-h:h,{xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(h-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}function o(t){var e=t.attr(),n=e.path,i=e.stroke,o=i?e.lineWidth:0,a=t.get("segments")||l.default(n),s=r(a,o),u=s.x,c=s.y,f=s.width,p=s.height,d={minX:u,minY:c,maxX:u+f,maxY:c+p};return d=h.mergeArrowBBox(t,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(269),s=n(172),u=n(551),l=n(321),c=n(202),h=n(168);e.default=o},function(t,e,n){"use strict";function r(t){for(var e=t.attr(),n=e.points,r=[],o=[],a=0;a<n.length;a++){var s=n[a];r.push(s[0]),o.push(s[1])}return i.getBBoxByArray(r,o)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(47);e.default=r},function(t,e,n){"use strict";function r(t){for(var e=t.attr(),n=e.points,r=[],a=[],s=0;s<n.length;s++){var u=n[s];r.push(u[0]),a.push(u[1])}var l=i.getBBoxByArray(r,a),c=l.x,h=l.y,f=l.width,p=l.height,d={minX:c,minY:h,maxX:c+f,maxY:h+p};return d=o.mergeArrowBBox(t,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(47),o=n(168);e.default=r},function(t,e,n){"use strict";function r(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t,e){o.set(t,e)}function i(t){return o.get(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=new Map;e.register=r,e.getMethod=i},function(t,e,n){"use strict";function r(t){var e=t.attr(),n=e.x,r=e.y,o=e.text,a=e.fontSize,s=e.lineHeight,u=e.font;u||(u=i.assembleFont(e));var l,c=i.getTextWidth(o,u);if(c){var h=e.textAlign,f=e.textBaseline,p=i.getTextHeight(o,a,s),d={x:n,y:r-p};h&&("end"===h||"right"===h?d.x-=c:"center"===h&&(d.x-=c/2)),f&&("top"===f?d.y+=p:"middle"===f&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:n,y:r,width:0,height:0};return l}Object.defineProperty(e,"__esModule",{value:!0});var i=n(261);e.default=r},function(t,e,n){"use strict";function r(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=e[0],p=e[1],d=e[2],v=e[3],g=e[4],m=e[5],y=e[6],_=e[7],b=e[8];return n[0]=f*r+p*a+d*l,n[1]=f*i+p*s+d*c,n[2]=f*o+p*u+d*h,n[3]=v*r+g*a+m*l,n[4]=v*i+g*s+m*c,n[5]=v*o+g*u+m*h,n[6]=y*r+_*a+b*l,n[7]=y*i+_*s+b*c,n[8]=y*o+_*u+b*h,n}function i(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function o(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=c*a-s*l,f=-c*o+s*u,p=l*o-a*u,d=n*h+r*f+i*p;return d?(d=1/d,e[0]=h*d,e[1]=(-c*r+i*l)*d,e[2]=(s*r-i*a)*d,e[3]=f*d,e[4]=(c*n-i*u)*d,e[5]=(-s*n+i*o)*d,e[6]=p*d,e[7]=(-l*n+r*u)*d,e[8]=(a*n-r*o)*d,e):null}Object.defineProperty(e,"__esModule",{value:!0}),e.multiplyMatrix=r,e.multiplyVec2=i,e.invert=o},function(t,e){t.exports={__npminstall_done:!1,_from:"@antv/g-base@^0.4.0",_id:"@antv/g-base@0.4.4",_inBundle:!1,_integrity:"sha512-P5qptpFy4QiEiQsESNVxvLJsfJJkTuJyfgchP4tUv/g3Ir6xn3Hj8mFbyjesOJ4/wWyhABYTpekK0HNWr1WiXA==",_location:"/@antv/g-base",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"@antv/g-base@^0.4.0",name:"@antv/g-base",escapedName:"@antv%2fg-base",scope:"@antv",rawSpec:"^0.4.0",saveSpec:null,fetchSpec:"^0.4.0"},_requiredBy:["/@antv/component","/@antv/g-canvas","/@antv/g-svg","/@antv/g2"],_resolved:"https://registry.npmjs.org/@antv/g-base/-/g-base-0.4.4.tgz",_shasum:"4da057e2b82c75e0e9367bed8759cb0c95693a0e",_spec:"@antv/g-base@^0.4.0",_where:"/Users/pxy/Documents/workspacegit/dv/dvtry2/node_modules/@antv/g2",author:{name:"https://github.com/orgs/antvis/people"},bugs:{url:"https://github.com/antvis/util/issues"},bundleDependencies:!1,dependencies:{"@antv/event-emitter":"^0.1.1","@antv/g-math":"^0.1.3","@antv/matrix-util":"^2.0.4","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","@types/d3-timer":"^1.0.9","d3-ease":"^1.0.5","d3-interpolate":"^1.3.2","d3-timer":"^1.0.9"},deprecated:!1,description:"A common util collection for antv projects",devDependencies:{"@antv/torch":"^1.0.0","gl-matrix":"^3.0.0",less:"^3.9.0","npm-run-all":"^4.1.5","tsc-watch":"^4.0.0"},files:["package.json","esm","lib","LICENSE","README.md"],gitHead:"c809a87a65d3cf6f1f54db1c6653f474fdfe74bd",homepage:"https://github.com/antvis/util#readme",keywords:["util","antv","g"],license:"ISC",main:"lib/index.js",module:"esm/index.js",name:"@antv/g-base",publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/antvis/util.git"},scripts:{build:"npm run clean && run-p build:*","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm",clean:"rm -rf esm lib",coverage:"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage",test:"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts",tsc:"tsc --noEmit",typecheck:"tsc --noEmit","watch:cjs":"tsc-watch -p tsconfig.json --target ES5 --module commonjs --outDir lib --compiler typescript/bin/tsc"},types:"lib/index.d.ts",version:"0.4.4"}},function(t,e,n){"use strict";var r=n(1),i=n(38),o=n(544),a=n(259),s=n.n(a),u=n(98),l=n(171),c=n(99),h=n(31),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return l.a},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||n.i(h.m)();return t>=1?Math.floor(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},e.prototype.initEvents=function(){var t=new s.a({canvas:this});t.init(),this.set("eventController",t)},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,r){return this.get("quickHit")?n.i(o.a)(this,e,r):t.prototype.getShape.call(this,e,r,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),r=this.getViewRange();if(e.length&&e[0]===this)t=r;else if(t=n.i(c.d)(e)){t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY);var i=this.get("clipView");i&&(t=n.i(c.f)(t,r))}return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(n.i(h.n)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),r=this.getChildren();t.clearRect(0,0,e.width,e.height),n.i(c.c)(t,this),n.i(c.e)(t,r),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.getChildren(),r=this._getRefreshRegion();r&&(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),n.i(c.c)(t,this),n.i(c.e)(t,e,r),t.restore()),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=n.i(h.o)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.destroy=function(){this.get("eventController").destroy(),t.prototype.destroy.call(this)},e}(i.e);e.a=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"version",function(){return u});var r=n(98),i=n(38);n.d(e,"Event",function(){return i.b});var o=n(531);n.d(e,"Canvas",function(){return o.a});var a=n(171);n.d(e,"Group",function(){return a.a}),n.d(e,"Shape",function(){return r});var s=n(550),u=s.version},function(t,e,n){"use strict";var r=n(1),i=n(39),o=n(31),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,r,i,a){var s=this.attr(),u=s.x,l=s.y,c=s.r,h=a/2,f=n.i(o.f)(u,l,t,e);return i&&r?f<=c+h:i?f<=c:!!r&&(f>=c-h&&f<=c+h)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(i.a);e.a=a},function(t,e,n){"use strict";function r(t,e,n,r){return t/(n*n)+e/(r*r)}var i=n(1),o=n(39),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(i.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(i.__assign)(n.i(i.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,i,o){var a=this.attr(),s=o/2,u=a.x,l=a.y,c=a.rx,h=a.ry,f=(t-u)*(t-u),p=(e-l)*(e-l);return i&&n?r(f,p,c+s,h+s)<=1:i?r(f,p,c,h)<=1:!!n&&(r(f,p,c-s,h-s)>=1&&r(f,p,c+s,h+s)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,u=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(s,u),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t){return t instanceof HTMLElement&&n.i(a.a)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var i=n(1),o=n(39),a=n(31),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(i.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(i.__assign)(n.i(i.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,i=this.attrs;if(n.i(a.a)(t)){var o=new Image;o.onload=function(){if(e.destroyed)return!1;e.attr("img",o),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},o.src=t,o.crossOrigin="Anonymous",this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):r(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),i=e.x,o=e.y,s=e.width,u=e.height,l=e.sx,c=e.sy,h=e.swidth,f=e.sheight,p=e.img;(p instanceof Image||r(p))&&(n.i(a.c)(l)||n.i(a.c)(c)||n.i(a.c)(h)||n.i(a.c)(f)?t.drawImage(p,i,o,s,u):t.drawImage(p,l,c,h,f,i,o,s,u))},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(62),o=n.n(i),a=n(39),s=n(125),u=n(124),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&u.a(this,t,r,i,e,n),a&&u.b(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,r,i,o){if(!r||!o)return!1;var a=this.attr(),u=a.x1,l=a.y1,c=a.x2,h=a.y2;return n.i(s.a)(u,l,c,h,o,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(l=u.c(n,r,i,o,e.startArrow.d)),s&&s.d&&(c=u.c(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+l.dx,r+l.dy),t.lineTo(i-c.dx,o-c.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return o.a.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,a=e.y2;return o.a.pointAt(n,r,i,a,t)},e}(a.a);e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(320),a=n.n(o),s=n(39),u=n(31),l=n(99),c={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return n.i(i.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,r,i=this.attr(),o=i.x,s=i.y,l=i.symbol||"circle",c=this._getR(i);return n.i(u.l)(l)?(t=l,r=t(o,s,c),r=a()(r)):(t=e.Symbols[l],r=t(o,s,c)),t?r:(console.warn(l+" marker is not supported."),null)},e.prototype.createPath=function(t){var e=this._getPath(),r=this.get("paramsCache");n.i(l.a)(this,t,{path:e},r)},e.Symbols=c,e}(s.a);e.a=h},function(t,e,n){"use strict";function r(t,e,r){for(var i=!1,o=0;o<t.length;o++){var a=t[o];if(i=n.i(v.a)(a,e,r))break}return i}var i=n(1),o=n(172),a=n.n(o),s=n(0),u=n(39),l=n(320),c=n.n(l),h=n(321),f=n.n(h),p=n(99),d=n(262),v=n(263),g=n(547),m=n(124),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(i.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(i.__assign)(n.i(i.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=c()(t);var e=g.a.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=f()(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,n=t.endArrow;if(e){var r=this.getStartTangent();m.a(this,t,r[0][0],r[0][1],r[1][0],r[1][1])}if(n){var r=this.getEndTangent();m.b(this,t,r[0][0],r[0][1],r[1][0],r[1][1])}},e.prototype.isInStrokeOrPath=function(t,e,i,o,a){var s=this.getSegments(),u=this.get("hasArc"),l=!1;if(i&&(l=g.a.isPointInStroke(s,a,t,e)),!l&&o)if(u)l=n.i(d.a)(this,t,e);else{var c=this.attr("path"),h=g.a.extractPolygons(c);l=r(h.polygons,t,e)||r(h.polylines,t,e)}return l},e.prototype.createPath=function(t){var e=this.attr(),r=this.get("paramsCache");n.i(p.a)(this,t,e,r)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return n.i(s.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e=this.get("tCache");e||(this._calculateCurve(),this._setTcache(),e=this.get("tCache"));var r,i,o=this.get("curve");if(!e||0===e.length)return o?{x:o[0][1],y:o[0][2]}:null;n.i(s.each)(e,function(e,n){t>=e[0]&&t<=e[1]&&(r=(t-e[0])/(e[1]-e[0]),i=n)});var u=o[i];if(n.i(s.isNil)(u)||n.i(s.isNil)(i))return null;var l=u.length,c=o[i+1];return a.a.pointAt(u[l-2],u[l-1],c[1],c[2],c[3],c[4],c[5],c[6],r)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",g.a.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,r,i,o=0,u=0,l=[],c=this.get("curve");if(c){if(n.i(s.each)(c,function(t,e){r=c[e+1],i=t.length,r&&(o+=a.a.length(t[i-2],t[i-1],r[1],r[2],r[3],r[4],r[5],r[6])||0)}),this.set("totalLength",o),0===o)return void this.set("tCache",[]);n.i(s.each)(c,function(n,s){r=c[s+1],i=n.length,r&&(t=[],t[0]=u/o,e=a.a.length(n[i-2],n[i-1],r[1],r[2],r[3],r[4],r[5],r[6]),u+=e||0,t[1]=u/o,l.push(t))}),this.set("tCache",l)}},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(u.a);e.a=y},function(t,e,n){"use strict";var r=n(1),i=n(39),o=n(265),a=n(263),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.isInStrokeOrPath=function(t,e,r,i,s){var u=this.attr().points,l=!1;return r&&(l=n.i(o.a)(u,s,t,e,!0)),!l&&i&&(l=n.i(a.a)(u,t,e)),l},e.prototype.createPath=function(t){var e=this.attr(),n=e.points;if(!(n.length<2)){t.beginPath();for(var r=0;r<n.length;r++){var i=n[r];0===r?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1])}t.closePath()}},e}(i.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(62),o=n.n(i),a=n(268),s=n.n(a),u=n(0),l=n(39),c=n(265),h=n(124),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],u=n[o-1][0],l=n[o-1][1];r&&h.a(this,t,n[1][0],n[1][1],a,s),i&&h.b(this,t,n[o-2][0],n[o-2][1],u,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,r,i,o){if(!r||!o)return!1;var a=this.attr().points;return n.i(c.a)(a,o,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a=n[0][0],s=n[0][1],u=n[o-1][0],l=n[o-1][1];if(r&&r.d){var c=h.c(a,s,n[1][0],n[1][1],r.d);a+=c.dx,s+=c.dy}if(i&&i.d){var c=h.c(n[o-2][0],n[o-2][1],u,l,i.d);u-=c.dx,l-=c.dy}t.beginPath(),t.moveTo(a,s);for(var f=0;f<o-1;f++){var p=n[f];t.lineTo(p[0],p[1])}t.lineTo(u,l)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return n.i(u.isNil)(e)?(this.set("totalLength",s.a.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e=this.attr().points,r=this.get("tCache");r||(this._setTcache(),r=this.get("tCache"));var i,a;return n.i(u.each)(r,function(e,n){t>=e[0]&&t<=e[1]&&(i=(t-e[0])/(e[1]-e[0]),a=n)}),o.a.pointAt(e[a][0],e[a][1],e[a+1][0],e[a+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var r,i,a=0,s=[];n.i(u.each)(t,function(n,u){t[u+1]&&(r=[],r[0]=a/e,i=o.a.length(n[0],n[1],t[u+1][0],t[u+1][1]),a+=i,r[1]=a/e,s.push(r))}),this.set("tCache",s)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(l.a);e.a=f},function(t,e,n){"use strict";var r=n(1),i=n(39),o=n(266),a=n(31),s=n(546),u=n(545),l=n(262),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,r,i,o){var c=this.attr(),h=c.x,f=c.y,p=c.width,d=c.height,v=c.radius;if(v){var g=!1;return r&&(g=n.i(u.a)(h,f,p,d,v,o,t,e)),!g&&i&&(g=n.i(l.a)(this,t,e)),g}var m=o/2;return i&&r?n.i(a.d)(h-m,f-m,p+m,d+m,t,e):i?n.i(a.d)(h,f,p,d,t,e):r?n.i(s.a)(h,f,p,d,o,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,i=e.y,a=e.width,s=e.height,u=e.radius;if(t.beginPath(),0===u)t.rect(r,i,a,s);else{var l=n.i(o.a)(u),c=l[0],h=l[1],f=l[2],p=l[3];t.moveTo(r+c,i),t.lineTo(r+a-h,i),0!==h&&t.arc(r+a-h,i+h,h,-Math.PI/2,0),t.lineTo(r+a,i+s-f),0!==f&&t.arc(r+a-f,i+s-f,f,0,Math.PI/2),t.lineTo(r+p,i+s),0!==p&&t.arc(r+p,i+s-p,p,Math.PI/2,Math.PI),t.lineTo(r,i+c),0!==c&&t.arc(r+c,i+c,c,Math.PI,1.5*Math.PI),t.closePath()}},e}(i.a);e.a=c},function(t,e,n){"use strict";var r=n(1),i=n(39),o=n(31),a=n(261),s=(n.n(a),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=n.i(a.assembleFont)(t)},e.prototype._setText=function(t){var e=null;n.i(o.a)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,r){var i,s=this.attrs,u=s.textBaseline,l=s.x,c=s.y,h=1*s.fontSize,f=this._getSpaceingY(),p=n.i(a.getTextHeight)(s.text,s.fontSize,s.lineHeight);n.i(o.b)(e,function(e,n){i=c+n*(f+h)-p+h,"middle"===u&&(i+=p-h-(p-h)/2),"top"===u&&(i+=p-h),r?t.fillText(e,l,i):t.strokeText(e,l,i)})},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;e?t.fillText(a,r,i):t.strokeText(a,r,i)}},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,i=e.opacity,a=e.strokeOpacity,s=e.fillOpacity;this.isStroke()&&r>0&&(n.i(o.c)(a)||1===a||(t.globalAlpha=i),this.stroke(t)),this.isFill()&&(n.i(o.c)(s)||1===s?this.fill(t):(t.globalAlpha=s,this.fill(t),t.globalAlpha=i)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(i.a));e.a=s},function(t,e,n){"use strict";function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return r(t)*r(e)?(t[0]*e[0]+t[1]*e[1])/(r(t)*r(e)):1}function o(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(i(t,e))}function a(t,e){var r=e[1],a=e[2],u=n.i(s.i)(n.i(s.j)(e[3]),2*Math.PI),l=e[4],c=e[5],h=t[0],f=t[1],p=e[6],d=e[7],v=Math.cos(u)*(h-p)/2+Math.sin(u)*(f-d)/2,g=-1*Math.sin(u)*(h-p)/2+Math.cos(u)*(f-d)/2,m=v*v/(r*r)+g*g/(a*a);m>1&&(r*=Math.sqrt(m),a*=Math.sqrt(m));var y=r*r*(g*g)+a*a*(v*v),_=y?Math.sqrt((r*r*(a*a)-y)/y):1;l===c&&(_*=-1),isNaN(_)&&(_=0);var b=a?_*r*g/a:0,x=r?_*-a*v/r:0,w=(h+p)/2+Math.cos(u)*b-Math.sin(u)*x,S=(f+d)/2+Math.sin(u)*b+Math.cos(u)*x,E=[(v-b)/r,(g-x)/a],M=[(-1*v-b)/r,(-1*g-x)/a],T=o([1,0],E),C=o(E,M);return i(E,M)<=-1&&(C=Math.PI),i(E,M)>=1&&(C=0),0===c&&C>0&&(C-=2*Math.PI),1===c&&C<0&&(C+=2*Math.PI),{cx:w,cy:S,rx:n.i(s.k)(t,[p,d])?0:r,ry:n.i(s.k)(t,[p,d])?0:a,startAngle:T,endAngle:T+C,xRotation:u,arcFlag:l,sweepFlag:c}}e.a=a;var s=n(31)},function(t,e,n){"use strict";function r(t,e){if(e){var r=n.i(u.invert)(e);return n.i(u.multiplyVec2)(r,t)}return t}function i(t,e,n){var i=t.getTotalMatrix();if(i){var o=r([e,n,1],i);return[o[0],o[1]]}return[e,n]}function o(t,e,r){if(t.isGroup()&&t.isCanvas())return!0;if(!n.i(s.isAllowCapture)(t)&&!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var o=i(t,e,r),a=o[0],u=o[1];if(t.isClipped(a,u))return!1}var l=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=l.minX&&e<=l.maxX&&r>=l.minY&&r<=l.maxY}function a(t,e,n){if(!o(t,e,n))return null;for(var r=null,s=t.getChildren(),u=s.length,l=u-1;l>=0;l--){var c=s[l];if(c.isGroup())r=a(c,e,n);else if(o(c,e,n)){var h=c,f=i(c,e,n),p=f[0],d=f[1];h.isInShape(p,d)&&(r=c)}if(r)break}return r}e.a=a;var s=n(170),u=(n.n(s),n(529));n.n(u)},function(t,e,n){"use strict";function r(t,e,r,a,s,u,l,c){return n.i(i.a)(t+s,e,t+r-s,e,u,l,c)||n.i(i.a)(t+r,e+s,t+r,e+a-s,u,l,c)||n.i(i.a)(t+r-s,e+a,t+s,e+a,u,l,c)||n.i(i.a)(t,e+a-s,t,e+s,u,l,c)||n.i(o.a)(t+r-s,e+s,s,1.5*Math.PI,2*Math.PI,u,l,c)||n.i(o.a)(t+r-s,e+a-s,s,0,.5*Math.PI,u,l,c)||n.i(o.a)(t+s,e+a-s,s,.5*Math.PI,Math.PI,u,l,c)||n.i(o.a)(t+s,e+s,s,Math.PI,1.5*Math.PI,u,l,c)}e.a=r;var i=n(125),o=n(264)},function(t,e,n){"use strict";function r(t,e,r,o,a,s,u){var l=a/2;return n.i(i.d)(t-l,e-l,r,a,s,u)||n.i(i.d)(t+r-l,e-l,a,o,s,u)||n.i(i.d)(t+l,e+o-l,r,a,s,u)||n.i(i.d)(t-l,e+l,a,o,s,u)}e.a=r;var i=n(31)},function(t,e,n){"use strict";function r(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],o=i[0];if("C"===o||"A"===o||"Q"===o){e=!0;break}}return e}function i(t,e,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var u=t[s],c=u.currentPoint,m=u.params,y=u.prePoint,_=u.box;if(!_||n.i(f.d)(_.x-a,_.y-a,_.width+e,_.height+e,r,i)){switch(u.command){case"L":case"Z":o=n.i(p.a)(y[0],y[1],c[0],c[1],e,r,i);break;case"Q":o=l.a.pointDistance(y[0],y[1],m[1],m[2],m[3],m[4],r,i)<=e/2;break;case"C":o=h.a.pointDistance(y[0],y[1],m[1],m[2],m[3],m[4],m[5],m[6],r,i)<=e/2;break;case"A":var b=u.arcParams,x=b.cx,w=b.cy,S=b.rx,E=b.ry,M=b.startAngle,T=b.endAngle,C=b.xRotation,A=[r,i,1],P=[1,0,0,0,1,0,0,0,1],k=S>E?S:E,I=S>E?1:S/E,O=S>E?E/S:1;v.b(P,P,[-x,-w]),v.c(P,P,-C),v.d(P,P,[1/I,1/O]),g.transformMat3(A,A,P),o=n.i(d.a)(0,0,k,M,T,e,A[0],A[1])}if(o)break}}return o}function o(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}}var a=n(1),s=n(38),u=n(269),l=n.n(u),c=n(172),h=n.n(c),f=n(31),p=n(125),d=n(264),v=n(223),g=n(146);e.a=n.i(a.__assign)({hasArc:r,extractPolygons:o,isPointInStroke:i},s.f)},function(t,e,n){"use strict";function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return r(t)*r(e)?(t[0]*e[0]+t[1]*e[1])/(r(t)*r(e)):1}function o(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(i(t,e))}function a(t,e){var n=e[1],r=e[2],a=s.mod(s.toRadian(e[3]),2*Math.PI),u=e[4],l=e[5],c=t[0],h=t[1],f=e[6],p=e[7],d=Math.cos(a)*(c-f)/2+Math.sin(a)*(h-p)/2,v=-1*Math.sin(a)*(c-f)/2+Math.cos(a)*(h-p)/2,g=d*d/(n*n)+v*v/(r*r);g>1&&(n*=Math.sqrt(g),r*=Math.sqrt(g));var m=n*n*(v*v)+r*r*(d*d),y=m?Math.sqrt((n*n*(r*r)-m)/m):1;u===l&&(y*=-1),isNaN(y)&&(y=0);var _=r?y*n*v/r:0,b=n?y*-r*d/n:0,x=(c+f)/2+Math.cos(a)*_-Math.sin(a)*b,w=(h+p)/2+Math.sin(a)*_+Math.cos(a)*b,S=[(d-_)/n,(v-b)/r],E=[(-1*d-_)/n,(-1*v-b)/r],M=o([1,0],S),T=o(S,E);return i(S,E)<=-1&&(T=Math.PI),i(S,E)>=1&&(T=0),0===l&&T>0&&(T-=2*Math.PI),1===l&&T<0&&(T+=2*Math.PI),{cx:x,cy:w,rx:s.isSamePoint(t,[f,p])?0:n,ry:s.isSamePoint(t,[f,p])?0:r,startAngle:M,endAngle:M+T,xRotation:a,arcFlag:u,sweepFlag:l}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(549);e.default=a},function(t,e,n){"use strict";function r(){return window?window.devicePixelRatio:1}function i(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function o(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function a(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function s(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function u(t,e){return t[0]===e[0]&&t[1]===e[1]}Object.defineProperty(e,"__esModule",{value:!0}),e.getPixelRatio=r,e.distance=i,e.inBox=o,e.intersectRect=a,e.mergeRegion=s,e.isSamePoint=u;var l=n(110);e.isNil=l.default;var c=n(78);e.isString=c.default;var h=n(139);e.isFunction=h.default;var f=n(57);e.isArray=f.default;var p=n(90);e.each=p.default;var d=n(141);e.toRadian=d.default;var v=n(140);e.mod=v.default;var g=n(202);e.isNumberEqual=g.default;var m=n(343);e.requestAnimationFrame=m.default;var y=n(341);e.clearAnimationFrame=y.default},function(t,e){t.exports={__npminstall_done:!1,_from:"@antv/g-canvas@^0.4.0",_id:"@antv/g-canvas@0.4.8",_inBundle:!1,_integrity:"sha512-OR9n+w4sCEnTgscjEr5mk2Y48JEKfdetZiX/2rRnJXdETH3oqoogHTmrQkT5AqS2vKNdi6xErXIO/Wg2fQs1aA==",_location:"/@antv/g-canvas",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"@antv/g-canvas@^0.4.0",name:"@antv/g-canvas",escapedName:"@antv%2fg-canvas",scope:"@antv",rawSpec:"^0.4.0",saveSpec:null,fetchSpec:"^0.4.0"},_requiredBy:["/@antv/g2"],_resolved:"https://registry.npmjs.org/@antv/g-canvas/-/g-canvas-0.4.8.tgz",_shasum:"1dbae30e132ca69f7bb25ddeca2a4d93d7d1ed70",_spec:"@antv/g-canvas@^0.4.0",_where:"/Users/pxy/Documents/workspacegit/dv/dvtry2/node_modules/@antv/g2",author:{name:"https://github.com/orgs/antvis/people"},bugs:{url:"https://github.com/antvis/g/issues"},bundleDependencies:!1,dependencies:{"@antv/g-base":"^0.4.4","@antv/g-math":"^0.1.3","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","gl-matrix":"^3.0.0"},deprecated:!1,description:"A canvas library which providing 2d",devDependencies:{"@antv/torch":"^1.0.0",less:"^3.9.0","npm-run-all":"^4.1.5",webpack:"^4.26.1","webpack-cli":"^3.1.2"},files:["package.json","esm","lib","dist","LICENSE","README.md"],gitHead:"c809a87a65d3cf6f1f54db1c6653f474fdfe74bd",homepage:"https://github.com/antvis/g#readme",keywords:["util","antv","g"],license:"ISC",main:"lib/index.js",module:"esm/index.js",name:"@antv/g-canvas",publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/antvis/g.git"},scripts:{build:"npm run clean && run-p build:*","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:umd":"webpack --config webpack.config.js --mode production",clean:"rm -rf esm lib dist",coverage:"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage",dist:"webpack --config webpack.config.js --mode production",test:"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts",tsc:"tsc --noEmit",typecheck:"tsc --noEmit"},types:"lib/index.d.ts",unpkg:"dist/g.min.js",version:"0.4.8"}},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){return-1*n*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}function i(t,e,n,r,i,o,a,s){return-1*n*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}function o(t,e,n){return Math.atan(-e/t*Math.tan(n))}function a(t,e,n){return Math.atan(e/(t*Math.tan(n)))}function s(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function u(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function l(t,e,n,r){return(Math.atan2(r*t,n*e)+2*Math.PI)%(2*Math.PI)}function c(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function h(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}Object.defineProperty(e,"__esModule",{value:!0});var f=n(47),p=n(552);e.default={box:function(t,e,n,r,i,l,c){for(var h=o(n,r,i),f=1/0,p=-1/0,d=[l,c],v=2*-Math.PI;v<=2*Math.PI;v+=Math.PI){var g=h+v;l<c?l<g&&g<c&&d.push(g):c<g&&g<l&&d.push(g)}for(var v=0;v<d.length;v++){var m=s(t,e,n,r,i,d[v]);m<f&&(f=m),m>p&&(p=m)}for(var y=a(n,r,i),_=1/0,b=-1/0,x=[l,c],v=2*-Math.PI;v<=2*Math.PI;v+=Math.PI){var w=y+v;l<c?l<w&&w<c&&x.push(w):c<w&&w<l&&x.push(w)}for(var v=0;v<x.length;v++){var S=u(t,e,n,r,i,x[v]);S<_&&(_=S),S>b&&(b=S)}return{x:f,y:_,width:p-f,height:b-_}},length:function(t,e,n,r,i,o,a){},nearestPoint:function(t,e,n,r,i,o,a,s,u){var f=h(s-t,u-e,-i),d=f[0],v=f[1],g=p.default.nearestPoint(0,0,n,r,d,v),m=l(n,r,g.x,g.y);m<o?g=c(n,r,o):m>a&&(g=c(n,r,a));var y=h(g.x,g.y,i);return{x:y[0]+t,y:y[1]+e}},pointDistance:function(t,e,n,r,i,o,a,s,u){var l=this.nearestPoint(t,e,n,r,s,u);return f.distance(l.x,l.y,s,u)},pointAt:function(t,e,n,r,i,o,a,l){var c=(a-o)*l+o;return{x:s(t,e,n,r,i,c),y:u(t,e,n,r,i,c)}},tangentAngle:function(t,e,n,o,a,s,u,l){var c=(u-s)*l+s,h=r(t,e,n,o,a,s,u,c),p=i(t,e,n,o,a,s,u,c);return f.piMod(Math.atan2(p,h))}}},function(t,e,n){"use strict";function r(t,e){var n=Math.abs(t);return e>0?n:-1*n}Object.defineProperty(e,"__esModule",{value:!0});var i=n(47);e.default={box:function(t,e,n,r){return{x:t-n,y:e-r,width:2*n,height:2*r}},length:function(t,e,n,r){return Math.PI*(3*(n+r)-Math.sqrt((3*n+r)*(n+3*r)))},nearestPoint:function(t,e,n,i,o,a){var s=n,u=i;if(0===s||0===u)return{x:t,y:e};for(var l,c,h=o-t,f=a-e,p=Math.abs(h),d=Math.abs(f),v=s*s,g=u*u,m=Math.PI/4,y=0;y<4;y++){l=s*Math.cos(m),c=u*Math.sin(m);var _=(v-g)*Math.pow(Math.cos(m),3)/s,b=(g-v)*Math.pow(Math.sin(m),3)/u,x=l-_,w=c-b,S=p-_,E=d-b,M=Math.hypot(w,x),T=Math.hypot(E,S);m+=M*Math.asin((x*E-w*S)/(M*T))/Math.sqrt(v+g-l*l-c*c),m=Math.min(Math.PI/2,Math.max(0,m))}return{x:t+r(l,h),y:e+r(c,f)}},pointDistance:function(t,e,n,r,o,a){var s=this.nearestPoint(t,e,n,r,o,a);return i.distance(s.x,s.y,o,a)},pointAt:function(t,e,n,r,i){var o=2*Math.PI*i;return{x:t+n*Math.cos(o),y:e+r*Math.sin(o)}},tangentAngle:function(t,e,n,r,o){var a=2*Math.PI*o,s=Math.atan2(r*Math.cos(a),-n*Math.sin(a));return i.piMod(s)}}},function(t,e,n){"use strict";function r(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],o=t[r+1],a=l.distance(i[0],i[1],o[0],o[1]),s={from:i,to:o,length:a};n.push(s),e+=a}return{segments:n,totalLength:e}}function i(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=l.distance(r[0],r[1],i[0],i[1])}return e}function o(t,e){if(e>1||e<0||t.length<2)return null;var n=r(t),i=n.segments,o=n.totalLength;if(0===o)return{x:t[0][0],y:t[0][1]};for(var a=0,s=null,l=0;l<i.length;l++){var c=i[l],h=c.from,f=c.to,p=c.length/o;if(e>=a&&e<=a+p){var d=(e-a)/p;s=u.default.pointAt(h[0],h[1],f[0],f[1],d);break}a+=p}return s}function a(t,e){if(e>1||e<0||t.length<2)return 0;for(var n=r(t),i=n.segments,o=n.totalLength,a=0,s=0,u=0;u<i.length;u++){var l=i[u],c=l.from,h=l.to,f=l.length/o;if(e>=a&&e<=a+f){s=Math.atan2(h[1]-c[1],h[0]-c[0]);break}a+=f}return s}function s(t,e,n){for(var r=1/0,i=0;i<t.length-1;i++){var o=t[i],a=t[i+1],s=u.default.pointDistance(o[0],o[1],a[0],a[1],e,n);s<r&&(r=s)}return r}Object.defineProperty(e,"__esModule",{value:!0});var u=n(62),l=n(47);e.lengthOfSegment=i,e.pointAtSegments=o,e.angleAtSegments=a,e.distanceAtSegment=s},function(t,e,n){"use strict";var r=n(1),i=n(38),o=n(28),a=n(174),s=n(100),u=n(40),l=n(259),c=n.n(l),h=n(126),f=n(173),p=n(558),d=function(t){function e(e){return t.call(this,n.i(r.__assign)(n.i(r.__assign)({},e),{autoDraw:!0,renderer:"svg"}))||this}return n.i(r.__extends)(e,t),e.prototype.getShapeBase=function(){return h},e.prototype.getGroupBase=function(){return f.a},e.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!o.b[r.tagName]){for(var i=r.parentNode;i&&!o.b[i.tagName];)i=i.parentNode;r=i}return this.find(function(t){return t.get("el")===r})},e.prototype.createDom=function(){var t=n.i(u.d)("svg"),e=new p.a(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),r=this.get("el");if("sort"===t){var i=this.get("children");i&&i.length&&n.i(u.c)(this,function(t,e){return i.indexOf(t)-i.indexOf(e)?1:0})}else if("clear"===t){if(r){r.innerHTML="";var o=e.el;o.innerHTML="",r.appendChild(o)}}else"matrix"===t?n.i(s.a)(this):"clip"===t?n.i(s.b)(this,e):"changeSize"===t&&(r.setAttribute("width",""+this.get("width")),r.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();n.i(s.b)(this,t),e.length&&n.i(a.b)(t,e)},e.prototype.initEvents=function(){var t=new c.a({canvas:this});t.init(),this.set("eventController",t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e}(i.e);e.a=d},function(t,e,n){"use strict";var r=n(0),i=n(40),o=function(){function t(t,e){this.cfg={};var o=n.i(i.d)("marker"),a=n.i(r.uniqueId)("marker_");o.setAttribute("id",a);var s=n.i(i.d)("path");s.setAttribute("stroke",t.stroke||"none"),s.setAttribute("fill",t.fill||"none"),o.appendChild(s),o.setAttribute("overflow","visible"),o.setAttribute("orient","auto-start-reverse"),this.el=o,this.child=s,this.id=a;var u=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===u?this._setDefaultPath(e,s):(this.cfg=u,this._setMarker(t.lineWidth,s)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var i=this.el,o=this.cfg.path,a=this.cfg.d;n.i(r.isArray)(o)&&(o=o.map(function(t){return t.join(" ")}).join("")),e.setAttribute("d",o),i.appendChild(e),a&&i.setAttribute("refX",""+a/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}();e.a=o},function(t,e,n){"use strict";var r=n(0),i=n(40),o=function(){function t(t){this.type="clip",this.cfg={};var e=n.i(i.d)("clipPath");this.el=e,this.id=n.i(r.uniqueId)("clip_"),e.id=this.id;var o=t.cfg.el;return e.appendChild(o),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}();e.a=o},function(t,e,n){"use strict";function r(t){var e=t.match(c);if(!e)return"";var r="";return e.sort(function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])}),n.i(a.each)(e,function(t){t=t.split(":"),r+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'}),r}function i(t,e){var i,o,s=u.exec(t),l=n.i(a.mod)(n.i(a.toRadian)(parseFloat(s[1])),2*Math.PI),c=s[2];l>=0&&l<.5*Math.PI?(i={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=l&&l<Math.PI?(i={x:1,y:0},o={x:0,y:1}):Math.PI<=l&&l<1.5*Math.PI?(i={x:1,y:1},o={x:0,y:0}):(i={x:0,y:1},o={x:1,y:0});var h=Math.tan(l),f=h*h,p=(o.x-i.x+h*(o.y-i.y))/(f+1)+i.x,d=h*(o.x-i.x+h*(o.y-i.y))/(f+1)+i.y;e.setAttribute("x1",i.x),e.setAttribute("y1",i.y),e.setAttribute("x2",p),e.setAttribute("y2",d),e.innerHTML=r(c)}function o(t,e){var n=l.exec(t),i=parseFloat(n[1]),o=parseFloat(n[2]),a=parseFloat(n[3]),s=n[4];e.setAttribute("cx",i),e.setAttribute("cy",o),e.setAttribute("r",a),e.innerHTML=r(s)}var a=n(0),s=n(40),u=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,l=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,h=function(){function t(t){this.cfg={};var e=null,r=n.i(a.uniqueId)("gradient_");return"l"===t.toLowerCase()[0]?(e=n.i(s.d)("linearGradient"),i(t,e)):(e=n.i(s.d)("radialGradient"),o(t,e)),e.setAttribute("id",r),this.el=e,this.id=r,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}();e.a=h},function(t,e,n){"use strict";var r=n(0),i=n(557),o=n(560),a=n(555),s=n(556),u=n(559),l=n(40),c=function(){function t(t){var e=n.i(l.d)("defs"),i=n.i(r.uniqueId)("defs_");e.id=i,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},t.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new a.a(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addGradient=function(t){var e=new i.a(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new a.a(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new o.a(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new u.a(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new s.a(t);return this.el.appendChild(e.el),this.add(e),e.id},t}();e.a=c},function(t,e,n){"use strict";var r=n(0),i=n(40),o=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,a=function(){function t(t){function e(){a.setAttribute("width",""+h.width),a.setAttribute("height",""+h.height)}this.cfg={};var a=n.i(i.d)("pattern");a.setAttribute("patternUnits","userSpaceOnUse");var s=n.i(i.d)("image");a.appendChild(s);var u=n.i(r.uniqueId)("pattern_");a.id=u,this.el=a,this.id=u,this.cfg=t;var l=o.exec(t),c=l[2];s.setAttribute("href",c);var h=new Image;return c.match(/^data:/i)||(h.crossOrigin="Anonymous"),h.src=c,h.complete?e():(h.onload=e,h.src=h.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}();e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(40),o={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},a={x:"-40%",y:"-40%",width:"200%",height:"200%"},s=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=n.i(i.d)("filter");return n.i(r.each)(a,function(t,n){e.setAttribute(n,t)}),this.el=e,this.id=n.i(r.uniqueId)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var i=!0,o=this.cfg;return n.i(r.each)(Object.keys(o),function(t){if(o[t]!==e[t])return i=!1,!1}),i},t.prototype.update=function(t,e){var n=this.cfg;return n[o[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}();e.a=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"version",function(){return u});var r=n(126),i=n(38);n.d(e,"Event",function(){return i.b});var o=n(554);n.d(e,"Canvas",function(){return o.a});var a=n(173);n.d(e,"Group",function(){return a.a}),n.d(e,"Shape",function(){return r});var s=n(575),u=s.version},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(35),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var r=this.attr(),a=this.get("el");n.i(i.each)(e||r,function(t,e){"x"===e||"y"===e?a.setAttribute("c"+e,t):o.a[e]&&a.setAttribute(o.a[e],t)})},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(35),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return n.i(r.__extends)(e,t),e.prototype.createPath=function(t,e){var r=this.attr(),a=this.get("el");n.i(i.each)(e||r,function(t,e){o.a[e]&&a.setAttribute(o.a[e],t)}),a.innerHTML=r.html},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(35),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var r=this.attr(),a=this.get("el");n.i(i.each)(e||r,function(t,e){"x"===e||"y"===e?a.setAttribute("c"+e,t):o.a[e]&&a.setAttribute(o.a[e],t)})},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(35),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var r=this,a=this.attr(),s=this.get("el");n.i(i.each)(e||a,function(t,e){"img"===e?r._setImage(a.img):o.a[e]&&s.setAttribute(o.a[e],t)})},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),r=this.get("el");if(n.i(i.isString)(t))r.setAttribute("href",t);else if(t instanceof window.Image)e.width||(r.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(r.setAttribute("height",t.height),this.attr("height",t.height)),r.setAttribute("href",t.src);else if(t instanceof HTMLElement&&n.i(i.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())r.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var o=document.createElement("canvas");o.setAttribute("width",""+t.width),o.setAttribute("height",""+t.height),o.getContext("2d").putImageData(t,0,0),e.width||(r.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(r.setAttribute("height",""+t.height),this.attr("height",t.height)),r.setAttribute("href",o.toDataURL())}},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(62),o=n.n(i),a=n(0),s=n(28),u=n(35),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var r=this.attr(),i=this.get("el");n.i(a.each)(e||r,function(e,o){if("startArrow"===o||"endArrow"===o)if(e){var u=n.i(a.isObject)(e)?t.addArrow(r,s.a[o]):t.getDefaultArrow(r,s.a[o]);i.setAttribute(s.a[o],"url(#"+u+")")}else i.removeAttribute(s.a[o]);else s.a[o]&&i.setAttribute(s.a[o],e)})},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return o.a.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,a=e.y2;return o.a.pointAt(n,r,i,a,t)},e}(u.a);e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(35),a=n(568),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return n.i(i.isArray)(t)?t.map(function(t){return t.join(" ")}).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),r=e.x,o=e.y,s=e.r||e.radius,u=e.symbol||"circle";return t=n.i(i.isFunction)(u)?u:a.a.get(u),t?t(r,o,s):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=a.a,e}(o.a);e.a=s},function(t,e,n){"use strict";var r={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}};e.a={get:function(t){return r[t]},register:function(t,e){r[t]=e},remove:function(t){delete r[t]},getAll:function(){return r}}},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(35),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var r=this,a=this.attr(),s=this.get("el");n.i(i.each)(e||a,function(e,u){if("path"===u&&n.i(i.isArray)(e))s.setAttribute("d",r._formatPath(e));else if("startArrow"===u||"endArrow"===u)if(e){var l=n.i(i.isObject)(e)?t.addArrow(a,o.a[u]):t.getDefaultArrow(a,o.a[u]);s.setAttribute(o.a[u],"url(#"+l+")")}else s.removeAttribute(o.a[u]);else o.a[u]&&s.setAttribute(o.a[u],e)})},e.prototype._formatPath=function(t){var e=t.map(function(t){return t.join(" ")}).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength(),r=e?e.getPointAtLength(t*n):null;return r?{x:r.x,y:r.y}:null},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(35),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.createPath=function(t,e){var r=this.attr(),a=this.get("el");n.i(i.each)(e||r,function(t,e){"points"===e&&n.i(i.isArray)(t)&&t.length>=2?a.setAttribute("points",t.map(function(t){return t[0]+","+t[1]}).join(" ")):o.a[e]&&a.setAttribute(o.a[e],t)})},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(62),o=n.n(i),a=n(268),s=n.n(a),u=n(0),l=n(28),c=n(35),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var r=this.attr(),i=this.get("el");n.i(u.each)(e||r,function(t,e){"points"===e&&n.i(u.isArray)(t)&&t.length>=2?i.setAttribute("points",t.map(function(t){return t[0]+","+t[1]}).join(" ")):l.a[e]&&i.setAttribute(l.a[e],t)})},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return n.i(u.isNil)(e)?(this.set("totalLength",s.a.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e=this.attr().points,r=this.get("tCache");r||(this._setTcache(),r=this.get("tCache"));var i,a;return n.i(u.each)(r,function(e,n){t>=e[0]&&t<=e[1]&&(i=(t-e[0])/(e[1]-e[0]),a=n)}),o.a.pointAt(e[a][0],e[a][1],e[a+1][0],e[a+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var r,i,a=0,s=[];n.i(u.each)(t,function(n,u){t[u+1]&&(r=[],r[0]=a/e,i=o.a.length(n[0],n[1],t[u+1][0],t[u+1][1]),a+=i,r[1]=a/e,s.push(r))}),this.set("tCache",s)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(c.a);e.a=h},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(35),a=n(28),s=n(574),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var r=this,o=this.attr(),s=this.get("el"),u=!1,l=["x","y","width","height","radius"];n.i(i.each)(e||o,function(t,e){-1===l.indexOf(e)||u?-1===l.indexOf(e)&&a.a[e]&&s.setAttribute(a.a[e],t):(s.setAttribute("d",r._assembleRect(o)),u=!0)})},e.prototype._assembleRect=function(t){var e=t.x,r=t.y,o=t.width,a=t.height,u=t.radius;if(!u)return"M "+e+","+r+" l "+o+",0 l 0,"+a+" l"+-o+" 0 z";var l=n.i(s.a)(u);return n.i(i.isArray)(u)?1===u.length?l.r1=l.r2=l.r3=l.r4=u[0]:2===u.length?(l.r1=l.r3=u[0],l.r2=l.r4=u[1]):3===u.length?(l.r1=u[0],l.r2=l.r4=u[1],l.r3=u[2]):(l.r1=u[0],l.r2=u[1],l.r3=u[2],l.r4=u[3]):l.r1=l.r2=l.r3=l.r4=u,[["M "+(e+l.r1)+","+r],["l "+(o-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(a-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-o)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-a)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]].join(" ")},e}(o.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(1087),a=(n.n(o),n(100)),s=n(28),u=n(35),l=.3,c={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},h={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},f={left:"left",start:"left",center:"middle",right:"end",end:"end"},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.i(r.__assign)(n.i(r.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var r=this,o=this.attr(),u=this.get("el");this._setFont(),n.i(i.each)(e||o,function(t,e){"text"===e?r._setText(""+t):"matrix"===e&&t?n.i(a.a)(r):s.a[e]&&u.setAttribute(s.a[e],t)}),u.setAttribute("paint-order","stroke"),u.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),r=e.textBaseline,i=e.textAlign,a=n.i(o.detect)();a&&"firefox"===a.name?t.setAttribute("dominant-baseline",h[r]||"alphabetic"):t.setAttribute("alignment-baseline",c[r]||"baseline"),t.setAttribute("text-anchor",f[i]||"left")},e.prototype._setText=function(t){var e=this.get("el"),r=this.attr(),o=r.x,a=r.textBaseline,s=void 0===a?"bottom":a;if(t)if(~t.indexOf("\n")){var u=t.split("\n"),c=u.length-1,h="";n.i(i.each)(u,function(t,e){0===e?"alphabetic"===s?h+='<tspan x="'+o+'" dy="'+-c+'em">'+t+"</tspan>":"top"===s?h+='<tspan x="'+o+'" dy="0.9em">'+t+"</tspan>":"middle"===s?h+='<tspan x="'+o+'" dy="'+-(c-1)/2+'em">'+t+"</tspan>":"bottom"===s?h+='<tspan x="'+o+'" dy="-'+(c+l)+'em">'+t+"</tspan>":"hanging"===s&&(h+='<tspan x="'+o+'" dy="'+(-(c-1)-l)+'em">'+t+"</tspan>"):h+='<tspan x="'+o+'" dy="1em">'+t+"</tspan>"}),e.innerHTML=h}else e.innerHTML=t;else e.innerHTML=""},e}(u.a);e.a=p},function(t,e,n){"use strict";function r(t){var e=0,r=0,o=0,a=0;return n.i(i.isArray)(t)?1===t.length?e=r=o=a=t[0]:2===t.length?(e=o=t[0],r=a=t[1]):3===t.length?(e=t[0],r=a=t[1],o=t[2]):(e=t[0],r=t[1],o=t[2],a=t[3]):e=r=o=a=t,{r1:e,r2:r,r3:o,r4:a}}e.a=r;var i=n(0)},function(t,e){t.exports={__npminstall_done:!1,_from:"@antv/g-svg@^0.4.0",_id:"@antv/g-svg@0.4.4",_inBundle:!1,_integrity:"sha512-oHhfT3OhckGpBNlLM+FY5l6ysA044pqJ3CQ/NNqS269PwAXqswu7GbIIDmiy6lUURtaAVgyYxbAddoCnCvZ1Kg==",_location:"/@antv/g-svg",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"@antv/g-svg@^0.4.0",name:"@antv/g-svg",escapedName:"@antv%2fg-svg",scope:"@antv",rawSpec:"^0.4.0",saveSpec:null,fetchSpec:"^0.4.0"},_requiredBy:["/@antv/g2"],_resolved:"https://registry.npmjs.org/@antv/g-svg/-/g-svg-0.4.4.tgz",_shasum:"60ea96e098536ee5e0361bc870363c5aaab050f2",_spec:"@antv/g-svg@^0.4.0",_where:"/Users/pxy/Documents/workspacegit/dv/dvtry2/node_modules/@antv/g2",author:{name:"https://github.com/orgs/antvis/people"},bugs:{url:"https://github.com/antvis/g/issues"},bundleDependencies:!1,dependencies:{"@antv/g-base":"^0.4.4","@antv/g-math":"^0.1.3","@antv/util":"~2.0.0","detect-browser":"^4.6.0"},deprecated:!1,description:"A canvas library which providing 2d",devDependencies:{"@antv/torch":"^1.0.0",less:"^3.9.0","npm-run-all":"^4.1.5",webpack:"^4.39.3","webpack-cli":"^3.3.7"},files:["package.json","esm","lib","dist","LICENSE","README.md"],gitHead:"c809a87a65d3cf6f1f54db1c6653f474fdfe74bd",homepage:"https://github.com/antvis/g#readme",keywords:["util","antv","g"],license:"ISC",main:"lib/index.js",module:"esm/index.js",name:"@antv/g-svg",publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/antvis/g.git"},scripts:{build:"npm run clean && run-p build:*","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:umd":"webpack --config webpack.config.js --mode production",clean:"rm -rf esm lib dist",coverage:"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage",test:"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts",tsc:"tsc --noEmit",typecheck:"tsc --noEmit"},types:"lib/index.d.ts",unpkg:"dist/g.min.js",version:"0.4.4"}},function(t,e,n){"use strict";function r(t,e,r){var i={fillOpacity:n.i(o.isNil)(t.attr("fillOpacity"))?1:t.attr("fillOpacity"),strokeOpacity:n.i(o.isNil)(t.attr("strokeOpacity"))?1:t.attr("strokeOpacity"),opacity:n.i(o.isNil)(t.attr("opacity"))?1:t.attr("opacity")};t.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),t.animate(i,e)}function i(t,e,n){var r={fillOpacity:0,strokeOpacity:0,opacity:0},i=e.easing,o=e.duration,a=e.delay;t.animate(r,o,i,function(){t.remove(!0)},a)}e.a=r,e.b=i;var o=n(0)},function(t,e,n){"use strict";function r(t,e,r){var i=r.coordinate,o=r.minYPoint;n.i(a.a)(t,e,i,o,"x")}function i(t,e,r){var i=r.coordinate,o=r.minYPoint;n.i(a.a)(t,e,i,o,"y")}function o(t,e,r){var i=r.coordinate,o=r.minYPoint;n.i(a.a)(t,e,i,o,"xy")}e.a=r,e.c=i,e.b=o;var a=n(582)},function(t,e,n){"use strict";function r(t,e,n){var r=t.getTotalLength();t.attr("lineDash",[r]),t.animate(function(t){return{lineDashOffset:(1-t)*r}},e)}e.a=r},function(t,e,n){"use strict";function r(t,e,n){var r=n.toAttrs,i=r.x,o=r.y;delete r.x,delete r.y,t.attr(r),t.animate({x:i,y:o},e)}e.a=r},function(t,e,n){"use strict";function r(t,e,r){var i=t.getBBox(),a=t.get("origin").mappingData,s=a.points,u=s[0].y-s[1].y>0?i.maxX:i.minX,l=(i.minY+i.maxY)/2;t.applyToMatrix([u,l,1]);var c=n.i(o.a)(t.getMatrix(),[["t",-u,-l],["s",.01,1],["t",u,l]]);t.setMatrix(c),t.animate({matrix:n.i(o.a)(t.getMatrix(),[["t",-u,-l],["s",100,1],["t",u,l]])},e)}function i(t,e,r){var i=t.getBBox(),a=t.get("origin").mappingData,s=(i.minX+i.maxX)/2,u=a.points,l=u[0].y-u[1].y<=0?i.maxY:i.minY;t.applyToMatrix([s,l,1]);var c=n.i(o.a)(t.getMatrix(),[["t",-s,-l],["s",1,.01],["t",s,l]]);t.setMatrix(c),t.animate({matrix:n.i(o.a)(t.getMatrix(),[["t",-s,-l],["s",1,100],["t",s,l]])},e)}e.a=r,e.b=i;var o=n(24)},function(t,e,n){"use strict";function r(t,e){var r,i=l()(t,e),o=i.startAngle,a=i.endAngle;return!n.i(c.isNumberEqual)(o,.5*-Math.PI)&&o<.5*-Math.PI&&(o+=2*Math.PI),!n.i(c.isNumberEqual)(a,.5*-Math.PI)&&a<.5*-Math.PI&&(a+=2*Math.PI),0===e[5]&&(r=[a,o],o=r[0],a=r[1]),n.i(c.isNumberEqual)(o,1.5*Math.PI)&&(o=-.5*Math.PI),n.i(c.isNumberEqual)(a,-.5*Math.PI)&&(a=1.5*Math.PI),{startAngle:o,endAngle:a}}function i(t){var e;return"M"===t[0]||"L"===t[0]?e=[t[1],t[2]]:"a"!==t[0]&&"A"!==t[0]||(e=[t[t.length-2],t[t.length-1]]),e}function o(t){var e,o,a,s=t.filter(function(t){return"A"===t[0]||"a"===t[0]}),u=s[0],l=s.length>1?s[1]:s[0],h=t.indexOf(u),f=t.indexOf(l),p=i(t[h-1]),d=i(t[f-1]),v=r(p,u),g=v.startAngle,m=v.endAngle,y=r(d,l),_=y.startAngle,b=y.endAngle;n.i(c.isNumberEqual)(g,_)&&n.i(c.isNumberEqual)(m,b)?(o=g,a=m):(o=Math.min(g,_),a=Math.max(m,b));var x=u[1],w=s[s.length-1][1];return x<w?(e=[w,x],x=e[0],w=e[1]):x===w&&(w=0),{startAngle:o,endAngle:a,radius:x,innerRadius:w}}function a(t,e,r){var i=r.toAttrs,a=r.coordinate,u=i.path,l=u.map(function(t){return t[0]}),f=o(u),p=f.startAngle,d=f.endAngle,v=f.radius,g=f.innerRadius,m=o(t.attr("path")),y=m.startAngle,_=m.endAngle,b=a.getCenter(),x=p-y,w=d-_;t.animate(function(t){var e=y+t*x,r=_+t*w;return n.i(s.__assign)(n.i(s.__assign)({},i),{path:n.i(c.isEqual)(l,["M","A","A","Z"])?n.i(h.e)(b.x,b.y,v,e,r):n.i(h.c)(b.x,b.y,v,e,r,g)})},n.i(s.__assign)(n.i(s.__assign)({},e),{callback:function(){t.attr("path",u)}}))}e.a=a;var s=n(1),u=n(548),l=n.n(u),c=n(0),h=n(36)},function(t,e,n){"use strict";function r(t,e,r){var i,a=e[0],s=e[1];return t.applyToMatrix([a,s,1]),"x"===r?(t.setMatrix(n.i(o.a)(t.getMatrix(),[["t",-a,-s],["s",.01,1],["t",a,s]])),i=n.i(o.a)(t.getMatrix(),[["t",-a,-s],["s",100,1],["t",a,s]])):"y"===r?(t.setMatrix(n.i(o.a)(t.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]])),i=n.i(o.a)(t.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])):"xy"===r&&(t.setMatrix(n.i(o.a)(t.getMatrix(),[["t",-a,-s],["s",.01,.01],["t",a,s]])),i=n.i(o.a)(t.getMatrix(),[["t",-a,-s],["s",100,100],["t",a,s]])),i}function i(t,e,n,i,o){var a,s,u=n.start,l=n.end,c=n.getWidth(),h=n.getHeight();"y"===o?(a=u.x+c/2,s=i.y<u.y?i.y:u.y):"x"===o?(a=i.x>u.x?i.x:u.x,s=u.y+h/2):"xy"===o&&(n.isPolar?(a=n.getCenter().x,s=n.getCenter().y):(a=(u.x+l.x)/2,s=(u.y+l.y)/2));var f=r(t,[a,s],o);t.animate({matrix:f},e)}e.a=i;var o=n(24)},function(t,e,n){"use strict";function r(t,e,r){var a=n.i(o.c)(r.coordinate,20),s=a.type,u=a.startState,l=a.endState,c=t.setClip({type:s,attrs:u});c.animate(l,n.i(i.__assign)(n.i(i.__assign)({},e),{callback:function(){t&&!t.get("destroyed")&&t.set("clipShape",null),c.remove(!0)}}))}e.a=r;var i=n(1),o=n(42)},function(t,e,n){"use strict";function r(t,e,i){if(t.isGroup())n.i(u.each)(t.getChildren(),function(t){r(t,e,i)});else{var o=t.getBBox(),l=(o.minX+o.maxX)/2,c=(o.minY+o.maxY)/2;if(t.applyToMatrix([l,c,1]),"zoomIn"===i){var h=n.i(s.a)(t.getMatrix(),[["t",-l,-c],["s",.01,.01],["t",l,c]]);t.setMatrix(h),t.animate({matrix:n.i(s.a)(t.getMatrix(),[["t",-l,-c],["s",100,100],["t",l,c]])},e)}else t.animate({matrix:n.i(s.a)(t.getMatrix(),[["t",-l,-c],["s",.01,.01],["t",l,c]])},n.i(a.__assign)(n.i(a.__assign)({},e),{callback:function(){t.remove(!0)}}))}}function i(t,e,n){r(t,e,"zoomIn")}function o(t,e,n){r(t,e,"zoomOut")}e.a=i,e.b=o;var a=n(1),s=n(24),u=n(0)},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(274),s=n(680),u=n(273),l=function(t){function e(e){var u=this,l=e.container,c=e.width,h=e.height,f=e.autoFit,p=void 0!==f&&f,d=e.padding,v=e.renderer,g=void 0===v?"canvas":v,m=e.pixelRatio,y=e.localRefresh,_=void 0===y||y,b=e.visible,x=void 0===b||b,w=e.defaultInteractions,S=void 0===w?["tooltip","legend-filter","legend-active","continuous-filter"]:w,E=e.options,M=e.limitInPlot,T=e.theme,C=n.i(i.isString)(l)?document.getElementById(l):l,A=n.i(s.a)('<div style="position:relative;"></div>');C.appendChild(A);var P=n.i(s.b)(C,p,c,h),k=n.i(a.b)(g),I=new k.Canvas(n.i(r.__assign)({container:A,pixelRatio:m,localRefresh:_},P));return u=t.call(this,{parent:null,canvas:I,backgroundGroup:I.addGroup({zIndex:o.d.BG}),middleGroup:I.addGroup({zIndex:o.d.MID}),foregroundGroup:I.addGroup({zIndex:o.d.FORE}),padding:d,visible:x,options:E,limitInPlot:M,theme:T})||this,u.onResize=n.i(i.debounce)(function(){u.forceFit()},300),u.ele=C,u.canvas=I,u.width=P.width,u.height=P.height,u.autoFit=p,u.localRefresh=_,u.renderer=g,u.wrapperElement=A,u.updateCanvasStyle(),u.bindAutoFit(),u.initDefaultInteractions(S),u}return n.i(r.__extends)(e,t),e.prototype.initDefaultInteractions=function(t){var e=this;n.i(i.each)(t,function(t){e.interaction(t)})},e.prototype.changeSize=function(t,e){return this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),n.i(s.c)(this.wrapperElement),this.wrapperElement=null},e.prototype.changeVisible=function(t){return this.wrapperElement.style.display=t?"":"none",this},e.prototype.forceFit=function(){var t=n.i(s.b)(this.ele,!0,this.width,this.height),e=t.width,r=t.height;this.changeSize(e,r)},e.prototype.updateCanvasStyle=function(){n.i(s.d)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},e.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},e.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},e}(u.b);e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(74),a=n(73),s=n(11),u=n(42),l=n(64),c=n(87),h=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(s.a.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(s.a.BG).addGroup(),n.option=[],n}return n.i(r.__extends)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"annotation"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.layout=function(){var t=this,e=this.getComponents(),r=function(e){var n=e.component,r=e.extra,i=r.type,o=t.getAnnotationTheme(i);n.update(t.getAnnotationCfg(i,r,o))},o=function(e){var n=t.createAnnotation(e);n&&(n.component.init(),"regionFilter"===e.type&&n.component.render(),t.cache.set(e,n))};e.length?n.i(i.each)(e,function(e){"regionFilter"===e.component.get("type")?t.view.once(s.c.AFTER_RENDER,function(){r(e)}):r(e)}):n.i(i.each)(this.option,function(e){"regionFilter"===e.type?t.view.once(s.c.AFTER_RENDER,function(){o(e)}):o(e)})},e.prototype.render=function(){},e.prototype.update=function(){var t=this,e=new WeakMap,r=function(r){var i=r.type,o=t.getAnnotationTheme(i),a=t.getAnnotationCfg(i,r,o),s=t.cache.get(r);if(s)n.i(l.c)(a,["container"]),s.component.update(a),e.set(r,!0);else{var u=t.createAnnotation(r);u&&(u.component.init(),"regionFilter"===r.type&&u.component.render(),t.cache.set(r,u),e.set(r,!0))}};this.view.once(s.c.AFTER_RENDER,function(){n.i(i.each)(t.option,function(t){"regionFilter"===t.type&&r(t)});var o=new Map;t.cache.forEach(function(t,n){e.has(n)?o.set(n,t):t.component.destroy()}),t.cache=o}),n.i(i.each)(this.option,function(t){"regionFilter"!==t.type&&r(t)})},e.prototype.clear=function(e){void 0===e&&(e=!1),t.prototype.clear.call(this),this.cache.clear(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},e.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},e.prototype.createAnnotation=function(t){var e=t.type,r=o.d[n.i(i.upperFirst)(e)];if(r){var a=this.getAnnotationTheme(e),u=this.getAnnotationCfg(e,t,a);return{component:new r(u),layer:this.isTop(u)?s.a.FORE:s.a.BG,direction:s.b.NONE,type:s.h.ANNOTATION,extra:t}}},e.prototype.annotation=function(t){this.option.push(t)},e.prototype.arc=function(t){return this.annotation(n.i(r.__assign)({type:"arc"},t)),this},e.prototype.image=function(t){return this.annotation(n.i(r.__assign)({type:"image"},t)),this},e.prototype.line=function(t){return this.annotation(n.i(r.__assign)({type:"line"},t)),this},e.prototype.region=function(t){return this.annotation(n.i(r.__assign)({type:"region"},t)),this},e.prototype.text=function(t){return this.annotation(n.i(r.__assign)({type:"text"},t)),this},e.prototype.dataMarker=function(t){return this.annotation(n.i(r.__assign)({type:"dataMarker"},t)),this},e.prototype.dataRegion=function(t){this.annotation(n.i(r.__assign)({type:"dataRegion"},t))},e.prototype.regionFilter=function(t){this.annotation(n.i(r.__assign)({type:"regionFilter"},t))},e.prototype.parsePosition=function(t){var e=this.view.getXScale(),r=this.view.getScalesByDim("y"),o=n.i(i.isFunction)(t)?t.call(null,e,r):t,a=0,s=0;if(n.i(i.isArray)(o)){var u=o[0],l=o[1];if(n.i(i.isString)(u)&&-1!==u.indexOf("%")&&!isNaN(u.slice(0,-1)))return this.parsePercentPosition(o);a=this.getNormalizedValue(u,e),s=this.getNormalizedValue(l,Object.values(r)[0])}else if(!n.i(i.isNil)(o))for(var c=0,h=n.i(i.keys)(o);c<h.length;c++){var f=h[c],p=o[f];f===e.field&&(a=this.getNormalizedValue(p,e)),r[f]&&(s=this.getNormalizedValue(p,r[f]))}return this.view.getCoordinate().convert({x:a,y:s})},e.prototype.getRegionPoints=function(t,e){var r,o=this,a=this.view.getXScale(),s=this.view.getScalesByDim("y"),u=Object.values(s)[0],l=a.field,c=this.view.getData(),h=n.i(i.isArray)(t)?t[0]:t[l],f=n.i(i.isArray)(e)?e[0]:e[l],p=[];return n.i(i.each)(c,function(t,e){if(t[l]===h&&(r=e),e>=r){var n=o.parsePosition([t[l],t[u.field]]);n&&p.push(n)}if(t[l]===f)return!1}),p},e.prototype.getNormalizedValue=function(t,e){var n,r;switch(t){case"start":n=0;break;case"end":n=1;break;case"median":r=e.isCategory?(e.values.length-1)/2:(e.min+e.max)/2,n=e.scale(r);break;case"min":case"max":r=e.isCategory?"min"===t?0:e.values.length-1:e[t],n=e.scale(r);break;default:n=e.scale(t)}return n},e.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,n=parseFloat(t[1])/100,r=this.view.getCoordinate(),i=r.start,o=r.end,a={x:Math.min(i.x,o.x),y:Math.min(i.y,o.y)};return{x:r.getWidth()*e+a.x,y:r.getHeight()*n+a.y}},e.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,n=t.end,r=t.getWidth(),i=t.getHeight(),o={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return{x:o.x,y:o.y,minX:o.x,minY:o.y,maxX:o.x+r,maxY:o.y+i,width:r,height:i}},e.prototype.getAnnotationCfg=function(t,e,o){var s=this.view.getCoordinate(),l={};if(n.i(i.isNil)(e))return null;if("arc"===t){var c=e,h=c.start,f=c.end,p=this.parsePosition(h),d=this.parsePosition(f),v=n.i(u.e)(s,p),g=n.i(u.e)(s,d);v>g&&(g=2*Math.PI+g),l={center:s.getCenter(),radius:n.i(u.a)(s,p),startAngle:v,endAngle:g}}else if("image"===t){var m=e,h=m.start,f=m.end;l={start:this.parsePosition(h),end:this.parsePosition(f),src:e.src}}else if("line"===t){var y=e,h=y.start,f=y.end;l={start:this.parsePosition(h),end:this.parsePosition(f),text:n.i(i.get)(e,"text",null)}}else if("region"===t){var _=e,h=_.start,f=_.end;l={start:this.parsePosition(h),end:this.parsePosition(f)}}else if("text"===t){var b=e,x=b.position,w=b.rotate;l=n.i(r.__assign)(n.i(r.__assign)({},this.parsePosition(x)),{content:e.content,rotate:w})}else if("dataMarker"===t){var S=e,x=S.position,E=S.point,M=S.line,T=S.text,C=S.autoAdjust,A=S.direction;l=n.i(r.__assign)(n.i(r.__assign)({},this.parsePosition(x)),{coordinateBBox:this.getCoordinateBBox(),point:E,line:M,text:T,autoAdjust:C,direction:A})}else if("dataRegion"===t){var P=e,h=P.start,f=P.end,k=P.region,T=P.text,I=P.lineLength;l={points:this.getRegionPoints(h,f),region:k,text:T,lineLength:I}}else if("regionFilter"===t){var O=e,h=O.start,f=O.end,j=O.apply,L=O.color,D=this.view.geometries,R=[],B=function(t){t&&(t.isGroup()?t.getChildren().forEach(function(t){return B(t)}):R.push(t))};n.i(i.each)(D,function(t){j?n.i(i.contains)(j,t.type)&&n.i(i.each)(t.elements,function(t){B(t.shape)}):n.i(i.each)(t.elements,function(t){B(t.shape)})}),l={color:L,shapes:R,start:this.parsePosition(h),end:this.parsePosition(f)}}var z=n.i(i.deepMix)({},o,n.i(r.__assign)(n.i(r.__assign)({},l),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return z.container=this.getComponentContainer(z),z.animate=this.view.getOptions().animate&&z.animate&&n.i(i.get)(e,"animate",z.animate),z.animateOption=n.i(i.deepMix)({},a.d,z.animateOption,e.animateOption),z},e.prototype.isTop=function(t){return n.i(i.get)(t,"top",!0)},e.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},e.prototype.getAnnotationTheme=function(t){return n.i(i.get)(this.view.getTheme(),["components","annotation",t],{})},e}(c.a);e.a=h},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(74),s=n(73),u=n(192),l=n(681),c=n(64),h=n(87),f=["container"],p=n.i(r.__assign)(n.i(r.__assign)({},s.d),{appear:null}),d=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(o.a.BG).addGroup(),n.axisContainer=n.view.getLayer(o.a.BG).addGroup(),n}return n.i(r.__extends)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"axis"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().axes,this.createXAxes(),this.createYAxes()},e.prototype.layout=function(){var t=this,e=this.view.getCoordinate();n.i(i.each)(this.getComponents(),function(r){var i,a=r.component,s=r.direction,c=r.type,h=r.extra,f=h.dim,p=h.scale,d=h.alignTick;if(c===o.h.AXIS)e.isPolar?"x"===f?i=e.isTransposed?n.i(u.b)(e,s):n.i(u.c)(e):"y"===f&&(i=e.isTransposed?n.i(u.c)(e):n.i(u.b)(e,s)):i=n.i(u.b)(e,s);else if(c===o.h.GRID)if(e.isPolar){var v=void 0;v=e.isTransposed?"x"===f?n.i(l.a)(e,t.view.getYScales()[0],p,d,f):n.i(l.b)(e,p,f,d):"x"===f?n.i(l.b)(e,p,f,d):n.i(l.a)(e,t.view.getXScale(),p,d,f),i={items:v,center:t.view.getCoordinate().getCenter()}}else i={items:n.i(l.b)(e,p,f,d)};a.update(i)})},e.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach(function(n,r){t.has(r)?e.set(r,n):n.component.destroy()}),this.cache=e},e.prototype.clear=function(){t.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},e.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(e&&!e.isIdentity){var r=e.field,a=n.i(u.a)(this.option,e.field);if(!1!==a){var s=this.view.getCoordinate(),l=this.getId("axis",r),h=this.getId("grid",r),p=n.i(u.d)(a,o.b.BOTTOM),d=o.a.BG,v="x";if(s.isRect){var g=this.cache.get(l);if(g){var m=this.getLineAxisCfg(e,a,p);n.i(c.c)(m,f),g.component.update(m),t.set(l,g)}else g=this.createLineAxis(e,a,d,p,v),this.cache.set(l,g),t.set(l,g);var y=this.cache.get(h);if(y){var m=this.getLineGridCfg(e,a,p,v);n.i(c.c)(m,f),y.component.update(m),t.set(h,y)}else(y=this.createLineGrid(e,a,d,p,v))&&(this.cache.set(h,y),t.set(h,y))}else if(s.isPolar){var g=this.cache.get(l);if(g){var m=s.isTransposed?this.getLineAxisCfg(e,a,"radius"):this.getCircleAxisCfg(e,a,p);n.i(c.c)(m,f),g.component.update(m),t.set(l,g)}else{if(s.isTransposed){if(n.i(i.isUndefined)(a))return;g=this.createLineAxis(e,a,d,"radius",v)}else g=this.createCircleAxis(e,a,d,p,v);this.cache.set(l,g),t.set(l,g)}var y=this.cache.get(h);if(y){var m=s.isTransposed?this.getCircleGridCfg(e,a,"radius",v):this.getLineGridCfg(e,a,"circle",v);n.i(c.c)(m,f),y.component.update(m),t.set(h,y)}else{if(s.isTransposed){if(n.i(i.isUndefined)(a))return;y=this.createCircleGrid(e,a,d,"radius",v)}else y=this.createLineGrid(e,a,d,"circle",v);y&&(this.cache.set(h,y),t.set(h,y))}}}}},e.prototype.updateYAxes=function(t){var e=this,r=this.view.getYScales();n.i(i.each)(r,function(r,a){if(r&&!r.isIdentity){var s=r.field,l=n.i(u.a)(e.option,s);if(!1!==l){var h=o.a.BG,p="y",d=e.getId("axis",s),v=e.getId("grid",s),g=e.view.getCoordinate();if(g.isRect){var m=n.i(u.d)(l,0===a?o.b.LEFT:o.b.RIGHT),y=e.cache.get(d);if(y){var _=e.getLineAxisCfg(r,l,m);n.i(c.c)(_,f),y.component.update(_),t.set(d,y)}else y=e.createLineAxis(r,l,h,m,p),e.cache.set(d,y),t.set(d,y);var b=e.cache.get(v);if(b){var _=e.getLineGridCfg(r,l,m,p);n.i(c.c)(_,f),b.component.update(_),t.set(v,b)}else(b=e.createLineGrid(r,l,h,m,p))&&(e.cache.set(v,b),t.set(v,b))}else if(g.isPolar){var y=e.cache.get(d);if(y){var _=g.isTransposed?e.getCircleAxisCfg(r,l,"circle"):e.getLineAxisCfg(r,l,"radius");n.i(c.c)(_,f),y.component.update(_),t.set(d,y)}else{if(g.isTransposed){if(n.i(i.isUndefined)(l))return;y=e.createCircleAxis(r,l,h,"circle",p)}else y=e.createLineAxis(r,l,h,"radius",p);e.cache.set(d,y),t.set(d,y)}var b=e.cache.get(v);if(b){var _=g.isTransposed?e.getLineGridCfg(r,l,"circle",p):e.getCircleGridCfg(r,l,"radius",p);n.i(c.c)(_,f),b.component.update(_),t.set(v,b)}else{if(g.isTransposed){if(n.i(i.isUndefined)(l))return;b=e.createLineGrid(r,l,h,"circle",p)}else b=e.createCircleGrid(r,l,h,"radius",p);b&&(e.cache.set(v,b),t.set(v,b))}}}}})},e.prototype.createXAxes=function(){var t=this.view.getXScale();if(t&&!t.isIdentity){var e=n.i(u.a)(this.option,t.field);if(!1!==e){var r=n.i(u.d)(e,o.b.BOTTOM),a=o.a.BG,s="x",l=this.view.getCoordinate(),c=this.getId("axis",t.field),h=this.getId("grid",t.field);if(l.isRect){var f=this.createLineAxis(t,e,a,r,s);this.cache.set(c,f);var p=this.createLineGrid(t,e,a,r,s);p&&this.cache.set(h,p)}else if(l.isPolar){var f=void 0,p=void 0;if(l.isTransposed){if(n.i(i.isUndefined)(e))return;f=this.createLineAxis(t,e,a,"radius",s),p=this.createCircleGrid(t,e,a,"radius",s)}else f=this.createCircleAxis(t,e,a,r,s),p=this.createLineGrid(t,e,a,"circle",s);this.cache.set(c,f),p&&this.cache.set(h,p)}}}},e.prototype.createYAxes=function(){var t=this,e=this.view.getYScales();n.i(i.each)(e,function(e,r){if(e&&!e.isIdentity){var a=e.field,s=n.i(u.a)(t.option,a);if(!1!==s){var l=o.a.BG,c="y",h=t.getId("axis",a),f=t.getId("grid",a),p=t.view.getCoordinate();if(p.isRect){var d=n.i(u.d)(s,0===r?o.b.LEFT:o.b.RIGHT),v=t.createLineAxis(e,s,l,d,c);t.cache.set(h,v);var g=t.createLineGrid(e,s,l,d,c);g&&t.cache.set(f,g)}else if(p.isPolar){var v=void 0,g=void 0;if(p.isTransposed){if(n.i(i.isUndefined)(s))return;v=t.createCircleAxis(e,s,l,"circle",c),g=t.createLineGrid(e,s,l,"circle",c)}else v=t.createLineAxis(e,s,l,"radius",c),g=t.createCircleGrid(e,s,l,"radius",c);t.cache.set(t.getId("axis",e.field),v),g&&t.cache.set(f,g)}}}})},e.prototype.createLineAxis=function(t,e,n,r,i){var s={component:new a.i(this.getLineAxisCfg(t,e,r)),layer:n,direction:"radius"===r?o.b.NONE:r,type:o.h.AXIS,extra:{dim:i,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createLineGrid=function(t,e,r,s,u){var l=this.getLineGridCfg(t,e,s,u);if(l){var c={component:new a.j(l),layer:r,direction:o.b.NONE,type:o.h.GRID,extra:{dim:u,scale:t,alignTick:n.i(i.get)(l,"alignTick",!0)}};return c.component.init(),c}},e.prototype.createCircleAxis=function(t,e,n,r,i){var s={component:new a.k(this.getCircleAxisCfg(t,e,r)),layer:n,direction:r,type:o.h.AXIS,extra:{dim:i,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createCircleGrid=function(t,e,r,s,u){var l=this.getCircleGridCfg(t,e,s,u);if(l){var c={component:new a.l(l),layer:r,direction:o.b.NONE,type:o.h.GRID,extra:{dim:u,scale:t,alignTick:n.i(i.get)(l,"alignTick",!0)}};return c.component.init(),c}},e.prototype.getLineAxisCfg=function(t,e,o){var a=this.axisContainer,s=this.view.getCoordinate(),l=n.i(u.b)(s,o),c=n.i(u.e)(t,e),h=n.i(u.f)(this.view.getTheme(),o),f=n.i(i.get)(e,["title"])?n.i(i.deepMix)({title:{style:{text:c}}},e):e,p=n.i(i.deepMix)(n.i(r.__assign)(n.i(r.__assign)({container:a},l),{ticks:t.getTicks().map(function(t){return{id:""+t.tickValue,name:t.text,value:t.value}}),verticalFactor:s.isPolar?-1*n.i(u.g)(l,s.getCenter()):n.i(u.g)(l,s.getCenter())}),h,f),d=this.getAnimateCfg(p),v=d.animate,g=d.animateOption;return p.animateOption=g,p.animate=v,p},e.prototype.getLineGridCfg=function(t,e,r,o){if(n.i(l.c)(n.i(u.f)(this.view.getTheme(),r),e)){var a=n.i(l.d)(this.view.getTheme(),r),s=n.i(i.deepMix)({container:this.gridContainer},a,n.i(i.get)(e,"grid"),this.getAnimateCfg(e));return s.items=n.i(l.b)(this.view.getCoordinate(),t,o,n.i(i.get)(s,"alignTick",!0)),s}},e.prototype.getCircleAxisCfg=function(t,e,o){var a=this.axisContainer,s=this.view.getCoordinate(),l=t.getTicks().map(function(t){return{id:""+t.tickValue,name:t.text,value:t.value}});t.isCategory||Math.abs(s.endAngle-s.startAngle)!==2*Math.PI||l.pop();var c=n.i(u.e)(t,e),h=n.i(u.f)(this.view.getTheme(),"circle"),f=n.i(i.get)(e,["title"])?n.i(i.deepMix)({title:{style:{text:c}}},e):e,p=n.i(i.deepMix)(n.i(r.__assign)(n.i(r.__assign)({container:a},n.i(u.c)(this.view.getCoordinate())),{ticks:l,verticalFactor:1}),h,f),d=this.getAnimateCfg(p),v=d.animate,g=d.animateOption;return p.animate=v,p.animateOption=g,p},e.prototype.getCircleGridCfg=function(t,e,r,o){if(n.i(l.c)(n.i(u.f)(this.view.getTheme(),r),e)){var a=n.i(l.d)(this.view.getTheme(),"radius"),s=n.i(i.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},a,n.i(i.get)(e,"grid"),this.getAnimateCfg(e)),c=n.i(i.get)(s,"alignTick",!0),h="x"===o?this.view.getYScales()[0]:this.view.getXScale();return s.items=n.i(l.a)(this.view.getCoordinate(),h,t,c,o),s}},e.prototype.getId=function(t,e){return t+"-"+e+"-"+this.view.getCoordinate().type},e.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&n.i(i.get)(t,"animate"),animateOption:t&&t.animateOption?n.i(i.deepMix)({},p,t.animateOption):p}},e}(h.a);e.a=d},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(74),a=function(){function t(t){this.option=this.wrapperOption(t)}return t.prototype.update=function(t){return this.option=this.wrapperOption(t),this},t.prototype.hasAction=function(t){var e=this.option.actions;return n.i(i.some)(e,function(e){return e[0]===t})},t.prototype.create=function(t,e){var i=this.option,a=i.type,s=i.cfg,u="theta"===a,l=n.i(r.__assign)({start:t,end:e},s),c=n.i(o.b)(u?"polar":a);return this.coordinate=new c(l),this.coordinate.type=a,u&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},t.prototype.adjust=function(t,e){return this.coordinate.update({start:t,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},t.prototype.rotate=function(t){return this.option.actions.push(["rotate",t]),this},t.prototype.reflect=function(t){return this.option.actions.push(["reflect",t]),this},t.prototype.scale=function(t,e){return this.option.actions.push(["scale",t,e]),this},t.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},t.prototype.getOption=function(){return this.option},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.wrapperOption=function(t){return n.i(r.__assign)({type:"rect",actions:[],cfg:{}},t)},t.prototype.execActions=function(t){var e=this,r=this.option.actions;n.i(i.each)(r,function(r){var o,a=r[0],s=r.slice(1);(!!n.i(i.isNil)(t)||t.includes(a))&&(o=e.coordinate)[a].apply(o,s)})},t}();e.a=a},function(t,e,n){"use strict";function r(t,e){return n.i(a.isBoolean)(t)?!1!==t&&{}:n.i(a.get)(t,[e],t)}function i(t){return n.i(a.get)(t,"position",s.b.BOTTOM)}var o=n(1),a=n(0),s=n(11),u=n(74),l=n(73),c=n(103),h=n(290),f=n(64),p=n(682),d=n(130),v=n(87),g=function(t){function e(e){var n=t.call(this,e)||this;return n.container=n.view.getLayer(s.a.FORE).addGroup(),n}return n.i(o.__extends)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){var t=this;this.option=this.view.getOptions().legends;var e=function(e,n,r){var i=t.createFieldLegend(e,n,r);i&&(i.component.init(),t.components.push(i))};if(n.i(a.get)(this.option,"custom")){var r=this.createCustomLegend(void 0,void 0,void 0,this.option);if(r){r.init();var o=s.a.FORE,u=i(this.option);this.components.push({id:"global-custom",component:r,layer:o,direction:u,type:s.h.LEGEND,extra:void 0})}}else this.loopLegends(e)},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,n.i(a.each)(this.components,function(e){var r=e.component,i=e.direction,o=n.i(p.a)(i),a=t.getCategoryLegendSizeCfg(o),s=r.get("maxWidth"),u=r.get("maxHeight");r.update({maxWidth:Math.min(a.maxWidth,s||0),maxHeight:Math.min(a.maxHeight,u||0)});var l=r.getLayoutBBox(),f=new c.b(l.x,l.y,l.width,l.height),d=n.i(h.a)(t.view.coordinateBBox,f,i),v=d[0],g=d[1],m=n.i(h.a)(t.layoutBBox,f,i),y=m[0],_=m[1],b=0,x=0;i.startsWith("top")||i.startsWith("bottom")?(b=v,x=_):(b=y,x=g),r.update({x:b,y:x}),t.layoutBBox=t.layoutBBox.cut(f,i)})},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={},o=function(o,s,u){var l=t.getId(u.field),c=t.getComponentById(l);if(c){var h=void 0,p=r(t.option,u.field);!1!==p&&(n.i(a.get)(p,"custom")?h=t.getCategoryCfg(o,s,u,p,!0):u.isLinear?h=t.getContinuousCfg(o,s,u,p):u.isCategory&&(h=t.getCategoryCfg(o,s,u,p))),h&&(n.i(f.c)(h,["container"]),c.direction=i(p),c.component.update(h),e[l]=!0)}else{var d=t.createFieldLegend(o,s,u);d&&(d.component.init(),t.components.push(d),e[l]=!0)}};if(n.i(a.get)(this.option,"custom")){var u="global-custom",l=this.getComponentById(u);if(l){var c=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);n.i(f.c)(c,["container"]),l.component.update(c),e[u]=!0}else{var h=this.createCustomLegend(void 0,void 0,void 0,this.option);if(h){h.init();var p=s.a.FORE,d=i(this.option);this.components.push({id:u,component:h,layer:p,direction:d,type:s.h.LEGEND,extra:void 0}),e[u]=!0}}}else this.loopLegends(o);var v=[];n.i(a.each)(this.getComponents(),function(t){e[t.id]?v.push(t):t.component.destroy()}),this.components=v},e.prototype.clear=function(){t.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var e=this,r=t.geometries;return n.i(a.each)(t.views,function(t){r=r.concat(e.getGeometries(t))}),r},e.prototype.loopLegends=function(t){if(this.view.getRootView()===this.view){var e=this.getGeometries(this.view),r={};n.i(a.each)(e,function(e){var i=e.getGroupAttributes();n.i(a.each)(i,function(n){var i=n.getScale(n.type);i&&"identity"!==i.type&&!r[i.field]&&(t(e,n,i),r[i.field]=!0)})})}},e.prototype.createFieldLegend=function(t,e,o){var u,l=r(this.option,o.field),c=s.a.FORE,h=i(l);if(!1!==l&&(n.i(a.get)(l,"custom")?u=this.createCustomLegend(t,e,o,l):o.isLinear?u=this.createContinuousLegend(t,e,o,l):o.isCategory&&(u=this.createCategoryLegend(t,e,o,l))),u)return u.set("field",o.field),{id:this.getId(o.field),component:u,layer:c,direction:h,type:s.h.LEGEND,extra:{scale:o}}},e.prototype.createCustomLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r,!0);return new u.g(i)},e.prototype.createContinuousLegend=function(t,e,n,r){var i=this.getContinuousCfg(t,e,n,r);return new u.h(i)},e.prototype.createCategoryLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r);return new u.g(i)},e.prototype.getContinuousCfg=function(t,e,r,o){var s=r.getTicks(),u=n.i(a.find)(s,function(t){return 0===t.value}),c=n.i(a.find)(s,function(t){return 1===t.value}),h=s.map(function(t){var n=t.value,i=t.tickValue,o=e.mapping(r.invert(n)).join("");return{value:i,attrValue:o,color:o,scaleValue:n}});u||h.push({value:r.min,attrValue:e.mapping(0).join(""),color:e.mapping(0).join(""),scaleValue:0}),c||h.push({value:r.max,attrValue:e.mapping(1).join(""),color:e.mapping(1).join(""),scaleValue:1}),h.sort(function(t,e){return t.value-e.value});var f={min:n.i(a.head)(h).value,max:n.i(a.last)(h).value,colors:[],rail:{type:e.type},track:{}};"size"===e.type&&(f.track={style:{fill:"size"===e.type?this.view.getTheme().defaultColor:void 0}}),"color"===e.type&&(f.colors=h.map(function(t){return t.attrValue}));var v=this.container,g=i(o),m=n.i(p.a)(g),y=n.i(a.get)(o,"title");return y&&(y=n.i(a.deepMix)({text:n.i(d.a)(r)},y)),f.container=v,f.layout=m,f.title=y,f.animateOption=l.d,this.mergeLegendCfg(f,o,"continuous")},e.prototype.getCategoryCfg=function(t,e,r,i,o){var u=this.container,c=n.i(a.get)(i,"position",s.b.BOTTOM),h=n.i(a.get)(this.view.getTheme(),["components","legend",c,"marker"]),f=n.i(a.get)(i,"marker"),v=n.i(p.a)(c),g=o?n.i(p.b)(h,f,i.items):n.i(p.c)(this.view,t,e,h,f),m=n.i(a.get)(i,"title");m&&(m=n.i(a.deepMix)({text:r?n.i(d.a)(r):""},m));var y=this.getCategoryLegendSizeCfg(v);y.container=u,y.layout=v,y.items=g,y.title=m,y.animateOption=l.d;var _=this.mergeLegendCfg(y,i,c);return _.reversed&&_.items.reverse(),_},e.prototype.mergeLegendCfg=function(t,e,r){var i=n.i(a.get)(this.view.getTheme(),["components","legend",r],{});return n.i(a.deepMix)({},i,t,e)},e.prototype.getId=function(t){return this.name+"-"+t},e.prototype.getComponentById=function(t){return n.i(a.find)(this.components,function(e){return e.id===t})},e.prototype.getCategoryLegendSizeCfg=function(t){var e=this.view.viewBBox,n=e.width,r=e.height,i=this.view.coordinateBBox,o=i.width,a=i.height;return"vertical"===t?{maxWidth:n*s.k,maxHeight:a}:{maxWidth:o,maxHeight:r*s.k}},e}(v.a);e.a=g},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(74),s=n(103),u=n(290),l=n(64),c=n(87),h=function(t){function e(e){var n=t.call(this,e)||this;return n.onValueChanged=function(t){var e=t[0],r=t[1];n.updateMinMaxText(e,r),n.view.render(!0)},n.container=n.view.getLayer(o.a.FORE).addGroup(),n}return n.i(r.__extends)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){if(this.option=this.view.getOptions().slider,this.option){this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onValueChanged));var t=this.slider.component.get("start")||0,e=this.slider.component.get("end")||1;this.updateMinMaxText(t,e)}else this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){if(this.slider){var t=this.view.coordinateBBox.width,e=this.slider.component.getLayoutBBox(),r=new s.b(e.x,e.y,Math.min(e.width,t),e.height),i=n.i(u.a)(this.view.viewBBox,r,o.b.BOTTOM),a=(i[0],i[1]),l=n.i(u.a)(this.view.coordinateBBox,r,o.b.BOTTOM),c=l[0];l[1];this.slider.component.update({x:c,y:a,width:t})}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new a.c(n.i(r.__assign)({container:this.container},t));return e.init(),{component:e,layer:o.a.FORE,direction:o.b.BOTTOM,type:o.h.OTHER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();return n.i(l.c)(t,["x","y","width","start","end","minText","maxText"]),this.slider.component.update(t),this.slider},e.prototype.getSliderCfg=function(){if(n.i(i.isObject)(this.option)){var t=n.i(r.__assign)({data:this.getData()},n.i(i.get)(this.option,"trendCfg",{})),e=0,o=0,a=this.view.coordinateBBox.width,s=n.i(i.deepMix)({},{x:e,y:o,width:a},this.option);return n.i(r.__assign)(n.i(r.__assign)({},s),{trendCfg:t})}return{}},e.prototype.getData=function(){var t=this.view.getOptions().data,e=this.view.getYScales()[0];return t.map(function(t){return t[e.field]||0})},e.prototype.updateMinMaxText=function(t,e){var r=this.view.getOptions().data,o=n.i(i.size)(r),a=this.view.getXScale();if(a&&o){var s=a.field,u=r.map(function(t){return t[s]||""}),c=Math.floor(t*(o-1)),h=Math.floor(e*(o-1)),f=n.i(i.get)(u,[c]),p=n.i(i.get)(u,[h]);this.slider.component.update({minText:f,maxText:p,start:t,end:e}),this.view.filter(a.field,function(t,e,r){return n.i(l.a)(r,c,h)})}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e}(c.a);e.a=h},function(t,e,n){"use strict";function r(t){for(var e=[],r=function(r){var i=t[r];n.i(o.find)(e,function(t){return t.color===i.color&&t.name===i.name&&t.value===i.value&&t.title===i.title})||e.push(i)},i=0;i<t.length;i++)r(i);return e}var i=n(1),o=n(0),a=n(74),s=n(42),u=n(36),l=n(292),c=n(87),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLocked=!1,e.isVisible=!0,e}return n.i(i.__extends)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){var t=this.view.getOptions().tooltip;this.isVisible=!1!==t},e.prototype.showTooltip=function(t){if(this.point=t,this.isVisible){var e=this.view,r=this.getTooltipItems(t);if(!r.length)return void this.hideTooltip();var a=this.getTitle(r),s={x:r[0].x,y:r[0].y};e.emit("tooltip:show",n.i(i.__assign)({items:r,title:a},t));var u=this.getTooltipCfg(),l=u.follow,c=u.showMarkers,h=u.showCrosshairs,f=u.showContent,p=u.marker,d=this.items,v=this.title;if(n.i(o.isEqual)(v,a)&&n.i(o.isEqual)(d,r)){if(this.tooltip){var g=l?t:s;this.tooltip.update(g),this.tooltip.show()}this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()}else e.emit("tooltip:change",n.i(i.__assign)({items:r,title:a},t)),f&&(this.tooltip||this.renderTooltip(),this.tooltip.update(n.i(o.mix)({},u,{items:r,title:a},l?t:s)),this.tooltip.show()),c&&this.renderTooltipMarkers(r,p);if(this.items=r,this.title=a,h){var m=n.i(o.get)(u,["crosshairs","follow"],!1);this.renderCrosshairs(m?t:s,u)}}},e.prototype.hideTooltip=function(){var t=this.tooltipMarkersGroup;t&&t.hide();var e=this.xCrosshair,n=this.yCrosshair;e&&e.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",{}),this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,e=t.tooltip,n=t.xCrosshair,r=t.yCrosshair,i=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear()},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,n=e.tooltip,r=e.tooltipMarkersGroup,i=e.xCrosshair,o=e.yCrosshair;t?(n&&n.show(),r&&r.show(),i&&i.show(),o&&o.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),o&&o.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var e=this.findItemsFromView(this.view,t);if(e.length){e=n.i(o.flatten)(e);for(var i=0,a=e;i<a.length;i++)for(var s=a[i],u=0,l=s;u<l.length;u++){var c=l[u],h=c.mappingData,f=h.x,p=h.y;c.x=n.i(o.isArray)(f)?f[f.length-1]:f,c.y=n.i(o.isArray)(p)?p[p.length-1]:p}if(!1===this.getTooltipCfg().shared&&e.length>1){for(var d=e[0],v=Math.abs(t.y-d[0].y),g=0,m=e;g<m.length;g++){var y=m[g],_=Math.abs(t.y-y[0].y);_<=v&&(d=y,v=_)}e=[d]}return r(n.i(o.flatten)(e))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){this.point&&this.showTooltip(this.point)},e.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,r=t.getTheme(),i=n.i(o.get)(r,["components","tooltip"],{}),a=n.i(o.isUndefined)(n.i(o.get)(e,"enterable"))?i.enterable:n.i(o.get)(e,"enterable");return n.i(o.deepMix)({},i,e,{capture:!(!a&&!this.isLocked)})},e.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},r=this.getTooltipCfg(),o=new a.e(n.i(i.__assign)(n.i(i.__assign)({parent:t.get("el").parentNode,region:e},r),{visible:!1,crosshairs:null}));o.init(),this.tooltip=o},e.prototype.renderTooltipMarkers=function(t,e){for(var r=this.getTooltipMarkersGroup(),o=0,a=t;o<a.length;o++){var s=a[o],u=s.x,l=s.y,c=n.i(i.__assign)(n.i(i.__assign)({fill:s.color,symbol:"circle",shadowColor:s.color},e),{x:u,y:l});r.addShape("marker",{attrs:c})}},e.prototype.renderCrosshairs=function(t,e){var r=n.i(o.get)(e,["crosshairs","type"],"x");"x"===r?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):"y"===r?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):"xy"===r&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},e.prototype.renderXCrosshairs=function(t,e){var r=this.getViewWithGeometry(this.view).getCoordinate();if(n.i(s.b)(r,t)){var i,l;if(r.isRect)r.isTransposed?(i={x:r.start.x,y:t.y},l={x:r.end.x,y:t.y}):(i={x:t.x,y:r.end.y},l={x:t.x,y:r.start.y});else{var c=n.i(s.e)(r,t),h=r.getCenter(),f=r.getRadius();l=n.i(u.b)(h.x,h.y,f,c),i=h}var p=n.i(o.deepMix)({start:i,end:l,container:this.getTooltipCrosshairsGroup()},n.i(o.get)(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete p.type;var d=this.xCrosshair;d?d.update(p):(d=new a.f.Line(p),d.init()),d.render(),d.show(),this.xCrosshair=d}},e.prototype.renderYCrosshairs=function(t,e){var r=this.getViewWithGeometry(this.view).getCoordinate();if(n.i(s.b)(r,t)){var i,u;if(r.isRect){var l=void 0,c=void 0;r.isTransposed?(l={x:t.x,y:r.end.y},c={x:t.x,y:r.start.y}):(l={x:r.start.x,y:t.y},c={x:r.end.x,y:t.y}),i={start:l,end:c},u="Line"}else i={center:r.getCenter(),radius:n.i(s.a)(r,t),startAngle:r.startAngle,endAngle:r.endAngle},u="Circle";i=n.i(o.deepMix)({container:this.getTooltipCrosshairsGroup()},i,n.i(o.get)(e,"crosshairs",{}),this.getCrosshairsText("y",t,e)),delete i.type;var h=this.yCrosshair;h?r.isRect&&"circle"===h.get("type")||!r.isRect&&"line"===h.get("type")?(h=new a.f[u](i),h.init()):h.update(i):(h=new a.f[u](i),h.init()),h.render(),h.show(),this.yCrosshair=h}},e.prototype.getCrosshairsText=function(t,e,r){var i=n.i(o.get)(r,["crosshairs","text"]),a=n.i(o.get)(r,["crosshairs","follow"]),s=this.items;if(i){var u=this.getViewWithGeometry(this.view),l=s[0],c=u.getXScale(),h=u.getYScales()[0],f=void 0,p=void 0;if(a){var d=this.view.getCoordinate().invert(e);f=c.invert(d.x),p=h.invert(d.y)}else f=l.data[c.field],p=l.data[h.field];var v="x"===t?f:p;return n.i(o.isFunction)(i)?i=i(t,v,s,e):i.content=v,{text:i}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.getTooltipItemsByHitShape=function(t,e,r){var i=[],o=t.container,a=o.getShape(e.x,e.y);if(a&&a.get("visible")&&a.get("origin")){var s=a.get("origin").mappingData,u=n.i(l.b)(s,t,r);u.length&&i.push(u)}return i},e.prototype.getTooltipItemsByFindData=function(t,e,r){var i=[],o=t.dataArray;t.sort(o);for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.i(l.a)(e,u,t);if(c){var h=t.getElementId(c),f=t.elementsMap[h];if("heatmap"===t.type||f.visible){var p=n.i(l.b)(c,t,r);p.length&&i.push(p)}}}return i},e.prototype.findItemsFromView=function(t,e){if(!1===t.getOptions().tooltip)return[];for(var n=[],r=t.geometries,i=this.getTooltipCfg(),o=i.shared,a=i.title,s=0,u=r;s<u.length;s++){var l=u[s];if(l.visible&&!1!==l.tooltipOption){var c=l.type,h=void 0;h=["point","edge","polygon"].includes(c)?this.getTooltipItemsByHitShape(l,e,a):["area","line","path","heatmap"].includes(c)?this.getTooltipItemsByFindData(l,e,a):!1!==o?this.getTooltipItemsByFindData(l,e,a):this.getTooltipItemsByHitShape(l,e,a),h.length&&n.push(h)}}for(var f=0,p=t.views;f<p.length;f++){var d=p[f];n=n.concat(this.findItemsFromView(d,e))}return n},e.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:n.i(o.find)(t.views,function(t){return e.getViewWithGeometry(t)})},e}(c.a);e.a=h},function(t,e,n){"use strict";function r(t){var e=t.padding;if(!n.i(s.b)(e))return n.i(s.a)(e);var r=t.viewBBox,l=new u.a;return n.i(i.each)(t.getComponents(),function(t){var e=t.component,n=t.type;if(n!==o.h.GRID&&n!==o.h.TOOLTIP){var i=e.getLayoutBBox(),s=new a.b(i.x,i.y,i.width,i.height);if(n===o.h.AXIS){var u=s.exceed(r);l.shrink(u)}else{var c=t.direction;l.inc(s,c)}}}),l.getPadding()}e.a=r;var i=n(0),o=n(11),a=n(103),s=n(193),u=n(594)},function(t,e,n){"use strict";function r(t){var e=t.getController("axis"),r=t.getController("legend"),o=t.getController("annotation"),a=t.getController("slider"),s=n.i(i.a)(t),u=t.viewBBox.shrink(s);if(t.coordinateBBox.isEqual(u))return void(o&&o.layout());t.coordinateBBox=u,t.adjustCoordinate(),[e,a,r,o].forEach(function(t){t&&t.layout()})}e.a=r;var i=n(592)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(11),i=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=t,this.right=e,this.bottom=n,this.left=r}return t.prototype.shrink=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return this.top+=e,this.right+=n,this.bottom+=r,this.left+=i,this},t.prototype.inc=function(t,e){var n=t.width,i=t.height;switch(e){case r.b.TOP:case r.b.TOP_LEFT:case r.b.TOP_RIGHT:this.top+=i;break;case r.b.RIGHT:case r.b.RIGHT_TOP:case r.b.RIGHT_BOTTOM:this.right+=n;break;case r.b.BOTTOM:case r.b.BOTTOM_LEFT:case r.b.BOTTOM_RIGHT:this.bottom+=i;break;case r.b.LEFT:case r.b.LEFT_TOP:case r.b.LEFT_BOTTOM:this.left+=n}return this},t.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(130),o=function(){function t(){this.scales=new Map,this.syncScales=new Map}return t.prototype.createScale=function(t,e,o,a){var s=o,u=this.getScaleMeta(a);if(0===e.length&&u){var l=u.scale,c={type:l.type};l.isCategory&&(c.values=l.values),s=n.i(r.deepMix)(c,u.scaleDef,o)}var h=n.i(i.b)(t,e,s);return this.cacheScale(h,o,a),h},t.prototype.sync=function(){var t=this;this.syncScales.forEach(function(e,i){var o=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=[];n.i(r.each)(e,function(e){var i=t.getScale(e);a=n.i(r.isNumber)(i.max)?Math.max(a,i.max):a,o=n.i(r.isNumber)(i.min)?Math.min(o,i.min):o,n.i(r.each)(i.values,function(t){s.includes(t)||s.push(t)})}),n.i(r.each)(e,function(e){var n=t.getScale(e);n.isContinuous?n.change({min:o,max:a,values:s}):n.isCategory&&n.change({values:s})})})},t.prototype.cacheScale=function(t,e,r){var o=this.getScaleMeta(r);o&&o.scale.type===t.type?(n.i(i.c)(o.scale,t),o.scaleDef=e):(o={key:r,scale:t,scaleDef:e},this.scales.set(r,o));var a=this.getSyncKey(o);if(o.syncKey=a,this.removeFromSyncScales(r),a){var s=this.syncScales.get(a);s||(s=[],this.syncScales.set(a,s)),s.push(r)}},t.prototype.getScale=function(t){var e=this.getScaleMeta(t);if(!e){var i=n.i(r.last)(t.split("-")),o=this.syncScales.get(i);o&&o.length&&(e=this.getScaleMeta(o[0]))}return e&&e.scale},t.prototype.deleteScale=function(t){var e=this.getScaleMeta(t);if(e){var n=e.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}this.scales.delete(t)},t.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},t.prototype.removeFromSyncScales=function(t){var e=this;this.syncScales.forEach(function(n,r){var i=n.indexOf(t);if(-1!==i)return n.splice(i,1),0===n.length&&e.syncScales.delete(r),!1})},t.prototype.getSyncKey=function(t){var e=t.scale,i=t.scaleDef,o=e.field,a=n.i(r.get)(i,["sync"]);return!0===a?o:!1===a?void 0:a},t.prototype.getScaleMeta=function(t){return this.scales.get(t)},t}()},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(73),a=n(178),s=n(36),u=n(194),l=function(){function t(t){this.shapesMap={},this.lastShapesMap={};var e=t.layout,n=t.container;this.layout=e,this.container=n}return t.prototype.render=function(t,e,a){var u=this;void 0===a&&(a=!1),this.shapesMap={};for(var l=this.container,c=this.createOffscreenGroup(),h=0,f=t;h<f.length;h++){var p=f[h];p&&this.renderLabel(p,c)}this.doLayout(t,e),this.renderLabelLine(t),this.adjustLabel(t);var d=this.lastShapesMap,v=this.shapesMap;n.i(i.each)(v,function(t,e){if(t.destroyed)delete v[e];else{if(d[e]){var c=t.get("data"),h=t.get("origin"),f=t.get("coordinate"),p=d[e],g=t.get("animateCfg");p.set("data",c),p.set("origin",h),p.set("animateCfg",g),p.set("coordinate",f);var m=n.i(i.get)(g,"update"),y=p.getChildren();t.getChildren().map(function(t,e){var r=y[e];r.set("data",c),r.set("origin",h),r.set("animateCfg",g),r.set("coordinate",f);var i=n.i(s.d)(r,t);m?n.i(o.c)(r,m,{toAttrs:i,coordinate:f}):r.attr(i)}),u.shapesMap[e]=p}else{l.add(t);var _=n.i(i.get)(t.get("animateCfg"),a?"enter":"appear");_&&n.i(o.c)(t,_,{toAttrs:n.i(r.__assign)({},t.attr()),coordinate:t.get("coordinate")})}delete d[e]}}),n.i(i.each)(d,function(t){var e=n.i(i.get)(t.get("animateCfg"),"leave");e?n.i(o.c)(t,e,{toAttrs:null,coordinate:t.get("coordinate")}):t.remove(!0)}),this.lastShapesMap=v,c.destroy()},t.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},t.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},t.prototype.renderLabel=function(t,e){var o,a=t.id,s=t.data,l=t.mappingData,c=t.coordinate,h=t.animate,f=t.content,p={id:a,data:s,origin:l,coordinate:c},d=e.addGroup(n.i(r.__assign)({name:"label",animateCfg:!1!==this.animate&&null!==h&&!1!==h&&n.i(i.deepMix)({},this.animate,h)},p));if(f.isGroup&&f.isGroup()||f.isShape&&f.isShape()){var v=f.getCanvasBBox(),g=v.width,m=v.height,y=n.i(i.get)(t,"textAlign","left"),_=t.x,b=t.y-m/2;"center"===y?_-=g/2:"right"!==y&&"end"!==y||(_-=g),n.i(u.a)(f,_,b),o=f,d.add(f)}else o=d.addShape("text",n.i(r.__assign)({attrs:n.i(r.__assign)({x:t.x,y:t.y,textAlign:t.textAlign,textBaseline:n.i(i.get)(t,"textBaseline","middle"),text:t.content},t.style)},p));t.rotate&&n.i(u.b)(o,t.rotate),this.shapesMap[a]=d},t.prototype.doLayout=function(t,e){var r=this;if(this.layout){var o=n.i(i.isArray)(this.layout)?this.layout:[this.layout];n.i(i.each)(o,function(o){var s=n.i(a.d)(n.i(i.get)(o,"type",""));if(s){var u=[],l=[];n.i(i.each)(r.shapesMap,function(t,n){u.push(t),l.push(e[n])}),s(t,u,l,r.region,o.cfg)}})}},t.prototype.renderLabelLine=function(t){var e=this;n.i(i.each)(t,function(t){if(t&&t.labelLine){var o=n.i(i.get)(t,"labelLine",{}),a=t.id,s=o.path;if(!s){var u=t.start;s=[["M",u.x,u.y],["L",t.x,t.y]]}var l=e.shapesMap[a];l.destroyed||l.addShape("path",{capture:!1,attrs:n.i(r.__assign)({path:s,stroke:t.color?t.color:n.i(i.get)(t,["style","fill"],"#000"),fill:null},o.style),id:a,origin:t.mappingData,data:t.data,coordinate:t.coordinate})}})},t.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},t.prototype.adjustLabel=function(t){var e=this;n.i(i.each)(t,function(t){if(t){var n=t.id,r=e.shapesMap[n];if(!r.destroyed){var i=r.find(function(t){return"text"===t.get("type")});i&&(t.offsetX&&i.attr("x",i.attr("x")+t.offsetX),t.offsetY&&i.attr("y",i.attr("y")+t.offsetY))}}})},t}();e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(88),s=n(75),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){return n.i(i.deepMix)({},t.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.getRegion=function(t,e){var r=.5,i={x:.5,y:.5},o=2*Math.PI/t,s=-1*Math.PI/2+o*e,u=r/(1+1/Math.sin(o/2)),l=n.i(a.b)(i,r-u,s),c=5*Math.PI/4,h=1*Math.PI/4;return{start:n.i(a.b)(l,u,c),end:n.i(a.b)(l,u,h)}},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,r=this.cfg,o=r.fields,a=r.type,s=o[0];if(!s)throw new Error("No `fields` specified!");var u=this.getFieldValues(t,s),l=u.length,c=[];return u.forEach(function(r,o){var h=[{field:s,value:r,values:u}],f=n.i(i.filter)(t,e.getFacetDataFilter(h)),p={type:a,data:f,region:e.getRegion(l,o),columnValue:r,columnField:s,columnIndex:o,columnValuesLength:l,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};c.push(p)}),c},e.prototype.getXAxisOption=function(t,e,n,r){return n},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;n.i(i.each)(this.facets,function(e){var r=e.columnValue,s=e.view,u=n.i(i.deepMix)({position:["50%","0%"],content:r},n.i(a.a)(o.b.TOP),t.cfg.title);s.annotation().text(u)})},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(88),s=n(75),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){return n.i(i.deepMix)({},t.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,r=this.cfg.fields,o=this.cfg.cols,a=r[0];if(!a)throw new Error("No `fields` specified!");var s=this.getFieldValues(t,a),u=s.length;o=o||u;var l=this.getPageCount(u,o),c=[];return s.forEach(function(r,h){var f=e.getRowCol(h,o),p=f.row,d=f.col,v=[{field:a,value:r,values:s}],g=n.i(i.filter)(t,e.getFacetDataFilter(v)),m={type:e.cfg.type,data:g,region:e.getRegion(l,o,d,p),columnValue:r,rowValue:r,columnField:a,rowField:null,columnIndex:d,rowIndex:p,columnValuesLength:o,rowValuesLength:l,total:u};c.push(m)}),c},e.prototype.getXAxisOption=function(t,e,i,o){return o.rowIndex!==o.rowValuesLength-1&&o.columnValuesLength*o.rowIndex+o.columnIndex+1+o.columnValuesLength<=o.total?n.i(r.__assign)(n.i(r.__assign)({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,e,i,o){return 0!==o.columnIndex?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null,label:null}):i},e.prototype.renderTitle=function(){var t=this;n.i(i.each)(this.facets,function(e){var r=e.columnValue,s=e.view,u=n.i(i.deepMix)({position:["50%","0%"],content:r},n.i(a.a)(o.b.TOP),t.cfg.title);s.annotation().text(u)})},e.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},e.prototype.getRowCol=function(t,e){return{row:Math.floor(t/e),col:t%e}},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(88),s=n(75),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){return n.i(i.deepMix)({},t.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:n.i(r.__assign)({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:n.i(r.__assign)({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){for(var e=this.cfg,n=e.fields,r=e.type,i=n.length,o=i,a=[],s=0;s<o;s++)for(var u=n[s],l=0;l<i;l++){var c=n[l],h={type:r,data:t,region:this.getRegion(i,o,s,l),columnValue:u,rowValue:c,columnField:u,rowField:c,columnIndex:s,rowIndex:l,columnValuesLength:o,rowValuesLength:i};a.push(h)}return a},e.prototype.getXAxisOption=function(t,e,i,o){return o.rowIndex!==o.rowValuesLength-1?n.i(r.__assign)(n.i(r.__assign)({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,e,i,o){return 0!==o.columnIndex?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null,label:null}):i},e.prototype.renderTitle=function(){var t=this;n.i(i.each)(this.facets,function(e,r){var s=e.columnIndex,u=e.rowIndex,l=e.columnValuesLength,c=(e.rowValuesLength,e.columnValue),h=e.rowValue,f=e.view;if(0===u){var p=n.i(i.deepMix)({position:["50%","0%"],content:c},n.i(a.a)(o.b.TOP),t.cfg.columnTitle);f.annotation().text(p)}if(s===l-1){var p=n.i(i.deepMix)({position:["100%","50%"],content:h},n.i(a.a)(o.b.RIGHT),t.cfg.rowTitle);f.annotation().text(p)}})},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(88),s=n(75),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getDefaultCfg=function(){return n.i(i.deepMix)({},t.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this),transpose:!1})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!=0&&t.coordinate().reflect("y")},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.generateFacets=function(t){var e,r,o=this,a=this.cfg.fields[0],s=[],u=1,l=1,c=[""],h=[""];return this.cfg.transpose?(e=a,c=this.getFieldValues(t,e).slice(0,2),u=c.length):(r=a,h=this.getFieldValues(t,r).slice(0,2),l=h.length),c.forEach(function(a,f){h.forEach(function(p,d){var v=[{field:e,value:a,values:c},{field:r,value:p,values:h}],g=n.i(i.filter)(t,o.getFacetDataFilter(v)),m={type:o.cfg.type,data:g,region:o.getRegion(l,u,f,d),columnValue:a,rowValue:p,columnField:e,rowField:r,columnIndex:f,rowIndex:d,columnValuesLength:u,rowValuesLength:l};s.push(m)})}),s},e.prototype.getXAxisOption=function(t,e,i,o){return 1===o.columnIndex||1===o.rowIndex?n.i(r.__assign)(n.i(r.__assign)({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;n.i(i.each)(this.facets,function(e,r){var s=e.columnValue,u=e.rowValue,l=e.view;if(t.cfg.transpose){var c=n.i(i.deepMix)({position:["50%","0%"],content:s},n.i(a.a)(o.b.TOP),t.cfg.title);l.annotation().text(c)}else{var c=n.i(i.deepMix)({position:["100%","50%"],content:u},n.i(a.a)(o.b.RIGHT),t.cfg.title);l.annotation().text(c)}})},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(88),s=n(75),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.getDefaultCfg=function(){return n.i(i.deepMix)({},t.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:n.i(r.__assign)({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:n.i(r.__assign)({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.generateFacets=function(t){var e=this,r=this.cfg.fields,o=r[0],a=r[1],s=[],u=1,l=1,c=[""],h=[""];return o&&(c=this.getFieldValues(t,o),u=c.length),a&&(h=this.getFieldValues(t,a),l=h.length),c.forEach(function(r,f){h.forEach(function(p,d){var v=[{field:o,value:r,values:c},{field:a,value:p,values:h}],g=n.i(i.filter)(t,e.getFacetDataFilter(v)),m={type:e.cfg.type,data:g,region:e.getRegion(l,u,f,d),columnValue:r,rowValue:p,columnField:o,rowField:a,columnIndex:f,rowIndex:d,columnValuesLength:u,rowValuesLength:l};s.push(m)})}),s},e.prototype.renderTitle=function(){var t=this;n.i(i.each)(this.facets,function(e,r){var s=e.columnIndex,u=e.rowIndex,l=e.columnValuesLength,c=(e.rowValuesLength,e.columnValue),h=e.rowValue,f=e.view;if(0===u){var p=n.i(i.deepMix)({position:["50%","0%"],content:c},n.i(a.a)(o.b.TOP),t.cfg.columnTitle);f.annotation().text(p)}if(s===l-1){var p=n.i(i.deepMix)({position:["100%","50%"],content:h},n.i(a.a)(o.b.RIGHT),t.cfg.rowTitle);f.annotation().text(p)}})},e.prototype.getXAxisOption=function(t,e,i,o){return o.rowIndex!==o.rowValuesLength-1?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null,label:null}):o.columnIndex!==Math.floor((o.columnValuesLength-1)/2)?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null}):i},e.prototype.getYAxisOption=function(t,e,i,o){return 0!==o.columnIndex?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null,label:null}):o.rowIndex!==Math.floor((o.rowValuesLength-1)/2)?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null}):i},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(11),a=n(88),s=n(75),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return n.i(r.__extends)(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.init=function(){t.prototype.init.call(this),this.view.on(o.c.AFTER_RENDER,this.afterChartRender)},e.prototype.getDefaultCfg=function(){return n.i(i.deepMix)({},t.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.generateFacets=function(t){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var e=[],n={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return e.push(n),n.children=this.getChildFacets(t,1,e),this.setRegion(e),e},e.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach(function(t){t.region=e.getRegion(t.rowValuesLength,t.columnValuesLength,t.columnIndex,t.rowIndex)})},e.prototype.getRegion=function(t,e,n,r){var i=1/e,o=1/t,a={x:i*n,y:o*r};return{start:a,end:{x:a.x+i,y:a.y+2*o/3}}},e.prototype.forceColIndex=function(t){var e=this,n=[],r=0;t.forEach(function(t){e.isLeaf(t)&&(n.push(t),t.columnIndex=r,r++)}),n.forEach(function(t){t.columnValuesLength=n.length});for(var i=this.cfg.fields.length,o=i-1;o>=0;o--)for(var a=this.getFacetsByLevel(t,o),s=0,u=a;s<u.length;s++){var l=u[s];this.isLeaf(l)||(l.originColIndex=l.columnIndex,l.columnIndex=this.getRegionIndex(l.children),l.columnValuesLength=n.length)}},e.prototype.getFacetsByLevel=function(t,e){var n=[];return t.forEach(function(t){t.rowIndex===e&&n.push(t)}),n},e.prototype.getRegionIndex=function(t){var e=t[0];return(t[t.length-1].columnIndex-e.columnIndex)/2+e.columnIndex},e.prototype.isLeaf=function(t){return!t.children||!t.children.length},e.prototype.getRows=function(){return this.cfg.fields.length+1},e.prototype.getChildFacets=function(t,e,n){var r=this,i=this.cfg.fields;if(!(i.length<e)){var o=[],a=i[e-1],s=this.getFieldValues(t,a);return s.forEach(function(i,u){var l=[{field:a,value:i,values:s}],c=t.filter(r.getFacetDataFilter(l));if(c.length){var h={type:r.cfg.type,data:c,region:null,columnValue:i,rowValue:"",columnField:a,rowField:"",columnIndex:u,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:e,children:r.getChildFacets(c,e+1,n)};o.push(h),n.push(h)}}),o}},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.renderTitle=function(){var t=this;n.i(i.each)(this.facets,function(e){var r=e.columnValue,s=e.view,u=n.i(i.deepMix)({position:["50%","0%"],content:r},n.i(a.a)(o.b.TOP),t.cfg.title);s.annotation().text(u)})},e.prototype.drawLines=function(t){var e=this;t.forEach(function(t){if(!e.isLeaf(t)){var n=t.children;e.addFacetLines(t,n)}})},e.prototype.addFacetLines=function(t,e){var n=this,r=t.view,i=r.coordinateBBox,o={x:i.x+i.width/2,y:i.y+i.height};e.forEach(function(t){var e=t.view.coordinateBBox,r={x:e.bl.x+(e.tr.x-e.bl.x)/2,y:e.tr.y},i={x:o.x,y:o.y+(r.y-o.y)/2},a={x:r.x,y:i.y};n.drawLine([o,i,a,r])})},e.prototype.getPath=function(t){var e=[];return this.cfg.line.smooth?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])}),e},e.prototype.drawLine=function(t){var e=this.getPath(t),r=this.cfg.line.style;this.container.addShape("path",{attrs:n.i(i.assign)({path:e},r)})},e.prototype.getXAxisOption=function(t,e,i,o){return o.rowIndex!==o.rowValuesLength-1?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null,label:null}):i},e.prototype.getYAxisOption=function(t,e,i,o){return 0!==o.originColIndex&&0!==o.columnIndex?n.i(r.__assign)(n.i(r.__assign)({},i),{title:null,label:null}):i},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(11),o=n(179),a=(n(617),function(t){function e(e){var n=t.call(this,e)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=e.startOnZero,i=void 0===r||r,o=e.sortable,a=void 0===o||o;return n.startOnZero=i,n.sortable=a,n}return n.i(r.__extends)(e,t),e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,o=t.length;r<o;r++){var a=t[r];e.push(a.points),n.push(a[i.f])}return{points:e,data:n}},e.prototype.getYMinValue=function(){return this.startOnZero?t.prototype.getYMinValue.call(this):this.getYScale().min},e}(o.a));e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(63),o=(n(622),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return n.i(r.__extends)(e,t),e}(i.a));e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(161),o=n(0),a=n(11),s=n(63),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return n.i(r.__extends)(e,t),e.prototype.createElements=function(t,e,r){void 0===r&&(r=!1);var i=this.prepareRange(t),a=this.prepareSize(),s=n.i(o.get)(this.styleOption,["style","shadowBlur"]);return n.i(o.isNumber)(s)||(s=a/2),this.prepareGreyScaleBlurredCircle(a,s),this.drawWithRange(t,i,a,s),null},e.prototype.clear=function(){t.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},e.prototype.prepareRange=function(t){var e=this.getAttribute("color"),n=e.getFields()[0],r=1/0,i=-1/0;return t.forEach(function(t){var e=t[a.f][n];e>i&&(i=e),e<r&&(r=e)}),r===i&&(r=i-1),[r,i]},e.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return n.i(o.isNumber)(t)||(t=this.getDefaultSize()),t},e.prototype.prepareGreyScaleBlurredCircle=function(t,e){var n=this.getGrayScaleBlurredCanvas(),r=t+e,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,t,0,2*Math.PI,!0),i.closePath(),i.fill()},e.prototype.drawWithRange=function(t,e,n,r){var i=this.coordinate,o=i.start,s=i.end,u=this.coordinate.getWidth(),l=this.coordinate.getHeight(),c=this.getAttribute("color"),h=c.getFields()[0];this.clearShadowCanvasCtx();var f=this.getShadowCanvasCtx();e&&(t=t.filter(function(t){return t[a.f][h]<=e[1]&&t[a.f][h]>=e[0]}));for(var p=this.scales[h],d=0,v=t;d<v.length;d++){var g=v[d],m=this.getDrawCfg(g),y=m.x,_=m.y,b=p.scale(g[a.f][h]);this.drawGrayScaleBlurredCircle(y-o.x,_-s.y,n+r,b,f)}var x=f.getImageData(0,0,u,l);this.clearShadowCanvasCtx(),this.colorize(x),f.putImageData(x,0,0);var w=this.getImageShape();w.attr("x",o.x),w.attr("y",s.y),w.attr("width",u),w.attr("height",l),w.attr("img",f.canvas),w.set("origin",this.getShapeInfo(t))},e.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(4*t.scales[0].ticks.length),e.getHeight()/(4*t.scales[1].ticks.length))},e.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},e.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},e.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},e.prototype.drawGrayScaleBlurredCircle=function(t,e,n,r,i){var o=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(o,t-n,e-n)},e.prototype.colorize=function(t){for(var e=this.getAttribute("color"),r=t.data,a=this.paletteCache,s=3;s<r.length;s+=4){var u=r[s];if(n.i(o.isNumber)(u)){var l=a[u]?a[u]:i.a.rgb2arr(e.gradient(u/256));r[s-3]=l[0],r[s-2]=l[1],r[s-1]=l[2],r[s]=u}}},e.prototype.getImageShape=function(){var t=this.imageShape;return t||(t=this.container.addShape({type:"image",attrs:{}}),this.imageShape=t,t)},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return n.i(r.__assign)(n.i(r.__assign)({},e),{mappingData:t,data:this.getData(t)})},e.prototype.getData=function(t){return t.map(function(t){return t[a.f]})},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(42),a=n(63),s=(n(627),n(281)),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="interval",e.shapeType="interval",e.generatePoints=!0,e}return n.i(r.__extends)(e,t),e.prototype.createShapePointsCfg=function(e){var r,i=t.prototype.createShapePointsCfg.call(this,e),a=this.getAttribute("size");if(a){r=this.getAttributeValues(a,e)[0];var u=this.coordinate;r/=n.i(o.f)(u)}else this.defaultSize||(this.defaultSize=n.i(s.a)(this)),r=this.defaultSize;return i.size=r,i},e.prototype.adjustScale=function(){t.prototype.adjustScale.call(this);var e=this.getYScale();if("theta"===this.coordinate.type)e.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,e.values),e.max)});else{var r=this.scaleDefs,o=e.field,a=e.min,s=e.max;"time"!==e.type&&(a>0&&!n.i(i.get)(r,[o,"min"])&&e.change({min:0}),s<=0&&!n.i(i.get)(r,[o,"max"])&&e.change({max:0}))}},e}(a.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(127),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.setLabelPosition=function(t,e,r,o){var a=this.getCoordinate(),s=a.isTransposed,u=e.points,l=a.convert(u[0]),c=a.convert(u[2]),h=s?-1:1,f=(l.x-c.x)/2*h,p=(l.y-c.y)/2*h;switch(o){case"right":s||(t.x-=f,t.y+=p),t.textAlign=n.i(i.get)(t,"textAlign","left");break;case"left":s?t.x-=2*f:(t.x+=f,t.y+=p),t.textAlign=n.i(i.get)(t,"textAlign","right");break;case"bottom":s?(t.x-=f,t.y-=p):t.y+=2*p,t.textAlign=n.i(i.get)(t,"textAlign","center"),t.textBaseline=n.i(i.get)(t,"textBaseline","top");break;case"middle":s?t.x-=f:t.y+=p,t.textAlign=n.i(i.get)(t,"textAlign","center");break;case"top":s&&(t.x-=f,t.y+=p),t.textAlign=n.i(i.get)(t,"textAlign","center"),t.textBaseline=n.i(i.get)(t,"textBaseline","bottom")}},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t,e,n,r,i,o){var a,s=!0,u=r.start,l=r.end,c=Math.min(u.y,l.y),h=Math.abs(u.y-l.y),f=0,p=Number.MIN_VALUE,d=e.map(function(t){return t.y>f&&(f=t.y),t.y<p&&(p=t.y),{size:n,targets:[t.y-c]}});for(p-=c,f-c>h&&(h=f-c);s;)for(d.forEach(function(t){var e=(Math.min.apply(p,t.targets)+Math.max.apply(p,t.targets))/2;t.pos=Math.min(Math.max(p,e-t.size/2),h-t.size)}),s=!1,a=d.length;a--;)if(a>0){var v=d[a-1],g=d[a];v.pos+v.size>g.pos&&(v.size+=g.size,v.targets=v.targets.concat(g.targets),v.pos+v.size>h&&(v.pos=h-v.size),d.splice(a,1),s=!0)}a=0,d.forEach(function(t){var r=c+n/2;t.targets.forEach(function(){e[a].y=t.pos+r,r+=n,a++})});for(var m={},y=0,_=t;y<_.length;y++){var b=_[y];m[b.get("id")]=b}e.forEach(function(t){var e=t.r*t.r,n=Math.pow(Math.abs(t.y-i.y),2);if(e<n)t.x=i.x;else{var r=Math.sqrt(e-n);t.x=o?i.x+r:i.x-r}var a=m[t.id];a.attr("x",t.x),a.attr("y",t.y)})}function i(t,e,i,u){var l=t[0]?t[0].offset:0,c=e[0].get("coordinate"),h=c.getRadius(),f=c.getCenter();if(l>0){var p=14,d=h+l,v=2*d+2*p,g={start:c.start,end:c.end},m=[[],[]];t.forEach(function(t){t&&("right"===t.textAlign?m[0].push(t):m[1].push(t))}),m.forEach(function(t,n){var i=v/p;t.length>i&&(t.sort(function(t,e){return e["..percent"]-t["..percent"]}),t.splice(i,t.length-i)),t.sort(function(t,e){return t.y-e.y}),r(e,t,p,g,f,n)})}n.i(o.each)(t,function(t){if(t&&t.labelLine){var e=t.offset,r=t.angle,i=n.i(a.b)(f.x,f.y,h,r),u=n.i(a.b)(f.x,f.y,h+e/2,r),l=t.x+n.i(o.get)(t,"offsetX",0),c=t.y+n.i(o.get)(t,"offsetY",0),p={x:l-Math.cos(r)*s,y:c-Math.sin(r)*s};n.i(o.isObject)(t.labelLine)||(t.labelLine={}),t.labelLine.path=["M "+i.x,i.y+" Q"+u.x,u.y+" "+p.x,p.y].join(",")}})}e.a=i;var o=n(0),a=n(36),s=4},function(t,e,n){"use strict";function r(t,e,r,a){n.i(i.each)(e,function(t){var e=a.minX,r=a.minY,i=a.maxX,s=a.maxY,u=t.getCanvasBBox(),l=u.minX,c=u.minY,h=u.maxX,f=u.maxY,p=u.x,d=u.y,v=u.width,g=u.height,m=p,y=d;(l<e||h<e)&&(m=e),(c<r||f<r)&&(y=r),l>i?m=i-v:h>i&&(m-=h-i),c>s?y=s-g:f>s&&(y-=f-s),m===p&&y===d||n.i(o.a)(t,m-p,y-d)})}e.a=r;var i=n(0),o=n(194)},function(t,e,n){"use strict";function r(t,e,r,o){n.i(i.each)(e,function(t,e){var n=t.getCanvasBBox(),i=r[e].getBBox();(n.minX<i.minX||n.minY<i.minY||n.maxX>i.maxX||n.maxY>i.maxY)&&t.remove(!0)})}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=u);var r,i=-1,o=t.attr(),a=o.x,s=o.y,l=t.getCanvasBBox(),c=Math.sqrt(l.width*l.width+l.height*l.height),h=-i,f=0,p=0,d=function(t){var e=.1*t;return[e*Math.cos(e),e*Math.sin(e)]};if(e.hasGap(l))return e.fillGap(l),!0;for(var v=!1,g=0,m={};Math.min(Math.abs(f),Math.abs(p))<c&&g<n;)if(r=d(h+=i),f=~~r[0],p=~~r[1],(f||p)&&!m[f+"-"+p]&&(t.attr({x:a+f,y:s+p}),f+p<0&&t.attr("textAlign","right"),g++,e.hasGap(t.getCanvasBBox()))){e.fillGap(t.getCanvasBBox()),v=!0,m[f+"-"+p]=!0;break}return v}function i(t,e,n,r){var i=t.getCanvasBBox(),o=i.width,a=i.height,s={x:e,y:n,textAlign:"center"};switch(r){case 0:s.y-=a+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=a+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=a+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=a+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=2*a+2;break;case 6:s.y+=2*a+2;break;case 7:s.x+=o+1,s.textAlign="left";break;case 8:s.x-=o+1,s.textAlign="right"}return t.attr(s),t.getCanvasBBox()}function o(t,e,i,o){var a=new l;n.i(s.each)(e,function(t){r(t.find(function(t){return"text"===t.get("type")}),a)||t.remove(!0)}),a.destroy()}function a(t,e,r,o){var a=new l;n.i(s.each)(e,function(t){for(var e=t.find(function(t){return"text"===t.get("type")}),n=e.attr(),r=n.x,o=n.y,s=!1,u=0;u<=8;u++){var l=i(e,r,o,u);if(a.hasGap(l)){a.fillGap(l),s=!0;break}}s||t.remove(!0)}),a.destroy()}e.b=o,e.a=a;var s=n(0),u=100,l=function(){function t(t){void 0===t&&(t={}),this.bitmap={};var e=t.xGap,n=void 0===e?1:e,r=t.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return t.prototype.hasGap=function(t){for(var e=!0,n=this.bitmap,r=Math.round(t.minX),i=Math.round(t.maxX),o=Math.round(t.minY),a=Math.round(t.maxY),s=r;s<=i;s+=1)if(n[s]){if(s===r||s===i){for(var u=o;u<=a;u++)if(n[s][u]){e=!1;break}}else if(n[s][o]||n[s][a]){e=!1;break}}else n[s]={};return e},t.prototype.fillGap=function(t){for(var e=this.bitmap,n=Math.round(t.minX),r=Math.round(t.maxX),i=Math.round(t.minY),o=Math.round(t.maxY),a=n;a<=r;a+=1)e[a]||(e[a]={});for(var a=n;a<=r;a+=this.xGap){for(var s=i;s<=o;s+=this.yGap)e[a][s]=!0;e[a][o]=!0}if(1!==this.yGap)for(var a=i;a<=o;a+=1)e[n][a]=!0,e[r][a]=!0;if(1!==this.xGap)for(var a=n;a<=r;a+=1)e[a][i]=!0,e[a][o]=!0},t.prototype.destroy=function(){this.bitmap={}},t}()},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(42),a=n(36),s=n(276),u=function(t){function e(e){var n=t.call(this,e)||this;return n.defaultLayout="distribute",n}return n.i(r.__extends)(e,t),e.prototype.getDefaultLabelCfg=function(){return n.i(i.get)(this.geometry.theme,"pieLabels",{})},e.prototype.getDefaultOffset=function(t){return t||0},e.prototype.getLabelRotate=function(t,e,n){var r;return e<0&&(r=t,r>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate(),r=n.getCenter();return e=t.angle<=Math.PI/2&&t.x>=r.x?"left":"right",this.getDefaultOffset(t.offset)<=0&&(e="right"===e?"left":"right"),e},e.prototype.getArcPoint=function(t){return t},e.prototype.getPointAngle=function(t){var e,r=this.getCoordinate(),a={x:n.i(i.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},s={x:n.i(i.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},u=n.i(o.e)(r,a);if(t.points&&t.points[0].y===t.points[1].y)e=u;else{var l=n.i(o.e)(r,s);u>=l&&(l+=2*Math.PI),e=u+(l-u)/2}return e},e.prototype.getCirclePoint=function(t,e,i){var o=this.getCoordinate(),s=o.getCenter(),u=o.getRadius()+e;return n.i(r.__assign)(n.i(r.__assign)({},n.i(a.b)(s.x,s.y,u,t)),{angle:t,r:u})},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(179),o=(n(278),function(t){function e(e){var n=t.call(this,e)||this;n.type="line";var r=e.sortable,i=void 0===r||r;return n.sortable=i,n}return n.i(r.__extends)(e,t),e}(i.a));e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(63),o=(n(634),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return n.i(r.__extends)(e,t),e.prototype.getDrawCfg=function(e){var i=t.prototype.getDrawCfg.call(this,e);return n.i(r.__assign)(n.i(r.__assign)({},i),{isStack:!!this.getAdjust("stack")})},e}(i.a));e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(63),a=(n(636),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return n.i(r.__extends)(e,t),e.prototype.createShapePointsCfg=function(e){var r,o=t.prototype.createShapePointsCfg.call(this,e),a=o.x,s=o.y;if(!n.i(i.isArray)(a)||!n.i(i.isArray)(s)){var u=this.getXScale(),l=this.getYScale(),c=u.values.length,h=l.values.length,f=.5/c,p=.5/h;u.isCategory&&l.isCategory?(a=[a-f,a-f,a+f,a+f],s=[s-p,s+p,s+p,s-p]):n.i(i.isArray)(a)?(r=a,a=[r[0],r[0],r[1],r[1]],s=[s-p/2,s+p/2,s+p/2,s-p/2]):n.i(i.isArray)(s)&&(r=s,s=[r[0],r[1],r[1],r[0]],a=[a-f/2,a-f/2,a+f/2,a+f/2]),o.x=a,o.y=s}return o},e}(o.a));e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(42),o=n(63),a=(n(639),n(281)),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return n.i(r.__extends)(e,t),e.prototype.createShapePointsCfg=function(e){var r,o=t.prototype.createShapePointsCfg.call(this,e),s=this.getAttribute("size");if(s){r=this.getAttributeValues(s,e)[0];var u=this.coordinate;r/=n.i(i.f)(u)}else this.defaultSize||(this.defaultSize=n.i(a.a)(this)),r=this.defaultSize;return o.size=r,o},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(128);n.i(i.c)("area",{defaultShapeType:"area",getDefaultPoints:function(t){var e=t.x,i=t.y0;return(n.i(r.isArray)(t.y)?t.y:[i,t.y]).map(function(t){return{x:e,y:t}})}});n.i(i.b)("area","area",{draw:function(t,e){var r=n.i(o.a)(t,!1,!1,this);return e.addShape({type:"path",attrs:r,name:"area"})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:e}}}})},function(t,e,n){"use strict";var r=n(12),i=n(128);n.i(r.b)("area","line",{draw:function(t,e){var r=n.i(i.a)(t,!0,!1,this);return e.addShape({type:"path",attrs:r,name:"area"})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}})},function(t,e,n){"use strict";var r=n(12),i=n(128);n.i(r.b)("area","smooth-line",{draw:function(t,e){var r=this.coordinate,o=n.i(i.a)(t,!0,!0,this,n.i(i.b)(r));return e.addShape({type:"path",attrs:o,name:"area"})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}})},function(t,e,n){"use strict";var r=n(12),i=n(128);n.i(r.b)("area","smooth",{draw:function(t,e){var r=this.coordinate,o=n.i(i.a)(t,!1,!0,this,n.i(i.b)(r));return e.addShape({type:"path",attrs:o,name:"area"})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:e}}}})},function(t,e,n){"use strict";function r(t,e,r){var i=n.i(l.b)(e,r),o=[["M",t.x,t.y]];return o.push(i),o}function i(t,e){var r=n.i(l.b)(t[1],e),i=n.i(l.b)(t[3],e),o=[["M",t[0].x,t[0].y]];return o.push(i),o.push(["L",t[3].x,t[3].y]),o.push(["L",t[2].x,t[2].y]),o.push(r),o.push(["L",t[1].x,t[1].y]),o.push(["L",t[0].x,t[0].y]),o.push(["Z"]),o}var o=n(1),a=n(36),s=n(12),u=n(19),l=n(277);n.i(s.b)("edge","arc",{draw:function(t,e){var s,c=n.i(u.a)(t,!0,!1,"lineWidth"),h=t.points,f=h.length>2?"weight":"normal";if(t.isInCircle){var p={x:0,y:1};return"normal"===f?s=r(h[0],h[1],p):(c.fill=c.stroke,s=i(h,p)),s=this.parsePath(s),e.addShape("path",{attrs:n.i(o.__assign)(n.i(o.__assign)({},c),{path:s})})}if("normal"===f)return h=this.parsePoints(h),s=n.i(a.e)((h[1].x+h[0].x)/2,h[0].y,Math.abs(h[1].x-h[0].x)/2,Math.PI,2*Math.PI),e.addShape("path",{attrs:n.i(o.__assign)(n.i(o.__assign)({},c),{path:s})});var d=n.i(l.a)(h[1],h[3]),v=n.i(l.a)(h[2],h[0]);return s=[["M",h[0].x,h[0].y],["L",h[1].x,h[1].y],d,["L",h[3].x,h[3].y],["L",h[2].x,h[2].y],v,["Z"]],s=this.parsePath(s),c.fill=c.stroke,e.addShape("path",{attrs:n.i(o.__assign)(n.i(o.__assign)({},c),{path:s})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}})},function(t,e,n){"use strict";var r=n(1),i=n(12),o=n(19),a=n(102),s=n(182);n.i(i.c)("edge",{defaultShapeType:"line",getDefaultPoints:function(t){return n.i(s.a)(t)}});n.i(i.b)("edge","line",{draw:function(t,e){var i=n.i(o.a)(t,!0,!1,"lineWidth"),s=n.i(a.a)(this.parsePoints(t.points),this.coordinate.isPolar);return e.addShape("path",{attrs:n.i(r.__assign)(n.i(r.__assign)({},i),{path:s})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}})},function(t,e,n){"use strict";function r(t,e){var r=n.i(s.a)(t,e),i=[["M",t.x,t.y]];return i.push(r),i}var i=n(1),o=n(12),a=n(19),s=n(277);n.i(o.b)("edge","smooth",{draw:function(t,e){var o=n.i(a.a)(t,!0,!1,"lineWidth"),s=t.points,u=this.parsePath(r(s[0],s[1]));return e.addShape("path",{attrs:n.i(i.__assign)(n.i(i.__assign)({},o),{path:u})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}})},function(t,e,n){"use strict";function r(t,e){var r=[];r.push({x:t.x,y:t.y*(1-u)+e.y*u}),r.push({x:e.x,y:t.y*(1-u)+e.y*u}),r.push(e);var i=[["M",t.x,t.y]];return n.i(o.each)(r,function(t){i.push(["L",t.x,t.y])}),i}var i=n(1),o=n(0),a=n(12),s=n(19),u=1/3;n.i(a.b)("edge","vhv",{draw:function(t,e){var o=n.i(s.a)(t,!0,!1,"lineWidth"),a=t.points,u=this.parsePath(r(a[0],a[1]));return e.addShape("path",{attrs:n.i(i.__assign)(n.i(i.__assign)({},o),{path:u})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}})},function(t,e,n){"use strict";var r=n(1),i=n(12),o=n(19),a=n(101);n.i(i.b)("interval","funnel",{getPoints:function(t){return t.size=2*t.size,n.i(a.a)(t)},draw:function(t,e){var i=n.i(o.a)(t,!1,!0),s=this.parsePath(n.i(a.b)(t.points,t.nextPoints,!1));return e.addShape("path",{attrs:n.i(r.__assign)(n.i(r.__assign)({},i),{path:s}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}})},function(t,e,n){"use strict";var r=n(1),i=n(12),o=n(19),a=n(101);n.i(i.b)("interval","hollow-rect",{draw:function(t,e){var i=n.i(o.a)(t,!0,!1),s=this.parsePath(n.i(a.c)(t.points));return e.addShape("path",{attrs:n.i(r.__assign)(n.i(r.__assign)({},i),{path:s}),name:"interval"})},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}})},function(t,e,n){"use strict";var r=n(1),i=n(12),o=n(19),a=n(101);n.i(i.c)("interval",{defaultShapeType:"rect",getDefaultPoints:function(t){return n.i(a.a)(t)}});n.i(i.b)("interval","rect",{draw:function(t,e){var i=n.i(o.a)(t,!1,!0),s=this.parsePath(n.i(a.c)(t.points));return e.addShape("path",{attrs:n.i(r.__assign)(n.i(r.__assign)({},i),{path:s}),name:"interval"})},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}})},function(t,e,n){"use strict";function r(t){var e=t.x,r=t.y,i=t.y0;return n.i(o.isArray)(r)?r.map(function(t,r){return{x:n.i(o.isArray)(e)?e[r]:e,y:t}}):[{x:e,y:i},{x:e,y:r}]}var i=n(1),o=n(0),a=n(12),s=n(19),u=n(101);n.i(a.b)("interval","line",{getPoints:function(t){return r(t)},draw:function(t,e){var r=n.i(s.a)(t,!0,!1,"lineWidth"),o=this.parsePath(n.i(u.c)(t.points));return e.addShape("path",{attrs:n.i(i.__assign)(n.i(i.__assign)({},r),{path:o}),name:"interval"})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]},style:{r:5,stroke:e}}}})},function(t,e,n){"use strict";var r=n(1),i=n(12),o=n(19),a=n(101);n.i(i.b)("interval","pyramid",{getPoints:function(t){return t.size=2*t.size,n.i(a.a)(t,!0)},draw:function(t,e){var i=n.i(o.a)(t,!1,!0),s=this.parsePath(n.i(a.b)(t.points,t.nextPoints,!0));return e.addShape("path",{attrs:n.i(r.__assign)(n.i(r.__assign)({},i),{path:s}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}})},function(t,e,n){"use strict";function r(t){var e,r,i=t.x,o=t.y,s=t.y0,u=t.size;n.i(a.isArray)(o)?(e=o[0],r=o[1]):(e=s,r=o);var l=i+u/2,c=i-u/2;return[{x:i,y:e},{x:i,y:r},{x:c,y:e},{x:l,y:e},{x:c,y:r},{x:l,y:r}]}function i(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y]]}var o=n(1),a=n(0),s=n(12),u=n(19);n.i(s.b)("interval","tick",{getPoints:function(t){return r(t)},draw:function(t,e){var r=n.i(u.a)(t,!0,!1),a=this.parsePath(i(t.points));return e.addShape("path",{attrs:n.i(o.__assign)(n.i(o.__assign)({},r),{path:a}),name:"interval"})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},style:{r:5,stroke:e}}}})},function(t,e,n){"use strict";function r(t,e){var r=[];return n.i(s.each)(t,function(n,i){var o=t[i+1];if(r.push(n),o){var a=f(n,o,e);r=r.concat(a)}}),r}function i(t){return t.map(function(t,e){return 0===e?["M",t.x,t.y]:["L",t.x,t.y]})}function o(t,e){var o=n.i(l.a)(t.points,t.connectNulls),u=[];return n.i(s.each)(o,function(t){var n=r(t,e);u=u.concat(i(n))}),n.i(a.__assign)(n.i(a.__assign)({},n.i(c.a)(t,!0,!1,"lineWidth")),{path:u})}var a=n(1),s=n(0),u=n(12),l=n(181),c=n(19),h=n(279),f=function(t,e,n){var r,i=t.x,o=t.y,a=e.x,s=e.y;switch(n){case"hv":r=[{x:a,y:o}];break;case"vh":r=[{x:i,y:s}];break;case"hvh":var u=(a+i)/2;r=[{x:u,y:o},{x:u,y:s}];break;case"vhv":var l=(o+s)/2;r=[{x:i,y:l},{x:a,y:l}]}return r};n.i(s.each)(["hv","vh","hvh","vhv"],function(t){n.i(u.b)("line",t,{draw:function(e,n){var r=o(e,t);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(e){return n.i(h.a)(e,t)}})})},function(t,e,n){"use strict";var r=n(0),i=n(104),o=n(12),a=n(180);n.i(r.each)(a.c,function(t){n.i(o.b)("point",t,{draw:function(e,r){return n.i(a.b)(this,e,r,t,!0)},getMarker:function(e){var n=e.color;return{symbol:i.a[t],style:{r:4.5,stroke:n,fill:null}}}})})},function(t,e,n){"use strict";var r=n(12),i=n(19);n.i(r.b)("point","image",{draw:function(t,e){var r=n.i(i.a)(t,!1,!1,"r").r,o=this.parsePoints(t.points),a=o[0];if(t.isStack)a=o[1];else if(o.length>1){for(var s=e.addGroup(),u=0,l=o;u<l.length;u++){var c=l[u];s.addShape("image",{attrs:{x:c.x-r/2,y:c.y-r,width:r,height:r,img:t.shape[1]}})}return s}return e.addShape("image",{attrs:{x:a.x-r/2,y:a.y-r,width:r,height:r,img:t.shape[1]}})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}})},function(t,e,n){"use strict";var r=n(0),i=n(104),o=n(12),a=n(182),s=n(180);n.i(o.c)("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(t){return n.i(a.a)(t)}});n.i(r.each)(s.a,function(t){n.i(o.b)("point","hollow-"+t,{draw:function(e,r){return n.i(s.b)(this,e,r,t,!0)},getMarker:function(e){var n=e.color;return{symbol:i.a[t]||t,style:{r:4.5,stroke:n,fill:null}}}})})},function(t,e,n){"use strict";var r=n(0),i=n(104),o=n(12),a=n(180);n.i(r.each)(a.a,function(t){n.i(o.b)("point",t,{draw:function(e,r){return n.i(a.b)(this,e,r,t,!1)},getMarker:function(e){var n=e.color;return{symbol:i.a[t]||t,style:{r:4.5,fill:n}}}})})},function(t,e,n){"use strict";function r(t){for(var e=t[0],r=1,i=[["M",e.x,e.y]];r<t.length;){var a=t[r];a.x===t[r-1].x&&a.y===t[r-1].y||(i.push(["L",a.x,a.y]),a.x===e.x&&a.y===e.y&&r<t.length-1&&(e=t[r+1],i.push(["Z"]),i.push(["M",e.x,e.y]),r++)),r++}return n.i(o.isEqual)(n.i(o.last)(i),e)||i.push(["L",e.x,e.y]),i.push(["Z"]),i}var i=n(1),o=n(0),a=n(12),s=n(19);n.i(a.c)("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(t){var e=[];return n.i(o.each)(t.x,function(n,r){var i=t.y[r];e.push({x:n,y:i})}),e}});n.i(a.b)("polygon","polygon",{draw:function(t,e){if(!n.i(o.isEmpty)(t.points)){var a=n.i(s.a)(t,!0,!0),u=this.parsePath(r(t.points));return e.addShape("path",{attrs:n.i(i.__assign)(n.i(i.__assign)({},a),{path:u}),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}})},function(t,e,n){"use strict";function r(t){var e=n.i(s.isArray)(t)?t:[t],r=e[0],i=e[e.length-1],o=e.length>1?e[1]:r;return{min:r,max:i,min1:o,max1:e.length>3?e[3]:i,median:e.length>2?e[2]:o}}function i(t,e,i){var o,a=i/2;if(n.i(s.isArray)(e)){var u=r(e),l=u.min,c=u.max,h=u.median,f=u.min1,p=u.max1,d=t-a,v=t+a;o=[[d,c],[v,c],[t,c],[t,p],[d,f],[d,p],[v,p],[v,f],[t,f],[t,l],[d,l],[v,l],[d,h],[v,h]]}else{e=n.i(s.isNil)(e)?.5:e;var g=r(t),l=g.min,c=g.max,h=g.median,f=g.min1,p=g.max1,m=e-a,y=e+a;o=[[l,m],[l,y],[l,e],[f,e],[f,m],[f,y],[p,y],[p,m],[p,e],[c,e],[c,m],[c,y],[h,m],[h,y]]}return o.map(function(t){return{x:t[0],y:t[1]}})}function o(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y],["L",t[6].x,t[6].y],["L",t[7].x,t[7].y],["L",t[4].x,t[4].y],["Z"],["M",t[8].x,t[8].y],["L",t[9].x,t[9].y],["M",t[10].x,t[10].y],["L",t[11].x,t[11].y],["M",t[12].x,t[12].y],["L",t[13].x,t[13].y]]}var a=n(1),s=n(0),u=n(12),l=n(19);n.i(u.b)("schema","box",{getPoints:function(t){return i(t.x,t.y,t.size)},draw:function(t,e){var r=n.i(l.a)(t,!0,!1),i=this.parsePath(o(t.points));return e.addShape("path",{attrs:n.i(a.__assign)(n.i(a.__assign)({},r),{path:i,name:"schema"})})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){var r=[e-6,e-3,e,e+3,e+6],o=i(t,r,n);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:e}}}})},function(t,e,n){"use strict";function r(t){var e=n.i(s.isArray)(t)?t:[t],r=e.sort(function(t,e){return e-t});return n.i(u.d)(r,4,r[r.length-1])}function i(t,e,n){var i=r(e);return[{x:t,y:i[0]},{x:t,y:i[1]},{x:t-n/2,y:i[2]},{x:t-n/2,y:i[1]},{x:t+n/2,y:i[1]},{x:t+n/2,y:i[2]},{x:t,y:i[2]},{x:t,y:i[3]}]}function o(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["L",t[4].x,t[4].y],["L",t[5].x,t[5].y],["Z"],["M",t[6].x,t[6].y],["L",t[7].x,t[7].y]]}var a=n(1),s=n(0),u=n(64),l=n(12),c=n(19);n.i(l.b)("schema","candle",{getPoints:function(t){return i(t.x,t.y,t.size)},draw:function(t,e){var r=n.i(c.a)(t,!0,!0),i=this.parsePath(o(t.points));return e.addShape("path",{attrs:n.i(a.__assign)(n.i(a.__assign)({},r),{path:i,name:"schema"})})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){var r=[e+7.5,e+3,e-3,e-7.5],o=i(t,r,n);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}})},function(t,e,n){"use strict";var r=n(12);n.i(r.c)("schema",{defaultShapeType:""})},function(t,e,n){"use strict";function r(t,e,r){if(void 0===r&&(r={}),!e)return[t];var o=n.i(i.groupToMap)(t,e),a=[];if(1===e.length&&r[e[0]])for(var s=r[e[0]],u=0,l=s;u<l.length;u++){var c=l[u],h=o["_"+c];h&&a.push(h)}else for(var f in o)if(o.hasOwnProperty(f)){var p=o[f];a.push(p)}return a}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t){return n.i(i.isArray)(t)?t:t.split("*")}e.a=r;var i=n(0)},function(t,e,n){"use strict";function r(t){return t.isInPlot()}function i(t){return t.gEvent.preventDefault(),t.gEvent.originalEvent.deltaY>0}var o=n(41),a=n(677),s=n(291),u=n(532),l=n(561),c=n(603),h=n(604),f=n(605),p=n(606),d=n(613),v=n(179),g=n(614),m=n(615),y=n(616),_=(n(618),n(620),n(619),n(621),n(623),n(624),n(625),n(626),n(628),n(629),n(630),n(631),n(632),n(633),n(635),n(637),n(638),n(127)),b=n(607),x=n(612),w=n(276),S=n(608),E=n(609),M=n(610),T=n(611),C=n(576),A=n(577),P=n(578),k=n(579),I=n(580),O=n(581),j=n(583),L=n(584),D=n(597),R=n(598),B=n(599),z=n(600),F=n(601),N=n(602),U=n(586),V=n(587),G=n(589),q=n(590),H=n(591),Y=n(643),X=n(650),W=n(282),Z=n(654),K=n(658),J=n(659),Q=n(664),$=n(184),tt=n(656),et=n(657),nt=n(660),rt=n(665),it=n(661),ot=n(662),at=n(666),st=n(645),ut=n(647),lt=n(648),ct=n(649),ht=n(667),ft=n(668),pt=n(284),dt=n(285),vt=n(669),gt=n(651),mt=n(652),yt=n(283),_t=n(653),bt=n(655),xt=n(663),wt=n(670),St=n(671),Et=n(672),Mt=n(673),Tt=n(674);n.d(e,"a",function(){return o.f}),n.d(e,"b",function(){return o.k});var Ct=n(36),At=n(194);n.i(o.a)("dark",n.i(s.a)(a.a)),n.i(o.b)("canvas",u),n.i(o.b)("svg",l),n.i(o.c)("Polygon",m.a),n.i(o.c)("Interval",p.a),n.i(o.c)("Schema",y.a),n.i(o.c)("Path",v.a),n.i(o.c)("Point",g.a),n.i(o.c)("Line",d.a),n.i(o.c)("Area",c.a),n.i(o.c)("Edge",h.a),n.i(o.c)("Heatmap",f.a),n.i(o.d)("base",_.a),n.i(o.d)("interval",b.a),n.i(o.d)("pie",x.a),n.i(o.d)("polar",w.a),n.i(o.e)("overlap",T.a),n.i(o.e)("distribute",S.a),n.i(o.e)("fixed-overlap",T.b),n.i(o.e)("limit-in-shape",M.a),n.i(o.e)("limit-in-canvas",E.a),n.i(o.f)("fade-in",C.a),n.i(o.f)("fade-out",C.b),n.i(o.f)("grow-in-x",A.a),n.i(o.f)("grow-in-xy",A.b),n.i(o.f)("grow-in-y",A.c),n.i(o.f)("scale-in-x",I.a),n.i(o.f)("scale-in-y",I.b),n.i(o.f)("wave-in",j.a),n.i(o.f)("zoom-in",L.a),n.i(o.f)("zoom-out",L.b),n.i(o.f)("position-update",k.a),n.i(o.f)("sector-path-update",O.a),n.i(o.f)("path-in",P.a),n.i(o.g)("rect",F.a),n.i(o.g)("mirror",z.a),n.i(o.g)("list",R.a),n.i(o.g)("matrix",B.a),n.i(o.g)("circle",D.a),n.i(o.g)("tree",N.a),n.i(o.h)("axis",V.a),n.i(o.h)("legend",G.a),n.i(o.h)("tooltip",H.a),n.i(o.h)("annotation",U.a),n.i(o.h)("slider",q.a),n.i(o.i)("tooltip",W.a),n.i(o.i)("sibling-tooltip",X.a),n.i(o.i)("element-active",Z.a),n.i(o.i)("element-single-active",Q.a),n.i(o.i)("element-range-active",J.a),n.i(o.i)("element-highlight",$.a),n.i(o.i)("element-highlight-by-x",et.a),n.i(o.i)("element-highlight-by-color",tt.a),n.i(o.i)("element-single-highlight",rt.a),n.i(o.i)("element-range-highlight",nt.a),n.i(o.i)("element-sibling-highlight",nt.a,{effectSiblings:!0,effectByRecord:!0}),n.i(o.i)("element-selected",ot.a),n.i(o.i)("element-single-selected",at.a),n.i(o.i)("element-range-selected",it.a),n.i(o.i)("element-link-by-color",K.a),n.i(o.i)("active-region",Y.a),n.i(o.i)("list-active",st.a),n.i(o.i)("list-selected",lt.a),n.i(o.i)("list-highlight",ut.a),n.i(o.i)("list-unchecked",ct.a),n.i(o.i)("legend-item-highlight",ut.a,{componentNames:["legend"]}),n.i(o.i)("axis-label-highlight",ut.a,{componentNames:["axis"]}),n.i(o.i)("rect-mask",dt.a),n.i(o.i)("x-rect-mask",ft.a,{dim:"x"}),n.i(o.i)("y-rect-mask",ft.a,{dim:"y"}),n.i(o.i)("circle-mask",ht.a),n.i(o.i)("path-mask",pt.a),n.i(o.i)("smooth-path-mask",vt.a),n.i(o.i)("cursor",gt.a),n.i(o.i)("data-filter",mt.a),n.i(o.i)("brush",yt.a),n.i(o.i)("brush-x",yt.a,{dims:["x"]}),n.i(o.i)("brush-y",yt.a,{dims:["y"]}),n.i(o.i)("sibling-filter",_t.a),n.i(o.i)("sibling-x-filter",_t.a),n.i(o.i)("sibling-y-filter",_t.a),n.i(o.i)("element-filter",bt.a),n.i(o.i)("element-sibling-filter",xt.a),n.i(o.i)("element-sibling-filter-record",xt.a,{byRecord:!0}),n.i(o.i)("view-drag",St.a),n.i(o.i)("view-move",Et.a),n.i(o.i)("scale-translate",Mt.a),n.i(o.i)("scale-zoom",Tt.a),n.i(o.i)("reset-button",wt.a,{name:"reset-button",text:"reset"}),n.i(o.j)("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),n.i(o.j)("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),n.i(o.j)("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),n.i(o.j)("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),n.i(o.j)("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),n.i(o.j)("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),n.i(o.j)("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),n.i(o.j)("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),n.i(o.j)("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),n.i(o.j)("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),n.i(o.j)("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),n.i(o.j)("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:r,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:r,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:r,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),n.i(o.j)("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),n.i(o.j)("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:r,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:r,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:r,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),n.i(o.j)("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:r,action:"path-mask:start"},{trigger:"mousedown",isEnable:r,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),n.i(o.j)("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),n.i(o.j)("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),n.i(o.j)("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),n.i(o.j)("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),n.i(o.j)("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),n.i(o.j)("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),n.i(o.j)("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(t){return i(t.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(t){return!i(t.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),n.i(o.j)("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});At.a,At.b,At.c,At.d,Ct.a,Ct.b},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(36),a=n(25),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.show=function(){var t=this.context.view,e=this.context.event,r=t.getTooltipItems({x:e.x,y:e.y});if(!n.i(i.isEqual)(r,this.items)&&(this.items=r,r.length)){var a=t.getXScale().field,s=r[0].data[a],u=[],l=t.geometries;if(n.i(i.each)(l,function(t){if("interval"===t.type||"schema"===t.type){var e=t.getElementsBy(function(t){return t.getData()[a]===s});u=u.concat(e)}}),u.length){var c=t.getCoordinate(),h=u[0].shape.getCanvasBBox(),f=u[0].shape.getCanvasBBox(),p=h;n.i(i.each)(u,function(t){var e=t.shape.getCanvasBBox();c.isTransposed?(e.minY<h.minY&&(h=e),e.maxY>f.maxY&&(f=e)):(e.minX<h.minX&&(h=e),e.maxX>f.maxX&&(f=e)),p.x=Math.min(e.minX,p.minX),p.y=Math.min(e.minY,p.minY),p.width=Math.max(e.maxX,p.maxX)-p.x,p.height=Math.max(e.maxY,p.maxY)-p.y});var d=t.backgroundGroup,v=t.coordinateBBox,g=void 0;if(c.isRect){var m=t.getXScale(),y=m.isLinear?0:.25,_=void 0,b=void 0,x=void 0,w=void 0;c.isTransposed?(_=v.minX,b=Math.min(f.minY,h.minY)-y*f.height,x=v.width,w=p.height+2*y*f.height):(_=Math.min(h.minX,f.minX)-y*h.width,b=Math.min(v.minY,h.minY),x=p.width+2*y*h.width,w=v.height),g=[["M",_,b],["L",_+x,b],["L",_+x,b+w],["L",_,b+w],["Z"]]}else{var S=n.i(i.head)(u),E=n.i(i.last)(u),M=n.i(o.a)(S.getModel(),c).startAngle,T=n.i(o.a)(E.getModel(),c).endAngle,C=c.getCenter(),A=c.getRadius(),P=c.innerRadius*A;g=n.i(o.c)(C.x,C.y,A,M,T,P)}this.regionPath?(this.regionPath.attr("path",g),this.regionPath.show()):this.regionPath=d.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:g,fill:"#CCD6EC",opacity:.3}})}}},e.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},e.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),t.prototype.destroy.call(this)},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(25),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.execute=function(){this.callback&&this.callback(this.context)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.callback=null},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(129),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.i(r.__extends)(e,t),e.prototype.active=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";function r(t){var e=t.getItems();n.i(i.each)(e,function(e){t.hasState(e,a)&&t.setItemState(e,a,!1),t.hasState(e,o)&&t.setItemState(e,o,!1)})}e.a=r;var i=n(0),o="inactive",a="active"},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(646),a=n(129),s="inactive",u="active",l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=u,e.ignoreItemStates=["unchecked"],e}return n.i(r.__extends)(e,t),e.prototype.setItemsState=function(t,e,n){this.setHighlightBy(t,function(t){return t.name===e},n)},e.prototype.setItemState=function(t,e,n){t.getItems();this.setHighlightBy(t,function(t){return t===e},n)},e.prototype.setHighlightBy=function(t,e,r){var o=t.getItems();if(r)n.i(i.each)(o,function(n){e(n)?(t.hasState(n,s)&&t.setItemState(n,s,!1),t.setItemState(n,u,!0)):t.hasState(n,u)||t.setItemState(n,s,!0)});else{var a=t.getItemsByState(u),l=!0;n.i(i.each)(a,function(t){if(!e(t))return l=!1,!1}),l?this.clear():n.i(i.each)(o,function(n){e(n)&&(t.hasState(n,u)&&t.setItemState(n,u,!1),t.setItemState(n,s,!0))})}},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)n.i(o.a)(t.list);else{var e=this.getAllowComponents();n.i(i.each)(e,function(t){t.clearItemsState(u),t.clearItemsState(s)})}},e}(a.a);e.a=l},function(t,e,n){"use strict";var r=n(1),i=n(129),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.i(r.__extends)(e,t),e.prototype.selected=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(129),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="unchecked",e}return n.i(r.__extends)(e,t),e.prototype.unchecked=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(16),a=n(282),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.showTooltip=function(t,e){var r=n.i(o.f)(t);n.i(i.each)(r,function(r){var i=n.i(o.u)(t,r,e);r.showTooltip(i)})},e.prototype.hideTooltip=function(t){var e=n.i(o.f)(t);n.i(i.each)(e,function(t){t.hideTooltip()})},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(25),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.setCursor=function(t){this.context.view.getCanvas().setCursor(t)},e.prototype.default=function(){this.setCursor("default")},e.prototype.pointer=function(){this.setCursor("pointer")},e.prototype.move=function(){this.setCursor("move")},e.prototype.crosshair=function(){this.setCursor("crosshair")},e.prototype.wait=function(){this.setCursor("wait")},e.prototype.help=function(){this.setCursor("help")},e.prototype.text=function(){this.setCursor("text")},e.prototype.eResize=function(){this.setCursor("e-resize")},e.prototype.wResize=function(){this.setCursor("w-resize")},e.prototype.nResize=function(){this.setCursor("n-resize")},e.prototype.sResize=function(){this.setCursor("s-resize")},e.prototype.neResize=function(){this.setCursor("ne-resize")},e.prototype.nwResize=function(){this.setCursor("nw-resize")},e.prototype.seResize=function(){this.setCursor("se-resize")},e.prototype.swResize=function(){this.setCursor("sw-resize")},e.prototype.nsResize=function(){this.setCursor("ns-resize")},e.prototype.ewResize=function(){this.setCursor("ew-resize")},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(25),a=n(16),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.filterView=function(t,e,r){var o=this;t.getScaleByField(e)&&t.filter(e,r),t.views&&t.views.length&&n.i(i.each)(t.views,function(t){o.filterView(t,e,r)})},e.prototype.filter=function(){var t=n.i(a.j)(this.context);if(t){var e=this.context.view,r=t.component,i=r.get("field");if(n.i(a.k)(t)){if(i){var o=r.getItemsByState("unchecked"),s=n.i(a.l)(e,i),u=o.map(function(t){return t.name});u.length?this.filterView(e,i,function(t){var e=s.getText(t);return!u.includes(e)}):this.filterView(e,i,null),e.render(!0)}}else if(n.i(a.n)(t)){var l=r.getValue(),c=l[0],h=l[1];this.filterView(e,i,function(t){return t>=c&&t<=h}),e.render(!0)}}},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(283),a=n(16),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.filterView=function(t,e,r){var o=n.i(a.f)(t);n.i(i.each)(o,function(t){t.filter(e,r)})},e.prototype.reRender=function(t){var e=n.i(a.f)(t);n.i(i.each)(e,function(t){t.render(!0)})},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(188),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.i(r.__extends)(e,t),e.prototype.active=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(25),a=n(16),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.filter=function(){var t=n.i(a.j)(this.context),e=this.context.view,r=n.i(a.g)(e);if(n.i(a.d)(this.context)){var o=n.i(a.e)(this.context,10);o&&n.i(i.each)(r,function(t){o.includes(t)?t.show():t.hide()})}else if(t){var s=t.component,u=s.get("field");if(n.i(a.k)(t)){if(u){var l=s.getItemsByState("unchecked"),c=n.i(a.l)(e,u),h=l.map(function(t){return t.name});n.i(i.each)(r,function(t){var e=n.i(a.m)(t,u),r=c.getText(e);h.indexOf(r)>=0?t.hide():t.show()})}}else if(n.i(a.n)(t)){var f=s.getValue(),p=f[0],d=f[1];n.i(i.each)(r,function(t){var e=n.i(a.m)(t,u);e>=p&&e<=d?t.show():t.hide()})}}},e.prototype.clear=function(){var t=n.i(a.g)(this.context.view);n.i(i.each)(t,function(t){t.show()})},e.prototype.reset=function(){this.clear()},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(16),o=n(184),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.setStateByElement=function(t,e){var r=this.context.view,o=t.geometry.getAttribute("color");if(o){var a=r.getScaleByField(o.getFields()[0]),s=n.i(i.m)(t,a.field),u=n.i(i.g)(r),l=u.filter(function(t){return n.i(i.m)(t,a.field)===s});this.setHighlightBy(u,function(t){return l.includes(t)},e)}},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(16),o=n(184),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.setStateByElement=function(t,e){var r=this.context.view,o=r.getXScale(),a=n.i(i.m)(t,o.field),s=n.i(i.g)(r),u=s.filter(function(t){return n.i(i.m)(t,o.field)===a});this.setHighlightBy(s,function(t){return u.includes(t)},e)},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(25),o=n(16),a=n(0),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache={},e}return n.i(r.__extends)(e,t),e.prototype.getColorScale=function(t,e){var n=e.geometry.getAttribute("color");return n?t.getScaleByField(n.getFields()[0]):null},e.prototype.getLinkPath=function(t,e){var n=t.shape.getCanvasBBox(),r=e.shape.getCanvasBBox();return[["M",n.maxX,n.minY],["L",r.minX,r.minY],["L",r.minX,r.maxY],["L",n.maxX,n.maxY],["Z"]]},e.prototype.addLinkShape=function(t,e,n){t.addShape({type:"path",attrs:{opacity:.4,fill:e.shape.attr("fill"),path:this.getLinkPath(e,n)}})},e.prototype.linkByElement=function(t){var e=this,r=this.context.view,i=this.getColorScale(r,t);if(i){var s=n.i(o.m)(t,i.field);if(!this.cache[s]){var u=n.i(o.q)(r,i.field,s),l=this.linkGroup,c=l.addGroup();this.cache[s]=c;var h=u.length;n.i(a.each)(u,function(t,n){if(n<h-1){var r=u[n+1];e.addLinkShape(c,t,r)}})}}},e.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(e){var r=n.i(o.m)(t,e.field);this.cache[r]&&(this.cache[r].remove(),this.cache[r]=null)}},e.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var e=n.i(o.p)(t);e&&this.linkByElement(e)},e.prototype.unlink=function(){var t=n.i(o.p)(this.context);t&&this.removeLink(t)},e.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},e}(i.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(185),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.i(r.__extends)(e,t),e.prototype.active=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(183),o=n(185),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.i(r.__extends)(e,t),e.prototype.clearViewState=function(t){n.i(i.a)(t)},e.prototype.highlight=function(){this.setState()},e.prototype.setElementsState=function(t,e,r){n.i(i.b)(r,function(e){return t.indexOf(e)>=0},e)},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(185),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.i(r.__extends)(e,t),e.prototype.selected=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(188),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.i(r.__extends)(e,t),e.prototype.selected=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(25),a=n(16),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.byRecord=!1,e}return n.i(r.__extends)(e,t),e.prototype.filter=function(){n.i(a.d)(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},e.prototype.filterByRecord=function(){var t=this.context.view,e=n.i(a.e)(this.context,10);if(e){var r=t.getXScale().field,o=t.getYScales()[0].field,s=e.map(function(t){return t.getModel().data}),u=n.i(a.f)(t);n.i(i.each)(u,function(t){var e=n.i(a.g)(t);n.i(i.each)(e,function(t){var e=t.getModel().data;n.i(a.h)(s,e,r,o)?t.show():t.hide()})})}},e.prototype.filterByBBox=function(){var t=this,e=this.context.view,r=n.i(a.f)(e);n.i(i.each)(r,function(e){var r=n.i(a.i)(t.context,e,10),o=n.i(a.g)(e);r&&n.i(i.each)(o,function(t){r.includes(t)?t.show():t.hide()})})},e.prototype.reset=function(){var t=n.i(a.f)(this.context.view);n.i(i.each)(t,function(t){var e=n.i(a.g)(t);n.i(i.each)(e,function(t){t.show()})})},e}(o.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(186),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.i(r.__extends)(e,t),e.prototype.active=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(16),o=n(183),a=n(186),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return n.i(r.__extends)(e,t),e.prototype.highlight=function(){this.setState()},e.prototype.setElementState=function(t,e){var r=this.context.view,a=n.i(i.g)(r);n.i(o.b)(a,function(e){return t===e},e)},e.prototype.clear=function(){var t=this.context.view;n.i(o.a)(t)},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(186),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return n.i(r.__extends)(e,t),e.prototype.selected=function(){this.setState()},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(16),a=n(190),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="circle",e}return n.i(r.__extends)(e,t),e.prototype.getMaskAttrs=function(){var t=this.points,e=n.i(i.last)(this.points),r=0,a=0,s=0;if(t.length){var u=t[0];r=n.i(o.c)(u,e)/2,a=(e.x+u.x)/2,s=(e.y+u.y)/2}return{x:a,y:s,r:r}},e}(a.a);e.a=s},function(t,e,n){"use strict";function r(t){t.x=n.i(o.clamp)(t.x,0,1),t.y=n.i(o.clamp)(t.y,0,1)}var i=n(1),o=n(0),a=n(285),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return n.i(i.__extends)(e,t),e.prototype.getRegion=function(){var t=null,e=null,i=this.points,a=this.dim,s=this.context.view.getCoordinate(),u=s.invert(n.i(o.head)(i)),l=s.invert(n.i(o.last)(i));return this.inPlot&&(r(u),r(l)),"x"===a?(t=s.convert({x:u.x,y:0}),e=s.convert({x:l.x,y:1})):(t=s.convert({x:0,y:u.y}),e=s.convert({x:1,y:l.y})),{start:t,end:e}},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(16),o=n(284),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.getMaskPath=function(){var t=this.points;return n.i(i.o)(t,!0)},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(0),a=n(193),s=n(25),u=10,l=5,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return n.i(r.__extends)(e,t),e.prototype.getButtonCfg=function(){return n.i(o.deepMix)(this.buttonCfg,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),i=e.addShape({type:"text",name:"button-text",attrs:n.i(r.__assign)({text:t.text},t.textStyle)}),o=i.getBBox(),s=n.i(a.a)(t.padding),u=e.addShape({type:"rect",name:"button-rect",attrs:n.i(r.__assign)({x:o.x-s[3],y:o.y-s[0],width:o.width+s[1]+s[3],height:o.height+s[0]+s[2]},t.style)});u.toBack(),e.on("mouseenter",function(){u.attr(t.activeStyle)}),e.on("mouseleave",function(){u.attr(t.style)}),this.buttonGroup=e},e.prototype.resetPosition=function(){var t=this.context.view,e=t.getCoordinate(),r=e.convert({x:1,y:1}),o=this.buttonGroup,a=o.getBBox(),s=n.i(i.a)(null,[["t",r.x-a.width-u,r.y+a.height+l]]);o.setMatrix(s)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(s.a);e.a=c},function(t,e,n){"use strict";var r=n(1),i=n(25),o=n(16),a=4,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return n.i(r.__extends)(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},e.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,r=this.context.event;this.dragStart?e.emit("drag",{target:r.target,x:r.x,y:r.y}):n.i(o.c)(t,this.startPoint)>a&&(e.emit("dragstart",{target:r.target,x:r.x,y:r.y}),this.dragStart=!0)}},e.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},e}(i.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(189),a=n(16),s=5,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return n.i(r.__extends)(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},e.prototype.move=function(){if(this.starting){var t=this.startPoint,e=this.context.getCurrentPoint();if(n.i(a.c)(t,e)>s&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var r=this.context.view,o=n.i(i.a)(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);r.backgroundGroup.setMatrix(o),r.foregroundGroup.setMatrix(o),r.middleGroup.setMatrix(o)}}},e.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},e.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},e}(o.b);e.a=u},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(287),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return n.i(r.__extends)(e,t),e.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var e=this.dims;n.i(i.each)(e,function(e){var n=t.getScale(e),r=n.min,i=n.max,o=n.values;t.startCache[e]={min:r,max:i,values:o}})},e.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},e.prototype.translate=function(){var t=this;if(this.starting){var e=this.startPoint,r=this.context.view.getCoordinate(),o=this.context.getCurrentPoint(),a=r.invert(e),s=r.invert(o),u=s.x-a.x,l=s.y-a.y,c=this.context.view,h=this.dims;n.i(i.each)(h,function(e){t.translateDim(e,{x:-1*u,y:-1*l})}),c.render(!0)}},e.prototype.translateDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.translateLinear(t,n,e)}},e.prototype.translateLinear=function(t,e,n){var r=this.context.view,i=this.startCache[t],o=i.min,a=i.max,s=a-o,u=n[t]*s;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:o,max:a}),r.scale(e.field,{nice:!1,min:o+u,max:a+u})},e.prototype.reset=function(){t.prototype.reset.call(this),this.startPoint=null,this.starting=!1},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(287),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zoomRatio=.05,e}return n.i(r.__extends)(e,t),e.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},e.prototype.zoom=function(t){var e=this,r=this.dims;n.i(i.each)(r,function(n){e.zoomDim(n,t)}),this.context.view.render(!0)},e.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},e.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.zoomLinear(t,n,e)}},e.prototype.zoomLinear=function(t,e,n){var r=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var i=this.cacheScaleDefs[t],o=i.max-i.min,a=e.min,s=e.max,u=n*o,l=a-u,c=s+u,h=c-l,f=h/o;c>l&&f<100&&f>.01&&r.scale(e.field,{nice:!1,min:a-u,max:s+u})},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(16),o=function(){function t(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return t.prototype.cache=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length)return this.cacheMap[t[0]];2===t.length&&(this.cacheMap[t[0]]=t[1])},t.prototype.getAction=function(t){return this.actions.find(function(e){return e.name===t})},t.prototype.addAction=function(t){this.actions.push(t)},t.prototype.removeAction=function(t){var e=this.actions,n=this.actions.indexOf(t);n>=0&&e.splice(n,1)},t.prototype.getCurrentPoint=function(){var t=this.event;if(t){if(t.target instanceof HTMLElement){return this.view.getCanvas().getPointByClient(t.clientX,t.clientY)}return{x:t.x,y:t.y}}return null},t.prototype.getCurrentShape=function(){return n.i(r.get)(this.event,["gEvent","shape"])},t.prototype.isInPlot=function(){var t=this.getCurrentPoint();return!!t&&this.view.isPointInPlot(t)},t.prototype.isInShape=function(t){var e=this.getCurrentShape();return!!e&&e.get("name")===t},t.prototype.isInComponent=function(t){var e=n.i(i.a)(this.view),r=this.getCurrentPoint();return!!r&&!!e.find(function(e){var o=e.getBBox();return t?e.get("name")===t&&n.i(i.b)(o,r):n.i(i.b)(o,r)})},t.prototype.destroy=function(){this.view=null,this.event=null,n.i(r.each)(this.actions.slice(),function(t){t.destroy()}),this.actions=null,this.cacheMap=null},t}();e.a=o},function(t,e,n){"use strict";function r(t,e){var r=t.split(":"),i=r[0],o=e.getAction(i)||n.i(s.b)(i,e);if(!o)throw new Error("There is no action named "+i);return{action:o,methodName:r[1]}}function i(t){var e=t.action,n=t.methodName;if(!e[n])throw new Error("Action("+e.name+") doesn't have a method called "+n);e[n]()}var o=n(1),a=n(0),s=n(286),u=n(675),l=n(288),c={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},h=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return n.i(o.__extends)(e,t),e.prototype.init=function(){this.initContext(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},e.prototype.initEvents=function(){var t=this;n.i(a.each)(this.steps,function(e,r){n.i(a.each)(e,function(e){var n=t.getActionCallback(r,e);n&&t.bindEvent(e.trigger,n)})})},e.prototype.clearEvents=function(){var t=this;n.i(a.each)(this.steps,function(e,r){n.i(a.each)(e,function(e){var n=t.getActionCallback(r,e);n&&t.offEvent(e.trigger,n)})})},e.prototype.initContext=function(){var t=this.view,e=new u.a(t);this.context=e;var i=this.steps;n.i(a.each)(i,function(t){n.i(a.each)(t,function(t){if(n.i(a.isFunction)(t.action))t.actionObject={action:n.i(s.c)(t.action,e),methodName:"execute"};else if(n.i(a.isString)(t.action))t.actionObject=r(t.action,e);else if(n.i(a.isArray)(t.action)){var i=t.action;t.actionObject=[],n.i(a.each)(i,function(n){t.actionObject.push(r(n,e))})}})})},e.prototype.isAllowStep=function(t){var e=this.currentStepName,n=this.steps;if(e===t)return!0;if(t===c.SHOW_ENABLE)return!0;if(t===c.PROCESSING)return e===c.START;if(t===c.START)return e!==c.PROCESSING;if(t===c.END)return e===c.PROCESSING||e===c.START;if(t===c.ROLLBACK){if(n[c.END])return e===c.END;if(e===c.START)return!0}return!1},e.prototype.isAllowExcute=function(t,e){if(this.isAllowStep(t)){var n=this.getKey(t,e);return(!e.once||!this.emitCaches[n])&&(!e.isEnable||e.isEnable(this.context))}return!1},e.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},e.prototype.afterExecute=function(t,e){t!==c.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var n=this.getKey(t,e);this.emitCaches[n]=!0},e.prototype.getKey=function(t,e){return t+e.trigger+e.action},e.prototype.getActionCallback=function(t,e){var r=this,o=this.context,s=this.callbackCaches,u=e.actionObject;if(e.action&&u){var l=this.getKey(t,e);if(!s[l]){var c=function(s){o.event=s,r.isAllowExcute(t,e)?(n.i(a.isArray)(u)?n.i(a.each)(u,function(t){o.event=s,i(t)}):(o.event=s,i(u)),r.afterExecute(t,e),e.callback&&(o.event=s,e.callback(o))):o.event=null};e.debounce?s[l]=n.i(a.debounce)(c,e.debounce.wait,e.debounce.immediate):e.throttle?s[l]=n.i(a.throttle)(c,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):s[l]=c}return s[l]}return null},e.prototype.bindEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.addEventListener(n[1],e):"document"===n[0]?document.addEventListener(n[1],e):this.view.on(t,e)},e.prototype.offEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.removeEventListener(n[1],e):"document"===n[0]?document.removeEventListener(n[1],e):this.view.off(t,e)},e}(l.a);e.a=h},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},i={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},o=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],a=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],s={brandColor:o[0],paletteQualitative10:o,paletteQualitative20:a,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:'"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n  "Noto Color Emoji"',axisLineBorderColor:i[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:i[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:i[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:i[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:i[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:i[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:i[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:o[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:i[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:i[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:i[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:r[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:r[25],annotationArcBorderColor:i[15],annotationArcBorder:.5,annotationLineBorderColor:i[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:i[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:r[95],annotationTextBorder:1.5,annotationRegionFillColor:i[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:i[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:i[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:i[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:r[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:i[25],pointFillColor:o[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:r[100],pointBorderOpacity:1,pointActiveBorderColor:i[100],pointSelectedBorder:2,pointSelectedBorderColor:i[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o[0],hollowPointBorderOpacity:.95,hollowPointFillColor:r[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:i[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:i[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o[0],areaFillOpacity:.25,areaActiveFillColor:o[0],areaActiveFillOpacity:.5,areaSelectedFillColor:o[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:i[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:i[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:i[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:i[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:r[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:i[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:i[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},i={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},o=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],a=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],s={brandColor:o[0],paletteQualitative10:o,paletteQualitative20:a,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:'"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n  "Noto Color Emoji"',axisLineBorderColor:r[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:r[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:r[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:r[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:r[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:r[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:r[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:o[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:r[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:r[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:r[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:r[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:r[25],annotationArcBorderColor:r[15],annotationArcBorder:.5,annotationLineBorderColor:r[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:r[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:i[95],annotationTextBorder:1.5,annotationRegionFillColor:r[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:r[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:r[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:r[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:i[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:r[25],pointFillColor:o[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:i[100],pointBorderOpacity:1,pointActiveBorderColor:r[100],pointSelectedBorder:2,pointSelectedBorderColor:r[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o[0],hollowPointBorderOpacity:.95,hollowPointFillColor:i[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:r[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:r[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o[0],areaFillOpacity:.25,areaActiveFillColor:o[0],areaActiveFillOpacity:.5,areaSelectedFillColor:o[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:r[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:r[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:r[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:r[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:i[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:r[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:r[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},function(t,e,n){"use strict";function r(t,e,r){if(!t)return r;var o;if(t.callback&&t.callback.length>1){var a=Array(t.callback.length-1).fill("");o=t.mapping.apply(t,n.i(i.__spreadArrays)([e],a)).join("")}else o=t.mapping(e).join("");return o||r}e.a=r;var i=n(1)},function(t,e,n){"use strict";function r(t){var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width))-parseInt(e.paddingLeft)-parseInt(e.paddingRight),height:(t.clientHeight||parseInt(e.height))-parseInt(e.paddingTop)-parseInt(e.paddingBottom)}}function i(t){return"number"==typeof t&&!isNaN(t)}function o(t,e,n,o){var a=n,u=o;if(e){var l=r(t);a=l.width?l.width:a,u=l.height?l.height:u}return{width:Math.max(i(a)?a:s.i,s.i),height:Math.max(i(u)?u:s.j,s.j)}}function a(t){var e=t.parentNode;e&&e.removeChild(t)}e.b=o,e.c=a;var s=n(11),u=n(97);n.d(e,"a",function(){return u.c}),n.d(e,"d",function(){return u.b})},function(t,e,n){"use strict";function r(t,e){return n.i(s.get)(t,["components","axis",e,"grid"],{})}function i(t,e,n,r){var i=[],o=e.getTicks();return t.isPolar&&o.push({value:1,text:"",tickValue:""}),o.reduce(function(e,o,a){var s=o.value;if(r)i.push({points:[t.convert("y"===n?{x:0,y:s}:{x:s,y:0}),t.convert("y"===n?{x:1,y:s}:{x:s,y:1})]});else if(a){var u=e.value,l=(u+s)/2;i.push({points:[t.convert("y"===n?{x:0,y:l}:{x:l,y:0}),t.convert("y"===n?{x:1,y:l}:{x:l,y:1})]})}return o},o[0]),i}function o(t,e,r,i,o){var a=e.values.length,u=[],l=r.getTicks();return l.reduce(function(e,r){var l=e?e.value:r.value,c=r.value,h=(l+c)/2;return"x"===o?u.push({points:[t.convert({x:i?c:h,y:0}),t.convert({x:i?c:h,y:1})]}):u.push({points:n.i(s.map)(Array(a+1),function(e,n){return t.convert({x:n/a,y:i?c:h})})}),r},l[0]),u}function a(t,e){var r=n.i(s.get)(e,"grid");if(null===r)return!1;var i=n.i(s.get)(t,"grid");return!(void 0===r&&null===i)}e.d=r,e.b=i,e.a=o,e.c=a;var s=n(0)},function(t,e,n){"use strict";function r(t){var e=t.symbol;n.i(s.isString)(e)&&c.a[e]&&(t.symbol=c.a[e])}function i(t){return t.startsWith(u.b.LEFT)||t.startsWith(u.b.RIGHT)?"vertical":"horizontal"}function o(t,e,i,o,a){var u=i.getScale(i.type);if(u.isCategory){var c=u.field,h=e.getAttribute("color"),f=e.getAttribute("shape"),p=t.getTheme().defaultColor,d=e.coordinate.isPolar;return u.getTicks().map(function(i){var v,g=i.text,m=i.value,y=g,_=u.invert(m),b=0===t.filterFieldData(c,[(v={},v[c]=_,v)]).length,x=n.i(l.a)(h,_,p),w=n.i(l.a)(f,_,"point"),S=e.getShapeMarker(w,{color:x,isInPolar:d});return S=n.i(s.deepMix)({},o,S,a),r(S),{id:_,name:y,value:_,marker:S,unchecked:b}})}return[]}function a(t,e,i){return i.map(function(i){var o=n.i(s.deepMix)({},t,e,i.marker);return r(o),i.marker=o,i})}e.a=i,e.c=o,e.b=a;var s=n(0),u=n(11),l=n(679),c=n(104)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new D.ARRAY_TYPE(9);return D.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new D.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,n,r,i,o,a,s,u){var l=new D.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=i,l[5]=o,l[6]=a,l[7]=s,l[8]=u,l}function l(t,e,n,r,i,o,a,s,u,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*a-s*l,f=-c*o+s*u,p=l*o-a*u,d=n*h+r*f+i*p;return d?(d=1/d,t[0]=h*d,t[1]=(-c*r+i*l)*d,t[2]=(s*r-i*a)*d,t[3]=f*d,t[4]=(c*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=p*d,t[7]=(-l*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=i*l-r*c,t[2]=r*s-i*a,t[3]=s*u-o*c,t[4]=n*c-i*u,t[5]=i*o-n*s,t[6]=o*l-a*u,t[7]=r*u-n*l,t[8]=n*a-r*o,t}function d(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-a*u)+n*(-l*i+a*s)+r*(u*i-o*s)}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=n[0],p=n[1],d=n[2],v=n[3],g=n[4],m=n[5],y=n[6],_=n[7],b=n[8];return t[0]=f*r+p*a+d*l,t[1]=f*i+p*s+d*c,t[2]=f*o+p*u+d*h,t[3]=v*r+g*a+m*l,t[4]=v*i+g*s+m*c,t[5]=v*o+g*u+m*h,t[6]=y*r+_*a+b*l,t[7]=y*i+_*s+b*c,t[8]=y*o+_*u+b*h,t}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+p*a+l,t[7]=f*i+p*s+c,t[8]=f*o+p*u+h,t}function m(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=Math.sin(n),p=Math.cos(n);return t[0]=p*r+f*a,t[1]=p*i+f*s,t[2]=p*o+f*u,t[3]=p*a-f*r,t[4]=p*s-f*i,t[5]=p*u-f*o,t[6]=l,t[7]=c,t[8]=h,t}function y(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function b(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,h=r*s,f=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-h-d,t[3]=c-m,t[6]=f+g,t[1]=c+m,t[4]=1-l-d,t[7]=p-v,t[2]=f-g,t[5]=p+v,t[8]=1-l-h,t}function E(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,S=i*l-o*u,E=c*v-h*d,M=c*g-f*d,T=c*m-p*d,C=h*g-f*v,A=h*m-p*v,P=f*m-p*g,k=y*P-_*A+b*C+x*T-w*M+S*E;return k?(k=1/k,t[0]=(s*P-u*A+l*C)*k,t[1]=(u*T-a*P-l*M)*k,t[2]=(a*A-s*T+l*E)*k,t[3]=(i*A-r*P-o*C)*k,t[4]=(n*P-i*T+o*M)*k,t[5]=(r*T-n*A-o*E)*k,t[6]=(v*S-g*w+m*x)*k,t[7]=(g*b-d*S-m*_)*k,t[8]=(d*w-v*b+m*y)*k,t):null}function M(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function T(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function C(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function A(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function P(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function k(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function I(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function O(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function j(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=e[0],f=e[1],p=e[2],d=e[3],v=e[4],g=e[5],m=e[6],y=e[7],_=e[8];return Math.abs(n-h)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-p)<=D.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=D.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-v)<=D.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-g)<=D.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-m)<=D.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-y)<=D.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-_)<=D.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.fromMat4=o,e.clone=a,e.copy=s,e.fromValues=u,e.set=l,e.identity=c,e.transpose=h,e.invert=f,e.adjoint=p,e.determinant=d,e.multiply=v,e.translate=g,e.rotate=m,e.scale=y,e.fromTranslation=_,e.fromRotation=b,e.fromScaling=x,e.fromMat2d=w,e.fromQuat=S,e.normalFromMat4=E,e.projection=M,e.str=T,e.frob=C,e.add=A,e.subtract=P,e.multiplyScalar=k,e.multiplyScalarAndAdd=I,e.exactEquals=O,e.equals=j;var L=n(195),D=r(L);e.mul=v,e.sub=P},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new U.ARRAY_TYPE(2);return U.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new U.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new U.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function g(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function w(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function S(t){var e=t[0],n=t[1];return e*e+n*n}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t}function M(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function T(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function C(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function P(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function k(t,e){e=e||1;var n=2*U.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function I(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function O(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function j(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function L(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function D(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function R(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var s=i*i+o*o;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*o)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function B(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,e){return t[0]===e[0]&&t[1]===e[1]}function F(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=U.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=i,e.clone=o,e.fromValues=a,e.copy=s,e.set=u,e.add=l,e.subtract=c,e.multiply=h,e.divide=f,e.ceil=p,e.floor=d,e.min=v,e.max=g,e.round=m,e.scale=y,e.scaleAndAdd=_,e.distance=b,e.squaredDistance=x,e.length=w,e.squaredLength=S,e.negate=E,e.inverse=M,e.normalize=T,e.dot=C,e.cross=A,e.lerp=P,e.random=k,e.transformMat2=I,e.transformMat2d=O,e.transformMat3=j,e.transformMat4=L,e.rotate=D,e.angle=R,e.str=B,e.exactEquals=z,e.equals=F;var N=n(195),U=r(N);e.len=w,e.sub=c,e.mul=h,e.div=f,e.dist=b,e.sqrDist=x,e.sqrLen=S,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var s=void 0,u=void 0;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new q.ARRAY_TYPE(3);return q.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new q.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function s(t,e,n){var r=new q.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function l(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function p(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function g(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function _(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function S(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function M(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function T(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function C(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function P(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function k(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*l+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*l+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*l+i[2]*c,t}function I(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,l=s*a,c=3*o*s,h=3*u*a,f=u*o;return t[0]=e[0]*l+n[0]*c+r[0]*h+i[0]*f,t[1]=e[1]*l+n[1]*c+r[1]*h+i[1]*f,t[2]=e[2]*l+n[2]*c+r[2]*h+i[2]*f,t}function O(t,e){e=e||1;var n=2*q.RANDOM()*Math.PI,r=2*q.RANDOM()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function j(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function L(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function D(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],l=e[2],c=i*l-o*u,h=o*s-r*l,f=r*u-i*s,p=i*f-o*h,d=o*c-r*f,v=r*h-i*c,g=2*a;return c*=g,h*=g,f*=g,p*=2,d*=2,v*=2,t[0]=s+c+p,t[1]=u+h+d,t[2]=l+f+v,t}function R(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function z(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e){var n=s(t[0],t[1],t[2]),r=s(e[0],e[1],e[2]);T(n,n),T(r,r);var i=C(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function N(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function U(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=q.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=q.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=q.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=o,e.length=a,e.fromValues=s,e.copy=u,e.set=l,e.add=c,e.subtract=h,e.multiply=f,e.divide=p,e.ceil=d,e.floor=v,e.min=g,e.max=m,e.round=y,e.scale=_,e.scaleAndAdd=b,e.distance=x,e.squaredDistance=w,e.squaredLength=S,e.negate=E,e.inverse=M,e.normalize=T,e.dot=C,e.cross=A,e.lerp=P,e.hermite=k,e.bezier=I,e.random=O,e.transformMat4=j,e.transformMat3=L,e.transformQuat=D,e.rotateX=R,e.rotateY=B,e.rotateZ=z,e.angle=F,e.str=N,e.exactEquals=U,e.equals=V;var G=n(195),q=r(G);e.sub=h,e.mul=f,e.div=p,e.dist=x,e.sqrDist=w,e.len=a,e.sqrLen=S,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var s=void 0,u=void 0;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(37),f=n.n(h),p=n(5),d=n.n(p),v=n(8),g=n(10),m=n(105);!function(t){function e(t){var r;return i()(this,e),r=u()(this,c()(e).call(this,t)),r.layerControlInputs=void 0,r.layers=void 0,r.lastZIndex=void 0,r.handlingClick=void 0,r.layersLink=void 0,r.baseLayersList=void 0,r.separator=void 0,r.overlaysList=void 0,r.form=void 0,r.layerControlInputs=[],r.layers=[],r.lastZIndex=0,r.handlingClick=!1,r.initLayers(),n.i(g.a)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],f()(r)),r}d()(e,t),a()(e,[{key:"getDefault",value:function(){return{collapsed:!0,position:v.PositionType.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var t=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(e){e.layer.on("remove",t.onLayerChange),e.layer.on("add",t.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(t,e){return this.addLayer(t,e,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var t=this.renderService.getViewportSize(),e=t.height;g.b.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var n=e-(this.container.offsetTop+50);return n<this.form.clientHeight?(g.b.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=n+"px"):g.b.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return g.b.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var t=this;this.mapsService&&(this.mapsService.off("click",this.collapse),this.layers.forEach(function(e){e.layer.off("remove",t.onLayerChange),e.layer.off("add",t.onLayerChange)}))}},{key:"initLayout",value:function(){var t="l7-control-layers",e=this.container=g.b.create("div",t),n=this.controlOption.collapsed;e.setAttribute("aria-haspopup","true");var r=this.form=g.b.create("form",t+"-list");n&&(this.mapsService.on("click",this.collapse),e.addEventListener("mouseenter",this.expand),e.addEventListener("mouseleave",this.collapse)),this.layersLink=g.b.create("a",t+"-toggle",e),this.layersLink.title="Layers",n||this.expand(),this.baseLayersList=g.b.create("div",t+"-base",r),this.separator=g.b.create("div",t+"-separator",r),this.overlaysList=g.b.create("div",t+"-overlays",r),e.appendChild(r)}},{key:"initLayers",value:function(){var t=this,e=this.controlOption,n=e.baseLayers,r=void 0===n?{}:n,i=e.overlayers,o=void 0===i?{}:i;Object.keys(r).forEach(function(e,n){t.addLayer(r[e],e,!1)}),Object.keys(o).forEach(function(e,n){t.addLayer(o[e],e,!0)})}},{key:"update",value:function(){if(!this.container)return this;g.b.empty(this.baseLayersList),g.b.empty(this.overlaysList),this.layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this.layers.length;n++)r=this.layers[n],this.addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.controlOption.hideSingleBase&&(t=t&&i>1,this.baseLayersList.style.display=t?"":"none"),this.separator.style.display=e&&t?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var t,e,n=this.layerControlInputs,r=this.mapsService.getZoom(),i=n.length-1;i>=0;i--)if(t=n[i],(e=this.layerService.getLayer(t.layerId))&&e.inited){var o=e.getMinZoom(),a=e.getMaxZoom();t.disabled=r<o||r>a}}},{key:"addLayer",value:function(t,e,n){this.mapsService&&(t.on("add",this.onLayerChange),t.on("remove",this.onLayerChange)),this.layers.push({layer:t,name:e,overlay:n});var r=this.controlOption,i=r.sortLayers,o=r.sortFunction,a=r.autoZIndex;i&&this.layers.sort(function(t,e){return o(t.layer,e.layer,t.name,e.name)}),a&&t.setZIndex&&(this.lastZIndex++,t.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(t){this.handlingClick||this.update();var e=this.layerService.getLayer(t.target.layerId),n=(null===e||void 0===e?void 0:e.overlay)?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this.emit(n,e)}},{key:"createRadioElement",value:function(t,e){var n='<input type="radio" class="l7-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild}},{key:"addItem",value:function(t){var e,n=document.createElement("label"),r=this.layerService.getLayer(t.layer.id),i=r&&r.inited&&t.layer.isVisible();t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="l7-control-layers-selector",e.defaultChecked=i):e=this.createRadioElement("l7-base-layers",i),this.layerControlInputs.push(e),e.layerId=t.layer.id,e.addEventListener("click",this.onInputClick);var o=document.createElement("span");o.innerHTML=" "+t.name;var a=document.createElement("div");return n.appendChild(a),a.appendChild(e),a.appendChild(o),(t.overlay?this.overlaysList:this.baseLayersList).appendChild(n),this.checkDisabledLayers(),n}},{key:"onInputClick",value:function(){var t,e,n=this.layerControlInputs,r=[],i=[];this.handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this.layerService.getLayer(t.layerId),t.checked?r.push(e):t.checked||i.push(e);i.forEach(function(t){t.hide()}),r.forEach(function(t){t.show()}),this.handlingClick=!1}}])}(m.b)},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(10),d=n(105),v=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getDefault",value:function(){return{position:d.a.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var t="l7-control-logo",e=p.b.create("div",t),n=p.b.create("a","l7-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://antv.alipay.com/l7",n.setAttribute("aria-label","AntV logo"),n.setAttribute("rel","noopener nofollow"),e.appendChild(n),e}},{key:"onRemove",value:function(){return null}}]),e}(d.b)},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(37),f=n.n(h),p=n(5),d=n.n(p),v=n(10),g=n(105);!function(t){function e(t){var r;return i()(this,e),r=u()(this,c()(e).call(this,t)),r.mScale=void 0,r.iScale=void 0,n.i(v.a)(["update"],f()(r)),r}d()(e,t),a()(e,[{key:"getDefault",value:function(){return{position:g.a.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var t="l7-control-scale",e=v.b.create("div",t);this.addScales(t+"-line",e);var n=this.controlOption.updateWhenIdle;return this.mapsService.on(n?"moveend":"mapmove",this.update),this.update(),e}},{key:"onRemove",value:function(){var t=this.controlOption.updateWhenIdle;this.mapsService.off(t?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var t=this.mapsService,e=this.controlOption.maxWidth,r=t.getSize()[1]/2,i=t.containerToLngLat([0,r]),o=t.containerToLngLat([e,r]),a=n.i(v.l)([i.lng,i.lat],[o.lng,o.lat]);this.updateScales(a)}},{key:"updateScales",value:function(t){var e=this.controlOption,n=e.metric,r=e.imperial;n&&t&&this.updateMetric(t),r&&t&&this.updateImperial(t)}},{key:"updateMetric",value:function(t){var e=this.getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this.updateScale(this.mScale,n,e/t)}},{key:"updateImperial",value:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this.getRoundNum(e),this.updateScale(this.iScale,n+" mi",n/e)):(r=this.getRoundNum(i),this.updateScale(this.iScale,r+" ft",r/i))}},{key:"updateScale",value:function(t,e,n){var r=this.controlOption.maxWidth;t.style.width=Math.round(r*n)+"px",t.innerHTML=e}},{key:"getRoundNum",value:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}},{key:"addScales",value:function(t,e){var n=this.controlOption,r=n.metric,i=n.imperial;r&&(this.mScale=v.b.create("div",t,e)),i&&(this.iScale=v.b.create("div",t,e))}}])}(g.b)},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(37),f=n.n(h),p=n(5),d=n.n(p),v=n(10),g=n(105);!function(t){function e(t){var r;return i()(this,e),r=u()(this,c()(e).call(this,t)),r.disabled=void 0,r.zoomInButton=void 0,r.zoomOutButton=void 0,n.i(v.a)(["updateDisabled","zoomIn","zoomOut"],f()(r)),r}d()(e,t),a()(e,[{key:"getDefault",value:function(){return{position:g.a.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var t="l7-control-zoom",e=v.b.create("div",t+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,t+"-in",e,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,t+"-out",e,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),e}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(t,e,n,r,i){var o=v.b.create("a",n,r);return o.innerHTML=t,o.title=e,o.href="javascript:void(0)",o.addEventListener("click",i),o}},{key:"updateDisabled",value:function(){var t=this.mapsService,e="l7-disabled";v.b.removeClass(this.zoomInButton,e),v.b.removeClass(this.zoomOutButton,e),(this.disabled||t.getZoom()<=t.getMinZoom())&&v.b.addClass(this.zoomOutButton,e),(this.disabled||t.getZoom()>=t.getMaxZoom())&&v.b.addClass(this.zoomInButton,e)}}])}(g.b)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var o=n(9),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(6),f=n.n(h),p=n(4),d=n.n(p),v=n(37),g=n.n(v),m=n(5),y=n.n(m),_=n(424),b=n.n(_),x=n(8),w=n(10),S=n(49),E=(n.n(S),n(243)),M=n.n(E),T=n(294);!function(t){function e(t){var r,i;return u()(this,e),i=f()(this,d()(e).call(this)),i.markers=[],i.markerLayerOption=void 0,i.clusterIndex=void 0,i.points=[],i.clusterMarkers=[],i.mapsService=void 0,i.scene=void 0,i.zoom=void 0,i.bbox=void 0,i.markerLayerOption=b()(i.getDefault(),t),n.i(w.a)(["update"],g()(i)),i.zoom=(null===(r=i.markerLayerOption.clusterOption)||void 0===r?void 0:r.zoom)||-99,i}y()(e,t),c()(e,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(t){return this.scene=t,this.mapsService=t.get(x.TYPES.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(t){this.markerLayerOption.cluster&&this.addPoint(t,this.markers.length),this.markers.push(t)}},{key:"removeMarker",value:function(t){this.markers.indexOf(t);var e=this.markers.indexOf(t);e>-1&&this.markers.splice(e,1)}},{key:"getMarkers",value:function(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var t=this;this.getMarkers().forEach(function(e){e.addTo(t.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(t){t.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(t,e){var n=t.getLnglat(),r=n.lng,o=n.lat,a={geometry:{type:"Point",coordinates:[r,o]},properties:i({},t.getExtData(),{marker_id:e})};this.points.push(a)}},{key:"initCluster",value:function(){if(this.markerLayerOption.cluster){var t=this.markerLayerOption.clusterOption,e=t.radius,n=t.minZoom,r=void 0===n?0:n,i=t.maxZoom;this.clusterIndex=new M.a({radius:e,minZoom:r,maxZoom:i}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(t,e){var n=this,r=t[0].concat(t[1]),i=this.clusterIndex.getClusters(r,e);this.clusterMarkers.forEach(function(t){t.remove()}),this.clusterMarkers=[],i.forEach(function(t){var e,r=n.markerLayerOption.clusterOption,i=r.field,o=r.method;if(t.properties&&(null===(e=t.properties)||void 0===e?void 0:e.cluster_id)){var s,u=n.getLeaves(null===(s=t.properties)||void 0===s?void 0:s.cluster_id);if(t.properties.clusterData=u,i&&o){var l=null===u||void 0===u?void 0:u.map(function(t){return a()({},i,t.properties[i])}),c=w.i.getColumn(l,i),h=w.i.getSatByColumn(o,c),f="point_"+o;t.properties[f]=h.toFixed(2)}}var p=n.clusterMarker(t);n.clusterMarkers.push(p),p.addTo(n.scene)})}},{key:"getLeaves",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t?this.clusterIndex.getLeaves(t,e,n):null}},{key:"clusterMarker",value:function(t){var e=this.markerLayerOption.clusterOption,n=e,r=n.element,i=void 0===r?this.generateElement.bind(this):r;return new T.a({element:i(t)}).setLnglat({lng:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]})}},{key:"normalMarker",value:function(t){var e=t.properties.marker_id;return this.markers[e]}},{key:"update",value:function(){var t=this.mapsService.getZoom(),e=this.mapsService.getBounds();(!this.bbox||Math.abs(t-this.zoom)>=1||!n.i(w.j)(this.bbox,e))&&(this.bbox=n.i(w.k)(e,.5),this.zoom=Math.floor(t),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(t){var e=w.b.create("div","l7-marker-cluster"),n=w.b.create("div","",e),r=w.b.create("span","",n),i=this.markerLayerOption.clusterOption,o=i.field,a=i.method;t.properties.point_count=t.properties.point_count||1;var s=o&&a?t.properties["point_"+a]||t.properties[o]:t.properties.point_count;return r.textContent=s,e}}])}(S.EventEmitter)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return w});var o=n(9),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(6),f=n.n(h),p=n(4),d=n.n(p),v=n(37),g=n.n(v),m=n(5),y=n.n(m),_=n(8),b=n(10),x=n(49),w=(n.n(x),function(t){function e(t){var r;return u()(this,e),r=f()(this,d()(e).call(this)),r.popupOption=void 0,r.mapsService=void 0,r.lngLat=void 0,r.content=void 0,r.closeButton=void 0,r.timeoutInstance=void 0,r.container=void 0,r.tip=void 0,r.scene=void 0,r.popupOption=i({},r.getdefault(),{},t),n.i(b.a)(["update","onClickClose","remove"],g()(r)),r}return y()(e,t),c()(e,[{key:"addTo",value:function(t){var e=this;return this.mapsService=t.get(_.TYPES.IMapService),this.mapsService.on("camerachange",this.update),this.scene=t,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){e.mapsService.on("click",e.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(t){var e,n=window.document.createDocumentFragment(),r=window.document.createElement("body");for(r.innerHTML=t;;){if(!(e=r.firstChild))break;n.appendChild(e)}return this.setDOMContent(n)}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(t){return this.setDOMContent(window.document.createTextNode(t))}},{key:"setMaxWidth",value:function(t){return this.popupOption.maxWidth=t,this.update(),this}},{key:"setDOMContent",value:function(t){return this.createContent(),this.content.appendChild(t),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&b.b.remove(this.content),this.content=b.b.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=b.b.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(t,e,n){var r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r}},{key:"removeDom",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:b.c.BOTTOM,className:""}}},{key:"onClickClose",value:function(t){t.stopPropagation&&t.stopPropagation(),this.remove()}},{key:"update",value:function(){var t=this,e=this.lngLat,r=this.popupOption,i=r.className,o=r.maxWidth,a=r.anchor;if(this.mapsService&&e&&this.content){var s=this.mapsService.getMarkerContainer();!this.container&&s&&(this.container=this.creatDom("div","l7-popup",s.parentNode),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),i&&i.split(" ").forEach(function(e){return t.container.classList.add(e)}),this.container.addEventListener("mousedown",function(t){t.stopPropagation()}),this.container.addEventListener("click",function(t){t.stopPropagation()})),o&&this.container.style.maxWidth!==o&&(this.container.style.maxWidth=o),this.updatePosition(),b.b.setTransform(this.container,"".concat(b.d[a])),n.i(b.e)(this.container,a,"popup")}}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.lngLat,e=t.lng,n=t.lat,r=this.popupOption.offsets,i=this.mapsService.lngLatToContainer([e,n]);this.container.style.left=i.x+r[0]+"px",this.container.style.top=i.y-r[1]+"px"}}}]),e}(x.EventEmitter))},function(t,e,n){"use strict";function r(){var t=new s.Container;return t.parent=N,t.bind(c.a.SceneID).toConstantValue("".concat(G++)),t.bind(c.a.ILayerService).to(x.a).inSingletonScope(),t.bind(c.a.ISceneService).to(E.a).inSingletonScope(),t.bind(c.a.ICameraService).to(p.a).inSingletonScope(),t.bind(c.a.ICoordinateSystemService).to(y.a).inSingletonScope(),t.bind(c.a.IInteractionService).to(_.a).inSingletonScope(),t.bind(c.a.IPickingService).to(b.a).inSingletonScope(),t.bind(c.a.IControlService).to(d.a).inSingletonScope(),t.bind(c.a.IMarkerService).to(v.a).inSingletonScope(),t.bind(c.a.IIconService).to(f.a).inSingletonScope(),t.bind(c.a.IFontService).to(h.a).inSingletonScope(),t.bind(c.a.IPopupService).to(g.a).inSingletonScope(),t.bind(c.a.INormalPass).to(T.a).whenTargetNamed("clear"),t.bind(c.a.INormalPass).to(A.a).whenTargetNamed("pixelPicking"),t.bind(c.a.INormalPass).to(z.a).whenTargetNamed("render"),t.bind(c.a.INormalPass).to(F.a).whenTargetNamed("taa"),t.bind(c.a.IFactoryNormalPass).toFactory(function(t){return function(e){return t.container.getNamed(c.a.INormalPass,e)}}),t.bind(c.a.IPostProcessingPass).to(O.a).whenTargetNamed("copy"),t.bind(c.a.IPostProcessingPass).to(P.a).whenTargetNamed("blurH"),t.bind(c.a.IPostProcessingPass).to(k.a).whenTargetNamed("blurV"),t.bind(c.a.IPostProcessingPass).to(D.a).whenTargetNamed("noise"),t.bind(c.a.IPostProcessingPass).to(R.a).whenTargetNamed("sepia"),t.bind(c.a.IPostProcessingPass).to(I.a).whenTargetNamed("colorHalftone"),t.bind(c.a.IPostProcessingPass).to(j.a).whenTargetNamed("hexagonalPixelate"),t.bind(c.a.IPostProcessingPass).to(L.a).whenTargetNamed("ink"),t.bind(c.a.IFactoryPostProcessingPass).toFactory(function(t){return function(e){var n=t.container.getNamed(c.a.IPostProcessingPass,e);return n.setName(e),n}}),t}function i(t){var e=new s.Container;return e.parent=t,e.bind(c.a.IStyleAttributeService).to(w.a).inSingletonScope(),e.bind(c.a.IMultiPassRenderer).to(C.a).inSingletonScope(),e.bind(c.a.IPostProcessor).to(B.a).inSingletonScope(),e}n.d(e,"b",function(){return V}),e.c=r,e.d=i;var o=n(1244),a=(n.n(o),n(49)),s=(n.n(a),n(7)),u=(n.n(s),n(1094)),l=n.n(u),c=n(22),h=n(693),f=n(696),p=n(697),d=n(699),v=n(703),g=n(704),m=n(705),y=n(708),_=n(709),b=n(710),x=n(713),w=n(715),S=n(717),E=n(743),M=n(745),T=n(728),C=n(729),A=n(730),P=n(734),k=n(735),I=n(736),O=n(737),j=n(738),L=n(739),D=n(740),R=n(741),B=n(731),z=n(732),F=n(733),N=new s.Container;N.bind(c.a.IGlobalConfigService).to(m.a).inSingletonScope(),N.bind(c.a.IShaderModuleService).to(M.a).inSingletonScope(),N.bind(c.a.ILogService).to(S.a).inSingletonScope(),n.i(s.decorate)(n.i(s.injectable)(),a.EventEmitter),N.bind(c.a.IEventEmitter).to(a.EventEmitter);var U=l()(N,!1),V=function(t){var e=U.lazyInject(t);return function(t,n,r){e.call(this,t,n),r&&(r.initializer=function(){return t[n]})}};e.a=N;var G=0},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){f()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}function a(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="black",t.textBaseline="middle"}function s(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}n.d(e,"a",function(){return j});var u,l,c,h=n(9),f=n.n(h),p=n(2),d=n.n(p),v=n(3),g=n.n(v),m=n(10),y=n(987),_=n.n(y),b=n(7),x=(n.n(b),n(296)),w=o(),S="sans-serif",E="normal",M=24,T=3,C=.25,A=8,P=1024,k=1,I=1,O=3,j=(u=n.i(b.injectable)())(l=c=function(){function t(){d()(this,t),this.fontAtlas=void 0,this.iconFontGlyphs={},this.fontOptions=void 0,this.key=void 0,this.cache=new m.h(O)}return g()(t,[{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:S,fontWeight:E,characterSet:w,fontSize:M,buffer:T,sdf:!0,cutoff:C,radius:A},this.key=""}},{key:"addIconGlyphs",value:function(t){var e=this;t.forEach(function(t){e.iconFontGlyphs[t.name]=t.unicode})}},{key:"getGlyph",value:function(t){return this.iconFontGlyphs[t]?String.fromCharCode(parseInt(this.iconFontGlyphs[t],16)):""}},{key:"setFontOptions",value:function(t){this.fontOptions=i({},this.fontOptions,{},t),this.key=this.getKey();var e=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(!n||0!==e.length){var r=this.generateFontAtlas(this.key,e,n);this.fontAtlas=r,this.cache.set(this.key,r)}}},{key:"destroy",value:function(){this.cache.clear()}},{key:"generateFontAtlas",value:function(t,e,r){var o=this.fontOptions,u=o.fontFamily,l=o.fontWeight,c=o.fontSize,h=o.buffer,f=o.sdf,p=o.radius,d=o.cutoff,v=r&&r.data;v||(v=document.createElement("canvas"),v.width=P);var g=v.getContext("2d");a(g,u,c,l);var m=n.i(x.a)(i({getFontWidth:function(t){return g.measureText(t).width},fontHeight:c*I,buffer:h,characterSet:e,maxCanvasWidth:P},r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset})),y=m.mapping,b=m.canvasHeight,w=m.xOffset,S=m.yOffset;if(v.height!==b){var E=g.getImageData(0,0,v.width,v.height);v.height=b,g.putImageData(E,0,0)}if(a(g,u,c,l),f){var M=new _.a(c,h,p,d,u,l),T=g.getImageData(0,0,M.size,M.size),C=!0,A=!1,O=void 0;try{for(var j,L=e[Symbol.iterator]();!(C=(j=L.next()).done);C=!0){var D=j.value;s(M.draw(D),T),g.putImageData(T,y[D].x,y[D].y)}}catch(t){A=!0,O=t}finally{try{C||null==L.return||L.return()}finally{if(A)throw O}}}else{var R=!0,B=!1,z=void 0;try{for(var F,N=e[Symbol.iterator]();!(R=(F=N.next()).done);R=!0){var U=F.value;g.fillText(U,y[U].x,y[U].y+c*k)}}catch(t){B=!0,z=t}finally{try{R||null==N.return||N.return()}finally{if(B)throw z}}}return{xOffset:w,yOffset:S,mapping:y,data:v,width:v.width,height:v.height}}},{key:"getKey",value:function(){var t=this.fontOptions,e=t.fontFamily,n=t.fontWeight,r=t.fontSize,i=t.buffer,o=t.sdf,a=t.radius,s=t.cutoff;return o?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(a," ").concat(s):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}},{key:"getNewChars",value:function(t,e){var n=this.cache.get(t);if(!n)return e;var r=[],i=n.mapping,o=new Set(Object.keys(i));return new Set(e).forEach(function(t){o.has(t)||r.push(t)}),r}},{key:"scale",get:function(){return I}},{key:"canvas",get:function(){var t=this.cache.get(this.key);return t&&t.data}},{key:"mapping",get:function(){var t=this.cache.get(this.key);return t&&t.mapping}}]),t}())||l},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r,i,o,a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(6),h=n.n(c),f=n(4),p=n.n(f),d=n(5),v=n.n(d),g=n(49),m=(n.n(g),n(7)),y=(n.n(m),n(296)),_=3,b=1024,x=64,w=(r=n.i(m.injectable)())(i=o=function(t){function e(){var t,n;s()(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=h()(this,(t=p()(e)).call.apply(t,[this].concat(i))),n.canvasHeight=void 0,n.texture=void 0,n.canvas=void 0,n.iconData=void 0,n.iconMap=void 0,n.ctx=void 0,n}return v()(e,t),l()(e,[{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(t,e){var n=this,r=new Image;if(this.hasImage(t))throw new Error("Image Id already exists");this.iconData.push({id:t,width:x,height:x}),this.updateIconMap(),this.loadImage(e).then(function(e){r=e;var i=n.iconData.find(function(e){return e.id===t});i&&(i.image=r),n.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(t){return this.iconMap.hasOwnProperty(t)}},{key:"removeImage",value:function(t){this.hasImage(t)&&(this.iconData=this.iconData.filter(function(e){return e.id!==t}),delete this.iconMap[t],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var t=this;this.canvas.width=b,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(e){var n=t.iconMap[e],r=n.x,i=n.y,o=n.image;o&&t.ctx.drawImage(o,r,i,x,x)})}},{key:"updateIconMap",value:function(){var t=n.i(y.b)(this.iconData,_,b),e=t.mapping,r=t.canvasHeight;this.iconMap=e,this.canvasHeight=r}},{key:"loadImage",value:function(t){return new Promise(function(e,n){if(t instanceof HTMLImageElement)return void e(t);var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e(r)},r.onerror=function(){n(new Error("Could not load image at "+t))},r.src=t instanceof File?URL.createObjectURL(t):t})}}]),e}(g.EventEmitter))||i},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r,i,o,a=n(58),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(68),p=n(7),d=(n.n(p),(r=n.i(p.injectable)())(i=o=function(){function t(){l()(this,t),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0,this.viewMatrixInverse=void 0,this.cameraPosition=void 0}return h()(t,[{key:"init",value:function(){}},{key:"update",value:function(t){this.viewport=t,this.viewMatrixInverse=f.a.invert(f.a.create(),this.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var t=this.viewport.getCenter(),e=s()(t,2);return[e[0],e[1]]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}},{key:"setViewProjectionMatrix",value:function(t){this.overridedViewProjectionMatrix=t}},{key:"jitterProjectionMatrix",value:function(t,e){var n=f.a.fromTranslation(f.a.create(),[t,e,0]);this.jitteredProjectionMatrix=f.a.multiply(f.a.create(),n,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=f.a.multiply(f.a.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r,i,o,a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(10),h=n(7),f=(n.n(h),n(22)),p=(r=n.i(h.injectable)())(i=o=function(){function t(){s()(this,t),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.scene=void 0,this.mapsService=void 0,this.controls=[],this.unAddControls=[]}return l()(t,[{key:"init",value:function(t,e){this.container=t.container,this.scene=e,this.mapsService=e.get(f.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(t,e){e.get(f.a.IMapService).map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}},{key:"getControlByName",value:function(t){return this.controls.find(function(e){return e.controlOption.name===t})}},{key:"removeControl",value:function(t){var e=this.controls.indexOf(t);return e>-1&&this.controls.splice(e,1),t.remove(),this}},{key:"addControls",value:function(){var t=this;this.unAddControls.forEach(function(e){e.addTo(t.scene),t.controls.push(e)}),this.unAddControls=[]}},{key:"destroy",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.controls[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.remove()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){function t(t,i){var o=n+t+" "+n+i;e[t+i]=c.b.create("div",o,r)}var e=this.controlCorners={},n="l7-",r=this.controlContainer=c.b.create("div",n+"control-container",this.container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")}},{key:"clearControlPos",value:function(){for(var t in this.controlCorners)this.controlCorners[t]&&c.b.remove(this.controlCorners[t]);this.controlContainer&&c.b.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.TOPRIGHT="topright",t.TOPLEFT="topleft",t.BOTTOMRIGHT="bottomright",t.BOTTOMLEFT="bottomleft"}(r||(r={}))},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,i,o,a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(7),h=(n.n(c),n(22)),f=(r=n.i(c.injectable)())(i=o=function(){function t(){s()(this,t),this.container=void 0,this.scene=void 0,this.mapsService=void 0,this.markers=[],this.markerLayers=[],this.unAddMarkers=[],this.unAddMarkerLayers=[]}return l()(t,[{key:"addMarkerLayer",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}},{key:"removeMarkerLayer",value:function(t){t.destroy(),this.markerLayers.indexOf(t);var e=this.markerLayers.indexOf(t);e>-1&&this.markerLayers.splice(e,1)}},{key:"addMarker",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}},{key:"addMarkers",value:function(){var t=this;this.unAddMarkers.forEach(function(e){e.addTo(t.scene),t.markers.push(e)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var t=this;this.unAddMarkerLayers.forEach(function(e){t.markerLayers.push(e),e.addTo(t.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(t){t.remove(),this.markers.indexOf(t);var e=this.markers.indexOf(t);e>-1&&this.markers.splice(e,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(h.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(t){t.remove()}),this.markers=[],this.markerLayers.forEach(function(t){t.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(t){t.destroy()}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,i,o,a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(7),h=(n.n(c),n(22)),f=(r=n.i(c.injectable)())(i=o=function(){function t(){s()(this,t),this.scene=void 0,this.popup=void 0,this.mapsService=void 0,this.unAddPopup=void 0}return l()(t,[{key:"removePopup",value:function(t){t.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(t){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(t.addTo(this.scene),this.popup=t):this.unAddPopup=t}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(h.a.IMapService)}}]),t}())||i},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){l()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return b});var o,a,s,u=n(9),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(424),v=n.n(d),g=n(7),m=(n.n(g),n(707)),y={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},_={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15}},b=(o=n.i(g.injectable)())(a=s=function(){function t(){h()(this,t),this.sceneConfigCache={},this.layerConfigCache={}}return p()(t,[{key:"getSceneConfig",value:function(t){return this.sceneConfigCache[t]}},{key:"getSceneWarninfo",value:function(t){return m.a[t]}},{key:"setSceneConfig",value:function(t,e){this.sceneConfigCache[t]=i({},y,{},e)}},{key:"getLayerConfig",value:function(t){return this.layerConfigCache[t]}},{key:"setLayerConfig",value:function(t,e,n){this.layerConfigCache[e]=i({},v()({},this.sceneConfigCache[t],_,n))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),t}())||a},function(t,e){},function(t,e,n){"use strict";var r={MapToken:" DemotokenToken",SDK:"mapbox-gl apiL7"};e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return E});var r,i,o,a,s,u,l=n(14),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(13),g=n.n(v),m=n(15),y=(n.n(m),n(68)),_=n(7),b=(n.n(_),n(22)),x=n(749),w=n(295),S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],E=(r=n.i(_.injectable)(),i=n.i(_.inject)(b.a.ICameraService),r((a=u=function(){function t(){f()(this,t),this.needRefresh=!0,c()(this,"cameraService",s,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return d()(t,[{key:"refresh",value:function(){var t=this.cameraService.getZoom(),e=this.cameraService.getZoomScale(),r=this.cameraService.getCenter(),i=n.i(x.a)({latitude:r[1],zoom:t}),o=i.pixelsPerMeter,a=i.pixelsPerDegree;this.viewportCenter=r,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=o,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===w.a.LNGLAT||this.coordinateSystem===w.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===w.a.LNGLAT_OFFSET?this.calculateLnglatOffset(r,t):this.coordinateSystem===w.a.P20_OFFSET&&this.calculateLnglatOffset(r,t,e,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(t){this.coordinateSystem=t}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(t,e,r,i){var o=n.i(x.a)({latitude:t[1],zoom:e,scale:r,flipY:i,highPrecision:!0}),a=o.pixelsPerMeter,s=o.pixelsPerDegree,u=o.pixelsPerDegree2,l=this.cameraService.getViewMatrix(),c=this.cameraService.getProjectionMatrix(),h=y.a.multiply([],c,l),f=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,e));this.viewportCenterProjection=y.b.transformMat4([],[f[0],f[1],0,1],h),l=this.cameraService.getViewMatrixUncentered()||l,h=y.a.multiply([],c,l),h=y.a.multiply([],h,S),this.cameraService.setViewProjectionMatrix(h),this.pixelsPerMeter=a,this.pixelsPerDegree=s,this.pixelsPerDegree2=u}}]),t}(),s=g()(a.prototype,"cameraService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)},function(t,e,n){"use strict";n.d(e,"a",function(){return R});var r,i,o,a,s,u,l,c,h=n(14),f=n.n(h),p=n(2),d=n.n(p),v=n(3),g=n.n(v),m=n(6),y=n.n(m),_=n(4),b=n.n(_),x=n(37),w=n.n(x),S=n(5),E=n.n(S),M=n(13),T=n.n(M),C=n(15),A=(n.n(C),n(49)),P=n.n(A),k=n(1092),I=n.n(k),O=n(7),j=(n.n(O),n(22)),L=n(106),D={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancle"},R=(r=n.i(O.injectable)(),i=n.i(O.inject)(j.a.IMapService),o=n.i(O.inject)(j.a.ILogService),r((s=c=function(t){function e(){var t,n;d()(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=y()(this,(t=b()(e)).call.apply(t,[this].concat(i))),f()(n,"mapService",u,w()(n)),f()(n,"logger",l,w()(n)),n.hammertime=void 0,n.lastClickTime=0,n.lastClickXY=[-1,-1],n.clickTimer=void 0,n.onDrag=function(t){var e=n.interactionEvent(t);e.type=D[e.type],n.emit(L.a.Drag,e)},n.onHammer=function(t){t.srcEvent.stopPropagation();var e=n.interactionEvent(t);n.emit(L.a.Hover,e)},n.onTouch=function(t){var e=t.touches[0];n.onHover({x:e.pageX,y:e.pageY,type:"touch"})},n.onHover=function(t){var e=t.x,r=t.y,i=t.type,o=n.mapService.getMapContainer();if(o){var a=o.getBoundingClientRect(),s=a.top;e-=a.left,r-=s}var u=n.mapService.containerToLngLat([e,r]);if("click"===i){if("ontouchstart"in document.documentElement==!0)return;return void n.isDoubleTap(e,r,u)}if("touch"===i)return void n.isDoubleTap(e,r,u);"click"!==i&&"dblclick"!==i&&n.emit(L.a.Hover,{x:e,y:r,lngLat:u,type:i})},n}return E()(e,t),g()(e,[{key:"init",value:function(){this.addEventListenerOnMap()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(L.a.Hover)}},{key:"triggerHover",value:function(t){var e=t.x,n=t.y;this.emit(L.a.Hover,{x:e,y:n})}},{key:"triggerSelect",value:function(t){this.emit(L.a.Select,{featureId:t})}},{key:"triggerActive",value:function(t){this.emit(L.a.Active,{featureId:t})}},{key:"addEventListenerOnMap",value:function(){var t=this.mapService.getMapContainer();if(t){var e=new I.a.Manager(t);e.add(new I.a.Tap({event:"dblclick",taps:2})),e.add(new I.a.Tap({event:"click"})),e.add(new I.a.Pan({threshold:0,pointers:0})),e.add(new I.a.Press({})),e.on("dblclick click",this.onHammer),e.on("panstart panmove panend pancancel",this.onDrag),t.addEventListener("mousemove",this.onHover),t.addEventListener("mousedown",this.onHover),t.addEventListener("mouseup",this.onHover),t.addEventListener("contextmenu",this.onHover),this.hammertime=e,this.logger.debug("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function(){var t=this.mapService.getMapContainer();t&&(t.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),t.removeEventListener("mousedown",this.onHover),t.removeEventListener("mouseup",this.onHover),t.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(t){var e,n,r=t.type,i=t.pointerType;"touch"===i?(n=Math.floor(t.pointers[0].clientY),e=Math.floor(t.pointers[0].clientX)):(n=Math.floor(t.srcEvent.y),e=Math.floor(t.srcEvent.x));var o=this.mapService.getMapContainer();if(o){var a=o.getBoundingClientRect(),s=a.top;e-=a.left,n-=s}return{x:e,y:n,lngLat:this.mapService.containerToLngLat([e,n]),type:r}}},{key:"isDoubleTap",value:function(t,e,n){var r=this,i=(new Date).getTime(),o="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-t)<10&&Math.abs(this.lastClickXY[1]-e)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),o="dblclick",this.emit(L.a.Hover,{x:t,y:e,lngLat:n,type:o})):(this.lastClickTime=i,this.lastClickXY=[t,e],this.clickTimer=setTimeout(function(){o="click",r.emit(L.a.Hover,{x:t,y:e,lngLat:n,type:o})},400))}}]),e}(P.a),u=T()(s.prototype,"mapService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=T()(s.prototype,"logger",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){E()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return F});var o,a,s,u,l,c,h,f,p,d,v,g,m=n(58),y=n.n(m),_=n(80),b=n.n(_),x=n(79),w=n.n(x),S=n(9),E=n.n(S),M=n(14),T=n.n(M),C=n(2),A=n.n(C),P=n(3),k=n.n(P),I=n(13),O=n.n(I),j=n(15),L=(n.n(j),n(10)),D=n(7),R=(n.n(D),n(22)),B=n(106),z=n(89),F=(o=n.i(D.injectable)(),a=n.i(D.inject)(R.a.IRendererService),s=n.i(D.inject)(R.a.IGlobalConfigService),u=n.i(D.inject)(R.a.IInteractionService),l=n.i(D.inject)(R.a.ILayerService),o((h=g=function(){function t(){var e=this;A()(this,t),T()(this,"rendererService",f,this),T()(this,"configService",p,this),T()(this,"interactionService",d,this),T()(this,"layerService",v,this),this.pickingFBO=void 0,this.width=0,this.height=0,this.alreadyInPicking=!1,this.pickBufferScale=1,this.pickFromPickingFBO=function(t,r){var o,a=r.x,s=r.y,u=r.lngLat,l=r.type,c=!1,h=e.rendererService,f=h.getViewportSize,p=h.readPixels,d=f(),v=d.width,g=d.height,m=t.getLayerConfig(),y=m.enableHighlight,_=m.enableSelect,b=a*window.devicePixelRatio,x=s*window.devicePixelRatio;if(b>v-1*window.devicePixelRatio||b<0||x>g-1*window.devicePixelRatio||x<0)return!1;var w;if(w=p({x:Math.floor(b/e.pickBufferScale),y:Math.floor((g-(s+1)*window.devicePixelRatio)/e.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}),0!==w[0]||0!==w[1]||0!==w[2]){var S=n.i(L.f)(w),E=t.getSource().getFeatureById(S);S!==t.getCurrentPickId()&&"mousemove"===l&&(l="mouseenter");var M={x:a,y:s,type:l,lngLat:u,featureId:S,feature:E};E&&(c=!0,t.setCurrentPickId(S),e.triggerHoverOnLayer(t,M))}else{var T={x:a,y:s,lngLat:u,type:null!==t.getCurrentPickId()&&"mousemove"===l?"mouseout":"un"+l,featureId:null,feature:null};e.triggerHoverOnLayer(t,i({},T,{type:"unpick"})),e.triggerHoverOnLayer(t,T),t.setCurrentPickId(null)}if(y&&e.highlightPickedFeature(t,w),_&&"click"===l&&(null===(o=w)||void 0===o?void 0:o.toString())!==[0,0,0,0].toString()){var C=n.i(L.f)(w);null===t.getCurrentSelectedId()||C!==t.getCurrentSelectedId()?(e.selectFeature(t,w),t.setCurrentSelectedId(C)):(e.selectFeature(t,new Uint8Array([0,0,0,0])),t.setCurrentSelectedId(null))}return c}}return k()(t,[{key:"init",value:function(t){var e=this.rendererService,n=e.createTexture2D,r=e.createFramebuffer,i=e.getViewportSize,o=i(),a=o.width,s=o.height;this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,this.pickingFBO=r({color:n({width:Math.round(a/this.pickBufferScale),height:Math.round(s/this.pickBufferScale),wrapS:z.a.CLAMP_TO_EDGE,wrapT:z.a.CLAMP_TO_EDGE})}),this.interactionService.on(B.a.Hover,this.pickingAllLayer.bind(this))}},{key:"pickingAllLayer",value:function(){function t(t){return e.apply(this,arguments)}var e=w()(b.a.mark(function t(e){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.alreadyInPicking&&!this.layerService.alreadyInRendering){t.next=2;break}return t.abrupt("return");case 2:return this.alreadyInPicking=!0,t.next=5,this.pickingLayers(e);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"pickingLayers",value:function(){function t(t){return e.apply(this,arguments)}var e=w()(b.a.mark(function t(e){var n,r,i,o,a,s,u,l=this;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.rendererService,r=n.getViewportSize,i=n.useFramebuffer,o=n.clear,a=r(),s=a.width,u=a.height,this.width===s&&this.height===u||(this.pickingFBO.resize({width:Math.round(s/this.pickBufferScale),height:Math.round(u/this.pickBufferScale)}),this.width=s,this.height=u),i(this.pickingFBO,function(){l.layerService.getLayers().filter(function(t){return t.needPick(e.type)}).reverse().some(function(t){return o({framebuffer:l.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.hooks.beforePickingEncode.call(),t.renderModels(),t.hooks.afterPickingEncode.call(),l.pickFromPickingFBO(t,e)&&!t.getLayerConfig().enablePropagation})});case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"triggerHoverOnLayer",value:function(t,e){t.emit(e.type,e)}},{key:"highlightPickedFeature",value:function(t,e){var n=y()(e,3),r=n[0],i=n[1],o=n[2];t.hooks.beforeHighlight.call([r,i,o])}},{key:"selectFeature",value:function(t,e){var n=y()(e,3),r=n[0],i=n[1],o=n[2];t.hooks.beforeSelect.call([r,i,o])}}]),t}(),f=O()(h.prototype,"rendererService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=O()(h.prototype,"configService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=O()(h.prototype,"interactionService",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=O()(h.prototype,"layerService",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=h))||c)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.normal="normal",t.additive="additive",t.subtractive="subtractive",t.min="min",t.max="max"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o});var r;!function(t){t.LINEAR="linear",t.POWER="power",t.LOG="log",t.IDENTITY="identity",t.TIME="time",t.QUANTILE="quantile",t.QUANTIZE="quantize",t.THRESHOLD="threshold",t.CAT="cat"}(r||(r={}));var i;!function(t){t.CONSTANT="constant",t.VARIABLE="variable"}(i||(i={}));var o;!function(t){t[t.Attribute=0]="Attribute",t[t.InstancedAttribute=1]="InstancedAttribute",t[t.Uniform=2]="Uniform"}(o||(o={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return S});var r,i,o,a,s,u,l,c,h=n(14),f=n.n(h),p=n(2),d=n.n(p),v=n(3),g=n.n(v),m=n(13),y=n.n(m),_=n(15),b=(n.n(_),n(7)),x=(n.n(b),n(22)),w=n(747),S=(r=n.i(b.injectable)(),i=n.i(b.inject)(x.a.IRendererService),o=n.i(b.inject)(x.a.IGlobalConfigService),r((s=c=function(){function t(){d()(this,t),this.clock=new w.a,this.alreadyInRendering=!1,this.layers=[],this.layerRenderID=void 0,this.sceneInited=!1,this.animateInstanceCount=0,f()(this,"renderService",u,this),f()(this,"configService",l,this)}return g()(t,[{key:"add",value:function(t){this.sceneInited&&t.init(),this.layers.push(t)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(t){t.inited||t.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(t){return this.layers.find(function(e){return e.id===t})}},{key:"getLayerByName",value:function(t){return this.layers.find(function(e){return e.name===t})}},{key:"remove",value:function(t){var e=this.layers.indexOf(t);e>-1&&this.layers.splice(e,1),t.emit("remove",null),t.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter(function(t){return t.inited}).filter(function(t){return t.isVisible()}).forEach(function(t){t.hooks.beforeRenderData.call(),t.hooks.beforeRender.call(),t.render(),t.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(t,e){return t.zIndex-e.zIndex}),this.renderLayers()}},{key:"destroy",value:function(){this.layers.forEach(function(t){return t.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){0==this.animateInstanceCount++&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){0==--this.animateInstanceCount&&(this.stopRender(),this.clock.stop())}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),t}(),u=y()(s.prototype,"renderService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=y()(s.prototype,"configService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(48),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(118),c=n.n(l),h=function(){function t(e){var n=this;a()(this,t),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:1/0},this.vertexAttribute=void 0,this.defaultCallback=function(t){if(0===t.length){var e;return(null===(e=n.scale)||void 0===e?void 0:e.values)||[]}return t.map(function(t,e){var r;return(0,(null===(r=n.scale)||void 0===r?void 0:r.scalers)[e].func)(t)})},this.setProps(e)}return u()(t,[{key:"setProps",value:function(t){Object.assign(this,t)}},{key:"mapping",value:function(t){var e;if(null===(e=this.scale)||void 0===e?void 0:e.callback){var n,r=null===(n=this.scale)||void 0===n?void 0:n.callback.apply(n,i()(t));if(!c()(r))return[r]}return this.defaultCallback(t)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),t}()},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){T()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return j});var o,a,s,u,l,c,h,f=n(112),p=n.n(f),d=n(48),v=n.n(d),g=n(14),m=n.n(g),y=n(2),_=n.n(y),b=n(3),x=n.n(b),w=n(13),S=n.n(w),E=n(15),M=(n.n(E),n(9)),T=n.n(M),C=n(7),A=(n.n(C),n(22)),P=n(89),k=n(714),I=(o={},T()(o,P.a.FLOAT,4),T()(o,P.a.UNSIGNED_BYTE,1),T()(o,P.a.UNSIGNED_SHORT,2),o),O=0,j=(a=n.i(C.injectable)(),s=n.i(C.inject)(A.a.IRendererService),a((l=h=function(){function t(){_()(this,t),this.attributesAndIndices=void 0,m()(this,"rendererService",c,this),this.attributes=[],this.triangulation=void 0,this.c=O++,this.featureLayout={sizePerElement:0,elements:[]}}return x()(t,[{key:"registerStyleAttribute",value:function(t){var e=this.getLayerStyleAttribute(t.name||"");return e?e.setProps(t):(e=new k.a(t),this.attributes.push(e)),e}},{key:"updateStyleAttribute",value:function(t,e,n){var r=this.getLayerStyleAttribute(t);r||(r=this.registerStyleAttribute(i({},e,{name:t})));var o=e.scale;o&&r&&(r.scale=o,r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0,n&&n.featureRange&&(r.featureRange=n.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(t){return this.attributes.find(function(e){return e.name===t})}},{key:"getLayerAttributeScale",value:function(t){var e,n=this.getLayerStyleAttribute(t),r=null===n||void 0===n?void 0:null===(e=n.scale)||void 0===e?void 0:e.scalers;return r&&r[0]?r[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=this.attributes.find(function(e){return e.name===t});if(i&&i.descriptor){var o=i.descriptor,a=o.update,s=o.buffer,u=o.size,l=void 0===u?0:u,c=I[s.type||P.a.FLOAT];if(a){var h=this.featureLayout,f=h.elements,p=h.sizePerElement,d=f.slice(n,r);if(!d.length)return;var g=d[0].offset,m=g*l*c,y=d.map(function(t,n){for(var r=t.featureIdx,i=t.vertices,o=t.normals,s=i.length/p,u=[],l=0;l<s;l++){var c=o?o.slice(3*l,3*l+3):[];u.push.apply(u,v()(a(e[r],r,i.slice(l*p,l*p+p),n,c)))}return u}).reduce(function(t,e){return t.push.apply(t,v()(e)),t},[]);i.vertexAttribute.updateBuffer({data:y,offset:m})}}}},{key:"createAttributesAndIndices",value:function(t,e){var n=this;this.featureLayout={sizePerElement:0,elements:[]},e&&(this.triangulation=e);var r=this.attributes.map(function(t){return t.resetDescriptor(),t.descriptor}),o=0,a=[],s=[],u=[],l=3;t.forEach(function(t,e){var i=n.triangulation(t),c=i.indices,h=i.vertices,f=i.normals,p=i.size;c.forEach(function(t){s.push(t+o)}),h.forEach(function(t){a.push(t)}),f&&f.forEach(function(t){u.push(t)}),l=p;var d=h.length/p;n.featureLayout.sizePerElement=l,n.featureLayout.elements.push({featureIdx:e,vertices:h,normals:f,offset:o}),o+=d;for(var g=function(n){r.forEach(function(r,i){if(r&&r.update){var o,a=(null===f||void 0===f?void 0:f.slice(3*n,3*n+3))||[];(o=r.buffer.data).push.apply(o,v()(r.update(t,e,h.slice(n*p,n*p+p),n,a)))}})},m=0;m<d;m++)g(m)});var c=this.rendererService,h=c.createAttribute,f=c.createBuffer,d=c.createElements,g={};r.forEach(function(t,e){if(t){var r=t.buffer,o=(t.update,t.name,p()(t,["buffer","update","name"])),a=h(i({buffer:f(r)},o));g[t.name||""]=a,n.attributes[e].vertexAttribute=a}});var m=d({data:s,type:P.a.UNSIGNED_INT,count:s.length});return this.attributesAndIndices={attributes:g,elements:m},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){this.attributes.forEach(function(t){t.vertexAttribute&&t.vertexAttribute.destroy()}),this.attributes=[]}}]),t}(),c=S()(l.prototype,"rendererService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=l))||u)},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(7),c=(n.n(l),n(1240)),h=new c.a({id:"L7"}).enable(!1);h.priority=5;var f=(r=n.i(l.injectable)())(i=function(){function t(){a()(this,t)}return u()(t,[{key:"error",value:function(t){h.error(t)()}},{key:"warn",value:function(t){h.probe(1,t)()}},{key:"info",value:function(t){h.info(3,t)()}},{key:"debug",value:function(t){h.probe(4,t)()}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["mapload"]},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(6),c=n.n(l),h=n(4),f=n.n(h),p=n(142),d=n.n(p),v=n(5),g=n.n(v),m=n(7),y=(n.n(m),n(131)),_=(r=n.i(m.injectable)())(i=function(t){function e(){return a()(this,e),c()(this,f()(e).apply(this,arguments))}return g()(e,t),u()(e,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(t,n){d()(f()(e.prototype),"init",this).call(this,t,n)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),e}(y.a))||i},function(t,e,n){"use strict";n.d(e,"a",function(){return M});var r,i,o,a,s,u,l=n(80),c=n.n(l),h=n(79),f=n.n(h),p=n(14),d=n.n(p),v=n(2),g=n.n(v),m=n(3),y=n.n(m),_=n(13),b=n.n(_),x=n(15),w=(n.n(x),n(7)),S=(n.n(w),n(22)),E=n(76),M=(r=n.i(w.injectable)(),i=n.i(w.inject)(S.a.IPostProcessor),r((a=u=function(){function t(){g()(this,t),this.passes=[],d()(this,"postProcessor",s,this),this.layer=void 0,this.renderFlag=void 0,this.width=0,this.height=0}return y()(t,[{key:"setLayer",value:function(t){this.layer=t}},{key:"setRenderFlag",value:function(t){this.renderFlag=t}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){function t(){return e.apply(this,arguments)}var e=f()(c.a.mark(function t(){var e,n,r,i,o,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,n=!1,r=void 0,t.prev=3,i=this.passes[Symbol.iterator]();case 5:if(e=(o=i.next()).done){t.next=12;break}return a=o.value,t.next=9,a.render(this.layer);case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,r=t.t0;case 18:t.prev=18,t.prev=19,e||null==i.return||i.return();case 21:if(t.prev=21,!n){t.next=24;break}throw r;case 24:return t.finish(21);case 25:return t.finish(18);case 26:this.layer.renderModels();case 27:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])}));return t}()},{key:"resize",value:function(t,e){this.width===t&&this.height===e||(this.postProcessor.resize(t,e),this.width=t,this.height=e)}},{key:"add",value:function(t,e){t.getType()===E.a.PostProcessing?this.postProcessor.add(t,this.layer,e):(t.init(this.layer,e),this.passes.push(t))}},{key:"insert",value:function(t,e,n){t.init(this.layer,e),this.passes.splice(n,0,t)}},{key:"destroy",value:function(){this.passes.length=0}}]),t}(),s=b()(a.prototype,"postProcessor",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){d()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return U});var o,a,s,u,l,c,h=n(58),f=n.n(h),p=n(9),d=n.n(p),v=n(14),g=n.n(v),m=n(2),y=n.n(m),_=n(3),b=n.n(_),x=n(6),w=n.n(x),S=n(37),E=n.n(S),M=n(4),T=n.n(M),C=n(142),A=n.n(C),P=n(5),k=n.n(P),I=n(13),O=n.n(I),j=n(15),L=(n.n(j),n(10)),D=n(7),R=(n.n(D),n(22)),B=n(106),z=n(89),F=n(76),N=n(131),U=(o=n.i(D.injectable)(),a=n.i(D.inject)(R.a.ILogService),o((u=c=function(t){function e(){var t,r;y()(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return r=w()(this,(t=T()(e)).call.apply(t,[this].concat(a))),g()(r,"logger",l,E()(r)),r.pickingFBO=void 0,r.layer=void 0,r.width=0,r.height=0,r.alreadyInRendering=!1,r.pickFromPickingFBO=function(t){var e=t.x,o=t.y,a=t.lngLat,s=t.type;if(r.layer.isVisible()&&r.layer.needPick(s)){var u=r.rendererService,l=u.getViewportSize,c=u.readPixels,h=u.useFramebuffer,f=l(),p=f.width,d=f.height,v=r.layer.getLayerConfig(),g=v.enableHighlight,m=v.enableSelect,y=e*window.devicePixelRatio,_=o*window.devicePixelRatio;if(!(y>p||y<0||_>d||_<0)){var b;h(r.pickingFBO,function(){var t;if(b=c({x:Math.round(y),y:Math.round(d-(o+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}),0!==b[0]||0!==b[1]||0!==b[2]){r.logger.debug("picked");var u=n.i(L.f)(b),l=r.layer.getSource().getFeatureById(u),h={x:e,y:o,type:s,lngLat:a,featureId:u,feature:l};l&&(r.layer.setCurrentPickId(u),r.triggerHoverOnLayer(h))}else{var f={x:e,y:o,lngLat:a,type:null===r.layer.getCurrentPickId()?"un"+s:"mouseout",featureId:null,feature:null};r.triggerHoverOnLayer(i({},f,{type:"unpick"})),r.triggerHoverOnLayer(f),r.layer.setCurrentPickId(null)}g&&r.highlightPickedFeature(b),m&&"click"===s&&(null===(t=b)||void 0===t?void 0:t.toString())!==[0,0,0,0].toString()&&r.selectFeature(b)})}}},r}return k()(e,t),b()(e,[{key:"getType",value:function(){return F.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(t,n){A()(T()(e.prototype),"init",this).call(this,t,n),this.layer=t;var r=this.rendererService,i=r.createTexture2D,o=r.createFramebuffer,a=r.getViewportSize,s=a(),u=s.width,l=s.height;this.pickingFBO=o({color:i({width:u,height:l,wrapS:z.a.CLAMP_TO_EDGE,wrapT:z.a.CLAMP_TO_EDGE})}),this.interactionService.on(B.a.Hover,this.pickFromPickingFBO),this.interactionService.on(B.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(B.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(t){var e=this;if(!this.alreadyInRendering){var n=this.rendererService,r=n.getViewportSize,i=n.useFramebuffer,o=n.clear,a=r(),s=a.width,u=a.height;this.alreadyInRendering=!0,this.width===s&&this.height===u||(this.pickingFBO.resize({width:s,height:u}),this.width=s,this.height=u),i(this.pickingFBO,function(){o({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n=e.layer.multiPassRenderer.getRenderFlag();e.layer.multiPassRenderer.setRenderFlag(!1),t.hooks.beforePickingEncode.call(),t.render(),t.hooks.afterPickingEncode.call(),e.layer.multiPassRenderer.setRenderFlag(n),e.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(t){this.layer.emit(t.type,t)}},{key:"highlightPickedFeature",value:function(t){var e=f()(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeHighlight.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(t){var e=f()(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeSelect.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(t){var e=t.featureId,r=n.i(L.g)(e);this.selectFeature(new Uint8Array(r))}},{key:"highlightFeatureHandle",value:function(t){var e=t.featureId,r=n.i(L.g)(e);this.highlightPickedFeature(new Uint8Array(r))}}]),e}(N.a),l=O()(u.prototype,"logger",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u))||s)},function(t,e,n){"use strict";n.d(e,"a",function(){return T});var r,i,o,a,s,u,l,c=n(80),h=n.n(c),f=n(79),p=n.n(f),d=n(14),v=n.n(d),g=n(2),m=n.n(g),y=n(3),_=n.n(y),b=n(13),x=n.n(b),w=n(15),S=(n.n(w),n(7)),E=(n.n(S),n(22)),M=n(89),T=(r=n.i(S.injectable)(),i=n.i(S.inject)(E.a.IRendererService),o=n.i(S.postConstruct)(),r((s=l=function(){function t(){m()(this,t),v()(this,"rendererService",u,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0}return _()(t,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){function t(t){return e.apply(this,arguments)}var e=p()(h.a.mark(function t(e){var n,r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<this.passes.length)){t.next=10;break}return r=this.passes[n],r.setRenderToScreen(this.isLastEnabledPass(n)),t.next=6,r.render(e);case 6:n!==this.passes.length-1&&this.swap();case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"resize",value:function(t,e){this.readFBO.resize({width:t,height:e}),this.writeFBO.resize({width:t,height:e})}},{key:"add",value:function(t,e,n){t.init(e,n),this.passes.push(t)}},{key:"insert",value:function(t,e,n,r){t.init(n,r),this.passes.splice(e,0,t)}},{key:"getPostProcessingPassByName",value:function(t){return this.passes.find(function(e){return e.getName()===t})}},{key:"init",value:function(){var t=this.rendererService,e=t.createFramebuffer,n=t.createTexture2D;this.readFBO=e({color:n({width:1,height:1,wrapS:M.a.CLAMP_TO_EDGE,wrapT:M.a.CLAMP_TO_EDGE})}),this.writeFBO=e({color:n({width:1,height:1,wrapS:M.a.CLAMP_TO_EDGE,wrapT:M.a.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].isEnabled())return!1;return!0}},{key:"swap",value:function(){var t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}]),t}(),u=x()(s.prototype,"rendererService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x()(s.prototype,"init",[o],Object.getOwnPropertyDescriptor(s.prototype,"init"),s.prototype),a=s))||a)},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(6),c=n.n(l),h=n(4),f=n.n(h),p=n(142),d=n.n(p),v=n(5),g=n.n(v),m=n(7),y=(n.n(m),n(76)),_=n(131),b=(r=n.i(m.injectable)())(i=function(t){function e(){return a()(this,e),c()(this,f()(e).apply(this,arguments))}return g()(e,t),u()(e,[{key:"getType",value:function(){return y.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(t,n){d()(f()(e.prototype),"init",this).call(this,t,n)}},{key:"render",value:function(t){var e=this.rendererService,n=e.useFramebuffer,r=e.clear,i=t.multiPassRenderer.getPostProcessor().getReadFBO();n(i,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i}),t.multiPassRenderer.setRenderFlag(!1),t.render(),t.multiPassRenderer.setRenderFlag(!0)})}}]),e}(_.a))||i},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){v()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t,e){for(var n=0,r=1/e,i=t;i>0;)n+=r*(i%e),i=Math.floor(i/e),r/=e;return n}n.d(e,"a",function(){return q});var a,s,u,l,c,h,f,p,d=n(9),v=n.n(d),g=n(14),m=n.n(g),y=n(2),_=n.n(y),b=n(3),x=n.n(b),w=n(6),S=n.n(w),E=n(37),M=n.n(E),T=n(4),C=n.n(T),A=n(142),P=n.n(A),k=n(5),I=n.n(k),O=n(13),j=n.n(O),L=n(15),D=(n.n(L),n(7)),R=(n.n(D),n(22)),B=n(89),z=n(76),F=n(131),N="uniform float u_opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);\n}\n",U="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",V="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",G=1,q=(a=n.i(D.injectable)(),s=n.i(D.inject)(R.a.IShaderModuleService),u=n.i(D.inject)(R.a.ILogService),a((c=p=function(t){function e(){var t,n;_()(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=S()(this,(t=C()(e)).call.apply(t,[this].concat(i))),m()(n,"shaderModuleService",h,M()(n)),m()(n,"logger",f,M()(n)),n.haltonSequence=[],n.accumulatingId=0,n.frame=0,n.timer=void 0,n.sampleRenderTarget=void 0,n.prevRenderTarget=void 0,n.outputRenderTarget=void 0,n.copyRenderTarget=void 0,n.blendModel=void 0,n.outputModel=void 0,n.copyModel=void 0,n}return I()(e,t),x()(e,[{key:"getType",value:function(){return z.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(t,n){P()(C()(e.prototype),"init",this).call(this,t,n);var r=this.rendererService,i=r.createFramebuffer,a=r.createTexture2D;this.sampleRenderTarget=i({color:a({width:1,height:1,wrapS:B.a.CLAMP_TO_EDGE,wrapT:B.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=i({color:a({width:1,height:1,wrapS:B.a.CLAMP_TO_EDGE,wrapT:B.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=i({color:a({width:1,height:1,wrapS:B.a.CLAMP_TO_EDGE,wrapT:B.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=i({color:a({width:1,height:1,wrapS:B.a.CLAMP_TO_EDGE,wrapT:B.a.CLAMP_TO_EDGE})});for(var s=0;s<30;s++)this.haltonSequence.push([o(s,2),o(s,3)]);this.blendModel=this.createTriangleModel("blend-pass",N),this.outputModel=this.createTriangleModel("copy-pass",U,{blend:{enable:!0,func:{srcRGB:B.a.ONE,dstRGB:B.a.ONE_MINUS_SRC_ALPHA,srcAlpha:B.a.ONE,dstAlpha:B.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:B.a.FUNC_ADD,alpha:B.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",U)}},{key:"render",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height;this.sampleRenderTarget.resize({width:s,height:u}),this.prevRenderTarget.resize({width:s,height:u}),this.outputRenderTarget.resize({width:s,height:u}),this.copyRenderTarget.resize({width:s,height:u}),this.resetFrame(),this.stopAccumulating();var l=t.multiPassRenderer.getPostProcessor().getReadFBO();o(l,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:l}),t.multiPassRenderer.setRenderFlag(!1),t.render(),t.multiPassRenderer.setRenderFlag(!0)});var c=function n(r){e.accumulatingId&&r===e.accumulatingId&&(e.isFinished()||(e.doRender(t),requestAnimationFrame(function(){n(r)})))};this.accumulatingId=G++,this.timer=window.setTimeout(function(){c(e.accumulatingId)},50)}},{key:"doRender",value:function(t){var e=this;this.logger.debug("accumulatingId: ".concat(this.accumulatingId));var n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height,l=t.getLayerConfig(),c=l.jitterScale,h=void 0===c?1:c,f=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*f[0]-1)/s*h,(2*f[1]-1)/u*h),t.multiPassRenderer.setRenderFlag(!1),t.hooks.beforeRender.call(),o(this.sampleRenderTarget,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:e.sampleRenderTarget}),t.render()}),t.hooks.afterRender.call(),t.multiPassRenderer.setRenderFlag(!0);var p=t.getLayerConfig();o(this.outputRenderTarget,function(){e.blendModel.draw({uniforms:{u_opacity:p.opacity||1,u_MixRatio:0===e.frame?1:.9,u_Diffuse1:e.sampleRenderTarget,u_Diffuse2:0===e.frame?t.multiPassRenderer.getPostProcessor().getReadFBO():e.prevRenderTarget}})}),0===this.frame&&r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(o(this.copyRenderTarget,function(){e.outputModel.draw({uniforms:{u_Texture:e.outputRenderTarget}})}),o(t.multiPassRenderer.getPostProcessor().getReadFBO(),function(){e.copyModel.draw({uniforms:{u_Texture:e.copyRenderTarget}})}),t.multiPassRenderer.getPostProcessor().render(t));var d=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=d,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(t,e,n){this.shaderModuleService.registerModule(t,{vs:V,fs:e});var r=this.shaderModuleService.getModule(t),o=r.vs,a=r.fs,s=r.uniforms,u=this.rendererService,l=u.createAttribute,c=u.createBuffer;return(0,u.createModel)(i({vs:o,fs:a,attributes:{a_Position:l({buffer:c({data:[-4,-4,4,-4,0,4],type:B.a.FLOAT}),size:2})},uniforms:i({},s),depth:{enable:!1},count:3},n))}}]),e}(F.a),h=j()(c.prototype,"shaderModuleService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=j()(c.prototype,"logger",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=c))||l)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return M});var o,a,s=n(9),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(6),d=n.n(p),v=n(4),g=n.n(v),m=n(5),y=n.n(m),_=n(118),b=n.n(_),x=n(7),w=(n.n(x),n(54)),S="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",E="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",M=(o=n.i(x.injectable)())(a=function(t){function e(){return c()(this,e),d()(this,g()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:E,fs:S});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,o=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:i({},r,{u_ViewportSize:[o.width,o.height]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return b()(t.blurRadius)||(e.u_BlurDir=[t.blurRadius,0]),e}}]),e}(w.a))||a},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return M});var o,a,s=n(9),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(6),d=n.n(p),v=n(4),g=n.n(v),m=n(5),y=n.n(m),_=n(118),b=n.n(_),x=n(7),w=(n.n(x),n(54)),S="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",E="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",M=(o=n.i(x.injectable)())(a=function(t){function e(){return c()(this,e),d()(this,g()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:E,fs:S});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,o=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:i({},r,{u_ViewportSize:[o.width,o.height]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return b()(t.blurRadius)||(e.u_BlurDir=[0,t.blurRadius]),e}}]),e}(w.a))||a},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return S});var o,a,s=n(9),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(6),d=n.n(p),v=n(4),g=n.n(v),m=n(5),y=n.n(m),_=n(7),b=(n.n(_),n(54)),x='varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}',w="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",S=(o=n.i(_.injectable)())(a=function(t){function e(){return c()(this,e),d()(this,g()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:w,fs:x});var t=this.shaderModuleService.getModule("colorhalftone-pass"),e=t.vs,n=t.fs,r=t.uniforms,o=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:i({},r,{u_ViewportSize:[o.width,o.height]})}}}]),e}(b.a))||a},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(6),c=n.n(l),h=n(4),f=n.n(h),p=n(5),d=n.n(p),v=n(7),g=(n.n(v),n(54)),m="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",y="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",_=(r=n.i(v.injectable)())(i=function(t){function e(){return a()(this,e),c()(this,f()(e).apply(this,arguments))}return d()(e,t),u()(e,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:y,fs:m}),this.shaderModuleService.getModule("copy-pass")}}]),e}(g.a))||i},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return S});var o,a,s=n(9),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(6),d=n.n(p),v=n(4),g=n.n(v),m=n(5),y=n.n(m),_=n(7),b=(n.n(_),n(54)),x="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",w="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",S=(o=n.i(_.injectable)())(a=function(t){function e(){return c()(this,e),d()(this,g()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:w,fs:x});var t=this.shaderModuleService.getModule("hexagonalpixelate-pass"),e=t.vs,n=t.fs,r=t.uniforms,o=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:i({},r,{u_ViewportSize:[o.width,o.height]})}}}]),e}(b.a))||a},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return S});var o,a,s=n(9),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(6),d=n.n(p),v=n(4),g=n.n(v),m=n(5),y=n.n(m),_=n(7),b=(n.n(_),n(54)),x="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",w="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",S=(o=n.i(_.injectable)())(a=function(t){function e(){return c()(this,e),d()(this,g()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:w,fs:x});var t=this.shaderModuleService.getModule("ink-pass"),e=t.vs,n=t.fs,r=t.uniforms,o=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:i({},r,{u_ViewportSize:[o.width,o.height]})}}}]),e}(b.a))||a},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(6),c=n.n(l),h=n(4),f=n.n(h),p=n(5),d=n.n(p),v=n(7),g=(n.n(v),n(54)),m="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}",y="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",_=(r=n.i(v.injectable)())(i=function(t){function e(){return a()(this,e),c()(this,f()(e).apply(this,arguments))}return d()(e,t),u()(e,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:y,fs:m}),this.shaderModuleService.getModule("noise-pass")}}]),e}(g.a))||i},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(6),c=n.n(l),h=n(4),f=n.n(h),p=n(5),d=n.n(p),v=n(7),g=(n.n(v),n(54)),m="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",y="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}",_=(r=n.i(v.injectable)())(i=function(t){function e(){return a()(this,e),c()(this,f()(e).apply(this,arguments))}return d()(e,t),u()(e,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:m,fs:y}),this.shaderModuleService.getModule("sepia-pass")}}]),e}(g.a))||i},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},function(t,e,n){"use strict";n.d(e,"a",function(){return vt});var r,i,o,a,s,u,l,c,h,f,p,d,v,g,m,y,_,b,x,w,S,E,M,T,C,A,P,k,I,O,j,L,D,R,B,z,F=n(80),N=n.n(F),U=n(79),V=n.n(U),G=n(14),q=n.n(G),H=n(2),Y=n.n(H),X=n(3),W=n.n(X),Z=n(6),K=n.n(Z),J=n(4),Q=n.n(J),$=n(37),tt=n.n($),et=n(5),nt=n.n(et),rt=n(13),it=n.n(rt),ot=n(15),at=(n.n(ot),n(160)),st=n(10),ut=n(1088),lt=n.n(ut),ct=n(49),ht=(n.n(ct),n(7)),ft=(n.n(ht),n(22)),pt=n(748),dt=n(106),vt=(r=n.i(ht.injectable)(),i=n.i(ht.inject)(ft.a.SceneID),o=n.i(ht.inject)(ft.a.IIconService),a=n.i(ht.inject)(ft.a.IFontService),s=n.i(ht.inject)(ft.a.IControlService),u=n.i(ht.inject)(ft.a.ILogService),l=n.i(ht.inject)(ft.a.IGlobalConfigService),c=n.i(ht.inject)(ft.a.IMapService),h=n.i(ht.inject)(ft.a.ICoordinateSystemService),f=n.i(ht.inject)(ft.a.IRendererService),p=n.i(ht.inject)(ft.a.ILayerService),d=n.i(ht.inject)(ft.a.ICameraService),v=n.i(ht.inject)(ft.a.IInteractionService),g=n.i(ht.inject)(ft.a.IPickingService),m=n.i(ht.inject)(ft.a.IShaderModuleService),y=n.i(ht.inject)(ft.a.IMarkerService),_=n.i(ht.inject)(ft.a.IPopupService),r((x=z=function(t){function e(){var t;return Y()(this,e),t=K()(this,Q()(e).call(this)),t.destroyed=!1,q()(t,"id",w,tt()(t)),q()(t,"iconService",S,tt()(t)),q()(t,"fontService",E,tt()(t)),q()(t,"controlService",M,tt()(t)),q()(t,"logger",T,tt()(t)),q()(t,"configService",C,tt()(t)),q()(t,"map",A,tt()(t)),q()(t,"coordinateSystemService",P,tt()(t)),q()(t,"rendererService",k,tt()(t)),q()(t,"layerService",I,tt()(t)),q()(t,"cameraService",O,tt()(t)),q()(t,"interactionService",j,tt()(t)),q()(t,"pickingService",L,tt()(t)),q()(t,"shaderModuleService",D,tt()(t)),q()(t,"markerService",R,tt()(t)),q()(t,"popupService",B,tt()(t)),t.inited=!1,t.initPromise=void 0,t.rendering=!1,t.$container=void 0,t.hooks=void 0,t.handleWindowResized=function(){if(t.emit("resize"),t.$container){var e,n=window.devicePixelRatio,r=window.innerWidth,i=window.innerHeight;if(t.$container!==document.body){var o=t.$container.getBoundingClientRect();r=o.right-o.left,i=o.bottom-o.top}var a=null===(e=t.$container)||void 0===e?void 0:e.getElementsByTagName("canvas")[0];t.rendererService.viewport({x:0,y:0,width:n*r,height:n*i}),st.b.triggerResize(),t.coordinateSystemService.needRefresh=!0,a&&(a.width=r*n,a.height=i*n),t.render()}},t.handleMapCameraChanged=function(e){t.cameraService.update(e),t.render()},t.hooks={init:new at.a},t}return nt()(e,t),W()(e,[{key:"init",value:function(t){var e=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",V()(N.a.mark(function t(){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t){e.map.onCameraChanged(function(n){e.cameraService.init(),e.cameraService.update(n),t()}),e.map.init()});case 2:e.map.onCameraChanged(e.handleMapCameraChanged),e.map.addMarkerContainer(),e.markerService.addMarkers(),e.markerService.addMarkerLayers(),e.popupService.initPopup(),e.interactionService.init(),e.interactionService.on(dt.a.Drag,e.addSceneEvent.bind(e)),e.logger.debug("map ".concat(e.id," loaded"));case 10:case"end":return t.stop()}},t)}))),this.hooks.init.tapPromise("initRenderer",V()(N.a.mark(function t(){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.i(pt.a)(e.configService.getSceneConfig(e.id).id||""),e.$container=r,!r){t.next=9;break}return t.next=5,e.rendererService.init(r,e.configService.getSceneConfig(e.id));case 5:lt()(e.$container,e.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(e.handleWindowResized),t.next=10;break;case 9:e.logger.error(" id ");case 10:e.pickingService.init(e.id),e.logger.debug("scene ".concat(e.id," renderer loaded"));case 12:case"end":return t.stop()}},t)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(t){this.logger.debug("add layer ".concat(t.name," to scene ").concat(this.id)),this.layerService.add(t),this.render()}},{key:"render",value:function(){function t(){return e.apply(this,arguments)}var e=V()(N.a.mark(function t(){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.rendering&&!this.destroyed){t.next=2;break}return t.abrupt("return");case 2:if(this.rendering=!0,this.inited){t.next=12;break}return t.next=6,this.initPromise;case 6:this.destroyed&&this.destroy(),this.logger.info(" render inited"),this.layerService.initLayers(),this.controlService.addControls(),this.emit("loaded"),this.inited=!0;case 12:this.layerService.renderLayers(),this.logger.debug("scene ".concat(this.id," render")),this.rendering=!1;case 15:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(t){var e,n=null===(e=this.$container)||void 0===e?void 0:e.getElementsByTagName("canvas")[0];return this.render(),"jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png")}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"destroy",value:function(){if(!this.inited)return void(this.destroyed=!0);this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,n.i(ut.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}},{key:"addSceneEvent",value:function(t){this.emit(t.type,t)}}]),e}(ct.EventEmitter),w=it()(x.prototype,"id",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=it()(x.prototype,"iconService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=it()(x.prototype,"fontService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=it()(x.prototype,"controlService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=it()(x.prototype,"logger",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=it()(x.prototype,"configService",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=it()(x.prototype,"map",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=it()(x.prototype,"coordinateSystemService",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=it()(x.prototype,"rendererService",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=it()(x.prototype,"layerService",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=it()(x.prototype,"cameraService",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=it()(x.prototype,"interactionService",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=it()(x.prototype,"pickingService",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=it()(x.prototype,"shaderModuleService",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=it()(x.prototype,"markerService",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=it()(x.prototype,"popupService",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=x))||b)},function(t,e){},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){l()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return k});var o,a,s,u=n(9),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(426),v=n.n(d),g=n(7),m=(n.n(g),n(751)),y="#define PI 3.14159265359",_="#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}\n",b="#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(vec3(1, -10.5, 12));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",x="// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance +\n//           light.quadratic * (distance * distance));\n\n//   vec3 ambient = light.ambient * u_Ambient;\n//   vec3 diffuse = light.diffuse * diff * u_Diffuse;\n//   vec3 specular = light.specular * spec * u_Specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_NumOfSpotLights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);\n  // }\n  return weight;\n}\n",w="varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n",S="attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}\n",E="\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n",M="#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\nuniform vec3 u_CameraPosition;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01\n    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01\n// reverse Y\nvec3 reverse_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {\n    return vector * vec3(1.0, -1.0, 1.0);\n  }\n  return vector;\n}\n\nvec4 project_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n  return position;\n\n  // TODO:  & \n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nfloat project_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20  Web zoom 1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  return pixel;\n}\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20  Web zoom 1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  return pixel * -1.;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n     pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n\n\nbool isEqual( float a,  float b) {\n    return  a< b + 0.001 && a > b - 0.001;\n}\n\n",T="/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}\n",C=/precision\s+(high|low|medium)p\s+float/,A="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n",P=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,k=(o=n.i(g.injectable)())(a=s=function(){function t(){h()(this,t),this.moduleCache={},this.rawContentCache={}}return p()(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:y,fs:y}),this.registerModule("decode",{vs:_,fs:""}),this.registerModule("projection",{vs:M,fs:""}),this.registerModule("project",{vs:E,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:T}),this.registerModule("lighting",{vs:x,fs:""}),this.registerModule("light",{vs:b,fs:""}),this.registerModule("picking",{vs:S,fs:w})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var r=e.vs,o=e.fs,a=e.uniforms,s=n.i(m.a)(r),u=s.content,l=s.uniforms,c=n.i(m.a)(o),h=c.content,f=c.uniforms;this.rawContentCache[t]={fs:h,uniforms:i({},l,{},f,{},a),vs:u}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,o=this.processModule(n,[],"vs"),a=o.content,s=o.includeList,u=this.processModule(r,[],"fs"),l=u.content,c=u.includeList,h=l,f=v()(s.concat(c).concat(t)).reduce(function(t,n){return i({},t,{},e.rawContentCache[n].uniforms)},{});return C.test(l)||(h=A+l),this.moduleCache[t]={fs:h.trim(),uniforms:f,vs:a.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(P,function(t,i){var o=i.split(" "),a=o[0].replace(/"/g,"");if(e.indexOf(a)>-1)return"";var s=r.rawContentCache[a][n];return e.push(a),r.processModule(s,e,n).content}),includeList:e}}}]),t}())||a},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i()(this,t),this.autoStart=void 0,this.startTime=0,this.oldTime=0,this.running=!1,this.elapsedTime=0,this.autoStart=e}return a()(t,[{key:"start",value:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}()},function(t,e,n){"use strict";function r(t){var e=t;if("string"==typeof t&&(e=document.getElementById(t)),e){var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",n.id="l7-scene-".concat(i++),n.classList.add("l7-scene"),e.appendChild(n),n}return null}e.a=r;var i=(window.document.documentElement.style,0)},function(t,e,n){"use strict";function r(t){var e=t.latitude,n=void 0===e?0:e,r=t.zoom,s=void 0===r?0:r,u=t.scale,l=t.highPrecision,c=void 0!==l&&l,h=t.flipY,f=void 0!==h&&h;u=void 0!==u?u:Math.pow(2,s);var p={},d=o*u,v=Math.cos(n*i),g=d/360,m=g/v,y=d/a/v;if(p.pixelsPerMeter=[y,-y,y],p.metersPerPixel=[1/y,-1/y,1/y],p.pixelsPerDegree=[g,-m,y],p.degreesPerPixel=[1/g,-1/m,1/y],c){var _=i*Math.tan(n*i)/v,b=g*_/2,x=d/a*_,w=x/m*y;p.pixelsPerDegree2=[0,-b,x],p.pixelsPerMeter2=[w,0,w],f&&(p.pixelsPerDegree2[1]=-p.pixelsPerDegree2[1],p.pixelsPerMeter2[1]=-p.pixelsPerMeter2[1])}return f&&(p.pixelsPerMeter[1]=-p.pixelsPerMeter[1],p.metersPerPixel[1]=-p.metersPerPixel[1],p.pixelsPerDegree[1]=-p.pixelsPerDegree[1],p.degreesPerPixel[1]=-p.degreesPerPixel[1]),p}e.a=r;var i=Math.PI/180,o=512,a=4003e4},function(t,e,n){"use strict";function r(t){return i.indexOf(t)}e.a=r;var i=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"]},function(t,e,n){"use strict";function r(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}function i(t){var e={};return t=t.replace(o,function(t,n,i){var o=i.split(":"),a=o[0].trim(),s="";switch(o.length>1&&(s=o[1].trim()),n){case"bool":s="true"===s;break;case"float":case"int":s=Number(s);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":s=s?s.replace("[","").replace("]","").split(",").reduce(function(t,e){return t.push(Number(e.trim())),t},[]):new Array(r(n)).fill(0)}return e[a]=s,"uniform ".concat(n," ").concat(a,";\n")}),{content:t,uniforms:e}}e.a=i;var o=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g},function(t,e,n){"use strict";var r=n(58),i=(n.n(r),n(1224));n.n(i),n(750)},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(65),d=n(754);!function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.type="PolygonLayer",n}f()(e,t),a()(e,[{key:"buildModels",value:function(){this.layerModel=new d.a(this),this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(t){this.updateLayerConfig({time:t})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}])}(p.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(10),v=n(17),g=n(23),m='uniform float u_opacity: 1.0;\nuniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];\nuniform float u_near : 0;\nuniform float u_far : 1;\nvarying vec4 v_Color;\nvarying vec2 v_texCoord;\nuniform float u_Zoom : 1;\nuniform float u_time;\n\n#pragma include "picking"\n\nvec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {\n    float s = step(hot, n);\n    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);\n\n    return mix(darkColor, color, s);\n}\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n}\n\nfloat LinearizeDepth()\n{\n    float z = gl_FragCoord.z * 2.0 - 1.0;\n    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));\n}\n\nvec3 fog(vec3 color, vec3 fogColor, float depth){\n    float fogFactor=clamp(depth,0.0,1.0);\n    vec3 output_color=mix(fogColor,color,fogFactor);\n    return output_color;\n}\n\nfloat sdRect(vec2 p, vec2 sz) {\n  vec2 d = abs(p) - sz;\n  float outside = length(max(d, 0.));\n  float inside = min(max(d.x, d.y), 0.);\n  return outside + inside;\n}\n\nvoid main() {\n  gl_FragColor = v_Color;\n  vec3 baseColor = u_baseColor.xyz;\n  vec3 brightColor = u_brightColor.xyz;\n  vec3 windowColor = u_windowColor.xyz;\n  float targetColId = 5.;\n  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;\n  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);\n  if(v_texCoord.x < 0.) { //\n       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);\n       gl_FragColor = vec4( foggedColor, v_Color.w);\n  }else { // \n        vec2 st = v_texCoord;\n        vec2  UvScale = v_texCoord;\n        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));\n        float tStart = 0.25 * tStep;\n        float tEnd = 0.75 * tStep;\n        float u = mod(UvScale.x, tStep);\n        float v = mod(UvScale.y, tStep);\n        float ux = floor(UvScale.x/tStep);\n        float uy = floor(UvScale.y/tStep);\n        float n = random(vec2(ux,uy));\n        float lightP = u_time;\n        float head = 1.0- step(0.005,st.y);\n        /*step3*/\n        // \n        float sU = step(tStart, u) - step(tEnd, u);\n        float sV = step(tStart, v) - step(tEnd, v);\n        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));\n        float dist = sdRect(vec2(u,v), windowSize);\n        float s = sU * sV;\n\n        float curColId = floor(UvScale.x / tStep);\n        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);\n\n        float mLightP = mod(lightP, 2.);\n        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);\n        if(ux == targetColId){\n            n =0.;\n        }\n        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );\n        float hot = smoothstep(1.0,0.0,timeP);\n        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);\n        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);\n        float sFinal = s * sCol * sRow;\n        color += mix(baseColor, brightColor, sFinal*n);\n        if (st.y<0.01){\n        color = baseColor;\n         }\n        if(head ==1.0) { // \n            color = brightColor;\n        }\n        color = color * v_Color.rgb;\n\n        vec3 foggedColor = fog(color,fogColor,depth);\n\n        gl_FragColor = vec4(foggedColor,1.0);\n  }\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',y='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n   v_texCoord = a_Uv;\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',_=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,r=void 0===e?1:e,i=t.baseColor,o=void 0===i?"rgb(16,16,16)":i,a=t.brightColor,s=void 0===a?"rgb(255,176,38)":a,u=t.windowColor,l=void 0===u?"rgb(30,60,89)":u,c=t.time,h=void 0===c?0:c;return{u_opacity:r,u_baseColor:n.i(d.o)(o),u_brightColor:n.i(d.o)(s),u_windowColor:n.i(d.o)(l),u_time:this.layer.getLayerAnimateTime()||h}}},{key:"buildModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:y,fragmentShader:m,triangulation:g.e})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?10:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:function(t,e,n,r){t.size;return[n[3],n[4]]}}})}}]),e}(v.a)},function(t,e,n){"use strict";e.a={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}}},function(t,e,n){"use strict";function r(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=2*Math.PI/t,r=[],i=0;i<t;i++)r.push(n*i+e*Math.PI/12);return r.map(function(t){return[Math.sin(t+Math.PI/4),Math.cos(t+Math.PI/4),0]})}function i(){return r(30)}function o(){return r(4)}function a(){return r(3)}function s(){return r(6,1)}function u(){return r(5)}n.d(e,"a",function(){return d});var l,c,h=n(9),f=n.n(h);!function(t){t.CYLINDER="cylinder",t.SQUARECOLUMN="squareColumn",t.TRIANGLECOLUMN="triangleColumn",t.HEXAGONCOLUMN="hexagonColumn",t.PENTAGONCOLUMN="pentagonColumn"}(c||(c={}));var p;!function(t){t.CIRCLE="circle",t.SQUARE="square",t.TRIANGLE="triangle",t.HEXAGON="hexagon",t.PENTAGON="pentagon"}(p||(p={}));var d=(l={},f()(l,p.CIRCLE,i),f()(l,p.HEXAGON,s),f()(l,p.TRIANGLE,a),f()(l,p.SQUARE,o),f()(l,p.PENTAGON,u),f()(l,c.CYLINDER,i),f()(l,c.HEXAGONCOLUMN,s),f()(l,c.TRIANGLECOLUMN,a),f()(l,c.SQUARECOLUMN,o),f()(l,c.PENTAGONCOLUMN,u),l)},function(t,e,n){"use strict";function r(t){var e=t[0][0],n=t[0][t[0].length-1];e[0]===n[0]&&e[1]===n[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var r=t[0].length,i=h.a.flatten(t),o=i.vertices,a=i.dimensions,s=[],l=[],c=0;c<o.length/a;c++)2===a?s.push(o[2*c],o[2*c+1],1):s.push(o[3*c],o[3*c+1],1);var f=h()(i.vertices,i.holes,i.dimensions);l.push.apply(l,u()(f));for(var p=function(t){var e=i.vertices.slice(t*a,(t+1)*a),n=i.vertices.slice((t+1)*a,(t+2)*a);0===n.length&&(n=i.vertices.slice(0,a));var r=s.length/3;s.push(e[0],e[1],1,n[0],n[1],1,e[0],e[1],0,n[0],n[1],0),l.push.apply(l,u()([0,2,1,2,3,1].map(function(t){return t+r})))},d=0;d<r;d++)p(d);return{positions:s,index:l}}function i(t){var e=h.a.flatten(t),n=h()(e.vertices,e.holes,e.dimensions);return{positions:e.vertices,index:n}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0][0],r=t[0][t[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var i=t[0].length,o=h.a.flatten(t),s=o.vertices,l=o.dimensions,c=[],f=[],p=[],d=0;d<s.length/l;d++)2===l?c.push(s[2*d],s[2*d+1],1,-1,-1):c.push(s[3*d],s[3*d+1],1,-1,-1),p.push(0,0,1);var v=h()(o.vertices,o.holes,o.dimensions);f.push.apply(f,u()(v));for(var g=function(t){var n=o.vertices.slice(t*l,(t+1)*l),r=o.vertices.slice((t+1)*l,(t+2)*l);0===r.length&&(r=o.vertices.slice(0,l));var i=c.length/5;c.push(n[0],n[1],1,0,0,r[0],r[1],1,.1,0,n[0],n[1],0,0,.8,r[0],r[1],0,.1,.8);var s=a([r[0],r[1],1],[n[0],n[1],0],[n[0],n[1],1],e);p.push.apply(p,u()(s).concat(u()(s),u()(s),u()(s))),f.push.apply(f,u()([1,2,0,3,2,1].map(function(t){return t+i})))},m=0;m<i;m++)g(m);return{positions:c,index:f,normals:p}}function a(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=f.c.create(),a=f.c.create(),s=f.c.create();i&&(t=n.i(l.m)(t),e=n.i(l.m)(e),r=n.i(l.m)(r));var c=f.c.fromValues.apply(f.c,u()(t)),h=f.c.fromValues.apply(f.c,u()(e)),p=f.c.fromValues.apply(f.c,u()(r));f.c.sub(o,p,h),f.c.sub(a,c,h),f.c.cross(s,o,a);var d=f.c.create();return f.c.normalize(d,s),d}e.c=r,e.b=i,e.a=o;var s=n(48),u=n.n(s),l=n(10),c=n(388),h=n.n(c),f=n(68)},function(t,e){},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(65),d=n(764);!function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.type="HeatMapLayer",n}f()(e,t),a()(e,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new d.a[t](this),this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var t=this;return"heatmap"===this.getModelType()?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(e){return e.draw({uniforms:t.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=this.getLayerConfig(),r=n.shape3d,i=this.getSource(),o=i.data.type,a=(null===e||void 0===e?void 0:null===(t=e.scale)||void 0===t?void 0:t.field)||"heatmap";return"heatmap"===a||"heatmap3d"===a?"heatmap":"hexagon"===o?-1===(null===r||void 0===r?void 0:r.indexOf(a))?"hexagon":"grid3d":"grid"===o?-1===(null===r||void 0===r?void 0:r.indexOf(a))?"grid":"grid3d":"heatmap"}}])}(p.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='precision highp float;\n// \nattribute vec3 a_Position;\n// \nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\n  vec4 project_pos = project_position(vec4(a_Pos.xy + offset, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(project_pos);\n\n  setPickingColor(a_PickingColor);\n}\n',m='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',y=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:g,fragmentShader:m,triangulation:v.i,depth:{enable:!1},primitive:p.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e){var n=t.coordinates;return[n[0],n[1],0]}}})}}]),e}(d.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='precision highp float;\n// \nattribute vec3 a_Position;\n// \nattribute vec3 a_Pos;\n\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n  float lightWeight = calc_lighting(project_pos);\n  v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n\n  gl_Position = project_common_position_to_clipspace(project_pos);\n  setPickingColor(a_PickingColor);\n}\n',m='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',y=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||1,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:g,fragmentShader:m,triangulation:v.b,depth:{enable:!0},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size;return Array.isArray(i)?[i[0]]:[i]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e){var n=t.coordinates;return[n[0],n[1],0]}}})}}]),e}(d.a)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return I});var o=n(48),a=n.n(o),s=n(9),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(6),d=n.n(p),v=n(4),g=n.n(v),m=n(5),y=n.n(m),_=n(8),b=n(10),x=n(68),w=n(17),S=n(23),E=n(765),M="uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n   \n     float intensity = texture2D(u_texture, v_texCoord).r;\n    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));\n    gl_FragColor = color;\n    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;\n     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n\n}\n",T='precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_InverseViewProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrixUncentered;\nvarying float v_intensity;\n\nvec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {\n    float t2 = t * t;\n    float one_minus_t = 1.0 - t;\n    float one_minus_t2 = one_minus_t * one_minus_t;\n    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);\n}\nvec2 toBezier(float t, vec4 p){\n    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));\n}\n#pragma include "projection"\nvoid main() {\n  v_texCoord = a_Uv;\n\n  vec2 pos =(a_Uv * vec2(2.0) - vec2(1.0));\n\n\n  vec4 p1 = vec4(pos, 0.0, 1.0);\n\tvec4 p2 = vec4(pos, 1.0, 1.0);\n\n\tvec4 inverseP1 = u_InverseViewProjectionMatrix * p1;\n\tvec4 inverseP2 = u_InverseViewProjectionMatrix * p2;\n\n  inverseP1 = inverseP1 / inverseP1.w;\n\tinverseP2 = inverseP2 / inverseP2.w;\n\n\tfloat zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z);\n\tvec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);\n\n  vec4 b= vec4(0.5000, 0, 1, 0.5000);\n  float fh;\n\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n  fh = toBezier(v_intensity, b).y;\n  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);\n\n}\n',C="uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n     float intensity = texture2D(u_texture, v_texCoord).r;\n    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));\n    gl_FragColor =color;\n    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n\n}\n",A="precision highp float;\nuniform float u_intensity;\nvarying float v_weight;\nvarying vec2 v_extrude;\n#define GAUSS_COEF  0.3989422804014327\nvoid main(){\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);\n    gl_FragColor = vec4(val, 1., 1., 1.);\n}\n",P='precision highp float;\nattribute vec3 a_Position;\nattribute float a_Size;\nattribute vec2 a_Dir;\nuniform float u_intensity;\nuniform float u_radius;\nvarying vec2 v_extrude;\nvarying float v_weight;\nuniform mat4 u_ModelMatrix;\n\n#define GAUSS_COEF  0.3989422804014327\n\n#pragma include "projection"\n\nvoid main(){\n    v_weight = a_Size;\n    float ZERO = 1.0 / 255.0 / 16.0;\n    float extrude_x = a_Dir.x * 2.0 -1.0;\n    float extrude_y = a_Dir.y * 2.0 -1.0;\n    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));\n    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;\n    v_extrude = extrude_dir * S;\n\n    vec2 offset = project_pixel(v_extrude * u_radius);\n    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n}\n',k="precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\nvoid main() {\n  v_texCoord = a_Uv;\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n  gl_Position = vec4(a_Position.xy, 0, 1.);\n}\n",I=function(t){function e(){var t,n;c()(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=d()(this,(t=g()(e)).call.apply(t,[this].concat(i))),n.texture=void 0,n.colorTexture=void 0,n.heatmapFramerBuffer=void 0,n.intensityModel=void 0,n.colorModel=void 0,n.shapeType=void 0,n}return y()(e,t),f()(e,[{key:"render",value:function(){var t=this,e=this.rendererService,n=e.clear;(0,e.useFramebuffer)(this.heatmapFramerBuffer,function(){n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:t.heatmapFramerBuffer}),t.drawIntensityMode()}),"heatmap"===this.shapeType?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"buildModels",value:function(){var t,e=this.rendererService,r=e.createFramebuffer,i=(e.clear,e.getViewportSize),o=e.createTexture2D,a=(e.useFramebuffer,this.styleAttributeService.getLayerStyleAttribute("shape")),s=(null===a||void 0===a?void 0:null===(t=a.scale)||void 0===t?void 0:t.field)||"heatmap";this.shapeType=s,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel="heatmap"===s?this.buildHeatmapColor():this.build3dHeatMap();var u=this.layer.getLayerConfig(),l=u.rampColors,c=n.i(b.r)(l),h=i(),f=h.width,p=h.height;return this.heatmapFramerBuffer=r({color:o({width:Math.floor(f/4),height:Math.floor(p/4),wrapS:_.gl.CLAMP_TO_EDGE,wrapT:_.gl.CLAMP_TO_EDGE,min:_.gl.LINEAR,mag:_.gl.LINEAR}),depth:!1}),this.colorTexture=o({data:new Uint8Array(c.data),width:c.width,height:c.height,wrapS:_.gl.CLAMP_TO_EDGE,wrapT:_.gl.CLAMP_TO_EDGE,min:_.gl.NEAREST,mag:_.gl.NEAREST,flipY:!1}),[this.intensityModel,this.colorModel]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:_.AttributeType.Attribute,descriptor:{name:"a_Dir",buffer:{usage:_.gl.DYNAMIC_DRAW,data:[],type:_.gl.FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:_.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:_.gl.DYNAMIC_DRAW,data:[],type:_.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size;return[void 0===i?1:i]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:P,fragmentShader:A,triangulation:S.j,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:_.gl.ONE,srcAlpha:1,dstRGB:_.gl.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:k,fs:C});var t=this.shaderModuleService.getModule("heatmapColor"),e=t.vs,n=t.fs,r=t.uniforms,o=this.rendererService,a=o.createAttribute,s=o.createElements,u=o.createBuffer;return(0,o.createModel)({vs:e,fs:n,attributes:{a_Position:a({buffer:u({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:_.gl.FLOAT}),size:3}),a_Uv:a({buffer:u({data:[0,1,1,1,0,0,1,0],type:_.gl.FLOAT}),size:2})},uniforms:i({},r),depth:{enable:!1},blend:this.getBlend(),count:6,elements:s({data:[0,2,1,2,3,1],type:_.gl.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.intensity,r=void 0===n?10:n,i=t.radius,o=void 0===i?5:i;this.intensityModel.draw({uniforms:{u_opacity:e||1,u_radius:o,u_intensity:r}})}},{key:"drawColorMode",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity;this.colorModel.draw({uniforms:{u_opacity:e||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=x.a.invert(x.a.create(),x.a.fromValues.apply(x.a,a()(this.cameraService.getViewProjectionMatrixUncentered())));this.colorModel.draw({uniforms:{u_opacity:e||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:a()(n)}})}},{key:"build3dHeatMap",value:function(){var t=this.rendererService.getViewportSize,e=t(),r=e.width,o=e.height,a=n.i(E.a)(r/4,o/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:T,fs:M});var s=this.shaderModuleService.getModule("heatmap3dColor"),u=s.vs,l=s.fs,c=s.uniforms,h=this.rendererService,f=h.createAttribute,p=h.createElements,d=h.createBuffer;return(0,h.createModel)({vs:u,fs:l,attributes:{a_Position:f({buffer:d({data:a.vertices,type:_.gl.FLOAT}),size:3}),a_Uv:f({buffer:d({data:a.uvs,type:_.gl.FLOAT}),size:2})},primitive:_.gl.TRIANGLES,uniforms:i({},c),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:_.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:p({data:a.indices,type:_.gl.UNSIGNED_INT,count:a.indices.length})})}}]),e}(w.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',m='precision highp float;\n// \nattribute vec3 a_Position;\n// \nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n    \n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  setPickingColor(a_PickingColor);\n}\n',y=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:m,fragmentShader:g,triangulation:v.i,depth:{enable:!1},primitive:p.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e){var n=t.coordinates;return[n[0],n[1],0]}}})}}]),e}(d.a)},function(t,e,n){"use strict";var r=n(760),i=n(761),o=n(762),a=n(763),s={heatmap:o.a,heatmap3d:o.a,grid:r.a,grid3d:i.a,hexagon:a.a};e.a=s},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=[],i=[],o=t+1,a=e+1,s=t/2,u=e/2,l=0;l<a;l++)for(var c=l-u,h=0;h<o;h++){var f=h-s;r.push(f/s,-c/u,0),i.push(h/t),i.push(1-l/e)}for(var p=0;p<e;p++)for(var d=0;d<t;d++){var v=d+o*p,g=d+o*(p+1),m=d+1+o*(p+1),y=d+1+o*p;n.push(v,g,y),n.push(g,m,y)}return{vertices:r,indices:n,uvs:i}}e.a=r},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(65),d=n(768);!function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.type="ImageLayer",n}f()(e,t),a()(e,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new d.a[t](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{image:{}}[this.getModelType()]}},{key:"getModelType",value:function(){return"image"}}])}(p.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n}\n",m='precision highp float;\nuniform mat4 u_ModelMatrix;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n}\n',y=function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.texture=void 0,n}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1,u_texture:this.texture}}},{key:"buildModels",value:function(){var t=this,e=this.layer.getSource(),n=this.rendererService.createTexture2D;return this.texture=n({height:0,width:0}),e.data.images.then(function(e){t.texture=n({data:e[0],width:e[0].width,height:e[0].height}),t.layerService.renderLayers()}),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:m,fragmentShader:g,triangulation:v.d,primitive:p.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}})}}]),e}(d.a)},function(t,e,n){"use strict";var r=n(767),i={image:r.a};e.a=i},function(t,e,n){"use strict";var r=n(8),i=(n(753),n(65),n(758)),o=(n.n(i),n(759),n(766),n(770),n(787)),a=(n(790),n(794),n(775)),s=n(776),u=n(777),l=n(778),c=n(779),h=n(780),f=n(781),p=n(298),d=n(782),v=n(783),g=n(784),m=n(785),y=n(786);n.d(e,"a",function(){return o.a}),r.container.bind(r.TYPES.ILayerPlugin).to(s.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(v.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(u.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(a.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(h.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(y.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(m.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(p.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(g.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(l.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(f.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(d.a).inRequestScope(),r.container.bind(r.TYPES.ILayerPlugin).to(c.a).inRequestScope()},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(65),d=n(774);!function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.type="LineLayer",n}f()(e,t),a()(e,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new d.a[t](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}}[this.getModelType()]}},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape");return(null===e||void 0===e?void 0:null===(t=e.scale)||void 0===t?void 0:t.field)||"line"}}])}(p.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec2 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= u_opacity * blur;\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *= blur  * (1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',m='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\nvarying vec2 v_dash_array;\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  return mid;\n}\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\nvec2 interpolate (vec2 source, vec2 target, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * a_Size / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n  vec2 source = a_Instance.rg;\n  vec2 target =  a_Instance.ba;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  if(u_line_type == LineTypeDash) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n      float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n    }\n  if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  setPickingColor(a_PickingColor);\n}\n',y={solid:0,dash:1},_=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.lineType,r=void 0===n?"solid":n,i=t.dashArray,o=void 0===i?[10,5]:i;return{u_opacity:e||1,segmentNumber:30,u_line_type:y[r||"solid"],u_dash_array:o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:m,fragmentShader:g,triangulation:v.h,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:function(t,e,n,r){return[n[3],n[4],n[5],n[6]]}}})}}]),e}(d.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform mat4 u_ModelMatrix;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\n\nvarying vec2 v_dash_array;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n   if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  setPickingColor(a_PickingColor);\n}\n',m='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec2 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= u_opacity * blur;\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *= blur  * (1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',y={solid:0,dash:1},_=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.lineType,r=void 0===n?"solid":n,i=t.dashArray,o=void 0===i?[10,5]:i;return{u_opacity:e||1,segmentNumber:30,u_line_type:y[r]||0,u_dash_array:o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:g,fragmentShader:m,triangulation:v.h,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:function(t,e,n,r){return[n[3],n[4],n[5],n[6]]}}})}}]),e}(d.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec2 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= u_opacity * blur;\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *= blur  * (1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',m='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\nvarying vec2 v_dash_array;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n    vec2 x = mix(source, target, ratio);\n    vec2 center = mix(source, target, 0.5);\n    float dSourceCenter = distance(source, center);\n    float dXCenter = distance(x, center);\n    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n     float vertex_height = paraboloid(source, target, segmentRatio);\n\n    return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n    );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 delta = source - target;\n  vec2 sin_half_delta = sin(delta / 2.0);\n  float a =\n    sin_half_delta.y * sin_half_delta.y +\n    cos(source.y) * cos(target.y) *\n    sin_half_delta.x * sin_half_delta.x;\n  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));\n}\nvec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  if(abs(angularDist - PI) < 0.001) {\n    return (1.0 - t) * source + t * target;\n  }\n  float a = sin((1.0 - t) * angularDist) / sin(angularDist);\n  float b = sin(t * angularDist) / sin(angularDist);\n  vec2 sin_source = sin(source);\n  vec2 cos_source = cos(source);\n  vec2 sin_target = sin(target);\n  vec2 cos_target = cos(target);\n  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;\n  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;\n  float z = a * sin_source.y + b * sin_target.y;\n  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));\n}\n\nvoid main() {\n  v_color = a_Color;\n  vec2 source = radians(a_Instance.rg);\n  vec2 target = radians(a_Instance.ba);\n  float angularDist = getAngularDist(source, target);\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n  if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  v_distance_ratio = segmentIndex / segmentNumber;\n  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));\n  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n  setPickingColor(a_PickingColor);\n}\n\n',y={solid:0,dash:1},_=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.lineType,r=void 0===n?"solid":n,i=t.dashArray,o=void 0===i?[10,5]:i;return{u_opacity:e||1,segmentNumber:30,u_line_type:y[r]||0,u_dash_array:o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:m,fragmentShader:g,triangulation:v.h,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:function(t,e,n,r){return[n[3],n[4],n[5],n[6]]}}})}}]),e}(d.a)},function(t,e,n){"use strict";var r=n(771),i=n(772),o=n(773),a=n(297),s={arc:r.a,arc3d:i.a,greatcircle:o.a,line:a.a};e.a=s},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){d()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return C});var o,a,s,u,l,c,h,f,p=n(9),d=n.n(p),v=n(14),g=n.n(v),m=n(2),y=n.n(m),_=n(3),b=n.n(_),x=n(13),w=n.n(x),S=n(15),E=(n.n(S),n(8)),M=n(10),T=n(7),C=(n.n(T),o=n.i(T.injectable)(),a=n.i(T.inject)(E.TYPES.IGlobalConfigService),s=n.i(T.inject)(E.TYPES.ILogService),o((l=f=function(){function t(){y()(this,t),g()(this,"configService",c,this),g()(this,"logger",h,this)}return b()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("DataMappingPlugin",function(){n.generateMaping(t,{styleAttributeService:r})}),t.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return t.dataState.dataMappingNeedUpdate=!1,n.generateMaping(t,{styleAttributeService:r}),!0}),t.hooks.beforeRender.tap("DataMappingPlugin",function(){var e=r.getLayerStyleAttributes()||[],i=r.getLayerStyleAttribute("filter"),o=t.getSource().data.dataArray,a=e.filter(function(t){return t.needRemapping}),s=o;(null===i||void 0===i?void 0:i.needRemapping)&&(null===i||void 0===i?void 0:i.scale)&&(s=o.filter(function(t){return n.applyAttributeMapping(i,t)[0]})),a.length&&((null===i||void 0===i?void 0:i.needRemapping)?(t.setEncodedData(n.mapping(e,s)),i.needRemapping=!1):t.setEncodedData(n.mapping(a,s,t.getEncodedData())),n.logger.debug("remapping finished"),t.emit("remapping",null))})}},{key:"generateMaping",value:function(t,e){var n=this,r=e.styleAttributeService,i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=t.getSource().data.dataArray,s=a;(null===o||void 0===o?void 0:o.scale)&&(s=a.filter(function(t){return n.applyAttributeMapping(o,t)[0]})),t.setEncodedData(this.mapping(i,s))}},{key:"mapping",value:function(t,e,r){var o=this;return e.map(function(e,a){var s=r?r[a]:{},u=i({id:e._id,coordinates:e.coordinates},s);return t.filter(function(t){return void 0!==t.scale}).forEach(function(t){var r=o.applyAttributeMapping(t,e);t.needRemapping=!1,"color"===t.name&&(r=r.map(function(t){return n.i(M.o)(t)})),u[t.name]=Array.isArray(r)&&1===r.length?r[0]:r}),u})}},{key:"applyAttributeMapping",value:function(t,e){var n;if(!t.scale)return[];var r=(null===t||void 0===t?void 0:null===(n=t.scale)||void 0===n?void 0:n.scalers)||[],i=[];return r.forEach(function(n){var r,o=n.field;(e.hasOwnProperty(o)||"variable"===(null===(r=t.scale)||void 0===r?void 0:r.type))&&i.push(e[o])}),t.mapping?t.mapping(i):[]}}]),t}(),c=w()(l.prototype,"configService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=w()(l.prototype,"logger",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=l))||u)},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r,i,o,a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(8),h=n(308),f=n(7),p=(n.n(f),(r=n.i(f.injectable)())(i=o=function(){function t(){s()(this,t),this.mapService=void 0}return l()(t,[{key:"apply",value:function(t){var e=this;this.mapService=t.getContainer().get(c.TYPES.IMapService),t.hooks.init.tap("DataSourcePlugin",function(){var n=t.sourceOption,r=n.data,i=n.options;t.setSource(new h.default(r,i)),e.updateClusterData(t)}),t.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var n=e.updateClusterData(t),r=t.dataState.dataSourceNeedUpdate;return t.dataState.dataSourceNeedUpdate=!1,n||r})}},{key:"updateClusterData",value:function(t){var e=t.getSource(),n=e.cluster,r=e.clusterOptions,i=r.zoom,o=void 0===i?0:i,a=r.maxZoom,s=void 0===a?16:a,u=this.mapService.getZoom()-1;return!!(n&&Math.abs(o-u)>1&&s>o)&&(e.updateClusterData(Math.floor(u)),!0)}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return D});var r,i,o,a,s,u,l,c,h,f=n(14),p=n.n(f),d=n(2),v=n.n(d),g=n(3),m=n.n(g),y=n(13),_=n.n(y),b=n(15),x=(n.n(b),n(9)),w=n.n(x),S=n(426),E=n.n(S),M=n(422),T=n.n(M),C=n(118),A=n.n(C),P=n(8),k=n(44),I=n(1063),O=n(7),j=(n.n(O),/^(?:(?!0000)[0-9]{4}([-\/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-\/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/),L=(r={},w()(r,P.ScaleTypes.LINEAR,I.a),w()(r,P.ScaleTypes.POWER,I.b),w()(r,P.ScaleTypes.LOG,I.c),w()(r,P.ScaleTypes.IDENTITY,I.d),w()(r,P.ScaleTypes.TIME,I.e),w()(r,P.ScaleTypes.QUANTILE,I.f),w()(r,P.ScaleTypes.QUANTIZE,I.g),w()(r,P.ScaleTypes.THRESHOLD,I.h),w()(r,P.ScaleTypes.CAT,I.i),r),D=(i=n.i(O.injectable)(),o=n.i(O.inject)(P.TYPES.IGlobalConfigService),a=n.i(O.inject)(P.TYPES.ILogService),i((u=h=function(){function t(){v()(this,t),p()(this,"configService",l,this),p()(this,"logger",c,this),this.scaleCache={},this.scaleOptions={}}return m()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("FeatureScalePlugin",function(){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes(),i=t.getSource().data.dataArray;n.caculateScalesForAttributes(e||[],i)}),t.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes(),i=t.getSource().data.dataArray;return n.caculateScalesForAttributes(e||[],i),!0}),t.hooks.beforeRender.tap("FeatureScalePlugin",function(){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes();if(e){var i=t.getSource().data.dataArray,o=e.filter(function(t){return t.needRescale});o.length&&(n.caculateScalesForAttributes(o,i),n.logger.debug("rescale finished"))}})}},{key:"isNumber",value:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{key:"caculateScalesForAttributes",value:function(t,e){var n=this;this.scaleCache={},t.forEach(function(t){if(t.scale){var r=t.scale,i=t.name;r.names=n.parseFields(t.scale.field||[]);var o=[];r.names.forEach(function(r){o.push(n.getOrCreateScale(r,t,e))}),o.some(function(t){return t.type===P.StyleScaleType.VARIABLE})?(r.type=P.StyleScaleType.VARIABLE,o.forEach(function(t){if(!r.callback){var e;if(r.values&&"text"!==r.values){var n;if("linear"===(null===(n=t.option)||void 0===n?void 0:n.type)&&r.values.length>2){var o=t.scale.ticks(r.values.length);"color"===i&&t.scale.domain(o)}t.scale.range(r.values)}else"cat"===(null===(e=t.option)||void 0===e?void 0:e.type)&&t.scale.range(t.option.domain)}})):(r.type=P.StyleScaleType.CONSTANT,r.values=o.map(function(t,e){return t.scale(r.names[e])})),r.scalers=o.map(function(t){return{field:t.field,func:t.scale,option:t.option}}),t.needRescale=!1}})}},{key:"getOrCreateScale",value:function(t,e,n){var r,i=([t,e.name].join("_"),null===(r=e.scale)||void 0===r?void 0:r.values);return this.createScale(t,e.name,i,n)}},{key:"parseFields",value:function(t){return Array.isArray(t)?t:T()(t)?t.split("*"):[t]}},{key:"createScale",value:function(t,e,n,r){var i,o=this.scaleOptions[e]&&this.scaleOptions[e].field===t?this.scaleOptions[e]:this.scaleOptions[t],a={field:t,scale:void 0,type:P.StyleScaleType.VARIABLE,option:o};if(!r||!r.length)return o&&o.type?a.scale=this.createDefaultScale(o):(a.scale=I.i([t]),a.type=P.StyleScaleType.CONSTANT),a;var s=null===(i=r.find(function(e){return!A()(e[t])}))||void 0===i?void 0:i[t];if(this.isNumber(t)||A()(s)&&!o)a.scale=I.i([t]),a.type=P.StyleScaleType.CONSTANT;else{var u=o&&o.type||this.getDefaultType(s);"text"===n&&(u=P.ScaleTypes.CAT);var l=this.createDefaultScaleConfig(u,t,r);Object.assign(l,o),a.scale=this.createDefaultScale(l),a.option=l}return a}},{key:"getDefaultType",value:function(t){var e=P.ScaleTypes.LINEAR;return"string"==typeof t&&(e=j.test(t)?P.ScaleTypes.TIME:P.ScaleTypes.CAT),e}},{key:"createDefaultScaleConfig",value:function(t,e,r){var i={type:t},o=(null===r||void 0===r?void 0:r.map(function(t){return t[e]}))||[];return t!==P.ScaleTypes.CAT&&t!==P.ScaleTypes.QUANTILE?i.domain=n.i(k.a)(o):t===P.ScaleTypes.CAT?i.domain=E()(o):t===P.ScaleTypes.QUANTILE&&(i.domain=o),i}},{key:"createDefaultScale",value:function(t){var e=t.type,n=t.domain,r=L[e]();return n&&r.domain(n),r}}]),t}(),l=_()(u.prototype,"configService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=_()(u.prototype,"logger",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u))||s)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){d()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return T});var o,a,s,u,l,c,h,f,p=n(9),d=n.n(p),v=n(14),g=n.n(v),m=n(2),y=n.n(m),_=n(3),b=n.n(_),x=n(13),w=n.n(x),S=n(15),E=(n.n(S),n(8)),M=n(7),T=(n.n(M),o=n.i(M.injectable)(),a=n.i(M.inject)(E.TYPES.ICameraService),s=n.i(M.inject)(E.TYPES.IRendererService),o((l=f=function(){function t(){y()(this,t),g()(this,"cameraService",c,this),g()(this,"rendererService",h,this)}return b()(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){t.models.forEach(function(e){e.addUniforms(i({},t.layerModel.getAnimateUniforms()))})})}}]),t}(),c=w()(l.prototype,"cameraService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=w()(l.prototype,"rendererService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=l))||u)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(7),c=(n.n(l),(r=n.i(l.injectable)())(i=function(){function t(){a()(this,t)}return u()(t,[{key:"apply",value:function(t){t.hooks.init.tap("LayerModelPlugin",function(){t.prepareBuildModel(),t.buildModels()}),t.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return t.prepareBuildModel(),t.buildModels(),t.layerModelNeedUpdate=!1,!1})}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(7),c=(n.n(l),(r=n.i(l.injectable)())(i=function(){function t(){a()(this,t)}return u()(t,[{key:"apply",value:function(t){t.hooks.afterInit.tap("LayerStylePlugin",function(){t.updateLayerConfig({});var e=t.getLayerConfig(),n=e.autoFit,r=e.fitBoundsOptions;n&&setTimeout(function(){t.fitBounds(r)},100)})}}]),t}())||i)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){v()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t){var e={u_DirectionalLights:new Array(3).fill(i({},_)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(i({},b)),u_NumOfSpotLights:0};return t&&t.length||(t=[y]),t.forEach(function(t,n){var r=t.type,o=void 0===r?"directional":r,a=p()(t,["type"]),s=m[o].lights,u=m[o].num,l=e[u];e[s][l]=i({},e[s][l],{},a),e[u]++}),e}n.d(e,"a",function(){return x});var a,s,u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(112),p=n.n(f),d=n(9),v=n.n(d),g=n(7),m=(n.n(g),{directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}}),y={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},_={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},b={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},x=(a=n.i(g.injectable)())(s=function(){function t(){l()(this,t)}return h()(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LightingPlugin",function(){t.getLayerConfig().enableLighting&&t.models.forEach(function(t){return t.addUniforms(i({},o()))})})}}]),t}())||s},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(8),c=n(10),h=n(7),f=(n.n(h),{NONE:0,ENCODE:1,HIGHLIGHT:2}),p=(r=n.i(h.injectable)())(i=function(){function t(){a()(this,t)}return u()(t,[{key:"apply",value:function(t,e){var r=(e.rendererService,e.styleAttributeService);t.hooks.init.tap("PixelPickingPlugin",function(){var e=t.getLayerConfig(),i=e.enablePicking;r.registerStyleAttribute({name:"pickingColor",type:l.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:l.gl.FLOAT},size:3,update:function(t,e){var r=t.id;return i?n.i(c.g)(r):[0,0,0]}}})}),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){t.getLayerConfig().enablePicking&&t.isVisible()&&t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.ENCODE})})}),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){t.getLayerConfig().enablePicking&&t.isVisible()&&t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.HIGHLIGHT})})}),t.hooks.beforeHighlight.tap("PixelPickingPlugin",function(e){var r=t.getLayerConfig(),i=r.highlightColor,o="string"==typeof i?n.i(c.o)(i):i||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:n.i(c.f)(new Uint8Array(e))}),t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:o.map(function(t){return 255*t})})})}),t.hooks.beforeSelect.tap("PixelPickingPlugin",function(e){var r=t.getLayerConfig(),i=r.selectColor,o="string"==typeof i?n.i(c.o)(i):i||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:n.i(c.f)(new Uint8Array(e))}),t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:o.map(function(t){return 255*t})})})})}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,i,o,a,s,u,l=n(14),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(13),g=n.n(v),m=n(15),y=(n.n(m),n(8)),_=n(7),b=(n.n(_),r=n.i(_.injectable)(),i=n.i(_.inject)(y.TYPES.ILogService),r((a=u=function(){function t(){f()(this,t),c()(this,"logger",s,this)}return d()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("RegisterStyleAttributePlugin",function(){n.registerBuiltinAttributes(r)})}},{key:"registerBuiltinAttributes",value:function(t){t.registerStyleAttribute({name:"position",type:y.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:y.gl.FLOAT},size:3,update:function(t,e,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}}}),t.registerStyleAttribute({name:"filter",type:y.AttributeType.Attribute,descriptor:{name:"filter",buffer:{usage:y.gl.DYNAMIC_DRAW,data:[],type:y.gl.FLOAT},size:1,update:function(t,e){return t.filter?[1]:[0]}}}),t.registerStyleAttribute({name:"color",type:y.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:y.gl.DYNAMIC_DRAW,data:[],type:y.gl.FLOAT},size:4,update:function(t,e){var n=t.color;return n&&n.length?n:[1,1,1,1]}}})}}]),t}(),s=g()(a.prototype,"logger",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)},function(t,e,n){"use strict";n.d(e,"a",function(){return T});var r,i,o,a,s,u,l,c,h,f,p=n(9),d=n.n(p),v=n(14),g=n.n(v),m=n(2),y=n.n(m),_=n(3),b=n.n(_),x=n(13),w=n.n(x),S=n(15),E=(n.n(S),n(8)),M=n(7),T=(n.n(M),r=n.i(M.injectable)(),i=n.i(M.inject)(E.TYPES.ICameraService),o=n.i(M.inject)(E.TYPES.ICoordinateSystemService),a=n.i(M.inject)(E.TYPES.IRendererService),r((u=f=function(){function t(){y()(this,t),g()(this,"cameraService",l,this),g()(this,"coordinateSystemService",c,this),g()(this,"rendererService",h,this)}return b()(t,[{key:"apply",value:function(t){var e=this;t.hooks.beforeRender.tap("ShaderUniformPlugin",function(){e.coordinateSystemService.refresh();var n=e.rendererService.getViewportSize(),r=n.width,i=n.height;t.models.forEach(function(n){var o;return n.addUniforms((o={},d()(o,E.CameraUniform.ProjectionMatrix,e.cameraService.getProjectionMatrix()),d()(o,E.CameraUniform.ViewMatrix,e.cameraService.getViewMatrix()),d()(o,E.CameraUniform.ViewProjectionMatrix,e.cameraService.getViewProjectionMatrix()),d()(o,E.CameraUniform.Zoom,e.cameraService.getZoom()),d()(o,E.CameraUniform.ZoomScale,e.cameraService.getZoomScale()),d()(o,E.CameraUniform.FocalDistance,e.cameraService.getFocalDistance()),d()(o,E.CameraUniform.CameraPosition,e.cameraService.getCameraPosition()),d()(o,E.CoordinateUniform.CoordinateSystem,e.coordinateSystemService.getCoordinateSystem()),d()(o,E.CoordinateUniform.ViewportCenter,e.coordinateSystemService.getViewportCenter()),d()(o,E.CoordinateUniform.ViewportCenterProjection,e.coordinateSystemService.getViewportCenterProjection()),d()(o,E.CoordinateUniform.PixelsPerDegree,e.coordinateSystemService.getPixelsPerDegree()),d()(o,E.CoordinateUniform.PixelsPerDegree2,e.coordinateSystemService.getPixelsPerDegree2()),d()(o,E.CoordinateUniform.PixelsPerMeter,e.coordinateSystemService.getPixelsPerMeter()),d()(o,"u_ViewportSize",[r,i]),d()(o,"u_DevicePixelRatio",window.devicePixelRatio),d()(o,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d()(o,"u_PickingBuffer",t.getLayerConfig().pickingBuffer||0),o))})})}}]),t}(),l=w()(u.prototype,"cameraService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=w()(u.prototype,"coordinateSystemService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=w()(u.prototype,"rendererService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u))||s)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(7),c=(n.n(l),(r=n.i(l.injectable)())(i=function(){function t(){a()(this,t)}return u()(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("UpdateModelPlugin",function(){t.layerModel&&t.layerModel.needUpdate()})}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,i,o,a,s,u,l=n(14),c=n.n(l),h=n(2),f=n.n(h),p=n(3),d=n.n(p),v=n(13),g=n.n(v),m=n(15),y=(n.n(m),n(8)),_=n(7),b=(n.n(_),r=n.i(_.injectable)(),i=n.i(_.inject)(y.TYPES.ILogService),r((a=u=function(){function t(){f()(this,t),c()(this,"logger",s,this)}return d()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("UpdateStyleAttributePlugin",function(){n.initStyleAttribute(t,{styleAttributeService:r})}),t.hooks.beforeRenderData.tap("styleAttributeService",function(){return t.layerModelNeedUpdate=!0,!0}),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){t.layerModelNeedUpdate||n.updateStyleAtrribute(t,{styleAttributeService:r})})}},{key:"updateStyleAtrribute",value:function(t,e){var n=this,r=e.styleAttributeService,i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=r.getLayerStyleAttribute("shape");if(o&&o.needRegenerateVertices||a&&a.needRegenerateVertices)return t.layerModelNeedUpdate=!0,void i.forEach(function(t){return t.needRegenerateVertices=!1});i.filter(function(t){return t.needRegenerateVertices}).forEach(function(e){r.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex),e.needRegenerateVertices=!1,n.logger.debug("regenerate vertex attributes: ".concat(e.name," finished"))})}},{key:"initStyleAttribute",value:function(t,e){var n=this,r=e.styleAttributeService;(r.getLayerStyleAttributes()||[]).filter(function(t){return t.needRegenerateVertices}).forEach(function(e){r.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex),e.needRegenerateVertices=!1,n.logger.debug("init vertex attributes: ".concat(e.name," finished"))})}}]),t}(),s=g()(a.prototype,"logger",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(65),d=n(789),v=function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.type="PointLayer",n}return f()(e,t),a()(e,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new d.a[t](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{normal:{blend:"additive"},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}}[this.getModelType()]}},{key:"getModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find(function(t){return t.hasOwnProperty("shape")});if(o){var a=o.shape;return"dot"===a?"normal":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"extrude":i.hasOwnProperty(a)?"image":""!==this.fontService.getGlyph(a)?"icon":"text"}return"normal"}}]),e}(p.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_stroke_width : 1;\nuniform vec4 u_stroke_color : [1, 1, 1, 1];\nuniform float u_stroke_opacity : 1;\nuniform float u_opacity : 1;\n\nvarying float v_size;\n#pragma include "picking"\nvoid main(){\nvec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\nvec2 fragmentPosition = 2.0*gl_PointCoord - 1.0;\nfloat distance = length(fragmentPosition);\nfloat distanceSqrd = distance * distance;\nfloat radius = 1.;\nfloat r = 1.0 - smoothstep(radius-(radius*0.01),\n                         radius+(radius*0.01),\n                         distanceSqrd);\n  vec4 textureColor=texture2D(u_texture,pos);\n  if(v_color == vec4(1.0)){\n        gl_FragColor= vec4(textureColor.xyz, textureColor.w);\n  }else {\n        gl_FragColor= step(0.01, textureColor.z) * v_color;\n  }\n  gl_FragColor.a =gl_FragColor.a * u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',m='precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform float u_stroke_width : 1;\nvarying float v_size;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n   v_color = a_Color;\n   v_uv = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   v_size = a_Size;\n\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n\n  setPickingColor(a_PickingColor);\n\n}\n',y=function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.texture=void 0,n}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"buildModels",value:function(){var t=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){t.updateTexture(),t.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:m,fragmentShader:g,triangulation:v.a,primitive:p.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size;return Array.isArray(i)?[i[0]]:[i]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:function(e,n,r,i){var o=t.fontService.mapping,a=e.shape,s=t.fontService.getGlyph(a),u=o[s];return[u.x,u.y]}}})}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.fontService.canvas;this.texture=t({data:e,mag:p.gl.LINEAR,min:p.gl.LINEAR,width:e.width,height:e.height})}},{key:"initIconFontGlyphs",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.fontWeight,r=void 0===n?"normal":n,i=e.fontFamily,o=void 0===i?"sans-serif":i,a=this.layer.getEncodedData(),s=[];a.forEach(function(e){var n=e.shape,r=void 0===n?"":n;r=r.toString();var i=t.fontService.getGlyph(r);-1===s.indexOf(i)&&s.push(i)}),this.fontService.setFontOptions({characterSet:s,fontWeight:r,fontFamily:o,fontSize:48})}}]),e}(d.a)},function(t,e,n){"use strict";var r=n(299),i=n(300),o=n(788),a=n(301),s=n(302),u=n(303),l={fill:i.a,image:a.a,normal:s.a,extrude:r.a,text:u.a,icon:o.a};e.a=l},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(65),d=n(793);!function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.type="PolygonLayer",n}f()(e,t),a()(e,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new d.a[t](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===e||void 0===e?void 0:null===(t=e.scale)||void 0===t?void 0:t.field;return"fill"===n?"fill":"extrude"===n?"extrude":"line"===n?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find(function(t){return t.hasOwnProperty("shape")});if(o){var a=o.shape;return"dot"===a?"point_normal":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"point_fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"point_extrude":i.hasOwnProperty(a)?"point_image":"text"}return"fill"}}])}(p.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(17),v=n(23),g='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',m='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',y=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity;return{u_opacity:void 0===e?1:e}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:m,fragmentShader:g,triangulation:v.e})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?10:i;return Array.isArray(o)?[o[0]]:[o]}}})}}]),e}(d.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(17),d=n(23),v='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',g='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n\n',m=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity;return{u_opacity:void 0===e?1:e}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:g,fragmentShader:v,triangulation:d.g,depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){}}]),e}(p.a)},function(t,e,n){"use strict";var r=n(297),i=n(299),o=n(300),a=n(301),s=n(302),u=n(303),l=n(791),c=n(792),h={fill:c.a,line:r.a,extrude:l.a,text:u.a,point_fill:o.a,point_image:a.a,point_normal:s.a,point_extrude:i.a};e.a=h},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(65),d=n(795);!function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.type="RasterLayer",n}f()(e,t),a()(e,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new d.a[t](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{raster:{},raster3d:{}}[this.getModelType()]}},{key:"getModelType",value:function(){return"raster"}}])}(p.a)},function(t,e,n){"use strict";var r=n(796),i={raster:r.a,raster3d:r.a};e.a=i},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(8),d=n(10),v=n(17),g=n(23),m="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_min;\nuniform float u_max;\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\n  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;\n  if (value == u_noDataValue)\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))\n    gl_FragColor = vec4(0, 0, 0, 0);\n  else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);\n    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));\n    gl_FragColor = color;\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n  }\n\n\n}\n",y='precision highp float;\nuniform mat4 u_ModelMatrix;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n}\n',_=function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=u()(this,(t=c()(e)).call.apply(t,[this].concat(o))),n.texture=void 0,n.colorTexture=void 0,n}return f()(e,t),a()(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.clampLow,i=void 0===r||r,o=t.clampHigh,a=void 0===o||o,s=t.noDataValue,u=void 0===s?-9999999:s,l=t.domain,c=void 0===l?[0,1]:l;return this.updateColorTexure(),{u_opacity:n||1,u_texture:this.texture,u_domain:c,u_clampLow:i,u_clampHigh:void 0!==a?a:i,u_noDataValue:u,u_colorTexture:this.colorTexture}}},{key:"buildModels",value:function(){var t=this.layer.getSource(),e=this.rendererService.createTexture2D,r=t.data.dataArray[0];this.texture=e({data:r.data,width:r.width,height:r.height,format:p.gl.LUMINANCE,type:p.gl.FLOAT});var i=this.layer.getLayerConfig(),o=i.rampColors,a=n.i(d.r)(o);return this.colorTexture=e({data:a.data,width:a.width,height:a.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:y,fragmentShader:m,triangulation:g.d,primitive:p.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}})}},{key:"updateColorTexure",value:function(){var t=this.rendererService.createTexture2D,e=this.layer.getLayerConfig(),r=e.rampColors,i=n.i(d.r)(r);this.colorTexture=t({data:i.data,width:i.width,height:i.height,flipY:!1})}}]),e}(v.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(48),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(68),c=n(798),h=function(){function t(e,n){a()(this,t),this.width=void 0,this.height=void 0,this.grid=void 0,this.viewportPadding=100,this.screenRightBoundary=void 0,this.screenBottomBoundary=void 0,this.gridRightBoundary=void 0,this.gridBottomBoundary=void 0,this.width=e,this.height=n,this.viewportPadding=Math.max(e,n),this.grid=new c.a(e+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=e+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=e+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return u()(t,[{key:"placeCollisionBox",value:function(t){var e=t.x1+t.anchorPointX+this.viewportPadding,n=t.y1+t.anchorPointY+this.viewportPadding,r=t.x2+t.anchorPointX+this.viewportPadding,i=t.y2+t.anchorPointY+this.viewportPadding;return!this.isInsideGrid(e,n,r,i)||this.grid.hitTest(e,n,r,i)?{box:[]}:{box:[e,n,r,i]}}},{key:"insertCollisionBox",value:function(t,e){var n={featureIndex:e};this.grid.insert(n,t[0],t[1],t[2],t[3])}},{key:"project",value:function(t,e,n){var r=l.b.fromValues(e,n,0,1),o=l.b.create(),a=l.a.fromValues.apply(l.a,i()(t));return l.b.transformMat4(o,r,a),{x:(o[0]/o[3]+1)/2*this.width+this.viewportPadding,y:(-o[1]/o[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}}]),t}()},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=function(){function t(e,n,r){i()(this,t),this.boxCells=[],this.xCellCount=void 0,this.yCellCount=void 0,this.boxKeys=void 0,this.bboxes=void 0,this.width=void 0,this.height=void 0,this.xScale=void 0,this.yScale=void 0,this.boxUid=void 0;var o=this.boxCells;this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)o.push([]);this.boxKeys=[],this.bboxes=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0}return a()(t,[{key:"insert",value:function(t,e,n,r,i){this.forEachCell(e,n,r,i,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"query",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!1,i)}},{key:"hitTest",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!0,i)}},{key:"insertBoxCell",value:function(t,e,n,r,i,o){this.boxCells[i].push(o)}},{key:"queryHitTest",value:function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});return o?a.filter(o):a}var u={hitTest:i,seenUids:{box:{},circle:{}}};return this.forEachCell(t,e,n,r,this.queryCell,a,u,o),i?a.length>0:a}},{key:"queryCell",value:function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l){var c=this.bboxes,h=!0,f=!1,p=void 0;try{for(var d,v=l[Symbol.iterator]();!(h=(d=v.next()).done);h=!0){var g=d.value;if(!u.box[g]){u.box[g]=!0;var m=4*g;if(t<=c[m+2]&&e<=c[m+3]&&n>=c[m+0]&&r>=c[m+1]&&(!s||s(this.boxKeys[g]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[g],x1:c[m],y1:c[m+1],x2:c[m+2],y2:c[m+3]})}}}}catch(t){f=!0,p=t}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}}return!1}},{key:"forEachCell",value:function(t,e,n,r,i,o,a,s){for(var u=this.convertToXCellCoord(t),l=this.convertToYCellCoord(e),c=this.convertToXCellCoord(n),h=this.convertToYCellCoord(r),f=u;f<=c;f++)for(var p=l;p<=h;p++){var d=this.xCellCount*p+f;if(i.call(this,t,e,n,r,d,o,a,s))return}}},{key:"convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e,n,r,i){p.d.add(t,n,r),p.d.normalize(t,t),e=p.d.fromValues(-t[1],t[0]);var o=p.d.fromValues(-n[1],n[0]);return i/p.d.dot(e,o)}function i(t,e){return p.d.set(t,-e[1],e[0])}function o(t,e,r){var i=n.i(f.n)([e[0],e[1]]),o=n.i(f.n)([r[0],r[1]]);return p.d.sub(t,i,o),p.d.normalize(t,t),t}function a(t,e,n,r,i,o){s(e,n,i,-o),s(e,n,i,o),t.push(r[0],r[1],0),t.push(r[0],r[1],0)}function s(t,e,n,r){t.push(n[0],n[1],0),e.push(r)}function u(t,e){var r=n.i(f.n)([e[0],e[1]]),i=n.i(f.n)([t[0],t[1]]),o=r[0]-i[0],a=r[1]-i[1];return Math.sqrt(o*o+a*a)}function l(t,e){return t[0]===e[0]&&t[1]===e[1]}var c=n(48),h=n.n(c),f=n(10),p=n(68);e.a=function(t,e,n){var c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=p.d.fromValues(0,0),d=p.d.fromValues(0,0),v=p.d.fromValues(0,0),g=p.d.create(),m=!1,y=null,_=p.d.create(),b=n||0,x=3,w=[],S=[],E=[],M=[],T=[0,0];e&&(t=t.slice(),t.push(t[0]));for(var C=t.length,A=1;A<C;A++){var P=b,k=p.d.fromValues(t[A-1][0],t[A-1][1]),I=p.d.fromValues(t[A][0],t[A][1]),O=A<t.length-1?p.d.fromValues(t[A+1][0],t[A+1][1]):null;if(!l(k,I)){if(O)for(var j=A+1;O&&l(I,O);)O=j<t.length-1?p.d.fromValues(t[++j][0],t[j][1]):null;var L=0;if(c){L=u(I,k)+T[T.length-1]}if(o(f,I,k),y||(y=p.d.create(),i(y,f)),m||(m=!0,a(S,w,M,k,y,1)),E.push(P+0,P+2,P+1),O){o(d,O,I);var D=r(v,p.d.fromValues(g[0],g[1]),f,d,1),R=p.d.dot(v,y)<0?-1:1,B=Math.abs(D)>x;if(Math.abs(D)>1e3){a(S,w,M,I,y,1),E.push(P+1,P+2,P+3),E.push(P+2,P+4,P+3),i(_,d),p.d.copy(y,_),a(S,w,M,I,y,1),T.push(L,L,L,L),b+=4;continue}B?(D=x,a(S,w,M,I,y,1),E.push(P+1,P+2,P+3),E.push.apply(E,h()(1===R?[P+2,P+4,P+5]:[P+4,P+5,P+3])),i(_,d),p.d.copy(y,_),a(S,w,M,I,y,1),T.push(L,L,L,L),b+=4):(a(S,w,M,I,y,1),E.push(P+1,P+2,P+3),s(w,M,y,D*-R),S.push(I[0],I[1],0),E.push(P+2,P+4,P+3),E.push(P+4,P+5,P+6),i(_,d),p.d.copy(y,_),a(S,w,M,I,y,1),T.push(L,L,L,L,L),b+=5)}else i(y,f),a(S,w,M,I,y,1),T.push(L,L),E.push(P+1,P+2,P+3),b+=2}}for(var z=[],F=0;F<M.length;F++){var N=T[T.length-1];z.push(S[3*F],S[3*F+1],S[3*F+2],T[F],M[F],N)}return{normals:w,attrIndex:E,attrPos:z}}},function(t,e,n){"use strict";function r(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break;default:e=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:e,verticalAlign:n}}function i(t,e,n,r,i){if(i){var o=t[r],a=o.glyph;if(a)for(var s=e[a].advance*o.scale,u=(t[r].x+s)*i,l=n;l<=r;l++)t[l].x-=u}}function o(t,e,n,r,i,o,a){var s=(e-n)*i,u=(-r*a+.5)*o,l=!0,c=!1,h=void 0;try{for(var f,p=t[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var d=f.value;d.x+=s,d.y+=u}}catch(t){c=!0,h=t}finally{try{l||null==p.return||p.return()}finally{if(c)throw h}}}function a(t,e,n,a,s,u,l){var c=-8,h=0,f=c,p=0,d=t.positionedGlyphs,v="right"===u?1:"left"===u?0:.5,g=d.length;n.forEach(function(t){if(t.split("").forEach(function(t){var n=e[t];n&&(d.push({glyph:t,x:h,y:f+0,vertical:!1,scale:1,metrics:n}),h+=n.advance+l)}),d.length!==g){var n=h-l;p=Math.max(n,p),i(d,e,g,d.length-1,v)}h=0,f+=a});var m=r(s),y=m.horizontalAlign,_=m.verticalAlign;o(d,v,y,_,p,a,n.length);var b=f-c;t.top+=-_*b,t.bottom=t.top+b,t.left+=-y*p,t.right=t.left+p}function s(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],u=t.split("\n"),l=[],c={positionedGlyphs:l,top:s[1],bottom:s[1],left:s[0],right:s[0],lineCount:u.length,text:t};return a(c,e,u,n,r,i,o),!!l.length&&c}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2?arguments[2]:void 0,r=t.positionedGlyphs,i=void 0===r?[]:r,o=[],a=!0,s=!1,u=void 0;try{for(var l,c=i[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value,f=h.metrics,p=4,d=f.advance*h.scale/2,v=n?[h.x+d,h.y]:[0,0],g=n?[0,0]:[h.x+d+e[0],h.y+e[1]],m=(0-p)*h.scale-d+g[0],y=(0-p)*h.scale+g[1],_=m+f.width*h.scale,b=y+f.height*h.scale,x={x:m,y:y},w={x:_,y:y},S={x:m,y:b},E={x:_,y:b};o.push({tl:x,tr:w,bl:S,br:E,tex:f,glyphOffset:v})}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}return o}e.a=s,e.b=u},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(58),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(68),c=Math.PI/180,h=function(){function t(){a()(this,t),this.projectionMatrix=l.a.create(),this.viewMatrix=l.a.create(),this.viewProjectionMatrix=l.a.create(),this.ViewProjectionMatrixUncentered=l.a.create(),this.viewUncenteredMatrix=l.a.create(),this.zoom=void 0,this.center=void 0}return u()(t,[{key:"syncWithMapCamera",value:function(t){var e=t.zoom,n=void 0===e?1:e,r=t.pitch,i=void 0===r?0:r,o=t.bearing,a=void 0===o?0:o,s=t.center,u=void 0===s?[0,0]:s,h=t.offsetOrigin,f=void 0===h?[0,0]:h,p=t.cameraHeight,d=void 0===p?1:p,v=t.aspect,g=void 0===v?1:v,m=t.near,y=void 0===m?.1:m,_=t.far,b=void 0===_?1e3:_,x=t.fov,w=void 0===x?0:x;this.zoom=n,this.center=u;var S=i*c,E=(360-a)*c;l.a.perspective(this.projectionMatrix,w,g,y,b);var M=l.c.fromValues(d*Math.sin(S)*Math.sin(E),-d*Math.sin(S)*Math.cos(E),d*Math.cos(S)),T=l.c.fromValues(-Math.cos(S)*Math.sin(E),Math.cos(S)*Math.cos(E),Math.sin(S));l.a.lookAt(this.viewMatrix,M,l.c.fromValues(0,0,0),T),this.viewUncenteredMatrix=l.a.clone(this.viewMatrix),l.a.translate(this.viewMatrix,this.viewMatrix,l.c.fromValues(-f[0],f[1],0)),l.a.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),l.a.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var t=i()(this.center,2);return[t[0],t[1]]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){var n=85.0511287798,r=Math.max(Math.min(n,t[1]),-n),i=256<<20,o=Math.PI/180,a=t[0]*o,s=r*o;s=Math.log(Math.tan(Math.PI/4+s/2));var u=.5/Math.PI,l=-.5/Math.PI;return o=.5,a=i*(u*a+.5)-215440491,s=-(i*(l*s+o)-106744817),[a,s]}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(305),d=n(803),v=function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getServiceConstructor",value:function(){return d.a}}]),e}(p.a)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){w()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return W});var o,a,s,u,l,c,h,f,p,d,v,g,m,y,_=n(80),b=n.n(_),x=n(9),w=n.n(x),S=n(112),E=n.n(S),M=n(79),T=n.n(M),C=n(14),A=n.n(C),P=n(2),k=n.n(P),I=n(3),O=n.n(I),j=n(13),L=n.n(j),D=n(15),R=(n.n(D),n(8)),B=n(10),z=n(7),F=(n.n(z),n(804)),N=n(801);n(147)("/* @antv/l7-maps */\n.amap-logo{\n display: none !important;\n}\n");var U=0;window.forceWebGL=!0;var V="15cd8a57710d40c9b7c0e3cc120f1200",G="1.4.15",q="amap-script",H=!1,Y=[],X=12,W=(o=n.i(z.injectable)(),a=n.i(z.inject)(R.TYPES.IGlobalConfigService),s=n.i(z.inject)(R.TYPES.ILogService),u=n.i(z.inject)(R.TYPES.MapConfig),l=n.i(z.inject)(R.TYPES.ICoordinateSystemService),c=n.i(z.inject)(R.TYPES.IEventEmitter),o((f=y=function(){function t(){var e=this;k()(this,t),this.map=void 0,A()(this,"configService",p,this),A()(this,"logger",d,this),A()(this,"config",v,this),A()(this,"coordinateSystemService",g,this),A()(this,"eventEmitter",m,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(t){var n=t.camera,r=n.fov,i=n.near,o=n.far,a=n.height,s=n.pitch,u=n.rotation,l=n.aspect,c=n.position,h=e.getCenter(),f=h.lng,p=h.lat;e.cameraChangedCallback&&(e.viewport.syncWithMapCamera({aspect:l,bearing:360-u,far:o,fov:r,cameraHeight:a,near:i,pitch:s,zoom:e.map.getZoom()-1,center:[f,p],offsetOrigin:[c.x,c.y]}),e.viewport.getZoom()>X?e.coordinateSystemService.setCoordinateSystem(R.CoordinateSystem.P20_OFFSET):e.coordinateSystemService.setCoordinateSystem(R.CoordinateSystem.P20),e.cameraChangedCallback(e.viewport))}}return O()(t,[{key:"addMarkerContainer",value:function(){var t=this.map.getContainer();if(null!==t){var e=t.getElementsByClassName("amap-maps")[0];this.markerContainer=B.b.create("div","l7-marker-container",e)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,e){-1!==R.MapServiceEvent.indexOf(t)?this.eventEmitter.on(t,e):this.map.on(t,e)}},{key:"off",value:function(t,e){-1!==R.MapServiceEvent.indexOf(t)?this.eventEmitter.off(t,e):this.map.off(t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var t;return null===(t=this.map.getContainer())||void 0===t?void 0:t.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var t=this.map.getSize();return[t.getWidth(),t.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(){var t=this.map.getCenter();return{lng:t.getLng(),lat:t.getLat()}}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var t=this.map.getBounds().toBounds(),e=t.getNorthEast(),n=t.getSouthWest(),r=this.getCenter(),i=r.lng>e.getLng()||r.lng<n.getLng()?180-e.getLng():e.getLng();return[[r.lng<n.getLng()?n.getLng()-180:n.getLng(),n.getLat()],[i,e.getLat()]]}},{key:"getMinZoom",value:function(){return this.map.get("zooms")[0]-1}},{key:"getMaxZoom",value:function(){return this.map.get("zooms")[1]-1}},{key:"setRotation",value:function(t){return this.map.setRotation(t)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(t){this.map.panTo(t)}},{key:"fitBounds",value:function(t){this.map.setBounds(new AMap.Bounds([t[0][0],t[0][1],t[1][0],t[1][1]]))}},{key:"setZoomAndCenter",value:function(t,e){this.map.setZoomAndCenter(t,e)}},{key:"setMapStyle",value:function(t){this.map.setMapStyle(this.getMapStyle(t))}},{key:"setMapStatus",value:function(t){this.map.setStatus(t)}},{key:"pixelToLngLat",value:function(t){var e=this.map.pixelToLngLat(new AMap.Pixel(t[0],t[1]));return{lng:e.getLng(),lat:e.getLat()}}},{key:"lngLatToPixel",value:function(t){var e=this.map.lnglatToPixel(new AMap.LngLat(t[0],t[1]));return{x:e.getX(),y:e.getY()}}},{key:"containerToLngLat",value:function(t){var e=new AMap.Pixel(t[0],t[1]),n=this.map.containerToLngLat(e);return{lng:null===n||void 0===n?void 0:n.getLng(),lat:null===n||void 0===n?void 0:n.getLat()}}},{key:"lngLatToContainer",value:function(t){var e=new AMap.LngLat(t[0],t[1]),n=this.map.lngLatToContainer(e);return{x:n.getX(),y:n.getY()}}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=T()(b.a.mark(function t(){var e,n,r,o,a,s,u,l,c,h,f,p,d,v,g=this;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.config,n=e.id,r=e.style,o=void 0===r?"light":r,a=e.minZoom,s=void 0===a?0:a,u=e.maxZoom,l=void 0===u?18:u,c=e.token,h=void 0===c?V:c,f=e.mapInstance,p=e.plugin,d=void 0===p?[]:p,v=E()(e,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),t.next=3,new Promise(function(t){var e=function(){if(f)g.map=f,g.$mapContainer=g.map.getContainer(),setTimeout(function(){g.map.on("camerachange",g.handleCameraChanged),t()},30);else{g.$mapContainer=g.creatAmapContainer(n);var e=new AMap.Map(g.$mapContainer,i({mapStyle:g.getMapStyle(o),zooms:[s,l],viewMode:"3D"},v));e.on("camerachange",g.handleCameraChanged),g.map=e,setTimeout(function(){t()},10)}};H||f?H&&window.AMap||f?e():Y.push(e):(h===V&&g.logger.warn(g.configService.getSceneWarninfo("MapToken")),H=!0,d.push("Map3D"),g.loadAMapScript("https://webapi.amap.com/maps?v=".concat(G,"&key=").concat(h,"&plugin=").concat(d.join(","))).then(function(){e(),Y.length&&(Y.forEach(function(t){return t()}),Y=[])}))});case 3:this.viewport=new N.a;case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"exportMap",value:function(t){var e,n=null===(e=this.getContainer())||void 0===e?void 0:e.getElementsByClassName("amap-layer")[0];return"jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png")}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var t=document.getElementById(q);t&&document.head.removeChild(t)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"getMapStyle",value:function(t){return F.a[t]?F.a[t]:t}},{key:"creatAmapContainer",value:function(t){var e=t;"string"==typeof t&&(e=document.getElementById(t));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_amap_div"+U++,e.appendChild(n),n}},{key:"loadAMapScript",value:function(t){return new Promise(function(e,n){var r=document.createElement("script");r.src=t,r.onload=function(){e()},r.onerror=n,document.head.appendChild(r)})}}]),t}(),p=L()(f.prototype,"configService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=L()(f.prototype,"logger",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=L()(f.prototype,"config",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=L()(f.prototype,"coordinateSystemService",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=L()(f.prototype,"eventEmitter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(1254),u=function(){function t(){i()(this,t),this.viewport=void 0}return a()(t,[{key:"syncWithMapCamera",value:function(t){var e=t.center,n=t.zoom,r=t.pitch,i=t.bearing,o=t.viewportHeight,a=t.viewportWidth;this.viewport=new s.a({width:a,height:o,longitude:e&&e[0],latitude:e&&e[1],zoom:n,pitch:r,bearing:i})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}}]),t}()},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(6),u=n.n(s),l=n(4),c=n.n(l),h=n(5),f=n.n(h),p=n(305),d=n(807);!function(t){function e(){return i()(this,e),u()(this,c()(e).apply(this,arguments))}f()(e,t),a()(e,[{key:"getServiceConstructor",value:function(){return d.a}}])}(p.a)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){w()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return Y});var o,a,s,u,l,c,h,f,p,d,v,g,m,y,_=n(80),b=n.n(_),x=n(9),w=n.n(x),S=n(112),E=n.n(S),M=n(79),T=n.n(M),C=n(14),A=n.n(C),P=n(2),k=n.n(P),I=n(3),O=n.n(I),j=n(13),L=n.n(j),D=n(15),R=(n.n(D),n(8)),B=n(10),z=n(7),F=(n.n(z),n(1237)),N=n.n(F),U=n(805),V=n(808);n(147)("/* @antv/l7-maps */\n.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:0;margin:10px;position:relative;background-color:#fff;border-radius:3px 12px 12px 3px}.mapboxgl-ctrl-attrib.mapboxgl-compact:hover{padding:2px 24px 2px 4px;visibility:visible;margin-top:6px}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:hover,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:hover{padding:2px 4px 2px 24px;border-radius:12px 3px 3px 12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact:after{content:\"\";cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}"),n(147)("/* @antv/l7-maps */\n.mapboxgl-ctrl-logo {\n display: none !important;\n}\n");var G={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},q=12,H="pk.eyJ1IjoibHp4dWUiLCJhIjoiYnhfTURyRSJ9.Ugm314vAKPHBzcPmY1p4KQ",Y=(o=n.i(z.injectable)(),a=n.i(z.inject)(R.TYPES.MapConfig),s=n.i(z.inject)(R.TYPES.IGlobalConfigService),u=n.i(z.inject)(R.TYPES.ILogService),l=n.i(z.inject)(R.TYPES.ICoordinateSystemService),c=n.i(z.inject)(R.TYPES.IEventEmitter),o((f=y=function(){function t(){var e=this;k()(this,t),this.map=void 0,A()(this,"config",p,this),A()(this,"configService",d,this),A()(this,"logger",v,this),A()(this,"coordinateSystemService",g,this),A()(this,"eventEmitter",m,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var t=e.map.getCenter().wrap(),n=t.lat,r=t.lng;e.viewport.syncWithMapCamera({bearing:e.map.getBearing(),center:[r,n],viewportHeight:e.map.transform.height,pitch:e.map.getPitch(),viewportWidth:e.map.transform.width,zoom:e.map.getZoom(),cameraHeight:0}),e.viewport.getZoom()>q?e.coordinateSystemService.setCoordinateSystem(R.CoordinateSystem.LNGLAT_OFFSET):e.coordinateSystemService.setCoordinateSystem(R.CoordinateSystem.LNGLAT),e.cameraChangedCallback(e.viewport)}}return O()(t,[{key:"addMarkerContainer",value:function(){var t=this.map.getCanvasContainer();this.markerContainer=B.b.create("div","l7-marker-container",t)}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,e){-1!==R.MapServiceEvent.indexOf(t)?this.eventEmitter.on(t,e):this.map.on(G[t]||t,e)}},{key:"off",value:function(t,e){this.map.off(G[t]||t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(t){this.map.setBearing(t)}},{key:"zoomIn",value:function(t,e){this.map.zoomIn(t,e)}},{key:"zoomOut",value:function(t,e){this.map.zoomOut(t,e)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(t){this.panTo(t)}},{key:"fitBounds",value:function(t,e){this.map.fitBounds(t,e)}},{key:"setMaxZoom",value:function(t){this.map.setMaxZoom(t)}},{key:"setMinZoom",value:function(t){this.map.setMinZoom(t)}},{key:"setMapStatus",value:function(t){!0===t.doubleClickZoom&&this.map.doubleClickZoom.enable(),!1===t.doubleClickZoom&&this.map.doubleClickZoom.disable(),!1===t.dragEnable&&this.map.dragPan.disable(),!0===t.dragEnable&&this.map.dragPan.enable(),!1===t.rotateEnable&&this.map.dragRotate.disable(),!0===t.dragEnable&&this.map.dragRotate.enable(),!1===t.keyboardEnable&&this.map.keyboard.disable(),!0===t.keyboardEnable&&this.map.keyboard.enable(),!1===t.zoomEnable&&this.map.scrollZoom.disable(),!0===t.zoomEnable&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(t,e){this.map.flyTo({zoom:t,center:e})}},{key:"setMapStyle",value:function(t){this.map.setStyle(this.getMapStyle(t))}},{key:"pixelToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToPixel",value:function(t){return this.map.project(t)}},{key:"containerToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToContainer",value:function(t){return this.map.project(t)}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=T()(b.a.mark(function t(){var e,n,r,o,a,s,u,l,c,h,f,p,d;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.config,n=e.id,r=void 0===n?"map":n,o=e.attributionControl,a=void 0!==o&&o,s=e.style,u=void 0===s?"light":s,l=e.token,c=void 0===l?H:l,h=e.rotation,f=void 0===h?0:h,p=e.mapInstance,d=E()(e,["id","attributionControl","style","token","rotation","mapInstance"]),this.viewport=new U.a,p||N.a||this.logger.error(this.configService.getSceneWarninfo("SDK")),c!==H||"blank"===u||N.a.accessToken||p||this.logger.warn(this.configService.getSceneWarninfo("MapToken")),p||N.a.accessToken||(N.a.accessToken=c),p?(this.map=p,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(r),this.map=new N.a.Map(i({container:this.$mapContainer,style:this.getMapStyle(u),attributionControl:a,bearing:f},d))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(t){var e=this.map.getCanvas();return"jpg"===t?null===e||void 0===e?void 0:e.toDataURL("image/jpeg"):null===e||void 0===e?void 0:e.toDataURL("image/png")}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"creatAmapContainer",value:function(t){var e=t;return"string"==typeof t&&(e=document.getElementById(t)),e}},{key:"getMapStyle",value:function(t){return"string"!=typeof t?t:V.a[t]?V.a[t]:t}}]),t}(),p=L()(f.prototype,"config",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=L()(f.prototype,"configService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=L()(f.prototype,"logger",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=L()(f.prototype,"coordinateSystemService",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=L()(f.prototype,"eventEmitter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}}},function(t,e,n){"use strict";var r=n(816);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=function(){function t(e,n){i()(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,a=n.stride,s=n.normalized,u=n.size,l=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:a||0,normalized:s||!1,divisor:l||0},u&&(this.attribute.size=u)}return a()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(8),u=n(132),l=function(){function t(e,n){i()(this,t),this.buffer=void 0;var r=n.data,o=n.usage,a=n.type;this.buffer=e.buffer({data:r,usage:u.g[o||s.gl.STATIC_DRAW],type:u.a[a||s.gl.UNSIGNED_BYTE]})}return a()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(8),u=n(132),l=function(){function t(e,n){i()(this,t),this.elements=void 0;var r=n.data,o=n.usage,a=n.type,l=n.count;this.elements=e.elements({data:r,usage:u.g[o||s.gl.STATIC_DRAW],type:u.a[a||s.gl.UNSIGNED_BYTE],count:l})}return a()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=function(){function t(e,n){i()(this,t),this.framebuffer=void 0;var r=n.width,o=n.height,a=n.color,s=n.colors,u=(n.depth,n.stencil,{width:r,height:o});Array.isArray(s)&&(u.colors=s.map(function(t){return t.get()})),a&&"boolean"!=typeof a&&(u.color=a.get()),this.framebuffer=e.framebuffer(u)}return a()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}()},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return _});var o=n(349),a=n.n(o),s=n(9),u=n.n(s),l=n(2),c=n.n(l),h=n(3),f=n.n(h),p=n(237),d=n.n(p),v=n(421),g=n.n(v),m=n(8),y=n(132),_=function(){function t(e,n){c()(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,i=n.fs,o=n.attributes,a=n.uniforms,s=n.primitive,u=n.count,l=n.elements,h=n.depth,f=n.blend,p=n.stencil,d=n.cull,v=n.instances,g={};a&&(this.uniforms=this.extractUniforms(a),Object.keys(a).forEach(function(t){g[t]=e.prop(t)}));var _={};Object.keys(o).forEach(function(t){_[t]=o[t].get()});var b={attributes:_,frag:i,uniforms:g,vert:r,primitive:y.h[void 0===s?m.gl.TRIANGLES:s]};v&&(b.instances=v),u&&(b.count=u),l&&(b.elements=l.get()),this.initDepthDrawParams({depth:h},b),this.initBlendDrawParams({blend:f},b),this.initStencilDrawParams({stencil:p},b),this.initCullDrawParams({cull:d},b),this.drawCommand=e(b)}return f()(t,[{key:"addUniforms",value:function(t){this.uniforms=i({},this.uniforms,{},this.extractUniforms(t))}},{key:"draw",value:function(t){var e=i({},this.uniforms,{},this.extractUniforms(t.uniforms||{})),n={};Object.keys(e).forEach(function(t){var r=a()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:n[t]=e[t].get()}),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:y.i[n.func||m.gl.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:y.j[i&&i.srcRGB||m.gl.SRC_ALPHA],srcAlpha:y.j[i&&i.srcAlpha||m.gl.SRC_ALPHA],dstRGB:y.j[i&&i.dstRGB||m.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:y.j[i&&i.dstAlpha||m.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:y.k[o&&o.rgb||m.gl.FUNC_ADD],alpha:y.k[o&&o.alpha||m.gl.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,o=n.mask,a=void 0===o?-1:o,s=n.func,u=void 0===s?{cmp:m.gl.ALWAYS,ref:0,mask:-1}:s,l=n.opFront,c=void 0===l?{fail:m.gl.KEEP,zfail:m.gl.KEEP,zpass:m.gl.KEEP}:l,h=n.opBack,f=void 0===h?{fail:m.gl.KEEP,zfail:m.gl.KEEP,zpass:m.gl.KEEP}:h;e.stencil={enable:!!r,mask:a,func:i({},u,{cmp:y.l[u.cmp]}),opFront:{fail:y.m[c.fail],zfail:y.m[c.zfail],zpass:y.m[c.zpass]},opBack:{fail:y.m[f.fail],zfail:y.m[f.zfail],zpass:y.m[f.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?m.gl.BACK:i;e.cull={enable:!!r,face:y.n[o]}}}},{key:"extractUniforms",value:function(t){var e=this,n={};return Object.keys(t).forEach(function(r){e.extractUniformsRecursively(r,t[r],n,"")}),n}},{key:"extractUniformsRecursively",value:function(t,e,n,r){var i=this;if(null===e||"number"==typeof e||"boolean"==typeof e||Array.isArray(e)&&"number"==typeof e[0]||d()(e)||""===e||"resize"in e)return void(n["".concat(r&&r+".").concat(t)]=e);g()(e)&&Object.keys(e).forEach(function(o){i.extractUniformsRecursively(o,e[o],n,"".concat(r&&r+".").concat(t))}),Array.isArray(e)&&e.forEach(function(e,o){Object.keys(e).forEach(function(a){i.extractUniformsRecursively(a,e[a],n,"".concat(r&&r+".").concat(t,"[").concat(o,"]"))})})}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=n(8),u=n(132),l=function(){function t(e,n){i()(this,t),this.texture=void 0;var r=n.data,o=n.type,a=void 0===o?s.gl.UNSIGNED_BYTE:o,l=n.width,c=n.height,h=n.flipY,f=void 0!==h&&h,p=n.format,d=void 0===p?s.gl.RGBA:p,v=n.mipmap,g=void 0!==v&&v,m=n.wrapS,y=void 0===m?s.gl.CLAMP_TO_EDGE:m,_=n.wrapT,b=void 0===_?s.gl.CLAMP_TO_EDGE:_,x=n.aniso,w=void 0===x?0:x,S=n.alignment,E=void 0===S?1:S,M=n.premultiplyAlpha,T=void 0!==M&&M,C=n.mag,A=void 0===C?s.gl.NEAREST:C,P=n.min,k=void 0===P?s.gl.NEAREST:P,I=n.colorSpace,O=void 0===I?s.gl.BROWSER_DEFAULT_WEBGL:I,j={width:l,height:c,type:u.a[a],format:u.b[d],wrapS:u.c[y],wrapT:u.c[b],mag:u.d[A],min:u.d[k],alignment:E,flipY:f,colorSpace:u.e[O],premultiplyAlpha:T,aniso:w};r&&(j.data=r),"number"==typeof g?j.mipmap=u.f[g]:"boolean"==typeof g&&(j.mipmap=g),this.texture=e.texture(j)}return a()(t,[{key:"get",value:function(){return this.texture}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n)}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return S});var r,i,o,a=n(80),s=n.n(a),u=n(79),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(7),v=(n.n(d),n(1247)),g=n.n(v),m=n(810),y=n(811),_=n(812),b=n(813),x=n(814),w=n(815),S=(r=n.i(d.injectable)())(i=o=function(){function t(){var e=this;h()(this,t),this.gl=void 0,this.$container=void 0,this.createModel=function(t){return new x.a(e.gl,t)},this.createAttribute=function(t){return new m.a(e.gl,t)},this.createBuffer=function(t){return new y.a(e.gl,t)},this.createElements=function(t){return new _.a(e.gl,t)},this.createTexture2D=function(t){return new w.a(e.gl,t)},this.createFramebuffer=function(t){return new b.a(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.clear=function(t){var n=t.color,r=t.depth,i=t.stencil,o=t.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)},this.viewport=function(t){var n,r=t.x,i=t.y,o=t.width,a=t.height,s=null===(n=e.$container)||void 0===n?void 0:n.getElementsByTagName("canvas")[0];s&&(s.width=o,s.height=a,s.style.width=o/2+"px",s.style.height=a/2+"px"),e.gl._gl.viewport(r,i,o,a),e.gl._refresh()},this.readPixels=function(t){var n=t.framebuffer,r=t.x,i=t.y,o=t.width,a=t.height,s={x:r,y:i,width:o,height:a};return n&&(s.framebuffer=n.get()),e.gl.read(s)},this.getViewportSize=function(){return{width:e.gl._gl.drawingBufferWidth,height:e.gl._gl.drawingBufferHeight}},this.getContainer=function(){return e.$container},this.destroy=function(){e.gl.destroy()}}return p()(t,[{key:"init",value:function(){function t(t,n){return e.apply(this,arguments)}var e=l()(s.a.mark(function t(e,n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$container=e,t.next=3,new Promise(function(t,r){g()({container:e,attributes:{alpha:!0,antialias:n.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:n.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,n){!e&&n||r(e),t(n)}})});case 3:this.gl=t.sent;case 4:case"end":return t.stop()}},t,this)}));return t}()}]),t}())||i},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return v});var o=n(9),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(293),f=n(8),p=n(809),d=n(10),v=function(){function t(e){u()(this,t),this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.layerService=void 0,this.iconService=void 0,this.markerService=void 0,this.popupService=void 0,this.fontService=void 0,this.interactionService=void 0,this.container=void 0;var r=e.id,i=e.map,o=n.i(f.createSceneContainer)();this.container=o,i.setContainer(o,r),o.bind(f.TYPES.IRendererService).to(p.a).inSingletonScope(),this.sceneService=o.get(f.TYPES.ISceneService),this.mapService=o.get(f.TYPES.IMapService),this.iconService=o.get(f.TYPES.IIconService),this.fontService=o.get(f.TYPES.IFontService),this.controlService=o.get(f.TYPES.IControlService),this.layerService=o.get(f.TYPES.ILayerService),this.markerService=o.get(f.TYPES.IMarkerService),this.interactionService=o.get(f.TYPES.IInteractionService),this.popupService=o.get(f.TYPES.IPopupService),this.initComponent(r),this.sceneService.init(e),this.initControl()}return c()(t,[{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(t){return this.sceneService.exportPng(t)}},{key:"exportMap",value:function(t){return this.sceneService.exportPng(t)}},{key:"addLayer",value:function(t){var e=n.i(f.createLayerContainer)(this.container);t.setContainer(e),this.sceneService.addLayer(t)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(t){return this.layerService.getLayer(t)}},{key:"getLayerByName",value:function(t){return this.layerService.getLayerByName(t)}},{key:"removeLayer",value:function(t){this.layerService.remove(t)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addImage",value:function(t,e){this.iconService.addImage(t,e)}},{key:"hasImage",value:function(t){this.iconService.hasImage(t)}},{key:"removeImage",value:function(t){this.iconService.removeImage(t)}},{key:"addIconFontGlyphs",value:function(t,e){this.fontService.addIconGlyphs(e)}},{key:"addControl",value:function(t){this.controlService.addControl(t,this.container)}},{key:"removeControl",value:function(t){this.controlService.removeControl(t)}},{key:"getControlByName",value:function(t){return this.controlService.getControlByName(t)}},{key:"addMarker",value:function(t){this.markerService.addMarker(t)}},{key:"addMarkerLayer",value:function(t){this.markerService.addMarkerLayer(t)}},{key:"removeMarkerLayer",value:function(t){this.markerService.removeMarkerLayer(t)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(t){this.popupService.addPopup(t)}},{key:"on",value:function(t,e){-1===f.SceneEventList.indexOf(t)?this.mapService.on(t,e):this.sceneService.on(t,e)}},{key:"off",value:function(t,e){-1===f.SceneEventList.indexOf(t)?this.mapService.off(t,e):this.sceneService.off(t,e)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(){return this.mapService.getCenter()}},{key:"setCenter",value:function(t){return this.mapService.setCenter(t)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(t){return this.mapService.setPitch(t)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(t){this.mapService.setRotation(t)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(t){this.mapService.panTo(t)}},{key:"panBy",value:function(t){this.mapService.panTo(t)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(t){this.mapService.setZoom(t)}},{key:"fitBounds",value:function(t,e){var n=this.sceneService.getSceneConfig(),r=n.fitBoundsOptions,o=n.animate;this.mapService.fitBounds(t,e||i({},r,{animate:o}))}},{key:"setZoomAndCenter",value:function(t,e){this.mapService.setZoomAndCenter(t,e)}},{key:"setMapStyle",value:function(t){this.mapService.setMapStyle(t)}},{key:"setMapStatus",value:function(t){this.mapService.setMapStatus(t)}},{key:"pixelToLngLat",value:function(t){return this.mapService.pixelToLngLat(t)}},{key:"lngLatToPixel",value:function(t){return this.mapService.lngLatToPixel(t)}},{key:"containerToLngLat",value:function(t){return this.mapService.containerToLngLat(t)}},{key:"lngLatToContainer",value:function(t){return this.mapService.lngLatToContainer(t)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(t,e){this.container.bind(f.TYPES.IPostProcessingPass).to(t).whenTargetNamed(e)}},{key:"initComponent",value:function(t){this.controlService.init({container:d.b.getContainer(t)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var t=this.sceneService.getSceneConfig(),e=t.logoVisible,n=t.logoPosition;e&&this.addControl(new h.b({position:n}))}},{key:"map",get:function(){return this.mapService.map}}]),t}()},function(t,e){},function(t,e,n){"use strict";function r(t,e){var r=n.i(i.a)(t);return n.i(o.a)(r,e)}e.a=r;var i=n(1021),o=n(309)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){s()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t,e){l()(t,!0);var r=[],o={};if(t.features=t.features.filter(function(t){var e=t.geometry;return null!=t&&e&&e.type&&e.coordinates&&e.coordinates.length>0}),0===t.features.length)return{dataArray:[],featureKeys:o};return h.flattenEach(t,function(t,e){var o=n.i(c.getCoords)(t),a=e;if("Polygon"===t.geometry.type)o.forEach(function(e){var n=i({},t.properties,{coordinates:[e],_id:a});r.push(n)});else{var s=i({},t.properties,{coordinates:o,_id:a});r.push(s)}}),{dataArray:r,featureKeys:o}}e.a=o;var a=n(9),s=n.n(a),u=n(351),l=n.n(u),c=n(990),h=(n.n(c),n(991));n.n(h)},function(t,e,n){"use strict";function r(t,e){var n=e.extent;return{images:new Promise(function(e){i(t,function(t){e(t)})}),_id:1,dataArray:[{_id:0,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]}}function i(t,e){var i=t,a=[];if("string"==typeof i)n.i(o.p)({url:i},function(t,n){a.push(n),e(a)});else{var s=i.length,u=0;i.forEach(function(t){n.i(o.p)({url:t},function(t,n){u++,a.push(n),u===s&&e(a)})})}return r}e.a=r;var o=n(10)},function(t,e,n){"use strict";function r(t,e){var n=e.extent,r=e.width,i=e.height,o=e.min,a=e.max;return{_id:1,dataArray:[{_id:1,data:Array.from(t),width:r,height:i,min:o,max:a,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]}}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(e,"a",function(){return I});var o=n(9),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),h=n(6),f=n.n(h),p=n(4),d=n.n(p),v=n(5),g=n.n(v),m=n(422),y=n.n(m),_=n(117),b=n.n(_),x=n(1225),w=n.n(x),S=n(160),E=n(10),M=n(49),T=(n.n(M),n(243)),C=n.n(T),A=n(308),P=n(830),k=n(831),I=function(t){function e(t,n){var r;return u()(this,e),r=f()(this,d()(e).call(this)),r.data=void 0,r.extent=void 0,r.hooks={init:new S.d},r.parser={type:"geojson"},r.transforms=[],r.cluster=!1,r.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},r.originData=void 0,r.rawData=void 0,r.clusterIndex=void 0,r.rawData=w()(t),r.originData=t,n&&(n.parser&&(r.parser=n.parser),n.transforms&&(r.transforms=n.transforms),r.cluster=n.cluster||!1,n.clusterOptions&&(r.cluster=!0,r.clusterOptions=i({},r.clusterOptions,{},n.clusterOptions))),r.hooks.init.tap("parser",function(){r.excuteParser()}),r.hooks.init.tap("cluster",function(){r.initCluster()}),r.hooks.init.tap("transform",function(){r.executeTrans()}),r.init(),r}return g()(e,t),c()(e,[{key:"setData",value:function(t){this.rawData=t,this.originData=w()(t),this.init(),this.emit("update")}},{key:"getClusters",value:function(t){return this.clusterIndex.getClusters(this.extent,t)}},{key:"getClustersLeaves",value:function(t){return this.clusterIndex.getLeaves(t,1/0)}},{key:"updateClusterData",value:function(t){var e=this,r=this.clusterOptions,i=r.method,o=void 0===i?"sum":i,a=r.field,s=this.clusterIndex.getClusters(this.extent,t);this.clusterOptions.zoom=t,s.forEach(function(t){t.id||(t.properties.point_count=1)}),(a||b()(o))&&(s=s.map(function(t){var r=t.id;if(r){var i,s=e.clusterIndex.getLeaves(r,1/0),u=s.map(function(t){return t.properties});if(y()(o)&&a){var l=n.i(k.a)(u,a);i=P.a[o](l)}b()(o)&&(i=o(u)),t.properties.stat=i}else t.properties.point_count=1;return t})),this.data=n.i(A.getParser)("geojson")({type:"FeatureCollection",features:s}),this.executeTrans()}},{key:"getFeatureById",value:function(t){var e=this.parser.type;return"geojson"!==(void 0===e?"geojson":e)||this.cluster||0!==this.transforms.length?t<this.data.dataArray.length?this.data.dataArray[t]:"null":t<this.originData.features.length?this.originData.features[t]:"null"}},{key:"getFeatureId",value:function(t,e){var n=this.data.dataArray.find(function(e){return e[t]===name});return null===n||void 0===n?void 0:n._id}},{key:"excuteParser",value:function(){var t=this.parser,e=t.type||"geojson",r=n.i(A.getParser)(e);this.data=r(this.originData,t),this.extent=n.i(E.q)(this.data.dataArray)}},{key:"executeTrans",value:function(){var t=this;this.transforms.forEach(function(e){var r=e.type,i=n.i(A.getTransform)(r)(t.data,e);Object.assign(t.data,i)})}},{key:"initCluster",value:function(){if(this.cluster){var t=this.clusterOptions,e=t.radius,n=t.minZoom,r=void 0===n?0:n,i=t.maxZoom;this.clusterIndex=new C.a({radius:e,minZoom:r,maxZoom:i}),this.clusterIndex.load(this.rawData.features)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),e}(M.EventEmitter)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t,e){var n=e.radius,r=void 0===n?80:n,o=e.maxZoom,s=void 0===o?18:o,l=e.minZoom,h=void 0===l?0:l,f=e.field,p=e.zoom,d=void 0===p?2:p;if(t.pointIndex){var v=t.pointIndex.getClusters(t.extent,Math.floor(d));return t.dataArray=a(v),t}var g=new c.a({radius:r,minZoom:h,maxZoom:s,map:function(t){return{sum:t[f]}},reduce:function(t,e){t.sum+=e.sum}}),m={type:"FeatureCollection",features:[]};m.features=t.dataArray.map(function(t){return{type:"Feature",properties:u()({},f,t[f]),geometry:{type:"Point",coordinates:t.coordinates}}}),g.load(m.features);var y=g.getClusters(t.extent,d),_=y.map(function(t,e){return i({coordinates:t.geometry.coordinates,_id:e+1},t.properties)});return t.dataArray=_,t.pointIndex=g,t}function a(t){return t.map(function(t,e){return i({coordinates:t.geometry.coordinates,_id:e+1},t.properties)})}e.a=o;var s=n(9),u=n.n(s),l=n(243),c=n.n(l)},function(t,e,n){"use strict";function r(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.filter(n)),t}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=t.dataArray,r=e.size,o=void 0===r?10:r,a=i(n,o),s=a.gridHash,l=a.gridOffset,c=u(s,l,e);return{yOffset:l.yOffset/2,xOffset:l.xOffset/2,radius:l.xOffset,type:"grid",dataArray:c}}function i(t,e){var n,r=1/0,i=-1/0,a=!0,s=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){n=l.value.coordinates[1],Number.isFinite(n)&&(r=n<r?n:r,i=n>i?n:i)}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}var h=(r+i)/2,f=o(e,h);if(f.xOffset<=0||f.yOffset<=0)return{gridHash:{},gridOffset:f};var p={},d=!0,v=!1,g=void 0;try{for(var m,y=t[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var _=m.value,b=_.coordinates[1],x=_.coordinates[0];if(Number.isFinite(b)&&Number.isFinite(x)){var w=Math.floor((b+90)/f.yOffset),S=Math.floor((x+180)/f.xOffset),E="".concat(w,"-").concat(S);p[E]=p[E]||{count:0,points:[]},p[E].count+=1,p[E].points.push(_)}}}catch(t){v=!0,g=t}finally{try{d||null==y.return||y.return()}finally{if(v)throw g}}return{gridHash:p,gridOffset:f}}function o(t,e){return{yOffset:a(t),xOffset:s(e,t)}}function a(t){return t/c*(180/Math.PI)}function s(t,e){return e/c*(180/Math.PI)/Math.cos(t*Math.PI/180)}function u(t,e,n){return Object.keys(t).reduce(function(r,i,o){var a=i.split("-"),s=parseInt(a[0],10),u=parseInt(a[1],10),c={};if(n.field&&n.method){var h=l.i.getColumn(t[i].points,n.field);c[n.method]=l.i.statMap[n.method](h)}return Object.assign(c,{_id:o,coordinates:[e.xOffset*(u+.5)-180,e.yOffset*(s+.5)-90],rawData:t[i].points,count:t[i].count}),r.push(c),r},[])}e.a=r;var l=n(10),c=6378e3},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){s()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t,e){var r=t.dataArray,o=e.size,a=void 0===o?10:o,u=e.method,p=void 0===u?"sum":u,d=a/(2*Math.PI*f)*(256<<20)/2,v=r.map(function(t){var e=n.i(c.n)(t.coordinates),r=l()(e,2);return i({},t,{coordinates:[r[0],r[1]]})});return{dataArray:n.i(h.a)().radius(d).x(function(t){return t.coordinates[0]}).y(function(t){return t.coordinates[1]})(v).map(function(t,n){var r;if(e.field&&p){var i=c.i.getColumn(t,e.field);t[p]=c.i.statMap[p](i)}return r={},s()(r,e.method,t[p]),s()(r,"count",t.length),s()(r,"rawData",t),s()(r,"coordinates",[t.x,t.y]),s()(r,"_id",n),r}),radius:d,xOffset:d,yOffset:d,type:"hexagon"}}e.a=o;var a=n(9),s=n.n(a),u=n(58),l=n.n(u),c=n(10),h=n(1044),f=6378e3},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){s()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t,e){var n=e.sourceField,r=e.targetField,o=e.data,a={};return o.forEach(function(t){a[t[n]]=t}),t.dataArray=t.dataArray.map(function(t){var e=t[r];return i({},a[e],{},t)}),t}e.a=o;var a=n(9),s=n.n(a)},function(t,e,n){"use strict";function r(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.map(n)),t}e.a=r},function(t,e,n){"use strict";function r(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function i(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function o(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+1*t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+1*r}function a(t){if(0===t.length)throw new Error("mean requires at least one data point");return o(t)/t.length}n.d(e,"a",function(){return s});var s={min:i,max:r,mean:a,sum:o}},function(t,e,n){"use strict";function r(t,e){return t.map(function(t){return 1*t[e]})}e.a=r},function(t,e,n){"use strict";function r(t,e,n){var r=t.classList;for(var i in o)o.hasOwnProperty(i)&&r.remove("l7-".concat(n,"-anchor-").concat(i));r.add("l7-".concat(n,"-anchor-").concat(e))}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),e.c=r;var i;!function(t){t.CENTER="center",t.TOP="top",t["TOP-LEFT"]="top-left",t["TOP-RIGHT"]="top-right",t.BOTTOM="bottom",t["BOTTOM-LEFT"]="bottom-left",t.LEFT="left",t.RIGHT="right"}(i||(i={}));var o={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"}},function(t,e,n){"use strict";function r(t){var e=l.a(t),n=[0,0,0,0];return null!=e&&(n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.opacity),n}function i(t){var e=u()(t,3);return e[0]+256*e[1]+65536*e[2]-1}function o(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function a(t){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;for(var r=n.createLinearGradient(0,0,256,1),i=null,o=t.positions[0],a=t.positions[t.positions.length-1],s=0;s<t.colors.length;++s){var u=(t.positions[s]-o)/(a-o);r.addColorStop(u,t.colors[s])}return n.fillStyle=r,n.fillRect(0,0,256,1),i=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),new ImageData(i,256,1)}e.c=r,e.a=i,e.b=o,e.d=a;var s=n(58),u=n.n(s),l=n(81)},function(t,e,n){"use strict";function r(t){var e=t;return"string"==typeof t&&(e=document.getElementById(t)),e}function i(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function o(t){return i(t).split(/\s+/)}function a(t){if(!y)return t[0];for(var e in t)if(t[e]&&t[e]in y)return t[e];return t[0]}function s(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function u(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e){if(void 0!==t.classList)for(var n=o(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!h(t,e)){var a=p(t);f(t,(a?a+" ":"")+e)}}function c(t,e){void 0!==t.classList?t.classList.remove(e):f(t,i((" "+p(t)+" ").replace(" "+e+" "," ")))}function h(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=p(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function f(t,e){t instanceof HTMLElement?t.className=e:t.className.baseVal=e}function p(t){return t instanceof SVGElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function d(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function v(t,e){t.style[_]=e}function g(){if("function"==typeof Event)window.dispatchEvent(new Event("resize"));else{var t=window.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}}function m(t){var e=["padding: "+(t.height/2-8)+"px "+t.width/2+"px;","line-height: "+t.height+"px;","background-image: url("+t.toDataURL()+");"];console.log("%c\n",e.join(""))}Object.defineProperty(e,"__esModule",{value:!0}),e.getContainer=r,e.trim=i,e.splitWords=o,e.create=s,e.remove=u,e.addClass=l,e.removeClass=c,e.hasClass=h,e.setClass=f,e.getClass=p,e.empty=d,e.setTransform=v,e.triggerResize=g,e.printCanvas=m;var y=window.document.documentElement.style,_=a(["transform","WebkitTransform"])},function(t,e,n){"use strict";function r(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}e.a=r},function(t,e,n){"use strict";function r(t){var e=new XMLHttpRequest;e.open("GET",t.url,!0);for(var n in t.headers)t.headers.hasOwnProperty(n)&&e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}n.d(e,"a",function(){return _});var i=n(2),o=n.n(i),a=n(3),s=n.n(a),u=n(6),l=n.n(u),c=n(4),h=n.n(c),f=n(5),p=n.n(f),d=n(984),v=n.n(d),g=function(t){function e(t,n,r){var i;return o()(this,e),i=l()(this,h()(e).call(this,t)),i.status=void 0,i.url=void 0,i.status=n,i.url=r,i.name=i.constructor.name,i.message=t,i}return p()(e,t),s()(e,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),e}(v()(Error)),m=function(t,e){var n=r(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new g(n.statusText,n.status,t.url))},n.send(),n},y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",_=function(t,e){return m(t,function(t,n){if(t)e(t);else if(n){var r=new window.Image;r.crossOrigin="anonymous";var i=window.URL||window.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var o=new window.Blob([new Uint8Array(n.data)],{type:"image/png"});r.src=n.data.byteLength?i.createObjectURL(o):y}})}},function(t,e,n){"use strict";function r(t){var e=[1/0,1/0,-1/0,-1/0];return t.forEach(function(t){var n=t.coordinates;i(e,n)}),e}function i(t,e){return Array.isArray(e[0])?e.forEach(function(e){i(t,e)}):(t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])),t}function o(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1};t=u(t,e);var r=t[0],i=t[1],o=r*v/180,a=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return a=a*v/180,n.enable&&(o=Number(o.toFixed(n.decimal)),a=Number(a.toFixed(n.decimal))),3===t.length?[o,a,t[2]]:[o,a]}function a(t){if(void 0===t||null===t)throw new Error("lng is required");return(t>180||t<-180)&&(t%=360,t>180&&(t=-360+t),t<-180&&(t=360+t),0===t&&(t=0)),t}function s(t){if(void 0===t||null===t)throw new Error("lat is required");return(t>90||t<-90)&&(t%=180,t>90&&(t=-180+t),t<-90&&(t=180+t),0===t&&(t=0)),t}function u(t,e){if(!1===e)return t;var n=a(t[0]),r=s(t[1]);return r>85&&(r=85),r<-85&&(r=-85),3===t.length?[n,r,t[2]]:[n,r]}function l(t){var e=85.0511287798,n=Math.max(Math.min(e,t[1]),-e),r=256<<20,i=Math.PI/180,o=t[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=-.5/Math.PI;return i=.5,o=r*(s*o+.5),a=r*(u*a+i),[parseInt(o.toString(),10),parseInt(a.toString(),10)]}function c(t,e,r){var i=n.i(d.degreesToRadians)(e[1]-t[1]),o=n.i(d.degreesToRadians)(e[0]-t[0]),a=n.i(d.degreesToRadians)(t[1]),s=n.i(d.degreesToRadians)(e[1]),u=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(s);return n.i(d.radiansToLength)(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),"meters")}function h(t,e){var n=Math.abs(t[1][1]-t[0][1])*e,r=Math.abs(t[1][0]-t[0][0])*e;return[[t[0][0]-r,t[0][1]-n],[t[1][0]+r,t[1][1]+n]]}function f(t,e){return t[0][0]<=e[0][0]&&t[0][1]<=e[0][1]&&t[1][0]>=e[1][0]&&t[1][1]>=e[1][1]}e.f=r,e.d=o,e.e=l,e.c=c,e.b=h,e.a=f;var p=n(58),d=(n.n(p),n(207)),v=(n.n(d),2*Math.PI*6378137/2)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),i=n.n(r),o=n(3),a=n.n(o),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;i()(this,t),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=e,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return a()(t,[{key:"clear",value:function(){var t=this;this.order.forEach(function(e){t.delete(e)}),this.cache={},this.order=[]}},{key:"get",value:function(t){var e=this.cache[t];return e&&(this.deleteOrder(t),this.appendOrder(t)),e}},{key:"set",value:function(t,e){this.cache[t]?(this.delete(t),this.cache[t]=e,this.appendOrder(t)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[t]=e,this.appendOrder(t))}},{key:"delete",value:function(t){var e=this.cache[t];e&&(this.deleteCache(t),this.deleteOrder(t),this.destroy(e,t))}},{key:"deleteCache",value:function(t){delete this.cache[t]}},{key:"deleteOrder",value:function(t){var e=this.order.findIndex(function(e){return e===t});e>=0&&this.order.splice(e,1)}},{key:"appendOrder",value:function(t){this.order.push(t)}},{key:"defaultDestroy",value:function(t,e){return null}}]),t}()},function(t,e,n){"use strict";function r(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function i(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function o(t){if(0===t.length)return 0;for(var e,n=1*t[0],r=0,i=1;i<t.length;i++)e=n+1*t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+1*r}function a(t){if(0===t.length)throw new Error("mean requires at least one data point");return o(t)/t.length}function s(t){if(0===t.length)throw new Error("mean requires at least one data point");if(t.length<3)return t[0];t.sort();for(var e=t[0],n=NaN,r=0,i=1,o=1;o<t.length+1;o++)t[o]!==e?(i>r&&(r=i,n=e),i=1,e=t[o]):i++;return n}function u(t,e){return t.map(function(t){return t[e]})}function l(t,e){return c[t](e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"sum",function(){return o}),n.d(e,"max",function(){return r}),n.d(e,"min",function(){return i}),n.d(e,"mean",function(){return a}),n.d(e,"mode",function(){return s}),n.d(e,"statMap",function(){return c}),e.getColumn=u,e.getSatByColumn=l;var c={min:i,max:r,mean:a,sum:o,mode:s}},function(t,e,n){"use strict";var r=n(8);n.o(r,"Scene")&&n.d(e,"Scene",function(){return r.Scene}),n.o(r,"PointLayer")&&n.d(e,"PointLayer",function(){return r.PointLayer}),n.o(r,"Popup")&&n.d(e,"Popup",function(){return r.Popup});var i=n(817);n.d(e,"Scene",function(){return i.a});var o=(n(306),n(769));n.d(e,"PointLayer",function(){return o.a});var a=n(293);n.d(e,"Popup",function(){return a.a});n(10),n(842)},function(t,e,n){"use strict"},function(t,e,n){"use strict";var r=n(0),i=n(310);e.a=function(t,e){var o=t?n.i(r.clone)(t):[1,0,0,0,1,0,0,0,1];return n.i(r.each)(e,function(t){switch(t[0]){case"t":i.a.translate(o,o,[t[1],t[2]]);break;case"s":i.a.scale(o,o,[t[1],t[2]]);break;case"r":i.a.rotate(o,o,t[1]);break;case"m":i.a.multiply(o,o,t[1]);break;default:return!1}}),o}},function(t,e,n){"use strict";var r=n(684),i=(n.n(r),n(0));r.angle=function(t,e){var o=r.dot(t,e)/(r.length(t)*r.length(e));return Math.acos(n.i(i.clamp)(o,-1,1))},r.direction=function(t,e){return t[0]*e[1]-e[0]*t[1]},r.angleTo=function(t,e,n){var i=r.angle(t,e),o=r.direction(t,e)>=0;return n?o?2*Math.PI-i:i:o?i:2*Math.PI-i},r.vertical=function(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t},e.a=r},function(t,e,n){"use strict";var r=n(685);n.n(r);e.a=r},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}e.a=r},function(t,e,n){"use strict";var r=n(958);n.n(r)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(317),n(311),n(0)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(197),n(314)},function(t,e,n){"use strict";n(0),n(318),n(316)},function(t,e,n){"use strict";function r(t,e,n,r){var o={x:n.x-t.x,y:n.y-t.y},a={x:e.x-t.x,y:e.y-t.y},s={x:r.x-n.x,y:r.y-n.y},u=a.x*s.y-a.y*s.x,l=u*u,c=a.x*a.x+a.y*a.y,h=s.x*s.x+s.y*s.y,f=null;if(l>.001*c*h){var p=(o.x*s.y-o.y*s.x)/u,d=(o.x*a.y-o.y*a.x)/u;i(p,0,1)&&i(d,0,1)&&(f={x:t.x+p*a.x,y:t.y+p*a.y})}return f}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return t>=e&&t<=n};e.default=r},function(t,e,n){"use strict";function r(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e}function i(t,e){var n=!1;return c.each(t,function(t){if(l.default(t.from,t.to,e.from,e.to))return n=!0,!1}),n}function o(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function a(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function s(t,e){if(t.length<2||e.length<2)return!1;if(!a(o(t),o(e)))return!1;var n=!1;if(c.each(e,function(e){if(u.default(t,e[0],e[1]))return n=!0,!1}),n)return!0;if(c.each(t,function(t){if(u.default(e,t[0],t[1]))return n=!0,!1}),n)return!0;var s=r(t),l=r(e),h=!1;return c.each(l,function(t){if(i(s,t))return h=!0,!1}),h}Object.defineProperty(e,"__esModule",{value:!0});var u=n(858),l=n(854),c=n(0);e.default=s},function(t,e,n){"use strict";function r(t){if(!t)return null;if(i.default(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(a,function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(s,function(t,e){e&&o.push(+e)}),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""}),n}Object.defineProperty(e,"__esModule",{value:!0});var i=n(57),o="\t\n\v\f\r \u2028\u2029",a=new RegExp("([a-z])["+o+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+o+"]*,?["+o+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+o+"]*,?["+o+"]*","ig");e.default=r},function(t,e,n){"use strict";function r(t){var e=t||[];return o.default(e)?e:a.default(e)?(e=e.match(s),i.default(e,function(t,n){if(t=t.match(u),t[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}i.default(t,function(e,n){isNaN(e)||(t[n]=+e)}),e[n]=t}),e):void 0}Object.defineProperty(e,"__esModule",{value:!0});var i=n(90),o=n(57),a=n(78),s=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,u=/[^\s\,]+/gi;e.default=r},function(t,e,n){"use strict";function r(t){return Math.abs(t)<a?0:t<0?-1:1}function i(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function o(t,e,n){var o=!1,a=t.length;if(a<=2)return!1;for(var s=0;s<a;s++){var u=t[s],l=t[(s+1)%a];if(i(u,l,[e,n]))return!0;r(u[1]-n)>0!=r(l[1]-n)>0&&r(e-(n-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(o=!o)}return o}Object.defineProperty(e,"__esModule",{value:!0});var a=1e-6;e.default=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(136),a=n(322),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.i(r.__extends)(e,t),e.prototype.translate=function(t){t=n.i(o.a)(t);var e=this.values.indexOf(t);return-1===e&&(e=n.i(i.isNumber)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var r=this.translate(t);if(r>-1){var i=this.values[r],a=this.formatter;return i=a?a(i,e):n.i(o.b)(i,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;n.i(i.each)(e,function(t,r){e[r]=n.i(o.a)(t)}),e.sort(function(t,e){return t-e}),t.prototype.setDomain.call(this)},e}(a.a);e.a=s},function(t,e,n){"use strict";var r=n(1),i=n(135),o=n(133),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return n.i(r.__extends)(e,t),e.prototype.invert=function(t){var e,r=this.base,o=n.i(i.b)(r,this.max),a=this.rangeMin(),s=this.rangeMax()-a,u=this.positiveMin;if(u){if(0===t)return 0;e=n.i(i.b)(r,u/r);var l=1/(o-e)*s;if(t<l)return t/l*u}else e=n.i(i.b)(r,this.min);var c=(t-a)/s,h=c*(o-e)+e;return Math.pow(r,h)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=n.i(i.c)(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;if(e===r)return 0;if(t<=0)return 0;var o=this.base,a=this.positiveMin;a&&(r=1*a/o);return t<a?t/a/(n.i(i.b)(o,e)-n.i(i.b)(o,r)):(n.i(i.b)(o,t)-n.i(i.b)(o,r))/(n.i(i.b)(o,e)-n.i(i.b)(o,r))},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(135),o=n(133),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return n.i(r.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),r=this.exponent,o=n.i(i.a)(r,this.max),a=n.i(i.a)(r,this.min),s=e*(o-a)+a,u=s>=0?1:-1;return Math.pow(s,r)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;if(e===r)return 0;var o=this.exponent;return(n.i(i.a)(o,t)-n.i(i.a)(o,r))/(n.i(i.a)(o,e)-n.i(i.a)(o,r))},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(324),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return n.i(r.__extends)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(i.a);e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(136),a=n(323),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return n.i(r.__extends)(e,t),e.prototype.getText=function(t,e){var r=this.translate(t),i=this.formatter;return i?i(r,e):n.i(o.b)(r,this.mask)},e.prototype.scale=function(e){var r=e;return(n.i(i.isString)(r)||n.i(i.isDate)(r))&&(r=this.translate(r)),t.prototype.scale.call(this,r)},e.prototype.translate=function(t){return n.i(o.a)(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),r=this.getConfig("max");if(n.i(i.isNil)(e)&&n.i(i.isNumber)(e)||(this.min=this.translate(this.min)),n.i(i.isNil)(r)&&n.i(i.isNumber)(r)||(this.max=this.translate(this.max)),t&&t.length){var a=[],s=1/0,u=s,l=0;n.i(i.each)(t,function(t){var e=n.i(o.a)(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");s>e?(u=s,s=e):u>e&&(u=e),l<e&&(l=e),a.push(e)}),t.length>1&&(this.minTickInterval=u-s),n.i(i.isNil)(e)&&(this.min=s),n.i(i.isNil)(r)&&(this.max=l)}},e}(a.a);e.a=s},function(t,e,n){"use strict";function r(t){return o[t]}function i(t,e){if(r(t))throw new Error("type '"+t+"' existed.");o[t]=e}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var o=(n(107),{})},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(107),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return n.i(r.__extends)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&n.i(i.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t){var e=t.min,r=t.max,u=t.tickInterval,l=t.minLimit,c=t.maxLimit,h=n.i(o.a)(t);return n.i(i.isNil)(l)&&n.i(i.isNil)(c)?u?n.i(a.a)(e,r,u).ticks:h:n.i(s.a)(t,n.i(i.head)(h),n.i(i.last)(h))}e.a=r;var i=n(0),o=n(877),a=n(198),s=n(199)},function(t,e,n){"use strict";var r=n(325),i=n(866),o=n(868),a=n(869),s=n(870),u=n(871),l=n(872),c=n(326),h=n(875),f=n(873),p=n(874);n.d(e,"a",function(){return c.a}),n.i(c.b)("cat",r.a),n.i(c.b)("time-cat",f.a),n.i(c.b)("wilkinson-extended",o.a),n.i(c.b)("r-pretty",l.a),n.i(c.b)("time",h.a),n.i(c.b)("time-pretty",p.a),n.i(c.b)("log",a.a),n.i(c.b)("pow",s.a),n.i(c.b)("quantile",u.a),n.i(c.b)("d3-linear",i.a)},function(t,e,n){"use strict";function r(t){var e=t.min,r=t.max,u=t.tickCount,l=t.nice,c=t.tickInterval,h=t.minLimit,f=t.maxLimit,p=n.i(o.a)(e,r,u,l).ticks;return n.i(i.isNil)(h)&&n.i(i.isNil)(f)?c?n.i(a.a)(e,r,c).ticks:p:n.i(s.a)(t,n.i(i.head)(p),n.i(i.last)(p))}e.a=r;var i=n(0),o=n(327),a=n(198),s=n(199)},function(t,e,n){"use strict";function r(t){var e,r=t.base,o=t.tickCount,a=t.min,s=t.max,u=t.values,l=n.i(i.b)(r,s);if(a>0)e=Math.floor(n.i(i.b)(r,a));else{var c=n.i(i.c)(u,r,s);e=Math.floor(n.i(i.b)(r,c))}for(var h=l-e,f=Math.ceil(h/o),p=[],d=e;d<l+f;d+=f)p.push(Math.pow(r,d));return a<=0&&p.unshift(0),p}e.a=r;var i=n(135)},function(t,e,n){"use strict";function r(t){var e=t.exponent,r=t.tickCount,a=Math.ceil(n.i(i.a)(e,t.max)),s=Math.floor(n.i(i.a)(e,t.min));return n.i(o.a)(s,a,r).ticks.map(function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n})}e.a=r;var i=n(135),o=n(328)},function(t,e,n){"use strict";function r(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function i(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var i=n.slice().sort(function(t,e){return t-e}),o=[],a=0;a<e;a++){var s=a/(e-1);o.push(r(i,s))}return o}e.a=i},function(t,e,n){"use strict";function r(t){var e=t.min,r=t.max,u=t.tickCount,l=t.tickInterval,c=t.minLimit,h=t.maxLimit,f=n.i(a.a)(e,r,u).ticks;return n.i(i.isNil)(c)&&n.i(i.isNil)(h)?l?n.i(o.a)(e,r,l).ticks:f:n.i(s.a)(t,n.i(i.head)(f),n.i(i.last)(f))}e.a=r;var i=n(0),o=n(198),a=n(328),s=n(199)},function(t,e,n){"use strict";function r(t){var e=n.i(o.a)(t),r=n.i(i.last)(t.values);return r!==n.i(i.last)(e)&&e.push(r),e}e.a=r;var i=n(0),o=n(325)},function(t,e,n){"use strict";function r(t){return new Date(t).getFullYear()}function i(t){return new Date(t,0,1).getTime()}function o(t){return new Date(t).getMonth()}function a(t,e){var n=r(t),i=r(e),a=o(t);return 12*(i-n)+(o(e)-a)%12}function s(t,e){return new Date(t,e,1).getTime()}function u(t,e){return Math.ceil((e-t)/f.c)}function l(t,e){return Math.ceil((e-t)/f.d)}function c(t,e){return Math.ceil((e-t)/6e4)}function h(t){var e=t.min,n=t.max,h=t.minTickInterval,p=t.tickInterval,d=t.tickCount,v=[];p||(p=(n-e)/d,h&&p<h&&(p=h));var g=r(e);if(p>f.e)for(var m=r(n),y=Math.ceil(p/f.e),_=g;_<=m+y;_+=y)v.push(i(_));else if(p>f.f)for(var b=Math.ceil(p/f.f),x=o(e),w=a(e,n),_=0;_<=w+b;_+=b)v.push(s(g,_+x));else if(p>f.c)for(var S=new Date(e),E=S.getFullYear(),M=S.getMonth(),T=S.getDate(),C=Math.ceil(p/f.c),A=u(e,n),_=0;_<A+C;_+=C)v.push(new Date(E,M,T+_).getTime());else if(p>f.d)for(var S=new Date(e),E=S.getFullYear(),M=S.getMonth(),C=S.getDate(),P=S.getHours(),k=Math.ceil(p/f.d),I=l(e,n),_=0;_<=I+k;_+=k)v.push(new Date(E,M,C,P+_).getTime());else if(p>f.g)for(var O=c(e,n),j=Math.ceil(p/f.g),_=0;_<=O+j;_+=j)v.push(e+_*f.g);else{var L=p;L<f.h&&(L=f.h);for(var D=Math.floor(e/f.h)*f.h,R=Math.ceil((n-e)/f.h),B=Math.ceil(L/f.h),_=0;_<R+B;_+=B)v.push(D+_*f.h)}return v}e.a=h;var f=n(136)},function(t,e,n){"use strict";function r(t){var e=t.min,r=t.max,o=t.minTickInterval,a=t.tickInterval,s=t.tickCount;if(a)s=Math.ceil((r-e)/a);else{a=n.i(i.i)(e,r,s)[1];var u=(r-e)/a,l=u/s;l>1&&(a*=Math.ceil(l)),o&&a<o&&(a=o)}for(var c=[],h=e;h<r+a;h+=a)c.push(h);return c}e.a=r;var i=n(136)},function(t,e,n){"use strict";var r=n(0);e.a=function(t){return function(e,i,o,a){for(var s=n.i(r.isNil)(o)?0:o,u=n.i(r.isNil)(a)?e.length:a;s<u;){var l=s+u>>>1;t(e[l])>i?u=l:s=l+1}return s}}},function(t,e,n){"use strict";function r(t){var e=t.min,n=t.max,r=t.nice,i=t.tickCount,o=new c;return o.domain([e,n]),r&&o.nice(i),o.ticks(i)}function i(t,e,n){var r,i,a,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=o(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(t-u)/s;return r&&a.reverse(),a}function o(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=s?10:o>=u?5:o>=l?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=s?10:o>=u?5:o>=l?2:1)}e.a=r;var a=5,s=Math.sqrt(50),u=Math.sqrt(10),l=Math.sqrt(2),c=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=a);var r,i=this._domain.slice(),s=0,u=this._domain.length-1,l=this._domain[s],c=this._domain[u];return c<l&&(e=[c,l],l=e[0],c=e[1],n=[u,s],s=n[0],u=n[1]),r=o(l,c,t),r>0?(l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r,r=o(l,c,t)):r<0&&(l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r,r=o(l,c,t)),r>0?(i[s]=Math.floor(l/r)*r,i[u]=Math.ceil(c/r)*r,this.domain(i)):r<0&&(i[s]=Math.ceil(l*r)/r,i[u]=Math.floor(c*r)/r,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=a),i(this._domain[0],this._domain[this._domain.length-1],t||a)},t}()},function(t,e,n){"use strict";var r=n(201),i=n(33),o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o=t[0],a=1;a<t.length;a++){var s=t[a];n.i(i.a)(s)&&(s=s.prototype),n.i(r.a)(o.prototype,s)}};e.a=o},function(t,e,n){"use strict";var r=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e.a=r},function(t,e,n){"use strict";var r=function(t,e,n){return t<e?e:t>n?n:t};e.a=r},function(t,e,n){"use strict";function r(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}e.a=r},function(t,e,n){"use strict";var r=n(18),i=function(t){if("object"!=typeof t||null===t)return t;var e;if(n.i(r.a)(t)){e=[];for(var o=0,a=t.length;o<a;o++)"object"==typeof t[o]&&null!=t[o]?e[o]=i(t[o]):e[o]=t[o]}else{e={};for(var s in t)"object"==typeof t[s]&&null!=t[s]?e[s]=i(t[s]):e[s]=t[s]}return e};e.a=i},function(t,e,n){"use strict";function r(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}e.a=r},function(t,e,n){"use strict";function r(t,e,s,u){s=s||0,u=u||a;for(var l in e)if(e.hasOwnProperty(l)){var c=e[l];null!==c&&n.i(o.a)(c)?(n.i(o.a)(t[l])||(t[l]={}),s<u?r(t[l],c,s+1,u):t[l]=e[l]):n.i(i.a)(c)?(t[l]=[],t[l]=t[l].concat(c)):void 0!==c&&(t[l]=c)}}var i=n(18),o=n(108),a=5,s=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)r(t,e[i]);return t};e.a=s},function(t,e,n){"use strict";var r=n(329),i=n(137),o=function(t,e){return void 0===e&&(e=[]),n.i(r.a)(t,function(t){return!n.i(i.a)(e,t)})};e.a=o},function(t,e,n){"use strict";function r(t,e){return!(!n.i(i.a)(t)&&!n.i(o.a)(t))&&t[t.length-1]===e}var i=n(18),o=n(77);e.a=r},function(t,e,n){"use strict";var r=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0};e.a=r},function(t,e,n){"use strict";var r=n(201),i=n(33),o=function(t,e,o,a){n.i(i.a)(e)||(o=e,e=t,t=function(){});var s=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},u=s(e.prototype,t);return t.prototype=n.i(r.a)(u,t.prototype),t.superclass=s(e.prototype,e),n.i(r.a)(u,o),n.i(r.a)(t,a),t};e.a=o},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}e.a=r},function(t,e,n){"use strict";function r(t,e){if(!n.i(a.a)(t))return null;var r;if(n.i(i.a)(e)&&(r=e),n.i(s.a)(e)&&(r=function(t){return n.i(o.a)(t,e)}),r)for(var u=0;u<t.length;u+=1)if(r(t[u]))return t[u];return null}var i=n(33),o=n(335),a=n(18),s=n(108);e.a=r},function(t,e,n){"use strict";var r=n(66),i=n(18),o=function(t,e){for(var o=null,a=0;a<t.length;a++){var s=t[a],u=s[e];if(!n.i(r.a)(u)){o=n.i(i.a)(u)?u[0]:u;break}}return o};e.a=o},function(t,e,n){"use strict";var r=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};e.a=r},function(t,e,n){"use strict";var r=n(18),i=function(t,e){if(void 0===e&&(e=[]),n.i(r.a)(t))for(var o=0;o<t.length;o+=1)i(t[o],e);else e.push(t);return e};e.a=i},function(t,e,n){"use strict";var r=n(18),i=function(t){if(!n.i(r.a)(t))return[];for(var e=[],i=0;i<t.length;i++)e=e.concat(t[i]);return e};e.a=i},function(t,e,n){"use strict";var r=n(55);e.a=r.a},function(t,e,n){"use strict";var r=n(18),i=function(t){var e=t.filter(function(t){return!isNaN(t)});if(!e.length)return{min:0,max:0};if(n.i(r.a)(t[0])){for(var i=[],o=0;o<t.length;o++)i=i.concat(t[o]);e=i}var a=Math.max.apply(null,e);return{min:Math.min.apply(null,e),max:a}};e.a=i},function(t,e,n){"use strict";function r(t,e){return t["_wrap_"+e]}e.a=r},function(t,e,n){"use strict";var r=n(77);e.a=function(t,e,i){for(var o=0,a=n.i(r.a)(e)?e.split("."):e;t&&o<a.length;)t=t[a[o++]];return void 0===t||o<a.length?i:t}},function(t,e,n){"use strict";var r=n(332);e.a=function(t,e){if(!e)return[t];var i=n.i(r.a)(t,e),o=[];for(var a in i)o.push(i[a]);return o}},function(t,e,n){"use strict";var r=n(333);e.a=r.a},function(t,e,n){"use strict";var r=n(137),i=n(340);e.a=function(t,e){return n.i(r.a)(n.i(i.a)(t),e)}},function(t,e,n){"use strict";function r(t){if(n.i(i.a)(t))return t[0]}e.a=r;var i=n(32)},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var r=n(32),i=function(t,e){if(!n.i(r.a)(t))return-1;var i=Array.prototype.indexOf;if(i)return i.call(t,e);for(var o=-1,a=0;a<t.length;a++)if(t[a]===e){o=a;break}return o};e.a=i},function(t,e,n){"use strict";var r=n(43),i=function(t){return n.i(r.a)(t,"Arguments")};e.a=i},function(t,e,n){"use strict";var r=n(43),i=function(t){return n.i(r.a)(t,"Boolean")};e.a=i},function(t,e,n){"use strict";var r=n(43),i=function(t){return n.i(r.a)(t,"Date")};e.a=i},function(t,e,n){"use strict";var r=n(56),i=function(t){return n.i(r.a)(t)&&t%1!=0};e.a=i},function(t,e,n){"use strict";var r=function(t){return t instanceof Element||t instanceof HTMLDocument};e.a=r},function(t,e,n){"use strict";function r(t){if(n.i(i.a)(t))return!0;if(n.i(o.a)(t))return!t.length;var e=n.i(a.a)(t);if("Map"===e||"Set"===e)return!t.size;if(n.i(s.a)(t))return!Object.keys(t).length;for(var r in t)if(u.call(t,r))return!1;return!0}var i=n(66),o=n(32),a=n(330),s=n(336),u=Object.prototype.hasOwnProperty;e.a=r},function(t,e,n){"use strict";var r=n(33),i=n(334);e.a=function(t,e,o){return n.i(r.a)(o)?!!o(t,e):n.i(i.a)(t,e)}},function(t,e,n){"use strict";var r=n(43),i=function(t){return n.i(r.a)(t,"Error")};e.a=i},function(t,e,n){"use strict";var r=n(56),i=function(t){return n.i(r.a)(t)&&t%2==0};e.a=i},function(t,e,n){"use strict";var r=n(56);e.a=function(t){return n.i(r.a)(t)&&isFinite(t)}},function(t,e,n){"use strict";var r=n(56),i=Number.isInteger?Number.isInteger:function(t){return n.i(r.a)(t)&&t%1==0};e.a=i},function(t,e,n){"use strict";var r=n(56),i=function(t){return n.i(r.a)(t)&&t<0};e.a=i},function(t,e,n){"use strict";var r=function(t){return null===t};e.a=r},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=i),Math.abs(t-e)<n}e.a=r;var i=1e-5},function(t,e,n){"use strict";var r=n(56),i=function(t){return n.i(r.a)(t)&&t%2!=0};e.a=i},function(t,e,n){"use strict";var r=n(56),i=function(t){return n.i(r.a)(t)&&t>0};e.a=i},function(t,e,n){"use strict";var r=n(43),i=function(t){return n.i(r.a)(t,"RegExp")};e.a=i},function(t,e,n){"use strict";var r=function(t){return void 0===t};e.a=r},function(t,e,n){"use strict";function r(t){if(n.i(i.a)(t)){var e=t;return e[e.length-1]}}e.a=r;var i=n(32)},function(t,e,n){"use strict";var r=n(109),i=function(t){return n.i(r.a)(t).toLowerCase()};e.a=i},function(t,e,n){"use strict";var r=n(109),i=function(t){var e=n.i(r.a)(t);return e.charAt(0).toLowerCase()+e.substring(1)};e.a=i},function(t,e,n){"use strict";var r=n(66),i=n(138),o=function(t){return t};e.a=function(t,e){void 0===e&&(e=o);var a={};return n.i(i.a)(t)&&!n.i(r.a)(t)&&Object.keys(t).forEach(function(n){a[n]=e(t[n],n)}),a}},function(t,e,n){"use strict";var r=n(32),i=function(t,e){if(!n.i(r.a)(t))return t;for(var i=[],o=0;o<t.length;o++){var a=t[o];i.push(e(a,o))}return i};e.a=i},function(t,e,n){"use strict";var r=n(55),i=n(18),o=n(33);e.a=function(t,e){if(n.i(i.a)(t)){var a,s=t[0];a=n.i(o.a)(e)?e(t[0]):t[0][e];var u;return n.i(r.a)(t,function(t){(u=n.i(o.a)(e)?e(t):t[e])>a&&(s=t,a=u)}),s}}},function(t,e,n){"use strict";var r=n(33);e.a=function(t,e){if(!n.i(r.a)(t))throw new TypeError("Expected a function");var i=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e?e.apply(this,n):n[0],a=i.cache;if(a.has(o))return a.get(o);var s=t.apply(this,n);return a.set(o,s),s};return i.cache=new Map,i}},function(t,e,n){"use strict";var r=n(55),i=n(18),o=n(33);e.a=function(t,e){if(n.i(i.a)(t)){var a,s=t[0];a=n.i(o.a)(e)?e(t[0]):t[0][e];var u;return n.i(r.a)(t,function(t){(u=n.i(o.a)(e)?e(t):t[e])<a&&(s=t,a=u)}),s}}},function(t,e,n){"use strict";var r=function(t,e){return(t%e+e)%e};e.a=r},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";function r(t){var e=i[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,i[t]=e}return e}var i={};e.a=r},function(t,e,n){"use strict";function r(t){var e=0,r=0,o=0,a=0;return n.i(i.a)(t)?1===t.length?e=r=o=a=t[0]:2===t.length?(e=o=t[0],r=a=t[1]):3===t.length?(e=t[0],r=a=t[1],o=t[2]):(e=t[0],r=t[1],o=t[2],a=t[3]):e=r=o=a=t,{r1:e,r2:r,r3:o,r4:a}}var i=n(18);e.a=r},function(t,e,n){"use strict";var r=n(55),i=n(108),o=Object.prototype.hasOwnProperty;e.a=function(t,e){if(null===t||!n.i(i.a)(t))return{};var a={};return n.i(r.a)(e,function(e){o.call(t,e)&&(a[e]=t[e])}),a}},function(t,e,n){"use strict";var r=Array.prototype,i=r.splice,o=r.indexOf,a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var a=e[r],s=-1;(s=o.call(t,a))>-1;)i.call(t,s,1);return t};e.a=a},function(t,e,n){"use strict";var r=n(55),i=n(18),o=n(108),a=function(t,e,a){if(!n.i(i.a)(t)&&!n.i(o.a)(t))return t;var s=a;return n.i(r.a)(t,function(t,n){s=e(s,t,n)}),s};e.a=a},function(t,e,n){"use strict";var r=n(32),i=n(338),o=function(t,e){var o=[];if(!n.i(r.a)(t))return o;for(var a=-1,s=[],u=t.length;++a<u;){var l=t[a];e(l,a,t)&&(o.push(l),s.push(a))}return n.i(i.a)(t,s),o};e.a=o},function(t,e,n){"use strict";function r(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}e.a=r},function(t,e,n){"use strict";var r=n(138),i=n(77),o=n(56);e.a=function(t,e,a){var s=t,u=n.i(i.a)(e)?e.split("."):e;return u.forEach(function(t,e){e<u.length-1?(n.i(r.a)(s[t])||(s[t]=n.i(o.a)(u[e+1])?[]:{}),s=s[t]):s[t]=a}),t}},function(t,e,n){"use strict";function r(t){return n.i(i.a)(t)?0:n.i(o.a)(t)?t.length:Object.keys(t).length}e.a=r;var i=n(66),o=n(32)},function(t,e,n){"use strict";var r=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1};e.a=r},function(t,e,n){"use strict";function r(t,e){var r;if(n.i(a.a)(e))r=function(t,n){return e(t)-e(n)};else{var s=[];n.i(o.a)(e)?s.push(e):n.i(i.a)(e)&&(s=e),r=function(t,e){for(var n=0;n<s.length;n+=1){var r=s[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(r),t}var i=n(18),o=n(77),a=n(33);e.a=r},function(t,e,n){"use strict";function r(t,e){return!(!n.i(i.a)(t)&&!n.i(o.a)(t))&&t[0]===e}var i=n(18),o=n(77);e.a=r},function(t,e,n){"use strict";function r(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t}e.a=r},function(t,e,n){"use strict";e.a=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l}},function(t,e,n){"use strict";var r=n(32);e.a=function(t){return n.i(r.a)(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){"use strict";var r=180/Math.PI,i=function(t){return r*t};e.a=i},function(t,e,n){"use strict";e.a=parseInt},function(t,e,n){"use strict";var r=Math.PI/180,i=function(t){return r*t};e.a=i},function(t,e,n){"use strict";var r=n(339),i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.i(r.a)([].concat.apply([],t))};e.a=i},function(t,e,n){"use strict";var r={};e.a=function(t){return t=t||"g",r[t]?r[t]+=1:r[t]=1,t+r[t]}},function(t,e,n){"use strict";var r=n(109),i=function(t){return n.i(r.a)(t).toUpperCase()};e.a=i},function(t,e,n){"use strict";var r=n(109),i=function(t){var e=n.i(r.a)(t);return e.charAt(0).toUpperCase()+e.substring(1)};e.a=i},function(t,e,n){"use strict";var r=n(18),i=n(66);e.a=function(t,e){for(var o=[],a={},s=0;s<t.length;s++){var u=t[s],l=u[e];if(!n.i(i.a)(l)){n.i(r.a)(l)||(l=[l]);for(var c=0;c<l.length;c++){var h=l[c];a[h]||(o.push(h),a[h]=!0)}}}return o}},function(t,e,n){"use strict";function r(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(959),i=n(957),o=n(78),a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(o.default(t)||o.default(e))return!1;if(i.default(t)||i.default(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length&&(n=a(t[s],e[s]));s++);return n}if(r.default(t)||r.default(e)){var u=Object.keys(t),l=Object.keys(e);if(u.length!==l.length)return!1;for(var n=!0,s=0;s<u.length&&(n=a(t[u[s]],e[u[s]]));s++);return n}return!1};e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return"object"==typeof t&&null!==t};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(110);e.default=function(t){return r.default(t)?"":t.toString()}},function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n},function(t,e,n){function r(t){if(Array.isArray(t))return i(t)}var i=n(345);t.exports=r},function(t,e,n){function r(e,n,a){return o()?t.exports=r=Reflect.construct:t.exports=r=function(t,e,n){var r=[null];r.push.apply(r,e);var o=Function.bind.apply(t,r),a=new o;return n&&i(a,n.prototype),a},r.apply(null,arguments)}var i=n(206),o=n(977);t.exports=r},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}e.a=r},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return n.i(i.a)(t)}e.a=r;var i=n(346)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=r},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.a=r},function(t,e,n){"use strict";function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n.i(i.a)(t,e)}e.a=r;var i=n(974)},function(t,e,n){"use strict";function r(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}e.a=r},function(t,e,n){"use strict";function r(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}e.a=r},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.a=r},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.a=r},function(t,e,n){"use strict";function r(t,e){return!e||"object"!==n.i(i.a)(e)&&"function"!=typeof e?n.i(o.a)(t):e}e.a=r;var i=n(111),o=n(347)},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=r},function(t,e,n){"use strict";function r(t){return n.i(i.a)(t)||n.i(o.a)(t)||n.i(a.a)(t)||n.i(s.a)()}e.a=r;var i=n(965),o=n(969),a=n(348),s=n(972)},function(t,e){function n(t){return-1!==Function.toString.call(t).indexOf("[native code]")}t.exports=n},function(t,e){function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}t.exports=n},function(t,e){function n(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}t.exports=n},function(t,e){function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}t.exports=n},function(t,e){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n},function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n},function(t,e){function n(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}t.exports=n},function(t,e,n){function r(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}var i=n(4);t.exports=r},function(t,e,n){function r(e){var n="function"==typeof Map?new Map:void 0;return t.exports=r=function(t){function e(){return s(t,arguments,i(this).constructor)}if(null===t||!a(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},r(e)}var i=n(4),o=n(206),a=n(976),s=n(963);t.exports=r},function(t,e,n){var r=function(t){"use strict";function e(t,e,n,i){var o=e&&e.prototype instanceof r?e:r,a=Object.create(o.prototype),s=new f(i||[]);return a._invoke=u(t,n,s),a}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t,e){function r(i,o,a,s){var u=n(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&m.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}function i(t,n){function i(){return new e(function(e,i){r(t,n,e,i)})}return o=o?o.then(i,i):i()}var o;this._invoke=i}function u(t,e,r){var i=w;return function(o,a){if(i===E)throw new Error("Generator is already running");if(i===M){if("throw"===o)throw a;return d()}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=l(s,r);if(u){if(u===T)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===w)throw i=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=E;var c=n(t,e,r);if("normal"===c.type){if(i=r.done?M:S,c.arg===T)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=M,r.method="throw",r.arg=c.arg)}}}function l(t,e){var r=t.iterator[e.method];if(r===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,l(t,e),"throw"===e.method))return T;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var i=n(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,T;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,T):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function f(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function p(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:d}}function d(){return{value:v,done:!0}}var v,g=Object.prototype,m=g.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},_=y.iterator||"@@iterator",b=y.asyncIterator||"@@asyncIterator",x=y.toStringTag||"@@toStringTag";t.wrap=e;var w="suspendedStart",S="suspendedYield",E="executing",M="completed",T={},C={};C[_]=function(){return this};var A=Object.getPrototypeOf,P=A&&A(A(p([])));P&&P!==g&&m.call(P,_)&&(C=P);var k=o.prototype=r.prototype=Object.create(C);return i.prototype=k.constructor=o,o.constructor=i,o[x]=i.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},a(s.prototype),s.prototype[b]=function(){return this},t.AsyncIterator=s,t.async=function(n,r,i,o,a){void 0===a&&(a=Promise);var u=new s(e(n,r,i,o),a);return t.isGeneratorFunction(r)?u:u.next().then(function(t){return t.done?t.value:u.next()})},a(k),k[x]="Generator",k[_]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=p,f.prototype={constructor:f,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),T}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),T}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){function r(t){var e,n=0;switch(t.type){case"Polygon":return i(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=i(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=r(t.geometries[e]);return n}}function i(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e,n,r,i,o,u,l,c=0,h=t.length;if(h>2){for(l=0;l<h;l++)l===h-2?(i=h-2,o=h-1,u=0):l===h-1?(i=h-1,o=0,u=1):(i=l,o=l+1,u=l+2),e=t[i],n=t[o],r=t[u],c+=(a(r[0])-a(e[0]))*Math.sin(a(n[1]));c=c*s.RADIUS*s.RADIUS/2}return c}function a(t){return t*Math.PI/180}var s=n(1258);t.exports.geometry=r,t.exports.ring=o},function(t,e,n){"use strict";function r(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(t,e,n,r,i,a,s){for(var u=0;u<e;u++){for(var l=0;l<n;l++)r[l]=t[l*e+u];for(o(r,i,a,s,n),l=0;l<n;l++)t[l*e+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<e;u++)r[u]=t[l*e+u];for(o(r,i,a,s,e),u=0;u<e;u++)t[l*e+u]=Math.sqrt(i[u])}}function o(t,e,n,r,i){n[0]=0,r[0]=-a,r[1]=+a;for(var o=1,s=0;o<i;o++){for(var u=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);u<=r[s];)s--,u=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);s++,n[s]=o,r[s]=u,r[s+1]=+a}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;e[o]=(o-n[s])*(o-n[s])+t[n[s]]}}t.exports=r,t.exports.default=r;var a=1e20;r.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=e.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var s=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},function(t,e,n){"use strict";n(989),n(352),n(353)},function(t,e,n){"use strict";var r=n(91),i=n(92),o=n(352);!function(){function t(e){var i=e.id,o=e.stats;n.i(r.a)(this,t),this.id=i,this.stats={},this._initializeStats(o),Object.seal(this)}n.i(i.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach(function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}},{key:"_initializeStats",value:function(){var t=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){return t._getOrCreate(e)})}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(t instanceof o.a?this.stats[e]=t:this.stats[e]=new o.a(e,n)),this.stats[e]}},{key:"size",get:function(){return Object.keys(this.stats).length}}])}()},function(t,e,n){"use strict";function r(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function i(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(t){if(t.length>1&&h.isNumber(t[0])&&h.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return o(t[0]);throw new Error("coordinates must only contain numbers")}function a(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function s(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function u(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function l(t){return"Feature"===t.type?t.geometry:t}function c(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}Object.defineProperty(e,"__esModule",{value:!0});var h=n(207);e.getCoord=r,e.getCoords=i,e.containsNumber=o,e.geojsonType=a,e.featureOf=s,e.collectionOf=u,e.getGeom=l,e.getType=c},function(t,e,n){"use strict";function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,h,f=0,p=0,d=t.type,v="FeatureCollection"===d,g="Feature"===d,m=v?t.features.length:1,y=0;y<m;y++){c=v?t.features[y].geometry:g?t.geometry:t,h=!!c&&"GeometryCollection"===c.type,u=h?c.geometries.length:1;for(var _=0;_<u;_++){var b=0,x=0;if(null!==(s=h?c.geometries[_]:c)){l=s.coordinates;var w=s.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,p,y,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,b,x))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-f;o++){if(!1===e(l[i][o],p,y,b,x))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-f;a++){if(!1===e(l[i][o][a],p,y,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e,n,i){var o=n;return r(t,function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)},i),o}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e,n){var r=n;return o(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function u(t,e,n){var r=n;return s(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function l(t){var e=[];return r(t,function(t){e.push(t)}),e}function c(t,e){var n,r,i,o,a,s,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,v=p?t.features.length:1;for(n=0;n<v;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,u=!!s&&"GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function h(t,e,n){var r=n;return c(t,function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)}),r}function f(t,e){c(t,function(t,n,r,i,o){var a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":if(!1===e(b.feature(t,r,{bbox:i,id:o}),n,0))return!1;return}var s;switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u],c={type:s,coordinates:l};if(!1===e(b.feature(c,r),n,u))return!1}})}function p(t,e,n){var r=n;return f(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function d(t,e){f(t,function(t,n,i){var o=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var s,u=0,l=0,c=0;return!1!==r(t,function(r,a,h,f,p){if(void 0===s||n>u||f>l||p>c)return s=r,u=n,l=f,c=p,void(o=0);var d=b.lineString([s,r],t.properties);if(!1===e(d,n,i,p,o))return!1;o++,s=r})&&void 0}}})}function v(t,e,n){var r=n,i=!1;return d(t,function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0}),r}function g(t,e){if(!t)throw new Error("geojson is required");f(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(b.lineString(o[a],t.properties),n,r,a))return!1}}})}function m(t,e,n){var r=n;return g(t,function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)}),r}function y(t,e){if(e=e||{},!b.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),b.lineString([u[a],u[a+1]],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),b.lineString([u[o][a],u[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),b.lineString([u[i][a],u[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),b.lineString([u[i][o][a],u[i][o][a+1]],s,e)}throw new Error("geojson is invalid")}function _(t,e){if(e=e||{},!b.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return b.point(u,s,e);case"MultiPoint":return i<0&&(i=u.length+i),b.point(u[i],s,e);case"LineString":return a<0&&(a=u.length+a),b.point(u[a],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),b.point(u[o][a],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),b.point(u[i][a],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),b.point(u[i][o][a],s,e)}throw new Error("geojson is invalid")}Object.defineProperty(e,"__esModule",{value:!0});var b=n(207);e.coordEach=r,e.coordReduce=i,e.propEach=o,e.propReduce=a,e.featureEach=s,e.featureReduce=u,e.coordAll=l,e.geomEach=c,e.geomReduce=h,e.flattenEach=f,e.flattenReduce=p,e.segmentEach=d,e.segmentReduce=v,e.lineEach=g,e.lineReduce=m,e.findSegment=y,e.findPoint=_},function(t,e,n){"use strict";(function(e){function n(t){s.length||(a(),u=!0),s[s.length]=t}function r(){for(;l<s.length;){var t=l;if(l+=1,s[t].call(),l>c){for(var e=0,n=s.length-l;e<n;e++)s[e]=s[e+l];s.length-=l,l=0}}s.length=0,l=0,u=!1}function i(t){var e=1,n=new f(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function o(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var a,s=[],u=!1,l=0,c=1024,h=void 0!==e?e:self,f=h.MutationObserver||h.WebKitMutationObserver;a="function"==typeof f?i(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(e,n(46))},function(t,e,n){"use strict";(function(e){function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function a(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(w.isFunction(t)){if(M)return t.name;var e=t.toString(),n=e.match(C);return n&&n[1]}}function u(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function l(t){if(M||!w.isFunction(t))return w.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return u(l(t.actual),128)+" "+t.operator+" "+u(l(t.expected),128)}function h(t,e,n,r,i){throw new T.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function f(t,e){t||h(t,!0,e,"==",T.ok)}function p(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(w.isDate(t)&&w.isDate(e))return t.getTime()===e.getTime();if(w.isRegExp(t)&&w.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(a(t)&&a(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),v(t,e,n,s))}return n?t===e:t==e}function d(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(w.isPrimitive(t)||w.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=d(t),o=d(e);if(i&&!o||!i&&o)return!1;if(i)return t=E.call(t),e=E.call(e),p(t,e,n);var a,s,u=A(t),l=A(e);if(u.length!==l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;s>=0;s--)if(u[s]!==l[s])return!1;for(s=u.length-1;s>=0;s--)if(a=u[s],!p(t[a],e[a],n,r))return!1;return!0}function g(t,e,n){p(t,e,!0)&&h(t,e,n,"notDeepStrictEqual",g)}function m(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function y(t){var e;try{t()}catch(t){e=t}return e}function _(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=y(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&h(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&w.isError(i),s=!t&&i&&!n;if((a&&o&&m(i,n)||s)&&h(i,n,"Got unwanted exception"+r),t&&i&&n&&!m(i,n)||!t&&i)throw i}function b(t,e){t||h(t,!0,e,"==",b)}var x=n(428),w=n(1252),S=Object.prototype.hasOwnProperty,E=Array.prototype.slice,M=function(){return"foo"===function(){}.name}(),T=t.exports=f,C=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=s(e),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},w.inherits(T.AssertionError,Error),T.fail=h,T.ok=f,T.equal=function(t,e,n){t!=e&&h(t,e,n,"==",T.equal)},T.notEqual=function(t,e,n){t==e&&h(t,e,n,"!=",T.notEqual)},T.deepEqual=function(t,e,n){p(t,e,!1)||h(t,e,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(t,e,n){p(t,e,!0)||h(t,e,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(t,e,n){p(t,e,!1)&&h(t,e,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=g,T.strictEqual=function(t,e,n){t!==e&&h(t,e,n,"===",T.strictEqual)},T.notStrictEqual=function(t,e,n){t===e&&h(t,e,n,"!==",T.notStrictEqual)},T.throws=function(t,e,n){_(!0,t,e,n)},T.doesNotThrow=function(t,e,n){_(!1,t,e,n)},T.ifError=function(t){if(t)throw t},T.strict=x(b,T,{equal:T.strictEqual,deepEqual:T.deepStrictEqual,notEqual:T.notStrictEqual,notDeepEqual:T.notDeepStrictEqual}),T.strict.strict=T.strict;var A=Object.keys||function(t){var e=[];for(var n in t)S.call(t,n)&&e.push(n);return e}}).call(e,n(46))},function(t,e,n){t.exports=n(1245)},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n(360)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(354),n(355),n(995),n(358),n(999),n(361),n(363),n(362)},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(113)},function(t,e,n){"use strict";n(93),n(113),n(208)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(93)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(354),n(93),n(113),n(208)},function(t,e,n){"use strict";n(357)},function(t,e,n){"use strict";n(364)},function(t,e,n){"use strict"},function(t,e,n){"use strict";var r=(n(1014),n(1015),n(209));n.d(e,"a",function(){return r.a});n(1013),n(1016),n(1011)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(209)},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t){n.add(t)});else if(t){var i=-1,o=t.length;if(null==e)for(;++i<o;)n.add(t[i]);else for(;++i<o;)n.add(e(t[i],i,t))}return n}var o=n(209),a=o.a.prototype;r.prototype=i.prototype={constructor:r,has:a.has,add:function(t){return t+="",this[o.b+t]=t,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each}},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(t){if(t instanceof o)return new o(t.h,t.s,t.l,t.opacity);t instanceof s.b||(t=n.i(s.c)(t));var e=t.r/255,r=t.g/255,i=t.b/255,a=(g*i+d*e-v*r)/(g+d-v),l=i-a,c=(p*(r-a)-h*l)/f,m=Math.sqrt(c*c+l*l)/(p*a*(1-a)),y=m?Math.atan2(c,l)*u.a-120:NaN;return new o(y<0?y+360:y,m,a,t.opacity)}function i(t,e,n,i){return 1===arguments.length?r(t):new o(t,e,n,null==i?1:i)}function o(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}e.a=i;var a=n(211),s=n(210),u=n(366),l=-.14861,c=1.78277,h=-.29227,f=-.90649,p=1.97294,d=p*f,v=p*c,g=c*h-f*l;n.i(a.a)(o,i,n.i(a.b)(s.d,{brighter:function(t){return t=null==t?s.e:Math.pow(s.e,t),new o(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?s.f:Math.pow(s.f,t),new o(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*u.b,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new s.b(255*(e+n*(l*r+c*i)),255*(e+n*(h*r+f*i)),255*(e+n*(p*r)),this.opacity)}}))},function(t,e,n){"use strict";function r(t){if(t instanceof o)return new o(t.l,t.a,t.b,t.opacity);if(t instanceof f)return p(t);t instanceof v.b||(t=n.i(v.c)(t));var e,r,i=l(t.r),s=l(t.g),u=l(t.b),c=a((.2225045*i+.7168786*s+.0606169*u)/_);return i===s&&s===u?e=r=c:(e=a((.4360747*i+.3850649*s+.1430804*u)/y),r=a((.0139322*i+.0971045*s+.7141733*u)/b)),new o(116*c-16,500*(e-c),200*(c-r),t.opacity)}function i(t,e,n,i){return 1===arguments.length?r(t):new o(t,e,n,null==i?1:i)}function o(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function a(t){return t>E?Math.pow(t,1/3):t/S+x}function s(t){return t>w?t*t*t:S*(t-x)}function u(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function l(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function c(t){if(t instanceof f)return new f(t.h,t.c,t.l,t.opacity);if(t instanceof o||(t=r(t)),0===t.a&&0===t.b)return new f(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*g.a;return new f(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function h(t,e,n,r){return 1===arguments.length?c(t):new f(t,e,n,null==r?1:r)}function f(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function p(t){if(isNaN(t.h))return new o(t.l,0,0,t.opacity);var e=t.h*g.b;return new o(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}e.b=i,e.a=h;var d=n(211),v=n(210),g=n(366),m=18,y=.96422,_=1,b=.82521,x=4/29,w=6/29,S=3*w*w,E=w*w*w;n.i(d.a)(o,i,n.i(d.b)(v.d,{brighter:function(t){return new o(this.l+m*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new o(this.l-m*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=y*s(e),t=_*s(t),n=b*s(n),new v.b(u(3.1338561*e-1.6168667*t-.4906146*n),u(-.9787684*e+1.9161415*t+.033454*n),u(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),n.i(d.a)(f,h,n.i(d.b)(v.d,{brighter:function(t){return new f(this.h,this.c,this.l+m*(null==t?1:t),this.opacity)},darker:function(t){return new f(this.h,this.c,this.l-m*(null==t?1:t),this.opacity)},rgb:function(){return p(this).rgb()}}))},function(t,e,n){"use strict";new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(212),i=n.i(r.a)(","),o=i.parse;i.parseRows,i.format,i.formatBody,i.formatRows,i.formatRow,i.formatValue},function(t,e,n){"use strict";var r=(n(212),n(1020));n.d(e,"a",function(){return r.a});n(1022),n(1019)},function(t,e,n){"use strict";var r=n(212),i=n.i(r.a)("\t");i.parse,i.parseRows,i.format,i.formatBody,i.formatRows,i.formatRow,i.formatValue},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a});var r=1.70158,i=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(r),o=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(r),a=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(r)},function(t,e,n){"use strict";function r(t){return 1-i(1-t)}function i(t){return(t=+t)<a?v*t*t:t<u?v*(t-=s)*t+l:t<h?v*(t-=c)*t+f:v*(t-=p)*t+d}function o(t){return((t*=2)<=1?1-i(1-t):i(t-1)+1)/2}e.b=r,e.a=i,e.c=o;var a=4/11,s=6/11,u=8/11,l=.75,c=9/11,h=10/11,f=.9375,p=21/22,d=63/64,v=1/a/a},function(t,e,n){"use strict";function r(t){return 1-Math.sqrt(1-t*t)}function i(t){return Math.sqrt(1- --t*t)}function o(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}e.b=r,e.c=i,e.a=o},function(t,e,n){"use strict";function r(t){return t*t*t}function i(t){return--t*t*t+1}function o(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}e.b=r,e.c=i,e.a=o},function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return u});var r=2*Math.PI,i=1,o=.3,a=function t(e,n){function i(t){return e*Math.pow(2,10*--t)*Math.sin((o-t)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(i,o),s=function t(e,n){function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+o)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(i,o),u=function t(e,n){function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((o-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((o+t)/n))/2}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(i,o)},function(t,e,n){"use strict";function r(t){return Math.pow(2,10*t-10)}function i(t){return 1-Math.pow(2,-10*t)}function o(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}e.b=r,e.c=i,e.a=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1030);n.d(e,"easeLinear",function(){return r.a});var i=n(1032);n.d(e,"easeQuad",function(){return i.a}),n.d(e,"easeQuadIn",function(){return i.b}),n.d(e,"easeQuadOut",function(){return i.c}),n.d(e,"easeQuadInOut",function(){return i.a});var o=n(1026);n.d(e,"easeCubic",function(){return o.a}),n.d(e,"easeCubicIn",function(){return o.b}),n.d(e,"easeCubicOut",function(){return o.c}),n.d(e,"easeCubicInOut",function(){return o.a});var a=n(1031);n.d(e,"easePoly",function(){return a.a}),n.d(e,"easePolyIn",function(){return a.b}),n.d(e,"easePolyOut",function(){return a.c}),n.d(e,"easePolyInOut",function(){return a.a});var s=n(1033);n.d(e,"easeSin",function(){return s.a}),n.d(e,"easeSinIn",function(){return s.b}),n.d(e,"easeSinOut",function(){return s.c}),n.d(e,"easeSinInOut",function(){return s.a});var u=n(1028);n.d(e,"easeExp",function(){return u.a}),n.d(e,"easeExpIn",function(){return u.b}),n.d(e,"easeExpOut",function(){return u.c}),n.d(e,"easeExpInOut",function(){return u.a});var l=n(1025);n.d(e,"easeCircle",function(){return l.a}),n.d(e,"easeCircleIn",function(){return l.b}),n.d(e,"easeCircleOut",function(){return l.c}),n.d(e,"easeCircleInOut",function(){return l.a});var c=n(1024);n.d(e,"easeBounce",function(){return c.a}),n.d(e,"easeBounceIn",function(){return c.b}),n.d(e,"easeBounceOut",function(){return c.a}),n.d(e,"easeBounceInOut",function(){return c.c});var h=n(1023);n.d(e,"easeBack",function(){return h.a}),n.d(e,"easeBackIn",function(){return h.b}),n.d(e,"easeBackOut",function(){return h.c}),n.d(e,"easeBackInOut",function(){return h.a});var f=n(1027);n.d(e,"easeElastic",function(){return f.a}),n.d(e,"easeElasticIn",function(){return f.b}),n.d(e,"easeElasticOut",function(){return f.a}),n.d(e,"easeElasticInOut",function(){return f.c})},function(t,e,n){"use strict";function r(t){return+t}e.a=r},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a});var r=3,i=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(r),o=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(r),a=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(r)},function(t,e,n){"use strict";function r(t){return t*t}function i(t){return t*(2-t)}function o(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}e.b=r,e.c=i,e.a=o},function(t,e,n){"use strict";function r(t){return 1-Math.cos(t*s)}function i(t){return Math.sin(t*s)}function o(t){return(1-Math.cos(a*t))/2}e.b=r,e.c=i,e.a=o;var a=Math.PI,s=a/2},function(t,e,n){"use strict";function r(t){return i=n.i(s.a)(t),o=i.format,a=i.formatPrefix,i}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var i,o,a,s=n(370);r({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},function(t,e,n){"use strict";e.a=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}},function(t,e,n){"use strict";e.a=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}},function(t,e,n){"use strict";var r=n(213);e.a=function(t,e){var i=n.i(r.a)(t,e);if(!i)return t+"";var o=i[0],a=i[1];return a<0?"0."+new Array(-a).join("0")+o:o.length>a+1?o.slice(0,a+1)+"."+o.slice(a+1):o+new Array(a-o.length+2).join("0")}},function(t,e,n){"use strict";e.a=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}},function(t,e,n){"use strict";var r=n(367),i=n(1037);e.a={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return n.i(i.a)(100*t,e)},r:i.a,s:r.b,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var r=n(143);e.a=function(t){return Math.max(0,-n.i(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(143);e.a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n.i(r.a)(e)/3)))-n.i(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(143);e.a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,n.i(r.a)(e)-n.i(r.a)(t))+1}},function(t,e,n){"use strict";var r=n(1045);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t){return t[0]}function i(t){return t[1]}var o=Math.PI/3,a=[0,o,2*o,3*o,4*o,5*o];e.a=function(){function t(t){var e,n={},r=[],i=t.length;for(e=0;e<i;++e)if(!isNaN(a=+p.call(null,o=t[e],e,t))&&!isNaN(l=+d.call(null,o,e,t))){var o,a,l,c=Math.round(l/=u),h=Math.round(a=a/s-(1&c)/2),f=l-c;if(3*Math.abs(f)>1){var v=a-h,g=h+(a<h?-1:1)/2,m=c+(l<c?-1:1),y=a-g,_=l-m;v*v+f*f>y*y+_*_&&(h=g+(1&c?1:-1)/2,c=m)}var b=h+"-"+c,x=n[b];x?x.push(o):(r.push(x=n[b]=[o]),x.x=(h+(1&c)/2)*s,x.y=c*u)}return r}function e(t){var e=0,n=0;return a.map(function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,a=i-e,s=o-n;return e=i,n=o,[a,s]})}var n,s,u,l=0,c=0,h=1,f=1,p=r,d=i;return t.hexagon=function(t){return"m"+e(null==t?n:+t).join("l")+"z"},t.centers=function(){for(var t=[],e=Math.round(c/u),r=Math.round(l/s),i=e*u;i<f+n;i+=u,++e)for(var o=r*s+(1&e)*s/2;o<h+s/2;o+=s)t.push([o,i]);return t},t.mesh=function(){var r=e(n).slice(0,4).join("l");return t.centers().map(function(t){return"M"+t+"m"+r}).join("")},t.x=function(e){return arguments.length?(p=e,t):p},t.y=function(e){return arguments.length?(d=e,t):d},t.radius=function(e){return arguments.length?(n=+e,s=2*n*Math.sin(o),u=1.5*n,t):n},t.size=function(e){return arguments.length?(l=c=0,h=+e[0],f=+e[1],t):[h-l,f-c]},t.extent=function(e){return arguments.length?(l=+e[0][0],c=+e[0][1],h=+e[1][0],f=+e[1][1],t):[[l,c],[h,f]]},t.radius(1)}},function(t,e,n){"use strict";function r(t){return function e(r){function a(e,a){var s=t((e=n.i(i.b)(e)).h,(a=n.i(i.b)(a)).h),u=n.i(o.a)(e.s,a.s),l=n.i(o.a)(e.l,a.l),c=n.i(o.a)(e.opacity,a.opacity);return function(t){return e.h=s(t),e.s=u(t),e.l=l(Math.pow(t,r)),e.opacity=c(t),e+""}}return r=+r,a.gamma=e,a}(1)}var i=n(81),o=n(94);r(o.b),r(o.a)},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(t){return function(e,r){var a=t((e=n.i(i.c)(e)).h,(r=n.i(i.c)(r)).h),s=n.i(o.a)(e.c,r.c),u=n.i(o.a)(e.l,r.l),l=n.i(o.a)(e.opacity,r.opacity);return function(t){return e.h=a(t),e.c=s(t),e.l=u(t),e.opacity=l(t),e+""}}}var i=n(81),o=n(94);r(o.b),r(o.a)},function(t,e,n){"use strict";function r(t){return function(e,r){var a=t((e=n.i(i.e)(e)).h,(r=n.i(i.e)(r)).h),s=n.i(o.a)(e.s,r.s),u=n.i(o.a)(e.l,r.l),l=n.i(o.a)(e.opacity,r.opacity);return function(t){return e.h=a(t),e.s=s(t),e.l=u(t),e.opacity=l(t),e+""}}}var i=n(81),o=n(94);r(o.b),r(o.a)},function(t,e,n){"use strict";n(94)},function(t,e,n){"use strict";n(81),n(94)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.b=function(t,e,n,i,o,a){var s,u,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,l/=u),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*r,skewX:Math.atan(l)*r,scaleX:s,scaleY:u}}},function(t,e,n){"use strict";function r(t,e,r,o){function a(t){return t.length?t.pop()+" ":""}function s(t,o,a,s,u,l){if(t!==a||o!==s){var c=u.push("translate(",null,e,null,r);l.push({i:c-4,x:n.i(i.a)(t,a)},{i:c-2,x:n.i(i.a)(o,s)})}else(a||s)&&u.push("translate("+a+e+s+r)}function u(t,e,r,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:r.push(a(r)+"rotate(",null,o)-2,x:n.i(i.a)(t,e)})):e&&r.push(a(r)+"rotate("+e+o)}function l(t,e,r,s){t!==e?s.push({i:r.push(a(r)+"skewX(",null,o)-2,x:n.i(i.a)(t,e)}):e&&r.push(a(r)+"skewX("+e+o)}function c(t,e,r,o,s,u){if(t!==r||e!==o){var l=s.push(a(s)+"scale(",null,",",null,")");u.push({i:l-4,x:n.i(i.a)(t,r)},{i:l-2,x:n.i(i.a)(e,o)})}else 1===r&&1===o||s.push(a(s)+"scale("+r+","+o+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),s(e.translateX,e.translateY,n.translateX,n.translateY,r,i),u(e.rotate,n.rotate,r,i),l(e.skewX,n.skewX,r,i),c(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var i=n(144),o=n(1057);r(o.a,"px, ","px)","deg)"),r(o.b,", ",")",")")},function(t,e,n){"use strict";function r(t){return"none"===t?l.a:(o||(o=document.createElement("DIV"),a=document.documentElement,s=document.defaultView),o.style.transform=t,t=s.getComputedStyle(a.appendChild(o),null).getPropertyValue("transform"),a.removeChild(o),t=t.slice(7,-1).split(","),n.i(l.b)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function i(t){return null==t?l.a:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",t),(t=u.transform.baseVal.consolidate())?(t=t.matrix,n.i(l.b)(t.a,t.b,t.c,t.d,t.e,t.f)):l.a)}e.a=r,e.b=i;var o,a,s,u,l=n(1055)},function(t,e,n){"use strict";Math.SQRT2},function(t,e,n){"use strict";n(44),n(29),n(381)},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n(67),n(29),n(83),n(217),n(382),n(219),n(218)},function(t,e,n){"use strict";function r(t){function e(t){return isNaN(t=+t)?s:t}var s;return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=i.a.call(n,a.a),e):t.slice()},e.unknown=function(t){return arguments.length?(s=t,e):s},e.copy=function(){return r(t).unknown(s)},t=arguments.length?i.a.call(t,a.a):[0,1],n.i(o.b)(e)}e.a=r;var i=n(82),o=n(83),a=n(380)},function(t,e,n){"use strict";var r=(n(1059),n(1062));n.d(e,"d",function(){return r.a});var i=n(83);n.d(e,"a",function(){return i.a});var o=n(217);n.d(e,"c",function(){return o.a});var a=(n(219),n(381));n.d(e,"i",function(){return a.a});var s=n(218);n.d(e,"b",function(){return s.a});var u=n(1064);n.d(e,"f",function(){return u.a});var l=n(1065);n.d(e,"g",function(){return l.a});var c=n(1067);n.d(e,"h",function(){return c.a});var h=n(384);n.d(e,"e",function(){return h.a});n(1068),n(382),n(1066),n(1061),n(383)},function(t,e,n){"use strict";function r(){function t(){var t=0,r=Math.max(1,l.length);for(c=new Array(r-1);++t<r;)c[t-1]=n.i(i.h)(u,t/r);return e}function e(t){return isNaN(t=+t)?s:l[n.i(i.c)(c,t)]}var s,u=[],l=[],c=[];return e.invertExtent=function(t){var e=l.indexOf(t);return e<0?[NaN,NaN]:[e>0?c[e-1]:u[0],e<c.length?c[e]:u[u.length-1]]},e.domain=function(e){if(!arguments.length)return u.slice();u=[];for(var n,r=0,o=e.length;r<o;++r)null==(n=e[r])||isNaN(n=+n)||u.push(n);return u.sort(i.f),t()},e.range=function(e){return arguments.length?(l=o.b.call(e),t()):l.slice()},e.unknown=function(t){return arguments.length?(s=t,e):s},e.quantiles=function(){return c.slice()},e.copy=function(){return r().domain(u).range(l).unknown(s)},a.b.apply(e,arguments)}e.a=r;var i=n(44),o=n(82),a=n(29)},function(t,e,n){"use strict";function r(){function t(t){return t<=t?p[n.i(i.c)(f,t,0,h)]:u}function e(){var e=-1;for(f=new Array(h);++e<h;)f[e]=((e+1)*c-(e-h)*l)/(h+1);return t}var u,l=0,c=1,h=1,f=[.5],p=[0,1];return t.domain=function(t){return arguments.length?(l=+t[0],c=+t[1],e()):[l,c]},t.range=function(t){return arguments.length?(h=(p=o.b.call(t)).length-1,e()):p.slice()},t.invertExtent=function(t){var e=p.indexOf(t);return e<0?[NaN,NaN]:e<1?[l,f[0]]:e>=h?[f[h-1],c]:[f[e-1],f[e]]},t.unknown=function(e){return arguments.length?(u=e,t):t},t.thresholds=function(){return f.slice()},t.copy=function(){return r().domain([l,c]).range(p).unknown(u)},s.b.apply(n.i(a.b)(t),arguments)}e.a=r;var i=n(44),o=n(82),a=n(83),s=n(29)},function(t,e,n){"use strict";n(44),n(67),n(29)},function(t,e,n){"use strict";function r(){function t(t){return t<=t?u[n.i(i.c)(s,t,0,l)]:e}var e,s=[.5],u=[0,1],l=1;return t.domain=function(e){return arguments.length?(s=o.b.call(e),l=Math.min(s.length,u.length-1),t):s.slice()},t.range=function(e){return arguments.length?(u=o.b.call(e),l=Math.min(s.length,u.length-1),t):u.slice()},t.invertExtent=function(t){var e=u.indexOf(t);return[s[e-1],s[e]]},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return r().domain(s).range(u).unknown(e)},a.b.apply(t,arguments)}e.a=r;var i=n(44),o=n(82),a=n(29)},function(t,e,n){"use strict";n(384),n(385),n(221),n(29)},function(t,e,n){"use strict";function r(t){var e=new Date(t);return isNaN(e)?null:e}var i=n(386),o=n(220);+new Date("2000-01-01T00:00:00.000Z")||n.i(o.b)(i.a)},function(t,e,n){"use strict";var r=n(27),i=n(59),o=n.i(r.a)(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*i.d)/i.b},function(t){return t.getDate()-1});e.a=o;o.range},function(t,e,n){"use strict";var r=n(27),i=n(59),o=n.i(r.a)(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.e-t.getMinutes()*i.d)},function(t,e){t.setTime(+t+e*i.c)},function(t,e){return(e-t)/i.c},function(t){return t.getHours()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(27),i=n.i(r.a)(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?n.i(r.a)(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):i:null},e.a=i;i.range},function(t,e,n){"use strict";var r=n(27),i=n(59),o=n.i(r.a)(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.e)},function(t,e){t.setTime(+t+e*i.d)},function(t,e){return(e-t)/i.d},function(t){return t.getMinutes()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(27),i=n.i(r.a)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()});e.a=i;i.range},function(t,e,n){"use strict";var r=n(27),i=n(59),o=n.i(r.a)(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*i.e)},function(t,e){return(e-t)/i.e},function(t){return t.getUTCSeconds()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(27),i=n(59),o=n.i(r.a)(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/i.b},function(t){return t.getUTCDate()-1});e.a=o;o.range},function(t,e,n){"use strict";var r=n(27),i=n(59),o=n.i(r.a)(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*i.c)},function(t,e){return(e-t)/i.c},function(t){return t.getUTCHours()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(27),i=n(59),o=n.i(r.a)(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*i.d)},function(t,e){return(e-t)/i.d},function(t){return t.getUTCMinutes()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(27),i=n.i(r.a)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()});e.a=i;i.range},function(t,e,n){"use strict";function r(t){return n.i(i.a)(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/o.a})}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return c});var i=n(27),o=n(59),a=r(0),s=r(1),u=r(2),l=r(3),c=r(4),h=r(5),f=r(6);a.range,s.range,u.range,l.range,c.range,h.range,f.range},function(t,e,n){"use strict";var r=n(27),i=n.i(r.a)(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?n.i(r.a)(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null},e.a=i;i.range},function(t,e,n){"use strict";function r(t){return n.i(i.a)(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*o.d)/o.a})}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return c});var i=n(27),o=n(59),a=r(0),s=r(1),u=r(2),l=r(3),c=r(4),h=r(5),f=r(6);a.range,s.range,u.range,l.range,c.range,h.range,f.range},function(t,e,n){"use strict";var r=n(27),i=n.i(r.a)(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?n.i(r.a)(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null},e.a=i;i.range},function(t,e,n){"use strict";var r=n(222);n.d(e,"a",function(){return r.a});n(1086),n(1085)},function(t,e,n){"use strict";n(222)},function(t,e,n){"use strict";n(222)},function(t,e,n){"use strict";(function(t){function n(t){return t?r(t):"undefined"!=typeof navigator?r(navigator.userAgent):o()}function r(t){var e=""!==t&&d.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]},!1);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new c;var o=r[1]&&r[1].split(/[._]/).slice(0,3);return o?o.length<p&&(o=s(o,a(p-o.length))):o=[],new u(n,o.join("."),i(t))}function i(t){for(var e=0,n=v.length;e<n;e++){var r=v[e],i=r[0];if(r[1].test(t))return i}return null}function o(){return void 0!==t&&t.version?new l(t.version.slice(1)):null}function a(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e,n){this.name=t,this.version=e,this.os=n}return t}();e.BrowserInfo=u;var l=function(){function e(e){this.version=e,this.name="node",this.os=t.platform}return e}();e.NodeInfo=l;var c=function(){function t(){this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();e.BotInfo=c;var h=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,f=/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/,p=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",h]],v=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",f]];e.detect=n,e.parseUserAgent=r,e.detectOS=i,e.getNodeVersion=o}).call(e,n(61))},function(t,e){function n(t){var e=t.target||t.srcElement;e.__resizeRAF__&&cancelAnimationFrame(e.__resizeRAF__),e.__resizeRAF__=requestAnimationFrame(function(){var n=e.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach(function(e){e.call(n,t)})})}var e=function(t,e){function r(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",n)}var i,o=this,a=o.document,s=a.attachEvent;if("undefined"!=typeof navigator&&(i=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],s)t.__resizeTrigger__=t,t.attachEvent("onresize",n);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var u=t.__resizeTrigger__=a.createElement("object");u.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),u.setAttribute("class","resize-sensor"),u.setAttribute("tabindex","-1"),u.__resizeElement__=t,u.onload=r,u.type="text/html",i&&t.appendChild(u),u.data="about:blank",i||t.appendChild(u)}t.__resizeListeners__.push(e)};t.exports="undefined"==typeof window?e:e.bind(window),t.exports.unbind=function(t,e){var r=document.attachEvent,i=t.__resizeListeners__||[];if(e){var o=i.indexOf(e);-1!==o&&i.splice(o,1)}else i=t.__resizeListeners__=[];if(!i.length){if(r)t.detachEvent("onresize",n);else if(t.__resizeTrigger__){var a=t.__resizeTrigger__.contentDocument,s=a&&a.defaultView;s&&(s.removeEventListener("resize",n),delete s.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}}},function(t,e,n){"use strict";n(50)},function(t,e,n){"use strict";n(50)},function(t,e,n){"use strict";var r=(n(50),n(390));n(145),r.b,r.b,r.f,r.g,r.h},function(t,e,n){var r;!function(i,o,a,s){"use strict";function u(t,e,n){return setTimeout(p(t,n),e)}function l(t,e,n){return!!Array.isArray(t)&&(c(t,n[e],n),!0)}function c(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function h(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function f(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&vt(r,n)}function p(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==yt?t.apply(e?e[0]||s:s,e):t}function v(t,e){return t===s?e:t}function g(t,e,n){c(b(e),function(e){t.addEventListener(e,n,!1)})}function m(t,e,n){c(b(e),function(e){t.removeEventListener(e,n,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function S(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];x(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function E(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<gt.length;){if(n=gt[o],(r=n?n+i:e)in t)return r;o++}return s}function M(){return Et++}function T(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function C(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function A(t){var e=t.options.inputClass;return new(e||(Ct?V:At?H:Tt?X:U))(t,P)}function P(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&Lt&&r-i==0,a=e&(Rt|Bt)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,k(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function k(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=j(e)),i>1&&!n.firstMultiple?n.firstMultiple=j(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=L(r);e.timeStamp=xt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=z(s,u),e.distance=B(s,u),I(n,e),e.offsetDirection=R(e.deltaX,e.deltaY);var l=D(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=bt(l.x)>bt(l.y)?l.x:l.y,e.scale=a?N(a.pointers,r):1,e.rotation=a?F(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,O(n,e);var c=t.element;y(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function I(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Lt&&o.eventType!==Rt||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function O(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Bt&&(u>jt||a.velocity===s)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=D(u,l,c);r=h.x,i=h.y,n=bt(h.x)>bt(h.y)?h.x:h.y,o=R(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function j(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:_t(t.pointers[n].clientX),clientY:_t(t.pointers[n].clientY)},n++;return{timeStamp:xt(),pointers:e,center:L(e),deltaX:t.deltaX,deltaY:t.deltaY}}function L(t){var e=t.length;if(1===e)return{x:_t(t[0].clientX),y:_t(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:_t(n/e),y:_t(r/e)}}function D(t,e,n){return{x:e/t||0,y:n/t||0}}function R(t,e){return t===e?zt:bt(t)>=bt(e)?t<0?Ft:Nt:e<0?Ut:Vt}function B(t,e,n){n||(n=Yt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function z(t,e,n){n||(n=Yt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function F(t,e){return z(e[1],e[0],Xt)+z(t[1],t[0],Xt)}function N(t,e){return B(e[0],e[1],Xt)/B(t[0],t[1],Xt)}function U(){this.evEl=Zt,this.evWin=Kt,this.pressed=!1,C.apply(this,arguments)}function V(){this.evEl=$t,this.evWin=te,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function G(){this.evTarget=ne,this.evWin=re,this.started=!1,C.apply(this,arguments)}function q(t,e){var n=w(t.touches),r=w(t.changedTouches);return e&(Rt|Bt)&&(n=S(n.concat(r),"identifier",!0)),[n,r]}function H(){this.evTarget=oe,this.targetIds={},C.apply(this,arguments)}function Y(t,e){var n=w(t.touches),r=this.targetIds;if(e&(Lt|Dt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=w(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return y(t.target,u)}),e===Lt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(Rt|Bt)&&delete r[a[i].identifier],i++;return s.length?[S(o.concat(s),"identifier",!0),s]:void 0}function X(){C.apply(this,arguments);var t=p(this.handler,this);this.touch=new H(this.manager,t),this.mouse=new U(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function W(t,e){t&Lt?(this.primaryTouch=e.changedPointers[0].identifier,Z.call(this,e)):t&(Rt|Bt)&&Z.call(this,e)}function Z(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ae)}}function K(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=se&&a<=se)return!0}return!1}function J(t,e){this.manager=t,this.set(e)}function Q(t){if(_(t,pe))return pe;var e=_(t,de),n=_(t,ve);return e&&n?pe:e||n?e?de:ve:_(t,fe)?fe:he}function $(){if(!le)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}function tt(t){this.options=vt({},this.defaults,t||{}),this.id=M(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=me,this.simultaneous={},this.requireFail=[]}function et(t){return t&we?"cancel":t&be?"end":t&_e?"move":t&ye?"start":""}function nt(t){return t==Vt?"down":t==Ut?"up":t==Ft?"left":t==Nt?"right":""}function rt(t,e){var n=e.manager;return n?n.get(t):t}function it(){tt.apply(this,arguments)}function ot(){it.apply(this,arguments),this.pX=null,this.pY=null}function at(){it.apply(this,arguments)}function st(){tt.apply(this,arguments),this._timer=null,this._input=null}function ut(){it.apply(this,arguments)}function lt(){it.apply(this,arguments)}function ct(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=v(e.recognizers,ht.defaults.preset),new ft(t,e)}function ft(t,e){this.options=vt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=A(this),this.touchAction=new J(this,this.options.touchAction),pt(this,!0),c(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var n=t.element;if(n.style){var r;c(t.options.cssProps,function(i,o){r=E(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function dt(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var vt,gt=["","webkit","Moz","MS","ms","o"],mt=o.createElement("div"),yt="function",_t=Math.round,bt=Math.abs,xt=Date.now;vt="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var wt=h(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),St=h(function(t,e){return wt(t,e,!0)},"merge","Use `assign`."),Et=1,Mt=/mobile|tablet|ip(ad|hone|od)|android/i,Tt="ontouchstart"in i,Ct=E(i,"PointerEvent")!==s,At=Tt&&Mt.test(navigator.userAgent),Pt="touch",kt="pen",It="mouse",Ot="kinect",jt=25,Lt=1,Dt=2,Rt=4,Bt=8,zt=1,Ft=2,Nt=4,Ut=8,Vt=16,Gt=Ft|Nt,qt=Ut|Vt,Ht=Gt|qt,Yt=["x","y"],Xt=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(T(this.element),this.evWin,this.domHandler)}};var Wt={mousedown:Lt,mousemove:Dt,mouseup:Rt},Zt="mousedown",Kt="mousemove mouseup";f(U,C,{handler:function(t){var e=Wt[t.type];e&Lt&&0===t.button&&(this.pressed=!0),e&Dt&&1!==t.which&&(e=Rt),this.pressed&&(e&Rt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:It,srcEvent:t}))}});var Jt={pointerdown:Lt,pointermove:Dt,pointerup:Rt,pointercancel:Bt,pointerout:Bt},Qt={2:Pt,3:kt,4:It,5:Ot},$t="pointerdown",te="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&($t="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),f(V,C,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Jt[r],o=Qt[t.pointerType]||t.pointerType,a=o==Pt,s=x(e,t.pointerId,"pointerId");i&Lt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Rt|Bt)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var ee={touchstart:Lt,touchmove:Dt,touchend:Rt,touchcancel:Bt},ne="touchstart",re="touchstart touchmove touchend touchcancel";f(G,C,{handler:function(t){var e=ee[t.type];if(e===Lt&&(this.started=!0),this.started){var n=q.call(this,t,e);e&(Rt|Bt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Pt,srcEvent:t})}}});var ie={touchstart:Lt,touchmove:Dt,touchend:Rt,touchcancel:Bt},oe="touchstart touchmove touchend touchcancel";f(H,C,{handler:function(t){var e=ie[t.type],n=Y.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Pt,srcEvent:t})}});var ae=2500,se=25;f(X,C,{handler:function(t,e,n){var r=n.pointerType==Pt,i=n.pointerType==It;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)W.call(this,e,n);else if(i&&K.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ue=E(mt.style,"touchAction"),le=ue!==s,ce="compute",he="auto",fe="manipulation",pe="none",de="pan-x",ve="pan-y",ge=$();J.prototype={set:function(t){t==ce&&(t=this.compute()),le&&this.manager.element.style&&ge[t]&&(this.manager.element.style[ue]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return c(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=_(r,pe)&&!ge[pe],o=_(r,ve)&&!ge[ve],a=_(r,de)&&!ge[de];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}return a&&o?void 0:i||o&&n&Gt||a&&n&qt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var me=1,ye=2,_e=4,be=8,xe=be,we=16,Se=32;tt.prototype={defaults:{},set:function(t){return vt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=rt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=rt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=rt(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=rt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<be&&e(n.options.event+et(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=be&&e(n.options.event+et(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Se},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Se|me)))return!1;t++}return!0},recognize:function(t){var e=vt({},t);if(!d(this.options.enable,[this,e]))return this.reset(),void(this.state=Se);this.state&(xe|we|Se)&&(this.state=me),this.state=this.process(e),this.state&(ye|_e|be|we)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},f(it,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(ye|_e),i=this.attrTest(t);return r&&(n&Bt||!i)?e|we:r||i?n&Rt?e|be:e&ye?e|_e:ye:Se}}),f(ot,it,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ht},getTouchAction:function(){var t=this.options.direction,e=[];return t&Gt&&e.push(ve),t&qt&&e.push(de),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Gt?(i=0===o?zt:o<0?Ft:Nt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?zt:a<0?Ut:Vt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return it.prototype.attrTest.call(this,t)&&(this.state&ye||!(this.state&ye)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),f(at,it,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[pe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ye)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),f(st,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[he]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Rt|Bt)&&!i)this.reset();else if(t.eventType&Lt)this.reset(),this._timer=u(function(){this.state=xe,this.tryEmit()},e.time,this);else if(t.eventType&Rt)return xe;return Se},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===xe&&(t&&t.eventType&Rt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)))}}),f(ut,it,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[pe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ye)}}),f(lt,it,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Gt|qt,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Gt|qt)?e=t.overallVelocity:n&Gt?e=t.overallVelocityX:n&qt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&bt(e)>this.options.velocity&&t.eventType&Rt},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),f(ct,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[fe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&Lt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Rt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||B(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=xe,this.tryEmit()},e.interval,this),ye):xe}return Se},failTimeout:function(){return this._timer=u(function(){this.state=Se},this.options.interval,this),Se},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:ce,enable:!0,inputTarget:null,inputClass:null,preset:[[ut,{enable:!1}],[at,{enable:!1},["rotate"]],[lt,{direction:Gt}],[ot,{direction:Gt},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ee=2;ft.prototype={set:function(t){return vt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Ee:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&xe)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],e.stopped===Ee||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(ye|_e|be)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return c(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return c(b(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&dt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},vt(ht,{INPUT_START:Lt,INPUT_MOVE:Dt,INPUT_END:Rt,INPUT_CANCEL:Bt,STATE_POSSIBLE:me,STATE_BEGAN:ye,STATE_CHANGED:_e,STATE_ENDED:be,STATE_RECOGNIZED:xe,STATE_CANCELLED:we,STATE_FAILED:Se,DIRECTION_NONE:zt,DIRECTION_LEFT:Ft,DIRECTION_RIGHT:Nt,DIRECTION_UP:Ut,DIRECTION_DOWN:Vt,DIRECTION_HORIZONTAL:Gt,DIRECTION_VERTICAL:qt,DIRECTION_ALL:Ht,Manager:ft,Input:C,TouchAction:J,TouchInput:H,MouseInput:U,PointerEventInput:V,TouchMouseInput:X,SingleTouchInput:G,Recognizer:tt,AttrRecognizer:it,Tap:ct,Pan:ot,Swipe:lt,Pinch:at,Rotate:ut,Press:st,on:g,off:m,each:c,merge:St,extend:wt,assign:vt,inherit:f,bindFn:p,prefixed:E}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=ht,(r=function(){return ht}.call(e,n,e,t))!==s&&(t.exports=r)}(window,document)},function(t,e,n){"use strict";function r(t,e,n,r){function i(){return r&&!Reflect.hasMetadata(u,this,e)&&Reflect.defineMetadata(u,n(),this,e),Reflect.hasMetadata(u,this,e)?Reflect.getMetadata(u,this,e):n()}function o(t){Reflect.defineMetadata(u,t,this,e)}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:o})}function i(t,e){return function(n){return function(i,o){r(i,o,function(){return t.get(n)},e)}}}function o(t,e){return function(n,i){return function(o,a){r(o,a,function(){return t.getNamed(n,i)},e)}}}function a(t,e){return function(n,i,o){return function(a,s){r(a,s,function(){return t.getTagged(n,i,o)},e)}}}function s(t,e){return function(n){return function(i,o){r(i,o,function(){return t.getAll(n)},e)}}}Object.defineProperty(e,"__esModule",{value:!0});var u=Symbol.for("INJECTION");e.makePropertyInjectDecorator=i,e.makePropertyInjectNamedDecorator=o,e.makePropertyInjectTaggedDecorator=a,e.makePropertyMultiInjectDecorator=s},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=!0),{lazyInject:i.makePropertyInjectDecorator(t,e),lazyInjectNamed:i.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:i.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:i.makePropertyMultiInjectDecorator(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1093);e.default=r},function(t,e,n){"use strict";function r(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o=n(20);e.injectable=r},function(t,e,n){"use strict";function r(t){return function(e,n,r){var s=new o.Metadata(i.MULTI_INJECT_TAG,t);"number"==typeof r?a.tagParameter(e,n,r,s):a.tagProperty(e,n,s)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),o=n(45),a=n(69);e.multiInject=r},function(t,e,n){"use strict";function r(t){return function(e,n,r){var s=new o.Metadata(i.NAMED_TAG,t);"number"==typeof r?a.tagParameter(e,n,r,s):a.tagProperty(e,n,s)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),o=n(45),a=n(69);e.named=r},function(t,e,n){"use strict";function r(){return function(t,e,n){var r=new o.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof n?a.tagParameter(t,e,n,r):a.tagProperty(t,e,r)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),o=n(45),a=n(69);e.optional=r},function(t,e,n){"use strict";function r(){return function(t,e,n){var r=new a.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,r,t.constructor)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o=n(20),a=n(45);e.postConstruct=r},function(t,e,n){"use strict";function r(t,e){return function(n,r,a){var s=new i.Metadata(t,e);"number"==typeof a?o.tagParameter(n,r,a,s):o.tagProperty(n,r,s)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(45),o=n(69);e.tagged=r},function(t,e,n){"use strict";function r(t){return function(e,n,r){var s=new o.Metadata(i.NAME_TAG,t);a.tagParameter(e,n,r,s)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),o=n(45),a=n(69);e.targetName=r},function(t,e,n){"use strict";function r(){return function(t,e,n){var r=new o.Metadata(i.UNMANAGED_TAG,!0);a.tagParameter(t,e,n,r)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),o=n(45),a=n(69);e.unmanaged=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(60),i=n(84),o=function(){function t(t,e){this.id=i.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};e.BindingCount=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1103),a=n(34),s=n(60),u=n(20),l=n(392),c=n(1111),h=n(1116),f=n(1119),p=n(84),d=n(115),v=n(1107),g=n(1108),m=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new g.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return t.merge=function(e,n){function r(t,e){t.traverse(function(t,n){n.forEach(function(t){e.add(t.serviceIdentifier,t.clone())})})}var i=new t,o=c.getBindingDictionary(i),a=c.getBindingDictionary(e),s=c.getBindingDictionary(n);return r(a,o),r(s,o),i},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,function(){var e,n,r,o,a;return i(this,function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach(function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)})},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new o.Binding(t,e);return this._bindingDictionary.add(t,n),new f.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(a.CANNOT_UNBIND+" "+d.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new g.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,u.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=c.createMockRequest(this,t,e,n);r=i.some(function(t){return t.constraint(o)})}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(v.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,u.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,u.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.bind.bind(t),o=i(r);return e(o,n),o}},r=function(e){return function(e){t.unbind.bind(t)(e)}},i=function(e){return function(e){return t.isBound.bind(t)(e)}},o=function(n){return function(r){var i=t.rebind.bind(t),o=i(r);return e(o,n),o}};return function(t){return{bindFunction:n(t),isboundFunction:i(t),rebindFunction:o(t),unbindFunction:r(t)}}},t.prototype._get=function(t,e,n,r,i,o){var s=null,u={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(void 0===(s=this._middleware(u))||null===s)throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(u);return s},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=c.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),i=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.ContainerModule=i;var o=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.AsyncContainerModule=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,r){var i=n.filter(function(e){return!t(e)});i.length>0?e._map.set(r,i):e._map.delete(r)})},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(t,n){t.forEach(function(t){return e.add(n,t.clone())})}),e},t.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},t}();e.Lookup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),i=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.parentContext=t,this.rootRequest=e}return t}();e.Plan=r},function(t,e,n){"use strict";function r(t){return t._bindingDictionary}function i(t,e,n,r,i,o){var a=t?d.MULTI_INJECT_TAG:d.INJECT_TAG,s=new y.Metadata(a,n),u=new w.Target(e,r,n,s);if(void 0!==i){var l=new y.Metadata(i,o);u.metadata.push(l)}return u}function o(t,e,n,r,i){var o=u(n.container,i.serviceIdentifier),s=[];return o.length===h.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=u(n.container,i.serviceIdentifier)),s=e?o:o.filter(function(t){var e=new x.Request(t.serviceIdentifier,n,r,t,i);return t.constraint(e)}),a(i.serviceIdentifier,s,i,n.container),s}function a(t,e,n,r){switch(e.length){case h.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var i=g.getServiceIdentifierAsString(t),o=f.NOT_REGISTERED;throw o+=g.listMetadataForTarget(i,n),o+=g.listRegisteredBindingsForServiceIdentifier(r,i,u),new Error(o);case h.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case h.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;var i=g.getServiceIdentifierAsString(t),o=f.AMBIGUOUS_MATCH+" "+i;throw o+=g.listRegisteredBindingsForServiceIdentifier(r,i,u),new Error(o)}}function s(t,e,n,r,i,a){var u,l;if(null===i){u=o(t,e,r,null,a),l=new x.Request(n,r,null,u,a);var c=new _.Plan(r,l);r.addPlan(c)}else u=o(t,e,r,i,a),l=i.addChildRequest(a.serviceIdentifier,u,a);u.forEach(function(e){var n=null;if(a.isArray())n=l.addChildRequest(e.serviceIdentifier,e,a);else{if(e.cache)return;n=l}if(e.type===p.BindingTypeEnum.Instance&&null!==e.implementationType){var i=b.getDependencies(t,e.implementationType);if(!r.container.options.skipBaseClassChecks){var o=b.getBaseClassDependencyCount(t,e.implementationType);if(i.length<o){var u=f.ARGUMENTS_LENGTH_MISMATCH(b.getFunctionName(e.implementationType));throw new Error(u)}}i.forEach(function(e){s(t,!1,e.serviceIdentifier,r,n,e)})}})}function u(t,e){var n=[],i=r(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=u(t.parent,e)),n}function l(t,e,n,r,o,a,u,l){void 0===l&&(l=!1);var c=new m.Context(e),h=i(n,r,o,"",a,u);try{return s(t,l,o,c,null,h),c}catch(t){throw v.isStackOverflowExeption(t)&&c.plan&&g.circularDependencyToException(c.plan.rootRequest),t}}function c(t,e,n,r){var i=new w.Target(p.TargetTypeEnum.Variable,"",e,new y.Metadata(n,r)),o=new m.Context(t);return new x.Request(e,o,null,[],i)}Object.defineProperty(e,"__esModule",{value:!0});var h=n(1104),f=n(34),p=n(60),d=n(20),v=n(396),g=n(115),m=n(1109),y=n(45),_=n(1110),b=n(1113),x=n(1114),w=n(393);e.getBindingDictionary=r,e.plan=l,e.createMockRequest=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";function r(t,e){return i(t,d.getFunctionName(e),e,!1)}function i(t,e,n,r){var i=t.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o){var u=h.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var l=i.userGeneratedMetadata,c=Object.keys(l),f=0===n.length&&c.length>0,p=f?c.length:n.length,d=a(r,e,o,l,p),v=s(t,n);return d.concat(v)}function o(t,e,n,r,i){var o=i[t.toString()]||[],a=l(o),s=!0!==a.unmanaged,u=r[t],p=a.inject||a.multiInject;if(u=p||u,u instanceof c.LazyServiceIdentifer&&(u=u.unwrap()),s){var d=u===Object,g=u===Function,m=void 0===u,y=d||g||m;if(!e&&y){var _=h.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(_)}var b=new v.Target(f.TargetTypeEnum.ConstructorArgument,a.targetName,u);return b.metadata=o,b}return null}function a(t,e,n,r,i){for(var a=[],s=0;s<i;s++){var u=s,l=o(u,t,e,n,r);null!==l&&a.push(l)}return a}function s(t,e){for(var n=t.getPropertiesMetadata(e),r=[],i=Object.keys(n),o=0,a=i;o<a.length;o++){var u=a[o],c=n[u],h=l(n[u]),p=h.targetName||u,d=h.inject||h.multiInject,g=new v.Target(f.TargetTypeEnum.ClassProperty,p,d);g.metadata=c,r.push(g)}var m=Object.getPrototypeOf(e.prototype).constructor;if(m!==Object){var y=s(t,m);r=r.concat(y)}return r}function u(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=d.getFunctionName(n),o=i(t,r,n,!0),a=o.map(function(t){return t.metadata.filter(function(t){return t.key===p.UNMANAGED_TAG})}),s=[].concat.apply([],a).length,l=o.length-s;return l>0?l:u(t,n)}return 0}function l(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[p.INJECT_TAG],multiInject:e[p.MULTI_INJECT_TAG],targetName:e[p.NAME_TAG],unmanaged:e[p.UNMANAGED_TAG]}}Object.defineProperty(e,"__esModule",{value:!0});var c=n(391),h=n(34),f=n(60),p=n(20),d=n(115);e.getFunctionName=d.getFunctionName;var v=n(393);e.getDependencies=r,e.getBaseClassDependencyCount=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),i=function(){function t(t,e,n,i,o){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=i},function(t,e,n){"use strict";function r(t,e,n){var r=e.filter(function(t){return null!==t.target&&t.target.type===u.TargetTypeEnum.ClassProperty}),i=r.map(n);return r.forEach(function(e,n){var r="";r=e.target.name.value();var o=i[n];t[r]=o}),t}function i(t,e){return new(t.bind.apply(t,[void 0].concat(e)))}function o(t,e){if(Reflect.hasMetadata(l.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(l.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(s.POST_CONSTRUCT_ERROR(t.name,e.message))}}}function a(t,e,n){var a=null;if(e.length>0){a=i(t,e.filter(function(t){return null!==t.target&&t.target.type===u.TargetTypeEnum.ConstructorArgument}).map(n)),a=r(a,e,n)}else a=new t;return o(t,a),a}Object.defineProperty(e,"__esModule",{value:!0});var s=n(34),u=n(60),l=n(20);e.resolveInstance=a},function(t,e,n){"use strict";function r(t){return c(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o=n(60),a=n(396),s=n(115),u=n(1115),l=function(t,e,n){try{return n()}catch(n){throw a.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},c=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,a=e.target&&e.target.isArray(),h=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(a&&h)return r.map(function(e){return c(t)(e)});var f=null;if(!e.target.isOptional()||0!==n.length){var p=n[0],d=p.scope===o.BindingScopeEnum.Singleton,v=p.scope===o.BindingScopeEnum.Request;if(d&&p.activated)return p.cache;if(v&&null!==t&&t.has(p.id))return t.get(p.id);if(p.type===o.BindingTypeEnum.ConstantValue)f=p.cache;else if(p.type===o.BindingTypeEnum.Function)f=p.cache;else if(p.type===o.BindingTypeEnum.Constructor)f=p.implementationType;else if(p.type===o.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)f=l("toDynamicValue",p.serviceIdentifier,function(){return p.dynamicValue(e.parentContext)});else if(p.type===o.BindingTypeEnum.Factory&&null!==p.factory)f=l("toFactory",p.serviceIdentifier,function(){return p.factory(e.parentContext)});else if(p.type===o.BindingTypeEnum.Provider&&null!==p.provider)f=l("toProvider",p.serviceIdentifier,function(){return p.provider(e.parentContext)});else{if(p.type!==o.BindingTypeEnum.Instance||null===p.implementationType){var g=s.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+g)}f=u.resolveInstance(p.implementationType,r,c(t))}return"function"==typeof p.onActivation&&(f=p.onActivation(e.parentContext,f)),d&&(p.cache=f,p.activated=!0),v&&null!==t&&!t.has(p.id)&&t.set(p.id,f),f}}};e.resolve=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(60),i=n(394),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1117),i=n(225),o=n(226),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=n(60),o=n(1118),a=n(394),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},t}();e.BindingToSyntax=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(n){return t.bind(n).toService(e)})}}}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){function n(t){return null==t}t.exports=n},function(t,e){function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function r(t,e){return function(n){return t(e(n))}}function i(t){return!!t&&"object"==typeof t}function o(t){if(!i(t)||f.call(t)!=a||n(t))return!1;var e=p(t);if(null===e)return!0;var r=c.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==h}var a="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,c=u.hasOwnProperty,h=l.call(Object),f=u.toString,p=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e,n){(function(t,n){function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function o(t){return function(e){return t(e)}}function a(t,e){return null==t?void 0:t[e]}function s(t,e){return function(n){return t(e(n))}}function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function l(){this.__data__=we?we(null):{},this.size=0}function c(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function h(t){var e=this.__data__;if(we){var n=e[t];return n===Ct?void 0:n}return re.call(e,t)?e[t]:void 0}function f(t){var e=this.__data__;return we?void 0!==e[t]:re.call(e,t)}function p(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=we&&void 0===e?Ct:e,this}function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function v(){this.__data__=[],this.size=0}function g(t){var e=this.__data__,n=D(e,t);return!(n<0)&&(n==e.length-1?e.pop():ve.call(e,n,1),--this.size,!0)}function m(t){var e=this.__data__,n=D(e,t);return n<0?void 0:e[n][1]}function y(t){return D(this.__data__,t)>-1}function _(t,e){var n=this.__data__,r=D(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function b(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function x(){this.size=0,this.__data__={hash:new u,map:new(xe||d),string:new u}}function w(t){var e=Q(this,t).delete(t);return this.size-=e?1:0,e}function S(t){return Q(this,t).get(t)}function E(t){return Q(this,t).has(t)}function M(t,e){var n=Q(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function T(t){var e=this.__data__=new d(t);this.size=e.size}function C(){this.__data__=new d,this.size=0}function A(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function P(t){return this.__data__.get(t)}function k(t){return this.__data__.has(t)}function I(t,e){var n=this.__data__;if(n instanceof d){var r=n.__data__;if(!xe||r.length<Tt-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new b(r)}return n.set(t,e),this.size=n.size,this}function O(t,e){var n=Ae(t),r=!n&&Ce(t),o=!n&&!r&&Pe(t),a=!n&&!r&&!o&&ke(t),s=n||r||o||a,u=s?i(t.length,String):[],l=u.length;for(var c in t)!e&&!re.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||nt(c,l))||u.push(c);return u}function j(t,e,n){(void 0===n||pt(t[e],n))&&(void 0!==n||e in t)||R(t,e,n)}function L(t,e,n){var r=t[e];re.call(t,e)&&pt(r,n)&&(void 0!==n||e in t)||R(t,e,n)}function D(t,e){for(var n=t.length;n--;)if(pt(t[n][0],e))return n;return-1}function R(t,e,n){"__proto__"==e&&me?me(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function B(t){return null==t?void 0===t?zt:Dt:ge&&ge in Object(t)?tt(t):ut(t)}function z(t){return _t(t)&&B(t)==It}function F(t){return!(!yt(t)||ot(t))&&(gt(t)?se:Nt).test(ft(t))}function N(t){return _t(t)&&mt(t.length)&&!!Vt[B(t)]}function U(t){if(!yt(t))return st(t);var e=at(t),n=[];for(var r in t)("constructor"!=r||!e&&re.call(t,r))&&n.push(r);return n}function V(t,e,n,r,i){t!==e&&Ee(e,function(o,a){if(i||(i=new T),yt(o))G(t,e,a,n,V,r,i);else{var s=r?r(ct(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),j(t,a,s)}},wt)}function G(t,e,n,r,i,o,a){var s=ct(t,n),u=ct(e,n),l=a.get(u);if(l)return void j(t,n,l);var c=o?o(s,u,n+"",t,e,a):void 0,h=void 0===c;if(h){var f=Ae(u),p=!f&&Pe(u),d=!f&&!p&&ke(u);c=u,f||p||d?Ae(s)?c=s:vt(s)?c=W(s):p?(h=!1,c=H(u,!0)):d?(h=!1,c=X(u,!0)):c=[]:bt(u)||Ce(u)?(c=s,Ce(s)?c=xt(s):yt(s)&&!gt(s)||(c=et(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),j(t,n,c)}function q(t,e){return Te(lt(t,e,Et),t+"")}function H(t,e){if(e)return t.slice();var n=t.length,r=he?he(n):new t.constructor(n);return t.copy(r),r}function Y(t){var e=new t.constructor(t.byteLength);return new ce(e).set(new ce(t)),e}function X(t,e){var n=e?Y(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function W(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Z(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?R(n,s,u):L(n,s,u)}return n}function K(t){return q(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&rt(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function J(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Q(t,e){var n=t.__data__;return it(e)?n["string"==typeof e?"string":"hash"]:n.map}function $(t,e){var n=a(t,e);return F(n)?n:void 0}function tt(t){var e=re.call(t,ge),n=t[ge];try{t[ge]=void 0;var r=!0}catch(t){}var i=oe.call(t);return r&&(e?t[ge]=n:delete t[ge]),i}function et(t){return"function"!=typeof t.constructor||at(t)?{}:Se(fe(t))}function nt(t,e){var n=typeof t;return!!(e=null==e?kt:e)&&("number"==n||"symbol"!=n&&Ut.test(t))&&t>-1&&t%1==0&&t<e}function rt(t,e,n){if(!yt(n))return!1;var r=typeof e;return!!("number"==r?dt(n)&&nt(e,n.length):"string"==r&&e in n)&&pt(n[e],t)}function it(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ot(t){return!!ie&&ie in t}function at(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||te)}function st(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function ut(t){return oe.call(t)}function lt(t,e,n){return e=_e(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=_e(i.length-e,0),s=Array(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),r(t,this,u)}}function ct(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function ht(t){var e=0,n=0;return function(){var r=be(),i=Pt-(r-n);if(n=r,i>0){if(++e>=At)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function ft(t){if(null!=t){try{return ne.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function pt(t,e){return t===e||t!==t&&e!==e}function dt(t){return null!=t&&mt(t.length)&&!gt(t)}function vt(t){return _t(t)&&dt(t)}function gt(t){if(!yt(t))return!1;var e=B(t);return e==jt||e==Lt||e==Ot||e==Bt}function mt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=kt}function yt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function _t(t){return null!=t&&"object"==typeof t}function bt(t){if(!_t(t)||B(t)!=Rt)return!1;var e=fe(t);if(null===e)return!0;var n=re.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ne.call(n)==ae}function xt(t){return Z(t,wt(t))}function wt(t){return dt(t)?O(t,!0):U(t)}function St(t){return function(){return t}}function Et(t){return t}function Mt(){return!1}var Tt=200,Ct="__lodash_hash_undefined__",At=800,Pt=16,kt=9007199254740991,It="[object Arguments]",Ot="[object AsyncFunction]",jt="[object Function]",Lt="[object GeneratorFunction]",Dt="[object Null]",Rt="[object Object]",Bt="[object Proxy]",zt="[object Undefined]",Ft=/[\\^$.*+?()[\]{}|]/g,Nt=/^\[object .+?Constructor\]$/,Ut=/^(?:0|[1-9]\d*)$/,Vt={};Vt["[object Float32Array]"]=Vt["[object Float64Array]"]=Vt["[object Int8Array]"]=Vt["[object Int16Array]"]=Vt["[object Int32Array]"]=Vt["[object Uint8Array]"]=Vt["[object Uint8ClampedArray]"]=Vt["[object Uint16Array]"]=Vt["[object Uint32Array]"]=!0,Vt[It]=Vt["[object Array]"]=Vt["[object ArrayBuffer]"]=Vt["[object Boolean]"]=Vt["[object DataView]"]=Vt["[object Date]"]=Vt["[object Error]"]=Vt[jt]=Vt["[object Map]"]=Vt["[object Number]"]=Vt[Rt]=Vt["[object RegExp]"]=Vt["[object Set]"]=Vt["[object String]"]=Vt["[object WeakMap]"]=!1;var Gt="object"==typeof t&&t&&t.Object===Object&&t,qt="object"==typeof self&&self&&self.Object===Object&&self,Ht=Gt||qt||Function("return this")(),Yt="object"==typeof e&&e&&!e.nodeType&&e,Xt=Yt&&"object"==typeof n&&n&&!n.nodeType&&n,Wt=Xt&&Xt.exports===Yt,Zt=Wt&&Gt.process,Kt=function(){try{var t=Xt&&Xt.require&&Xt.require("util").types;return t||Zt&&Zt.binding&&Zt.binding("util")}catch(t){}}(),Jt=Kt&&Kt.isTypedArray,Qt=Array.prototype,$t=Function.prototype,te=Object.prototype,ee=Ht["__core-js_shared__"],ne=$t.toString,re=te.hasOwnProperty,ie=function(){var t=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),oe=te.toString,ae=ne.call(Object),se=RegExp("^"+ne.call(re).replace(Ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=Wt?Ht.Buffer:void 0,le=Ht.Symbol,ce=Ht.Uint8Array,he=ue?ue.allocUnsafe:void 0,fe=s(Object.getPrototypeOf,Object),pe=Object.create,de=te.propertyIsEnumerable,ve=Qt.splice,ge=le?le.toStringTag:void 0,me=function(){try{var t=$(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ye=ue?ue.isBuffer:void 0,_e=Math.max,be=Date.now,xe=$(Ht,"Map"),we=$(Object,"create"),Se=function(){function t(){}return function(e){if(!yt(e))return{};if(pe)return pe(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();u.prototype.clear=l,u.prototype.delete=c,u.prototype.get=h,u.prototype.has=f,u.prototype.set=p,d.prototype.clear=v,d.prototype.delete=g,d.prototype.get=m,d.prototype.has=y,d.prototype.set=_,b.prototype.clear=x,b.prototype.delete=w,b.prototype.get=S,b.prototype.has=E,b.prototype.set=M,T.prototype.clear=C,T.prototype.delete=A,T.prototype.get=P,T.prototype.has=k,T.prototype.set=I;var Ee=J(),Me=me?function(t,e){return me(t,"toString",{configurable:!0,enumerable:!1,value:St(e),writable:!0})}:Et,Te=ht(Me),Ce=z(function(){return arguments}())?z:function(t){return _t(t)&&re.call(t,"callee")&&!de.call(t,"callee")},Ae=Array.isArray,Pe=ye||Mt,ke=Jt?o(Jt):N,Ie=K(function(t,e,n,r){V(t,e,n,r)});n.exports=Ie}).call(e,n(46),n(158)(t))},function(t,e,n){(function(e){function n(t,e){return!!(t?t.length:0)&&o(t,e,0)>-1}function r(t,e,n){for(var r=-1,i=t?t.length:0;++r<i;)if(n(e,t[r]))return!0;return!1}function i(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function o(t,e,n){if(e!==e)return i(t,a,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function a(t){return t!==t}function s(t,e){return t.has(e)}function u(t,e){return null==t?void 0:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function h(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function f(){this.__data__=pt?pt(null):{}}function p(t){return this.has(t)&&delete this.__data__[t]}function d(t){var e=this.__data__;if(pt){var n=e[t];return n===Y?void 0:n}return st.call(e,t)?e[t]:void 0}function v(t){var e=this.__data__;return pt?void 0!==e[t]:st.call(e,t)}function g(t,e){return this.__data__[t]=pt&&void 0===e?Y:e,this}function m(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function y(){this.__data__=[]}function _(t){var e=this.__data__,n=O(e,t);return!(n<0)&&(n==e.length-1?e.pop():ct.call(e,n,1),!0)}function b(t){var e=this.__data__,n=O(e,t);return n<0?void 0:e[n][1]}function x(t){return O(this.__data__,t)>-1}function w(t,e){var n=this.__data__,r=O(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function S(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function E(){this.__data__={hash:new h,map:new(ht||m),string:new h}}function M(t){return D(this,t).delete(t)}function T(t){return D(this,t).get(t)}function C(t){return D(this,t).has(t)}function A(t,e){return D(this,t).set(t,e),this}function P(t){var e=-1,n=t?t.length:0;for(this.__data__=new S;++e<n;)this.add(t[e])}function k(t){return this.__data__.set(t,Y),this}function I(t){return this.__data__.has(t)}function O(t,e){for(var n=t.length;n--;)if(U(t[n][0],e))return n;return-1}function j(t){return!(!G(t)||z(t))&&(V(t)||l(t)?lt:J).test(F(t))}function L(t,e,i){var o=-1,a=n,u=t.length,l=!0,h=[],f=h;if(i)l=!1,a=r;else if(u>=H){var p=e?null:dt(t);if(p)return c(p);l=!1,a=s,f=new P}else f=e?[]:h;t:for(;++o<u;){var d=t[o],v=e?e(d):d;if(d=i||0!==d?d:0,l&&v===v){for(var g=f.length;g--;)if(f[g]===v)continue t;e&&f.push(v),h.push(d)}else a(f,v,i)||(f!==h&&f.push(v),h.push(d))}return h}function D(t,e){var n=t.__data__;return B(e)?n["string"==typeof e?"string":"hash"]:n.map}function R(t,e){var n=u(t,e);return j(n)?n:void 0}function B(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function z(t){return!!ot&&ot in t}function F(t){if(null!=t){try{return at.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function N(t){return t&&t.length?L(t):[]}function U(t,e){return t===e||t!==t&&e!==e}function V(t){var e=G(t)?ut.call(t):"";return e==W||e==Z}function G(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function q(){}var H=200,Y="__lodash_hash_undefined__",X=1/0,W="[object Function]",Z="[object GeneratorFunction]",K=/[\\^$.*+?()[\]{}|]/g,J=/^\[object .+?Constructor\]$/,Q="object"==typeof e&&e&&e.Object===Object&&e,$="object"==typeof self&&self&&self.Object===Object&&self,tt=Q||$||Function("return this")(),et=Array.prototype,nt=Function.prototype,rt=Object.prototype,it=tt["__core-js_shared__"],ot=function(){var t=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),at=nt.toString,st=rt.hasOwnProperty,ut=rt.toString,lt=RegExp("^"+at.call(st).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=et.splice,ht=R(tt,"Map"),ft=R(tt,"Set"),pt=R(Object,"create");h.prototype.clear=f,h.prototype.delete=p,h.prototype.get=d,h.prototype.has=v,h.prototype.set=g,m.prototype.clear=y,m.prototype.delete=_,m.prototype.get=b,m.prototype.has=x,m.prototype.set=w,S.prototype.clear=E,S.prototype.delete=M,S.prototype.get=T,S.prototype.has=C,S.prototype.set=A,P.prototype.add=P.prototype.push=k,P.prototype.has=I;var dt=ft&&1/c(new ft([,-0]))[1]==X?function(t){return new ft(t)}:q;t.exports=N}).call(e,n(46))},function(t,e,n){var r=n(85),i=n(51),o=r(i,"DataView");t.exports=o},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(1185),o=n(1186),a=n(1187),s=n(1188),u=n(1189);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){var r=n(85),i=n(51),o=r(i,"Promise");t.exports=o},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=n(397),o=n(1209),a=n(1210);r.prototype.add=r.prototype.push=o,r.prototype.has=a,t.exports=r},function(t,e,n){var r=n(51),i=r.Uint8Array;t.exports=i},function(t,e,n){var r=n(85),i=n(51),o=r(i,"WeakMap");t.exports=o},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}t.exports=n},function(t,e,n){function r(t,e){return!!(null==t?0:t.length)&&i(t,e,0)>-1}var i=n(1148);t.exports=r},function(t,e){function n(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}t.exports=n},function(t,e){function n(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}t.exports=n},function(t,e){function n(t){return t.split("")}t.exports=n},function(t,e){function n(t){return t.match(r)||[]}var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=n},function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=n(116),o=n(238);t.exports=r},function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=n(116),o=n(155);t.exports=r},function(t,e){function n(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}t.exports=n},function(t,e,n){function r(t,e,n,j,L,D){var R,B=e&M,z=e&T,F=e&C;if(n&&(R=L?n(t,j,L,D):n(t)),void 0!==R)return R;if(!w(t))return t;var N=_(t);if(N){if(R=g(t),!B)return c(t,R)}else{var U=v(t),V=U==P||U==k;if(b(t))return l(t,B);if(U==I||U==A||V&&!L){if(R=z||V?{}:y(t),!B)return z?f(t,u(R,t)):h(t,s(R,t))}else{if(!O[U])return L?t:{};R=m(t,U,B)}}D||(D=new i);var G=D.get(t);if(G)return G;D.set(t,R),S(t)?t.forEach(function(i){R.add(r(i,e,n,i,t,D))}):x(t)&&t.forEach(function(i,o){R.set(o,r(i,e,n,o,t,D))});var q=F?z?d:p:z?keysIn:E,H=N?void 0:q(t);return o(H||t,function(i,o){H&&(o=i,i=t[o]),a(R,o,r(i,e,n,o,t,D))}),R}var i=n(399),o=n(1133),a=n(403),s=n(1141),u=n(1142),l=n(405),c=n(407),h=n(1171),f=n(1172),p=n(1180),d=n(1181),v=n(233),g=n(1190),m=n(1191),y=n(412),_=n(95),b=n(236),x=n(1229),w=n(52),S=n(1231),E=n(238),M=1,T=2,C=4,A="[object Arguments]",P="[object Function]",k="[object GeneratorFunction]",I="[object Object]",O={};O[A]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[I]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[P]=O["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){var r=n(52),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e){function n(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}t.exports=n},function(t,e,n){var r=n(1175),i=r();t.exports=i},function(t,e,n){function r(t,e,n){return e===e?a(t,e,n):i(t,o,n)}var i=n(1146),o=n(1151),a=n(1218);t.exports=r},function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(70),o=n(53),a="[object Arguments]";t.exports=r},function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(233),o=n(53),a="[object Map]";t.exports=r},function(t,e){function n(t){return t!==t}t.exports=n},function(t,e,n){function r(t){return!(!a(t)||o(t))&&(i(t)?d:l).test(s(t))}var i=n(117),o=n(1194),a=n(52),s=n(417),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,f=c.toString,p=h.hasOwnProperty,d=RegExp("^"+f.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(233),o=n(53),a="[object Set]";t.exports=r},function(t,e,n){function r(t){return a(t)&&o(t.length)&&!!s[i(t)]}var i=n(70),o=n(420),a=n(53),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){function r(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}var i=n(234),o=n(1205),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){if(!i(t))return a(t);var e=o(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var i=n(52),o=n(234),a=n(1206),s=Object.prototype,u=s.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e,n,h,f){t!==e&&a(e,function(a,l){if(f||(f=new i),u(a))s(t,e,l,n,r,h,f);else{var p=h?h(c(t,l),a,l+"",t,e,f):void 0;void 0===p&&(p=a),o(t,l,p)}},l)}var i=n(399),o=n(402),a=n(1147),s=n(1158),u=n(52),l=n(155),c=n(415);t.exports=r},function(t,e,n){function r(t,e,n,r,_,b,x){var w=m(t,n),S=m(e,n),E=x.get(S);if(E)return void i(t,n,E);var M=b?b(w,S,n+"",t,e,x):void 0,T=void 0===M;if(T){var C=c(S),A=!C&&f(S),P=!C&&!A&&g(S);M=S,C||A||P?c(w)?M=w:h(w)?M=s(w):A?(T=!1,M=o(S,!0)):P?(T=!1,M=a(S,!0)):M=[]:v(S)||l(S)?(M=w,l(w)?M=y(w):d(w)&&!p(w)||(M=u(S))):T=!1}T&&(x.set(S,M),_(M,S,r,b,x),x.delete(S)),i(t,n,M)}var i=n(402),o=n(405),a=n(406),s=n(407),u=n(412),l=n(419),c=n(95),h=n(1228),f=n(236),p=n(117),d=n(52),v=n(421),g=n(237),m=n(415),y=n(1235);t.exports=r},function(t,e){function n(t){return function(e){return null==t?void 0:t[e]}}t.exports=n},function(t,e,n){function r(t,e){return a(o(t,e,i),t+"")}var i=n(418),o=n(1208),a=n(1211);t.exports=r},function(t,e,n){var r=n(1226),i=n(408),o=n(418),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){function n(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e,n){function r(t){if("string"==typeof t)return t;if(a(t))return o(t,r)+"";if(s(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=n(149),o=n(1137),a=n(95),s=n(423),u=1/0,l=i?i.prototype:void 0,c=l?l.toString:void 0;t.exports=r},function(t,e,n){function r(t,e,n){var r=-1,h=o,f=t.length,p=!0,d=[],v=d;if(n)p=!1,h=a;else if(f>=c){var g=e?null:u(t);if(g)return l(g);p=!1,h=s,v=new i}else v=e?[]:d;t:for(;++r<f;){var m=t[r],y=e?e(m):m;if(m=n||0!==m?m:0,p&&y===y){for(var _=v.length;_--;)if(v[_]===y)continue t;e&&v.push(y),d.push(m)}else h(v,y,n)||(v!==d&&v.push(y),d.push(m))}return d}var i=n(1129),o=n(1135),a=n(1136),s=n(1166),u=n(1178),l=n(416),c=200;t.exports=r},function(t,e){function n(t,e){return t.has(e)}t.exports=n},function(t,e,n){function r(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:i(t,e,n)}var i=n(1162);t.exports=r},function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var i=n(230);t.exports=r},function(t,e){function n(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=n},function(t,e,n){function r(t){return a?Object(a.call(t)):{}}var i=n(149),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;t.exports=r},function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=n(116),o=n(232);t.exports=r},function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=n(116),o=n(410);t.exports=r},function(t,e,n){var r=n(51),i=r["__core-js_shared__"];t.exports=i},function(t,e,n){function r(t){return i(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e})}var i=n(1160),o=n(1192);t.exports=r},function(t,e){function n(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=n},function(t,e,n){function r(t){return function(e){e=s(e);var n=o(e)?a(e):void 0,r=n?n[0]:e.charAt(0),u=n?i(n,1).join(""):e.slice(1);return r[t]()+u}}var i=n(1167),o=n(411),a=n(1219),s=n(156);t.exports=r},function(t,e,n){function r(t){return function(e){return i(a(o(e).replace(u,"")),t,"")}}var i=n(1138),o=n(1227),a=n(1236),s="[']",u=RegExp(s,"g");t.exports=r},function(t,e,n){var r=n(398),i=n(1232),o=n(416),a=1/0,s=r&&1/o(new r([,-0]))[1]==a?function(t){return new r(t)}:i;t.exports=s},function(t,e,n){var r=n(1159),i={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},o=r(i);t.exports=o},function(t,e,n){function r(t){return i(t,a,o)}var i=n(404),o=n(232),a=n(238);t.exports=r},function(t,e,n){function r(t){return i(t,a,o)}var i=n(404),o=n(410),a=n(155);t.exports=r},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(149),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e){function n(t){return r.test(t)}var r=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=n},function(t,e,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(152);t.exports=r},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var i=n(152),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}var i=n(152),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?o:e,this}var i=n(152),o="__lodash_hash_undefined__";t.exports=r},function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&i.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,i=r.hasOwnProperty;t.exports=n},function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case m:return i(t);case l:case c:return new r(+t);case y:return o(t,n);case _:case b:case x:case w:case S:case E:case M:case T:case C:return u(t,n);case h:return new r;case f:case v:return new r(t);case p:return a(t);case d:return new r;case g:return s(t)}}var i=n(230),o=n(1168),a=n(1169),s=n(1170),u=n(406),l="[object Boolean]",c="[object Date]",h="[object Map]",f="[object Number]",p="[object RegExp]",d="[object Set]",v="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",M="[object Uint8ClampedArray]",T="[object Uint16Array]",C="[object Uint32Array]";t.exports=r},function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&a(e,n.length):"string"==r&&e in n)&&i(n[e],t)}var i=n(153),o=n(154),a=n(413),s=n(52);t.exports=r},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function r(t){return!!o&&o in t}var i=n(1173),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var i=n(150),o=Array.prototype,a=o.splice;t.exports=r},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=n(150);t.exports=r},function(t,e,n){function r(t){return i(this.__data__,t)>-1}var i=n(150);t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var i=n(150);t.exports=r},function(t,e,n){function r(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=n(1127),o=n(148),a=n(227);t.exports=r},function(t,e,n){function r(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}var i=n(151);t.exports=r},function(t,e,n){function r(t){return i(this,t).get(t)}var i=n(151);t.exports=r},function(t,e,n){function r(t){return i(this,t).has(t)}var i=n(151);t.exports=r},function(t,e,n){function r(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var i=n(151);t.exports=r},function(t,e,n){var r=n(414),i=r(Object.keys,Object);t.exports=i},function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},function(t,e,n){function r(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),u=Array(s);++a<s;)u[a]=r[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=r[a];return l[e]=n(u),i(t,this,l)}}var i=n(1132),o=Math.max;t.exports=r},function(t,e){function n(t){return this.__data__.set(t,r),this}var r="__lodash_hash_undefined__";t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){var r=n(1161),i=n(1212),o=i(r);t.exports=o},function(t,e){function n(t){var e=0,n=0;return function(){var a=o(),s=i-(a-n);if(n=a,s>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,i=16,o=Date.now;t.exports=n},function(t,e,n){function r(){this.__data__=new i,this.size=0}var i=n(148);t.exports=r},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}var i=n(148),o=n(227),a=n(397),s=200;t.exports=r},function(t,e){function n(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}t.exports=n},function(t,e,n){function r(t){return o(t)?a(t):i(t)}var i=n(1139),o=n(411),a=n(1220);t.exports=r},function(t,e){function n(t){return t.match(w)||[]}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\ufe0e\\ufe0f",l="["+r+"]",c="["+s+"]",h="\\ud83c[\\udffb-\\udfff]",f="(?:"+c+"|"+h+")",p="[^"+r+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",m=f+"?",y="["+u+"]?",_="(?:"+g+"(?:"+[p,d,v].join("|")+")"+y+m+")*",b=y+m+_,x="(?:"+[p+c+"?",c,d,v,l].join("|")+")",w=RegExp(h+"(?="+h+")|"+x+b,"g");t.exports=n},function(t,e){function n(t){return t.match(V)||[]}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\u2700-\\u27bf",l="a-z\\xdf-\\xf6\\xf8-\\xff",c="\\xac\\xb1\\xd7\\xf7",h="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f="\\u2000-\\u206f",p=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",d="A-Z\\xc0-\\xd6\\xd8-\\xde",v="\\ufe0e\\ufe0f",g=c+h+f+p,m="[']",y="["+g+"]",_="["+s+"]",b="\\d+",x="["+u+"]",w="["+l+"]",S="[^"+r+g+b+u+l+d+"]",E="\\ud83c[\\udffb-\\udfff]",M="(?:"+_+"|"+E+")",T="[^"+r+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",A="[\\ud800-\\udbff][\\udc00-\\udfff]",P="["+d+"]",k="\\u200d",I="(?:"+w+"|"+S+")",O="(?:"+P+"|"+S+")",j="(?:"+m+"(?:d|ll|m|re|s|t|ve))?",L="(?:"+m+"(?:D|LL|M|RE|S|T|VE))?",D=M+"?",R="["+v+"]?",B="(?:"+k+"(?:"+[T,C,A].join("|")+")"+R+D+")*",z="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",F="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",N=R+D+B,U="(?:"+[x,C,A].join("|")+")"+N,V=RegExp([P+"?"+w+"+"+j+"(?="+[y,P,"$"].join("|")+")",O+"+"+L+"(?="+[y,P+I,"$"].join("|")+")",P+"?"+I+"+"+j,P+"+"+L,F,z,b,U].join("|"),"g");t.exports=n},function(t,e,n){var r=n(1223),i=n(1177),o=i(function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)});t.exports=o},function(t,e,n){function r(t){return o(i(t).toLowerCase())}var i=n(156),o=n(427);t.exports=r},function(t,e,n){function r(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=o(n),n=n===n?n:0),void 0!==e&&(e=o(e),e=e===e?e:0),i(o(t),e,n)}var i=n(1143),o=n(1234);t.exports=r},function(t,e,n){function r(t){return i(t,o|a)}var i=n(1144),o=1,a=4;t.exports=r},function(t,e){function n(t){return function(){return t}}t.exports=n},function(t,e,n){function r(t){return(t=o(t))&&t.replace(a,i).replace(f,"")}var i=n(1179),o=n(156),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",l="\\u20d0-\\u20ff",c=s+u+l,h="["+c+"]",f=RegExp(h,"g");t.exports=r},function(t,e,n){function r(t){return o(t)&&i(t)}var i=n(154),o=n(53);t.exports=r},function(t,e,n){var r=n(1150),i=n(229),o=n(235),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){function r(t){return"number"==typeof t||o(t)&&i(t)==a}var i=n(70),o=n(53),a="[object Number]";t.exports=r},function(t,e,n){var r=n(1153),i=n(229),o=n(235),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e){function n(){}t.exports=n},function(t,e){function n(){return!1}t.exports=n},function(t,e,n){function r(t){if("number"==typeof t)return t;if(o(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=l.test(t);return n||c.test(t)?h(t.slice(2),n?2:8):u.test(t)?a:+t}var i=n(52),o=n(423),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;t.exports=r},function(t,e,n){function r(t){return i(t,o(t))}var i=n(116),o=n(155);t.exports=r},function(t,e,n){function r(t,e,n){return t=a(t),e=n?void 0:e,void 0===e?o(t)?s(t):i(t):t.match(e)||[]}var i=n(1140),o=n(1184),a=n(156),s=n(1221);t.exports=r},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,i){if(e)if(n){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk);",a={};e(a),r=i(a),r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else n=i;else e=i}var e,n,r;return t(["exports"],function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function r(t,e){this.x=t,this.y=e}function i(t,e,n,r){var i=new ai(t,e,n,r);return function(t){return i.solve(t)}}function o(t,e,n){return Math.min(n,Math.max(e,t))}function a(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function s(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function u(){return pi++}function l(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function c(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function h(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function f(t,e){return-1!==t.indexOf(e,t.length-e.length)}function p(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function d(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function v(t){return Array.isArray(t)?t.map(v):"object"==typeof t&&t?p(t,v):t}function g(t){di[t]||("undefined"!=typeof console&&console.warn(t),di[t]=!0)}function m(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function y(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e}function _(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function b(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}function x(t){if(null==vi){var e=t.navigator?t.navigator.userAgent:null;vi=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return vi}function w(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function S(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,hi),t.isContextLost())return;xi.supported=!0}catch(t){}t.deleteTexture(e),wi=!0}function E(t){return 0===t.indexOf("mapbox:")}function M(t){return Ti.test(t)}function T(t){var e=t.match(Ci);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function C(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function A(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(e[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t){return null}}function P(){self.caches&&!Pi&&(Pi=self.caches.open(Bi))}function k(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}function I(){return null==Ii&&(Ii=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ii}function O(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function j(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}function L(t){var e=t.value;return e?[new eo(t.key,e,"constants have been deprecated as of v8")]:[]}function D(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function R(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function B(t){if(Array.isArray(t))return t.map(B);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=B(t[n]);return e}return R(t)}function z(t,e){return{kind:"array",itemType:t,N:e}}function F(t){if("array"===t.kind){var e=F(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function N(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!N(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=vo;n<r.length;n+=1)if(!N(r[n],e))return null}return"Expected "+F(t)+" but found "+F(e)+" instead."}function U(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function V(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof mo)return!0;if(t instanceof yo)return!0;if(t instanceof bo)return!0;if(t instanceof xo)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!V(n[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!V(t[r]))return!1;return!0}return!1}function G(t){if(null===t)return io;if("string"==typeof t)return ao;if("boolean"==typeof t)return so;if("number"==typeof t)return oo;if(t instanceof mo)return uo;if(t instanceof yo)return ho;if(t instanceof bo)return fo;if(t instanceof xo)return po;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=G(i[r]);if(e){if(e===o)continue;e=co;break}e=o}return z(e||co,n)}return lo}function q(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof mo||t instanceof bo||t instanceof xo?t.toString():JSON.stringify(t)}function H(t){return Ro*Math.cos(t*Math.PI/180)}function Y(t){return(180+t)/360}function X(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function W(t,e){return t/H(e)}function Z(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function K(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function J(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Q(t,e){var n=Bo.fromLngLat({lng:t[0],lat:t[1]},0),r=Math.pow(2,e.z);return[Math.round(n.x*r*zo),Math.round(n.y*r*zo)]}function $(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function tt(t,e){for(var n,r,i,o,a,s,u,l=!1,c=0,h=e.length;c<h;c++)for(var f=e[c],p=0,d=f.length;p<d-1;p++){if((o=(n=t)[0]-(r=f[p])[0])*(u=n[1]-(i=f[p+1])[1])-(s=n[0]-i[0])*(a=n[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;$(t,f[p],f[p+1])&&(l=!l)}return l}function et(t,e){for(var n=0;n<e.length;n++)if(tt(t,e[n]))return!0;return!1}function nt(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1];return((t[0]-n[0])*o-i*(t[1]-n[1]))*((e[0]-n[0])*o-i*(e[1]-n[1]))<0}function rt(t,e,n){for(var r=0,i=n;r<i.length;r+=1)for(var o=i[r],a=0;a<o.length-1;++a)if(0!=(h=[(c=o[a+1])[0]-(l=o[a])[0],c[1]-l[1]])[0]*(f=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-h[1]*f[0]&&nt(s,u,l,c)&&nt(l,c,s,u))return!0;var s,u,l,c,h,f;return!1}function it(t,e){for(var n=0;n<t.length;++n)if(!tt(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(rt(t[r],t[r+1],e))return!1;return!0}function ot(t,e){for(var n=0;n<e.length;n++)if(it(t,e[n]))return!0;return!1}function at(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=Q(t[i][a],n);K(e,s),o.push(s)}r.push(o)}return r}function st(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=at(t[i],e,n);r.push(o)}return r}function ut(t){if(t instanceof Oo){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Fo)return!1;var e=!0;return t.eachChild(function(t){e&&!ut(t)&&(e=!1)}),e}function lt(t){if(t instanceof Oo&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!lt(t)&&(e=!1)}),e}function ct(t,e){if(t instanceof Oo&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!ct(t,e)&&(n=!1)}),n}function ht(t,e){for(var n,r=t.length-1,i=0,o=r,a=0;i<=o;)if((n=t[a=Math.floor((i+o)/2)])<=e){if(a===r||e<t[a+1])return a;i=a+1}else{if(!(n>e))throw new So("Input is not a number.");o=a-1}return 0}function ft(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function pt(t,e,n){return t*(1-n)+e*n}function dt(t){return t>Jo?Math.pow(t,1/3):t/Ko+Wo}function vt(t){return t>Zo?t*t*t:Ko*(t-Wo)}function gt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yt(t){var e=mt(t.r),n=mt(t.g),r=mt(t.b),i=dt((.4124564*e+.3575761*n+.1804375*r)/Ho),o=dt((.2126729*e+.7151522*n+.072175*r)/Yo);return{l:116*o-16,a:500*(i-o),b:200*(o-dt((.0193339*e+.119192*n+.9503041*r)/Xo)),alpha:t.a}}function _t(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=Yo*vt(e),n=Ho*vt(n),r=Xo*vt(r),new mo(gt(3.2404542*n-1.5371385*e-.4985314*r),gt(-.969266*n+1.8760108*e+.041556*r),gt(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function bt(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}function xt(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}function wt(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function St(t,e,n,r){return 0===r.compare(e,n)}function Et(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=so,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,co);if(!o)return null;if(!wt(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+F(o.type)+"'.");var a=e.parse(t[2],2,co);if(!a)return null;if(!wt(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+F(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+F(o.type)+"' and '"+F(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Mo(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Mo(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,ho)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=G(o),u=G(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new So('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=G(o),c=G(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}function Mt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=U(n,r,i,a);if(s)throw new So(s);return new mo(n/255*a,r/255*a,i/255*a,a)}function Tt(t,e){return t in e}function Ct(t,e){var n=e[t];return void 0===n?null:n}function At(t){return{type:t}}function Pt(t){return{result:"success",value:t}}function kt(t){return{result:"error",value:t}}function It(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ot(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function jt(t){return!!t.expression&&t.expression.interpolated}function Lt(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Dt(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Rt(t){return t}function Bt(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function zt(t,e,n,r,i){return Bt(typeof n===i?r[n]:void 0,t.default,e.default)}function Ft(t,e,n){if("number"!==Lt(n))return Bt(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=ht(t.stops.map(function(t){return t[0]}),n);return t.stops[i][1]}function Nt(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==Lt(n))return Bt(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=ht(t.stops.map(function(t){return t[0]}),n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=qo[e.type]||Rt;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=na[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function Ut(t,e,n){return"color"===e.type?n=mo.parse(n):"formatted"===e.type?n=bo.fromString(n.toString()):"resolvedImage"===e.type?n=xo.fromString(n.toString()):Lt(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Bt(n,t.default,e.default)}function Vt(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ya}function Gt(t,e){var n=new Uo(ya,[],e?function(t){var e={color:uo,string:ao,number:oo,enum:ao,boolean:so,formatted:fo,resolvedImage:po};return"array"===t.type?z(e[t.value]||co,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Pt(new _a(r,e)):kt(n.errors)}function qt(t,e){if("error"===(t=Gt(t,e)).result)return t;var n=t.value.expression,r=ut(n);if(!r&&!It(e))return kt([new no("","data expressions not supported")]);var i=ct(n,["zoom"]);if(!i&&!Ot(e))return kt([new no("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof oa)n=t(e.result);else if(e instanceof ia)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof Vo||e instanceof ra)&&e.input instanceof Oo&&"zoom"===e.input.name&&(n=e);return n instanceof no?n:(e.eachChild(function(e){var r=t(e);r instanceof no?n=r:!n&&r?n=new no("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new no("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof no?kt([o]):o instanceof ra&&!jt(e)?kt([new no("",'"interpolate" expressions cannot be used with this property')]):Pt(o?new xa(r?"camera":"composite",t.value,o.labels,o instanceof ra?o.interpolation:void 0):new ba(r?"constant":"source",t.value)):kt([new no("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Ht(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Lt(n);if("object"!==u)return[new eo(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],f=void 0;if(i[c])f=i[c];else if(r[c])f=pe;else if(i["*"])f=i["*"];else{if(!r["*"]){s.push(new eo(e,n[l],'unknown property "'+l+'"'));continue}f=pe}s=s.concat(f({key:(e?e+".":e)+l,value:n[l],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var p in r)i[p]||r[p].required&&void 0===r[p].default&&void 0===n[p]&&s.push(new eo(e,n,'missing required property "'+p+'"'));return s}function Yt(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||pe;if("array"!==Lt(e))return[new eo(o,e,"array expected, "+Lt(e)+" found")];if(n.length&&e.length!==n.length)return[new eo(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new eo(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===Lt(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function Xt(t){var e=t.key,n=t.value,r=t.valueSpec,i=Lt(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new eo(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new eo(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new eo(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function Wt(t){function e(t){var e=[],r=t.value,s=t.key;if("array"!==Lt(r))return[new eo(s,r,"array expected, "+Lt(r)+" found")];if(2!==r.length)return[new eo(s,r,"array length 2 expected, length "+r.length+" found")];if(h){if("object"!==Lt(r[0]))return[new eo(s,r,"object expected, "+Lt(r[0])+" found")];if(void 0===r[0].zoom)return[new eo(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new eo(s,r,"object stop key must have value")];if(o&&o>R(r[0].zoom))return[new eo(s,r[0].zoom,"stop zoom values must appear in ascending order")];R(r[0].zoom)!==o&&(o=R(r[0].zoom),i=void 0,u={}),e=e.concat(Ht({key:s+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Xt,value:n}}))}else e=e.concat(n({key:s+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Vt(B(r[1]))?e.concat([new eo(s+"[1]",r[1],"expressions are not allowed in function stops.")]):e.concat(pe({key:s+"[1]",value:r[1],valueSpec:a,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=Lt(t.value),o=R(t.value),l=null!==t.value?t.value:e;if(r){if(n!==r)return[new eo(t.key,l,n+" stop domain type must match previous stop domain type "+r)]}else r=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new eo(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==s){var c="number expected, "+n+" found";return It(a)&&void 0===s&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new eo(t.key,l,c)]}return"categorical"!==s||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==s&&"number"===n&&void 0!==i&&o<i?[new eo(t.key,l,"stop domain values must appear in ascending order")]:(i=o,"categorical"===s&&o in u?[new eo(t.key,l,"stop domain values must be unique")]:(u[o]=!0,[])):[new eo(t.key,l,"integer expected, found "+o)]}var r,i,o,a=t.valueSpec,s=R(t.value.type),u={},l="categorical"!==s&&void 0===t.value.property,c=!l,h="array"===Lt(t.value.stops)&&"array"===Lt(t.value.stops[0])&&"object"===Lt(t.value.stops[0][0]),f=Ht({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===s)return[new eo(t.key,t.value,'identity function may not have a "stops" property')];var n=[],r=t.value;return n=n.concat(Yt({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===Lt(r)&&0===r.length&&n.push(new eo(t.key,r,"array must have at least one stop")),n},default:function(t){return pe({key:t.key,value:t.value,valueSpec:a,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===s&&l&&f.push(new eo(t.key,t.value,'missing required property "property"')),"identity"===s||t.value.stops||f.push(new eo(t.key,t.value,'missing required property "stops"')),"exponential"===s&&t.valueSpec.expression&&!jt(t.valueSpec)&&f.push(new eo(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!It(t.valueSpec)?f.push(new eo(t.key,t.value,"property functions not supported")):l&&!Ot(t.valueSpec)&&f.push(new eo(t.key,t.value,"zoom functions not supported"))),"categorical"!==s&&!h||void 0!==t.value.property||f.push(new eo(t.key,t.value,'"property" property is required')),f}function Zt(t){var e=("property"===t.expressionContext?qt:Gt)(B(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new eo(""+t.key+e.key,t.value,e.message)});var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new eo(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!lt(n))return[new eo(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!lt(n))return[new eo(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ct(n,["zoom","feature-state"]))return[new eo(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ut(n))return[new eo(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Kt(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(R(n))&&i.push(new eo(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(R(n))&&i.push(new eo(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function Jt(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!Jt(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function Qt(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};Jt(t)||(t=te(t));var e=Gt(t,Sa);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:Array.isArray(t)&&0!==t.length&&"within"===t[0]}}function $t(t,e){return t<e?-1:t>e?1:0}function te(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?ee(t[1],t[2],"=="):"!="===n?ie(ee(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?ee(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(te))):"all"===n?["all"].concat(t.slice(1).map(te)):"none"===n?["all"].concat(t.slice(1).map(te).map(ie)):"in"===n?ne(t[1],t.slice(2)):"!in"===n?ie(ne(t[1],t.slice(2))):"has"===n?re(t[1]):"!has"!==n||ie(re(t[1]))}function ee(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function ne(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort($t)]]:["filter-in-small",t,["literal",e]]}}function re(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ie(t){return["!",t]}function oe(t){return Jt(B(t.value))?Zt(D({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==Lt(n))return[new eo(r,n,"array expected, "+Lt(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new eo(r,n,"filter array must have at least 1 element")];switch(a=a.concat(Kt({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),R(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===R(n[1])&&a.push(new eo(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new eo(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=Lt(n[1]))&&a.push(new eo(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=Lt(n[s]),"$type"===R(n[1])?a=a.concat(Kt({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new eo(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Lt(n[1]),2!==n.length?a.push(new eo(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new eo(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function ae(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return pe({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new eo(n,o,'unknown property "'+a+'"')];if("string"===Lt(o)&&It(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new eo(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new eo(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Dt(B(o))&&"identity"===R(o.type)&&h.push(new eo(n,o,'"text-font" does not support identity functions'))),h.concat(pe({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function se(t){return ae(t,"paint")}function ue(t){return ae(t,"layout")}function le(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new eo(r,n,'either "type" or "ref" is required'));var a,s=R(n.type),u=R(n.ref);if(n.id)for(var l=R(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];R(h.id)===l&&e.push(new eo(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new eo(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){R(t.id)===u&&(a=t)}),a?a.ref?e.push(new eo(r,n.ref,"ref cannot reference another ref layer")):s=R(a.type):e.push(new eo(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var f=i.sources&&i.sources[n.source],p=f&&R(f.type);f?"vector"===p&&"raster"===s?e.push(new eo(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===p&&"raster"!==s?e.push(new eo(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new eo(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&f.lineMetrics||e.push(new eo(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new eo(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new eo(r,n.source,'source "'+n.source+'" not found'))}else e.push(new eo(r,n,'missing required property "source"'));return e=e.concat(Ht({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return pe({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:oe,layout:function(t){return Ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return ue(D({layerType:s},t))}}})},paint:function(t){return Ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return se(D({layerType:s},t))}}})}}}))}function ce(t){var e=t.value,n=t.key,r=Lt(e);return"string"!==r?[new eo(n,e,"string expected, "+r+" found")]:[]}function he(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new eo(n,e,'"type" is required')];var o,a=R(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Ht({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:Ea});case"geojson":if(o=Ht({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Ea}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,Zt({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,Zt({key:n+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Ht({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Ht({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new eo(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kt({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function fe(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=Lt(e);if(void 0===e)return o;if("object"!==a)return o.concat([new eo("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?pe({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?pe({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new eo(s,e[s],'unknown property "'+s+'"')])}return o}function pe(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Dt(R(e))?Wt(t):n.expression&&Vt(B(e))?Zt(t):n.type&&Ma[n.type]?Ma[n.type](t):Ht(D({},t,{valueSpec:n.type?r[n.type]:n}))}function de(t){var e=t.value,n=t.key,r=ce(t);return r.length?r:(-1===e.indexOf("{fontstack}")&&r.push(new eo(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new eo(n,e,'"glyphs" url must include a "{range}" token')),r)}function ve(t,e){void 0===e&&(e=to);var n=[];return n=n.concat(pe({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:de,"*":function(){return[]}}})),t.constants&&(n=n.concat(L({key:"constants",value:t.constants,style:t,styleSpec:e}))),ge(n)}function ge(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function me(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return ge(t.apply(this,e))}}function ye(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new Qi(new Error(i[r].message))),n=!0;return n}function _e(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[Ia+o],s=i[Ia+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[Ia+r.length+1];this.keys=i.subarray(i[Ia+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}function be(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),La[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function xe(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function we(t){return ja&&t instanceof ja}function Se(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(xe(t)||we(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Oa)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(Se(o[i],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(La[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=La[s].shallow.indexOf(l)>=0?c:Se(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function Ee(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||xe(t)||we(t)||ArrayBuffer.isView(t)||t instanceof Oa)return t;if(Array.isArray(t))return t.map(Ee);if("object"==typeof t){var e=t.$name||"Object",n=La[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=La[e].shallow.indexOf(a)>=0?s:Ee(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}function Me(t){for(var e=0,n=t;e<n.length;e+=1)if(Te(n[e].charCodeAt(0)))return!0;return!1}function Te(t){return!(746!==t&&747!==t&&(t<4352||!(Ba["Bopomofo Extended"](t)||Ba.Bopomofo(t)||Ba["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Ba["CJK Compatibility Ideographs"](t)||Ba["CJK Compatibility"](t)||Ba["CJK Radicals Supplement"](t)||Ba["CJK Strokes"](t)||!(!Ba["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Ba["CJK Unified Ideographs Extension A"](t)||Ba["CJK Unified Ideographs"](t)||Ba["Enclosed CJK Letters and Months"](t)||Ba["Hangul Compatibility Jamo"](t)||Ba["Hangul Jamo Extended-A"](t)||Ba["Hangul Jamo Extended-B"](t)||Ba["Hangul Jamo"](t)||Ba["Hangul Syllables"](t)||Ba.Hiragana(t)||Ba["Ideographic Description Characters"](t)||Ba.Kanbun(t)||Ba["Kangxi Radicals"](t)||Ba["Katakana Phonetic Extensions"](t)||Ba.Katakana(t)&&12540!==t||!(!Ba["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Ba["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Ba["Unified Canadian Aboriginal Syllabics"](t)||Ba["Unified Canadian Aboriginal Syllabics Extended"](t)||Ba["Vertical Forms"](t)||Ba["Yijing Hexagram Symbols"](t)||Ba["Yi Syllables"](t)||Ba["Yi Radicals"](t))))}function Ce(t){return!(Te(t)||function(t){return!!(Ba["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Ba["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Ba["Letterlike Symbols"](t)||Ba["Number Forms"](t)||Ba["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ba["Control Pictures"](t)&&9251!==t||Ba["Optical Character Recognition"](t)||Ba["Enclosed Alphanumerics"](t)||Ba["Geometric Shapes"](t)||Ba["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Ba["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ba["CJK Symbols and Punctuation"](t)||Ba.Katakana(t)||Ba["Private Use Area"](t)||Ba["CJK Compatibility Forms"](t)||Ba["Small Form Variants"](t)||Ba["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Ae(t){return t>=1424&&t<=2303||Ba["Arabic Presentation Forms-A"](t)||Ba["Arabic Presentation Forms-B"](t)}function Pe(t,e){return!(!e&&Ae(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Ba.Khmer(t))}function ke(t){for(var e=0,n=t;e<n.length;e+=1)if(Ae(n[e].charCodeAt(0)))return!0;return!1}function Ie(){Va.fire(new Ji("pluginStateChange",{pluginStatus:Fa,pluginURL:Na}))}function Oe(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i=us[t.type].BYTES_PER_ELEMENT,o=n=je(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}}),size:je(n,Math.max(r,e)),alignment:e}}function je(t,e){return Math.ceil(t/e)*e}function Le(t,e){return 256*(t=o(Math.floor(t),0,255))+o(Math.floor(e),0,255)}function De(t){var e=+t;return!isNaN(e)&&e<=Ks?e:Xs(String(t))}function Re(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Be(t){return[Le(255*t.r,255*t.g),Le(255*t.b,255*t.a)]}function ze(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Fe(t,e,n){var r={color:{source:ks,composite:Is},number:{source:Es,composite:ks}},i=function(t){return{"line-pattern":{source:vs,composite:vs},"fill-pattern":{source:vs,composite:vs},"fill-extrusion-pattern":{source:vs,composite:vs}}[t]}(t);return i&&i[n]||r[e][n]}function Ne(t){for(var e=zo/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],a=0;a<i.length;a++){var s=i[a];s.x=Math.round(s.x*e),s.y=Math.round(s.y*e),(s.x<pu.min||s.x>pu.max||s.y<pu.min||s.y>pu.max)&&(g("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s.x=o(s.x,pu.min,pu.max),s.y=o(s.y,pu.min,pu.max))}return n}function Ue(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function Ve(t,e){for(var n=0;n<t.length;n++)if(Je(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(Je(t,e[r]))return!0;return!!Ye(t,e)}function Ge(t,e,n){return!!Je(t,e)||!!We(e,t,n)}function qe(t,e){if(1===t.length)return Ke(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(Je(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(Ke(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Ye(t,e[a]))return!0;return!1}function He(t,e,n){if(t.length>1){if(Ye(t,e))return!0;for(var r=0;r<e.length;r++)if(We(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(We(t[i],e,n))return!0;return!1}function Ye(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Xe(r,i,e[o],e[o+1]))return!0;return!1}function Xe(t,e,n,r){return m(t,n,r)!==m(e,n,r)&&m(t,e,n)!==m(t,e,r)}function We(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Ze(t,e[i-1],e[i])<r)return!0;return!1}function Ze(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function Ke(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function Je(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Qe(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=m(t,e,n[0]);return o!==m(t,e,n[1])||o!==m(t,e,n[2])||o!==m(t,e,n[3])}function $e(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function tn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function en(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=si.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++)a.push(t[s].sub(o));return a}function nn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function rn(t,e){var n=nn([],[t.x,t.y,0,1],e);return new si(n[0]/n[3],n[1]/n[3])}function on(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function an(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=on({},{width:r,height:i},n);sn(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function sn(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[l+h];return e}function un(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new wu({width:256,height:1},n)}function ln(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=cn(t,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=cn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(xn(a));for(s.sort(mn),i=0;i<s.length;i++)yn(s[i],n),n=hn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return fn(f,p,n,r,i,l),p}function cn(t,e,n,r,i){var o,a;if(i===Ln(t,e,n,r)>0)for(o=e;o<n;o+=r)a=In(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=In(o,t[o],t[o+1],a);return a&&Mn(a,a.next)&&(On(a),a=a.next),a}function hn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Mn(r,r.next)&&0!==En(r.prev,r,r.next))r=r.next;else{if(On(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function fn(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=bn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?dn(t,r,i,o):pn(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),On(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?fn(t=vn(hn(t),e,n),e,n,r,i,o,2):2===a&&gn(t,e,n,r,i,o):fn(hn(t),e,n,r,i,o,1);break}}}function pn(t){var e=t.prev,n=t,r=t.next;if(En(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(wn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&En(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function dn(t,e,n,r){var i=t.prev,o=t,a=t.next;if(En(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=bn(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=bn(s,u,e,n,r),h=t.prevZ,f=t.nextZ;h&&h.z>=l&&f&&f.z<=c;){if(h!==t.prev&&h!==t.next&&wn(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&En(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==t.prev&&f!==t.next&&wn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&En(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&wn(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&En(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=c;){if(f!==t.prev&&f!==t.next&&wn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&En(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function vn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Mn(i,o)&&Tn(i,r,r.next,o)&&Pn(i,o)&&Pn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),On(r),On(r.next),r=t=o),r=r.next}while(r!==t);return hn(r)}function gn(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Sn(a,s)){var u=kn(a,s);return a=hn(a,a.next),u=hn(u,u.next),fn(a,e,n,r,i,o),void fn(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function mn(t,e){return t.x-e.x}function yn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&wn(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Pn(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&_n(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(t,e)){var n=kn(e,t);hn(e,e.next),hn(n,n.next)}}function _n(t,e){return En(t.prev,t,e.prev)<0&&En(e.next,t,t.next)<0}function bn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function xn(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function wn(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Sn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Tn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Pn(t,e)&&Pn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(En(t.prev,t,e.prev)||En(t,e.prev,e))||Mn(t,e)&&En(t.prev,t,t.next)>0&&En(e.prev,e,e.next)>0)}function En(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Mn(t,e){return t.x===e.x&&t.y===e.y}function Tn(t,e,n,r){var i=An(En(t,e,n)),o=An(En(t,e,r)),a=An(En(n,r,t)),s=An(En(n,r,e));return i!==o&&a!==s||!(0!==i||!Cn(t,n,e))||!(0!==o||!Cn(t,r,e))||!(0!==a||!Cn(n,t,r))||!(0!==s||!Cn(n,e,r))}function Cn(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function An(t){return t>0?1:t<0?-1:0}function Pn(t,e){return En(t.prev,t,t.next)<0?En(t,e,t.next)>=0&&En(t,t.prev,e)>=0:En(t,e,t.prev)<0||En(t,t.next,e)<0}function kn(t,e){var n=new jn(t.i,t.x,t.y),r=new jn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function In(t,e,n,r){var i=new jn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function On(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function jn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ln(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Dn(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],f=r,p=i;for(Rn(e,r,n),o(e[i],h)>0&&Rn(e,r,i);f<p;){for(Rn(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;o(e[p],h)>0;)p--}0===o(e[r],h)?Rn(e,r,p):Rn(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||Bn)}function Rn(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Bn(t,e){return t<e?-1:t>e?1:0}function zn(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=y(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Dn(o[u],e,1,o[u].length-1,Fn),o[u]=o[u].slice(0,e));return o}function Fn(t,e){return e.area-t.area}function Nn(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function Un(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{},i.availableImages),h=l.evaluate({zoom:r},n,{},i.availableImages),f=l.evaluate({zoom:r+1},n,{},i.availableImages);h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,o[c=c&&c.name?c.name:c]=!0,o[h]=!0,o[f]=!0,n.patterns[u.id]={min:c,mid:h,max:f}}}return n}function Vn(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Gn,this,e)}function Gn(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function qn(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}function Hn(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Yn,this,e),this.length=this._features.length}function Yn(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function Xn(t,e,n){if(3===t){var r=new Ru(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}function Wn(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Fu)+a,i*Fu*2,o*Fu*2,Math.round(s))}function Zn(t,e){return t.x===e.x&&(t.x<0||t.x>zo)||t.y===e.y&&(t.y<0||t.y>zo)}function Kn(t,e){return t.x*e.x+t.y*e.y}function Jn(t,e){if(1===t.length){for(var n,r,i=0,o=e[i++];!n||o.equals(n);)if(!(n=e[i++]))return 1/0;for(;!r||o.equals(r)||n.equals(r);)if(!(r=e[i++]))return 1/0;var a=t[0],s=n.sub(o),u=r.sub(o),l=a.sub(o),c=Kn(s,s),h=Kn(s,u),f=Kn(u,u),p=Kn(l,s),d=Kn(l,u),v=c*f-h*h,g=(f*p-h*d)/v,m=(c*d-h*p)/v;return o.z*(1-g-m)+n.z*g+r.z*m}for(var y=1/0,_=0,b=e;_<b.length;_+=1)y=Math.min(y,b[_].z);return y}function Qn(t,e){return e>0?e+2*t:t}function $n(t,e,n){return t.sections.forEach(function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Ha.applyArabicShaping&&(t=Ha.applyArabicShaping(t)),t}(t.text,e,n)}),t}function tr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function er(t){return t.type===tr.Bytes?t.readVarint()+t.pos:t.pos+1}function nr(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function rr(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function ir(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function or(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ar(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function sr(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function ur(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function lr(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function cr(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function hr(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function fr(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function pr(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function dr(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function vr(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function gr(t,e,n){1===t&&n.readMessage(mr,e)}function mr(t,e,n){if(3===t){var r=n.readMessage(yr,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new xu({width:i+2*ll,height:o+2*ll},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}}function yr(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function _r(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var h=c[l],f=a.length-1;f>=0;f--){var p=a[f];if(!(h.w>p.w||h.h>p.h)){if(h.x=p.x,h.y=p.y,u=Math.max(u,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===p.w&&h.h===p.h){var d=a.pop();f<a.length&&(a[f]=d)}else h.h===p.h?(p.x+=h.w,p.w-=h.w):h.w===p.w?(p.y+=h.h,p.h-=h.h):(a.push({x:p.x+h.w,y:p.y,w:p.w-h.w,h:h.h}),p.y+=h.h,p.h-=h.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}function br(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v){var g,m=yl.fromFeature(t,i);h===vl.vertical&&m.verticalizePunctuation();var y=Ha.processBidirectionalText,_=Ha.processStyledBidirectionalText;if(y&&1===m.sections.length){g=[];for(var b=0,x=y(m.toString(),Mr(m,l,o,e,r,p,d));b<x.length;b+=1){var w=x[b],S=new yl;S.text=w,S.sections=m.sections;for(var E=0;E<w.length;E++)S.sectionIndex.push(0);g.push(S)}}else if(_){g=[];for(var M=0,T=_(m.text,m.sectionIndex,Mr(m,l,o,e,r,p,d));M<T.length;M+=1){var C=T[M],A=new yl;A.text=C[0],A.sectionIndex=C[1],A.sections=m.sections,g.push(A)}}else g=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(m,Mr(m,l,o,e,r,p,d));var P=[],k={positionedLines:P,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,n,r,i,o,a,s,u,l,c,h){for(var f=0,p=gl,d=0,v=0,g="right"===s?1:"left"===s?0:.5,m=0,y=0,_=i;y<_.length;y+=1){var b=_[y];b.trim();var x=b.getMaxScale(),w=(x-1)*il,S={positionedGlyphs:[],lineOffset:0};t.positionedLines[m]=S;var E=S.positionedGlyphs,M=0;if(b.length()){for(var T=0;T<b.length();T++){var C=b.getSection(T),A=b.getSectionIndex(T),P=b.getCharCode(T),k=0,I=null,O=null,j=null,L=il,D=!(u===vl.horizontal||!c&&!Te(P)||c&&(_l[P]||(q=P,Ba.Arabic(q)||Ba["Arabic Supplement"](q)||Ba["Arabic Extended-A"](q)||Ba["Arabic Presentation Forms-A"](q)||Ba["Arabic Presentation Forms-B"](q))));if(C.imageName){var R=r[C.imageName];if(!R)continue;j=C.imageName,t.iconsInText=t.iconsInText||!0,O=R.paddedRect;var B=R.displaySize;C.scale=C.scale*il/h,k=w+(il-B[1]*C.scale),L=(I={width:B[0],height:B[1],left:hl,top:-cl,advance:D?B[1]:B[0]}).advance;var z=D?B[0]*C.scale-il*x:B[1]*C.scale-il*x;z>0&&z>M&&(M=z)}else{var F=n[C.fontStack],N=F&&F[P];if(N&&N.rect)O=N.rect,I=N.metrics;else{var U=e[C.fontStack],V=U&&U[P];if(!V)continue;I=V.metrics}k=(x-C.scale)*il}D?(t.verticalizable=!0,E.push({glyph:P,imageName:j,x:f,y:p+k,vertical:D,scale:C.scale,fontStack:C.fontStack,sectionIndex:A,metrics:I,rect:O}),f+=L*C.scale+l):(E.push({glyph:P,imageName:j,x:f,y:p+k,vertical:D,scale:C.scale,fontStack:C.fontStack,sectionIndex:A,metrics:I,rect:O}),f+=I.advance*C.scale+l)}0!==E.length&&(d=Math.max(f-l,d),Cr(E,0,E.length-1,g,M)),f=0;var G=o*x+M;S.lineOffset=Math.max(M,w),p+=G,v=Math.max(G,v),++m}else p+=o,++m}var q,H=p-gl,Y=Tr(a),X=Y.horizontalAlign,W=Y.verticalAlign;(function(t,e,n,r,i,o,a,s,u){var l,c=(e-n)*i;l=o!==a?-s*r-gl:(-r*u+.5)*a;for(var h=0,f=t;h<f.length;h+=1)for(var p=0,d=f[h].positionedGlyphs;p<d.length;p+=1){var v=d[p];v.x+=c,v.y+=l}})(t.positionedLines,g,X,W,d,v,o,H,i.length),t.top+=-W*H,t.bottom=t.top+H,t.left+=-X*d,t.right=t.left+d}(k,e,n,r,g,a,s,u,h,l,f,v),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(P)&&k}function xr(t,e,n,r,i,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*il/o+i:0}var s=n[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+i:0}function wr(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Sr(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Er(t,e,n,r,i,o){for(var a=null,s=wr(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],h=wr(e-c.x,n,i,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Mr(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],l=function(t,e,n,r,i,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=xr(t.getCharCode(s),u,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),c=t.text.indexOf("")>=0,h=0,f=0;f<t.length();f++){var p=t.getSection(f),d=t.getCharCode(f);if(_l[d]||(h+=xr(d,p,r,i,e,a)),f<t.length()-1){var v=!((s=d)<11904||!(Ba["Bopomofo Extended"](s)||Ba.Bopomofo(s)||Ba["CJK Compatibility Forms"](s)||Ba["CJK Compatibility Ideographs"](s)||Ba["CJK Compatibility"](s)||Ba["CJK Radicals Supplement"](s)||Ba["CJK Strokes"](s)||Ba["CJK Symbols and Punctuation"](s)||Ba["CJK Unified Ideographs Extension A"](s)||Ba["CJK Unified Ideographs"](s)||Ba["Enclosed CJK Letters and Months"](s)||Ba["Halfwidth and Fullwidth Forms"](s)||Ba.Hiragana(s)||Ba["Ideographic Description Characters"](s)||Ba["Kangxi Radicals"](s)||Ba["Katakana Phonetic Extensions"](s)||Ba.Katakana(s)||Ba["Vertical Forms"](s)||Ba["Yi Radicals"](s)||Ba["Yi Syllables"](s)));(bl[d]||v||p.imageName)&&u.push(Er(f+1,h,l,u,Sr(d,t.getCharCode(f+1),v&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Er(t.length(),h,l,u,0,!0))}function Tr(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Cr(t,e,n,r,i){if(r||i)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r,s=e;s<=n;s++)t[s].x-=a,t[s].y+=i}function Ar(t,e,n,r,i,o){var a,s=t.image;if(s.content){var u=s.content,l=s.pixelRatio||1;a=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,h,f,p,d=e.left*o,v=e.right*o;"width"===n||"both"===n?(p=i[0]+d-r[3],h=i[0]+v+r[1]):h=(p=i[0]+(d+v-s.displaySize[0])/2)+s.displaySize[0];var g=e.top*o,m=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+g-r[0],f=i[1]+m+r[2]):f=(c=i[1]+(g+m-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:f,left:p,collisionPadding:a}}function Pr(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Ya(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new Ya(s)),maxSize:n.evaluate(new Ya(u)),interpolationType:i}}function kr(t,e,n){var r=e.uSize,i=n.lowerSize;return"source"===t.kind?i/wl:"composite"===t.kind?pt(i/wl,n.upperSize/wl,e.uSizeT):r}function Ir(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,a=i?o(ra.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=pt(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:r}}function Or(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a],h=t[a+1];if(!h)return!1;var f=t[a-1].angleTo(c)-c.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=c.dist(h)}return!0}function jr(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Lr(t,e,n){return t?.6*e*n:0}function Dr(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Rr(t,e,n,r,i,o){for(var a=Lr(n,i,o),s=Dr(n,r)*o,u=0,l=jr(t)/2,c=0;c<t.length-1;c++){var h=t[c],f=t[c+1],p=h.dist(f);if(u+p>l){var d=(l-u)/p,v=pt(h.x,f.x,d),g=pt(h.y,f.y,d),m=new xl(v,g,f.angleTo(h),c);return m._round(),!a||Or(t,m,s,a,e)?m:void 0}u+=p}}function Br(t,e,n,r,i,o,a,s,u){var l=Lr(r,o,a),c=Dr(r,i),h=c*a,f=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-h<e/4&&(e=h+e/4),function t(e,n,r,i,o,a,s,u,l){for(var c=a/2,h=jr(e),f=0,p=n-r,d=[],v=0;v<e.length-1;v++){for(var g=e[v],m=e[v+1],y=g.dist(m),_=m.angleTo(g);p+r<f+y;){var b=((p+=r)-f)/y,x=pt(g.x,m.x,b),w=pt(g.y,m.y,b);if(x>=0&&x<l&&w>=0&&w<l&&p-c>=0&&p+c<=h){var S=new xl(x,w,_,v);S._round(),i&&!Or(e,S,a,i,o)||d.push(S)}}f+=y}return u||d.length||s||(d=t(e,f/2,r,i,o,a,s,!0,l)),d}(t,f?e/2*s%e:(c/2+2*o)*a*s%e,e,l,n,h,f,!1,u)}function zr(t,e,n,r){var i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2*El,u=o.paddedRect.h-2*El,l=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,s]],f=o.stretchY||[[0,u]],p=function(t,e){return t+e[1]-e[0]},d=h.reduce(p,0),v=f.reduce(p,0),g=s-d,m=u-v,y=0,_=d,b=0,x=v,w=0,S=g,E=0,M=m;if(o.content&&r){var T=o.content;y=Fr(h,0,T[0]),b=Fr(f,0,T[1]),_=Fr(h,T[0],T[2]),x=Fr(f,T[1],T[3]),w=T[0]-y,E=T[1]-b,S=T[2]-T[0]-_,M=T[3]-T[1]-x}var C=function(r,i,s,u){var h=Ur(r.stretch-y,_,l,t.left),f=Vr(r.fixed-w,S,r.stretch,d),p=Ur(i.stretch-b,x,c,t.top),g=Vr(i.fixed-E,M,i.stretch,v),m=Ur(s.stretch-y,_,l,t.left),T=Vr(s.fixed-w,S,s.stretch,d),C=Ur(u.stretch-b,x,c,t.top),A=Vr(u.fixed-E,M,u.stretch,v),P=new si(h,p),k=new si(m,p),I=new si(m,C),O=new si(h,C),j=new si(f/a,g/a),L=new si(T/a,A/a),D=e*Math.PI/180;if(D){var R=Math.sin(D),B=Math.cos(D),z=[B,-R,R,B];P._matMult(z),k._matMult(z),O._matMult(z),I._matMult(z)}var F=r.stretch+r.fixed,N=i.stretch+i.fixed;return{tl:P,tr:k,bl:O,br:I,tex:{x:o.paddedRect.x+El+F,y:o.paddedRect.y+El+N,w:s.stretch+s.fixed-F,h:u.stretch+u.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:j,pixelOffsetBR:L,minFontScaleX:S/a/l,minFontScaleY:M/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var A=Nr(h,g,d),P=Nr(f,m,v),k=0;k<A.length-1;k++)for(var I=A[k],O=A[k+1],j=0;j<P.length-1;j++)i.push(C(I,P[j],O,P[j+1]));else i.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:u+1}));return i}function Fr(t,e,n){for(var r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];r+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return r}function Nr(t,e,n){for(var r=[{fixed:-El,stretch:0}],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],l=r[r.length-1];r.push({fixed:s-l.stretch,stretch:l.stretch}),r.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return r.push({fixed:e+El,stretch:n}),r}function Ur(t,e,n,r){return t/e*n+r}function Vr(t,e,n,r){return t-e*n/r}function Gr(t,e){return t<e?-1:t>e?1:0}function qr(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=1/0,i=1/0,o=-1/0,a=-1/0,s=t[0],u=0;u<s.length;u++){var l=s[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>o)&&(o=l.x),(!u||l.y>a)&&(a=l.y)}var c=Math.min(o-r,a-i),h=c/2,f=new Tl([],Hr);if(0===c)return new si(r,i);for(var p=r;p<o;p+=c)for(var d=i;d<a;d+=c)f.push(new Yr(p+h,d+h,h,t));for(var v=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new Yr(n/e,r/e,0,t)}(t),g=f.length;f.length;){var m=f.pop();(m.d>v.d||!v.d)&&(v=m,n&&console.log("found best %d after %d probes",Math.round(1e4*m.d)/1e4,g)),m.max-v.d<=e||(f.push(new Yr(m.p.x-(h=m.h/2),m.p.y-h,h,t)),f.push(new Yr(m.p.x+h,m.p.y-h,h,t)),f.push(new Yr(m.p.x-h,m.p.y+h,h,t)),f.push(new Yr(m.p.x+h,m.p.y+h,h,t)),g+=4)}return n&&(console.log("num probes: "+g),console.log("best distance: "+v.d)),v.p}function Hr(t,e){return e.max-t.max}function Yr(t,e,n,r){this.p=new si(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>t.y!=c.y>t.y&&t.x<(c.x-l.x)*(t.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,Ze(t,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}function Xr(t,e){return e[1]!==Al?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-Cl;break;case"bottom-right":case"bottom-left":case"bottom":i=-n+Cl}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-Cl;break;case"bottom-right":case"bottom-left":r=-i+Cl;break;case"bottom":r=-e+Cl;break;case"top":r=e-Cl}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function Wr(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zr(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){var v=function(t,e,n,r,i,o,a,s){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=[],c=0,h=e.positionedLines;c<h.length;c+=1)for(var f=h[c],p=0,d=f.positionedGlyphs;p<d.length;p+=1){var v=d[p];if(v.rect){var g=v.rect||{},m=cl+1,y=!0,_=1,b=0,x=(i||s)&&v.vertical,w=v.metrics.advance*v.scale/2;if(s&&e.verticalizable&&(b=f.lineOffset/2-(v.imageName?-(il-v.metrics.width*v.scale)/2:(v.scale-1)*il)),v.imageName){var S=a[v.imageName];y=S.sdf,m=hl/(_=S.pixelRatio)}var E=i?[v.x+w,v.y]:[0,0],M=i?[0,0]:[v.x+w+n[0],v.y+n[1]-b],T=[0,0];x&&(T=M,M=[0,0]);var C=(v.metrics.left-m)*v.scale-w+M[0],A=(-v.metrics.top-m)*v.scale+M[1],P=C+g.w*v.scale/_,k=A+g.h*v.scale/_,I=new si(C,A),O=new si(P,A),j=new si(C,k),L=new si(P,k);if(x){var D=new si(-w,w-gl),R=-Math.PI/2,B=il/2-w,z=new si(5-gl-B,-(v.imageName?B:0)),F=new(Function.prototype.bind.apply(si,[null].concat(T)));I._rotateAround(R,D)._add(z)._add(F),O._rotateAround(R,D)._add(z)._add(F),j._rotateAround(R,D)._add(z)._add(F),L._rotateAround(R,D)._add(z)._add(F)}if(u){var N=Math.sin(u),U=Math.cos(u),V=[U,-N,N,U];I._matMult(V),O._matMult(V),j._matMult(V),L._matMult(V)}var G=new si(0,0),q=new si(0,0);l.push({tl:I,tr:O,bl:j,br:L,tex:g,writingMode:e.writingMode,glyphOffset:E,sectionIndex:v.sectionIndex,isSDF:y,pixelOffsetTL:G,pixelOffsetBR:q,minFontScaleX:0,minFontScaleY:0})}}return l}(0,n,s,i,o,a,r,t.allowVerticalPlacement),m=t.textSizeData,y=null;"source"===m.kind?(y=[wl*i.layout.get("text-size").evaluate(a,{})])[0]>kl&&g(t.layerIds[0]+': Value for "text-size" is >= '+Pl+'. Reduce your "text-size".'):"composite"===m.kind&&((y=[wl*p.compositeTextSizes[0].evaluate(a,{},d),wl*p.compositeTextSizes[1].evaluate(a,{},d)])[0]>kl||y[1]>kl)&&g(t.layerIds[0]+': Value for "text-size" is >= '+Pl+'. Reduce your "text-size".'),t.addSymbols(t.text,v,y,s,o,a,l,e,u.lineStartIndex,u.lineLength,f,d);for(var _=0,b=c;_<b.length;_+=1)h[b[_]]=t.text.placedSymbolArray.length-1;return 4*v.length}function Kr(t){for(var e in t)return t[e];return null}function Jr(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}function Qr(t,e,n,r,i,o,a,s,u,l,c,h,f){var p=s?Math.min(kl,Math.round(s[0])):0,d=s?Math.min(kl,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(u?1:0),d,16*l,16*c,256*h,256*f)}function $r(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function ti(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(ke(n[e].text))return!0;return!1}function ei(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}function ni(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}function ri(t,e,n,r,i){return p(t,function(t,o){var a=e instanceof ts?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a})}function ii(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function oi(t,e){return e-t}var ai=n;n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var si=r;r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t};var ui,li,ci,hi,fi=i(.25,.1,.25,1),pi=1,di={},vi=null,gi=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),mi=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,yi=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,_i={now:gi,frame:function(t){var e=mi(t);return{cancel:function(){return yi(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=self.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return ui||(ui=self.document.createElement("a")),ui.href=t,ui.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==li&&(li=self.matchMedia("(prefers-reduced-motion: reduce)")),li.matches)}},bi={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},xi={supported:!1,testSupport:function(t){!wi&&hi&&(Si?S(t):ci=t)}},wi=!1,Si=!1;self.document&&((hi=self.document.createElement("img")).onload=function(){ci&&S(ci),ci=null,Si=!0},hi.onerror=function(){wi=!0,ci=null},hi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ei="01",Mi=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};Mi.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ei,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},Mi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Mi.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},Mi.prototype.normalizeStyleURL=function(t,e){if(!E(t))return t;var n=T(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},Mi.prototype.normalizeGlyphsURL=function(t,e){if(!E(t))return t;var n=T(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},Mi.prototype.normalizeSourceURL=function(t,e){if(!E(t))return t;var n=T(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},Mi.prototype.normalizeSpriteURL=function(t,e,n,r){var i=T(t);return E(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+e+n,C(i))},Mi.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!E(t))return t;var n=T(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(_i.devicePixelRatio>=2||512===e?"@2x":"")+(xi.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||bi.ACCESS_TOKEN;return bi.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},Mi.prototype.canonicalizeTileURL=function(t,e){var n=T(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var i=n.params;return e&&(i=i.filter(function(t){return!t.match(/^access_token=/)})),i.length&&(r+="?"+i.join("&")),r},Mi.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&E(e),r=[],i=0,o=t.tiles||[];i<o.length;i+=1){var a=o[i];M(a)?r.push(this.canonicalizeTileURL(a,n)):r.push(a)}return r},Mi.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=T(bi.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!bi.REQUIRE_ACCESS_TOKEN)return C(t);if(!(e=e||bi.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter(function(t){return-1===t.indexOf("access_token")}),t.params.push("access_token="+e),C(t)};var Ti=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Ci=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,Ai=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ai.prototype.getStorageKey=function(t){var e,n=A(bi.ACCESS_TOKEN);return e=n&&n.u?self.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):bi.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Ai.prototype.fetchEventData=function(){var t=w("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=self.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){g("Unable to read from LocalStorage")}},Ai.prototype.saveEventData=function(){var t=w("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){g("Unable to write to LocalStorage")}},Ai.prototype.processRequests=function(t){},Ai.prototype.postEvent=function(t,e,n,r){var i=this;if(bi.EVENTS_URL){var o=T(bi.EVENTS_URL);o.params.push("access_token="+(r||bi.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.9.1",skuId:Ei,userId:this.anonId},u=e?s(a,e):a,l={url:C(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([u])};this.pendingRequest=Zi(l,function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)})}},Ai.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var Pi,ki,Ii,Oi=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,r){this.skuToken=n,(bi.EVENTS_URL&&r||bi.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return E(t)||M(t)}))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),c(this.anonId)||(this.anonId=l()),this.postEvent(i,{skuToken:this.skuToken},function(t){t||r&&(e.success[r]=!0)},t))}},e}(Ai),ji=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){bi.EVENTS_URL&&bi.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return E(t)||M(t)})&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=A(bi.ACCESS_TOKEN),r=n?n.u:bi.ACCESS_TOKEN,i=r!==this.eventData.tokenU;c(this.anonId)||(this.anonId=l(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)},t)}},e}(Ai)),Li=ji.postTurnstileEvent.bind(ji),Di=new Oi,Ri=Di.postMapLoadEvent.bind(Di),Bi="mapbox-tiles",zi=500,Fi=50,Ni=42e4,Ui=1/0,Vi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Vi);var Gi,qi,Hi=function(t){function e(e,n,r){401===n&&M(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Yi=_()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},Xi=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(Yi())&&!/^\w+:/.test(n))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,r=new self.AbortController,i=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Yi(),signal:r.signal}),o=!1,a=!1,s=(n=i.url).indexOf("sku=")>0&&M(n);"json"===t.type&&i.headers.set("Accept","application/json");var u=function(n,r,o){if(!a){if(n&&"SecurityError"!==n.message&&g(n),r&&o)return l(r);var u=Date.now();self.fetch(i).then(function(n){if(n.ok){var r=s?n.clone():null;return l(n,r,u)}return e(new Hi(n.statusText,n.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))})}},l=function(n,r,s){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then(function(t){a||(r&&s&&function(t,e,n){if(P(),Pi){var r={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach(function(t,e){return r.headers.set(e,t)});var i=b(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<Ni||function(t,e){if(void 0===ki)try{new Response(new ReadableStream),ki=!0}catch(t){ki=!1}ki?e(t.body):t.blob().then(e)}(e,function(e){var n=new self.Response(e,r);P(),Pi&&Pi.then(function(e){return e.put(k(t.url),n)}).catch(function(t){return g(t.message)})}))}}(i,r,s),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))}).catch(function(t){a||e(new Error(t.message))})};return s?function(t,e){if(P(),!Pi)return e(null);var n=k(t.url);Pi.then(function(t){t.match(n).then(function(r){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=b(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)}).catch(e)}).catch(e)}(i,u):u(null,null),{cancel:function(){a=!0,o||r.abort()}}}(t,e);if(_()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new self.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new Hi(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},Wi=function(t,e){return Xi(s(t,{type:"arrayBuffer"}),e)},Zi=function(t,e){return Xi(s(t,{method:"POST"}),e)};Gi=[],qi=0;var Ki=function(t,e){if(xi.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),qi>=bi.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return Gi.push(n),n}qi++;var r=!1,i=function(){if(!r)for(r=!0,qi--;Gi.length&&qi<bi.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Gi.shift();t.cancelled||(t.cancel=Ki(t.requestParameters,t.callback).cancel)}},o=Wi(t,function(t,n,r,o){i(),t?e(t):n&&(I()?function(t,e){var n=new self.Blob([new Uint8Array(t)],{type:"image/png"});self.createImageBitmap(n).then(function(t){e(null,t)}).catch(function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(n,e):function(t,e,n,r){var i=new self.Image,o=self.URL;i.onload=function(){e(null,i),o.revokeObjectURL(i.src)},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new self.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=t.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(n,e,r,o))});return{cancel:function(){o.cancel(),i()}}},Ji=function(t,e){void 0===e&&(e={}),s(this,e),this.type=t},Qi=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",s({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ji),$i=function(){};$i.prototype.on=function(t,e){return this._listeners=this._listeners||{},O(t,e,this._listeners),this},$i.prototype.off=function(t,e){return j(t,e,this._listeners),j(t,e,this._oneTimeListeners),this},$i.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},O(t,e,this._oneTimeListeners),this},$i.prototype.fire=function(t,e){"string"==typeof t&&(t=new Ji(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var u=a[o];j(n,u,this._oneTimeListeners),u.call(this,t)}var l=this._eventedParent;l&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof Qi&&console.error(t.error);return this},$i.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},$i.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var to={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},eo=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)},no=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),ro=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};ro.prototype.concat=function(t){return new ro(this,t)},ro.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},ro.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var io={kind:"null"},oo={kind:"number"},ao={kind:"string"},so={kind:"boolean"},uo={kind:"color"},lo={kind:"object"},co={kind:"value"},ho={kind:"collator"},fo={kind:"formatted"},po={kind:"resolvedImage"},vo=[io,oo,ao,so,uo,fo,lo,z(co),po],go=e(function(t,e){function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function i(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function o(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in a)return a[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),h=s.substr(u+1,l-(u+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=i(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),f];case"hsla":if(4!==h.length)return null;f=i(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=i(h[1]),v=i(h[2]),g=v<=.5?v*(d+1):v+d-v*d,m=2*v-g;return[n(255*o(m,g,p+1/3)),n(255*o(m,g,p)),n(255*o(m,g,p-1/3)),f];default:return null}}return null}}catch(t){}}).parseCSSColor,mo=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};mo.parse=function(t){if(t){if(t instanceof mo)return t;if("string"==typeof t){var e=go(t);if(e)return new mo(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},mo.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},mo.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},mo.black=new mo(0,0,0,1),mo.white=new mo(1,1,1,1),mo.transparent=new mo(0,0,0,0),mo.red=new mo(1,0,0,1);var yo=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};yo.prototype.compare=function(t,e){return this.collator.compare(t,e)},yo.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var _o=function(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i},bo=function(t){this.sections=t};bo.fromString=function(t){return new bo([new _o(t,null,null,null,null)])},bo.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},bo.factory=function(t){return t instanceof bo?t:bo.fromString(t)},bo.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},bo.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}return t};var xo=function(t){this.name=t.name,this.available=t.available};xo.prototype.toString=function(){return this.name},xo.fromString=function(t){return t?new xo({name:t,available:!1}):null},xo.prototype.serialize=function(){return["image",this.name]};var wo=function(t,e){this.type=t,this.value=e};wo.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!V(t[1]))return e.error("invalid value");var n=t[1],r=G(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new wo(r,n)},wo.prototype.evaluate=function(){return this.value},wo.prototype.eachChild=function(){},wo.prototype.outputDefined=function(){return!0},wo.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof mo?["rgba"].concat(this.value.toArray()):this.value instanceof bo?this.value.serialize():this.value};var So=function(t){this.name="ExpressionEvaluationError",this.message=t};So.prototype.toJSON=function(){return this.message};var Eo={string:ao,number:oo,boolean:so,object:lo},Mo=function(t,e){this.type=t,this.args=e};Mo.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Eo)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Eo[s],r++}else o=co;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=z(o,a)}else n=Eo[i];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,co);if(!l)return null;u.push(l)}return new Mo(n,u)},Mo.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!N(this.type,G(n)))return n;if(e===this.args.length-1)throw new So("Expected value to be of type "+F(this.type)+", but found "+F(G(n))+" instead.")}return null},Mo.prototype.eachChild=function(t){this.args.forEach(t)},Mo.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Mo.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var To=function(t){this.type=fo,this.sections=t};To.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,oo)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,z(ao))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,uo)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var h=e.parse(t[o],1,co);if(!h)return null;var f=h.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:h,scale:null,font:null,textColor:null})}}return new To(r)},To.prototype.evaluate=function(t){return new bo(this.sections.map(function(e){var n=e.content.evaluate(t);return G(n)===po?new _o("",n,null,null,null):new _o(q(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},To.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},To.prototype.outputDefined=function(){return!1},To.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}return t};var Co=function(t){this.type=po,this.input=t};Co.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,ao);return n?new Co(n):e.error("No image name provided.")},Co.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=xo.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},Co.prototype.eachChild=function(t){t(this.input)},Co.prototype.outputDefined=function(){return!1},Co.prototype.serialize=function(){return["image",this.input.serialize()]};var Ao={"to-boolean":so,"to-color":uo,"to-number":oo,"to-string":ao},Po=function(t,e){this.type=t,this.args=e};Po.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=Ao[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,co);if(!a)return null;i.push(a)}return new Po(r,i)},Po.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof mo)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":U(e[0],e[1],e[2],e[3])))return new mo(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new So(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new So("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?bo.fromString(q(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?xo.fromString(q(this.args[0].evaluate(t))):q(this.args[0].evaluate(t))},Po.prototype.eachChild=function(t){this.args.forEach(t)},Po.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Po.prototype.serialize=function(){if("formatted"===this.type.kind)return new To([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Co(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var ko=["Unknown","Point","LineString","Polygon"],Io=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Io.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Io.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ko[this.feature.type]:this.feature.type:null},Io.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Io.prototype.canonicalID=function(){return this.canonical},Io.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Io.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=mo.parse(t)),e};var Oo=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};Oo.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Oo.prototype.eachChild=function(t){this.args.forEach(t)},Oo.prototype.outputDefined=function(){return!1},Oo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Oo.parse=function(t,e){var n,r=t[0],i=Oo.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),u=null,l=0,c=s;l<c.length;l+=1){var h=c[l],f=h[0],p=h[1];u=new Uo(e.registry,e.path,null,e.scope);for(var d=[],v=!1,g=1;g<t.length;g++){var m=t[g],y=Array.isArray(f)?f[g-1]:f.type,_=u.parse(m,1+d.length,y);if(!_){v=!0;break}d.push(_)}if(!v)if(Array.isArray(f)&&f.length!==d.length)u.error("Expected "+f.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var x=Array.isArray(f)?f[b]:f.type,w=d[b];u.concat(b+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new Oo(r,o,p,d)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var S=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(F).join(", ")+")":"("+F(e.type)+"...)"}).join(" | "),E=[],M=1;M<t.length;M++){var T=e.parse(t[M],1+E.length);if(!T)return null;E.push(F(T.type))}e.error("Expected arguments of type "+S+", but found ("+E.join(", ")+") instead.")}return null},Oo.register=function(t,e){for(var n in Oo.definitions=e,e)t[n]=Oo};var jo=function(t,e,n){this.type=ho,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};jo.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,so);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,so);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,ao))?null:new jo(r,i,o)},jo.prototype.evaluate=function(t){return new yo(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},jo.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},jo.prototype.outputDefined=function(){return!1},jo.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Lo=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Lo.prototype.setNorthEast=function(t){return this._ne=t instanceof Do?new Do(t.lng,t.lat):Do.convert(t),this},Lo.prototype.setSouthWest=function(t){return this._sw=t instanceof Do?new Do(t.lng,t.lat):Do.convert(t),this},Lo.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Do)e=t,n=t;else{if(!(t instanceof Lo))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Lo.convert(t)):this.extend(Do.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Do(e.lng,e.lat),this._ne=new Do(n.lng,n.lat)),this},Lo.prototype.getCenter=function(){return new Do((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Lo.prototype.getSouthWest=function(){return this._sw},Lo.prototype.getNorthEast=function(){return this._ne},Lo.prototype.getNorthWest=function(){return new Do(this.getWest(),this.getNorth())},Lo.prototype.getSouthEast=function(){return new Do(this.getEast(),this.getSouth())},Lo.prototype.getWest=function(){return this._sw.lng},Lo.prototype.getSouth=function(){return this._sw.lat},Lo.prototype.getEast=function(){return this._ne.lng},Lo.prototype.getNorth=function(){return this._ne.lat},Lo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Lo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Lo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Lo.prototype.contains=function(t){var e=Do.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i},Lo.convert=function(t){return!t||t instanceof Lo?t:new Lo(t)};var Do=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Do.prototype.wrap=function(){return new Do(a(this.lng,-180,180),this.lat)},Do.prototype.toArray=function(){return[this.lng,this.lat]},Do.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Do.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},Do.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Lo(new Do(this.lng-n,this.lat-e),new Do(this.lng+n,this.lat+e))},Do.convert=function(t){if(t instanceof Do)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Do(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Do(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ro=2*Math.PI*6371008.8,Bo=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Bo.fromLngLat=function(t,e){void 0===e&&(e=0);var n=Do.convert(t);return new Bo(Y(n.lng),X(n.lat),W(e,n.lat))},Bo.prototype.toLngLat=function(){return new Do(360*this.x-180,Z(this.y))},Bo.prototype.toAltitude=function(){return this.z*H(Z(this.y))},Bo.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ro*(t=Z(this.y),1/Math.cos(t*Math.PI/180));var t};var zo=8192,Fo=function(t,e){this.type=so,this.geojson=t,this.geometries=e};Fo.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(V(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Fo(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Fo(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Fo(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Fo.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){for(var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID(),o=[i.x*zo,i.y*zo],a=[],s=0,u=t.geometry();s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var h=c[l],f=[h.x+o[0],h.y+o[1]];K(n,f),a.push(f)}if("Polygon"===e.type){var p=at(e.coordinates,r,i);if(!J(n,r))return!1;for(var d=0,v=a;d<v.length;d+=1)if(!tt(v[d],p))return!1}if("MultiPolygon"===e.type){var g=st(e.coordinates,r,i);if(!J(n,r))return!1;for(var m=0,y=a;m<y.length;m+=1)if(!et(y[m],g))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){for(var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID(),o=[i.x*zo,i.y*zo],a=[],s=0,u=t.geometry();s<u.length;s+=1){for(var l=[],c=0,h=u[s];c<h.length;c+=1){var f=h[c],p=[f.x+o[0],f.y+o[1]];K(n,p),l.push(p)}a.push(l)}if("Polygon"===e.type){var d=at(e.coordinates,r,i);if(!J(n,r))return!1;for(var v=0,g=a;v<g.length;v+=1)if(!it(g[v],d))return!1}if("MultiPolygon"===e.type){var m=st(e.coordinates,r,i);if(!J(n,r))return!1;for(var y=0,_=a;y<_.length;y+=1)if(!ot(_[y],m))return!1}return!0}(t,this.geometries)}return!1},Fo.prototype.eachChild=function(){},Fo.prototype.outputDefined=function(){return!0},Fo.prototype.serialize=function(){return["within",this.geojson]};var No=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};No.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new No(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},No.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},No.prototype.eachChild=function(){},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){return["var",this.name]};var Uo=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new ro),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};Uo.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Uo.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new Mo(e,[t]):"coerce"===n?new Po(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof wo)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof No)return t(e.boundExpression);if(e instanceof Oo&&"error"===e.name)return!1;if(e instanceof jo)return!1;if(e instanceof Fo)return!1;var n=e instanceof Po||e instanceof Mo,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof wo}),!!r&&ut(e)&&ct(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new Io;try{o=new wo(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Uo.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Uo(this.registry,r,e||null,i,this.errors)},Uo.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new no(r,t))},Uo.prototype.checkSubtype=function(t,e){var n=N(t,e);return n&&this.error(n),n};var Vo=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};Vo.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,oo);if(!n)return null;var r=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,i);if(!c)return null;i=i||c.type,r.push([a,c])}return new Vo(i,n,r)},Vo.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[ht(e,r)].evaluate(t)},Vo.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Vo.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Vo.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Go=ft;ft.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},ft.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},ft.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},ft.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},ft.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var qo=Object.freeze({__proto__:null,number:pt,color:function(t,e,n){return new mo(pt(t.r,e.r,n),pt(t.g,e.g,n),pt(t.b,e.b,n),pt(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return pt(t,e[r],n)})}}),Ho=.95047,Yo=1,Xo=1.08883,Wo=4/29,Zo=6/29,Ko=3*Zo*Zo,Jo=Zo*Zo*Zo,Qo=Math.PI/180,$o=180/Math.PI,ta={forward:yt,reverse:_t,interpolate:function(t,e,n){return{l:pt(t.l,e.l,n),a:pt(t.a,e.a,n),b:pt(t.b,e.b,n),alpha:pt(t.alpha,e.alpha,n)}}},ea={forward:function(t){var e=yt(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*$o;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Qo,n=t.c;return _t({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:bt(t.h,e.h,n),c:pt(t.c,e.c,n),l:pt(t.l,e.l,n),alpha:pt(t.alpha,e.alpha,n)}}},na=Object.freeze({__proto__:null,lab:ta,hcl:ea}),ra=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};ra.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=xt(e,t.base,n,r);else if("linear"===t.name)i=xt(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new Go(o[0],o[1],o[2],o[3]).solve(xt(e,1,n,r))}return i},ra.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,oo)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=uo:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var h=o[c],f=o[c+1],p=c+3,d=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(u.length&&u[u.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var v=e.parse(f,d,l);if(!v)return null;l=l||v.type,u.push([h,v])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new ra(l,n,r,i,u):e.error("Type "+F(l)+" is not interpolatable.")},ra.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=ht(e,r),a=ra.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?qo[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?ea.reverse(ea.interpolate(ea.forward(s),ea.forward(u),a)):ta.reverse(ta.interpolate(ta.forward(s),ta.forward(u),a))},ra.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},ra.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},ra.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var ia=function(t,e){this.type=t,this.args=e};ia.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some(function(t){return N(r,t.type)});return new ia(u?co:n,i)},ia.prototype.evaluate=function(t){for(var e,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(t))&&n instanceof xo&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null===n);i+=1);return n},ia.prototype.eachChild=function(t){this.args.forEach(t)},ia.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},ia.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var oa=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};oa.prototype.evaluate=function(t){return this.result.evaluate(t)},oa.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},oa.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new oa(n,a):null},oa.prototype.outputDefined=function(){return this.result.outputDefined()},oa.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var aa=function(t,e,n){this.type=t,this.index=e,this.input=n};aa.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,oo),r=e.parse(t[2],2,z(e.expectedType||co));return n&&r?new aa(r.type.itemType,n,r):null},aa.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new So("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new So("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new So("Array index must be an integer, but found "+e+" instead.");return n[e]},aa.prototype.eachChild=function(t){t(this.index),t(this.input)},aa.prototype.outputDefined=function(){return!1},aa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var sa=function(t,e){this.type=so,this.needle=t,this.haystack=e};sa.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n,r=e.parse(t[1],1,co),i=e.parse(t[2],2,co);return r&&i?"boolean"!==(n=r.type).kind&&"string"!==n.kind&&"number"!==n.kind&&"null"!==n.kind&&"value"!==n.kind?e.error("Expected first argument to be of type boolean, string, number or null, but found "+F(r.type)+" instead"):new sa(r,i):null},sa.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==e||!n)return!1;if(!function(t){return"boolean"==typeof t||"string"==typeof t||"number"==typeof t}(e))throw new So("Expected first argument to be of type boolean, string or number, but found "+F(G(e))+" instead.");if(!function(t){return Array.isArray(t)||"string"==typeof t}(n))throw new So("Expected second argument to be of type array or string, but found "+F(G(n))+" instead.");return n.indexOf(e)>=0},sa.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},sa.prototype.outputDefined=function(){return!0},sa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ua=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};ua.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var f=h[c];if("number"!=typeof f&&"string"!=typeof f)return l.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof f&&Math.floor(f)!==f)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,G(f)))return null}else n=G(f);if(void 0!==i[String(f)])return l.error("Branch labels must be unique.");i[String(f)]=o.length}var p=e.parse(u,a,r);if(!p)return null;r=r||p.type,o.push(p)}var d=e.parse(t[1],1,co);if(!d)return null;var v=e.parse(t[t.length-1],t.length-1,r);return v?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new ua(n,r,d,i,o,v):null},ua.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(G(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},ua.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ua.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},ua.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(h=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[h][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=n;u<l.length;u+=1){var c=l[u],h=c[0],f=c[1];e.push(1===f.length?s(f[0]):f.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var la=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};la.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,so);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new la(n,r,s):null},la.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},la.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},la.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},la.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ca=Et("==",function(t,e,n){return e===n},St),ha=Et("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!St(0,e,n,r)}),fa=Et("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),pa=Et(">",function(t,e,n){return e>n},function(t,e,n,r){return r.compare(e,n)>0}),da=Et("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),va=Et(">=",function(t,e,n){return e>=n},function(t,e,n,r){return r.compare(e,n)>=0}),ga=function(t,e,n,r,i){this.type=ao,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};ga.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,oo);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,ao)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,ao)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,oo)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,oo))?null:new ga(n,i,o,a,s)},ga.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},ga.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},ga.prototype.outputDefined=function(){return!1},ga.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var ma=function(t){this.type=oo,this.input=t};ma.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+F(n.type)+" instead."):new ma(n):null},ma.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new So("Expected value to be of type string or array, but found "+F(G(e))+" instead.")},ma.prototype.eachChild=function(t){t(this.input)},ma.prototype.outputDefined=function(){return!1},ma.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ya={"==":ca,"!=":ha,">":pa,"<":fa,">=":va,"<=":da,array:Mo,at:aa,boolean:Mo,case:la,coalesce:ia,collator:jo,format:To,image:Co,in:sa,interpolate:ra,"interpolate-hcl":ra,"interpolate-lab":ra,length:ma,let:oa,literal:wo,match:ua,number:Mo,"number-format":ga,object:Mo,step:Vo,string:Mo,"to-boolean":Po,"to-color":Po,"to-number":Po,"to-string":Po,var:No,within:Fo};Oo.register(ya,{error:[{kind:"error"},[ao],function(t,e){throw new So(e[0].evaluate(t))}],typeof:[ao,[co],function(t,e){return F(G(e[0].evaluate(t)))}],"to-rgba":[z(oo,4),[uo],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[uo,[oo,oo,oo],Mt],rgba:[uo,[oo,oo,oo,oo],Mt],has:{type:so,overloads:[[[ao],function(t,e){return Tt(e[0].evaluate(t),t.properties())}],[[ao,lo],function(t,e){var n=e[1];return Tt(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:co,overloads:[[[ao],function(t,e){return Ct(e[0].evaluate(t),t.properties())}],[[ao,lo],function(t,e){var n=e[1];return Ct(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[co,[ao],function(t,e){return Ct(e[0].evaluate(t),t.featureState||{})}],properties:[lo,[],function(t){return t.properties()}],"geometry-type":[ao,[],function(t){return t.geometryType()}],id:[co,[],function(t){return t.id()}],zoom:[oo,[],function(t){return t.globals.zoom}],"heatmap-density":[oo,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[oo,[],function(t){return t.globals.lineProgress||0}],accumulated:[co,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[oo,At(oo),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[oo,At(oo),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:oo,overloads:[[[oo,oo],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[oo],function(t,e){return-e[0].evaluate(t)}]]},"/":[oo,[oo,oo],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[oo,[oo,oo],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[oo,[],function(){return Math.LN2}],pi:[oo,[],function(){return Math.PI}],e:[oo,[],function(){return Math.E}],"^":[oo,[oo,oo],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[oo,[oo],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[oo,[oo],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[oo,[oo],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[oo,[oo],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[oo,[oo],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[oo,[oo],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[oo,[oo],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[oo,[oo],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[oo,[oo],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[oo,[oo],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[oo,At(oo),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[oo,At(oo),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[oo,[oo],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[oo,[oo],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[oo,[oo],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[oo,[oo],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[so,[ao,co],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[so,[co],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[so,[ao],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[so,[ao,co],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[so,[co],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[so,[ao,co],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[so,[co],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[so,[ao,co],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[so,[co],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[so,[ao,co],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[so,[co],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[so,[co],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[so,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[so,[z(ao)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[so,[z(co)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[so,[ao,z(co)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[so,[ao,z(co)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:so,overloads:[[[so,so],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[At(so),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:so,overloads:[[[so,so],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[At(so),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[so,[so],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[so,[ao],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[ao,[ao],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[ao,[ao],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[ao,At(co),function(t,e){return e.map(function(e){return q(e.evaluate(t))}).join("")}],"resolved-locale":[ao,[ho],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var _a=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Io,this._defaultValue=e?function(t){return"color"===t.type&&Dt(t.default)?new mo(0,0,0,0):"color"===t.type?mo.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};_a.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},_a.prototype.evaluate=function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new So("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var ba=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!lt(e.expression)};ba.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},ba.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)};var xa=function(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!lt(e.expression),this.interpolationType=r};xa.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},xa.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)},xa.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?ra.interpolationFactor(this.interpolationType,t,e,n):0};var wa=function(t,e){this._parameters=t,this._specification=e,D(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(jt(n)?"exponential":"interval");if(a&&((e=D({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],mo.parse(t[1])]})),e.default=mo.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!na[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)r=Nt;else if("interval"===l)r=Ft;else if("categorical"===l){r=zt,i=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var f=h[c];i[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=Ut}if(s){for(var p={},d=[],v=0;v<e.stops.length;v++){var g=e.stops[v],m=g[0].zoom;void 0===p[m]&&(p[m]={zoom:m,type:e.type,property:e.property,default:e.default,stops:[]},d.push(m)),p[m].stops.push([g[0].value,g[1]])}for(var y=[],_=0,b=d;_<b.length;_+=1){var x=b[_];y.push([p[x].zoom,t(p[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:ra.interpolationFactor.bind(void 0,w),zoomStops:y.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return Nt({stops:y,base:e.base},n,i).evaluate(i,r)}}}if(u){var S="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:ra.interpolationFactor.bind(void 0,S),zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return r(e,n,t.zoom,i,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Bt(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};wa.deserialize=function(t){return new wa(t._parameters,t._specification)},wa.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Sa={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Ea={promoteId:function(t){var e=t.key,n=t.value;if("string"===Lt(n))return ce({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,ce({key:e+"."+i,value:n[i]}));return r}},Ma={"*":function(){return[]},array:Yt,boolean:function(t){var e=t.value,n=t.key,r=Lt(e);return"boolean"!==r?[new eo(n,e,"boolean expected, "+r+" found")]:[]},number:Xt,color:function(t){var e=t.key,n=t.value,r=Lt(n);return"string"!==r?[new eo(e,n,"color expected, "+r+" found")]:null===go(n)?[new eo(e,n,'color expected, "'+n+'" found')]:[]},constants:L,enum:Kt,filter:oe,function:Wt,layer:le,object:Ht,source:he,light:fe,string:ce,formatted:function(t){return 0===ce(t).length?[]:Zt(t)},resolvedImage:function(t){return 0===ce(t).length?[]:Zt(t)}};ve.source=me(he),ve.light=me(fe),ve.layer=me(le),ve.filter=me(oe),ve.paintProperty=me(se),ve.layoutProperty=me(ue);var Ta=ve,Ca=Ta.light,Aa=Ta.paintProperty,Pa=Ta.layoutProperty,ka=_e,Ia=3;_e.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},_e.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},_e.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},_e.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},_e.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var f=u[h];if(void 0===a[f]){var p=4*f;(s?s(c[p+0],c[p+1],c[p+2],c[p+3]):t<=c[p+2]&&e<=c[p+3]&&n>=c[p+0]&&r>=c[p+1])?(a[f]=!0,o.push(l[f])):a[f]=!1}}},_e.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=u;f<=c;f++)for(var p=l;p<=h;p++){var d=this.d*p+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(p),this._convertFromCellCoord(f+1),this._convertFromCellCoord(p+1)))&&i.call(this,t,e,n,r,d,o,a,s))return}},_e.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},_e.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},_e.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Ia+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[Ia+a]=o,i.set(s,o),o+=s.length}return i[Ia+t.length]=o,i.set(this.keys,o),i[Ia+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Oa=self.ImageData,ja=self.ImageBitmap,La={};for(var Da in be("Object",Object),ka.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},ka.deserialize=function(t){return new ka(t.buffer)},be("Grid",ka),be("Color",mo),be("Error",Error),be("ResolvedImage",xo),be("StylePropertyFunction",wa),be("StyleExpression",_a,{omit:["_evaluator"]}),be("ZoomDependentExpression",xa),be("ZoomConstantExpression",ba),be("CompoundExpression",Oo,{omit:["_evaluate"]}),ya)ya[Da]._classRegistryKey||be("Expression_"+Da,ya[Da]);var Ra=function(){this.first=!0};Ra.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Ba={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},za=null,Fa="unavailable",Na=null,Ua=function(t){za&&za(t)},Va=new $i,Ga=function(){return Fa},qa=function(){if("deferred"!==Fa||!Na)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fa="loading",Ie(),Na&&Wi({url:Na},function(t){t?Ua(t):(Fa="loaded",Ie())})},Ha={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Fa||null!=Ha.applyArabicShaping},isLoading:function(){return"loading"===Fa},setState:function(t){Fa=t.pluginStatus,Na=t.pluginURL},isParsed:function(){return null!=Ha.applyArabicShaping&&null!=Ha.processBidirectionalText&&null!=Ha.processStyledBidirectionalText},getPluginURL:function(){return Na}},Ya=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ra,this.transition={})};Ya.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Pe(r[n].charCodeAt(0),e))return!1;return!0}(t,Ha.isLoaded())},Ya.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ya.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Xa=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Dt(t))return new wa(t,e);if(Vt(t)){var n=qt(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=mo.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};Xa.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Xa.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var Wa=function(t){this.property=t,this.value=new Xa(t,void 0)};Wa.prototype.transitioned=function(t,e){return new Ka(this.property,this.value,e,s({},t.transition,this.transition),t.now)},Wa.prototype.untransitioned=function(){return new Ka(this.property,this.value,null,{},0)};var Za=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Za.prototype.getValue=function(t){return v(this._values[t].value.value)},Za.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wa(this._values[t].property)),this._values[t].value=new Xa(this._values[t].property,null===e?void 0:v(e))},Za.prototype.getTransition=function(t){return v(this._values[t].transition)},Za.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wa(this._values[t].property)),this._values[t].transition=v(e)||void 0},Za.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Za.prototype.transitioned=function(t,e){for(var n=new Ja(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Za.prototype.untransitioned=function(){for(var t=new Ja(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var Ka=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Ka.prototype.possiblyEvaluate=function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return i};var Ja=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Ja.prototype.possiblyEvaluate=function(t,e){for(var n=new ts(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].possiblyEvaluate(t,e)}return n},Ja.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Qa=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Qa.prototype.getValue=function(t){return v(this._values[t].value)},Qa.prototype.setValue=function(t,e){this._values[t]=new Xa(this._values[t].property,null===e?void 0:v(e))},Qa.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Qa.prototype.possiblyEvaluate=function(t,e){for(var n=new ts(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].possiblyEvaluate(t,e)}return n};var $a=function(t,e,n){this.property=t,this.value=e,this.parameters=n};$a.prototype.isConstant=function(){return"constant"===this.value.kind},$a.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},$a.prototype.evaluate=function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)};var ts=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};ts.prototype.get=function(t){return this._values[t]};var es=function(t){this.specification=t};es.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},es.prototype.interpolate=function(t,e,n){var r=qo[this.specification.type];return r?r(t,e,n):t};var ns=function(t,e){this.specification=t,this.overrides=e};ns.prototype.possiblyEvaluate=function(t,e,n,r){return new $a(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)},ns.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new $a(this,{kind:"constant",value:void 0},t.parameters);var r=qo[this.specification.type];return r?new $a(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},ns.prototype.evaluate=function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)};var rs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0===t.value)return new $a(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new $a(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new $a(this,{kind:"constant",value:s},e)}return new $a(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r,i,o){if("source"===t.kind){var a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(ns),is=function(t){this.specification=t};is.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Ya(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Ya(Math.floor(e.zoom),e)),t.expression.evaluate(new Ya(Math.floor(e.zoom+1),e)),e)}},is.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},is.prototype.interpolate=function(t){return t};var os=function(t){this.specification=t};os.prototype.possiblyEvaluate=function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)},os.prototype.interpolate=function(){return!1};var as=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new Xa(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Wa(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};be("DataDrivenProperty",ns),be("DataConstantProperty",es),be("CrossFadedDataDrivenProperty",rs),be("CrossFadedProperty",is),be("ColorRampProperty",os);var ss=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Qa(n.layout)),n.paint)){for(var r in this._transitionablePaint=new Za(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Pa,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return f(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Aa,"layers."+this.id+".paint."+t,t,e,n))return!1;if(f(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),d(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&ye(this,t.call(Ta,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:to,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof $a&&It(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}($i),us={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ls=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},cs=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};cs.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},cs.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},cs.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},cs.prototype.clear=function(){this.length=0},cs.prototype.resize=function(t){this.reserve(t),this.length=t},cs.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},cs.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var hs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(cs);hs.prototype.bytesPerElement=4,be("StructArrayLayout2i4",hs);var fs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(cs);fs.prototype.bytesPerElement=8,be("StructArrayLayout4i8",fs);var ps=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(cs);ps.prototype.bytesPerElement=12,be("StructArrayLayout2i4i12",ps);var ds=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(cs);ds.prototype.bytesPerElement=8,be("StructArrayLayout2i4ub8",ds);var vs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,u,l)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c){var h=9*t,f=18*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=u,this.uint8[f+16]=l,this.uint8[f+17]=c,t},e}(cs);vs.prototype.bytesPerElement=18,be("StructArrayLayout8ui2ub18",vs);var gs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,h){var f=this.length;return this.resize(f+1),this.emplace(f,t,e,n,r,i,o,a,s,u,l,c,h)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,h,f){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.int16[p+8]=l,this.int16[p+9]=c,this.int16[p+10]=h,this.int16[p+11]=f,t},e}(cs);gs.prototype.bytesPerElement=24,be("StructArrayLayout4i4ui4i24",gs);var ms=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(cs);ms.prototype.bytesPerElement=12,be("StructArrayLayout3f12",ms);var ys=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(cs);ys.prototype.bytesPerElement=4,be("StructArrayLayout1ul4",ys);var _s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,r,i,o,a,s,u,l,c)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,h){var f=12*t,p=6*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.int16[f+4]=o,this.int16[f+5]=a,this.uint32[p+3]=s,this.uint16[f+8]=u,this.uint16[f+9]=l,this.int16[f+10]=c,this.int16[f+11]=h,t},e}(cs);_s.prototype.bytesPerElement=24,be("StructArrayLayout6i1ul2ui2i24",_s);var bs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(cs);bs.prototype.bytesPerElement=12,be("StructArrayLayout2i2i2i12",bs);var xs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t},e}(cs);xs.prototype.bytesPerElement=12,be("StructArrayLayout2ub2f12",xs);var ws=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,g){var m=this.length;return this.resize(m+1),this.emplace(m,t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,g)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,g,m){var y=24*t,_=12*t,b=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[y+10]=u,this.uint16[y+11]=l,this.uint16[y+12]=c,this.float32[_+7]=h,this.float32[_+8]=f,this.uint8[b+36]=p,this.uint8[b+37]=d,this.uint8[b+38]=v,this.uint32[_+10]=g,this.int16[y+22]=m,t},e}(cs);ws.prototype.bytesPerElement=48,be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ws);var Ss=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,g,m,y,_,b,x,w,S,E,M){var T=this.length;return this.resize(T+1),this.emplace(T,t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,g,m,y,_,b,x,w,S,E,M)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,g,m,y,_,b,x,w,S,E,M,T){var C=30*t,A=15*t;return this.int16[C+0]=e,this.int16[C+1]=n,this.int16[C+2]=r,this.int16[C+3]=i,this.int16[C+4]=o,this.int16[C+5]=a,this.int16[C+6]=s,this.int16[C+7]=u,this.uint16[C+8]=l,this.uint16[C+9]=c,this.uint16[C+10]=h,this.uint16[C+11]=f,this.uint16[C+12]=p,this.uint16[C+13]=d,this.uint16[C+14]=v,this.uint16[C+15]=g,this.uint16[C+16]=m,this.uint16[C+17]=y,this.uint16[C+18]=_,this.uint16[C+19]=b,this.uint16[C+20]=x,this.uint16[C+21]=w,this.uint32[A+11]=S,this.float32[A+12]=E,this.float32[A+13]=M,this.float32[A+14]=T,t},e}(cs);Ss.prototype.bytesPerElement=60,be("StructArrayLayout8i14ui1ul3f60",Ss);var Es=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(cs);Es.prototype.bytesPerElement=4,be("StructArrayLayout1f4",Es);var Ms=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(cs);Ms.prototype.bytesPerElement=6,be("StructArrayLayout3i6",Ms);var Ts=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(cs);Ts.prototype.bytesPerElement=8,be("StructArrayLayout1ul2ui8",Ts);var Cs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(cs);Cs.prototype.bytesPerElement=6,be("StructArrayLayout3ui6",Cs);var As=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(cs);As.prototype.bytesPerElement=4,be("StructArrayLayout2ui4",As);var Ps=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(cs);Ps.prototype.bytesPerElement=2,be("StructArrayLayout1ui2",Ps);var ks=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(cs);ks.prototype.bytesPerElement=8,be("StructArrayLayout2f8",ks);var Is=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(cs);Is.prototype.bytesPerElement=16,be("StructArrayLayout4f16",Is);var Os=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.anchorPoint.get=function(){return new si(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(ls);Os.prototype.size=24;var js=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Os(this,t)},e}(_s);be("CollisionBoxArray",js);var Ls=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(ls);Ls.prototype.size=48;var Ds=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Ls(this,t)},e}(ws);be("PlacedSymbolArray",Ds);var Rs=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},Object.defineProperties(e.prototype,n),e}(ls);Rs.prototype.size=60;var Bs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Rs(this,t)},e}(Ss);be("SymbolInstanceArray",Bs);var zs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Es);be("GlyphOffsetArray",zs);var Fs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Ms);be("SymbolLineVertexArray",Fs);var Ns=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(ls);Ns.prototype.size=8;var Us=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Ns(this,t)},e}(Ts);be("FeatureIndexArray",Us);var Vs=Oe([{name:"a_pos",components:2,type:"Int16"}],4).members,Gs=function(t){void 0===t&&(t=[]),this.segments=t};Gs.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>Gs.MAX_VERTEX_ARRAY_LENGTH&&g("Max vertices per segment is "+Gs.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Gs.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},Gs.prototype.get=function(){return this.segments},Gs.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},Gs.simpleSegment=function(t,e,n,r){return new Gs([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},Gs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,be("SegmentVector",Gs);var qs=Oe([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Hs=e(function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,l;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),Ys=e(function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),Xs=Hs,Ws=Ys;Xs.murmur3=Hs,Xs.murmur2=Ws;var Zs=function(){this.ids=[],this.positions=[],this.indexed=!1};Zs.prototype.add=function(t,e,n,r){this.ids.push(De(t)),this.positions.push(e,n,r)},Zs.prototype.getPositions=function(t){for(var e=De(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},Zs.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){if(!(r>=i)){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Re(e,a,s),Re(n,3*a,3*s),Re(n,3*a+1,3*s+1),Re(n,3*a+2,3*s+2)}t(e,n,r,s),t(e,n,s+1,i)}}(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}},Zs.deserialize=function(t){var e=new Zs;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var Ks=Math.pow(2,53)-1;be("FeaturePositionMap",Zs);var Js=function(t,e){this.gl=t.gl,this.location=e},Qs=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Js),$s=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Js),tu=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Js),eu=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Js),nu=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Js),ru=function(t){function e(e,n){t.call(this,e,n),this.current=mo.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Js),iu=new Float32Array(16),ou=function(t){function e(e,n){t.call(this,e,n),this.current=iu}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Js),au=function(t,e,n){this.value=t,this.uniformNames=e.map(function(t){return"u_"+t}),this.type=n};au.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},au.prototype.getBinding=function(t,e,n){return"color"===this.type?new ru(t,e):new $s(t,e)};var su=function(t,e){this.uniformNames=e.map(function(t){return"u_"+t}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};su.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},su.prototype.setUniform=function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)},su.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new nu(t,e):new $s(t,e)};var uu=function(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};uu.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new Ya(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},uu.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)},uu.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var r=Be(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},uu.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},uu.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var lu=function(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map(function(t){return"u_"+t+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new o};lu.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.expression.evaluate(new Ya(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new Ya(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},lu.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)},lu.prototype._setPaintValue=function(t,e,n,r){if("color"===this.type)for(var i=Be(n),o=Be(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},lu.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},lu.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},lu.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=o(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)},lu.prototype.getBinding=function(t,e,n){return new $s(t,e)};var cu=function(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};cu.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)},cu.prototype.updatePaintArray=function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)},cu.prototype._setPaintValues=function(t,e,n,r){if(r&&n){var i=r[n.min],o=r[n.mid],a=r[n.max];if(i&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},cu.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,qs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,qs.members,this.expression.isStateDependent))},cu.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var hu=function(t,e,n,r){this.binders={},this.layoutAttributes=r,this._buffers=[];var i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof $a&&It(a.property.specification)){var s=ze(o,t.type),u=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,h=a.property.specification["property-type"],f="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===u.kind)this.binders[o]=f?new su(u.value,s):new au(u.value,s,l),i.push("/u_"+o);else if("source"===u.kind||f){var p=Fe(o,l,"source");this.binders[o]=f?new cu(u,l,c,e,p,t.id):new uu(u,s,l,p),i.push("/a_"+o)}else{var d=Fe(o,l,"composite");this.binders[o]=new lu(u,s,l,c,e,d),i.push("/z_"+o)}}}this.cacheKey=i.sort().join("")};hu.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof uu||e instanceof lu?e.maxValue:0},hu.prototype.populatePaintArrays=function(t,e,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof uu||a instanceof lu||a instanceof cu)&&a.populatePaintArray(t,e,n,r,i)}},hu.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof su&&r.setConstantPatternPositions(t,e)}},hu.prototype.updatePaintArrays=function(t,e,n,r,i){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=n.feature(l.index);for(var h in this.binders){var f=this.binders[h];if((f instanceof uu||f instanceof lu||f instanceof cu)&&!0===f.expression.isStateDependent){var p=r.paint.get(h);f.expression=p.value,f.updatePaintArray(l.start,l.end,c,t[a],i),o=!0}}}return o},hu.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof au||n instanceof su)&&t.push.apply(t,n.uniformNames.map(function(t){return"#define HAS_UNIFORM_"+t}))}return t},hu.prototype.getPaintVertexBuffers=function(){return this._buffers},hu.prototype.getUniforms=function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof au||i instanceof su||i instanceof lu)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=i.getBinding(t,e[s],s);n.push({name:s,property:r,binding:u})}}}return n},hu.prototype.setUniforms=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,n.get(u),s)}},hu.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof cu){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof uu||n instanceof lu)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},hu.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof uu||n instanceof lu||n instanceof cu)&&n.upload(t)}this.updatePaintBuffers()},hu.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof uu||e instanceof lu||e instanceof cu)&&e.destroy()}};var fu=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=new hu(a,n,r,t)}this.needsUpload=!1,this._featureMap=new Zs,this._bufferOffset=0};fu.prototype.populatePaintArrays=function(t,e,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},fu.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},fu.prototype.get=function(t){return this.programConfigurations[t]},fu.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},fu.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},be("ConstantBinder",au),be("CrossFadedConstantBinder",su),be("SourceExpressionBinder",uu),be("CrossFadedCompositeBinder",cu),be("CompositeExpressionBinder",lu),be("ProgramConfiguration",hu,{omit:["_buffers"]}),be("ProgramConfigurationSet",fu);var pu={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1},du=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new hs,this.indexArray=new Cs,this.segments=new Gs,this.programConfigurations=new fu(Vs,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};du.prototype.populate=function(t,e,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.feature,c=u.id,h=u.index,f=u.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:c,properties:l.properties,geometry:p?Ne(l):[]};if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),d,n)){p||(d.geometry=Ne(l));var v=o?o.evaluate(d,{},n):void 0;i.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:f,index:h,geometry:d.geometry,patterns:{},sortKey:v})}}o&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var g=0,m=i;g<m.length;g+=1){var y=m[g],_=y.geometry,b=y.index,x=y.sourceLayerIndex,w=t[b].feature;this.addFeature(y,_,b,n),e.featureIndex.insert(w,_,b,x,this.index)}},du.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},du.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},du.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},du.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Vs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},du.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},du.prototype.addFeature=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var u=s[a],l=u.x,c=u.y;if(!(l<0||l>=zo||c<0||c>=zo)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),f=h.vertexLength;Ue(this.layoutVertexArray,l,c,-1,-1),Ue(this.layoutVertexArray,l,c,1,-1),Ue(this.layoutVertexArray,l,c,1,1),Ue(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(f,f+1,f+2),this.indexArray.emplaceBack(f,f+3,f+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)},be("CircleBucket",du,{omit:["layers"]});var vu,gu=new as({"circle-sort-key":new ns(to.layout_circle["circle-sort-key"])}),mu={paint:new as({"circle-radius":new ns(to.paint_circle["circle-radius"]),"circle-color":new ns(to.paint_circle["circle-color"]),"circle-blur":new ns(to.paint_circle["circle-blur"]),"circle-opacity":new ns(to.paint_circle["circle-opacity"]),"circle-translate":new es(to.paint_circle["circle-translate"]),"circle-translate-anchor":new es(to.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new es(to.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new es(to.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ns(to.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ns(to.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ns(to.paint_circle["circle-stroke-opacity"])}),layout:gu},yu="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)}),vu=new yu(3),yu!=Float32Array&&(vu[0]=0,vu[1]=0,vu[2]=0),function(){var t=new yu(4);yu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var _u=(function(){var t=new yu(2);yu!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,mu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new du(t)},e.prototype.queryRadius=function(t){var e=t;return $e("circle-radius",this,e)+$e("circle-stroke-width",this,e)+tn(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=en(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?u:function(t,e){return t.map(function(t){return rn(t,e)})}(u,s),f=c?l*a:l,p=0,d=r;p<d.length;p+=1)for(var v=0,g=d[p];v<g.length;v+=1){var m=g[v],y=c?m:rn(m,s),_=f,b=nn([],[m.x,m.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),Ge(h,y,_))return!0}return!1},e}(ss)),bu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(du);be("HeatmapBucket",bu,{omit:["layers"]});var xu=function(t,e){on(this,t,1,e)};xu.prototype.resize=function(t){an(this,t,1)},xu.prototype.clone=function(){return new xu({width:this.width,height:this.height},new Uint8Array(this.data))},xu.copy=function(t,e,n,r,i){sn(t,e,n,r,i,1)};var wu=function(t,e){on(this,t,4,e)};wu.prototype.resize=function(t){an(this,t,4)},wu.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},wu.prototype.clone=function(){return new wu({width:this.width,height:this.height},new Uint8Array(this.data))},wu.copy=function(t,e,n,r,i){sn(t,e,n,r,i,4)},be("AlphaImage",xu),be("RGBAImage",wu);var Su={paint:new as({"heatmap-radius":new ns(to.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ns(to.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new es(to.paint_heatmap["heatmap-intensity"]),"heatmap-color":new os(to.paint_heatmap["heatmap-color"]),"heatmap-opacity":new es(to.paint_heatmap["heatmap-opacity"])})},Eu=function(t){function e(e){t.call(this,e,Su),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new bu(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=un(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(ss),Mu={paint:new as({"hillshade-illumination-direction":new es(to.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new es(to.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new es(to.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new es(to.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new es(to.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new es(to.paint_hillshade["hillshade-accent-color"])})},Tu=function(t){function e(e){t.call(this,e,Mu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(ss),Cu=Oe([{name:"a_pos",components:2,type:"Int16"}],4).members,Au=ln,Pu=ln;ln.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Ln(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ln(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},ln.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Au.default=Pu;var ku=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hs,this.indexArray=new Cs,this.indexArray2=new As,this.programConfigurations=new fu(Cu,t.layers,t.zoom),this.segments=new Gs,this.segments2=new Gs,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};ku.prototype.populate=function(t,e,n){this.hasPattern=Nn("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,p={type:u.type,id:l,properties:u.properties,geometry:f?Ne(u):[]};if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),p,n)){f||(p.geometry=Ne(u));var d=r?r.evaluate(p,{},n,e.availableImages):void 0;i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:p.geometry,patterns:{},sortKey:d})}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var v=0,g=i;v<g.length;v+=1){var m=g[v],y=m.geometry,_=m.index,b=m.sourceLayerIndex;if(this.hasPattern){var x=Un("fill",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,y,_,n,{});e.featureIndex.insert(t[_].feature,y,_,b,this.index)}},ku.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ku.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},ku.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ku.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ku.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Cu),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ku.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ku.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=zn(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),f=h.vertexLength,p=[],d=[],v=0,g=s;v<g.length;v+=1){var m=g[v];if(0!==m.length){m!==s[0]&&d.push(p.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),_=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(_+m.length-1,_),p.push(m[0].x),p.push(m[0].y);for(var b=1;b<m.length;b++)this.layoutVertexArray.emplaceBack(m[b].x,m[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),p.push(m[b].x),p.push(m[b].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var x=Au(p,d),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(f+x[w],f+x[w+1],f+x[w+2]);h.vertexLength+=u,h.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},be("FillBucket",ku,{omit:["layers","patternFeatures"]});var Iu=new as({"fill-sort-key":new ns(to.layout_fill["fill-sort-key"])}),Ou={paint:new as({"fill-antialias":new es(to.paint_fill["fill-antialias"]),"fill-opacity":new ns(to.paint_fill["fill-opacity"]),"fill-color":new ns(to.paint_fill["fill-color"]),"fill-outline-color":new ns(to.paint_fill["fill-outline-color"]),"fill-translate":new es(to.paint_fill["fill-translate"]),"fill-translate-anchor":new es(to.paint_fill["fill-translate-anchor"]),"fill-pattern":new rs(to.paint_fill["fill-pattern"])}),layout:Iu},ju=function(t){function e(e){t.call(this,e,Ou)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new ku(t)},e.prototype.queryRadius=function(){return tn(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return qe(en(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e.prototype.isTileClipped=function(){return!0},e}(ss),Lu=Oe([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Du=Vn;Vn.types=["Unknown","Point","LineString","Polygon"],Vn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new si(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Vn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},Vn.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+u)/a)*Math.PI/180))-90]}}var i,o,a=this.extent*Math.pow(2,n),s=this.extent*t,u=this.extent*e,l=this.loadGeometry(),c=Vn.types[this.type];switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];r(l=h);break;case 2:for(i=0;i<l.length;i++)r(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=qn(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),i=0;i<l.length;i++)for(o=0;o<l[i].length;o++)r(l[i][o])}1===l.length?l=l[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Ru=Hn;Hn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Du(this._pbf,e,this.extent,this._keys,this._values)};var Bu={VectorTile:function(t,e){this.layers=t.readFields(Xn,{},e)},VectorTileFeature:Du,VectorTileLayer:Ru},zu=Bu.VectorTileFeature.types,Fu=Math.pow(2,13),Nu=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ps,this.indexArray=new Cs,this.programConfigurations=new fu(Lu,t.layers,t.zoom),this.segments=new Gs,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Nu.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=Nn("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.id,u=o.index,l=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h={type:a.type,id:s,properties:a.properties,geometry:c?Ne(a):[]};if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),h,n)){var f={id:s,sourceLayerIndex:l,index:u,geometry:c?h.geometry:Ne(a),properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(f.id=a.id),this.hasPattern?this.features.push(Un("fill-extrusion",this.layers,f,this.zoom,e)):this.addFeature(f,f.geometry,u,n,{}),e.featureIndex.insert(a,f.geometry,u,l,this.index,!0)}}},Nu.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Nu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Nu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Nu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Lu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Nu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nu.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=zn(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=0,p=s;f<p.length;f+=1){var d=p[f];if(0!==d.length&&!((O=d).every(function(t){return t.x<0})||O.every(function(t){return t.x>zo})||O.every(function(t){return t.y<0})||O.every(function(t){return t.y>zo})))for(var v=0,g=0;g<d.length;g++){var m=d[g];if(g>=1){var y=d[g-1];if(!Zn(m,y)){h.vertexLength+4>Gs.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=m.sub(y)._perp()._unit(),b=y.dist(m);v+b>32768&&(v=0),Wn(this.layoutVertexArray,m.x,m.y,_.x,_.y,0,0,v),Wn(this.layoutVertexArray,m.x,m.y,_.x,_.y,0,1,v),Wn(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,v+=b),Wn(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,v);var x=h.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+u>Gs.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===zu[t.type]){for(var w=[],S=[],E=h.vertexLength,M=0,T=s;M<T.length;M+=1){var C=T[M];if(0!==C.length){C!==s[0]&&S.push(w.length/2);for(var A=0;A<C.length;A++){var P=C[A];Wn(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),w.push(P.x),w.push(P.y)}}}for(var k=Au(w,S),I=0;I<k.length;I+=3)this.indexArray.emplaceBack(E+k[I],E+k[I+2],E+k[I+1]);h.primitiveLength+=k.length/3,h.vertexLength+=u}}var O;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},be("FillExtrusionBucket",Nu,{omit:["layers","features"]});var Uu={paint:new as({"fill-extrusion-opacity":new es(to["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ns(to["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new es(to["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new es(to["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rs(to["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ns(to["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ns(to["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new es(to["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Vu=function(t){function e(e){t.call(this,e,Uu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Nu(t)},e.prototype.queryRadius=function(){return tn(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){var u=en(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),l=this.paint.get("fill-extrusion-height").evaluate(e,n),c=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=[s.x,s.y,0,1];nn(u,u,e),i.push(new si(u[0]/u[3],u[1]/u[3]))}return i}(u,s),f=function(t,e,n,r){for(var i=[],o=[],a=r[8]*e,s=r[9]*e,u=r[10]*e,l=r[11]*e,c=r[8]*n,h=r[9]*n,f=r[10]*n,p=r[11]*n,d=0,v=t;d<v.length;d+=1){for(var g=[],m=[],y=0,_=v[d];y<_.length;y+=1){var b=_[y],x=b.x,w=b.y,S=r[0]*x+r[4]*w+r[12],E=r[1]*x+r[5]*w+r[13],M=r[2]*x+r[6]*w+r[14],T=r[3]*x+r[7]*w+r[15],C=M+u,A=T+l,P=S+c,k=E+h,I=M+f,O=T+p,j=new si((S+a)/A,(E+s)/A);j.z=C/A,g.push(j);var L=new si(P/O,k/O);L.z=I/O,m.push(L)}i.push(g),o.push(m)}return[i,o]}(r,c,l,s);return function(t,e,n){var r=1/0;qe(n,e)&&(r=Jn(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];Ve(n,l)&&(r=Math.min(r,Jn(n,l)))}return r!==1/0&&r}(f[0],f[1],h)},e}(ss),Gu=Oe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,qu=Bu.VectorTileFeature.types,Hu=Math.cos(Math.PI/180*37.5),Yu=Math.pow(2,14)/.5,Xu=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ds,this.indexArray=new Cs,this.programConfigurations=new fu(Gu,t.layers,t.zoom),this.segments=new Gs,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Xu.prototype.populate=function(t,e,n){this.hasPattern=Nn("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,p={type:u.type,id:l,properties:u.properties,geometry:f?Ne(u):[]};if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),p,n)){f||(p.geometry=Ne(u));var d=r?r.evaluate(p,{},n):void 0;i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:p.geometry,patterns:{},sortKey:d})}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var v=0,g=i;v<g.length;v+=1){var m=g[v],y=m.geometry,_=m.index,b=m.sourceLayerIndex;if(this.hasPattern){var x=Un("line",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,y,_,n,{});e.featureIndex.insert(t[_].feature,y,_,b,this.index)}},Xu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Xu.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Xu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Xu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xu.prototype.addFeature=function(t,e,n,r,i){for(var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit"),c=0,h=e;c<h.length;c+=1)this.addLine(h[c],t,a,s,u,l,n,r,i)},Xu.prototype.addLine=function(t,e,n,r,i,o,a,s,u){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var l=0;l<t.length-1;l++)this.totalDistance+=t[l].dist(t[l+1]);this.updateScaledDistance()}for(var c="Polygon"===qu[e.type],h=t.length;h>=2&&t[h-1].equals(t[h-2]);)h--;for(var f=0;f<h-1&&t[f].equals(t[f+1]);)f++;if(!(h<(c?3:2))){"bevel"===n&&(i=1.05);var p,d=this.overscaling<=16?15*zo/(512*this.overscaling):0,v=this.segments.prepareSegment(10*h,this.layoutVertexArray,this.indexArray),g=void 0,m=void 0,y=void 0,_=void 0;this.e1=this.e2=-1,c&&(_=t[f].sub(p=t[h-2])._unit()._perp());for(var b=f;b<h;b++)if(!(m=b===h-1?c?t[f+1]:void 0:t[b+1])||!t[b].equals(m)){_&&(y=_),p&&(g=p),p=t[b],_=m?m.sub(p)._unit()._perp():y;var x=(y=y||_).add(_);0===x.x&&0===x.y||x._unit();var w=y.x*_.x+y.y*_.y,S=x.x*_.x+x.y*_.y,E=0!==S?1/S:1/0,M=2*Math.sqrt(2-2*S),T=S<Hu&&g&&m,C=y.x*_.y-y.y*_.x>0;if(T&&b>f){var A=p.dist(g);if(A>2*d){var P=p.sub(p.sub(g)._mult(d/A)._round());this.updateDistance(g,P),this.addCurrentVertex(P,y,0,0,v),g=P}}var k=g&&m,I=k?n:c?"butt":r;if(k&&"round"===I&&(E<o?I="miter":E<=2&&(I="fakeround")),"miter"===I&&E>i&&(I="bevel"),"bevel"===I&&(E>2&&(I="flipbevel"),E<i&&(I="miter")),g&&this.updateDistance(g,p),"miter"===I)x._mult(E),this.addCurrentVertex(p,x,0,0,v);else if("flipbevel"===I){if(E>100)x=_.mult(-1);else{var O=E*y.add(_).mag()/y.sub(_).mag();x._perp()._mult(O*(C?-1:1))}this.addCurrentVertex(p,x,0,0,v),this.addCurrentVertex(p,x.mult(-1),0,0,v)}else if("bevel"===I||"fakeround"===I){var j=-Math.sqrt(E*E-1),L=C?j:0,D=C?0:j;if(g&&this.addCurrentVertex(p,y,L,D,v),"fakeround"===I)for(var R=Math.round(180*M/Math.PI/20),B=1;B<R;B++){var z=B/R;if(.5!==z){var F=z-.5;z+=z*F*(z-1)*((1.0904+w*(w*(3.55645-1.43519*w)-3.2452))*F*F+(.848013+w*(.215638*w-1.06021)))}var N=_.sub(y)._mult(z)._add(y)._unit()._mult(C?-1:1);this.addHalfVertex(p,N.x,N.y,!1,C,0,v)}m&&this.addCurrentVertex(p,_,-L,-D,v)}else if("butt"===I)this.addCurrentVertex(p,x,0,0,v);else if("square"===I){var U=g?1:-1;this.addCurrentVertex(p,x,U,U,v)}else"round"===I&&(g&&(this.addCurrentVertex(p,y,0,0,v),this.addCurrentVertex(p,y,1,1,v,!0)),m&&(this.addCurrentVertex(p,_,-1,-1,v,!0),this.addCurrentVertex(p,_,0,0,v)));if(T&&b<h-1){var V=p.dist(m);if(V>2*d){var G=p.add(m.sub(p)._mult(d/V)._round());this.updateDistance(p,G),this.addCurrentVertex(G,_,0,0,v),p=G}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,u,s)}},Xu.prototype.addCurrentVertex=function(t,e,n,r,i,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>Yu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))},Xu.prototype.addHalfVertex=function(t,e,n,r,i,o,a){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u},Xu.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Yu-1):this.distance},Xu.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},be("LineBucket",Xu,{omit:["layers","patternFeatures"]});var Wu=new as({"line-cap":new es(to.layout_line["line-cap"]),"line-join":new ns(to.layout_line["line-join"]),"line-miter-limit":new es(to.layout_line["line-miter-limit"]),"line-round-limit":new es(to.layout_line["line-round-limit"]),"line-sort-key":new ns(to.layout_line["line-sort-key"])}),Zu={paint:new as({"line-opacity":new ns(to.paint_line["line-opacity"]),"line-color":new ns(to.paint_line["line-color"]),"line-translate":new es(to.paint_line["line-translate"]),"line-translate-anchor":new es(to.paint_line["line-translate-anchor"]),"line-width":new ns(to.paint_line["line-width"]),"line-gap-width":new ns(to.paint_line["line-gap-width"]),"line-offset":new ns(to.paint_line["line-offset"]),"line-blur":new ns(to.paint_line["line-blur"]),"line-dasharray":new is(to.paint_line["line-dasharray"]),"line-pattern":new rs(to.paint_line["line-pattern"]),"line-gradient":new os(to.paint_line["line-gradient"])}),layout:Wu},Ku=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Ya(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=s({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(ns))(Zu.paint.properties["line-width"].specification);Ku.useIntegerZoom=!0;var Ju=function(t){function e(e){t.call(this,e,Zu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=un(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=Ku.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Xu(t)},e.prototype.queryRadius=function(t){var e=t,n=Qn($e("line-width",this,e),$e("line-gap-width",this,e)),r=$e("line-offset",this,e);return n/2+Math.abs(r)+tn(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){var s=en(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*Qn(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=new si(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var u=o[s],l=o[s+1],c=0===s?r:u.sub(o[s-1])._unit()._perp(),h=s===o.length-1?r:l.sub(u)._unit()._perp(),f=c._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),a.push(f._mult(e)._add(u))}n.push(a)}return n}(r,l*a)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(Je(t,i[o]))return!0;if(He(t,i,n))return!0}return!1}(s,r,u)},e.prototype.isTileClipped=function(){return!0},e}(ss),Qu=Oe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$u=Oe([{name:"a_projected_pos",components:3,type:"Float32"}],4),tl=(Oe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Oe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),el=(Oe([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Oe([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),nl=Oe([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Oe([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Oe([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),Oe([{type:"Float32",name:"offsetX"}]),Oe([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var rl={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},il=24,ol=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},al=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*v},sl=tr;tr.Varint=0,tr.Fixed64=1,tr.Bytes=2,tr.Fixed32=5;var ul="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");tr.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=pr(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=vr(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=pr(this.buf,this.pos)+4294967296*pr(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=pr(this.buf,this.pos)+4294967296*vr(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=ol(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ol(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return nr(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return nr(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return nr(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return nr(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return nr(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return nr(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ul?function(t,e,n){return ul.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==tr.Bytes)return t.push(this.readVarint(e));var n=er(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==tr.Bytes)return t.push(this.readSVarint());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==tr.Bytes)return t.push(this.readBoolean());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==tr.Bytes)return t.push(this.readFloat());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==tr.Bytes)return t.push(this.readDouble());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==tr.Bytes)return t.push(this.readFixed32());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==tr.Bytes)return t.push(this.readSFixed32());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==tr.Bytes)return t.push(this.readFixed64());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==tr.Bytes)return t.push(this.readSFixed64());var e=er(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===tr.Varint)for(;this.buf[this.pos++]>127;);else if(e===tr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===tr.Fixed32)this.pos+=4;else{if(e!==tr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),dr(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),dr(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),dr(this.buf,-1&t,this.pos),dr(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),dr(this.buf,-1&t,this.pos),dr(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&rr(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),al(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),al(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&rr(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,tr.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,ir,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,or,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ur,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ar,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,sr,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,lr,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,cr,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,hr,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,fr,e)},writeBytesField:function(t,e){this.writeTag(t,tr.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,tr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,tr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,tr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,tr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,tr.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,tr.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,tr.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,tr.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,tr.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var ll=3,cl=ll,hl=1,fl=function(t,e){var n=e.pixelRatio,r=e.version,i=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r},pl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};pl.tl.get=function(){return[this.paddedRect.x+hl,this.paddedRect.y+hl]},pl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-hl,this.paddedRect.y+this.paddedRect.h-hl]},pl.tlbr.get=function(){return this.tl.concat(this.br)},pl.displaySize.get=function(){return[(this.paddedRect.w-2*hl)/this.pixelRatio,(this.paddedRect.h-2*hl)/this.pixelRatio]},Object.defineProperties(fl.prototype,pl);var dl=function(t,e){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,n,i),this.addImages(e,r,i);var o=_r(i),a=new wu({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=n[s].paddedRect;wu.copy(u.data,a,{x:0,y:0},{x:l.x+hl,y:l.y+hl},u.data)}for(var c in e){var h=e[c],f=r[c].paddedRect,p=f.x+hl,d=f.y+hl,v=h.data.width,g=h.data.height;wu.copy(h.data,a,{x:0,y:0},{x:p,y:d},h.data),wu.copy(h.data,a,{x:0,y:g-1},{x:p,y:d-1},{width:v,height:1}),wu.copy(h.data,a,{x:0,y:0},{x:p,y:d+g},{width:v,height:1}),wu.copy(h.data,a,{x:v-1,y:0},{x:p-1,y:d},{width:1,height:g}),wu.copy(h.data,a,{x:0,y:0},{x:p+v,y:d},{width:1,height:g})}this.image=a,this.iconPositions=n,this.patternPositions=r};dl.prototype.addImages=function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2*hl,h:i.data.height+2*hl};n.push(o),e[r]=new fl(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},dl.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},dl.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;n.update(e.data,void 0,{x:r[0],y:r[1]})}},be("ImagePosition",fl),be("ImageAtlas",dl);var vl={horizontal:1,vertical:2,horizontalOnly:3},gl=-17,ml=function(){this.scale=1,this.fontStack="",this.imageName=null};ml.forText=function(t,e){var n=new ml;return n.scale=t||1,n.fontStack=e,n},ml.forImage=function(t){var e=new ml;return e.imageName=t,e};var yl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};yl.fromFeature=function(t,e){for(var n=new yl,r=0;r<t.sections.length;r++){var i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n},yl.prototype.length=function(){return this.text.length},yl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},yl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},yl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},yl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Ce(r)&&!rl[t[n+1]]||i&&Ce(i)&&!rl[t[n-1]]||!rl[t[n]]?t[n]:rl[t[n]]}return e}(this.text)},yl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&_l[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&_l[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},yl.prototype.substring=function(t,e){var n=new yl;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},yl.prototype.toString=function(){return this.text},yl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)},yl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(ml.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)},yl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(ml.forImage(e)),this.sectionIndex.push(this.sections.length-1)):g("Reached maximum number of images 6401")}else g("Can't add FormattedSection with an empty image.")},yl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var _l={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},bl={};bl[10]=!0,bl[32]=!0,bl[38]=!0,bl[40]=!0,bl[41]=!0,bl[43]=!0,bl[45]=!0,bl[47]=!0,bl[173]=!0,bl[183]=!0,bl[8203]=!0,bl[8208]=!0,bl[8211]=!0,bl[8231]=!0;var xl=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(si);be("Anchor",xl);var wl=128,Sl=Object.freeze({__proto__:null,getSizeData:Pr,evaluateSizeForFeature:kr,evaluateSizeForZoom:Ir,SIZE_PACK_FACTOR:wl}),El=hl,Ml=function(t,e,n,r,i,o,a,s,u,l,c,h){var f=a.top*s-u,p=a.bottom*s+u,d=a.left*s-u,v=a.right*s+u,g=a.collisionPadding;if(g&&(d-=g[0]*s,f-=g[1]*s,v+=g[2]*s,p+=g[3]*s),this.boxStartIndex=t.length,l){var m=p-f,y=v-d;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(t,e,n,n.segment,y,m,r,i,o,c))}else{if(h){var _=new si(d,f),b=new si(v,f),x=new si(d,p),w=new si(v,p),S=h*Math.PI/180;_._rotate(S),b._rotate(S),x._rotate(S),w._rotate(S),d=Math.min(_.x,b.x,x.x,w.x),v=Math.max(_.x,b.x,x.x,w.x),f=Math.min(_.y,b.y,x.y,w.y),p=Math.max(_.y,b.y,x.y,w.y)}t.emplaceBack(n.x,n.y,d,f,v,p,r,i,o,0,0)}this.boxEndIndex=t.length};Ml.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,h=Math.floor(i/c)||1,f=1+.4*Math.log(l)/Math.LN2,p=Math.floor(h*f/2),d=-o/2,v=n,g=r+1,m=d,y=-i/2,_=y-i/4;do{if(--g<0){if(m>y)return;g=0;break}m-=e[g].dist(v),v=e[g]}while(m>_);for(var b=e[g].dist(e[g+1]),x=-p;x<h+p;x++){var w=x*c,S=y+w;if(w<0&&(S+=w),w>i&&(S+=w-i),!(S<m)){for(;m+b<S;){if(m+=b,++g+1>=e.length)return;b=e[g].dist(e[g+1])}var E=S-m,M=e[g],T=e[g+1].sub(M)._unit()._mult(E)._add(M)._round(),C=Math.abs(S-d)<c?0:.8*(S-d);t.emplaceBack(T.x,T.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,C)}}};var Tl=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Gr),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};Tl.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Tl.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Tl.prototype.peek=function(){return this.data[0]},Tl.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},Tl.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var Cl=7,Al=Number.POSITIVE_INFINITY,Pl=255,kl=Pl*wl,Il=Bu.VectorTileFeature.types,Ol=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],jl=function(t){this.layoutVertexArray=new gs,this.indexArray=new Cs,this.programConfigurations=t,this.segments=new Gs,this.dynamicLayoutVertexArray=new ms,this.opacityVertexArray=new ys,this.placedSymbolArray=new Ds};jl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},jl.prototype.upload=function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,$u.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Ol,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))},jl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},be("SymbolBuffers",jl);var Ll=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Gs,this.collisionVertexArray=new xs};Ll.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,tl.members,!0)},Ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},be("CollisionBuffers",Ll);var Dl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[];var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pr(this.zoom,e["text-size"]),this.iconSizeData=Pr(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map(function(t){return vl[t]})),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};Dl.prototype.createArrays=function(){this.text=new jl(new fu(Qu.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new jl(new fu(Qu.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new zs,this.lineVertexArray=new Fs,this.symbolInstances=new Bs},Dl.prototype.calculateGlyphDependencies=function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){var a=rl[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},Dl.prototype.populate=function(t,e,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof bo&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=i.get("symbol-sort-key");if(this.features=[],u||l){for(var h=e.iconDependencies,f=e.glyphDependencies,p=e.availableImages,d=new Ya(this.zoom),v=0,g=t;v<g.length;v+=1){var m=g[v],y=m.feature,_=m.id,b=m.index,x=m.sourceLayerIndex,w=r._featureFilter.needGeometry,S={type:y.type,id:_,properties:y.properties,geometry:w?Ne(y):[]};if(r._featureFilter.filter(d,S,n)){w||(S.geometry=Ne(y));var E=void 0;if(u){var M=r.getValueAndResolveTokens("text-field",S,n,p),T=bo.factory(M);ti(T)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ga()||this.hasRTLText&&Ha.isParsed())&&(E=$n(T,r,S))}var C=void 0;if(l){var A=r.getValueAndResolveTokens("icon-image",S,n,p);C=A instanceof xo?A:xo.fromString(A)}if(E||C){var P=this.sortFeaturesByKey?c.evaluate(S,{},n):void 0,k={id:_,text:E,icon:C,index:b,sourceLayerIndex:x,geometry:Ne(y),properties:y.properties,type:Il[y.type],sortKey:P};if(this.features.push(k),C&&(h[C.name]=!0),E){var I=o.evaluate(S,{},n).join(","),O="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vl.vertical)>=0;for(var j=0,L=E.sections;j<L.length;j+=1){var D=L[j];if(D.image)h[D.image.name]=!0;else{var R=Me(E.toString()),B=D.fontStack||I,z=f[B]=f[B]||{};this.calculateGlyphDependencies(D.text,z,O,this.allowVerticalPlacement,R)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],h=c.geometry,f=c.text?c.text.toString():null;if(f){var p=i(f,h),d=i(f,h,!0);if(p in a&&d in o&&a[p]!==o[d]){var v=r(p,d,h),g=n(p,d,s[v].geometry);delete o[p],delete a[d],a[i(f,s[g].geometry,!0)]=g,s[v].geometry=null}else p in a?n(p,d,h):d in o?r(p,d,h):(e(l),o[p]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Dl.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},Dl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Dl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Dl.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Dl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},Dl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Dl.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Dl.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l,c,h){for(var f=t.indexArray,p=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,p,f,o.sortKey),v=this.glyphOffsetArray.length,g=d.vertexLength,m=this.allowVerticalPlacement&&a===vl.vertical?Math.PI/2:0,y=o.text&&o.text.sections,_=0;_<e.length;_++){var b=e[_],x=b.tl,w=b.tr,S=b.bl,E=b.br,M=b.tex,T=b.pixelOffsetTL,C=b.pixelOffsetBR,A=b.minFontScaleX,P=b.minFontScaleY,k=b.glyphOffset,I=b.isSDF,O=b.sectionIndex,j=d.vertexLength,L=k[1];Qr(p,s.x,s.y,x.x,L+x.y,M.x,M.y,n,I,T.x,T.y,A,P),Qr(p,s.x,s.y,w.x,L+w.y,M.x+M.w,M.y,n,I,C.x,T.y,A,P),Qr(p,s.x,s.y,S.x,L+S.y,M.x,M.y+M.h,n,I,T.x,C.y,A,P),Qr(p,s.x,s.y,E.x,L+E.y,M.x+M.w,M.y+M.h,n,I,C.x,C.y,A,P),$r(t.dynamicLayoutVertexArray,s,m),f.emplaceBack(j,j+1,j+2),f.emplaceBack(j+1,j+2,j+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(k[0]),_!==e.length-1&&O===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},h,y&&y[O])}t.placedSymbolArray.emplaceBack(s.x,s.y,v,this.glyphOffsetArray.length-v,g,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,c)},Dl.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},Dl.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,h=i.collisionVertexArray,f=a.anchorX,p=a.anchorY;if(this._addCollisionDebugVertex(c,h,o,f,p,new si(t,e)),this._addCollisionDebugVertex(c,h,o,f,p,new si(n,e)),this._addCollisionDebugVertex(c,h,o,f,p,new si(n,r)),this._addCollisionDebugVertex(c,h,o,f,p,new si(t,r)),u.vertexLength+=4,s){var d=i.indexArray;d.emplaceBack(l,l+1,l+2),d.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var v=i.indexArray;v.emplaceBack(l,l+1),v.emplaceBack(l+1,l+2),v.emplaceBack(l+2,l+3),v.emplaceBack(l+3,l),u.primitiveLength+=4}},Dl.prototype.addDebugCollisionBoxes=function(t,e,n,r){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i),a=o.radius>0;this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,a?r?this.textCollisionCircle:this.iconCollisionCircle:r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n,a)}},Dl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ll(bs,el.members,As),this.iconCollisionBox=new Ll(bs,el.members,As),this.textCollisionCircle=new Ll(bs,nl.members,Cs),this.iconCollisionCircle=new Ll(bs,nl.members,Cs);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Dl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i,o,a,s,u){for(var l={},c=e;c<n;c++){var h=t.get(c);if(0===h.radius){l.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.textFeatureIndex=h.featureIndex;break}l.textCircles||(l.textCircles=[],l.textFeatureIndex=h.featureIndex),l.textCircles.push(h.anchorPointX,h.anchorPointY,h.radius,h.signedDistanceFromAnchor,1)}for(var f=r;f<i;f++){var p=t.get(f);if(0===p.radius){l.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.verticalTextFeatureIndex=p.featureIndex;break}}for(var d=o;d<a;d++){var v=t.get(d);if(0===v.radius){l.iconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},l.iconFeatureIndex=v.featureIndex;break}}for(var g=s;g<u;g++){var m=t.get(g);if(0===m.radius){l.verticalIconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.verticalIconFeatureIndex=m.featureIndex;break}}return l},Dl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Dl.prototype.hasTextData=function(){return this.text.segments.get().length>0},Dl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Dl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox&&this.textCollisionCircle&&this.iconCollisionCircle},Dl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Dl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Dl.prototype.hasTextCollisionCircleData=function(){return this.hasDebugData()&&this.textCollisionCircle.segments.get().length>0},Dl.prototype.hasIconCollisionCircleData=function(){return this.hasDebugData()&&this.iconCollisionCircle.segments.get().length>0},Dl.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},Dl.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort(function(t,e){return r[t]-r[e]||i[e]-i[t]}),o},Dl.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},Dl.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=this.symbolInstances.get(r[n]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach(function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)}),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},be("SymbolBucket",Dl,{omit:["layers","collisionBoxArray","features","compareText"]}),Dl.MAX_GLYPHS=65535,Dl.addDynamicAttributes=$r;var Rl=new as({"symbol-placement":new es(to.layout_symbol["symbol-placement"]),"symbol-spacing":new es(to.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new es(to.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ns(to.layout_symbol["symbol-sort-key"]),"symbol-z-order":new es(to.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new es(to.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new es(to.layout_symbol["icon-ignore-placement"]),"icon-optional":new es(to.layout_symbol["icon-optional"]),"icon-rotation-alignment":new es(to.layout_symbol["icon-rotation-alignment"]),"icon-size":new ns(to.layout_symbol["icon-size"]),"icon-text-fit":new es(to.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new es(to.layout_symbol["icon-text-fit-padding"]),"icon-image":new ns(to.layout_symbol["icon-image"]),"icon-rotate":new ns(to.layout_symbol["icon-rotate"]),"icon-padding":new es(to.layout_symbol["icon-padding"]),"icon-keep-upright":new es(to.layout_symbol["icon-keep-upright"]),"icon-offset":new ns(to.layout_symbol["icon-offset"]),"icon-anchor":new ns(to.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new es(to.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new es(to.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new es(to.layout_symbol["text-rotation-alignment"]),"text-field":new ns(to.layout_symbol["text-field"]),"text-font":new ns(to.layout_symbol["text-font"]),"text-size":new ns(to.layout_symbol["text-size"]),"text-max-width":new ns(to.layout_symbol["text-max-width"]),"text-line-height":new es(to.layout_symbol["text-line-height"]),"text-letter-spacing":new ns(to.layout_symbol["text-letter-spacing"]),"text-justify":new ns(to.layout_symbol["text-justify"]),"text-radial-offset":new ns(to.layout_symbol["text-radial-offset"]),"text-variable-anchor":new es(to.layout_symbol["text-variable-anchor"]),"text-anchor":new ns(to.layout_symbol["text-anchor"]),"text-max-angle":new es(to.layout_symbol["text-max-angle"]),"text-writing-mode":new es(to.layout_symbol["text-writing-mode"]),"text-rotate":new ns(to.layout_symbol["text-rotate"]),"text-padding":new es(to.layout_symbol["text-padding"]),"text-keep-upright":new es(to.layout_symbol["text-keep-upright"]),"text-transform":new ns(to.layout_symbol["text-transform"]),"text-offset":new ns(to.layout_symbol["text-offset"]),"text-allow-overlap":new es(to.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new es(to.layout_symbol["text-ignore-placement"]),"text-optional":new es(to.layout_symbol["text-optional"])}),Bl={paint:new as({"icon-opacity":new ns(to.paint_symbol["icon-opacity"]),"icon-color":new ns(to.paint_symbol["icon-color"]),"icon-halo-color":new ns(to.paint_symbol["icon-halo-color"]),"icon-halo-width":new ns(to.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ns(to.paint_symbol["icon-halo-blur"]),"icon-translate":new es(to.paint_symbol["icon-translate"]),"icon-translate-anchor":new es(to.paint_symbol["icon-translate-anchor"]),"text-opacity":new ns(to.paint_symbol["text-opacity"]),"text-color":new ns(to.paint_symbol["text-color"],{runtimeType:uo,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new ns(to.paint_symbol["text-halo-color"]),"text-halo-width":new ns(to.paint_symbol["text-halo-width"]),"text-halo-blur":new ns(to.paint_symbol["text-halo-blur"]),"text-translate":new es(to.paint_symbol["text-translate"]),"text-translate-anchor":new es(to.paint_symbol["text-translate-anchor"])}),layout:Rl},zl=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:io,this.defaultValue=t};zl.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},zl.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},zl.prototype.outputDefined=function(){return!1},zl.prototype.serialize=function(){return null},be("FormatSectionOverride",zl,{omit:["defaultValue"]});var Fl=function(t){function e(e){t.call(this,e,Bl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var i=[],o=0,a=r;o<a.length;o+=1){var s=a[o];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Vt(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?String(t[n]):""})}(e.properties,i)},e.prototype.createBucket=function(t){return new Dl(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=Bl.paint.overridableProperties;t<n.length;t+=1){var r=n[t];if(e.hasPaintOverride(this.layout,r)){var i,o=this.paint.get(r),a=new zl(o),s=new _a(a,o.property.specification);i="constant"===o.value.kind||"source"===o.value.kind?new ba("source",s):new xa("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new $a(o.property,i,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),r=Bl.paint.properties[e],i=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r.overrides&&r.overrides.hasOverride(n[e]))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof bo)o(n.value.value.sections);else if("source"===n.value.kind){var a=function(t){i||(t instanceof wo&&G(t.value)===fo?o(t.value.sections):t instanceof To?o(t.sections):t.eachChild(a))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i},e}(ss),Nl={paint:new as({"background-color":new es(to.paint_background["background-color"]),"background-pattern":new is(to.paint_background["background-pattern"]),"background-opacity":new es(to.paint_background["background-opacity"])})},Ul=function(t){function e(e){t.call(this,e,Nl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ss),Vl={paint:new as({"raster-opacity":new es(to.paint_raster["raster-opacity"]),"raster-hue-rotate":new es(to.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new es(to.paint_raster["raster-brightness-min"]),"raster-brightness-max":new es(to.paint_raster["raster-brightness-max"]),"raster-saturation":new es(to.paint_raster["raster-saturation"]),"raster-contrast":new es(to.paint_raster["raster-contrast"]),"raster-resampling":new es(to.paint_raster["raster-resampling"]),"raster-fade-duration":new es(to.paint_raster["raster-fade-duration"])})},Gl=function(t){function e(e){t.call(this,e,Vl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ss),ql=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(ss),Hl={circle:_u,heatmap:Eu,hillshade:Tu,fill:ju,"fill-extrusion":Vu,line:Ju,symbol:Fl,background:Ul,raster:Gl},Yl=self.HTMLImageElement,Xl=self.HTMLCanvasElement,Wl=self.HTMLVideoElement,Zl=self.ImageData,Kl=self.ImageBitmap,Jl=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};Jl.prototype.update=function(t,e,n){var r=t.width,i=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,i],t instanceof Yl||t instanceof Xl||t instanceof Wl||t instanceof Zl||Kl&&t instanceof Kl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;t instanceof Yl||t instanceof Xl||t instanceof Wl||t instanceof Zl||Kl&&t instanceof Kl?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Jl.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Jl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Jl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ql=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Ql.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Ql.prototype.remove=function(){delete this._channel,this._callback=function(){}};var $l=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},h(["receive","process"],this),this.invoker=new Ql(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=_()?t:self};$l.prototype.send=function(t,e,n,r,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=x(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Se(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},$l.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else _()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},$l.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},$l.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Ee(e.error)):r(null,Ee(e.data)))}else{var i=!1,o=x(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?Se(e):null,data:Se(r,o)},o)}:function(t){i=!0},s=null,u=Ee(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},$l.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var tc=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=ni(0,t,t,e,n)};tc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},tc.prototype.url=function(t,e){var n,r,i,o,a,s=(r=this.y,i=this.z,o=ei(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=ei(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},tc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new si((t.x*e-this.x)*zo,(t.y*e-this.y)*zo)},tc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ec=function(t,e){this.wrap=t,this.canonical=e,this.key=ni(t,e.z,e.z,e.x,e.y)},nc=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new tc(n,+r,+i),this.key=ni(e,t,n,r,i)};nc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},nc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new nc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},nc.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?ni(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):ni(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},nc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},nc.prototype.children=function(t){if(this.overscaledZ>=t)return[new nc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new nc(e,this.wrap,e,n,r),new nc(e,this.wrap,e,n+1,r),new nc(e,this.wrap,e,n,r+1),new nc(e,this.wrap,e,n+1,r+1)]},nc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},nc.prototype.wrapped=function(){return new nc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},nc.prototype.unwrapTo=function(t){return new nc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},nc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},nc.prototype.toUnwrapped=function(){return new ec(this.wrap,this.canonical)},nc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},nc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Bo(t.x-this.wrap,t.y))},be("CanonicalTileID",tc),be("OverscaledTileID",nc,{omit:["posMatrix"]});var rc=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return g('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};rc.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},rc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},rc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},rc.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},rc.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},rc.prototype.getPixels=function(){return new wu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},rc.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,l=o;l<a;l++)for(var c=r;c<i;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},be("DEMData",rc);var ic=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};ic.prototype.encode=function(t){return this._stringToNumber[t]},ic.prototype.decode=function(t){return this._numberToString[t]};var oc=function(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i},ac={geometry:{configurable:!0}};ac.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ac.geometry.set=function(t){this._geometry=t},oc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(oc.prototype,ac);var sc=function(){this.state={},this.stateChanges={},this.deletedStates={}};sc.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},s(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},sc.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},sc.prototype.getState=function(t,e){var n=String(e),r=s({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},sc.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},sc.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),s(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var u={};if(null===this.deletedStates[a])for(var l in this.state[a])u[l]={},this.state[a][l]={};else for(var c in this.deletedStates[a]){if(null===this.deletedStates[a][c])this.state[a][c]={};else for(var h=0,f=Object.keys(this.deletedStates[a][c]);h<f.length;h+=1)delete this.state[a][c][f[h]];u[c]=this.state[a][c]}n[a]=n[a]||{},s(n[a],u)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in t)t[p].setFeatureState(n,e)};var uc=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ka(zo,16,0),this.grid3D=new ka(zo,16,0),this.featureIndexArray=new Us,this.promoteId=e};uc.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var f=l[h];c[0]=Math.min(c[0],f.x),c[1]=Math.min(c[1],f.y),c[2]=Math.max(c[2],f.x),c[3]=Math.max(c[3],f.y)}c[0]<zo&&c[1]<zo&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},uc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Bu.VectorTile(new sl(this.rawTileData)).layers,this.sourceLayerCoder=new ic(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},uc.prototype.query=function(t,e,n,r){var i=this;this.loadVTLayers();for(var o=t.params||{},a=zo/t.tileSize/t.scale,s=Qt(o.filter),u=t.queryGeometry,l=t.queryPadding*a,c=ii(u),h=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),f=ii(t.cameraQueryGeometry),p=this.grid3D.query(f.minX-l,f.minY-l,f.maxX+l,f.maxY+l,function(e,n,r,i){return function(t,e,n,r,i){for(var o=0,a=t;o<a.length;o+=1){var s=a[o];if(e<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}var u=[new si(e,n),new si(e,i),new si(r,i),new si(r,n)];if(t.length>2)for(var l=0,c=u;l<c.length;l+=1)if(Je(t,c[l]))return!0;for(var h=0;h<t.length-1;h++)if(Qe(t[h],t[h+1],u))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,i+l)}),d=0,v=p;d<v.length;d+=1)h.push(v[d]);h.sort(oi);for(var g,m={},y=function(l){var c=h[l];if(c!==g){g=c;var f=i.featureIndexArray.get(c),p=null;i.loadMatchingFeature(m,f.bucketIndex,f.sourceLayerIndex,f.featureIndex,s,o.layers,o.availableImages,e,n,r,function(e,n,r){return p||(p=Ne(e)),n.queryIntersectsFeature(u,e,r,p,i.z,t.transform,a,t.pixelPosMatrix)})}},_=0;_<h.length;_++)y(_);return m},uc.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s,u,l,c){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,h)){var f=this.sourceLayerCoder.decode(n),p=this.vtLayers[f].feature(r);if(i.filter(new Ya(this.tileID.overscaledZ),p))for(var d=this.getId(p,f),v=0;v<h.length;v++){var g=h[v];if(!(o&&o.indexOf(g)<0)){var m=s[g];if(m){var y={};void 0!==d&&l&&(y=l.getState(m.sourceLayer||"_geojsonTileLayer",d));var _=u[g];_.paint=ri(_.paint,m.paint,p,y,a),_.layout=ri(_.layout,m.layout,p,y,a);var b=!c||c(p,m,y);if(b){var x=new oc(p,this.z,this.x,this.y,d);x.layer=_;var w=t[g];void 0===w&&(w=t[g]=[]),w.push({featureIndex:r,feature:x,intersectionZ:b})}}}}}},uc.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o,a,s){var u={};this.loadVTLayers();for(var l=Qt(i),c=0,h=t;c<h.length;c+=1)this.loadMatchingFeature(u,n,r,h[c],l,o,a,s,e);return u},uc.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},uc.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},be("FeatureIndex",uc,{omit:["rawTileData","sourceLayerCoder"]});var lc=function(t,e){this.tileID=t,this.uid=u(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};lc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<_i.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},lc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},lc.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return r.filter(function(e){return e.id===t})[0]}));for(var a=0,s=r;a<s.length;a+=1)n[s[a].id]=t}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof Dl){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof Dl&&a.hasRTLText){this.hasRTLText=!0,Ha.isLoading()||Ha.isLoaded()||"deferred"!==Ga()||qa();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new js},lc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},lc.prototype.getBucket=function(t){return this.buckets[t.id]},lc.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jl(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jl(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},lc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},lc.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,n):{}},lc.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=Qt(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,h={z:u,x:l,y:c},f=0;f<o.length;f++){var p=o.feature(f);if(a.filter(new Ya(this.tileID.overscaledZ),p)){var d=n.getId(p,i),v=new oc(p,u,l,c,d);v.tile=h,t.push(v)}}}},lc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},lc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},lc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=b(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},lc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},lc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(r).queryRadius(i))))}}},lc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},lc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<_i.now()},lc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},lc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=_i.now()+t},lc.prototype.setDependencies=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[t]=n},lc.prototype.hasDependency=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=this.dependencies[r[n]];if(i)for(var o=0,a=e;o<a.length;o+=1)if(i[a[o]])return!0}return!1};var cc=self.performance,hc=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},cc.mark(this._marks.start)};hc.prototype.finish=function(){cc.mark(this._marks.end);var t=cc.getEntriesByName(this._marks.measure);return 0===t.length&&(cc.measure(this._marks.measure,this._marks.start,this._marks.end),t=cc.getEntriesByName(this._marks.measure),cc.clearMarks(this._marks.start),cc.clearMarks(this._marks.end),cc.clearMeasures(this._marks.measure)),t},t.Actor=$l,t.AlphaImage=xu,t.CanonicalTileID=tc,t.CollisionBoxArray=js,t.Color=mo,t.DEMData=rc,t.DataConstantProperty=es,t.DictionaryCoder=ic,t.EXTENT=zo,t.ErrorEvent=Qi,t.EvaluationParameters=Ya,t.Event=Ji,t.Evented=$i,t.FeatureIndex=uc,t.FillBucket=ku,t.FillExtrusionBucket=Nu,t.ImageAtlas=dl,t.ImagePosition=fl,t.LineBucket=Xu,t.LngLat=Do,t.LngLatBounds=Lo,t.MercatorCoordinate=Bo,t.ONE_EM=il,t.OverscaledTileID=nc,t.Point=si,t.Point$1=si,t.Properties=as,t.Protobuf=sl,t.RGBAImage=wu,t.RequestManager=Mi,t.RequestPerformance=hc,t.ResourceType=Vi,t.SegmentVector=Gs,t.SourceFeatureState=sc,t.StructArrayLayout1ui2=Ps,t.StructArrayLayout2i4=hs,t.StructArrayLayout3ui6=Cs,t.StructArrayLayout4i8=fs,t.SymbolBucket=Dl,t.Texture=Jl,t.Tile=lc,t.Transitionable=Za,t.Uniform1f=$s,t.Uniform1i=Qs,t.Uniform2f=tu,t.Uniform3f=eu,t.Uniform4f=nu,t.UniformColor=ru,t.UniformMatrix4f=ou,t.UnwrappedTileID=ec,t.ValidationError=eo,t.WritingMode=vl,t.ZoomHistory=Ra,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=$r,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.bezier=i,t.bindAll=h,t.browser=_i,t.cacheEntryPossiblyAdded=function(t){++Ui>Fi&&(t.getActor().send("enforceCacheSizeLimit",zi),Ui=0)},t.clamp=o,t.clearTileCache=function(t){var e=self.caches.delete(Bi);t&&e.catch(t).then(function(){return t()})},t.clone=function(t){var e=new yu(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=v,t.clone$2=function(t){var e=new yu(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.config=bi,t.create=function(){var t=new yu(16);return yu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new yu(9);return yu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new yu(4);return yu!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Gt,t.createLayout=Oe,t.createStyleLayer=function(t){return"custom"===t.type?new ql(t):new Hl[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=fi,t.emitValidationErrors=ye,t.endsWith=f,t.enforceCacheSizeLimit=function(t){P(),Pi&&Pi.then(function(e){e.keys().then(function(n){for(var r=0;r<n.length-t;r++)e.delete(n[r])})})},t.evaluateSizeForFeature=kr,t.evaluateSizeForZoom=Ir,t.evaluateVariableOffset=Xr,t.evented=Va,t.extend=s,t.featureFilter=Qt,t.filterObject=d,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Tr,t.getAnchorJustification=Wr,t.getArrayBuffer=Wi,t.getImage=Ki,t.getJSON=function(t,e){return Xi(s(t,{type:"json"}),e)},t.getRTLTextPluginStatus=Ga,t.getReferrer=Yi,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,S=i*l-o*u,E=c*v-h*d,M=c*g-f*d,T=c*m-p*d,C=h*g-f*v,A=h*m-p*v,P=f*m-p*g,k=y*P-_*A+b*C+x*T-w*M+S*E;return k?(t[0]=(s*P-u*A+l*C)*(k=1/k),t[1]=(i*A-r*P-o*C)*k,t[2]=(v*S-g*w+m*x)*k,t[3]=(f*w-h*S-p*x)*k,t[4]=(u*T-a*P-l*M)*k,t[5]=(n*P-i*T+o*M)*k,t[6]=(g*b-d*S-m*_)*k,t[7]=(c*S-f*b+p*_)*k,t[8]=(a*A-s*T+l*E)*k,t[9]=(r*T-n*A-o*E)*k,t[10]=(d*w-v*b+m*y)*k,t[11]=(h*b-c*w-p*y)*k,t[12]=(s*M-a*C-u*E)*k,t[13]=(n*C-r*M+i*E)*k,t[14]=(v*_-d*x-g*y)*k,t[15]=(c*x-h*_+f*y)*k,t):null},t.isChar=Ba,t.isMapboxURL=E,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.makeRequest=Xi,t.mapObject=p,t.mercatorXfromLng=Y,t.mercatorYfromLat=X,t.mercatorZfromAltitude=W,t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*v,t[1]=_*i+b*u+x*f+w*g,t[2]=_*o+b*l+x*p+w*m,t[3]=_*a+b*c+x*d+w*y,t[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*v,t[5]=_*i+b*u+x*f+w*g,t[6]=_*o+b*l+x*p+w*m,t[7]=_*a+b*c+x*d+w*y,t[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*v,t[9]=_*i+b*u+x*f+w*g,t[10]=_*o+b*l+x*p+w*m,t[11]=_*a+b*c+x*d+w*y,t[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*v,t[13]=_*i+b*u+x*f+w*g,t[14]=_*o+b*l+x*p+w*m,t[15]=_*a+b*c+x*d+w*y,t},t.mvt=Bu,t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=pt,t.offscreenCanvasSupported=I,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new sl(t).readFields(gr,[])},t.pbf=sl,t.performSymbolLayout=function(t,e,n,r,i,o,a){t.createArrays(),t.tilePixelRatio=zo/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,h=c.maxZoom;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Ya(c.minZoom),a),u["text-size"].possiblyEvaluate(new Ya(h),a)]}if("composite"===t.iconSizeData.kind){var f=t.iconSizeData,p=f.maxZoom;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Ya(f.minZoom),a),u["icon-size"].possiblyEvaluate(new Ya(p),a)]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new Ya(t.zoom+1),a),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new Ya(t.zoom+1),a),l.textMaxSize=u["text-size"].possiblyEvaluate(new Ya(18));for(var d=s.get("text-line-height")*il,v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),y=s.get("text-size"),_=function(){var o=x[b],u=s.get("text-font").evaluate(o,{},a).join(","),c=y.evaluate(o,{},a),h=l.layoutTextSize.evaluate(o,{},a),f=l.layoutIconSize.evaluate(o,{},a),p={horizontal:{},vertical:void 0},_=o.text,w=[0,0];if(_){var S=_.toString(),E=s.get("text-letter-spacing").evaluate(o,{},a)*il,M=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r=n[e].charCodeAt(0),Ba.Arabic(r)||Ba["Arabic Supplement"](r)||Ba["Arabic Extended-A"](r)||Ba["Arabic Presentation Forms-A"](r)||Ba["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(S)?E:0,T=s.get("text-anchor").evaluate(o,{},a),C=s.get("text-variable-anchor");if(!C){var A=s.get("text-radial-offset").evaluate(o,{},a);w=A?Xr(T,[A*il,Al]):s.get("text-offset").evaluate(o,{},a).map(function(t){return t*il})}var P=v?"center":s.get("text-justify").evaluate(o,{},a),k=s.get("symbol-placement"),I="point"===k?s.get("text-max-width").evaluate(o,{},a)*il:0,O=function(){t.allowVerticalPlacement&&Me(S)&&(p.vertical=br(_,e,n,i,u,I,d,T,"left",M,w,vl.vertical,!0,k,h,c))};if(!v&&C){for(var j="auto"===P?C.map(function(t){return Wr(t)}):[P],L=!1,D=0;D<j.length;D++){var R=j[D];if(!p.horizontal[R])if(L)p.horizontal[R]=p.horizontal[0];else{var B=br(_,e,n,i,u,I,d,"center",R,M,w,vl.horizontal,!1,k,h,c);B&&(p.horizontal[R]=B,L=1===B.positionedLines.length)}}O()}else{"auto"===P&&(P=Wr(T));var z=br(_,e,n,i,u,I,d,T,P,M,w,vl.horizontal,!1,k,h,c);z&&(p.horizontal[P]=z),O(),Me(S)&&v&&m&&(p.vertical=br(_,e,n,i,u,I,d,T,P,M,w,vl.vertical,!1,k,h,c))}}var F=void 0,N=!1;if(o.icon&&o.icon.name){var U=r[o.icon.name];U&&(F=function(t,e,n){var r=Tr(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}}(i[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),N=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&g("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),U.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}var V=Kr(p.horizontal)||p.vertical;t.iconsInText=!!V&&V.iconsInText,(V||F)&&function(t,e,n,r,i,o,a,s,u,l,c){var h=o.textMaxSize.evaluate(e,{});void 0===h&&(h=a);var f,p=t.layers[0].layout,d=p.get("icon-offset").evaluate(e,{},c),v=Kr(n.horizontal),m=a/24,y=t.tilePixelRatio*m,_=t.tilePixelRatio*h/24,b=t.tilePixelRatio*s,x=t.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*t.tilePixelRatio,S=p.get("icon-padding")*t.tilePixelRatio,E=p.get("text-max-angle")/180*Math.PI,M="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),T="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),C=p.get("symbol-placement"),A=x/2,P=p.get("icon-text-fit");r&&"none"!==P&&(t.allowVerticalPlacement&&n.vertical&&(f=Ar(r,n.vertical,P,p.get("icon-text-fit-padding"),d,m)),v&&(r=Ar(r,v,P,p.get("icon-text-fit-padding"),d,m)));var k=function(a,s){s.x<0||s.x>=zo||s.y<0||s.y>=zo||function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,m,y,_,b,x,w,S,E){var M,T,C,A,P,k=t.addToLineVertexArray(e,n),I=0,O=0,j=0,L=0,D=-1,R=-1,B={},z=Xs(""),F=0,N=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(F=(M=s.layout.get("text-offset").evaluate(x,{},E).map(function(t){return t*il}))[0],N=M[1]):(F=s.layout.get("text-radial-offset").evaluate(x,{},E)*il,N=Al),t.allowVerticalPlacement&&r.vertical){var U=s.layout.get("text-rotate").evaluate(x,{},E)+90;A=new Ml(u,n,e,l,c,h,r.vertical,f,p,d,t.overscaling,U),a&&(P=new Ml(u,n,e,l,c,h,a,m,y,d,t.overscaling,U))}if(i){var V=s.layout.get("icon-rotate").evaluate(x,{}),G="none"!==s.layout.get("icon-text-fit"),q=zr(i,V,S,G),H=a?zr(a,V,S,G):void 0;C=new Ml(u,n,e,l,c,h,i,m,y,!1,t.overscaling,V),I=4*q.length;var Y=t.iconSizeData,X=null;"source"===Y.kind?(X=[wl*s.layout.get("icon-size").evaluate(x,{})])[0]>kl&&g(t.layerIds[0]+': Value for "icon-size" is >= '+Pl+'. Reduce your "icon-size".'):"composite"===Y.kind&&((X=[wl*w.compositeIconSizes[0].evaluate(x,{},E),wl*w.compositeIconSizes[1].evaluate(x,{},E)])[0]>kl||X[1]>kl)&&g(t.layerIds[0]+': Value for "icon-size" is >= '+Pl+'. Reduce your "icon-size".'),t.addSymbols(t.icon,q,X,b,_,x,!1,e,k.lineStartIndex,k.lineLength,-1,E),D=t.icon.placedSymbolArray.length-1,H&&(O=4*H.length,t.addSymbols(t.icon,H,X,b,_,x,vl.vertical,e,k.lineStartIndex,k.lineLength,-1,E),R=t.icon.placedSymbolArray.length-1)}for(var W in r.horizontal){var Z=r.horizontal[W];if(!T){z=Xs(Z.text);var K=s.layout.get("text-rotate").evaluate(x,{},E);T=new Ml(u,n,e,l,c,h,Z,f,p,d,t.overscaling,K)}var J=1===Z.positionedLines.length;if(j+=Zr(t,e,Z,o,s,d,x,v,k,r.vertical?vl.horizontal:vl.horizontalOnly,J?Object.keys(r.horizontal):[W],B,D,w,E),J)break}r.vertical&&(L+=Zr(t,e,r.vertical,o,s,d,x,v,k,vl.vertical,["vertical"],B,R,w,E));var Q=T?T.boxStartIndex:t.collisionBoxArray.length,$=T?T.boxEndIndex:t.collisionBoxArray.length,tt=A?A.boxStartIndex:t.collisionBoxArray.length,et=A?A.boxEndIndex:t.collisionBoxArray.length,nt=C?C.boxStartIndex:t.collisionBoxArray.length,rt=C?C.boxEndIndex:t.collisionBoxArray.length,it=P?P.boxStartIndex:t.collisionBoxArray.length,ot=P?P.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=Dl.MAX_GLYPHS&&g("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,x.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical||-1,D,R,z,Q,$,tt,et,nt,rt,it,ot,l,j,L,I,O,0,f,F,N)}(t,s,a,n,r,i,f,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,w,M,u,b,S,T,d,e,o,l,c)};if("line"===C)for(var I=0,O=function(t,e,n,r,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],u=void 0,l=0;l<s.length-1;l++){var c=s[l],h=s[l+1];c.x<0&&h.x<0||(c.x<0?c=new si(0,c.y+(0-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<0&&(h=new si(0,c.y+(0-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<0&&h.y<0||(c.y<0?c=new si(c.x+(0-c.y)/(h.y-c.y)*(h.x-c.x),0)._round():h.y<0&&(h=new si(c.x+(0-c.y)/(h.y-c.y)*(h.x-c.x),0)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new si(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new si(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new si(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new si(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),u&&c.equals(u[u.length-1])||o.push(u=[c]),u.push(h)))))}return o}(e.geometry,0,0,zo,zo);I<O.length;I+=1)for(var j=O[I],L=0,D=Br(j,x,E,n.vertical||v,r,24,_,t.overscaling,zo);L<D.length;L+=1){var R=D[L];v&&Jr(t,v.text,A,R)||k(j,R)}else if("line-center"===C)for(var B=0,z=e.geometry;B<z.length;B+=1){var F=z[B];if(F.length>1){var N=Rr(F,E,n.vertical||v,r,24,_);N&&k(F,N)}}else if("Polygon"===e.type)for(var U=0,V=zn(e.geometry,0);U<V.length;U+=1){var G=V[U],q=qr(G,16);k(G[0],new xl(q.x,q.y,0))}else if("LineString"===e.type)for(var H=0,Y=e.geometry;H<Y.length;H+=1){var X=Y[H];k(X,new xl(X[0].x,X[0].y,0))}else if("Point"===e.type)for(var W=0,Z=e.geometry;W<Z.length;W+=1)for(var K=0,J=Z[W];K<J.length;K+=1){var Q=J[K];k([Q],new xl(Q.x,Q.y,0))}}(t,o,p,F,r,l,h,f,w,N,a)},b=0,x=t.features;b<x.length;b+=1)_();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=Ha,t.polygonIntersectsPolygon=Ve,t.postMapLoadEvent=Ri,t.postTurnstileEvent=Li,t.potpack=_r,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=be,t.registerForPluginStateChange=function(t){return t({pluginStatus:Fa,pluginURL:Na}),Va.on("pluginStateChange",t),t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){zi=t,Fi=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===Fa||"loading"===Fa||"loaded"===Fa)throw new Error("setRTLTextPlugin cannot be called multiple times.");Na=_i.resolveURL(t),Fa="deferred",za=e,Ie(),n||qa()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=to,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=Sl,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=nn,t.translate=function(t,e,n){var r,i,o,a,s,u,l,c,h,f,p,d,v=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*v+s*g+h*m+e[12],t[13]=i*v+u*g+f*m+e[13],t[14]=o*v+l*g+p*m+e[14],t[15]=a*v+c*g+d*m+e[15]),t},t.triggerPluginCompletionEvent=Ua,t.uniqueId=u,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Ca,t.validateStyle=Ta,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=Bu,t.version="1.9.1",t.warnOnce=g,t.webpSupported=xi,t.window=self,t.wrap=a}),t(["./shared"],function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}function r(e,n,r){for(var i=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(i,r)}function i(e,n){var r=t.getArrayBuffer(e.request,function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),n()}}function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(a(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(a(t[n]))}return e}function a(t){var e,n,r,i,o,a,u=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(r=l-2,i=l-1,o=0):a===l-1?(r=l-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],u+=(s(t[o][0])-s(e[0]))*Math.sin(s(n[1]));u=u*ft.RADIUS*ft.RADIUS/2}return u}function s(t){return t*Math.PI/180}function u(t,e){return function(n){return t(n,e)}}function l(t,e){t[0]=c(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=c(t[n],!e);return t}function c(t,e){return function(t){return pt.ring(t)>=0}(t)===e?t:t.reverse()}function h(t,e){this.options=e||{},this.features=t,this.length=t.length}function f(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function p(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,d,t.layers[n])}(e,n),n.finish()}function d(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,v,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,b,o[n])}function v(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,g,t),e.writeVarintField(3,n.type),e.writeMessage(4,_,n)}function g(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=a[h];void 0===f&&(i.push(l),a[h]=f=i.length-1),e.writeVarint(f)}}function m(t,e){return(e<<3)+(7&t)}function y(t){return t<<1^t>>31}function _(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(m(1,l));for(var c=3===r?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(m(2,c-1));var f=u[h].x-i,p=u[h].y-o;e.writeVarint(y(f)),e.writeVarint(y(p)),i+=f,o+=p}3===r&&e.writeVarint(m(7,1))}}function b(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function x(t,e,n,r){w(t,n,r),w(e,2*n,2*r),w(e,2*n+1,2*r+1)}function w(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function S(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function E(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function M(t,e){var n=t.geometry.coordinates,r=n[1];return{x:A(n[0]),y:P(r),zoom:1/0,index:e,parentId:-1}}function T(t){return{type:"Feature",id:t.id,properties:C(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function C(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return k(k({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function A(t){return t/360+.5}function P(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function k(t,e){for(var n in e)t[n]=e[n];return t}function I(t){return t.x}function O(t){return t.y}function j(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function L(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)D(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)D(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)D(t,e[r][i])}(i),i}function D(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function R(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)B(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)B(i[l],s);else if("LineString"===o)z(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)z(i[l],s=[],a,!1),t.push(L(u,"LineString",s,e.properties));return}F(i,s,a,!1)}else if("Polygon"===o)F(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)R(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];F(i[l],c,a,!0),s.push(c)}}t.push(L(u,o,s,e.properties))}}function B(t,e){e.push(N(t[0])),e.push(U(t[1])),e.push(0)}function z(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=N(t[s][0]),l=U(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=e[n],c=e[n+1],h=e[r],f=e[r+1],p=n+3;p<r;p+=3){var d=j(e[p],e[p+1],l,c,h,f);if(d>a)o=p,a=d;else if(d===a){var v=Math.abs(p-s);v<u&&(o=p,u=v)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function F(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];z(t[i],o,n,r),e.push(o)}}function N(t){return t/360+.5}function U(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function V(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],h=c.geometry,f=c.type,p=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(p>=n&&d<r)u.push(c);else if(!(d<n||p>=r)){var v=[];if("Point"===f||"MultiPoint"===f)G(h,v,n,r,i);else if("LineString"===f)q(h,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)Y(h,v,n,r,i,!1);else if("Polygon"===f)Y(h,v,n,r,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var m=[];Y(h[g],m,n,r,i,!0),m.length&&v.push(m)}if(v.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<v.length;g++)u.push(L(c.id,f,v[g],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===v.length?(f="LineString",v=v[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===v.length?"Point":"MultiPoint"),u.push(L(c.id,f,v,c.tags))}}}return u.length?u:null}function G(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function q(t,e,n,r,i,o,a){for(var s,u,l=H(t),c=0===i?W:Z,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],v=t[f+2],g=t[f+3],m=t[f+4],y=0===i?p:d,_=0===i?g:m,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-m,2))),y<n?_>n&&(u=c(l,p,d,g,m,n),a&&(l.start=h+s*u)):y>r?_<r&&(u=c(l,p,d,g,m,r),a&&(l.start=h+s*u)):X(l,p,d,v),_<n&&y>=n&&(u=c(l,p,d,g,m,n),b=!0),_>r&&y<=r&&(u=c(l,p,d,g,m,r),b=!0),!o&&b&&(a&&(l.end=h+s*u),e.push(l),l=H(t)),a&&(h+=s)}var x=t.length-3;p=t[x],d=t[x+1],v=t[x+2],(y=0===i?p:d)>=n&&y<=r&&X(l,p,d,v),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&X(l,l[0],l[1],l[2]),l.length&&e.push(l)}function H(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Y(t,e,n,r,i,o){for(var a=0;a<t.length;a++)q(t[a],e,n,r,i,o,!1)}function X(t,e,n,r){t.push(e),t.push(n),t.push(r)}function W(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function Z(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function K(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=J(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(J(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(J(o.geometry[s][l],e));i.push(u)}n.push(L(o.id,a,i,o.tags))}return n}function J(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function Q(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push($(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var h=[];for(i=0;i<l[r].length;i+=2)h.push($(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(h)}}return t.transformed=!0,t}function $(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function tt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,et(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,h=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function et(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)nt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)nt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)nt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(f.id=e.id),t.features.push(f)}}function nt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function rt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)R(n,t.features[r],e,r);else R(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=V(t,1,-1-n,n,0,-1,2,e),o=V(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=V(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=K(i,1).concat(r)),o&&(r=r.concat(K(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function it(t,e,n){return 32*((1<<t)*n+e)+t}function ot(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new gt(r.features),o=_t(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}var at=function(t){this.keyCache={},t&&this.replace(t)};at.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},at.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,c=r;l<c.length;l+=1){var h=c[l];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var f=0,p=function(t,e){for(var r={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[i])}var s=[];for(var u in r)s.push(r[u]);return s}(t.values(this._layerConfigs),this.keyCache);f<p.length;f+=1){var d=p[f].map(function(t){return i._layers[t.id]}),v=d[0];if("none"!==v.visibility){var g=v.source||"",m=this.familiesBySource[g];m||(m=this.familiesBySource[g]={});var y=v.sourceLayer||"_geojsonTileLayer",_=m[y];_||(_=m[y]=[]),_.push(d)}}};var st=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=t.potpack(r),h=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var f in e){var p=e[f];for(var d in p){var v=p[+d];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var g=n[f][d].rect;t.AlphaImage.copy(v.bitmap,h,{x:0,y:0},{x:g.x+1,y:g.y+1},v.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",st);var ut=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};ut.prototype.parse=function(e,n,i,o,a){function s(){if(h)return a(h);if(f&&p&&d){var e=new st(f),n=new t.ImageAtlas(p,d);for(var o in v){var s=v[o];s instanceof t.SymbolBucket?(r(s.layers,this.zoom,i),t.performSymbolLayout(s,f,e.positions,p,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):s.hasPattern&&(s instanceof t.LineBucket||s instanceof t.FillBucket||s instanceof t.FillExtrusionBucket)&&(r(s.layers,this.zoom,i),s.addFeatures(g,this.tileID.canonical,n.patternPositions))}this.status="done",a(null,{buckets:t.values(v).filter(function(t){return!t.isEmpty()}),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}var u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var h,f,p,d,v={},g={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},m=n.familiesBySource[this.source];for(var y in m){var _=e.layers[y];if(_){1===_.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=l.encode(y),x=[],w=0;w<_.length;w++){var S=_.feature(w),E=c.getId(S,y);x.push({feature:S,id:E,index:w,sourceLayerIndex:b})}for(var M=0,T=m[y];M<T.length;M+=1){var C=T[M],A=C[0];A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(r(C,this.zoom,i),(v[A.id]=A.createBucket({index:c.bucketLayerIDs.length,layers:C,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,g,this.tileID.canonical),c.bucketLayerIDs.push(C.map(function(t){return t.id})))}}}var P=t.mapObject(g.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(P).length?o.send("getGlyphs",{uid:this.uid,stacks:P},function(t,e){h||(h=t,f=e,s.call(u))}):f={};var k=Object.keys(g.iconDependencies);k.length?o.send("getImages",{icons:k,source:this.source,tileID:this.tileID,type:"icons"},function(t,e){h||(h=t,p=e,s.call(u))}):p={};var I=Object.keys(g.patternDependencies);I.length?o.send("getImages",{icons:I,source:this.source,tileID:this.tileID,type:"patterns"},function(t,e){h||(h=t,d=e,s.call(u))}):d={},s.call(this)};var lt=function(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||i,this.loading={},this.loaded={}};lt.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),a=this.loading[i]=new ut(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,n(e);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var h=o.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.availableImages,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},lt.prototype.reloadTile=function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},lt.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},lt.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var ct=t.window.ImageBitmap,ht=function(){this.loaded={}};ht.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=ct&&o instanceof ct?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)},ht.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},ht.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var ft={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},pt={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=o(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:a},dt=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,vt=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};vt.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point$1(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var h=c[l];u.push(new t.Point$1(h[0],h[1]))}o.push(u)}return o},vt.prototype.toGeoJSON=function(t,e,n){return dt.call(this,t,e,n)};var gt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};gt.prototype.feature=function(t){return new vt(this._features[t])};var mt=t.vectorTile.VectorTileFeature,yt=h;h.prototype.feature=function(t){return new f(this.features[t],this.options.extent)},f.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},f.prototype.toGeoJSON=mt.prototype.toGeoJSON;var _t=p,bt=yt;_t.fromVectorTileJs=p,_t.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new yt(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return p({layers:n})},_t.GeoJSONWrapper=bt;var xt=function(t){return t[0]},wt=function(t){return t[1]},St=function(t,e,n,r,i){void 0===e&&(e=xt),void 0===n&&(n=wt),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+h)),Math.min(o,Math.floor(r+(s-u)*c/s+h)),a)}var f=n[2*r+a],p=i,d=o;for(x(e,n,i,r),n[2*o+a]>f&&x(e,n,i,o);p<d;){for(x(e,n,p,d),p++,d--;n[2*p+a]<f;)p++;for(;n[2*d+a]>f;)d--}n[2*i+a]===f?x(e,n,i,d):x(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};St.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),f=l.pop(),p=l.pop();if(f-p<=a)for(var d=p;d<=f;d++)u=e[2*d+1],(s=e[2*d])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var v=Math.floor((p+f)/2);u=e[2*v+1],(s=e[2*v])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[v]);var g=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(p),l.push(v-1),l.push(g)),(0===h?i>=s:o>=u)&&(l.push(v+1),l.push(f),l.push(g))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},St.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var f=h;f<=c;f++)S(e[2*f],e[2*f+1],n,r)<=u&&s.push(t[f]);else{var p=Math.floor((h+c)/2),d=e[2*p],v=e[2*p+1];S(d,v,n,r)<=u&&s.push(t[p]);var g=(l+1)%2;(0===l?n-i<=d:r-i<=v)&&(a.push(h),a.push(p-1),a.push(g)),(0===l?n+i>=d:r+i>=v)&&(a.push(p+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var Et={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},Mt=function(t){this.options=k(Object.create(Et),t),this.trees=new Array(this.options.maxZoom+1)};Mt.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(M(t[u],u));this.trees[i+1]=new St(s,I,O,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new St(s,I,O,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},Mt.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=[],c=0,h=u.range(A(n),P(o),A(i),P(r));c<h.length;c+=1){var f=u.points[h[c]];l.push(f.numPoints?T(f):this.points[f.index])}return l},Mt.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=i.within(o.x,o.y,a);u<l.length;u+=1){var c=i.points[l[u]];c.parentId===t&&s.push(c.numPoints?T(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},Mt.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},Mt.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},Mt.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},Mt.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},Mt.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:l?C(u):this.points[u.index].properties},h=void 0;l?h=u.id:this.options.generateId?h=u.index:this.points[u.index].id&&(h=this.points[u.index].id),void 0!==h&&(c.id=h),o.features.push(c)}},Mt.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},Mt.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.radius/(r.extent*Math.pow(2,e)),a=0;a<t.length;a++){var s=t[a];if(!(s.zoom<=e)){s.zoom=e;for(var u=this.trees[e+1],l=u.within(s.x,s.y,o),c=s.numPoints||1,h=s.x*c,f=s.y*c,p=i&&c>1?this._map(s,!0):null,d=(a<<5)+(e+1)+this.points.length,v=0,g=l;v<g.length;v+=1){var m=u.points[g[v]];if(!(m.zoom<=e)){m.zoom=e;var y=m.numPoints||1;h+=m.x*y,f+=m.y*y,c+=y,m.parentId=d,i&&(p||(p=this._map(s,!0)),i(p,this._map(m)))}}1===c?n.push(s):(s.parentId=d,n.push(E(h/c,f/c,d,c,p)))}}return n},Mt.prototype._getOriginId=function(t){return t-this.points.length>>5},Mt.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},Mt.prototype._map=function(t,e){if(t.numPoints)return e?k({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?k({},r):r},rt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=it(e,n,r),f=this.tiles[h];if(!f&&(l>1&&console.time("creation"),f=this.tiles[h]=tt(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==t.length){l>1&&console.time("clipping");var v,g,m,y,_,b,x=.5*u.buffer/u.extent,w=.5-x,S=.5+x,E=1+x;v=g=m=y=null,_=V(t,c,n-x,n+S,0,f.minX,f.maxX,u),b=V(t,c,n+w,n+E,0,f.minX,f.maxX,u),t=null,_&&(v=V(_,c,r-x,r+S,1,f.minY,f.maxY,u),g=V(_,c,r+w,r+E,1,f.minY,f.maxY,u),_=null),b&&(m=V(b,c,r-x,r+S,1,f.minY,f.maxY,u),y=V(b,c,r+w,r+E,1,f.minY,f.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(v||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(m||[],e+1,2*n+1,2*r),s.push(y||[],e+1,2*n+1,2*r+1)}}},rt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=it(t,e=(e%a+a)%a,n);if(this.tiles[s])return Q(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[it(l,c,h)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,h),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?Q(this.tiles[s],i):null):null};var Tt=function(e){function n(t,n,r,i){e.call(this,t,n,r,ot),i&&(this.loadGeoJSON=i)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(u(t,n)),e;case"GeometryCollection":return e.geometries=e.geometries.map(u(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=l(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(u(l,e))),t}(e,n);default:return e}}(a,!0);try{e._geoJSONIndex=r.cluster?new Mt(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l+=1){var h=c[l],f=r[h],p=f[0],d=t.createExpression(f[1]),v=t.createExpression("string"==typeof p?[p,["accumulated"],["get",h]]:p);i[h]=d.value,o[h]=v.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=u;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(r)).load(a.features):function(t,e){return new rt(t,e)}(a,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var s={};if(i){var c=i.finish();c&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(c)))}n(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(lt),Ct=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:lt,geojson:Tt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Ct.prototype.setReferrer=function(t,e){this.referrer=e},Ct.prototype.setImages=function(t,e,n){this.availableImages[t]=e,n()},Ct.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Ct.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Ct.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Ct.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Ct.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Ct.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Ct.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Ct.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Ct.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Ct.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Ct.prototype.syncRTLPluginState=function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i),o)}}catch(t){r(t.toString())}},Ct.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Ct.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new at),e},Ct.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},Ct.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new ht),this.demWorkerSources[t][e]},Ct.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&void 0!==t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new Ct(t.window)),Ct}),t(["./shared"],function(t){function e(t){if(!gt)return t[0];for(var e=0;e<t.length;e++)if(t[e]in gt)return t[e];return t[0]}function n(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}function r(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(t,e,n,r,i,a,s){for(var u=0;u<e;u++){for(var l=0;l<n;l++)r[l]=t[l*e+u];for(o(r,i,a,s,n),l=0;l<n;l++)t[l*e+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<e;u++)r[u]=t[l*e+u];for(o(r,i,a,s,e),u=0;u<e;u++)t[l*e+u]=Math.sqrt(i[u])}}function o(t,e,n,r,i){n[0]=0,r[0]=-Mt,r[1]=+Mt;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)s=(t[o]+o*o-(t[n[--a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+Mt}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}function a(e,n,r){var i=function(i,o){if(i)return r(i);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(t){return t.id})),a.tiles=n.canonicalizeTileset(a,e.url),r(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}function s(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function u(t,e,n,r,i,o){var a=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),u=o.maxPitchScaleFactor(),c=t.tilesIn(r,u,a);c.sort(l);for(var h=[],f=0,p=c;f<p.length;f+=1){var d=p[f];h.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(e,n,t._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,i,o,u,s(t.transform,d.tileID))})}var v=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],h=u[l]=u[l]||{},f=e[l]=e[l]||[],p=0,d=c;p<d.length;p+=1){var v=d[p];h[v.featureIndex]||(h[v.featureIndex]=!0,f.push(v))}}return e}(h);for(var g in v)v[g].forEach(function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return v}function l(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function c(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function h(t){return"raster"===t||"image"===t||"video"===t}function f(){return new t.window.Worker(gi.workerUrl)}function p(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(t){t in n&&(r[t]=n[t])}),r}function d(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=p(t[r],e[t[r].ref]));return t}function v(t,e,n){n.push({command:ze.addSource,args:[t,e[t]]})}function g(t,e,n){e.push({command:ze.removeSource,args:[t]}),n[t]=!0}function m(t,e,n,r){g(t,n,r),v(t,e,n)}function y(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;return!0}function _(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function b(t){return t.id}function x(t,e){return t[e.id]=e,t}function w(e,n,r,i,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function S(e,n,r,i,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function E(e,n){var r=[e.x,e.y,0,1];j(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function M(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function T(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom),h=[256/r.width*2+1,256/r.height*2+1],f=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();for(var p=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=r.transform.width/r.transform.height,g=!1,m=0;m<d.length;m++){var y=d.get(m);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!g)O(y.numGlyphs,f);else{g=!1;var _=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(_,_,n),M(_,h)){var b=.5+_[3]/r.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(l,c,y),w=s?x*b:x/b,S=new t.Point(y.anchorX,y.anchorY),T=E(S,o).point,C={},A=P(y,w,!1,u,n,o,a,e.glyphOffsetArray,p,f,T,S,C,v);g=A.useVertical,(A.notEnoughRoom||g||A.needsFlipping&&P(y,w,!0,u,n,o,a,e.glyphOffsetArray,p,f,T,S,C,v).notEnoughRoom)&&O(y.numGlyphs,f)}else O(y.numGlyphs,f)}}i?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function C(t,e,n,r,i,o,a,s,u,l,c,h){var f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,v=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(f-1),m=I(t*v,n,r,i,o,a,s.segment,p,d,u,l,c,h);if(!m)return null;var y=I(t*g,n,r,i,o,a,s.segment,p,d,u,l,c,h);return y?{first:m,last:y}:null}function A(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function P(e,n,r,i,o,a,s,u,l,c,h,f,p,d){var v,g=n/24,m=e.lineOffsetX*g,y=e.lineOffsetY*g;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=C(g,u,m,y,r,h,f,e,l,a,p,!1);if(!w)return{notEnoughRoom:!0};var S=E(w.first.point,s).point,M=E(w.last.point,s).point;if(i&&!r){var T=A(e.writingMode,S,M,d);if(T)return T}v=[w.first];for(var P=e.glyphStartIndex+1;P<_-1;P++)v.push(I(g*u.getoffsetX(P),m,y,r,h,f,e.segment,b,x,l,a,p,!1));v.push(w.last)}else{if(i&&!r){var O=E(f,o).point,j=e.lineStartIndex+e.segment+1,L=new t.Point(l.getx(j),l.gety(j)),D=E(L,o),R=D.signedDistanceFromCamera>0?D.point:k(f,L,O,1,o),B=A(e.writingMode,O,R,d);if(B)return B}var z=I(g*u.getoffsetX(e.glyphStartIndex),m,y,r,h,f,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,p,!1);if(!z)return{notEnoughRoom:!0};v=[z]}for(var F=0,N=v;F<N.length;F+=1){var U=N[F];t.addDynamicAttributes(c,U.point,U.angle)}return{}}function k(t,e,n,r,i){var o=E(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function I(e,n,r,i,o,a,s,u,l,c,h,f,p){var d=i?e-n:e+n,v=d>0?1:-1,g=0;i&&(v*=-1,g=Math.PI),v<0&&(g+=Math.PI);for(var m=v>0?u+s:u+s+1,y=m,_=o,b=o,x=0,w=0,S=Math.abs(d);x+w<=S;){if((m+=v)<u||m>=l)return null;if(b=_,void 0===(_=f[m])){var M=new t.Point(c.getx(m),c.gety(m)),T=E(M,h);if(T.signedDistanceFromCamera>0)_=f[m]=T.point;else{var C=m-v;_=k(0===x?a:new t.Point(c.getx(C),c.gety(C)),M,b,S-x+1,h)}}x+=w,w=b.dist(_)}var A=(S-x)/w,P=_.sub(b),I=P.mult(A)._add(b);return I._add(P._unit()._perp()._mult(r*v)),{point:I,angle:g+Math.atan2(_.y-b.y,_.x-b.x),tileDistance:p?{prevTileDistance:m-v===y?0:c.gettileUnitDistanceFromAnchor(m-v),lastSegmentViewportDistance:S-x}:null}}function O(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(Ne,3*r)}}function j(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}function L(t,e,n){t[e+4]=n?1:0}function D(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}function R(e,n,r,i,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,l=t.evaluateVariableOffset(e,i);return new t.Point(s+l[0]*o,u+l[1]*o)}function B(e,n,r,i,o,a){var s=e.x1,u=e.x2,l=e.y1,c=e.y2,h=e.anchorPointX,f=e.anchorPointY,p=new t.Point(n,r);return i&&p._rotate(o?a:-a),{x1:s+p.x,y1:l+p.y,x2:u+p.x,y2:c+p.y,anchorPointX:h,anchorPointY:f}}function z(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}function F(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*We+e*Ze+n*Ke+e*Je+n*Qe+e*$e+n*tn+e}function N(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:t=t.replace(n,function(t,e,n,i,o){return r[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:e=e.replace(n,function(t,e,n,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return r[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}}function U(t,e,n){var r=1/D(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}function V(t,e){return 1/D(t,1,e.tileZoom)}function G(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function q(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function H(t,e,n,r,i,o,a,s){for(var u=t.context,l=u.gl,c=t.useProgram(i?"collisionCircle":"collisionBox"),h=0;h<r.length;h++){var f=r[h],p=e.getTile(f),d=p.getBucket(n);if(d){var v=i?s?d.textCollisionCircle:d.iconCollisionCircle:s?d.textCollisionBox:d.iconCollisionBox;if(v){var g=f.posMatrix;0===o[0]&&0===o[1]||(g=t.translatePosMatrix(f.posMatrix,p,o,a)),c.draw(u,i?l.TRIANGLES:l.LINES,Pe.disabled,ke.disabled,t.colorModeForRenderPass(),Oe.disabled,$n(g,t.transform,p),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,t.transform.zoom,null,null,v.collisionVertexBuffer)}}}}function Y(t,e,n,r,i,o,a){H(t,e,n,r,!1,i,o,a),H(t,e,n,r,!0,i,o,a)}function X(e,n,r,i,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.Point((u/o+c[0])*a,(l/o+c[1])*a)}function W(e,n,r,i,o,a,s,u,l,c,h){var f=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,v={};p.clear();for(var g=0;g<f.length;g++){var m=f.get(g),y=m.hidden||!m.crossTileID||e.allowVerticalPlacement&&!m.placedOrientation?null:i[m.crossTileID];if(y){var _=new t.Point(m.anchorX,m.anchorY),b=E(_,r?u:s),x=.5+a.cameraToCenterDistance/b.signedDistanceFromCamera*.5,w=o.evaluateSizeForFeature(e.textSizeData,c,m)*x/t.ONE_EM;r&&(w*=e.tilePixelRatio/l);for(var S=X(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),M=r?E(_.add(S),s).point:b.point.add(n?S.rotate(-a.angle):S),T=e.allowVerticalPlacement&&m.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,C=0;C<m.numGlyphs;C++)t.addDynamicAttributes(p,M,T);h&&m.associatedIconIndex>=0&&(v[m.associatedIconIndex]={shiftedAnchor:M,angle:T})}else O(m.numGlyphs,p)}if(h){d.clear();for(var A=e.icon.placedSymbolArray,P=0;P<A.length;P++){var k=A.get(P);if(k.hidden)O(k.numGlyphs,d);else{var I=v[P];if(I)for(var j=0;j<k.numGlyphs;j++)t.addDynamicAttributes(d,I.shiftedAnchor,I.angle);else O(k.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function Z(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function K(e,n,r,i,o,a,s,u,l,c,h,f){for(var p=e.context,d=p.gl,v=e.transform,g="map"===u,m="map"===l,y=g&&"point"!==r.layout.get("symbol-placement"),_=g&&!m&&!y,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=e.depthModeForSublayer(0,Pe.ReadOnly),E=r.layout.get("text-variable-anchor"),M=[],C=0,A=i;C<A.length;C+=1){var P=A[C],k=n.getTile(P),I=k.getBucket(r);if(I){var O=o?I.text:I.icon;if(O&&O.segments.get().length){var j=O.programConfigurations.get(r.id),L=o||I.sdfIcons,R=o?I.textSizeData:I.iconSizeData,B=m||0!==v.pitch,z=e.useProgram(Z(L,o,I),j),F=t.evaluateSizeForZoom(R,v.zoom),N=void 0,U=[0,0],V=void 0,G=void 0,q=null,H=void 0;if(o)V=k.glyphAtlasTexture,G=d.LINEAR,N=k.glyphAtlasTexture.size,I.iconsInText&&(U=k.imageAtlasTexture.size,q=k.imageAtlasTexture,H=B||e.options.rotating||e.options.zooming||"composite"===R.kind||"camera"===R.kind?d.LINEAR:d.NEAREST);else{var Y=1!==r.layout.get("icon-size").constantOr(0)||I.iconsNeedLinear;V=k.imageAtlasTexture,G=L||e.options.rotating||e.options.zooming||Y||B?d.LINEAR:d.NEAREST,N=k.imageAtlasTexture.size}var X=D(k,1,e.transform.zoom),W=w(P.posMatrix,m,g,e.transform,X),K=S(P.posMatrix,m,g,e.transform,X),Q=E&&I.hasTextData(),$="none"!==r.layout.get("icon-text-fit")&&Q&&I.hasIconData();y&&T(I,P.posMatrix,e,o,W,K,m,c);var tt=e.translatePosMatrix(P.posMatrix,k,a,s),et=y||o&&E||$?gr:W,nt=e.translatePosMatrix(K,k,a,s,!0),rt=L&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),it={program:z,buffers:O,uniformValues:L?I.iconsInText?fr(R.kind,F,_,m,e,tt,et,nt,N,U):hr(R.kind,F,_,m,e,tt,et,nt,o,N,!0):cr(R.kind,F,_,m,e,tt,et,nt,o,N),atlasTexture:V,atlasTextureIcon:q,atlasInterpolation:G,atlasInterpolationIcon:H,isSDF:L,hasHalo:rt};if(b)for(var ot=0,at=O.segments.get();ot<at.length;ot+=1){var st=at[ot];M.push({segments:new t.SegmentVector([st]),sortKey:st.sortKey,state:it})}else M.push({segments:O.segments,sortKey:0,state:it})}}}b&&M.sort(function(t,e){return t.sortKey-e.sortKey});for(var ut=0,lt=M;ut<lt.length;ut+=1){var ct=lt[ut],ht=ct.state;if(p.activeTexture.set(d.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,d.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),ht.isSDF){var ft=ht.uniformValues;ht.hasHalo&&(ft.u_is_halo=1,J(ht.buffers,ct.segments,r,e,ht.program,x,h,f,ft)),ft.u_is_halo=0}J(ht.buffers,ct.segments,r,e,ht.program,x,h,f,ht.uniformValues)}}function J(t,e,n,r,i,o,a,s,u){var l=r.context;i.draw(l,l.gl.TRIANGLES,o,a,s,Oe.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Q(t,e,n,r,i,o,a){var s,u,l,c,h,f=t.context.gl,p=n.paint.get("fill-pattern"),d=p&&p.constantOr(1),v=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(u=d?"fillPattern":"fill",s=f.TRIANGLES);for(var g=0,m=r;g<m.length;g+=1){var y=m[g],_=e.getTile(y);if(!d||_.patternsLoaded()){var b=_.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=t.useProgram(u,x);d&&(t.context.activeTexture.set(f.TEXTURE0),_.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),x.updatePaintBuffers(v));var S=p.constantOr(null);if(S&&_.imageAtlas){var E=_.imageAtlas,M=E.patternPositions[S.to.toString()],T=E.patternPositions[S.from.toString()];M&&T&&x.setConstantPatternPositions(M,T)}var C=t.translatePosMatrix(y.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,h=b.segments2;var A=[f.drawingBufferWidth,f.drawingBufferHeight];l="fillOutlinePattern"===u&&d?Kn(C,t,v,_,A):Zn(C,A)}else c=b.indexBuffer,h=b.segments,l=d?Wn(C,t,v,_):Xn(C);w.draw(t.context,s,i,t.stencilModeForClipping(y),o,Oe.disabled,l,n.id,b.layoutVertexBuffer,c,h,n.paint,t.transform.zoom,x)}}}}function $(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),h=n.getCrossfadeParameters(),f=n.paint.get("fill-extrusion-opacity"),p=0,d=r;p<d.length;p+=1){var v=d[p],g=e.getTile(v),m=g.getBucket(n);if(m){var y=m.programConfigurations.get(n.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(u.TEXTURE0),g.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePaintBuffers(h));var b=l.constantOr(null);if(b&&g.imageAtlas){var x=g.imageAtlas,w=x.patternPositions[b.to.toString()],S=x.patternPositions[b.from.toString()];w&&S&&y.setConstantPatternPositions(w,S)}var E=t.translatePosMatrix(v.posMatrix,g,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),M=n.paint.get("fill-extrusion-vertical-gradient"),T=c?Yn(E,t,M,f,v,h,g):Hn(E,t,M,f);_.draw(s,s.gl.TRIANGLES,i,o,a,Oe.backCCW,T,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,y)}}}function tt(t,e,n,r,i,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=rr(t,e,n);l.draw(a,s.TRIANGLES,r,i,o,Oe.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function et(e,n,r,i,o,a,s){var u=e.context,l=u.gl,c=n.dem;if(c&&c.data){var h=c.dim,f=c.stride,p=c.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(f),n.demTexture){var d=n.demTexture;d.update(p,{premultiply:!1}),d.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(u,p,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var v=n.fbo;if(!v){var g=new t.Texture(u,{width:h,height:h,data:null},l.RGBA);g.bind(l.LINEAR,l.CLAMP_TO_EDGE),(v=n.fbo=u.createFramebuffer(h,h,!0)).colorAttachment.set(g.texture)}u.bindFramebuffer.set(v.framebuffer),u.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,o,a,s,Oe.disabled,ir(n.tileID,c,i),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function nt(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),f=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=f&&e.refreshedUponExpiration?1:t.clamp(f?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}function rt(t,e,n,r){ot(t,0,e+n/2,t.transform.width,n,r)}function it(t,e,n,r){ot(t,e-n/2,0,n,t.transform.height,r)}function ot(e,n,r,i,o,a){var s=e.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function at(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=Pe.disabled,l=ke.disabled,c=e.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,u,l,c,Oe.disabled,tr(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=n.getTileByID(r.key).latestRawTileData,f=Math.floor((h&&h.byteLength||0)/1024),p=n.getTile(r).tileSize,d=512/Math.min(p,512)*(r.overscaledZ/e.transform.zoom)*.5,v=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(v+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,v+" "+f+"kb"),s.draw(i,o.TRIANGLES,u,l,Ie.alphaBlended,Oe.disabled,tr(a,t.Color.transparent,d),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}function st(t){return t*(2-t)}function ut(t){t.parentNode&&t.parentNode.removeChild(t)}function lt(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}function ct(t,e,n){var r=t.classList;for(var i in oi)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}function ht(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?ft(e,r,u/5280,t._getUIString("ScaleControl.Miles")):ft(e,r,u,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?ft(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?ft(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):ft(e,r,s,t._getUIString("ScaleControl.Meters"))}function ft(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+r}var pt,dt=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(r=t&&t.failIfMajorPerformanceCaveat,void 0===n[r]&&(n[r]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(r)),n[r]));var r}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),vt={create:function(e,n,r){var i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},gt=t.window.document.documentElement.style,mt=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);vt.disableDrag=function(){gt&&mt&&(pt=gt[mt],gt[mt]="none")},vt.enableDrag=function(){gt&&mt&&(gt[mt]=pt)};var yt=e(["transform","WebkitTransform"]);vt.setTransform=function(t,e){t.style[yt]=e};var _t=!1;try{var bt=Object.defineProperty({},"passive",{get:function(){_t=!0}});t.window.addEventListener("test",bt,bt),t.window.removeEventListener("test",bt,bt)}catch(t){_t=!1}vt.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&_t?r:r.capture)},vt.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&_t?r:r.capture)};var xt=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",xt,!0)};vt.suppressClick=function(){t.window.addEventListener("click",xt,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",xt,!0)},0)},vt.mousePos=function(e,n){var r=e.getBoundingClientRect(),i=t.window.TouchEvent&&n instanceof t.window.TouchEvent?n.touches[0]:n;return new t.Point(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop)},vt.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},vt.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},vt.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var wt=function(e){function r(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.isLoaded=function(){return this.loaded},r.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},r.prototype.getImage=function(t){return this.images[t]},r.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},r.prototype._validate=function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},r.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},r.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},r.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},r.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},r.prototype.listImages=function(){return Object.keys(this.images)},r.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},r.prototype._notify=function(e,n){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},r.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},r.prototype.getPattern=function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},r.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},r.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,h=this.images[s].data,f=h.width,p=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c},{width:f,height:p}),t.RGBAImage.copy(h,a,{x:0,y:p-1},{x:l,y:c-1},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c+p},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:f-1,y:0},{x:l-1,y:c},{width:1,height:p}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l+f,y:c},{width:1,height:p})}this.dirty=!0},r.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},r.prototype.dispatchRenderCallbacks=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var o=this.images[i];n(o)&&this.updateImage(i,o)}}},r}(t.Evented),St=r,Et=r,Mt=1e20;r.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=e.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?Mt:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?Mt:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},St.default=Et;var Tt=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};Tt.prototype.setURL=function(t){this.url=t},Tt.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a){if(a=r._tinySDF(o,n,i))return o.glyphs[i]=a,void e(null,{stack:n,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],Tt.loadGlyphRange(n,s,r.url,r.requestManager,function(t,e){if(e)for(var n in e)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);for(var i=0,a=u;i<a.length;i+=1)(0,a[i])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},Tt.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},Tt.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new Tt.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Tt.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},Tt.TinySDF=St;var Ct=function(){this.specification=t.styleSpec.light.position};Ct.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},Ct.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var At=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new Ct,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),Pt=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(At),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),kt=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};kt.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},kt.prototype.getDashRanges=function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r.push({left:i=s*n,right:o=(s+=l)*n,isDash:a=!a,zeroLength:0===l})}return r},kt.prototype.addRoundDash=function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),h=Math.min(l,c),f=void 0,p=i/n*(r+1);if(s.isDash){var d=r-Math.abs(p);f=Math.sqrt(h*h+d*d)}else f=r-Math.sqrt(h*h+p*p);this.data[o+u]=Math.max(0,Math.min(255,f+128))}},kt.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){l/u.right>1&&(u=t[++s]);var c=Math.abs(l-u.left),h=Math.abs(l-u.right),f=Math.min(c,h);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?f:-f)+128))}},kt.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(e,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var l={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,l},kt.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var It=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};It.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r=r||function(){})},It.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},It.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},It.Actor=t.Actor;var Ot=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};Ot.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Ot.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var jt=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=a(this._options,this.map._requestManager,function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Ot(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){function r(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",o,r.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",o,r.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Lt=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=a(this._options,this.map._requestManager,function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Ot(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Dt=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){function r(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(Lt),Rt=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties},r.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),e(t))})},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var r=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))})},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Bt=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),zt=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(i,o){r._loaded=!0,i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())})},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var l=Math.max(i-n,o-r),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+i)/2*h),Math.floor((r+o)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(t){return n.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Ft=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(zt),Nt=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(zt),Ut={vector:jt,raster:Lt,"raster-dem":Dt,geojson:Rt,video:Ft,image:zt,canvas:Nt},Vt=function(e,n,r,i){var o=new Ut[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o},Gt=function(t,e){this.max=t,this.onRemove=e,this.reset()};Gt.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},Gt.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Gt.prototype.has=function(t){return t.wrapped().key in this.data},Gt.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Gt.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Gt.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},Gt.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Gt.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},Gt.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},Gt.prototype.filter=function(t){var e=[];for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var o=i[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var qt=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};qt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},qt.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},qt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ht={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Yt=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Yt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Yt.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},Yt.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},Yt.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Ht[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},Yt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Xt=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Xt.prototype.get=function(){return this.current},Xt.prototype.set=function(t){},Xt.prototype.getDefault=function(){return this.default},Xt.prototype.setDefault=function(){this.set(this.default)};var Wt=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(Xt),Zt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(Xt),Kt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(Xt),Jt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Xt),Qt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(Xt),$t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(Xt),te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(Xt),ee=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(Xt),ne=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(Xt),re=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Xt),ie=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(Xt),oe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(Xt),ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(Xt),se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Xt),ue=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(Xt),le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(Xt),ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(Xt),he=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(Xt),fe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(Xt),pe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(Xt),de=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(Xt),ve=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Xt),ge=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(Xt),me=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Xt),ye=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(Xt),_e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(Xt),be=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(Xt),xe=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(Xt),we=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(Xt),Se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(Xt),Ee=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(Xt),Me=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(Xt),Te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(Me),Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Me),Ae=function(t,e,n,r){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Te(t,i),r&&(this.depthAttachment=new Ce(t,i))};Ae.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var Pe=function(t,e,n){this.func=t,this.mask=e,this.range=n};Pe.ReadOnly=!1,Pe.ReadWrite=!0,Pe.disabled=new Pe(519,Pe.ReadOnly,[0,1]);var ke=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};ke.disabled=new ke({func:519,mask:0},0,0,7680,7680,7680);var Ie=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Ie.Replace=[1,0],Ie.disabled=new Ie(Ie.Replace,t.Color.transparent,[!1,!1,!1,!1]),Ie.unblended=new Ie(Ie.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ie.alphaBlended=new Ie([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Oe=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Oe.disabled=new Oe(!1,1029,2305),Oe.backCCW=new Oe(!0,1029,2305);var je=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Wt(this),this.clearDepth=new Zt(this),this.clearStencil=new Kt(this),this.colorMask=new Jt(this),this.depthMask=new Qt(this),this.stencilMask=new $t(this),this.stencilFunc=new te(this),this.stencilOp=new ee(this),this.stencilTest=new ne(this),this.depthRange=new re(this),this.depthTest=new ie(this),this.depthFunc=new oe(this),this.blend=new ae(this),this.blendFunc=new se(this),this.blendColor=new ue(this),this.blendEquation=new le(this),this.cullFace=new ce(this),this.cullFaceSide=new he(this),this.frontFace=new fe(this),this.program=new pe(this),this.activeTexture=new de(this),this.viewport=new ve(this),this.bindFramebuffer=new ge(this),this.bindRenderbuffer=new me(this),this.bindTexture=new ye(this),this.bindVertexBuffer=new _e(this),this.bindElementBuffer=new be(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new xe(this),this.pixelStoreUnpack=new we(this),this.pixelStoreUnpackPremultiplyAlpha=new Se(this),this.pixelStoreUnpackFlipY=new Ee(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};je.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},je.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},je.prototype.createIndexBuffer=function(t,e){return new qt(this,t,e)},je.prototype.createVertexBuffer=function(t,e,n){return new Yt(this,t,e,n)},je.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},je.prototype.createFramebuffer=function(t,e,n){return new Ae(this,t,e,n)},je.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},je.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},je.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},je.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},je.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},je.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Le=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=Vt(n,r,i,this),this._tiles={},this._cache=new Gt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map(function(t){return t.tileID}).sort(c).map(function(t){return t.key})},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort(function(e,r){var i=e.tileID,o=r.tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}).map(function(t){return t.tileID.key}):r.map(function(t){return t.tileID}).sort(c).map(function(t){return t.key})},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);e(t,o),e(o,t)}}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(h(this._source.type)){for(var l={},c={},f=0,p=Object.keys(u);f<p.length;f+=1){var d=p[f],v=u[d],g=this._tiles[d];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(v,a);m&&(this._addTile(m.tileID),l[m.tileID.key]=m.tileID),c[d]=v}}for(var y in this._retainLoadedChildren(c,o,s,u),l)u[y]||(this._coveredTiles[y]=!0,u[y]=l[y])}for(var _ in u)this._tiles[_].clearFadeHold();for(var b=0,x=t.keysDifference(this._tiles,u);b<x.length;b+=1){var w=x[b],S=this._tiles[w];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(w)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],h=this._addTile(c);r[c.key]=c,h.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,r);for(var f=0,p=t;f<p.length;f+=1){var d=p[f],v=this._tiles[d.key];if(!v.hasData()){if(e+1>this._source.maxzoom){var g=d.children(this._source.maxzoom)[0],m=this.getTile(g);if(m&&m.hasData()){r[g.key]=g;continue}}else{var y=d.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var _=v.wasRequested(),b=d.overscaledZ-1;b>=o;--b){var x=d.scaledTo(b);if(i[x.key])break;if(i[x.key]=!0,!(v=this.getTile(x))&&_&&(v=this._addTile(x)),v&&(r[x.key]=x,_=v.wasRequested(),v.hasData()))break}}}return r},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map(function(t){return a.pointCoordinate(t)}),l=s.map(function(t){return a.pointCoordinate(t)}),c=this.getIds(),h=1/0,f=1/0,p=-1/0,d=-1/0,v=0,g=l;v<g.length;v+=1){var m=g[v];h=Math.min(h,m.x),f=Math.min(f,m.y),p=Math.max(p,m.x),d=Math.max(d,m.y)}for(var y=function(e){var r=i._tiles[c[e]];if(!r.holdingForFade()){var s=r.tileID,v=Math.pow(2,a.zoom-r.tileID.overscaledZ),g=n*r.queryPadding*t.EXTENT/r.tileSize/v,m=[s.getTilePoint(new t.MercatorCoordinate(h,f)),s.getTilePoint(new t.MercatorCoordinate(p,d))];if(m[0].x-g<t.EXTENT&&m[0].y-g<t.EXTENT&&m[1].x+g>=0&&m[1].y+g>=0){var y=u.map(function(t){return s.getTilePoint(t)}),_=l.map(function(t){return s.getTilePoint(t)});o.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:_,scale:v})}}},_=0;_<c.length;_++)y(_);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(h(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter(function(n){return!n.hasDependency(t,e)})},n}(t.Evented);Le.maxOverzooming=10,Le.maxUnderzooming=3;var De=function(){this.active={}};De.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<De.workerCount;)this.workers.push(new f);return this.active[t]=!0,this.workers.slice()},De.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Re,Be=Math.floor(t.browser.hardwareConcurrency/2);De.workerCount=Math.max(Math.min(Be,6),1);var ze={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Fe=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Fe.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Fe.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Fe.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Fe.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Fe.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Fe.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},Fe.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l},Fe.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Fe.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Fe.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Fe.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,h=0,f=l;h<f.length;h+=1){var p=f[h];if(!u.box[p]){u.box[p]=!0;var d=4*p;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var v=this.circleCells[i];if(null!==v)for(var g=this.circles,m=0,y=v;m<y.length;m+=1){var _=y[m];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,n,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=g[b],w=g[b+1],S=g[b+2];o.push({key:this.circleKeys[_],x1:x-S,y1:w-S,x2:x+S,y2:w+S})}}}},Fe.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var h=this.bboxes,f=0,p=c;f<p.length;f+=1){var d=p[f];if(!l.box[d]){l.box[d]=!0;var v=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,h[v+0],h[v+1],h[v+2],h[v+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var g=this.circleCells[i];if(null!==g)for(var m=this.circles,y=0,_=g;y<_.length;y+=1){var b=_[y];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(m[x],m[x+1],m[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Fe.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=u;f<=c;f++)for(var p=l;p<=h;p++)if(i.call(this,t,e,n,r,this.xCellCount*p+f,o,a,s))return},Fe.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Fe.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Fe.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},Fe.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,f=c-l;return h*h+f*f<=n*n};var Ne=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ue=function(t,e,n){void 0===e&&(e=new Fe(t.width+200,t.height+200,25)),void 0===n&&(n=new Fe(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};Ue.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},Ue.prototype.approximateTileDistance=function(t,e,n,r,i){var o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+((i?1:r/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},Ue.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,h,f,p){var d=[],v=this.projectAnchor(l,o.anchorX,o.anchorY),g=u/24,m=o.lineOffsetX*u,y=o.lineOffsetY*u,_=new t.Point(o.anchorX,o.anchorY),b=C(g,s,m,y,!1,E(_,c).point,_,o,a,c,{},!0),x=!1,w=!1,S=!0,M=v.perspectiveRatio*i,T=1/(i*r),A=0,P=0;b&&(A=this.approximateTileDistance(b.first.tileDistance,b.first.angle,T,v.cameraDistance,f),P=this.approximateTileDistance(b.last.tileDistance,b.last.angle,T,v.cameraDistance,f));for(var k=0;k<e.length;k+=5){var I=e[k],O=e[k+1],j=e[k+2],D=e[k+3];if(!b||D<-A||D>P)L(e,k,!1);else{var R=this.projectPoint(l,I,O),B=j*M;if(d.length>0){var z=R.x-d[d.length-4],F=R.y-d[d.length-3];if(B*B*2>z*z+F*F&&k+8<e.length){var N=e[k+8];if(N>-A&&N<P){L(e,k,!1);continue}}}d.push(R.x,R.y,B,k/5),L(e,k,!0);var U=R.x-B,V=R.y-B,G=R.x+B,q=R.y+B;if(S=S&&this.isOffscreen(U,V,G,q),w=w||this.isInsideGrid(U,V,G,q),!n&&this.grid.hitTestCircle(R.x,R.y,B,p)){if(!h)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:S}},Ue.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var h={},f={},p=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));p<d.length;p+=1){var v=d[p],g=v.key;if(void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]={}),!h[g.bucketInstanceId][g.featureIndex]){var m=[new t.Point(v.x1,v.y1),new t.Point(v.x2,v.y1),new t.Point(v.x2,v.y2),new t.Point(v.x1,v.y2)];t.polygonIntersectsPolygon(n,m)&&(h[g.bucketInstanceId][g.featureIndex]=!0,void 0===f[g.bucketInstanceId]&&(f[g.bucketInstanceId]=[]),f[g.bucketInstanceId].push(g.featureIndex))}}return f},Ue.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},Ue.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Ue.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return j(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},Ue.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return j(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},Ue.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return j(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},Ue.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},Ue.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var Ve=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};Ve.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Ge=function(t,e,n,r,i){this.text=new Ve(t?t.text:null,e,n,i),this.icon=new Ve(t?t.icon:null,e,r,i)};Ge.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var qe=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},He=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},Ye=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};Ye.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var Xe=function(t,e,n,r){this.transform=t.clone(),this.collisionIndex=new Ue(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Ye(n),this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};Xe.prototype.getBucketParts=function(e,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),f=w(h,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,D(r,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new He(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var p={bucket:o,layout:u,posMatrix:h,textLabelPlaneMatrix:f,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var d=0,v=o.sortKeyRanges;d<v.length;d+=1){var g=v[d];e.push({sortKey:g.sortKey,symbolInstanceStart:g.symbolInstanceStart,symbolInstanceEnd:g.symbolInstanceEnd,parameters:p})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:p})}},Xe.prototype.attemptAnchorPlacement=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){var v,g=[h.textOffset0,h.textOffset1],m=R(t,n,r,g,i),y=this.collisionIndex.placeCollisionBox(B(e,m.x,m.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(B(d,m.x,m.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(v=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:g,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:v},this.markUsedJustification(f,t,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[h.crossTileID]=p),{shift:m,placedGlyphBoxes:y}):void 0},Xe.prototype.placeLayerBucketPart=function(e,n,r){var i=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,l=o.textLabelPlaneMatrix,c=o.scale,h=o.textPixelRatio,f=o.holdingForFade,p=o.collisionBoxArray,d=o.partiallyEvaluatedTextSize,v=o.collisionGroup,g=s.get("text-optional"),m=s.get("icon-optional"),y=s.get("text-allow-overlap"),_=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),S="viewport-y"===s.get("symbol-z-order"),E=y&&(_||!a.hasIconData()||m),M=_&&(y||!a.hasTextData()||g);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p);var T=function(e,o){if(!n[e.crossTileID])if(f)i.placements[e.crossTileID]=new qe(!1,!1,!1);else{var p,S=!1,T=!1,C=!0,A=null,P={box:null,offscreen:null},k={box:null,offscreen:null},I=null,O=null,j=0,L=0,D=0;o.textFeatureIndex&&(j=o.textFeatureIndex),o.verticalTextFeatureIndex&&(L=o.verticalTextFeatureIndex);var R=o.textBox;if(R){var z=function(n){var r=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[e.crossTileID];o&&(i.placedOrientations[e.crossTileID]=o,i.markUsedOrientation(a,r=o,e))}return r},F=function(n,r){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var i=0,s=a.writingModes;i<s.length&&(s[i]===t.WritingMode.vertical?(P=r(),k=P):P=n(),!(P&&P.box&&P.box.length));i+=1);else P=n()};if(s.get("text-variable-anchor")){var N=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var U=i.prevPlacement.variableOffsets[e.crossTileID];N.indexOf(U.anchor)>0&&(N=N.filter(function(t){return t!==U.anchor})).unshift(U.anchor)}var V=function(t,n,r){for(var o=t.x2-t.x1,s=t.y2-t.y1,l=e.textBoxScale,c=w&&!_?n:null,f={box:[],offscreen:!1},p=y?2*N.length:N.length,d=0;d<p;++d){var g=i.attemptAnchorPlacement(N[d%N.length],t,o,s,l,b,x,h,u,v,d>=N.length,e,a,r,c);if(g&&(f=g.placedGlyphBoxes)&&f.box&&f.box.length){S=!0,A=g.shift;break}}return f};F(function(){return V(R,o.iconBox,t.WritingMode.horizontal)},function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&e.numVerticalGlyphVertices>0&&n?V(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),P&&(S=P.box,C=P.offscreen);var G=z(P&&P.box);if(!S&&i.prevPlacement){var q=i.prevPlacement.variableOffsets[e.crossTileID];q&&(i.variableOffsets[e.crossTileID]=q,i.markUsedJustification(a,q.anchor,e,G))}}else{var H=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,y,h,u,v.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(a,n,e),i.placedOrientations[e.crossTileID]=n),r};F(function(){return H(R,t.WritingMode.horizontal)},function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?H(n,t.WritingMode.vertical):{box:null,offscreen:null}}),z(P&&P.box&&P.box.length)}}S=(p=P)&&p.box&&p.box.length>0,C=p&&p.offscreen;var Y=o.textCircles;if(Y){var X=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),W=t.evaluateSizeForFeature(a.textSizeData,d,X);I=i.collisionIndex.placeCollisionCircles(Y,y,c,h,X,a.lineVertexArray,a.glyphOffsetArray,W,u,l,r,x,v.predicate),S=y||I.circles.length>0,C=C&&I.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var Z=function(t){var e=w&&A?B(t,A.x,A.y,b,x,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,_,h,u,v.predicate)};T=k&&k.box&&k.box.length&&o.verticalIconBox?(O=Z(o.verticalIconBox)).box.length>0:(O=Z(o.iconBox)).box.length>0,C=C&&O.offscreen}var K=g||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,J=m||0===e.numIconVertices;K||J?J?K||(T=T&&S):S=T&&S:T=S=T&&S,S&&p&&p.box&&i.collisionIndex.insertCollisionBox(p.box,s.get("text-ignore-placement"),a.bucketInstanceId,k&&k.box&&L?L:j,v.ID),T&&O&&i.collisionIndex.insertCollisionBox(O.box,s.get("icon-ignore-placement"),a.bucketInstanceId,D,v.ID),S&&I&&i.collisionIndex.insertCollisionCircles(I.circles,s.get("text-ignore-placement"),a.bucketInstanceId,j,v.ID),i.placements[e.crossTileID]=new qe(S||E,T||M,C||a.justReloaded),n[e.crossTileID]=!0}};if(S)for(var C=a.getSortedSymbolIndexes(this.transform.angle),A=C.length-1;A>=0;--A){var P=C[A];T(a.symbolInstances.get(P),a.collisionArrays[P])}else for(var k=e.symbolInstanceStart;k<e.symbolInstanceEnd;k++)T(a.symbolInstances.get(k),a.collisionArrays[k]);a.justReloaded=!1},Xe.prototype.markUsedJustification=function(e,n,r,i){var o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}},Xe.prototype.markUsedOrientation=function(e,n,r){for(var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},Xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=i[s];l?(this.opacities[s]=new Ge(l,r,u.text,u.icon),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new Ge(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var f=new Ge(h,r,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||h.text.placed||h.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},Xe.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},Xe.prototype.updateBucketOpacities=function(e,n,r){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear(),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexArray.clear(),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexArray.clear();var o=e.layers[0].layout,a=new Ge(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),f="none"!==o.get("icon-text-fit"),p=new Ge(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData())&&e.deserializeCollisionBoxes(r);for(var d=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},v=function(r){var o=e.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,v=o.crossTileID,g=n[v],m=i.opacities[v];g?m=a:m||(i.opacities[v]=m=p),n[v]=!0;var y=o.numIconVertices>0,_=i.placedOrientations[o.crossTileID],b=_===t.WritingMode.vertical,x=_===t.WritingMode.horizontal||_===t.WritingMode.horizontalOnly;if(s>0||u>0){var w=F(m.text);d(e.text,s,b?en:w),d(e.text,u,x?en:w);var S=m.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=S||b?1:0)}),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=S||x?1:0);var E=i.variableOffsets[o.crossTileID];E&&i.markUsedJustification(e,E.anchor,o,_);var M=i.placedOrientations[o.crossTileID];M&&(i.markUsedJustification(e,"left",o,M),i.markUsedOrientation(e,M,o))}if(y){var T=F(m.icon),C=!(f&&o.verticalPlacedIconSymbolIndex&&b);o.placedIconSymbolIndex>=0&&(d(e.icon,o.numIconVertices,C?T:en),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=m.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,o.numVerticalIconVertices,C?en:T),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData()){var A=e.collisionArrays[r];if(A){var P=new t.Point(0,0);if(A.textBox||A.verticalTextBox){var k=!0;if(l){var I=i.variableOffsets[v];I?(P=R(I.anchor,I.width,I.height,I.textOffset,I.textBoxScale),c&&P._rotate(h?i.transform.angle:-i.transform.angle)):k=!1}A.textBox&&z(e.textCollisionBox.collisionVertexArray,m.text.placed,!k||b,P.x,P.y),A.verticalTextBox&&z(e.textCollisionBox.collisionVertexArray,m.text.placed,!k||x,P.x,P.y)}var O=Boolean(!x&&A.verticalIconBox);A.iconBox&&z(e.iconCollisionBox.collisionVertexArray,m.icon.placed,O,f?P.x:0,f?P.y:0),A.verticalIconBox&&z(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!O,f?P.x:0,f?P.y:0);var j=A.textCircles;if(j&&e.hasTextCollisionCircleData())for(var L=0;L<j.length;L+=5)z(e.textCollisionCircle.collisionVertexArray,m.text.placed,g||0===j[L+4])}}},g=0;g<e.symbolInstances.length;g++)v(g);e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexBuffer&&e.iconCollisionCircle.collisionVertexBuffer.updateData(e.iconCollisionCircle.collisionVertexArray),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexBuffer&&e.textCollisionCircle.collisionVertexBuffer.updateData(e.textCollisionCircle.collisionVertexArray)},Xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},Xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Xe.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},Xe.prototype.setStale=function(){this.stale=!0};var We=Math.pow(2,25),Ze=Math.pow(2,24),Ke=Math.pow(2,17),Je=Math.pow(2,16),Qe=Math.pow(2,9),$e=Math.pow(2,8),tn=Math.pow(2,1),en=0,nn=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};nn.prototype.continuePlacement=function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(function(t,e){return t.sortKey-e.sortKey}));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1};var rn=function(t,e,n,r,i,o,a){this.placement=new Xe(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};rn.prototype.isDone=function(){return this._done},rn.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new nn(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},rn.prototype.commit=function(t){return this.placement.commit(t),this.placement};var on=512/t.EXTENT/2,an=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};an.prototype.getScaledCoordinates=function(e,n){var r=on/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},an.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var sn=function(){this.maxCrossTileID=0};sn.prototype.generate=function(){return++this.maxCrossTileID};var un=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};un.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},un.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new an(t,e.symbolInstances,e.bucketInstanceId),!0},un.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},un.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var ln=function(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ln.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new un);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},ln.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var cn=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},hn=t.pick(ze,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),fn=t.pick(ze,["setCenter","setZoom","setBearing","setPitch"]),pn=function(){var e={},n=t.styleSpec.$version;for(var r in t.styleSpec.$root){var i,o=t.styleSpec.$root[r];o.required&&null!=(i="version"===r?n:"array"===o.type?[]:{})&&(e[r]=i)}return e}(),dn=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new It((Re||(Re=new De),Re),this),this.imageManager=new wt,this.imageManager.setEventedParent(this),this.glyphManager=new Tt(r._requestManager,i.localIdeographFontFamily),this.lineAtlas=new kt(256,512),this.crossTileSymbolIndex=new ln,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange(function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every(function(t){return t}))for(var r in a.sourceCaches)a.sourceCaches[r].reload()})}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(pn,!1)},n.prototype._load=function(e,n){if(!n||!cn(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=d(this.stylesheet.layers);this._order=i.map(function(t){return t.id}),this._layers={},this._serializedLayers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Pt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,r){function i(){if(s)r(s);else if(o&&a){var e=t.browser.getImageData(a),n={};for(var i in o){var u=o[i],l=u.width,c=u.height,h=u.x,f=u.y,p=u.sdf,d=u.pixelRatio,v=u.stretchX,g=u.stretchY,m=u.content,y=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,y,{x:h,y:f},{x:0,y:0},{width:l,height:c}),n[i]={data:y,pixelRatio:d,sdf:p,stretchX:v,stretchY:g,content:m}}r(null,n)}}var o,a,s,u=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,u,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,s||(s=t,o=e,i())}),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,u,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,s||(s=t,a=e,i())});return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))})},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var h=this._layers[c[l]];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),cn(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=d(e.layers);var r=function(e,n){if(!e)return[{command:ze.setStyle,args:[n]}];var r=[];try{if(!t.deepEqual(e.version,n.version))return[{command:ze.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||r.push({command:ze.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||r.push({command:ze.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||r.push({command:ze.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||r.push({command:ze.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||r.push({command:ze.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||r.push({command:ze.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||r.push({command:ze.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||r.push({command:ze.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||g(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&y(e,n,o)?r.push({command:ze.setGeoJSONSourceData,args:[o,n[o].data]}):m(o,n,r,i)):v(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:ze.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,l,c,h=(e=e||[]).map(b),f=n.map(b),p=e.reduce(x,{}),d=n.reduce(x,{}),v=h.slice(),g=Object.create(null);for(i=0,o=0;i<h.length;i++)d.hasOwnProperty(a=h[i])?o++:(r.push({command:ze.removeLayer,args:[a]}),v.splice(v.indexOf(a,o),1));for(i=0,o=0;i<f.length;i++)v[v.length-1-i]!==(a=f[f.length-1-i])&&(p.hasOwnProperty(a)?(r.push({command:ze.removeLayer,args:[a]}),v.splice(v.lastIndexOf(a,v.length-o),1)):o++,r.push({command:ze.addLayer,args:[d[a],l=v[v.length-i]]}),v.splice(v.length-i,0,a),g[a]=!0);for(i=0;i<f.length;i++)if(s=p[a=f[i]],u=d[a],!g[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(c in _(s.layout,u.layout,r,a,null,ze.setLayoutProperty),_(s.paint,u.paint,r,a,null,ze.setPaintProperty),t.deepEqual(s.filter,u.filter)||r.push({command:ze.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:ze.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?_(s[c],u[c],r,a,c.slice(6),ze.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:ze.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?_(s[c],u[c],r,a,c.slice(6),ze.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:ze.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:ze.removeLayer,args:[a]}),l=v[v.lastIndexOf(a)+1],r.push({command:ze.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:ze.setStyle,args:[n]}]}return r}(this.serialize(),e).filter(function(t){return!(t.command in fn)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in hn)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Le(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(cn(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone$1(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,h=l;c<h.length;c+=1)i.push(h[c])}}}i.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var f=[],p=this._order.length-1;p>=0;p--){var d=this._order[p];if(n(d))for(var v=i.length-1;v>=0;v--){var g=i[v].feature;if(r[g.layer.id]<p)break;f.push(g),i.pop()}else for(var m=0,y=t;m<y.length;m+=1){var _=y[m][d];if(_)for(var b=0,x=_;b<x.length;b+=1)f.push(x[b].feature)}}return f},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],c=this._layers[s];if(!c)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[c.source]=!0}}var h=[];for(var f in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[f]||h.push(u(this.sourceCaches[f],this._layers,this._serializedLayers,e,n,r));return this.placement&&h.push(function(t,e,n,r,i,o,a){for(var s={},u=o.queryRenderedSymbols(r),c=[],h=0,f=Object.keys(u).map(Number);h<f.length;h+=1)c.push(a[f[h]]);c.sort(l);for(var p=function(){var n=v[d],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],l=r[o];l.sort(function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex});for(var c=0,h=l;c<h.length;c+=1)a.push(h[c])}},d=0,v=c;d<v.length;d+=1)p();var g=function(e){s[e].forEach(function(r){var i=r.feature,o=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o})};for(var m in s)g(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(h)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.deepEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&cn(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},l=0,c=this._order;l<c.length;l+=1){var h=this._layers[c[l]];if("symbol"===h.type){if(!u[h.source]){var f=this.sourceCaches[h.source];u[h.source]=f.getRenderableIds(!0).map(function(t){return f.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var p=this.crossTileSymbolIndex.addLayer(h,u[h.source],e.center.lng);a=a||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new rn(e,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var d=0,v=this._order;d<v.length;d+=1){var g=this._layers[v[d]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,u[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);dn.getSourceType=function(t){return Ut[t]},dn.setSourceType=function(t,e){Ut[t]=e},dn.registerForPluginStateChange=t.registerForPluginStateChange;var vn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),gn=N("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),mn=N("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),yn=N("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),_n=N("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),bn=N("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),xn=N("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),wn=N("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Sn=N("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),En=N("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Mn=N("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Tn=N("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Cn=N("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),An=N("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Pn=N("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),kn=N("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),In=N("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),On=N("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),jn=N("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ln=N("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Dn=N("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Rn=N("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Bn=N("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),zn=N("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Fn=N("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Nn=N("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Un=N("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),Vn=Object.freeze({__proto__:null,prelude:gn,background:mn,backgroundPattern:yn,circle:_n,clippingMask:bn,heatmap:xn,heatmapTexture:wn,collisionBox:Sn,collisionCircle:En,debug:Mn,fill:Tn,fillOutline:Cn,fillOutlinePattern:An,fillPattern:Pn,fillExtrusion:kn,fillExtrusionPattern:In,hillshadePrepare:On,hillshade:jn,line:Ln,lineGradient:Dn,linePattern:Rn,lineSDF:Bn,raster:zn,symbolIcon:Fn,symbolSDF:Nn,symbolTextAndIcon:Un}),Gn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Gn.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},Gn.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var f=0,p=n;f<p.length;f+=1)p[f].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,v=n;d<v.length;d+=1){var g=v[d];g.bind(),g.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},Gn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var qn=function(t,e,n,r,i){var o=t.gl;this.program=o.createProgram();var a=n?n.defines():[];i&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(gn.fragmentSource,e.fragmentSource).join("\n"),u=a.concat(gn.vertexSource,e.vertexSource).join("\n"),l=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(l,s),o.compileShader(l),o.attachShader(this.program,l);var c=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(c,u),o.compileShader(c),o.attachShader(this.program,c);for(var h=n?n.layoutAttributes:[],f=0;f<h.length;f++)o.bindAttribLocation(this.program,f,h[f].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var p={},d=0;d<this.numAttributes;d++){var v=o.getActiveAttrib(this.program,d);v&&(this.attributes[v.name]=o.getAttribLocation(this.program,v.name))}for(var g=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),m=0;m<g;m++){var y=o.getActiveUniform(this.program,m);y&&(p[y.name]=o.getUniformLocation(this.program,y.name))}this.fixedUniforms=r(t,p),this.binderUniforms=n?n.getUniforms(t,p):[]}}};qn.prototype.draw=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v){var g,m=t.gl;if(!this.failedToCreate){for(var y in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:f});for(var _=(g={},g[m.LINES]=2,g[m.TRIANGLES]=3,g[m.LINE_STRIP]=1,g)[e],b=0,x=c.get();b<x.length;b+=1){var w=x[b],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new Gn)).bind(t,this,u,p?p.getPaintVertexBuffers():[],l,w.vertexOffset,d,v),m.drawElements(e,w.primitiveLength*_,m.UNSIGNED_SHORT,w.primitiveOffset*_*2)}}};var Hn=function(e,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-n.transform.angle),t.transformMat3(s,s,u);var l=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:i}},Yn=function(e,n,r,i,o,a,s){return t.extend(Hn(e,n,r,i),U(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Xn=function(t){return{u_matrix:t}},Wn=function(e,n,r,i){return t.extend(Xn(e),U(r,n,i))},Zn=function(t,e){return{u_matrix:t,u_world:e}},Kn=function(e,n,r,i,o){return t.extend(Wn(e,n,r,i),{u_world:o})},Jn=function(e,n,r,i){var o,a,s=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var u=D(r,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Qn=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},$n=function(t,e,n){var r=D(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},tr=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},er=function(t){return{u_matrix:t}},nr=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:D(e,1,n),u_intensity:r}},rr=function(e,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u,l,c,h=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),h),u_image:0,u_latrange:(u=n.tileID,l=Math.pow(2,u.canonical.z),c=u.canonical.y,[new t.MercatorCoordinate(0,c/l).toLngLat().lat,new t.MercatorCoordinate(0,(c+1)/l).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}},ir=function(e,n,r){var i=n.stride,o=t.create();return t.ortho(o,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(o,o,[0,-t.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_maxzoom:r,u_unpack:n.getUnpackVector()}},or=function(e,n,r){var i=e.transform;return{u_matrix:G(e,n,r),u_ratio:1/D(n,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},ar=function(e,n,r){return t.extend(or(e,n,r),{u_image:0})},sr=function(e,n,r,i){var o=e.transform,a=V(n,o);return{u_matrix:G(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/D(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},ur=function(e,n,r,i,o){var a=e.lineAtlas,s=V(n,e.transform),u="round"===r.layout.get("line-cap"),l=a.getDash(i.from,u),c=a.getDash(i.to,u),h=l.width*o.fromScale,f=c.width*o.toScale;return t.extend(or(e,n,r),{u_patternscale_a:[s/h,-l.height/2],u_patternscale_b:[s/f,-c.height/2],u_sdfgamma:a.width/(256*Math.min(h,f)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:o.t})},lr=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:q(i.paint.get("raster-hue-rotate"))};var o,a},cr=function(t,e,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},hr=function(e,n,r,i,o,a,s,u,l,c,h){var f=o.transform;return t.extend(cr(e,n,r,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},fr=function(e,n,r,i,o,a,s,u,l,c){return t.extend(hr(e,n,r,i,o,a,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},pr=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},dr=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=c*(r.tileID.canonical.x+r.tileID.wrap*l),f=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/D(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},vr={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:Qn,collisionCircle:Qn,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}},gr=t.identity(new Float32Array(16)),mr=new t.Color(1,0,0,1),yr=new t.Color(0,1,0,1),_r=new t.Color(0,0,1,1),br=new t.Color(1,0,1,1),xr=new t.Color(0,1,1,1),wr={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var a=ke.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){for(var u=n.transform,l="map"===o,c="map"===a,h=0,f=e;h<f.length;h+=1){var p=f[h],d=i.getTile(p),v=d.getBucket(r);if(v&&v.text&&v.text.segments.get().length){var g=t.evaluateSizeForZoom(v.textSizeData,u.zoom),m=D(d,1,n.transform.zoom),y=w(p.posMatrix,c,l,n.transform,m),_="none"!==r.layout.get("icon-text-fit")&&v.hasIconData();if(g){var b=Math.pow(2,u.zoom-d.tileID.overscaledZ);W(v,l,c,s,t.symbolSize,u,y,p.posMatrix,b,g,_)}}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&K(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&K(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Y(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Y(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=e.context,c=l.gl,h=e.depthModeForSublayer(0,Pe.ReadOnly),f=ke.disabled,p=e.colorModeForRenderPass(),d=[],v=0;v<i.length;v++){var g=i[v],m=n.getTile(g),y=m.getBucket(r);if(y){var _=y.programConfigurations.get(r.id),b={programConfiguration:_,program:e.useProgram("circle",_),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:Jn(e,g,m,r)};if(u)for(var x=0,w=y.segments.get();x<w.length;x+=1){var S=w[x];d.push({segments:new t.SegmentVector([S]),sortKey:S.sortKey,state:b})}else d.push({segments:y.segments,sortKey:0,state:b})}}u&&d.sort(function(t,e){return t.sortKey-e.sortKey});for(var E=0,M=d;E<M.length;E+=1){var T=M[E],C=T.state;C.program.draw(l,c.TRIANGLES,h,f,p,Oe.disabled,C.uniformValues,r.id,C.layoutVertexBuffer,C.indexBuffer,T.segments,r.paint,e.transform.zoom,C.programConfiguration)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=ke.disabled,u=new Ie([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var l=0;l<i.length;l++){var c=i[l];if(!n.hasRenderableParent(c)){var h=n.getTile(c),f=h.getBucket(r);if(f){var p=f.programConfigurations.get(r.id);e.useProgram("heatmap",p).draw(o,a.TRIANGLES,Pe.disabled,s,u,Oe.disabled,nr(c.posMatrix,h,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,e.transform.zoom,p)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Pe.disabled,ke.disabled,e.colorModeForRenderPass(),Oe.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Pe.ReadOnly),u=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),f=r.paint.get("line-gradient"),p=r.getCrossfadeParameters(),d=h?"linePattern":l?"lineSDF":f?"lineGradient":"line",v=e.context,g=v.gl,m=!0;if(f){v.activeTexture.set(g.TEXTURE0);var y=r.gradientTexture;if(!r.gradient)return;y||(y=r.gradientTexture=new t.Texture(v,r.gradient,g.RGBA)),y.bind(g.LINEAR,g.CLAMP_TO_EDGE)}for(var _=0,b=i;_<b.length;_+=1){var x=b[_],w=n.getTile(x);if(!h||w.patternsLoaded()){var S=w.getBucket(r);if(S){var E=S.programConfigurations.get(r.id),M=e.context.program.get(),T=e.useProgram(d,E),C=m||T.program!==M,A=c.constantOr(null);if(A&&w.imageAtlas){var P=w.imageAtlas,k=P.patternPositions[A.to.toString()],I=P.patternPositions[A.from.toString()];k&&I&&E.setConstantPatternPositions(k,I)}var O=h?sr(e,w,r,p):l?ur(e,w,r,l,p):f?ar(e,w,r):or(e,w,r);h?(v.activeTexture.set(g.TEXTURE0),w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),E.updatePaintBuffers(p)):l&&(C||e.lineAtlas.dirty)&&(v.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(v)),T.draw(v,g.TRIANGLES,s,e.stencilModeForClipping(x),u,Oe.disabled,O,r.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,r.paint,e.transform.zoom,E),m=!1}}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){Q(e,n,r,i,e.depthModeForSublayer(1,"opaque"===e.renderPass?Pe.ReadWrite:Pe.ReadOnly),s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){Q(e,n,r,i,e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Pe.ReadOnly),s,!0)}}},"fill-extrusion":function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new Pe(t.context.gl.LEQUAL,Pe.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))$(t,e,n,r,o,ke.disabled,Ie.disabled),$(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();$(t,e,n,r,o,ke.disabled,a)}}},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,Pe.ReadOnly),s=t.colorModeForRenderPass(),u="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],l=u[0],c=0,h=u[1];c<h.length;c+=1){var f=h[c],p=e.getTile(f);p.needsHillshadePrepare&&"offscreen"===t.renderPass?et(t,p,n,o,a,ke.disabled,s):"translucent"===t.renderPass&&tt(t,p,n,a,l[f.overscaledZ],s)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof zt?[{},r]:t.stencilConfigForOverlap(r),c=l[0],h=l[1],f=h[h.length-1].overscaledZ,p=!t.options.moving,d=0,v=h;d<v.length;d+=1){var g=v[d],m=t.depthModeForSublayer(g.overscaledZ-f,1===n.paint.get("raster-opacity")?Pe.ReadWrite:Pe.ReadOnly,o.LESS),y=e.getTile(g),_=t.transform.calculatePosMatrix(g.toUnwrapped(),p);y.registerFadeDuration(n.paint.get("raster-fade-duration"));var b=e.findLoadedParent(g,0),x=nt(y,b,e,n,t.transform),w=void 0,S=void 0,E="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),S=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var M=lr(_,S||[0,0],w||1,x,n);a instanceof zt?s.draw(i,o.TRIANGLES,m,ke.disabled,u,Oe.disabled,M,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,m,c[g.overscaledZ],u,Oe.disabled,M,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=ke.disabled,f=t.depthModeForSublayer(0,"opaque"===c?Pe.ReadWrite:Pe.ReadOnly),p=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),v=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var g=n.getCrossfadeParameters(),m=0,y=v;m<y.length;m+=1){var _=y[m],b=t.transform.calculatePosMatrix(_.toUnwrapped()),x=l?dr(b,i,t,l,{tileID:_,tileSize:u},g):pr(b,i,r);d.draw(o,a.TRIANGLES,f,h,p,Oe.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)at(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(ke.disabled);var a="3d"===i.renderingMode?new Pe(t.context.gl.LEQUAL,Pe.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Pe.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},Sr=function(t,e){this.context=new je(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Le.maxUnderzooming+Le.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ln,this.gpuTimers={}};Sr.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1)this.style._layers[i[r]].resize()},Sr.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,vn.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,vn.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,Bt.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,vn.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new ke({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},Sr.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Pe.disabled,this.stencilClearMode,Ie.disabled,Oe.disabled,er(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Sr.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Ie.disabled),n.setDepthMode(Pe.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,Pe.disabled,new ke({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),Ie.disabled,Oe.disabled,er(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Sr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new ke({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},Sr.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new ke({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Sr.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,r=t.sort(function(t,e){return e.overscaledZ-t.overscaledZ}),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new ke({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[i]=ke.disabled,e),r]},Sr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Ie([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ie.unblended:Ie.alphaBlended},Sr.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return Pe.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Pe(n||this.context.gl.LEQUAL,e,[r,r])},Sr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Sr.prototype.render=function(e,n){var r=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,l,c={},h={},f={};for(var p in o){var d=o[p];c[p]=d.getVisibleCoordinates(),h[p]=c[p].slice().reverse(),f[p]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var v=0;v<i.length;v++)if(this.style._layers[i[v]].is3D()){this.opaquePassCutoff=v;break}this.renderPass="offscreen";for(var g=0,m=i;g<m.length;g+=1){var y=this.style._layers[m[g]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var _=h[y.source];("custom"===y.type||_.length)&&this.renderLayer(this,o[y.source],y,_)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[i[this.currentLayer]],x=o[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var S=this.style._layers[i[this.currentLayer]],E=o[S.source],M=("symbol"===S.type?f:h)[S.source];this._renderTileClippingMasks(S,c[S.source]),this.renderLayer(this,E,S,M)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(l&&l.id)&&(l=r.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<l.getSource().maxzoom)&&(u=l))}),u&&wr.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;rt(t,t.transform.height-(e.top||0),3,mr),rt(t,e.bottom||0,3,yr),it(t,e.left||0,3,_r),it(t,t.transform.width-(e.right||0),3,br);var n=t.transform.centerPoint;!function(t,e,n,r){ot(t,e-1,n-10,2,20,r),ot(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,xr)}(this),this.context.setDefault()},Sr.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),wr[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},Sr.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},Sr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},Sr.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},Sr.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e},Sr.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:D(n,r[0],this.transform.zoom),o?r[1]:D(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},Sr.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Sr.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},Sr.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},Sr.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new qn(this.context,Vn[t],e,vr[t],this._showOverdrawInspector)),this.cache[n]},Sr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Sr.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},Sr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Sr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Er=function(t,e){this.points=t,this.planes=e};Er.fromInvProjectionMatrix=function(e,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(n){return t.transformMat4([],n,e)}).map(function(e){return t.scale$1([],e,1/e[3]/n*i)}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(e){var n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),a=-t.dot(i,o[e[1]]);return i.concat(a)});return new Er(o,a)};var Mr=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};Mr.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new Mr(r,i)},Mr.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},Mr.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},Mr.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<e.planes.length;i++){for(var o=e.planes[i],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var l=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var f=e.points[h][u]-this.min[u];l=Math.min(l,f),c=Math.max(c,f)}if(c<0||l>this.max[u]-this.min[u])return 0}return 1};var Tr=function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r};Tr.prototype.interpolate=function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this},Tr.prototype.getCenter=function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)},Tr.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},Tr.prototype.clone=function(){return new Tr(this.top,this.bottom,this.left,this.right)},Tr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Cr=function(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Tr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ar={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Cr.prototype.clone=function(){var t=new Cr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Ar.minZoom.get=function(){return this._minZoom},Ar.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Ar.maxZoom.get=function(){return this._maxZoom},Ar.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Ar.minPitch.get=function(){return this._minPitch},Ar.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Ar.maxPitch.get=function(){return this._maxPitch},Ar.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Ar.renderWorldCopies.get=function(){return this._renderWorldCopies},Ar.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Ar.worldSize.get=function(){return this.tileSize*this.scale},Ar.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ar.size.get=function(){return new t.Point(this.width,this.height)},Ar.bearing.get=function(){return-this.angle/Math.PI*180},Ar.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ar.pitch.get=function(){return this._pitch/Math.PI*180},Ar.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Ar.fov.get=function(){return this._fov/Math.PI*180},Ar.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Ar.zoom.get=function(){return this._zoom},Ar.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Ar.center.get=function(){return this._center},Ar.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Ar.padding.get=function(){return this._edgeInsets.toJSON()},Ar.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Ar.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Cr.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Cr.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},Cr.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Cr.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},Cr.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=Er.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=n);var l=function(t){return{aabb:new Mr([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],h=[],f=n,p=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var d=1;d<=3;d++)c.push(l(-d)),c.push(l(d));for(c.push(l(0));c.length>0;){var v=c.pop(),g=v.x,m=v.y,y=v.fullyVisible;if(!y){var _=v.aabb.intersects(s);if(0===_)continue;y=2===_}var b=v.aabb.distanceX(a),x=v.aabb.distanceY(a),w=Math.max(Math.abs(b),Math.abs(x));if(v.zoom===f||w>3+(1<<f-v.zoom)-2&&v.zoom>=u)h.push({tileID:new t.OverscaledTileID(v.zoom===f?p:v.zoom,v.wrap,v.zoom,g,m),distanceSq:t.sqrLen([a[0]-.5-g,a[1]-.5-m])});else for(var S=0;S<4;S++){var E=(g<<1)+S%2,M=(m<<1)+(S>>1);c.push({aabb:v.aabb.quadrant(S),zoom:v.zoom+1,x:E,y:M,wrap:v.wrap,fullyVisible:y})}}return h.sort(function(t,e){return t.distanceSq-e.distanceSq}).map(function(t){return t.tileID})},Cr.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Ar.unmodified.get=function(){return this._unmodified},Cr.prototype.zoomScale=function(t){return Math.pow(2,t)},Cr.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Cr.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},Cr.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Ar.point.get=function(){return this.project(this.center)},Cr.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Cr.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Cr.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Cr.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Cr.prototype.coordinateLocation=function(t){return t.toLngLat()},Cr.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,l=r[2]/o,c=u===l?0:(0-u)/(l-u);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)},Cr.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},Cr.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Cr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Cr.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Cr.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Cr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Cr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var f=this.lngRange;s=t.mercatorXfromLng(f[0])*this.worldSize,n=(u=t.mercatorXfromLng(f[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var p=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(u+s)/2:p.x,e?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var v=p.y,g=l.y/2;v-g<o&&(i=o+g),v+g>a&&(i=a-g)}if(this.lngRange){var m=p.x,y=l.x/2;m-y<s&&(r=s+y),m+y>u&&(r=u-y)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:p.x,void 0!==i?i:p.y))),this._unmodified=c,this._constraining=!1}},Cr.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),l=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,l,u),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,f=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),v=a-Math.round(a)+p*h+d*f,g=s-Math.round(s)+p*f+d*h,m=new Float64Array(c);if(t.translate(m,m,[v>.5?v-1:v,g>.5?g-1:g,0]),this.alignedProjMatrix=m,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Cr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Cr.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},Cr.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var l=u[s];r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(Cr.prototype,Ar);var Pr=function(e){var n,r,i,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,i=null,o=function(){i=null,r&&(n(),i=setTimeout(o,300),r=!1)},function(){return r=!0,i||o(),i})};Pr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Pr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Pr.prototype.getHashString=function(e){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+r:r+"/"+s+"/"+a,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var h=this._hashName,f=!1,p=t.window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===h?(f=!0,e+"="+c):t}).filter(function(t){return t});return f||p.push(h+"="+c),"#"+p.join("&")}return"#"+c},Pr.prototype._getCurrentHash=function(){var e,n=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===n._hashName&&(e=t)}),(e&&e[1]||"").split("/")):r.split("/")},Pr.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some(function(t){return isNaN(t)})){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Pr.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var kr=function(e){function n(n,r,i,o){void 0===o&&(o={});var a=vt.mousePos(r.getCanvasContainer(),i),s=r.unproject(a);e.call(this,n,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=r}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Ir=function(e){function n(n,r,i){var o=vt.touchPos(r.getCanvasContainer(),i),a=o.map(function(t){return r.unproject(t)}),s=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.Point(0,0)),u=r.unproject(s);e.call(this,n,{points:o,point:s,lngLats:a,lngLat:u,originalEvent:i}),this._defaultPrevented=!1}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Or=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),jr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};jr.prototype.setZoomRate=function(t){this._defaultZoomRate=t},jr.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},jr.prototype.isEnabled=function(){return!!this._enabled},jr.prototype.isActive=function(){return!!this._active},jr.prototype.isZooming=function(){return!!this._zooming},jr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},jr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},jr.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},jr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},jr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=vt.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},jr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=u(c);n.zoom=t.number(s,a,h),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},jr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var Lr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Lr.prototype.isEnabled=function(){return!!this._enabled},Lr.prototype.isActive=function(){return!!this._active},Lr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Lr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Lr.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),vt.disableDrag(),this._startPos=this._lastPos=vt.mousePos(this._el,e),this._active=!0)},Lr.prototype._onMouseMove=function(t){var e=vt.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=e,this._box||(this._box=vt.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(n.x,e.x),i=Math.max(n.x,e.x),o=Math.min(n.y,e.y),a=Math.max(n.y,e.y);vt.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-o+"px"}},Lr.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,r=vt.mousePos(this._el,e);this._finish(),vt.suppressClick(),n.x===r.x&&n.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(n,r,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},Lr.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},Lr.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(vt.remove(this._box),this._box=null),vt.enableDrag(),delete this._startPos,delete this._lastPos},Lr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Dr=t.bezier(0,0,.25,1),Rr=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,this._clickTolerance=n.clickTolerance||1,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Rr.prototype.isEnabled=function(){return"disabled"!==this._state},Rr.prototype.isActive=function(){return"active"===this._state},Rr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Rr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Rr.prototype.onMouseDown=function(e){if("enabled"===this._state){var n="touchstart"===e.type;if(n)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=vt.mouseButton(e),e.altKey||e.metaKey)return;if(this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==vt.mouseButton(e))return;this._eventButton=0}vt.disableDrag(),n?(t.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("touchend",this._onMouseUp)):(t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp)),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=vt.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},Rr.prototype._onMouseMove=function(t){var e=vt.mousePos(this._el,t);this._lastPos.equals(e)||"pending"===this._state&&e.dist(this._startPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Rr.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._prevPos,i=this._lastPos,o=n.bearing-.8*(r.x-i.x),a=n.pitch- -.5*(r.y-i.y),s=this._inertia,u=s[s.length-1];this._drainInertiaBuffer(),s.push([t.browser.now(),this._map._normalizeBearing(o,u[1])]);var l=n.bearing;if(n.bearing=o,this._pitchWithRotate){var c=n.pitch;n.pitch=a,n.pitch!==c&&this._fireEvent("pitch",e)}n.bearing!==l&&this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._prevPos=this._lastPos}},Rr.prototype._onMouseUp=function(t){var e="touchend"===t.type;if(e&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),e||vt.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",vt.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},Rr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Rr.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("touchend",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),vt.enableDrag()},Rr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},Rr.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=n._normalizeBearing(r,i[i.length-2][1]),l=s[1]-a[1],c=l<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==l&&0!==h){var f=Math.abs(l*(.25/h));f>180&&(f=180);var p=f/180;u+=c*f*(p/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*p,easing:Dr,noMoveStart:!0},{originalEvent:t})}else o()}},Rr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},Rr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Br={linearity:.3,easing:t.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},zr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,this._inertiaOptions=Br,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};zr.prototype.isEnabled=function(){return"disabled"!==this._state},zr.prototype.isActive=function(){return"active"===this._state},zr.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=t.extend(Br,e))},zr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},zr.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==vt.mouseButton(e)||(vt.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),vt.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},zr.prototype.onTouchStart=function(e){this.isEnabled()&&(e.touches&&e.touches.length>1&&("pending"===this._state||"active"===this._state)||(vt.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),vt.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},zr.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=vt.mousePos(this._el,e),this._startTouch=this._lastTouch=t.window.TouchEvent&&e instanceof t.window.TouchEvent?vt.touchPos(this._el,e):null,this._inertia=[[t.browser.now(),this._startPos]]},zr.prototype._touchesMatch=function(t,e){return!(!t||!e||t.length!==e.length)&&t.every(function(t,n){return e[n]===t})},zr.prototype._onMove=function(e){e.preventDefault();var n=t.window.TouchEvent&&e instanceof t.window.TouchEvent?vt.touchPos(this._el,e):null,r=vt.mousePos(this._el,e);(n?this._touchesMatch(this._lastTouch,n):this._lastPos.equals(r))||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._lastTouch=n,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},zr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},zr.prototype._onMouseUp=function(t){if(0===vt.mouseButton(t))switch(this._state){case"active":this._state="enabled",vt.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},zr.prototype._onTouchEnd=function(t){if(t.touches&&0!==t.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(t)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},zr.prototype._abort=function(e){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",e),this._fireEvent("moveend",e)),this._unbind(),this._deactivate(),t.window.TouchEvent&&e instanceof t.window.TouchEvent&&e.touches.length>1&&vt.addEventListener(t.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},zr.prototype._onBlur=function(t){this._abort(t)},zr.prototype._unbind=function(){vt.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),vt.removeEventListener(t.window.document,"touchend",this._onTouchEnd),vt.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),vt.removeEventListener(t.window.document,"mouseup",this._onMouseUp),vt.removeEventListener(t.window,"blur",this._onBlur)},zr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},zr.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=this._inertiaOptions,s=a.linearity,u=a.easing,l=a.maxSpeed,c=a.deceleration,h=i.mult(s/o),f=h.mag();f>l&&(f=l,h._unit()._mult(f));var p=f/(c*s),d=h.mult(-p/2);this._map.panBy(d,{duration:1e3*p,easing:u,noMoveStart:!0},{originalEvent:t})}}},zr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},zr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Fr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};Fr.prototype.isEnabled=function(){return!!this._enabled},Fr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Fr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Fr.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:st,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var Nr=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Nr.prototype.isEnabled=function(){return!!this._enabled},Nr.prototype.isActive=function(){return!!this._active},Nr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Nr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Nr.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var n=this._tappedPoint;if(n&&n.dist(t.points[0])<=30){t.originalEvent.preventDefault();var r=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",i),e._resetTapped()},i=function(){e._map.off("touchend",r),e._resetTapped()};this._map.once("touchend",r),this._map.once("touchcancel",i)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout(function(){e._tapped=null,e._tappedPoint=null},300)},Nr.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Nr.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Nr.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Nr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Ur=t.bezier(0,0,.15,1),Vr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Vr.prototype.isEnabled=function(){return!!this._enabled},Vr.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},Vr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Vr.prototype.disableRotation=function(){this._rotationDisabled=!0},Vr.prototype.enableRotation=function(){this._rotationDisabled=!1},Vr.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},Vr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=vt.mousePos(this._el,e.touches[0]),r=vt.mousePos(this._el,e.touches[1]),i=n.add(r).div(2);this._startVec=n.sub(r),this._startAround=this._map.transform.pointLocation(i),this._gestureIntent=void 0,this._inertia=[],vt.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),vt.addEventListener(t.window.document,"touchend",this._onEnd)}},Vr.prototype._getTouchEventData=function(t){var e=vt.mousePos(this._el,t.touches[0]),n=vt.mousePos(this._el,t.touches[1]),r=e.sub(n);return{vec:r,center:e.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},Vr.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Vr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},Vr.prototype._onEnd=function(e){vt.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),vt.removeEventListener(t.window.document,"touchend",this._onEnd);var n=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var i=this._inertia,o=this._map;if(i.length<2)o.snapToNorth({},{originalEvent:e});else{var a=i[i.length-1],s=i[0],u=o.transform.scaleZoom(r*a[1]),l=o.transform.scaleZoom(r*s[1]),c=(a[0]-s[0])/1e3,h=a[2];if(0!==c&&u!==l){var f=.15*(u-l)/c;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var p=1e3*Math.abs(f/(12*.15));o.easeTo({zoom:u+f*p/2e3,duration:p,easing:Ur,around:this._aroundCenter?o.getCenter():o.unproject(h),noMoveStart:!0},{originalEvent:e})}else o.snapToNorth({},{originalEvent:e})}}},Vr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var Gr={scrollZoom:jr,boxZoom:Lr,dragRotate:Rr,dragPan:zr,keyboard:Fr,doubleClickZoom:Nr,touchZoomRotate:Vr},qr=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}i.padding=t.extend(o,i.padding);var s=this.transform,u=s.padding,l=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(n)),h=l.rotate(-r*Math.PI/180),f=c.rotate(-r*Math.PI/180),p=new t.Point(Math.max(h.x,f.x),Math.max(h.y,f.y)),d=new t.Point(Math.min(h.x,f.x),Math.min(h.y,f.y)),v=p.sub(d),g=(s.width-(u.left+u.right+i.padding.left+i.padding.right))/v.x,m=(s.height-(u.top+u.bottom+i.padding.top+i.padding.bottom))/v.y;if(!(m<0||g<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(g,m)),i.maxZoom),_=t.Point.convert(i.offset),b=new t.Point(_.x+(i.padding.left-i.padding.right)/2,_.y+(i.padding.top-i.padding.bottom)/2).mult(s.scale/s.zoomScale(y));return{center:s.unproject(l.add(c).div(2).sub(b)),zoom:y,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,h="pitch"in e?+e.pitch:s,f="padding"in e?e.padding:i.padding,p=t.Point.convert(e.offset),d=i.centerPoint.add(p),v=i.pointLocation(d),g=t.LngLat.convert(e.center||v);this._normalizeCenter(g);var m,y,_=i.project(v),b=i.project(g).sub(_),x=i.zoomScale(l-o);return e.around&&(m=t.LngLat.convert(e.around),y=i.locationPoint(m)),this._zooming=l!==o,this._rotating=a!==c,this._pitching=h!==s,this._padding=!i.isPaddingEqual(f),this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,l,e)),r._rotating&&(i.bearing=t.number(a,c,e)),r._pitching&&(i.pitch=t.number(s,h,e)),r._padding&&(i.interpolatePadding(u,f,e),d=i.centerPoint.add(p)),m)i.setLocationAtPoint(m,y);else{var v=i.zoomScale(i.zoom-o),g=l>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(g,1-e),S=i.unproject(_.add(b.mult(e*w)).mult(v));i.setLocationAtPoint(i.renderWorldCopies?S.wrap():S,d)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){function r(t){var e=(T*T-M*M+(t?-1:1)*k*k*C*C)/(2*(t?T:M)*k*C);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}var a=this;if(!e.essential&&t.browser.prefersReducedMotion){var s=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(s,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var u=this.transform,l=this.getZoom(),c=this.getBearing(),h=this.getPitch(),f=this.getPadding(),p="zoom"in e?t.clamp(+e.zoom,u.minZoom,u.maxZoom):l,d="bearing"in e?this._normalizeBearing(e.bearing,c):c,v="pitch"in e?+e.pitch:h,g="padding"in e?e.padding:u.padding,m=u.zoomScale(p-l),y=t.Point.convert(e.offset),_=u.centerPoint.add(y),b=u.pointLocation(_),x=t.LngLat.convert(e.center||b);this._normalizeCenter(x);var w=u.project(b),S=u.project(x).sub(w),E=e.curve,M=Math.max(u.width,u.height),T=M/m,C=S.mag();if("minZoom"in e){var A=t.clamp(Math.min(e.minZoom,l,p),u.minZoom,u.maxZoom),P=M/u.zoomScale(A-l);E=Math.sqrt(P/C*2)}var k=E*E,I=r(0),O=function(t){return o(I)/o(I+E*t)},j=function(t){return M*((o(I)*(i(e=I+E*t)/o(e))-i(I))/k)/C;var e},L=(r(1)-I)/E;if(Math.abs(C)<1e-6||!isFinite(L)){if(Math.abs(M-T)<1e-6)return this.easeTo(e,n);var D=T<M?-1:1;L=Math.abs(Math.log(T/M))/E,j=function(){return 0},O=function(t){return Math.exp(D*E*t)}}return e.duration="duration"in e?+e.duration:1e3*L/("screenSpeed"in e?+e.screenSpeed/E:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=c!==d,this._pitching=v!==h,this._padding=!u.isPaddingEqual(g),this._prepareEase(n,!1),this._ease(function(e){var r=e*L,i=1/O(r);u.zoom=1===e?p:l+u.scaleZoom(i),a._rotating&&(u.bearing=t.number(c,d,e)),a._pitching&&(u.pitch=t.number(h,v,e)),a._padding&&(u.interpolatePadding(f,g,e),_=u.centerPoint.add(y));var o=1===e?x:u.unproject(w.add(S.mult(j(r))).mult(i));u.setLocationAtPoint(u.renderWorldCopies?o.wrap():o,_),a._fireMoveEvents(n)},function(){return a._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),Hr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Hr.prototype.getDefaultPosition=function(){return"bottom-right"},Hr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=vt.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=vt.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Hr.prototype.onRemove=function(){vt.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Hr.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=n.reduce(function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},Hr.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Hr.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length});var a=(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Hr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Yr=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Yr.prototype.onAdd=function(t){this._map=t,this._container=vt.create("div","mapboxgl-ctrl");var e=vt.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Yr.prototype.onRemove=function(){vt.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Yr.prototype.getDefaultPosition=function(){return"bottom-left"},Yr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Yr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Yr.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Xr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Xr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Xr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Xr.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Xr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Wr={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Zr=t.window.HTMLImageElement,Kr=t.window.HTMLElement,Jr=t.window.ImageBitmap,Qr=0,$r=60,ti={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:Qr,maxPitch:$r,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ei=function(e){function n(n){var r=this;if(null!=(n=t.extend({},ti,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<Qr)throw new Error("minPitch must be greater than or equal to "+Qr);if(null!=n.maxPitch&&n.maxPitch>$r)throw new Error("maxPitch must be less than or equal to "+$r);var i=new Cr(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies);if(e.call(this,i,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._antialias=n.antialias,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new Xr,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Wr,n.locale),this._requestManager=new t.RequestManager(n.transformRequest,n.accessToken),"string"==typeof n.container){if(this._container=t.window.document.getElementById(n.container),!this._container)throw new Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof Kr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),r=null,i=!1,o=null;for(var a in Gr)t[a]=new Gr[a](t,e),e.interactive&&e[a]&&t[a].enable(e[a]);vt.addEventListener(n,"mouseout",function(e){t.fire(new kr("mouseout",t,e))}),vt.addEventListener(n,"mousedown",function(r){i=!0,o=vt.mousePos(n,r);var a=new kr("mousedown",t,r);t.fire(a),a.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))}),vt.addEventListener(n,"mouseup",function(e){var n=t.dragRotate.isActive();r&&!n&&t.fire(new kr("contextmenu",t,r)),r=null,i=!1,t.fire(new kr("mouseup",t,e))}),vt.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var r=e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new kr("mousemove",t,e))}}),vt.addEventListener(n,"mouseover",function(e){for(var r=e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new kr("mouseover",t,e))}),vt.addEventListener(n,"touchstart",function(n){var r=new Ir("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),vt.addEventListener(n,"touchmove",function(e){t.fire(new Ir("touchmove",t,e))},{passive:!1}),vt.addEventListener(n,"touchend",function(e){t.fire(new Ir("touchend",t,e))}),vt.addEventListener(n,"touchcancel",function(e){t.fire(new Ir("touchcancel",t,e))}),vt.addEventListener(n,"click",function(r){var i=vt.mousePos(n,r);(!o||i.equals(o)||i.dist(o)<e.clickTolerance)&&t.fire(new kr("click",t,r))}),vt.addEventListener(n,"dblclick",function(e){var n=new kr("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),vt.addEventListener(n,"contextmenu",function(e){var n=t.dragRotate.isActive();i||n?i&&(r=e):t.fire(new kr("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),vt.addEventListener(n,"wheel",function(n){e.interactive&&t.stop();var r=new Or("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,n),this._hash=n.hash&&new Pr("string"==typeof n.hash&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,t.extend({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Hr({customAttribution:n.customAttribution})),this.addControl(new Yr,n.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},n.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.setMinPitch=function(t){if((t=null==t?Qr:t)<Qr)throw new Error("minPitch must be greater than or equal to "+Qr);if(t>=Qr&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between "+Qr+" and the current maxPitch, inclusive")},n.prototype.getMinPitch=function(){return this.transform.minPitch},n.prototype.setMaxPitch=function(t){if((t=null==t?$r:t)>$r)throw new Error("maxPitch must be less than or equal to "+$r);if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},n.prototype.getMaxPitch=function(){return this.transform.maxPitch},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},n.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},n.prototype._createDelegatedListener=function(t,e,n){var r,i=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new kr(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new kr(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new kr(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}},n.prototype.on=function(t,n,r){if(void 0===r)return e.prototype.on.call(this,t,n);var i=this._createDelegatedListener(t,n,r);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(o,i.delegates[o]);return this},n.prototype.once=function(t,n,r){if(void 0===r)return e.prototype.once.call(this,t,n);var i=this._createDelegatedListener(t,n,r);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},n.prototype.off=function(t,n,r){var i=this;return void 0===r?e.prototype.off.call(this,t,n):(this._delegatedListeners&&this._delegatedListeners[t]&&function(e){for(var o=e[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}}(this._delegatedListeners),this)},n.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},n.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},n.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new dn(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},n.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new dn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},n.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)})}else"object"==typeof e&&this._updateDiff(e,n)},n.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),n instanceof Zr||Jr&&n instanceof Jr){var l=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},n.prototype.updateImage=function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof Zr||Jr&&n instanceof Jr?t.browser.getImageData(n):n,o=i.width,a=i.height,s=i.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof Zr||Jr&&n instanceof Jr)),void this.style.updateImage(e,r))},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},n.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=vt.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=vt.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=vt.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=vt.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=vt.create("div","mapboxgl-ctrl-"+t,r)})},n.prototype._resizeCanvas=function(e,n){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({},dt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?(this.painter=new Sr(n,this.transform),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(){var e,n=this,r=0,i=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(e=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,e),r=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=t.browser.now();this.style.zoomHistory.update(a,s);var u=new t.EvaluationParameters(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=u.crossFadingFactor();1===l&&l===this._crossFadingFactor||(o=!0,this._crossFadingFactor=l),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=t.browser.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,e),setTimeout(function(){var r=i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(e),n.fire(new t.Event("gpu-timing-frame",{cpuTime:c,gpuTime:r}))},50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout(function(){var e=n.painter.queryGpuTimers(h);n.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),ut(this._canvasContainer),ut(this._controlContainer),ut(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},n.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(t){e._frame=null,e._render()}))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showPadding.get=function(){return!!this._showPadding},r.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},r.version.get=function(){return t.version},Object.defineProperties(n.prototype,r),n}(qr),ni={showCompass:!0,showZoom:!0,visualizePitch:!1},ri=function(e){var n=this;this.options=t.extend({},ni,e),this._container=vt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return n._map.zoomIn({},{originalEvent:t})}),vt.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return n._map.zoomOut({},{originalEvent:t})}),vt.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:t}):n._map.resetNorth({},{originalEvent:t})}),this._compassIcon=vt.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ri.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},ri.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},ri.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rr(t,{button:"left",element:this._compass,clickTolerance:t.dragRotate._clickTolerance}),vt.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),vt.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},ri.prototype.onRemove=function(){vt.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),vt.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),vt.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},ri.prototype._createButton=function(t,e){var n=vt.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n},ri.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var ii,oi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},ai=function(e){function n(n,r){var i=this;if(e.call(this),(n instanceof t.window.HTMLElement||r)&&(n=t.extend({element:n},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=vt.create("div"),this._element.setAttribute("aria-label","Map marker");var o=vt.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var a=vt.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var s=vt.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var u=vt.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var h=c[l],f=vt.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",h.rx),f.setAttributeNS(null,"ry",h.ry),u.appendChild(f)}var p=vt.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var d=vt.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(d);var v=vt.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var g=vt.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(g);var m=vt.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var y=vt.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=vt.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var b=vt.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),y.appendChild(_),y.appendChild(b),s.appendChild(u),s.appendChild(p),s.appendChild(v),s.appendChild(m),s.appendChild(y),o.appendChild(s),this._element.appendChild(o),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),this._element.addEventListener("mousedown",function(t){t.preventDefault()}),this._element.addEventListener("focus",function(){var t=i._map.getContainer();t.scrollTop=0,t.scrollLeft=0}),ct(this._element,this._anchor,"marker"),this._popup=null}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),vt.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},n.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=lt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),vt.setTransform(this._element,oi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+n+" "+e)}},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},n.prototype.getRotation=function(){return this._rotation},n.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},n.prototype.getRotationAlignment=function(){return this._rotationAlignment},n.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},n.prototype.getPitchAlignment=function(){return this._pitchAlignment},n}(t.Evented),si={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ui=0,li=!1,ci=function(e){function n(n){e.call(this),this.options=t.extend({},si,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=vt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==ii?n(ii):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){n(ii="denied"!==t.state)}):n(ii=!!t.window.navigator.geolocation),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),vt.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ui=0,li=!1},n.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},n.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},n.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},n.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})},n.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},n.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},n.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},n.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&li)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;if(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=vt.create("button","mapboxgl-ctrl-geolocate",this._container),vt.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=vt.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ai(this._dotElement),this._circleElement=vt.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ai({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ui--,li=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ui>1?(e={maximumAge:6e5,timeout:0},li=!0):(e=this.options.positionOptions,li=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),hi={maxWidth:100,unit:"metric"},fi=function(e){this.options=t.extend({},hi,e),t.bindAll(["_onMove","setUnit"],this)};fi.prototype.getDefaultPosition=function(){return"bottom-left"},fi.prototype._onMove=function(){ht(this._map,this._container,this.options)},fi.prototype.onAdd=function(t){return this._map=t,this._container=vt.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},fi.prototype.onRemove=function(){vt.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},fi.prototype.setUnit=function(t){this.options.unit=t,ht(this._map,this._container,this.options)};var pi=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};pi.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=vt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},pi.prototype.onRemove=function(){vt.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},pi.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},pi.prototype._setupUI=function(){var e=this._fullscreenButton=vt.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);vt.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},pi.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},pi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},pi.prototype._isFullscreen=function(){return this._fullscreen},pi.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},pi.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var di={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},vi=function(e){function n(n){e.call(this),this.options=t.extend(Object.create(di),n),t.bindAll(["_update","_onClose","remove"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(e){var n=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(t){n._update(t.point)}),this._map.on("mouseup",function(t){n._update(t.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&vt.remove(this._content),this._container&&(vt.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},n.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",function(e){t._update(e.point)}),this._map.on("drag",function(e){t._update(e.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},n.prototype.getElement=function(){return this._container},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},n.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},n.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},n.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},n.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},n.prototype._createContent=function(){this._content&&vt.remove(this._content),this._content=vt.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=vt.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},n.prototype._update=function(e){var n=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=vt.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=vt.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return n._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=lt(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),i=this.options.anchor,o=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=r.y+o.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var l=r.add(o[i]).round();vt.setTransform(this._container,oi[i]+" translate("+l.x+"px,"+l.y+"px)"),ct(this._container,i,"popup")}},n.prototype._onClose=function(){this.remove()},n}(t.Evented),gi={version:t.version,supported:dt,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:ei,NavigationControl:ri,GeolocateControl:ci,AttributionControl:Hr,ScaleControl:fi,FullscreenControl:pi,Popup:vi,Marker:ai,Style:dn,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return De.workerCount},set workerCount(t){De.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return gi}),r})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,a.default)((0,f.default)(t)&&t.length>=1,"Must merge at least 1 JSON schema."),u.default.apply(void 0,[{}].concat(i(t),[function(t,e,n){if(!(0,c.default)(t)){if("required"===n)return(0,d.default)(t.concat(e));if((0,g.default)(t)){if(!(0,g.default)(e))throw new Error('Failed to merge schemas because "'+n+'" has different values.')}else a.default.deepEqual(t,e,'Failed to merge schemas because "'+n+'" has different values: '+JSON.stringify(t)+" and "+JSON.stringify(e)+".")}}]))};var o=n(993),a=r(o),s=n(1124),u=r(s),l=n(1122),c=r(l),h=n(1121),f=r(h),p=n(1125),d=r(p),v=n(1123),g=r(v);t.exports=e.default},function(t,e,n){"use strict";n(239),n(240),n(241)},function(t,e,n){"use strict";var r=(n(1241),n(429));n(119),n(239),n(240),n(1239),n(241),n(430);n.d(e,"a",function(){return r.a});n(242),n(432),n(431),n(434),n(433),n(988),new r.a({id:"probe.gl"})},function(t,e,n){"use strict";n(119).e.probe={}},function(t,e,n){"use strict";function r(t){var e=new i(i._61);return e._81=1,e._65=t,e}var i=n(435);t.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return s;if(void 0===t)return u;if(!0===t)return o;if(!1===t)return a;if(0===t)return l;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(t){return new i(function(e,n){n(t)})}return r(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function r(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(a,s._65):(2===s._81&&n(s._65),void s.then(function(t){r(a,t)},n))}var u=s.then;if("function"==typeof u){return void new i(u.bind(s)).then(function(t){r(a,t)},n)}}e[a]=s,0==--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)r(a,e[a])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype.catch=function(t){return this.then(null,t)}},function(t,e,n){"use strict";function r(){l=!1,s._10=null,s._97=null}function i(t){function e(e){(t.allRejections||a(h[e].error,t.whitelist||u))&&(h[e].displayId=c++,t.onUnhandled?(h[e].logged=!0,t.onUnhandled(h[e].displayId,h[e].error)):(h[e].logged=!0,o(h[e].displayId,h[e].error)))}function n(e){h[e].logged&&(t.onHandled?t.onHandled(h[e].displayId,h[e].error):h[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[e].displayId+".")))}t=t||{},l&&r(),l=!0;var i=0,c=0,h={};s._10=function(t){2===t._81&&h[t._72]&&(h[t._72].logged?n(t._72):clearTimeout(h[t._72].timeout),delete h[t._72])},s._97=function(t,n){0===t._45&&(t._72=i++,h[t._72]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._72),a(n,u)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function a(t,e){return e.some(function(e){return t instanceof e})}var s=n(435),u=[ReferenceError,TypeError,RangeError],l=!1;e.disable=r,e.enable=i},function(t,e,n){(function(t,e){var r;!function(r){!function(t){function n(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=n(r);void 0===i.Reflect?i.Reflect=r:o=n(i.Reflect,o),t(o)}(function(e){function r(t,e,n,r){if(E(n)){if(!j(t))throw new TypeError;if(!D(e))throw new TypeError;return p(t,e)}if(!j(t))throw new TypeError;if(!C(e))throw new TypeError;if(!C(r)&&!E(r)&&!M(r))throw new TypeError;return M(r)&&(r=void 0),n=O(n),d(t,e,n,r)}function i(t,e){function n(n,r){if(!C(n))throw new TypeError;if(!E(r)&&!R(r))throw new TypeError;b(t,e,n,r)}return n}function o(t,e,n,r){if(!C(n))throw new TypeError;return E(r)||(r=O(r)),b(t,e,n,r)}function a(t,e,n){if(!C(e))throw new TypeError;return E(n)||(n=O(n)),g(t,e,n)}function s(t,e,n){if(!C(e))throw new TypeError;return E(n)||(n=O(n)),m(t,e,n)}function u(t,e,n){if(!C(e))throw new TypeError;return E(n)||(n=O(n)),y(t,e,n)}function l(t,e,n){if(!C(e))throw new TypeError;return E(n)||(n=O(n)),_(t,e,n)}function c(t,e){if(!C(t))throw new TypeError;return E(e)||(e=O(e)),x(t,e)}function h(t,e){if(!C(t))throw new TypeError;return E(e)||(e=O(e)),w(t,e)}function f(t,e,n){if(!C(e))throw new TypeError;E(n)||(n=O(n));var r=v(e,n,!1);if(E(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=at.get(e);return i.delete(n),i.size>0||(at.delete(e),!0)}function p(t,e){for(var n=t.length-1;n>=0;--n){var r=t[n],i=r(e);if(!E(i)&&!M(i)){if(!D(i))throw new TypeError;e=i}}return e}function d(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=t[i],a=o(e,n,r);if(!E(a)&&!M(a)){if(!C(a))throw new TypeError;r=a}}return r}function v(t,e,n){var r=at.get(t);if(E(r)){if(!n)return;r=new rt,at.set(t,r)}var i=r.get(e);if(E(i)){if(!n)return;i=new rt,r.set(e,i)}return i}function g(t,e,n){if(m(t,e,n))return!0;var r=V(e);return!M(r)&&g(t,r,n)}function m(t,e,n){var r=v(e,n,!1);return!E(r)&&k(r.has(t))}function y(t,e,n){if(m(t,e,n))return _(t,e,n);var r=V(e);return M(r)?void 0:y(t,r,n)}function _(t,e,n){var r=v(e,n,!1);if(!E(r))return r.get(t)}function b(t,e,n,r){v(n,r,!0).set(t,e)}function x(t,e){var n=w(t,e),r=V(t);if(null===r)return n;var i=x(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new it,a=[],s=0,u=n;s<u.length;s++){var l=u[s],c=o.has(l);c||(o.add(l),a.push(l))}for(var h=0,f=i;h<f.length;h++){var l=f[h],c=o.has(l);c||(o.add(l),a.push(l))}return a}function w(t,e){var n=[],r=v(t,e,!1);if(E(r))return n;for(var i=r.keys(),o=z(i),a=0;;){var s=N(o);if(!s)return n.length=a,n;var u=F(s);try{n[a]=u}catch(t){try{U(o)}finally{throw t}}a++}}function S(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function E(t){return void 0===t}function M(t){return null===t}function T(t){return"symbol"==typeof t}function C(t){return"object"==typeof t?null!==t:"function"==typeof t}function A(t,e){switch(S(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=B(t,Z);if(void 0!==r){var i=r.call(t,n);if(C(i))throw new TypeError;return i}return P(t,"default"===n?"number":n)}function P(t,e){if("string"===e){var n=t.toString;if(L(n)){var r=n.call(t);if(!C(r))return r}var i=t.valueOf;if(L(i)){var r=i.call(t);if(!C(r))return r}}else{var i=t.valueOf;if(L(i)){var r=i.call(t);if(!C(r))return r}var o=t.toString;if(L(o)){var r=o.call(t);if(!C(r))return r}}throw new TypeError}function k(t){return!!t}function I(t){return""+t}function O(t){var e=A(t,3);return T(e)?e:I(e)}function j(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function L(t){return"function"==typeof t}function D(t){return"function"==typeof t}function R(t){switch(S(t)){case 3:case 4:return!0;default:return!1}}function B(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!L(n))throw new TypeError;return n}}function z(t){var e=B(t,K);if(!L(e))throw new TypeError;var n=e.call(t);if(!C(n))throw new TypeError;return n}function F(t){return t.value}function N(t){var e=t.next();return!e.done&&e}function U(t){var e=t.return;e&&e.call(t)}function V(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===et)return e;if(e!==et)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i?e:i===t?e:i}function G(){function t(t,e){return t}function e(t,e){return e}function n(t,e){return[t,e]}var r={},i=[],o=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[K]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var e=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:e,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=i,this._values=i),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=i,this._values=i),{value:t,done:!0}},t}();return function(){function i(){this._keys=[],this._values=[],this._cacheKey=r,this._cacheIndex=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this._find(t,!1)>=0},i.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},i.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},i.prototype.delete=function(t){var e=this._find(t,!1);if(e>=0){for(var n=this._keys.length,i=e+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=r,this._cacheIndex=-2),!0}return!1},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=r,this._cacheIndex=-2},i.prototype.keys=function(){return new o(this._keys,this._values,t)},i.prototype.values=function(){return new o(this._keys,this._values,e)},i.prototype.entries=function(){return new o(this._keys,this._values,n)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[K]=function(){return this.entries()},i.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},i}()}function q(){return function(){function t(){this._map=new rt}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[K]=function(){return this.keys()},t}()}function H(){function t(){var t;do{t="@@WeakMap@@"+i()}while(tt.has(a,t));return a[t]=!0,t}function e(t,e){if(!X.call(t,s)){if(!e)return;Object.defineProperty(t,s,{value:tt.create()})}return t[s]}function n(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function r(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):n(new Uint8Array(t),t):n(new Array(t),t)}function i(){var t=r(o);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var e="",n=0;n<o;++n){var i=t[n];4!==n&&6!==n&&8!==n||(e+="-"),i<16&&(e+="0"),e+=i.toString(16).toLowerCase()}return e}var o=16,a=tt.create(),s=t();return function(){function n(){this._key=t()}return n.prototype.has=function(t){var n=e(t,!1);return void 0!==n&&tt.has(n,this._key)},n.prototype.get=function(t){var n=e(t,!1);return void 0!==n?tt.get(n,this._key):void 0},n.prototype.set=function(t,n){return e(t,!0)[this._key]=n,this},n.prototype.delete=function(t){var n=e(t,!1);return void 0!==n&&delete n[this._key]},n.prototype.clear=function(){this._key=t()},n}()}function Y(t){return t.__=void 0,delete t.__,t}var X=Object.prototype.hasOwnProperty,W="function"==typeof Symbol,Z=W&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",K=W&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",J="function"==typeof Object.create,Q={__proto__:[]}instanceof Array,$=!J&&!Q,tt={create:J?function(){return Y(Object.create(null))}:Q?function(){return Y({__proto__:null})}:function(){return Y({})},has:$?function(t,e){return X.call(t,e)}:function(t,e){return e in t},get:$?function(t,e){return X.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},et=Object.getPrototypeOf(Function),nt="object"==typeof t&&n.i({NODE_ENV:"production",PUBLIC_URL:"."})&&"true"===n.i({NODE_ENV:"production",PUBLIC_URL:"."}).REFLECT_METADATA_USE_MAP_POLYFILL,rt=nt||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?G():Map,it=nt||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?q():Set,ot=nt||"function"!=typeof WeakMap?H():WeakMap,at=new ot;e("decorate",r),e("metadata",i),e("defineMetadata",o),e("hasMetadata",a),e("hasOwnMetadata",s),e("getMetadata",u),e("getOwnMetadata",l),e("getMetadataKeys",c),e("getOwnMetadataKeys",h),e("deleteMetadata",f)})}(r||(r={}))}).call(e,n(61),n(46))},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(1246),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}}).call(e,n(46))},function(t,e,n){(function(e){!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),s=new p(r||[]);return a._invoke=l(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function n(e,i,o,a){var s=r(t[e],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&y.call(l,"__await")?Promise.resolve(l.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):Promise.resolve(l).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function i(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n));var o;this._invoke=i}function l(t,e,n){var i=M;return function(o,a){if(i===C)throw new Error("Generator is already running");if(i===A){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===P)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===M)throw i=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=C;var l=r(t,e,n);if("normal"===l.type){if(i=n.done?A:T,l.arg===P)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=A,n.method="throw",n.arg=l.arg)}}}function c(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,c(t,e),"throw"===e.method))return P;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,P):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(y.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=g,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,m=Object.prototype,y=m.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag",S="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(S&&(t.exports=E));E=e.regeneratorRuntime=S?t.exports:{},E.wrap=n;var M="suspendedStart",T="suspendedYield",C="executing",A="completed",P={},k={};k[b]=function(){return this};var I=Object.getPrototypeOf,O=I&&I(I(d([])));O&&O!==m&&y.call(O,b)&&(k=O);var j=a.prototype=i.prototype=Object.create(k);o.prototype=j.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(j),t},E.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[x]=function(){return this},E.AsyncIterator=u,E.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return E.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(j),j[w]="Generator",j[b]=function(){return this},j.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),P}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),P}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,n(46))},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return"undefined"!=typeof atob?atob(t):"base64:"+t}function e(t){var e=new Error("(regl) "+t);throw console.error(e),e}function n(t,n){t||e(n)}function r(t){return t?": "+t:""}function i(t,n,i){t in n||e("unknown parameter ("+t+")"+r(i)+". possible values: "+Object.keys(n).join())}function o(t,n){Zt(t)||e("invalid parameter type"+r(n)+". must be a typed array")}function a(t,n,i){typeof t!==n&&e("invalid parameter type"+r(i)+". expected "+n+", got "+typeof t)}function s(t,n){t>=0&&(0|t)===t||e("invalid parameter type, ("+t+")"+r(n)+". must be a nonnegative integer")}function u(t,n,i){n.indexOf(t)<0&&e("invalid value"+r(i)+". must be one of: "+n)}function l(t){Object.keys(t).forEach(function(t){Qt.indexOf(t)<0&&e('invalid regl constructor argument "'+t+'". must be one of '+Qt)})}function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function h(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(t,e){this.number=t,this.line=e,this.errors=[]}function p(t,e,n){this.file=t,this.line=e,this.message=n}function d(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function v(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function g(e,n){var r=e.split("\n"),i=1,o=0,a={unknown:new h,0:new h};a.unknown.name=a[0].name=n||d(),a.unknown.lines.push(new f(0,""));for(var s=0;s<r.length;++s){var u=r[s],l=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(u);if(l)switch(l[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(l[2]);c&&(i=0|c[1],c[2]&&((o=0|c[2])in a||(a[o]=new h)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);p&&(a[o].name=p[1]?t(p[2]):p[2])}a[o].lines.push(new f(i++,u))}return Object.keys(a).forEach(function(t){var e=a[t];e.lines.forEach(function(t){e.index[t.number]=t})}),a}function m(t){var e=[];return t.split("\n").forEach(function(t){if(!(t.length<5)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(t);n?e.push(new p(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new p("unknown",0,t))}}),e}function y(t,e){e.forEach(function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)})}function _(t,e,r,i,o){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),s=i===t.FRAGMENT_SHADER?"fragment":"vertex";T(r,"string",s+" shader source must be a string",o);var u=g(r,o),l=m(a);y(u,l),Object.keys(u).forEach(function(t){function e(t,e){r.push(t),i.push(e||"")}var n=u[t];if(n.hasErrors){var r=[""],i=[""];e("file number "+t+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach(function(t){if(t.errors.length>0){e(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),e(t.line+Jt,"color:red; background-color:yellow; font-weight:bold");var n=0;t.errors.forEach(function(r){var i=r.message,o=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(o){var a=o[1];switch(i=o[2],a){case"assign":a="="}n=Math.max(t.line.indexOf(a,n),0)}else n=0;e(c("| ",6)),e(c("^^^",n+3)+Jt,"font-weight:bold"),e(c("| ",6)),e(i+Jt,"font-weight:bold")}),e(c("| ",6)+Jt)}else e(c(t.number,4)+"|  "),e(t.line+Jt,"color:red")}),"undefined"==typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}}),n.raise("Error compiling "+s+" shader, "+u[0].name)}}function b(t,e,r,i,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),s=g(r,o),u=g(i,o),l='Error linking program with vertex shader, "'+u[0].name+'", and fragment shader "'+s[0].name+'"';"undefined"!=typeof document?console.log("%c"+l+Jt+"%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+Jt+a),n.raise(l)}}function x(t){t._commandRef=d()}function w(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach(function(e){t[r.id(e)]=!0})}x(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function S(t,n){var r=v();e(t+" in command "+(n||d())+("unknown"===r?"":" called from "+r))}function E(t,e,n){t||S(e,n||d())}function M(t,e,n,i){t in e||S("unknown parameter ("+t+")"+r(n)+". possible values: "+Object.keys(e).join(),i||d())}function T(t,e,n,i){typeof t!==e&&S("invalid parameter type"+r(n)+". expected "+e+", got "+typeof t,i||d())}function C(t){t()}function A(t,e,n){t.texture?u(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):u(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}function P(t,e){return t===se||t===ae||t===ue?2:t===le?4:ce[t]*e}function k(t){return!(t&t-1||!t)}function I(t,e,r){var i,o=e.width,a=e.height,s=e.channels;n(o>0&&o<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),t.wrapS===$t&&t.wrapT===$t||n(k(o)&&k(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==o&&1!==a&&n(t.minFilter!==ee&&t.minFilter!==re&&t.minFilter!==ne&&t.minFilter!==ie,"min filter requires mipmap"):(n(k(o)&&k(a),"texture must be a square power of 2 to support mipmapping"),n(e.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),e.type===oe&&(r.extensions.indexOf("oes_texture_float_linear")<0&&n(t.minFilter===te&&t.magFilter===te,"filter not supported, must enable oes_texture_float_linear"),n(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(i=0;i<16;++i)if(u[i]){var l=o>>i,c=a>>i;n(e.mipmask&1<<i,"missing mipmap data");var h=u[i];if(n(h.width===l&&h.height===c,"invalid shape for mip images"),n(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed);else if(h.data){var f=Math.ceil(P(h.type,s)*l/h.unpackAlignment)*h.unpackAlignment;n(h.data.byteLength===f*c,"invalid data for image, buffer size is inconsistent with image format")}else h.element||h.copy}else t.genMipmaps||n(0==(e.mipmask&1<<i),"extra mipmap data");e.compressed&&n(!t.genMipmaps,"mipmap generation for compressed images not supported")}function O(t,e,r,i){var o=t.width,a=t.height,s=t.channels;n(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),n(o===a,"cube map must be square"),n(e.wrapS===$t&&e.wrapT===$t,"wrap mode not supported by cube map");for(var u=0;u<r.length;++u){var l=r[u];n(l.width===o&&l.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(n(!l.compressed,"can not generate mipmap for compressed textures"),n(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=l.images,h=0;h<16;++h){var f=c[h];if(f){var p=o>>h,d=a>>h;n(l.mipmask&1<<h,"missing mipmap data"),n(f.width===p&&f.height===d,"invalid shape for mip images"),n(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed||(f.data?n(f.data.byteLength===p*d*Math.max(P(f.type,s),f.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):f.element||f.copy)}}}}function j(t,e){this.id=fe++,this.type=t,this.data=e}function L(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function D(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+L(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return D(t.substr(0,r.index)).concat(D(r[1])).concat(D(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+L(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(D(i[a]));return o}function R(t){return"["+D(t).join("][")+"]"}function B(t,e){return new j(t,R(e+""))}function z(t){return"function"==typeof t&&!t._reglType||t instanceof j}function F(t,e){return"function"==typeof t?new j(pe,t):t}function N(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function U(t,e,n){function r(){var e=window.innerWidth,r=window.innerHeight;if(t!==document.body){var i=t.getBoundingClientRect();e=i.right-i.left,r=i.bottom-i.top}o.width=n*e,o.height=n*r,Kt(o.style,{width:e+"px",height:r+"px"})}function i(){window.removeEventListener("resize",r),t.removeChild(o)}var o=document.createElement("canvas");return Kt(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",Kt(t.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:o,onDestroy:i}}function V(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function G(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}function q(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}function H(t){return"string"==typeof t?t.split():(he(Array.isArray(t),"invalid extension array"),t)}function Y(t){return"string"==typeof t?(he("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function X(t){var e,n,r,i,o=t||{},a={},s=[],u=[],l="undefined"==typeof window?1:window.devicePixelRatio,c=!1,h=function(t){t&&he.raise(t)},f=function(){};if("string"==typeof o?(he("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),he(e,"invalid query string for element")):"object"==typeof o?G(o)?e=o:q(o)?(i=o,r=i.canvas):(he.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=Y(o.canvas):"container"in o&&(n=Y(o.container)),"attributes"in o&&(a=o.attributes,he.type(a,"object","invalid context attributes")),"extensions"in o&&(s=H(o.extensions)),"optionalExtensions"in o&&(u=H(o.optionalExtensions)),"onDone"in o&&(he.type(o.onDone,"function","invalid or missing onDone callback"),h=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(l=+o.pixelRatio,he(l>0,"invalid pixel ratio"))):he.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){he("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=U(n||document.body,h,l);if(!p)return null;r=p.canvas,f=p.onDestroy}i=V(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:l,profile:c,onDone:h,onDestroy:f}:(f(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function W(t,e){function n(e){he.type(e,"string","extension name must be string");var n,i=e.toLowerCase();try{n=r[i]=t.getExtension(i)}catch(t){}return!!n}for(var r={},i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!n(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(r[t]&&!n(t))throw new Error("(regl): error restoring extension "+t)})}}}function Z(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function K(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function J(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,(e|=n)|t>>1}function Q(){function t(t){var e=K(t),n=i[J(e)>>2];return n.length>0?n.pop():new ArrayBuffer(e)}function e(t){i[J(t.byteLength)>>2].push(t)}function n(e,n){var r=null;switch(e){case me:r=new Int8Array(t(n),0,n);break;case ye:r=new Uint8Array(t(n),0,n);break;case _e:r=new Int16Array(t(2*n),0,n);break;case be:r=new Uint16Array(t(2*n),0,n);break;case xe:r=new Int32Array(t(4*n),0,n);break;case we:r=new Uint32Array(t(4*n),0,n);break;case Se:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function r(t){e(t.buffer)}var i=Z(8,function(){return[]});return{alloc:t,free:e,allocType:n,freeType:r}}function $(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||Zt(t.data))}function tt(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function et(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function nt(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],l=0;l<n;++l)for(var c=u[l],h=0;h<r;++h)i[a++]=c[h]}function rt(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n==4){var u=e[n+1],l=e[n+2],c=e[n+3];for(a=0;a<s;++a)nt(t[a],u,l,c,r,i),i+=o}else for(a=0;a<s;++a)rt(t[a],e,n+1,r,i),i+=o}function it(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||Ee.allocType(n,i);switch(e.length){case 0:break;case 1:tt(t,e[0],a);break;case 2:et(t,e[0],e[1],a);break;case 3:nt(t,e[0],e[1],e[2],a,0);break;default:rt(t,e,0,a,0)}return a}function ot(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}function at(t){return 0|pn[Object.prototype.toString.call(t)]}function st(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function ut(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var l=0;l<r;++l)t[s++]=e[i*u+o*l+a]}function lt(t,e,n,r){function i(e){this.id=f++,this.buffer=t.createBuffer(),this.type=e,this.usage=An,this.byteLength=0,this.dimension=1,this.dtype=kn,this.persistentData=null,n.profile&&(this.stats={size:0})}function o(t,e){var n=d.pop();return n||(n=new i(t)),n.bind(),u(n,e,Pn,0,1,!1),n}function a(t){d.push(t)}function s(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function u(t,e,n,r,i,o){var a;if(t.usage=n,Array.isArray(e)){if(t.dtype=r||In,e.length>0){var u;if(Array.isArray(e[0])){a=Cn(e);for(var l=1,c=1;c<a.length;++c)l*=a[c];t.dimension=l,u=Tn(e,a,t.dtype),s(t,u,n),o?t.persistentData=u:Ee.freeType(u)}else if("number"==typeof e[0]){t.dimension=i;var h=Ee.allocType(t.dtype,e.length);st(h,e),s(t,h,n),o?t.persistentData=h:Ee.freeType(h)}else Zt(e[0])?(t.dimension=e[0].length,t.dtype=r||at(e[0])||In,u=Tn(e,[e.length,e[0].length],t.dtype),s(t,u,n),o?t.persistentData=u:Ee.freeType(u)):he.raise("invalid buffer data")}}else if(Zt(e))t.dtype=r||at(e),t.dimension=i,s(t,e,n),o&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if($(e)){a=e.shape;var f=e.stride,p=e.offset,d=0,v=0,g=0,m=0;1===a.length?(d=a[0],v=1,g=f[0],m=0):2===a.length?(d=a[0],v=a[1],g=f[0],m=f[1]):he.raise("invalid shape"),t.dtype=r||at(e.data)||In,t.dimension=v;var y=Ee.allocType(t.dtype,d*v);ut(y,e.data,d,v,g,m,p),s(t,y,n),o?t.persistentData=y:Ee.freeType(y)}else e instanceof ArrayBuffer?(t.dtype=kn,t.dimension=i,s(t,e,n),o&&(t.persistentData=new Uint8Array(new Uint8Array(e)))):he.raise("invalid buffer data")}function l(n){e.bufferCount--;for(var i=0;i<r.state.length;++i){var o=r.state[i];o.buffer===n&&(t.disableVertexAttribArray(i),o.buffer=null)}var a=n.buffer;he(a,"buffer must not be deleted already"),t.deleteBuffer(a),n.buffer=null,delete p[n.id]}function c(r,o,a,s){function c(e){var r=An,i=null,o=0,a=0,l=1;return Array.isArray(e)||Zt(e)||$(e)||e instanceof ArrayBuffer?i=e:"number"==typeof e?o=0|e:e&&(he.type(e,"object","buffer arguments must be an object, a number or an array"),"data"in e&&(he(null===i||Array.isArray(i)||Zt(i)||$(i),"invalid data for buffer"),i=e.data),"usage"in e&&(he.parameter(e.usage,Mn,"invalid buffer usage"),r=Mn[e.usage]),"type"in e&&(he.parameter(e.type,wn,"invalid buffer type"),a=wn[e.type]),"dimension"in e&&(he.type(e.dimension,"number","invalid dimension"),l=0|e.dimension),"length"in e&&(he.nni(o,"buffer length must be a nonnegative integer"),o=0|e.length)),d.bind(),i?u(d,i,r,a,l,s):(o&&t.bufferData(d.type,o,r),d.dtype=a||kn,d.usage=r,d.dimension=l,d.byteLength=o),n.profile&&(d.stats.size=d.byteLength*On[d.dtype]),c}function h(e,n){he(n+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,n,e)}function f(t,e){var n,r=0|(e||0);if(d.bind(),Zt(t)||t instanceof ArrayBuffer)h(t,r);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var i=Ee.allocType(d.dtype,t.length);st(i,t),h(i,r),Ee.freeType(i)}else if(Array.isArray(t[0])||Zt(t[0])){n=Cn(t);var o=Tn(t,n,d.dtype);h(o,r),Ee.freeType(o)}else he.raise("invalid buffer data")}else if($(t)){n=t.shape;var a=t.stride,s=0,u=0,l=0,f=0;1===n.length?(s=n[0],u=1,l=a[0],f=0):2===n.length?(s=n[0],u=n[1],l=a[0],f=a[1]):he.raise("invalid shape");var p=Array.isArray(t.data)?d.dtype:at(t.data),v=Ee.allocType(p,s*u);ut(v,t.data,s,u,l,f,t.offset),h(v,r),Ee.freeType(v)}else he.raise("invalid data for buffer subdata");return c}e.bufferCount++;var d=new i(o);return p[d.id]=d,a||c(r),c._reglType="buffer",c._buffer=d,c.subdata=f,n.profile&&(c.stats=d.stats),c.destroy=function(){l(d)},c}function h(){hn(p).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})}var f=0,p={};i.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){l(this)};var d=[];return n.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(p).forEach(function(e){t+=p[e].stats.size}),t}),{create:c,createStream:o,destroyStream:a,clear:function(){hn(p).forEach(l),d.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof i?t._buffer:null},restore:h,_initBuffer:u}}function ct(t,e,n,r){function i(t){this.id=h++,c[this.id]=this,this.buffer=t,this.primType=Vn,this.vertCount=0,this.type=0}function o(t){var e=p.pop();return e||(e=new i(n.create(null,Zn,!0,!1)._buffer)),s(e,t,Kn,-1,-1,0,0),e}function a(t){p.push(t)}function s(r,i,o,a,s,u,l){if(r.buffer.bind(),i){var c=l;l||Zt(i)&&(!$(i)||Zt(i.data))||(c=e.oes_element_index_uint?Wn:Yn),n._initBuffer(r.buffer,i,o,c,3)}else t.bufferData(Zn,u,o),r.buffer.dtype=h||qn,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=u;var h=l;if(!l){switch(r.buffer.dtype){case qn:case Gn:h=qn;break;case Yn:case Hn:h=Yn;break;case Wn:case Xn:h=Wn;break;default:he.raise("unsupported type for element array")}r.buffer.dtype=h}r.type=h,he(h!==Wn||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var f=s;f<0&&(f=r.buffer.byteLength,h===Yn?f>>=1:h===Wn&&(f>>=2)),r.vertCount=f;var p=a;if(a<0){p=Vn;var d=r.buffer.dimension;1===d&&(p=Nn),2===d&&(p=Un),3===d&&(p=Vn)}r.primType=p}function u(t){r.elementsCount--,he(null!==t.buffer,"must not double destroy elements"),delete c[t.id],t.buffer.destroy(),t.buffer=null}function l(t,e){function o(t){if(t)if("number"==typeof t)a(t),l.primType=Vn,l.vertCount=0|t,l.type=qn;else{var e=null,n=Jn,r=-1,i=-1,u=0,c=0;Array.isArray(t)||Zt(t)||$(t)?e=t:(he.type(t,"object","invalid arguments for elements"),"data"in t&&(e=t.data,he(Array.isArray(e)||Zt(e)||$(e),"invalid data for element buffer")),"usage"in t&&(he.parameter(t.usage,Mn,"invalid element buffer usage"),n=Mn[t.usage]),"primitive"in t&&(he.parameter(t.primitive,Fn,"invalid element buffer primitive"),r=Fn[t.primitive]),"count"in t&&(he("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),i=0|t.count),"type"in t&&(he.parameter(t.type,f,"invalid buffer type"),c=f[t.type]),"length"in t?u=0|t.length:(u=i,c===Yn||c===Hn?u*=2:c!==Wn&&c!==Xn||(u*=4))),s(l,e,n,r,i,u,c)}else a(),l.primType=Vn,l.vertCount=0,l.type=qn;return o}var a=n.create(null,Zn,!0),l=new i(a._buffer);return r.elementsCount++,o(t),o._reglType="elements",o._elements=l,o.subdata=function(t,e){return a.subdata(t,e),o},o.destroy=function(){u(l)},o}var c={},h=0,f={uint8:qn,uint16:Yn};e.oes_element_index_uint&&(f.uint32=Wn),i.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:l,createStream:o,destroyStream:a,getElements:function(t){return"function"==typeof t&&t._elements instanceof i?t._elements:null},clear:function(){hn(c).forEach(u)}}}function ht(t){for(var e=Ee.allocType(tr,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Qn[0]=t[n];var r=$n[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function ft(t){return Array.isArray(t)||Zt(t)}function pt(t){return"[object "+t+"]"}function dt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function vt(t){return!!Array.isArray(t)&&!(0===t.length||!ft(t[0]))}function gt(t){return Object.prototype.toString.call(t)}function mt(t){return gt(t)===fi}function yt(t){return gt(t)===pi}function _t(t){return gt(t)===di}function bt(t){return gt(t)===vi}function xt(t){return gt(t)===gi}function wt(t){if(!t)return!1;var e=gt(t);return mi.indexOf(e)>=0||(dt(t)||vt(t)||$(t))}function St(t){return 0|pn[Object.prototype.toString.call(t)]}function Et(t,e){var n=e.length;switch(t.type){case Dr:case Rr:case Br:case zr:var r=Ee.allocType(t.type,n);r.set(e),t.data=r;break;case wr:t.data=ht(e);break;default:he.raise("unsupported texture type, must specify a typed array")}}function Mt(t,e){return Ee.allocType(t.type===wr?zr:t.type,e)}function Tt(t,e){t.type===wr?(t.data=ht(e),Ee.freeType(e)):t.data=e}function Ct(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,l=a*s*u,c=Mt(t,l),h=0,f=0;f<s;++f)for(var p=0;p<a;++p)for(var d=0;d<u;++d)c[h++]=e[n*p+r*f+i*d+o];Tt(t,c)}function At(t,e,n,r,i,o){var a;if(a=void 0!==_i[t]?_i[t]:hi[t]*yi[e],o&&(a*=6),i){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function Pt(t,e,n,r,i,o,a){function s(){this.internalformat=ar,this.format=ar,this.type=Dr,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=si,this.width=0,this.height=0,this.channels=0}function u(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function l(t,r){if("object"==typeof r&&r){if("premultiplyAlpha"in r&&(he.type(r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=r.premultiplyAlpha),"flipY"in r&&(he.type(r.flipY,"boolean","invalid texture flip"),t.flipY=r.flipY),"alignment"in r&&(he.oneOf(r.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=r.alignment),"colorSpace"in r&&(he.parameter(r.colorSpace,z,"invalid colorSpace"),t.colorSpace=z[r.colorSpace]),"type"in r){var i=r.type;he(e.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),he(e.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),he(e.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),he.parameter(i,F,"invalid texture type"),t.type=F[i]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in r?(he(Array.isArray(r.shape)&&r.shape.length>=2,"shape must be an array"),o=r.shape[0],a=r.shape[1],3===r.shape.length&&(s=r.shape[2],he(s>0&&s<=4,"invalid number of channels"),u=!0),he(o>=0&&o<=n.maxTextureSize,"invalid width"),he(a>=0&&a<=n.maxTextureSize,"invalid height")):("radius"in r&&(o=a=r.radius,he(o>=0&&o<=n.maxTextureSize,"invalid radius")),"width"in r&&(o=r.width,he(o>=0&&o<=n.maxTextureSize,"invalid width")),"height"in r&&(a=r.height,he(a>=0&&a<=n.maxTextureSize,"invalid height")),"channels"in r&&(s=r.channels,he(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var l=!1;if("format"in r){var c=r.format;he(e.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),he.parameter(c,N,"invalid texture format");var h=t.internalformat=N[c];t.format=Z[h],c in F&&("type"in r||(t.type=F[c])),c in U&&(t.compressed=!0),l=!0}!u&&l?t.channels=hi[t.format]:u&&!l?t.channels!==ci[t.format]&&(t.format=t.internalformat=ci[t.channels]):l&&u&&he(t.channels===hi[t.format],"number of channels inconsistent with specified format")}}function c(e){t.pixelStorei(ii,e.flipY),t.pixelStorei(oi,e.premultiplyAlpha),t.pixelStorei(ai,e.colorSpace),t.pixelStorei(ri,e.unpackAlignment)}function h(){s.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function f(t,e){var r=null;if(wt(e)?r=e:e&&(he.type(e,"object","invalid pixel data type"),l(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),wt(e.data)&&(r=e.data)),he(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),e.copy){he(!r,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||a-t.yOffset,t.needsCopy=!0,he(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<a&&t.width>0&&t.width<=o&&t.height>0&&t.height<=a,"copy texture read out of bounds")}else if(r){if(Zt(r))t.channels=t.channels||4,t.data=r,"type"in e||t.type!==Dr||(t.type=St(r));else if(dt(r))t.channels=t.channels||4,Et(t,r),t.alignment=1,t.needsFree=!0;else if($(r)){var s=r.data;Array.isArray(s)||t.type!==Dr||(t.type=St(s));var u,c,h,f,p,d,v=r.shape,g=r.stride;3===v.length?(h=v[2],d=g[2]):(he(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),h=1,d=1),u=v[0],c=v[1],f=g[0],p=g[1],t.alignment=1,t.width=u,t.height=c,t.channels=h,t.format=t.internalformat=ci[h],t.needsFree=!0,Ct(t,s,f,p,d,r.offset)}else if(mt(r)||yt(r))mt(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(_t(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(bt(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(xt(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(vt(r)){var m=t.width||r[0].length,y=t.height||r.length,_=t.channels;_=ft(r[0][0])?_||r[0][0].length:_||1;for(var b=fn.shape(r),x=1,w=0;w<b.length;++w)x*=b[w];var S=Mt(t,x);fn.flatten(r,b,"",S),Tt(t,S),t.alignment=1,t.width=m,t.height=y,t.channels=_,t.format=t.internalformat=ci[_],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===zr?he(n.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===wr&&he(n.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function p(e,n,i){var o=e.element,a=e.data,s=e.internalformat,u=e.format,l=e.type,h=e.width,f=e.height,p=e.channels;if(c(e),o)t.texImage2D(n,i,u,u,l,o);else if(e.compressed)t.compressedTexImage2D(n,i,s,h,f,0,a);else if(e.needsCopy)r(),t.copyTexImage2D(n,i,u,e.xOffset,e.yOffset,h,f,0);else{var d=!a;d&&(a=Ee.zero.allocType(l,h*f*p)),t.texImage2D(n,i,u,h,f,0,u,l,a),d&&a&&Ee.zero.freeType(a)}}function d(e,n,i,o,a){var s=e.element,u=e.data,l=e.internalformat,h=e.format,f=e.type,p=e.width,d=e.height;c(e),s?t.texSubImage2D(n,a,i,o,h,f,s):e.compressed?t.compressedTexSubImage2D(n,a,i,o,l,p,d,u):e.needsCopy?(r(),t.copyTexSubImage2D(n,a,i,o,e.xOffset,e.yOffset,p,d)):t.texSubImage2D(n,a,i,o,p,d,h,f,u)}function v(){return K.pop()||new h}function g(t){t.needsFree&&Ee.freeType(t.data),h.call(t),K.push(t)}function m(){s.call(this),this.genMipmaps=!1,this.mipmapHint=$r,this.mipmask=0,this.images=Array(16)}function y(t,e,n){var r=t.images[0]=v();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function _(t,e){var n=null;if(wt(e))n=t.images[0]=v(),u(n,t),f(n,e),t.mipmask=1;else if(l(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)n=t.images[i]=v(),u(n,t),n.width>>=i,n.height>>=i,f(n,r[i]),t.mipmask|=1<<i;else n=t.images[0]=v(),u(n,t),f(n,e),t.mipmask=1;u(t,t.images[0]),(t.compressed&&t.internalformat===Sr||t.internalformat===Er||t.internalformat===Mr||t.internalformat===Tr)&&he(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function b(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;p(n[r],e,r)}}function x(){var t=J.pop()||new m;s.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function w(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&g(e[n]),e[n]=null;J.push(t)}function S(){this.minFilter=Yr,this.magFilter=Yr,this.wrapS=Vr,this.wrapT=Vr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=$r}function E(t,e){if("min"in e){var r=e.min;he.parameter(r,B),t.minFilter=B[r],li.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;he.parameter(i,R),t.magFilter=R[i]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(he.parameter(s,D),o=a=D[s]):Array.isArray(s)&&(he.parameter(s[0],D),he.parameter(s[1],D),o=D[s[0]],a=D[s[1]])}else{if("wrapS"in e){var u=e.wrapS;he.parameter(u,D),o=D[u]}if("wrapT"in e){var l=e.wrapT;he.parameter(l,D),a=D[l]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var c=e.anisotropic;he("number"==typeof c&&c>=1&&c<=n.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var h=!1;switch(typeof e.mipmap){case"string":he.parameter(e.mipmap,L,"invalid mipmap hint"),t.mipmapHint=L[e.mipmap],t.genMipmaps=!0,h=!0;break;case"boolean":h=t.genMipmaps=e.mipmap;break;case"object":he(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,h=!0;break;default:he.raise("invalid mipmap type")}!h||"min"in e||(t.minFilter=Wr)}}function M(n,r){t.texParameteri(r,Hr,n.minFilter),t.texParameteri(r,qr,n.magFilter),t.texParameteri(r,Fr,n.wrapS),t.texParameteri(r,Nr,n.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(r,ni,n.anisotropic),n.genMipmaps&&(t.hint(Qr,n.mipmapHint),t.generateMipmap(r))}function T(e){s.call(this),this.mipmask=0,this.internalformat=ar,this.id=Q++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new S,a.profile&&(this.stats={size:0})}function C(e){t.activeTexture(ui),t.bindTexture(e.target,e.texture)}function A(){var e=nt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(rr,null)}function P(e){var n=e.texture;he(n,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(t.activeTexture(ui+r),t.bindTexture(i,null),nt[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete tt[e.id],o.textureCount--}function k(e,r){function i(t,e){var r=c.texInfo;S.call(r);var o=x();return"number"==typeof t?"number"==typeof e?y(o,0|t,0|e):y(o,0|t,0|t):t?(he.type(t,"object","invalid arguments to regl.texture"),E(r,t),_(o,t)):y(o,1,1),r.genMipmaps&&(o.mipmask=(o.width<<1)-1),c.mipmask=o.mipmask,u(c,o),he.texture2D(r,o,n),c.internalformat=o.internalformat,i.width=o.width,i.height=o.height,C(c),b(o,rr),M(r,rr),A(),w(o),a.profile&&(c.stats.size=At(c.internalformat,c.type,o.width,o.height,r.genMipmaps,!1)),i.format=q[c.internalformat],i.type=H[c.type],i.mag=Y[r.magFilter],i.min=X[r.minFilter],i.wrapS=W[r.wrapS],i.wrapT=W[r.wrapT],i}function s(t,e,n,r){he(!!t,"must specify image data");var o=0|e,a=0|n,s=0|r,l=v();return u(l,c),l.width=0,l.height=0,f(l,t),l.width=l.width||(c.width>>s)-o,l.height=l.height||(c.height>>s)-a,he(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),he(o>=0&&a>=0&&o+l.width<=c.width&&a+l.height<=c.height,"texture.subimage write out of bounds"),he(c.mipmask&1<<s,"missing mipmap data"),he(l.data||l.element||l.needsCopy,"missing image data"),C(c),d(l,rr,o,a,s),A(),g(l),i}function l(e,n){var r=0|e,o=0|n||r;if(r===c.width&&o===c.height)return i;i.width=c.width=r,i.height=c.height=o,C(c);for(var s,u=c.channels,l=c.type,h=0;c.mipmask>>h;++h){var f=r>>h,p=o>>h;if(!f||!p)break;s=Ee.zero.allocType(l,f*p*u),t.texImage2D(rr,h,c.format,f,p,0,c.format,c.type,s),s&&Ee.zero.freeType(s)}return A(),a.profile&&(c.stats.size=At(c.internalformat,c.type,r,o,!1,!1)),i}var c=new T(rr);return tt[c.id]=c,o.textureCount++,i(e,r),i.subimage=s,i.resize=l,i._reglType="texture2d",i._texture=c,a.profile&&(i.stats=c.stats),i.destroy=function(){c.decRef()},i}function I(e,r,i,s,c,h){function p(t,e,r,i,o,s){var c,h=k.texInfo;for(S.call(h),c=0;c<6;++c)I[c]=x();if("number"!=typeof t&&t)if("object"==typeof t)if(e)_(I[0],t),_(I[1],e),_(I[2],r),_(I[3],i),_(I[4],o),_(I[5],s);else if(E(h,t),l(k,t),"faces"in t){var f=t.faces;for(he(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),c=0;c<6;++c)he("object"==typeof f[c]&&!!f[c],"invalid input for cube map face"),u(I[c],k),_(I[c],f[c])}else for(c=0;c<6;++c)_(I[c],t);else he.raise("invalid arguments to cube map");else{var d=0|t||1;for(c=0;c<6;++c)y(I[c],d,d)}for(u(k,I[0]),n.npotTextureCube||he(er(k.width)&&er(k.height),"your browser does not support non power or two texture dimensions"),h.genMipmaps?k.mipmask=(I[0].width<<1)-1:k.mipmask=I[0].mipmask,he.textureCube(k,h,I,n),k.internalformat=I[0].internalformat,p.width=I[0].width,p.height=I[0].height,C(k),c=0;c<6;++c)b(I[c],or+c);for(M(h,ir),A(),a.profile&&(k.stats.size=At(k.internalformat,k.type,p.width,p.height,h.genMipmaps,!0)),p.format=q[k.internalformat],p.type=H[k.type],p.mag=Y[h.magFilter],p.min=X[h.minFilter],p.wrapS=W[h.wrapS],p.wrapT=W[h.wrapT],c=0;c<6;++c)w(I[c]);return p}function m(t,e,n,r,i){he(!!e,"must specify image data"),he("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,l=v();return u(l,k),l.width=0,l.height=0,f(l,e),l.width=l.width||(k.width>>s)-o,l.height=l.height||(k.height>>s)-a,he(k.type===l.type&&k.format===l.format&&k.internalformat===l.internalformat,"incompatible format for texture.subimage"),he(o>=0&&a>=0&&o+l.width<=k.width&&a+l.height<=k.height,"texture.subimage write out of bounds"),he(k.mipmask&1<<s,"missing mipmap data"),he(l.data||l.element||l.needsCopy,"missing image data"),C(k),d(l,or+t,o,a,s),A(),g(l),p}function P(e){var n=0|e;if(n!==k.width){p.width=k.width=n,p.height=k.height=n,C(k);for(var r=0;r<6;++r)for(var i=0;k.mipmask>>i;++i)t.texImage2D(or+r,i,k.format,n>>i,n>>i,0,k.format,k.type,null);return A(),a.profile&&(k.stats.size=At(k.internalformat,k.type,p.width,p.height,!1,!0)),p}}var k=new T(ir);tt[k.id]=k,o.cubeCount++;var I=new Array(6);return p(e,r,i,s,c,h),p.subimage=m,p.resize=P,p._reglType="textureCube",p._texture=k,a.profile&&(p.stats=k.stats),p.destroy=function(){k.decRef()},p}function O(){for(var e=0;e<et;++e)t.activeTexture(ui+e),t.bindTexture(rr,null),nt[e]=null;hn(tt).forEach(P),o.cubeCount=0,o.textureCount=0}function j(){for(var e=0;e<et;++e){var n=nt[e];n&&(n.bindCount=0,n.unit=-1,nt[e]=null)}hn(tt).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;n<32;++n)if(0!=(e.mipmask&1<<n))if(e.target===rr)t.texImage2D(rr,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(or+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);M(e.texInfo,e.target)})}var L={"don't care":$r,"dont care":$r,nice:ei,fast:ti},D={repeat:Ur,clamp:Vr,mirror:Gr},R={nearest:Yr,linear:Xr},B=Kt({mipmap:Jr,"nearest mipmap nearest":Wr,"linear mipmap nearest":Zr,"nearest mipmap linear":Kr,"linear mipmap linear":Jr},R),z={none:0,browser:si},F={uint8:Dr,rgba4:dr,rgb565:gr,"rgb5 a1":vr},N={alpha:sr,luminance:lr,"luminance alpha":cr,rgb:ur,rgba:ar,rgba4:hr,"rgb5 a1":fr,rgb565:pr},U={};e.ext_srgb&&(N.srgb=br,N.srgba=xr),e.oes_texture_float&&(F.float32=F.float=zr),e.oes_texture_half_float&&(F.float16=F["half float"]=wr),e.webgl_depth_texture&&(Kt(N,{depth:yr,"depth stencil":_r}),Kt(F,{uint16:Rr,uint32:Br,"depth stencil":mr})),e.webgl_compressed_texture_s3tc&&Kt(U,{"rgb s3tc dxt1":Sr,"rgba s3tc dxt1":Er,"rgba s3tc dxt3":Mr,"rgba s3tc dxt5":Tr}),e.webgl_compressed_texture_atc&&Kt(U,{"rgb atc":Cr,"rgba atc explicit alpha":Ar,"rgba atc interpolated alpha":Pr}),e.webgl_compressed_texture_pvrtc&&Kt(U,{"rgb pvrtc 4bppv1":kr,"rgb pvrtc 2bppv1":Ir,"rgba pvrtc 4bppv1":Or,"rgba pvrtc 2bppv1":jr}),e.webgl_compressed_texture_etc1&&(U["rgb etc1"]=Lr);var V=Array.prototype.slice.call(t.getParameter(nr));Object.keys(U).forEach(function(t){var e=U[t];V.indexOf(e)>=0&&(N[t]=e)});var G=Object.keys(N);n.textureFormats=G;var q=[];Object.keys(N).forEach(function(t){var e=N[t];q[e]=t});var H=[];Object.keys(F).forEach(function(t){var e=F[t];H[e]=t});var Y=[];Object.keys(R).forEach(function(t){var e=R[t];Y[e]=t});var X=[];Object.keys(B).forEach(function(t){var e=B[t];X[e]=t});var W=[];Object.keys(D).forEach(function(t){var e=D[t];W[e]=t});var Z=G.reduce(function(t,e){var n=N[e];return n===lr||n===sr||n===lr||n===cr||n===yr||n===_r?t[n]=n:n===fr||e.indexOf("rgba")>=0?t[n]=ar:t[n]=ur,t},{}),K=[],J=[],Q=0,tt={},et=n.maxTextureUnits,nt=Array(et).map(function(){return null});return Kt(T.prototype,{bind:function(){var e=this;e.bindCount+=1;var n=e.unit;if(n<0){for(var r=0;r<et;++r){var i=nt[r];if(i){if(i.bindCount>0)continue;i.unit=-1}nt[r]=e,n=r;break}n>=et&&he.raise("insufficient number of texture units"),a.profile&&o.maxTextureUnits<n+1&&(o.maxTextureUnits=n+1),e.unit=n,t.activeTexture(ui+n),t.bindTexture(e.target,e.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&P(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(tt).forEach(function(e){t+=tt[e].stats.size}),t}),{create2D:k,createCube:I,clear:O,getTexture:function(t){return null},restore:j}}function kt(t,e,n){return Ii[t]*e*n}function It(t,e,n,r,i,o){function a(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function s(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function u(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);he(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;he(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function l(e,n){n&&(n.texture?t.framebufferTexture2D(ji,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(ji,e,Li,n.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=Di,n=null,r=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),he.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,he(e===Di)):"textureCube"===o?(n=i,he(e>=Ri&&e<Ri+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=Li):he.raise("invalid regl object for attachment"),new a(e,n,r)}function h(t,e,n,o,s){if(n){var u=r.create2D({width:t,height:e,format:o,type:s});return u._texture.refCount=0,new a(Di,u,null)}var l=i.create({width:t,height:e,format:o});return l._renderbuffer.refCount=0,new a(Li,null,l)}function f(t){return t&&(t.texture||t.renderbuffer)}function p(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}function d(){this.id=M++,T[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function v(t){t.colorAttachments.forEach(s),s(t.depthAttachment),s(t.stencilAttachment),s(t.depthStencilAttachment)}function g(e){var n=e.framebuffer;he(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,o.framebufferCount--,delete T[e.id]}function m(e){var r;t.bindFramebuffer(ji,e.framebuffer);var i=e.colorAttachments;for(r=0;r<i.length;++r)l(Bi+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(ji,Bi+r,Di,null,0);t.framebufferTexture2D(ji,Ni,Di,null,0),t.framebufferTexture2D(ji,zi,Di,null,0),t.framebufferTexture2D(ji,Fi,Di,null,0),l(zi,e.depthAttachment),l(Fi,e.stencilAttachment),l(Ni,e.depthStencilAttachment);var o=t.checkFramebufferStatus(ji);t.isContextLost()||o===Ui||he.raise("framebuffer configuration not supported, status = "+fo[o]),t.bindFramebuffer(ji,x.next?x.next.framebuffer:null),x.cur=x.next,t.getError()}function y(t,r){function i(t,r){var o;he(x.next!==s,"can not update framebuffer which is currently in use");var a=0,l=0,p=!0,d=!0,g=null,y=!0,_="rgba",b="uint8",M=1,T=null,C=null,A=null,P=!1;if("number"==typeof t)a=0|t,l=0|r||a;else if(t){he.type(t,"object","invalid arguments for framebuffer");var k=t;if("shape"in k){var I=k.shape;he(Array.isArray(I)&&I.length>=2,"invalid shape for framebuffer"),a=I[0],l=I[1]}else"radius"in k&&(a=l=k.radius),"width"in k&&(a=k.width),"height"in k&&(l=k.height);("color"in k||"colors"in k)&&(g=k.color||k.colors,Array.isArray(g)&&he(1===g.length||e.webgl_draw_buffers,"multiple render targets not supported")),g||("colorCount"in k&&(M=0|k.colorCount,he(M>0,"invalid color buffer count")),"colorTexture"in k&&(y=!!k.colorTexture,_="rgba4"),"colorType"in k&&(b=k.colorType,y?(he(e.oes_texture_float||!("float"===b||"float32"===b),"you must enable OES_texture_float in order to use floating point framebuffer objects"),he(e.oes_texture_half_float||!("half float"===b||"float16"===b),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===b||"float16"===b?(he(e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),_="rgba16f"):"float"!==b&&"float32"!==b||(he(e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),_="rgba32f"),he.oneOf(b,E,"invalid color type")),"colorFormat"in k&&(_=k.colorFormat,w.indexOf(_)>=0?y=!0:S.indexOf(_)>=0?y=!1:y?he.oneOf(k.colorFormat,w,"invalid color format for texture"):he.oneOf(k.colorFormat,S,"invalid color format for renderbuffer"))),("depthTexture"in k||"depthStencilTexture"in k)&&(P=!(!k.depthTexture&&!k.depthStencilTexture),he(!P||e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in k&&("boolean"==typeof k.depth?p=k.depth:(T=k.depth,d=!1)),"stencil"in k&&("boolean"==typeof k.stencil?d=k.stencil:(C=k.stencil,p=!1)),"depthStencil"in k&&("boolean"==typeof k.depthStencil?p=d=k.depthStencil:(A=k.depthStencil,p=!1,d=!1))}else a=l=1;var O=null,j=null,L=null,D=null;if(Array.isArray(g))O=g.map(c);else if(g)O=[c(g)];else for(O=new Array(M),o=0;o<M;++o)O[o]=h(a,l,y,_,b);he(e.webgl_draw_buffers||O.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),he(O.length<=n.maxColorAttachments,"too many color attachments, not supported"),a=a||O[0].width,l=l||O[0].height,T?j=c(T):p&&!d&&(j=h(a,l,P,"depth","uint32")),C?L=c(C):d&&!p&&(L=h(a,l,!1,"stencil","uint8")),A?D=c(A):!T&&!C&&d&&p&&(D=h(a,l,P,"depth stencil","depth stencil")),he(!!T+!!C+!!A<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var R=null;for(o=0;o<O.length;++o)if(u(O[o],a,l),he(!O[o]||O[o].texture&&Qi.indexOf(O[o].texture._texture.format)>=0||O[o].renderbuffer&&ho.indexOf(O[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),O[o]&&O[o].texture){var B=$i[O[o].texture._texture.format]*to[O[o].texture._texture.type];null===R?R=B:he(R===B,"all color attachments much have the same number of bits per pixel.")}return u(j,a,l),he(!j||j.texture&&j.texture._texture.format===Ji||j.renderbuffer&&j.renderbuffer._renderbuffer.format===io,"invalid depth attachment for framebuffer object"),u(L,a,l),he(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===oo,"invalid stencil attachment for framebuffer object"),u(D,a,l),he(!D||D.texture&&D.texture._texture.format===ao||D.renderbuffer&&D.renderbuffer._renderbuffer.format===ao,"invalid depth-stencil attachment for framebuffer object"),v(s),s.width=a,s.height=l,s.colorAttachments=O,s.depthAttachment=j,s.stencilAttachment=L,s.depthStencilAttachment=D,i.color=O.map(f),i.depth=f(j),i.stencil=f(L),i.depthStencil=f(D),i.width=s.width,i.height=s.height,m(s),i}function a(t,e){he(x.next!==s,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===s.width&&r===s.height)return i;for(var o=s.colorAttachments,a=0;a<o.length;++a)p(o[a],n,r);return p(s.depthAttachment,n,r),p(s.stencilAttachment,n,r),p(s.depthStencilAttachment,n,r),s.width=i.width=n,s.height=i.height=r,m(s),i}var s=new d;return o.framebufferCount++,i(t,r),Kt(i,{resize:a,_reglType:"framebuffer",_framebuffer:s,destroy:function(){g(s),v(s)},use:function(t){x.setFBO({framebuffer:i},t)}})}function _(t){function i(t){var n;he(a.indexOf(x.next)<0,"can not update framebuffer which is currently in use");var o={color:null},s=0,u=null,l="rgba",c="uint8",h=1;if("number"==typeof t)s=0|t;else if(t){he.type(t,"object","invalid arguments for framebuffer");var f=t;if("shape"in f){var p=f.shape;he(Array.isArray(p)&&p.length>=2,"invalid shape for framebuffer"),he(p[0]===p[1],"cube framebuffer must be square"),s=p[0]}else"radius"in f&&(s=0|f.radius),"width"in f?(s=0|f.width,"height"in f&&he(f.height===s,"must be square")):"height"in f&&(s=0|f.height);("color"in f||"colors"in f)&&(u=f.color||f.colors,Array.isArray(u)&&he(1===u.length||e.webgl_draw_buffers,"multiple render targets not supported")),u||("colorCount"in f&&(h=0|f.colorCount,he(h>0,"invalid color buffer count")),"colorType"in f&&(he.oneOf(f.colorType,E,"invalid color type"),c=f.colorType),"colorFormat"in f&&(l=f.colorFormat,he.oneOf(f.colorFormat,w,"invalid color format for texture"))),"depth"in f&&(o.depth=f.depth),"stencil"in f&&(o.stencil=f.stencil),"depthStencil"in f&&(o.depthStencil=f.depthStencil)}else s=1;var d;if(u)if(Array.isArray(u))for(d=[],n=0;n<u.length;++n)d[n]=u[n];else d=[u];else{d=Array(h);var v={radius:s,format:l,type:c};for(n=0;n<h;++n)d[n]=r.createCube(v)}for(o.color=Array(d.length),n=0;n<d.length;++n){var g=d[n];he("function"==typeof g&&"textureCube"===g._reglType,"invalid cube map"),s=s||g.width,he(g.width===s&&g.height===s,"invalid cube map shape"),o.color[n]={target:Ri,data:d[n]}}for(n=0;n<6;++n){for(var m=0;m<d.length;++m)o.color[m].target=Ri+n;n>0&&(o.depth=a[0].depth,o.stencil=a[0].stencil,o.depthStencil=a[0].depthStencil),a[n]?a[n](o):a[n]=y(o)}return Kt(i,{width:s,height:s,color:d})}function o(t){var e,r=0|t;if(he(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===i.width)return i;var o=i.color;for(e=0;e<o.length;++e)o[e].resize(r);for(e=0;e<6;++e)a[e].resize(r);return i.width=i.height=r,i}var a=Array(6);return i(t),Kt(i,{faces:a,resize:o,_reglType:"framebufferCube",destroy:function(){a.forEach(function(t){t.destroy()})}})}function b(){x.cur=null,x.next=null,x.dirty=!0,hn(T).forEach(function(e){e.framebuffer=t.createFramebuffer(),m(e)})}var x={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],S=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&S.push("srgba"),e.ext_color_buffer_half_float&&S.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&S.push("rgba32f");var E=["uint8"];e.oes_texture_half_float&&E.push("half float","float16"),e.oes_texture_float&&E.push("float","float32");var M=0,T={};return Kt(x,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof d)return e}return null},create:y,createCube:_,clear:function(){hn(T).forEach(g)},restore:b})}function Ot(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=po,this.offset=0,this.stride=0,this.divisor=0}function jt(t,e,n,r){for(var i=n.maxAttributes,o=new Array(i),a=0;a<i;++a)o[a]=new Ot;return{Record:Ot,scope:{},state:o}}function Lt(t,e,n,r){function i(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function o(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function a(n,r,i){var o=n===vo?c:h,a=o[r];if(!a){var s=e.str(r);a=t.createShader(n),t.shaderSource(a,s),t.compileShader(a),he.shaderError(t,a,s,n,i),o[r]=a}return a}function s(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(n,s){var u,l,c=a(vo,n.fragId),h=a(go,n.vertId),f=n.program=t.createProgram();t.attachShader(f,c),t.attachShader(f,h),t.linkProgram(f),he.linkError(t,f,e.str(n.fragId),e.str(n.vertId),s);var p=t.getProgramParameter(f,mo);r.profile&&(n.stats.uniformsCount=p);var d=n.uniforms;for(u=0;u<p;++u)if(l=t.getActiveUniform(f,u))if(l.size>1)for(var v=0;v<l.size;++v){var g=l.name.replace("[0]","["+v+"]");o(d,new i(g,e.id(g),t.getUniformLocation(f,g),l))}else o(d,new i(l.name,e.id(l.name),t.getUniformLocation(f,l.name),l));var m=t.getProgramParameter(f,yo);r.profile&&(n.stats.attributesCount=m);var y=n.attributes;for(u=0;u<m;++u)(l=t.getActiveAttrib(f,u))&&o(y,new i(l.name,e.id(l.name),t.getAttribLocation(f,l.name),l))}function l(){c={},h={};for(var t=0;t<p.length;++t)u(p[t])}var c={},h={},f={},p=[],d=0;return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return p.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},n.getMaxAttributesCount=function(){var t=0;return p.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);hn(c).forEach(e),c={},hn(h).forEach(e),h={},p.forEach(function(e){t.deleteProgram(e.program)}),p.length=0,f={},n.shaderCount=0},program:function(t,e,r){he.command(t>=0,"missing vertex shader",r),he.command(e>=0,"missing fragment shader",r);var i=f[e];i||(i=f[e]={});var o=i[t];return o||(o=new s(e,t),n.shaderCount++,u(o,r),i[t]=o,p.push(o)),o},restore:l,shader:a,frag:-1,vert:-1}}function Dt(t,e,n,r,i,o,a){function s(s){var u;null===e.next?(he(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=bo):(he(null!==e.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=e.next.colorAttachments[0].texture._texture.type,o.oes_texture_float?(he(u===bo||u===wo,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===wo&&he(a.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):he(u===bo,"Reading from a framebuffer is only allowed for the type 'uint8'"));var l=0,c=0,h=r.framebufferWidth,f=r.framebufferHeight,p=null;Zt(s)?p=s:s&&(he.type(s,"object","invalid arguments to regl.read()"),l=0|s.x,c=0|s.y,he(l>=0&&l<r.framebufferWidth,"invalid x offset for regl.read"),he(c>=0&&c<r.framebufferHeight,"invalid y offset for regl.read"),h=0|(s.width||r.framebufferWidth-l),f=0|(s.height||r.framebufferHeight-c),p=s.data||null),p&&(u===bo?he(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===wo&&he(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),he(h>0&&h+l<=r.framebufferWidth,"invalid width for read pixels"),he(f>0&&f+c<=r.framebufferHeight,"invalid height for read pixels"),n();var d=h*f*4;return p||(u===bo?p=new Uint8Array(d):u===wo&&(p=p||new Float32Array(d))),he.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),he(p.byteLength>=d,"data buffer for regl.read() too small"),t.pixelStorei(xo,4),t.readPixels(l,c,h,f,_o,u,p),p}function u(t){var n;return e.setFBO({framebuffer:t.framebuffer},function(){n=s(t)}),n}function l(t){return t&&"framebuffer"in t?u(t):s(t)}return l}function Rt(t){return Array.prototype.slice.call(t)}function Bt(t){return Rt(t).join("")}function zt(){function t(t){for(var e=0;e<u.length;++e)if(u[e]===t)return s[e];var n="g"+a++;return s.push(n),u.push(t),n}function e(){function t(){n.push.apply(n,Rt(arguments))}function e(){var t="v"+a++;return r.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,Rt(arguments)),n.push(";")),t}var n=[],r=[];return Kt(t,{def:e,toString:function(){return Bt([r.length>0?"var "+r.join(",")+";":"",Bt(n)])}})}function n(){function t(t,e){r(t,e,"=",n.def(t,e),";")}var n=e(),r=e(),i=n.toString,o=r.toString;return Kt(function(){n.apply(n,Rt(arguments))},{def:n.def,entry:n,exit:r,save:t,set:function(e,r,i){t(e,r),n(e,r,"=",i,";")},toString:function(){return i()+o()}})}function r(){var t=Bt(arguments),e=n(),r=n(),i=e.toString,o=r.toString;return Kt(e,{then:function(){return e.apply(e,Rt(arguments)),this},else:function(){return r.apply(r,Rt(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Bt(["if(",t,"){",i(),"}",e])}})}function i(t,e){function r(){var t="a"+i.length;return i.push(t),t}var i=[];e=e||0;for(var o=0;o<e;++o)r();var a=n(),s=a.toString;return c[t]=Kt(a,{arg:r,toString:function(){return Bt(["function(",i.join(),"){",s(),"}"])}})}function o(){var t=['"use strict";',l,"return {"];Object.keys(c).forEach(function(e){t.push('"',e,'":',c[e].toString(),",")}),t.push("}");var e=Bt(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,s.concat(e)).apply(null,u)}var a=0,s=[],u=[],l=e(),c={};return{global:l,link:t,block:e,proc:i,scope:n,cond:r,compile:o}}function Ft(t){return Array.isArray(t)||Zt(t)||$(t)}function Nt(t){return t.sort(function(t,e){return t===ia?-1:e===ia?1:t<e?-1:1})}function Ut(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function Vt(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Gt(t){return new Ut(!1,!1,!1,t)}function qt(t,e){var n=t.type;if(n===Co){var r=t.data.length;return new Ut(!0,r>=1,r>=2,e)}if(n===Io){var i=t.data;return new Ut(i.thisDep,i.contextDep,i.propDep,e)}return new Ut(n===ko,n===Po,n===Ao,e)}function Ht(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){function v(t){return t.replace(".","_")}function g(t,e,n){var r=v(t);et.push(t),tt[r]=$[r]=!!n,nt[r]=e}function m(t,e,n){var r=v(t);et.push(t),Array.isArray(n)?($[r]=n.slice(),tt[r]=n.slice()):$[r]=tt[r]=n,rt[r]=e}function y(){var t=zt(),n=t.link,r=t.global;t.id=at++,t.batchId="0";var i=n(it),o=t.shared={props:"a0"};Object.keys(it).forEach(function(t){o[t]=r.def(i,".",t)}),he.optional(function(){t.CHECK=n(he),t.commandStr=he.guessCommand(),t.command=n(t.commandStr),t.assert=function(t,e,r){t("if(!(",e,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},ot.invalidBlendCombinations=ys});var a=t.next={},s=t.current={};Object.keys(rt).forEach(function(t){Array.isArray($[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))});var u=t.constants={};Object.keys(ot).forEach(function(t){u[t]=r.def(JSON.stringify(ot[t]))}),t.invoke=function(e,r){switch(r.type){case Co:var i=["this",o.context,o.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case Ao:return e.def(o.props,r.data);case Po:return e.def(o.context,r.data);case ko:return e.def("this",r.data);case Io:return r.data.append(t,e),r.data.ref}},t.attribCache={};var c={};return t.scopeAttrib=function(t){var r=e.id(t);if(r in c)return c[r];var i=l.scope[r];return i||(i=l.scope[r]=new W),c[r]=n(i)},t}function _(t){var e,n=t.static,r=t.dynamic;if(oa in n){var i=!!n[oa];e=Gt(function(t,e){return i}),e.enable=i}else if(oa in r){var o=r[oa];e=qt(o,function(t,e){return t.invoke(e,o)})}return e}function b(t,e){var n=t.static,r=t.dynamic;if(aa in n){var i=n[aa];return i?(i=s.getFramebuffer(i),he.command(i,"invalid framebuffer object"),Gt(function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+ga,n+".width"),e.set(o,"."+ma,n+".height"),n})):Gt(function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+ga,r+"."+xa),e.set(r,"."+ma,r+"."+wa),"null"})}if(aa in r){var o=r[aa];return qt(o,function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");he.optional(function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")}),e.set(i,".next",a);var s=r.context;return e.set(s,"."+ga,a+"?"+a+".width:"+s+"."+xa),e.set(s,"."+ma,a+"?"+a+".height:"+s+"."+wa),a})}return null}function x(t,e,n){function r(t){if(t in i){var r=i[t];he.commandType(r,"object","invalid "+t,n.commandStr);var a,s,u=!0,l=0|r.x,c=0|r.y;return"width"in r?(a=0|r.width,he.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in r?(s=0|r.height,he.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new Ut(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,function(t,e){var n=t.shared.context,i=a;"width"in r||(i=e.def(n,".",ga,"-",l));var o=s;return"height"in r||(o=e.def(n,".",ma,"-",c)),[l,c,i,o]})}if(t in o){var h=o[t],f=qt(h,function(e,n){var r=e.invoke(n,h);he.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)});var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",ga,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",ma,"-",a,")");return he.optional(function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)}),[o,a,s,u]});return e&&(f.thisDep=f.thisDep||e.thisDep,f.contextDep=f.contextDep||e.contextDep,f.propDep=f.propDep||e.propDep),f}return e?new Ut(e.thisDep,e.contextDep,e.propDep,function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",ga),e.def(n,".",ma)]}):null}var i=t.static,o=t.dynamic,a=r(ia);if(a){var s=a;a=new Ut(a.thisDep,a.contextDep,a.propDep,function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+ya,n[2]),e.set(r,"."+_a,n[3]),n})}return{viewport:a,scissor_box:r(ra)}}function w(t){function n(t){if(t in i){var n=e.id(i[t]);he.optional(function(){c.shader(xs[t],n,he.guessCommand())});var r=Gt(function(){return n});return r.id=n,r}if(t in o){var a=o[t];return qt(a,function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return he.optional(function(){n(e.shared.shader,".shader(",xs[t],",",i,",",e.command,");")}),i})}return null}var r,i=t.static,o=t.dynamic,a=n(ua),s=n(sa),u=null;return Vt(a)&&Vt(s)?(u=c.program(s.id,a.id),r=Gt(function(t,e){return t.link(u)})):r=new Ut(a&&a.thisDep||s&&s.thisDep,a&&a.contextDep||s&&s.contextDep,a&&a.propDep||s&&s.propDep,function(t,e){var n,r=t.shared.shader;n=a?a.append(t,e):e.def(r,".",ua);var i;i=s?s.append(t,e):e.def(r,".",sa);var o=r+".program("+i+","+n;return he.optional(function(){o+=","+t.command}),e.def(o+")")}),{frag:a,vert:s,progVar:r,program:u}}function S(t,e){function n(){if(la in s){var t=s[la];Ft(t)?t=o.getElements(o.create(t,!0)):t&&(t=o.getElements(t),he.command(t,"invalid elements",e.commandStr));var n=Gt(function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null});return n.value=t,n}if(la in u){var r=u[la];return qt(r,function(t,e){var n=t.shared,i=n.isBufferArgs,o=n.elements,a=t.invoke(e,r),s=e.def("null"),u=e.def(i,"(",a,")"),l=t.cond(u).then(s,"=",o,".createStream(",a,");").else(s,"=",o,".getElements(",a,");");return he.optional(function(){t.assert(l.else,"!"+a+"||"+s,"invalid elements")}),e.entry(l),e.exit(t.cond(u).then(o,".destroyStream(",s,");")),t.ELEMENTS=s,s})}return null}function r(){if(ca in s){var t=s[ca];return he.commandParameter(t,Fn,"invalid primitve",e.commandStr),Gt(function(e,n){return Fn[t]})}if(ca in u){var n=u[ca];return qt(n,function(t,e){var r=t.constants.primTypes,i=t.invoke(e,n);return he.optional(function(){t.assert(e,i+" in "+r,"invalid primitive, must be one of "+Object.keys(Fn))}),e.def(r,"[",i,"]")})}return l?Vt(l)?Gt(l.value?function(t,e){return e.def(t.ELEMENTS,".primType")}:function(){return ns}):new Ut(l.thisDep,l.contextDep,l.propDep,function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",ns)}):null}function i(t,n){if(t in s){var r=0|s[t];return he.command(!n||r>=0,"invalid "+t,e.commandStr),Gt(function(t,e){return n&&(t.OFFSET=r),r})}if(t in u){var i=u[t];return qt(i,function(e,r){var o=e.invoke(r,i);return n&&(e.OFFSET=o,he.optional(function(){e.assert(r,o+">=0","invalid "+t)})),o})}return n&&l?Gt(function(t,e){return t.OFFSET="0",0}):null}function a(){if(ha in s){var t=0|s[ha];return he.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),Gt(function(){return t})}if(ha in u){var n=u[ha];return qt(n,function(t,e){var r=t.invoke(e,n);return he.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(l){if(Vt(l)){if(l)return c?new Ut(c.thisDep,c.contextDep,c.propDep,function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return he.optional(function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")}),n}):Gt(function(t,e){return e.def(t.ELEMENTS,".vertCount")});var r=Gt(function(){return-1});return he.optional(function(){r.MISSING=!0}),r}var i=new Ut(l.thisDep||c.thisDep,l.contextDep||c.contextDep,l.propDep||c.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")});return he.optional(function(){i.DYNAMIC=!0}),i}return null}var s=t.static,u=t.dynamic,l=n(),c=i(fa,!0);return{elements:l,primitive:r(),count:a(),instances:i(pa,!1),offset:c}}function E(t,e){var n=t.static,i=t.dynamic,o={};return et.forEach(function(t){function a(e,r){if(t in n){var a=e(n[t]);o[s]=Gt(function(){return a})}else if(t in i){var u=i[t];o[s]=qt(u,function(t,e){return r(t,e,t.invoke(e,u))})}}var s=v(t);switch(t){case Vo:case jo:case Oo:case Jo:case Bo:case na:case Yo:case Wo:case Zo:case No:return a(function(n){return he.commandType(n,"boolean",t,e.commandStr),n},function(e,n,r){return he.optional(function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)}),r});case zo:return a(function(n){return he.commandParameter(n,_s,"invalid "+t,e.commandStr),_s[n]},function(e,n,r){var i=e.constants.compareFuncs;return he.optional(function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(_s))}),n.def(i,"[",r,"]")});case Fo:return a(function(t){return he.command(ft(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t},function(t,e,n){return he.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]});case Ro:return a(function(t){he.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return he.commandParameter(n,ms,s+".srcRGB",e.commandStr),he.commandParameter(r,ms,s+".srcAlpha",e.commandStr),he.commandParameter(i,ms,s+".dstRGB",e.commandStr),he.commandParameter(o,ms,s+".dstAlpha",e.commandStr),he.command(-1===ys.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[ms[n],ms[i],ms[r],ms[o]]},function(e,n,r){function i(i,a){var s=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return he.optional(function(){e.assert(n,s+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(ms))}),s}var o=e.constants.blendFuncs;he.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),s=i("dst","RGB");he.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=n.def(o,"[",a,"]"),l=n.def(o,"[",i("src","Alpha"),"]");return[u,n.def(o,"[",s,"]"),l,n.def(o,"[",i("dst","Alpha"),"]")]});case Do:return a(function(n){return"string"==typeof n?(he.commandParameter(n,K,"invalid "+t,e.commandStr),[K[n],K[n]]):"object"==typeof n?(he.commandParameter(n.rgb,K,t+".rgb",e.commandStr),he.commandParameter(n.alpha,K,t+".alpha",e.commandStr),[K[n.rgb],K[n.alpha]]):void he.commandRaise("invalid blend.equation",e.commandStr)},function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return he.optional(function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(K))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")}),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]});case Lo:return a(function(t){return he.command(ft(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),Z(4,function(e){return+t[e]})},function(t,e,n){return he.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),Z(4,function(t){return e.def("+",n,"[",t,"]")})});case Qo:return a(function(t){return he.commandType(t,"number",s,e.commandStr),0|t},function(t,e,n){return he.optional(function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")}),e.def(n,"|0")});case $o:return a(function(n){he.commandType(n,"object",s,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return he.commandParameter(r,_s,t+".cmp",e.commandStr),he.commandType(i,"number",t+".ref",e.commandStr),he.commandType(o,"number",t+".mask",e.commandStr),[_s[r],i,o]},function(t,e,n){var r=t.constants.compareFuncs;return he.optional(function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",cs),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]});case ta:case ea:return a(function(n){he.commandType(n,"object",s,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return he.commandParameter(r,bs,t+".fail",e.commandStr),he.commandParameter(i,bs,t+".zfail",e.commandStr),he.commandParameter(o,bs,t+".zpass",e.commandStr),[t===ea?is:rs,bs[r],bs[i],bs[o]]},function(e,n,r){function i(i){return he.optional(function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(bs))}),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",cs)}var o=e.constants.stencilOps;return he.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[t===ea?is:rs,i("fail"),i("zfail"),i("zpass")]});case Xo:return a(function(t){he.commandType(t,"object",s,e.commandStr);var n=0|t.factor,r=0|t.units;return he.commandType(n,"number",s+".factor",e.commandStr),he.commandType(r,"number",s+".units",e.commandStr),[n,r]},function(e,n,r){return he.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case Go:return a(function(t){var n=0;return"front"===t?n=rs:"back"===t&&(n=is),he.command(!!n,s,e.commandStr),n},function(t,e,n){return he.optional(function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),e.def(n,'==="front"?',rs,":",is)});case Ho:return a(function(t){return he.command("number"==typeof t&&t>=r.lineWidthDims[0]&&t<=r.lineWidthDims[1],"invalid line width, must be a positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],e.commandStr),t},function(t,e,n){return he.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+r.lineWidthDims[0]+"&&"+n+"<="+r.lineWidthDims[1],"invalid line width")}),n});case qo:return a(function(t){return he.commandParameter(t,ws,s,e.commandStr),ws[t]},function(t,e,n){return he.optional(function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(n+'==="cw"?'+os+":"+as)});case Uo:return a(function(t){return he.command(ft(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map(function(t){return!!t})},function(t,e,n){return he.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),Z(4,function(t){return"!!"+n+"["+t+"]"})});case Ko:return a(function(t){he.command("object"==typeof t&&t,s,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return he.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]},function(t,e,n){return he.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]})}}),o}function M(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach(function(t){var r,o=n[t];if("number"==typeof o||"boolean"==typeof o)r=Gt(function(){return o});else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Gt(function(t){return t.link(o)}):"framebuffer"===a||"framebufferCube"===a?(he.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=Gt(function(t){return t.link(o.color[0])})):he.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else ft(o)?r=Gt(function(e){return e.global.def("[",Z(o.length,function(n){return he.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]}),"]")}):he.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r}),Object.keys(r).forEach(function(t){var e=r[t];i[t]=qt(e,function(t,n){return t.invoke(n,e)})}),i}function T(t,n){var r=t.static,o=t.dynamic,a={};return Object.keys(r).forEach(function(t){var o=r[t],s=e.id(t),u=new W;if(Ft(o))u.state=Mo,u.buffer=i.getBuffer(i.create(o,Ea,!1,!0)),u.type=0;else{var l=i.getBuffer(o);if(l)u.state=Mo,u.buffer=l,u.type=0;else if(he.command("object"==typeof o&&o,"invalid data for attribute "+t,n.commandStr),"constant"in o){var c=o.constant;u.buffer="null",u.state=To,"number"==typeof c?u.x=c:(he.command(ft(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,n.commandStr),So.forEach(function(t,e){e<c.length&&(u[t]=c[e])}))}else{l=Ft(o.buffer)?i.getBuffer(i.create(o.buffer,Ea,!1,!0)):i.getBuffer(o.buffer),he.command(!!l,'missing buffer for attribute "'+t+'"',n.commandStr);var h=0|o.offset;he.command(h>=0,'invalid offset for attribute "'+t+'"',n.commandStr);var f=0|o.stride;he.command(f>=0&&f<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',n.commandStr);var p=0|o.size;he.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',n.commandStr);var d=!!o.normalized,v=0;"type"in o&&(he.commandParameter(o.type,wn,"invalid type for attribute "+t,n.commandStr),v=wn[o.type]);var g=0|o.divisor;"divisor"in o&&(he.command(0===g||J,'cannot specify divisor for attribute "'+t+'", instancing not supported',n.commandStr),he.command(g>=0,'invalid divisor for attribute "'+t+'"',n.commandStr)),he.optional(function(){var e=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach(function(n){he.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",e)})}),u.buffer=l,u.state=Mo,u.size=p,u.normalized=d,u.type=v||l.dtype,u.offset=h,u.stride=f,u.divisor=g}}a[t]=Gt(function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach(function(t){r[t]=u[t]}),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r})}),Object.keys(o).forEach(function(t){function e(e,r){function i(t){r(c[t],"=",o,".",t,"|0;")}var o=e.invoke(r,n),a=e.shared,s=e.constants,u=a.isBufferArgs,l=a.buffer;he.optional(function(){e.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+l+".getBuffer("+o+")||"+l+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')});var c={isStream:r.def(!1)},h=new W;h.state=Mo,Object.keys(h).forEach(function(t){c[t]=r.def(""+h[t])});var f=c.buffer,p=c.type;return r("if(",u,"(",o,")){",c.isStream,"=true;",f,"=",l,".createStream(",Ea,",",o,");",p,"=",f,".dtype;","}else{",f,"=",l,".getBuffer(",o,");","if(",f,"){",p,"=",f,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",To,";","if(typeof "+o+'.constant === "number"){',c[So[0]],"=",o,".constant;",So.slice(1).map(function(t){return c[t]}).join("="),"=0;","}else{",So.map(function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"}).join(""),"}}else{","if(",u,"(",o,".buffer)){",f,"=",l,".createStream(",Ea,",",o,".buffer);","}else{",f,"=",l,".getBuffer(",o,".buffer);","}",p,'="type" in ',o,"?",s.glTypes,"[",o,".type]:",f,".dtype;",c.normalized,"=!!",o,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),r("}}"),r.exit("if(",c.isStream,"){",l,".destroyStream(",f,");","}"),c}var n=o[t];a[t]=qt(n,e)}),a}function C(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach(function(t){var n=e[t];r[t]=Gt(function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)})}),Object.keys(n).forEach(function(t){var e=n[t];r[t]=qt(e,function(t,n){return t.invoke(n,e)})}),r}function A(t,e,n,r,i){function o(t){var e=l[t];e&&(h[t]=e)}var a=t.static,s=t.dynamic;he.optional(function(){function t(t){Object.keys(t).forEach(function(t){he.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',i.commandStr)})}var e=[aa,sa,ua,la,ca,fa,ha,pa,oa].concat(et);t(a),t(s)});var u=b(t,i),l=x(t,u,i),c=S(t,i),h=E(t,i),f=w(t,i);o(ia),o(v(ra));var p=Object.keys(h).length>0,d={framebuffer:u,draw:c,shader:f,state:h,dirty:p};return d.profile=_(t,i),d.uniforms=M(n,i),d.attributes=T(e,i),d.context=C(r,i),d}function P(t,e,n){var r=t.shared,i=r.context,o=t.scope();Object.keys(n).forEach(function(r){e.save(i,"."+r);var a=n[r];o(i,".",r,"=",a.append(t,e),";")}),e(o)}function k(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;Q&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,l=t.constants,c=l.drawBuffer,h=l.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",vs,",",u,".framebuffer);"),Q&&e(i,".drawBuffersWEBGL(",c,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",vs,",null);"),Q&&e(i,".drawBuffersWEBGL(",h,");"),e("}",s,".cur=",u,";"),r||e("}")}function I(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,l=t.cond(s,".dirty");et.forEach(function(e){var r=v(e);if(!(r in n.state)){var c,h;if(r in a){c=a[r],h=o[r];var f=Z($[r].length,function(t){return l.def(c,"[",t,"]")});l(t.cond(f.map(function(t,e){return t+"!=="+h+"["+e+"]"}).join("||")).then(i,".",rt[r],"(",f,");",f.map(function(t,e){return h+"["+e+"]="+t}).join(";"),";"))}else{c=l.def(u,".",r);var p=t.cond(c,"!==",s,".",r);l(p),r in nt?p(t.cond(c).then(i,".enable(",nt[r],");").else(i,".disable(",nt[r],");"),s,".",r,"=",c,";"):p(i,".",rt[r],"(",c,");",s,".",r,"=",c,";")}}}),0===Object.keys(n.state).length&&l(s,".dirty=false;"),e(l)}function O(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;Nt(Object.keys(n)).forEach(function(i){var u=n[i];if(!r||r(u)){var l=u.append(t,e);if(nt[i]){var c=nt[i];Vt(u)?l?e(s,".enable(",c,");"):e(s,".disable(",c,");"):e(t.cond(l).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",i,"=",l,";")}else if(ft(l)){var h=o[i];e(s,".",rt[i],"(",l,");",l.map(function(t,e){return h+"["+e+"]="+t}).join(";"),";")}else e(s,".",rt[i],"(",l,");",a,".",i,"=",l,";")}})}function j(t,e){J&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function L(t,e,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(t){l=e.def(),t(l,"=",o(),";"),"string"==typeof i?t(d,".count+=",i,";"):t(d,".count++;"),p&&(r?(c=e.def(),t(c,"=",g,".getNumPendingQueries();")):t(g,".beginQuery(",d,");"))}function s(t){t(d,".cpuTime+=",o(),"-",l,";"),p&&(r?t(g,".pushScopeStats(",c,",",g,".getNumPendingQueries(),",d,");"):t(g,".endQuery();"))}function u(t){var n=e.def(v,".profile");e(v,".profile=",t,";"),e.exit(v,".profile=",n,";")}var l,c,h,f=t.shared,d=t.stats,v=f.current,g=f.timer,m=n.profile;if(m){if(Vt(m))return void(m.enable?(a(e),s(e.exit),u("true")):u("false"));h=m.append(t,e),u(h)}else h=e.def(v,".profile");var y=t.block();a(y),e("if(",h,"){",y,"}");var _=t.block();s(_),e.exit("if(",h,"){",_,"}")}function D(t,e,n,r,i){function o(t){switch(t){case Na:case qa:case Wa:return 2;case Ua:case Ha:case Za:return 3;case Va:case Ya:case Ka:return 4;default:return 1}}function a(n,r,i){function o(){e("if(!",c,".buffer){",u,".enableVertexAttribArray(",l,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",c,".type!==",o,"||",c,".size!==",n,"||",d.map(function(t){return c+"."+t+"!=="+i[t]}).join("||"),"){",u,".bindBuffer(",Ea,",",f,".buffer);",u,".vertexAttribPointer(",[l,n,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",n,";",d.map(function(t){return c+"."+t+"="+i[t]+";"}).join(""),"}"),J){var a=i.divisor;e("if(",c,".divisor!==",a,"){",t.instancing,".vertexAttribDivisorANGLE(",[l,a],");",c,".divisor=",a,";}")}}function a(){e("if(",c,".buffer){",u,".disableVertexAttribArray(",l,");",c,".buffer=null;","}if(",So.map(function(t,e){return c+"."+t+"!=="+p[e]}).join("||"),"){",u,".vertexAttrib4f(",l,",",p,");",So.map(function(t,e){return c+"."+t+"="+p[e]+";"}).join(""),"}")}var u=s.gl,l=e.def(n,".location"),c=e.def(s.attributes,"[",l,"]"),h=i.state,f=i.buffer,p=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];h===Mo?o():h===To?a():(e("if(",h,"===",Mo,"){"),o(),e("}else{"),a(),e("}"))}var s=t.shared;r.forEach(function(r){var s,u=r.name,l=n.attributes[u];if(l){if(!i(l))return;s=l.append(t,e)}else{if(!i(Ss))return;var c=t.scopeAttrib(u);he.optional(function(){t.assert(e,c+".state","missing attribute "+u)}),s={},Object.keys(new W).forEach(function(t){s[t]=e.def(c,".",t)})}a(t.link(r),o(r.info.type),s)})}function R(t,n,r,i,o){for(var a,s=t.shared,u=s.gl,l=0;l<i.length;++l){var c,h=i[l],f=h.name,p=h.info.type,d=r.uniforms[f],v=t.link(h),g=v+".location";if(d){if(!o(d))continue;if(Vt(d)){var m=d.value;if(he.command(null!==m&&void 0!==m,'missing uniform "'+f+'"',t.commandStr),p===ts||p===es){he.command("function"==typeof m&&(p===ts&&("texture2d"===m._reglType||"framebuffer"===m._reglType)||p===es&&("textureCube"===m._reglType||"framebufferCube"===m._reglType)),"invalid texture for uniform "+f,t.commandStr);var y=t.link(m._texture||m.color[0]._texture);n(u,".uniform1i(",g,",",y+".bind());"),n.exit(y,".unbind();")}else if(p===Ja||p===Qa||p===$a){he.optional(function(){he.command(ft(m),"invalid matrix for uniform "+f,t.commandStr),he.command(p===Ja&&4===m.length||p===Qa&&9===m.length||p===$a&&16===m.length,"invalid length for matrix uniform "+f,t.commandStr)});var _=t.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),b=2;p===Qa?b=3:p===$a&&(b=4),n(u,".uniformMatrix",b,"fv(",g,",false,",_,");")}else{switch(p){case Fa:he.commandType(m,"number","uniform "+f,t.commandStr),a="1f";break;case Na:he.command(ft(m)&&2===m.length,"uniform "+f,t.commandStr),a="2f";break;case Ua:he.command(ft(m)&&3===m.length,"uniform "+f,t.commandStr),a="3f";break;case Va:he.command(ft(m)&&4===m.length,"uniform "+f,t.commandStr),a="4f";break;case Xa:he.commandType(m,"boolean","uniform "+f,t.commandStr),a="1i";break;case Ga:he.commandType(m,"number","uniform "+f,t.commandStr),a="1i";break;case Wa:case qa:he.command(ft(m)&&2===m.length,"uniform "+f,t.commandStr),a="2i";break;case Za:case Ha:he.command(ft(m)&&3===m.length,"uniform "+f,t.commandStr),a="3i";break;case Ka:case Ya:he.command(ft(m)&&4===m.length,"uniform "+f,t.commandStr),a="4i"}n(u,".uniform",a,"(",g,",",ft(m)?Array.prototype.slice.call(m):m,");")}continue}c=d.append(t,n)}else{if(!o(Ss))continue;c=n.def(s.uniforms,"[",e.id(f),"]")}p===ts?n("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):p===es&&n("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),he.optional(function(){function e(e,r){t.assert(n,e,'bad data or missing for uniform "'+f+'".  '+r)}function r(t){e("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function i(n,r){e(s.isArrayLike+"("+c+")&&"+c+".length==="+n,"invalid vector, should have length "+n,t.commandStr)}function o(n){e("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(n===Aa?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(p){case Ga:r("number");break;case qa:i(2,"number");break;case Ha:i(3,"number");break;case Ya:i(4,"number");break;case Fa:r("number");break;case Na:i(2,"number");break;case Ua:i(3,"number");break;case Va:i(4,"number");break;case Xa:r("boolean");break;case Wa:i(2,"boolean");break;case Za:i(3,"boolean");break;case Ka:i(4,"boolean");break;case Ja:i(4,"number");break;case Qa:i(9,"number");break;case $a:i(16,"number");break;case ts:o(Aa);break;case es:o(Pa)}});var x=1;switch(p){case ts:case es:var w=n.def(c,"._texture");n(u,".uniform1i(",g,",",w,".bind());"),n.exit(w,".unbind();");continue;case Ga:case Xa:a="1i";break;case qa:case Wa:a="2i",x=2;break;case Ha:case Za:a="3i",x=3;break;case Ya:case Ka:a="4i",x=4;break;case Fa:a="1f";break;case Na:a="2f",x=2;break;case Ua:a="3f",x=3;break;case Va:a="4f",x=4;break;case Ja:a="Matrix2fv";break;case Qa:a="Matrix3fv";break;case $a:a="Matrix4fv"}if(n(u,".uniform",a,"(",g,","),"M"===a.charAt(0)){var S=Math.pow(p-Ja+2,2),E=t.global.def("new Float32Array(",S,")");n("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",Z(S,function(t){return E+"["+t+"]="+c+"["+t+"]"}),",",E,")")}else n(x>1?Z(x,function(t){return c+"["+t+"]"}):c);n(");")}}function B(t,e,n,r){function i(){var i,o=f.elements,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a)):i=a.def(h,".",la),i&&a("if("+i+")"+c+".bindBuffer("+Ma+","+i+".buffer.buffer);"),i}function o(){var i,o=f.count,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a),he.optional(function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(a,i+">=0","missing vertex count")})):(i=a.def(h,".",ha),he.optional(function(){t.assert(a,i+">=0","missing vertex count")})),i}function a(i){var o=f[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(h,".",i)}function s(){function t(){n(y,".drawElementsInstancedANGLE(",[d,g,_,v+"<<(("+_+"-"+Eo+")>>1)",m],");")}function e(){n(y,".drawArraysInstancedANGLE(",[d,v,g,m],");")}p?b?t():(n("if(",p,"){"),t(),n("}else{"),e(),n("}")):e()}function u(){function t(){n(c+".drawElements("+[d,g,_,v+"<<(("+_+"-"+Eo+")>>1)"]+");")}function e(){n(c+".drawArrays("+[d,v,g]+");")}p?b?t():(n("if(",p,"){"),t(),n("}else{"),e(),n("}")):e()}var l=t.shared,c=l.gl,h=l.draw,f=r.draw,p=i(),d=a(ca),v=a(fa),g=o();if("number"==typeof g){if(0===g)return}else n("if(",g,"){"),n.exit("}");var m,y;J&&(m=a(pa),y=t.instancing);var _=p+".type",b=f.elements&&Vt(f.elements);J&&("number"!=typeof m||m>=0)?"string"==typeof m?(n("if(",m,">0){"),s(),n("}else if(",m,"<0){"),u(),n("}")):s():u()}function z(t,e,n,r,i){var o=y(),a=o.proc("body",i);return he.optional(function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)}),J&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function F(t,e,n,r){j(t,e),D(t,e,n,r.attributes,function(){return!0}),R(t,e,n,r.uniforms,function(){return!0}),B(t,e,e,n)}function N(t,e){var n=t.proc("draw",1);j(t,n),P(t,n,e.context),k(t,n,e.framebuffer),I(t,n,e),O(t,n,e.state),L(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)F(t,n,e,e.shader.program);else{var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(n){return z(F,t,e,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function U(t,e,n,r){function i(){return!0}t.batchId="a1",j(t,e),D(t,e,n,r.attributes,i),R(t,e,n,r.uniforms,i),B(t,e,e,n)}function V(t,e,n,r){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}j(t,e);var a=n.contextDep,s=e.def(),u="a0",l="a1",c=e.def();t.shared.props=c,t.batchId=s;var h=t.scope(),f=t.scope();if(e(h.entry,"for(",s,"=0;",s,"<",l,";++",s,"){",c,"=",u,"[",s,"];",f,"}",h.exit),n.needsContext&&P(t,f,n.context),n.needsFramebuffer&&k(t,f,n.framebuffer),O(t,f,n.state,i),n.profile&&i(n.profile)&&L(t,f,n,!1,!0),r)D(t,h,n,r.attributes,o),D(t,f,n,r.attributes,i),R(t,h,n,r.uniforms,o),R(t,f,n,r.uniforms,i),B(t,h,f,n);else{var p=t.global.def("{}"),d=n.shader.progVar.append(t,f),v=f.def(d,".id"),g=f.def(p,"[",v,"]");f(t.shared.gl,".useProgram(",d,".program);","if(!",g,"){",g,"=",p,"[",v,"]=",t.link(function(e){return z(U,t,n,e,2)}),"(",d,");}",g,".call(this,a0[",s,"],",s,");")}}function G(t,e){function n(t){return t.contextDep&&i||t.propDep}var r=t.proc("batch",2);t.batchId="0",j(t,r);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(P(t,r,e.context),o=!1);var a=e.framebuffer,s=!1;a?(a.propDep?i=s=!0:a.contextDep&&i&&(s=!0),s||k(t,r,a)):k(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),I(t,r,e),O(t,r,e.state,function(t){return!n(t)}),e.profile&&n(e.profile)||L(t,r,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=s;var u=e.shader.progVar;if(u.contextDep&&i||u.propDep)V(t,r,e,null);else{var l=u.append(t,r);if(r(t.shared.gl,".useProgram(",l,".program);"),e.shader.program)V(t,r,e,e.shader.program);else{var c=t.global.def("{}"),h=r.def(l,".id"),f=r.def(c,"[",h,"]");r(t.cond(f).then(f,".call(this,a0,a1);").else(f,"=",c,"[",h,"]=",t.link(function(n){return z(V,t,e,n,2)}),"(",l,");",f,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;")}function q(t,n){function r(e){var r=n.shader[e];r&&i.set(o.shader,"."+e,r.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;P(t,i,n.context),n.framebuffer&&n.framebuffer.append(t,i),Nt(Object.keys(n.state)).forEach(function(e){var r=n.state[e],a=r.append(t,i);ft(a)?a.forEach(function(n,r){i.set(t.next[e],"["+r+"]",n)}):i.set(o.next,"."+e,a)}),L(t,i,n,!0,!0),[la,fa,ha,pa,ca].forEach(function(e){var r=n.draw[e];r&&i.set(o.draw,"."+e,""+r.append(t,i))}),Object.keys(n.uniforms).forEach(function(r){i.set(o.uniforms,"["+e.id(r)+"]",n.uniforms[r].append(t,i))}),Object.keys(n.attributes).forEach(function(e){var r=n.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new W).forEach(function(t){i.set(o,"."+t,r[t])})}),r(sa),r(ua),Object.keys(n.state).length>0&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function H(t){if("object"==typeof t&&!ft(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(de.isDynamic(t[e[n]]))return!0;return!1}}function Y(t,e,n){function r(t,e){a.forEach(function(n){var r=i[n];if(de.isDynamic(r)){var o=t.invoke(e,r);e(c,".",n,"=",o,";")}})}var i=e.static[n];if(i&&H(i)){var o=t.global,a=Object.keys(i),s=!1,u=!1,l=!1,c=t.global.def("{}");a.forEach(function(e){var n=i[e];if(de.isDynamic(n)){"function"==typeof n&&(n=i[e]=de.unbox(n));var r=qt(n,null);s=s||r.thisDep,l=l||r.propDep,u=u||r.contextDep}else{switch(o(c,".",e,"="),typeof n){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}}),e.dynamic[n]=new de.DynamicVariable(Io,{thisDep:s,contextDep:u,propDep:l,ref:c,append:r}),delete e.static[n]}}function X(t,e,n,r,i){var o=y();o.stats=o.link(i),Object.keys(e.static).forEach(function(t){Y(o,e,t)}),Sa.forEach(function(e){Y(o,t,e)});var a=A(t,e,n,r,o);return N(o,a),q(o,a),G(o,a),o.compile()}var W=l.Record,K={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(K.min=ss,K.max=us);var J=n.angle_instanced_arrays,Q=n.webgl_draw_buffers,$={dirty:!0,profile:d.profile},tt={},et=[],nt={},rt={};g(Oo,Oa),g(jo,Ia),m(Lo,"blendColor",[0,0,0,0]),m(Do,"blendEquationSeparate",[ps,ps]),m(Ro,"blendFuncSeparate",[fs,hs,fs,hs]),g(Bo,La,!0),m(zo,"depthFunc",ds),m(Fo,"depthRange",[0,1]),m(No,"depthMask",!0),m(Uo,Uo,[!0,!0,!0,!0]),g(Vo,ka),m(Go,"cullFace",is),m(qo,qo,as),m(Ho,Ho,1),g(Yo,Ra),m(Xo,"polygonOffset",[0,0]),g(Wo,Ba),g(Zo,za),m(Ko,"sampleCoverage",[1,!1]),g(Jo,ja),m(Qo,"stencilMask",-1),m($o,"stencilFunc",[ls,0,-1]),m(ta,"stencilOpSeparate",[rs,cs,cs,cs]),m(ea,"stencilOpSeparate",[is,cs,cs,cs]),g(na,Da),m(ra,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),m(ia,ia,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var it={gl:t,context:f,strings:e,next:tt,current:$,draw:h,elements:o,buffer:i,shader:c,attributes:l.state,uniforms:u,framebuffer:s,extensions:n,timer:p,isBufferArgs:Ft},ot={primTypes:Fn,compareFuncs:_s,blendFuncs:ms,blendEquations:K,stencilOps:bs,glTypes:wn,orientationType:ws};he.optional(function(){it.isArrayLike=ft}),Q&&(ot.backBuffer=[is],ot.drawBuffer=Z(r.maxDrawbuffers,function(t){return 0===t?[0]:Z(t,function(t){return gs+t})}));var at=0;return{next:tt,current:$,procs:function(){var t=y(),e=t.proc("poll"),n=t.proc("refresh"),i=t.block();e(i),n(i);var o=t.shared,a=o.gl,s=o.next,u=o.current;i(u,".dirty=false;"),k(t,e),k(t,n,null,!0);var l;J&&(l=t.link(J));for(var c=0;c<r.maxAttributes;++c){var h=n.def(o.attributes,"[",c,"]"),f=t.cond(h,".buffer");f.then(a,".enableVertexAttribArray(",c,");",a,".bindBuffer(",Ea,",",h,".buffer.buffer);",a,".vertexAttribPointer(",c,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(a,".disableVertexAttribArray(",c,");",a,".vertexAttrib4f(",c,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(f),J&&n(l,".vertexAttribDivisorANGLE(",c,",",h,".divisor);")}return Object.keys(nt).forEach(function(r){var o=nt[r],l=i.def(s,".",r),c=t.block();c("if(",l,"){",a,".enable(",o,")}else{",a,".disable(",o,")}",u,".",r,"=",l,";"),n(c),e("if(",l,"!==",u,".",r,"){",c,"}")}),Object.keys(rt).forEach(function(r){var o,l,c=rt[r],h=$[r],f=t.block();if(f(a,".",c,"("),ft(h)){var p=h.length;o=t.global.def(s,".",r),l=t.global.def(u,".",r),f(Z(p,function(t){return o+"["+t+"]"}),");",Z(p,function(t){return l+"["+t+"]="+o+"["+t+"];"}).join("")),e("if(",Z(p,function(t){return o+"["+t+"]!=="+l+"["+t+"]"}).join("||"),"){",f,"}")}else o=i.def(s,".",r),l=i.def(u,".",r),f(o,");",u,".",r,"=",o,";"),e("if(",o,"!==",l,"){",f,"}");n(f)}),t.compile()}(),compile:X}}function Yt(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Xt(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function Wt(t){function e(){if(0===q.length)return E&&E.update(),void(K=null);K=ve.next(e),f();for(var t=q.length-1;t>=0;--t){var n=q[t];n&&n(A,null,0)}m.flush(),E&&E.update()}function n(){!K&&q.length>0&&(K=ve.next(e))}function r(){K&&(ve.cancel(e),K=null)}function i(t){t.preventDefault(),_=!0,r(),H.forEach(function(t){t()})}function o(t){m.getError(),_=!1,b.restore(),D.restore(),j.restore(),R.restore(),B.restore(),z.restore(),E&&E.restore(),F.procs.refresh(),n(),Y.forEach(function(t){t()})}function a(){q.length=0,r(),G&&(G.removeEventListener(Os,i),G.removeEventListener(js,o)),D.clear(),z.clear(),B.clear(),R.clear(),L.clear(),j.clear(),E&&E.clear(),Z.forEach(function(t){t()})}function s(t){function e(t){function e(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach(function(r){n[t+"."+r]=e[r]})}}var n=Kt({},t);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),n}function n(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=t[r];de.isDynamic(i)?n[r]=de.unbox(i,r):e[r]=i}),{dynamic:n,static:e}}function r(t){for(;d.length<t;)d.push(null);return d}function i(t,e){var n;if(_&&he.raise("context lost"),"function"==typeof t)return p.call(this,null,t,0);if("function"==typeof e){if("number"==typeof t){for(n=0;n<t;++n)p.call(this,null,e,n);return}if(Array.isArray(t)){for(n=0;n<t.length;++n)p.call(this,t[n],e,n);return}return p.call(this,t,e,0)}if("number"==typeof t){if(t>0)return f.call(this,r(0|t),0|t)}else{if(!Array.isArray(t))return h.call(this,t);if(t.length)return f.call(this,t,t.length)}}he(!!t,"invalid args to regl({...})"),he.type(t,"object","invalid args to regl({...})");var o=n(t.context||{}),a=n(t.uniforms||{}),s=n(t.attributes||{}),u=n(e(t)),l={gpuTime:0,cpuTime:0,count:0},c=F.compile(u,s,a,o,l),h=c.draw,f=c.batch,p=c.scope,d=[];return Kt(i,{stats:l})}function u(t,e){var n=0;F.procs.poll();var r=e.color;r&&(m.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=As),"depth"in e&&(m.clearDepth(+e.depth),n|=Ps),"stencil"in e&&(m.clearStencil(0|e.stencil),n|=ks),he(!!n,"called regl.clear with no buffer specified"),m.clear(n)}function l(t){if(he("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)J(Kt({framebuffer:t.framebuffer.faces[e]},t),u);else J(t,u);else u(null,t)}function c(t){function e(){function e(){var t=Xt(q,e);q[t]=q[q.length-1],q.length-=1,q.length<=0&&r()}var n=Xt(q,t);he(n>=0,"cannot cancel a frame twice"),q[n]=e}return he.type(t,"function","regl.frame() callback must be a function"),q.push(t),n(),{cancel:e}}function h(){var t=V.viewport,e=V.scissor_box;t[0]=t[1]=e[0]=e[1]=0,A.viewportWidth=A.framebufferWidth=A.drawingBufferWidth=t[2]=e[2]=m.drawingBufferWidth,A.viewportHeight=A.framebufferHeight=A.drawingBufferHeight=t[3]=e[3]=m.drawingBufferHeight}function f(){A.tick+=1,A.time=d(),h(),F.procs.poll()}function p(){h(),F.procs.refresh(),E&&E.update()}function d(){return(ge()-M)/1e3}function v(t,e){he.type(e,"function","listener callback must be a function");var n;switch(t){case"frame":return c(e);case"lost":n=H;break;case"restore":n=Y;break;case"destroy":n=Z;break;default:he.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}var g=X(t);if(!g)return null;var m=g.gl,y=m.getContextAttributes(),_=m.isContextLost(),b=W(m,g);if(!b)return null;var x=N(),w=Yt(),S=b.extensions,E=Cs(m,S),M=ge(),T=m.drawingBufferWidth,C=m.drawingBufferHeight,A={tick:0,time:0,viewportWidth:T,viewportHeight:C,framebufferWidth:T,framebufferHeight:C,drawingBufferWidth:T,drawingBufferHeight:C,pixelRatio:g.pixelRatio},P={},k={elements:null,primitive:4,count:-1,offset:0,instances:-1},I=cn(m,S),O=jt(m,S,I,x),j=lt(m,w,g,O),L=ct(m,S,j,w),D=Lt(m,x,w,g),R=Pt(m,S,I,function(){F.procs.poll()},A,w,g),B=Oi(m,S,I,w,g),z=It(m,S,I,R,B,w),F=Ht(m,x,S,I,j,L,R,z,P,O,D,k,A,E,g),U=Dt(m,z,F.procs.poll,A,y,S,I),V=F.next,G=m.canvas,q=[],H=[],Y=[],Z=[g.onDestroy],K=null;G&&(G.addEventListener(Os,i,!1),G.addEventListener(js,o,!1));var J=z.setFBO=s({framebuffer:de.define.call(null,Ls,"framebuffer")});p();var Q=Kt(s,{clear:l,prop:de.define.bind(null,Ls),context:de.define.bind(null,Ds),this:de.define.bind(null,Rs),draw:s({}),buffer:function(t){return j.create(t,Is,!1,!1)},elements:function(t){return L.create(t,!1)},texture:R.create2D,cube:R.createCube,renderbuffer:B.create,framebuffer:z.create,framebufferCube:z.createCube,attributes:y,frame:c,on:v,limits:I,hasExtension:function(t){return I.extensions.indexOf(t.toLowerCase())>=0},read:U,destroy:a,_gl:m,_refresh:p,poll:function(){f(),E&&E.update()},now:d,stats:w});return g.onDone(null,Q),Q}var Zt=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},Kt=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},Jt="\n",Qt=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],$t=33071,te=9728,ee=9984,ne=9985,re=9986,ie=9987,oe=5126,ae=32819,se=32820,ue=33635,le=34042,ce={};ce[5120]=ce[5121]=1,ce[5122]=ce[5123]=ce[36193]=ce[ue]=ce[ae]=ce[se]=2,ce[5124]=ce[5125]=ce[oe]=ce[le]=4;var he=Kt(n,{optional:C,raise:e,commandRaise:S,command:E,parameter:i,commandParameter:M,constructor:l,type:a,commandType:T,isTypedArray:o,nni:s,oneOf:u,shaderError:_,linkError:b,callSite:v,saveCommandRef:x,saveDrawInfo:w,framebufferFormat:A,guessCommand:d,texture2D:I,textureCube:O}),fe=0,pe=0,de={DynamicVariable:j,define:B,isDynamic:z,unbox:F,accessor:R},ve={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},ge="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},me=5120,ye=5121,_e=5122,be=5123,xe=5124,we=5125,Se=5126,Ee=Q();Ee.zero=Q();var Me=3408,Te=3410,Ce=3411,Ae=3412,Pe=3413,ke=3414,Ie=3415,Oe=33901,je=33902,Le=3379,De=3386,Re=34921,Be=36347,ze=36348,Fe=35661,Ne=35660,Ue=34930,Ve=36349,Ge=34076,qe=34024,He=7936,Ye=7937,Xe=7938,We=35724,Ze=34047,Ke=36063,Je=34852,Qe=3553,$e=34067,tn=34069,en=33984,nn=6408,rn=5126,on=5121,an=36160,sn=36053,un=36064,ln=16384,cn=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(Ze));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(Je),i=t.getParameter(Ke));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(Qe,a),t.texImage2D(Qe,0,nn,1,1,0,nn,rn,null);var s=t.createFramebuffer();if(t.bindFramebuffer(an,s),t.framebufferTexture2D(an,un,Qe,a,0),t.bindTexture(Qe,null),t.checkFramebufferStatus(an)!==sn)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(ln);var u=Ee.allocType(rn,4);t.readPixels(0,0,1,1,nn,rn,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),Ee.freeType(u)}}var l="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),c=!0;if(!l){var h=t.createTexture(),f=Ee.allocType(on,36);t.activeTexture(en),t.bindTexture($e,h),t.texImage2D(tn,0,nn,3,3,0,nn,on,f),Ee.freeType(f),t.bindTexture($e,null),t.deleteTexture(h),c=!t.getError()}return{colorBits:[t.getParameter(Te),t.getParameter(Ce),t.getParameter(Ae),t.getParameter(Pe)],depthBits:t.getParameter(ke),stencilBits:t.getParameter(Ie),subpixelBits:t.getParameter(Me),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(Oe),lineWidthDims:t.getParameter(je),maxViewportDims:t.getParameter(De),maxCombinedTextureUnits:t.getParameter(Fe),maxCubeMapSize:t.getParameter(Ge),maxRenderbufferSize:t.getParameter(qe),maxTextureUnits:t.getParameter(Ue),maxTextureSize:t.getParameter(Le),maxAttributes:t.getParameter(Re),maxVertexUniforms:t.getParameter(Be),maxVertexTextureUnits:t.getParameter(Ne),maxVaryingVectors:t.getParameter(ze),maxFragmentUniforms:t.getParameter(Ve),glsl:t.getParameter(We),renderer:t.getParameter(Ye),vendor:t.getParameter(He),version:t.getParameter(Xe),readFloat:o,npotTextureCube:c}},hn=function(t){return Object.keys(t).map(function(e){return t[e]})},fn={shape:ot,flatten:it},pn={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},dn=5120,vn=5122,gn=5124,mn=5121,yn=5123,_n=5125,bn=5126,xn=5126,wn={int8:dn,int16:vn,int32:gn,uint8:mn,uint16:yn,uint32:_n,float:bn,float32:xn},Sn=35048,En=35040,Mn={dynamic:Sn,stream:En,static:35044},Tn=fn.flatten,Cn=fn.shape,An=35044,Pn=35040,kn=5121,In=5126,On=[];On[5120]=1,On[5122]=2,On[5124]=4,On[5121]=1,On[5123]=2,On[5125]=4,On[5126]=4;var jn=0,Ln=0,Dn=1,Rn=1,Bn=4,zn=4,Fn={points:jn,point:Ln,lines:Dn,line:Rn,triangles:Bn,triangle:zn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Nn=0,Un=1,Vn=4,Gn=5120,qn=5121,Hn=5122,Yn=5123,Xn=5124,Wn=5125,Zn=34963,Kn=35040,Jn=35044,Qn=new Float32Array(1),$n=new Uint32Array(Qn.buffer),tr=5123,er=function(t){return!(t&t-1||!t)},nr=34467,rr=3553,ir=34067,or=34069,ar=6408,sr=6406,ur=6407,lr=6409,cr=6410,hr=32854,fr=32855,pr=36194,dr=32819,vr=32820,gr=33635,mr=34042,yr=6402,_r=34041,br=35904,xr=35906,wr=36193,Sr=33776,Er=33777,Mr=33778,Tr=33779,Cr=35986,Ar=35987,Pr=34798,kr=35840,Ir=35841,Or=35842,jr=35843,Lr=36196,Dr=5121,Rr=5123,Br=5125,zr=5126,Fr=10242,Nr=10243,Ur=10497,Vr=33071,Gr=33648,qr=10240,Hr=10241,Yr=9728,Xr=9729,Wr=9984,Zr=9985,Kr=9986,Jr=9987,Qr=33170,$r=4352,ti=4353,ei=4354,ni=34046,ri=3317,ii=37440,oi=37441,ai=37443,si=37444,ui=33984,li=[Wr,Kr,Zr,Jr],ci=[0,lr,cr,ur,ar],hi={};hi[lr]=hi[sr]=hi[yr]=1,hi[_r]=hi[cr]=2,hi[ur]=hi[br]=3,hi[ar]=hi[xr]=4;var fi=pt("HTMLCanvasElement"),pi=pt("CanvasRenderingContext2D"),di=pt("ImageBitmap"),vi=pt("HTMLImageElement"),gi=pt("HTMLVideoElement"),mi=Object.keys(pn).concat([fi,pi,di,vi,gi]),yi=[];yi[Dr]=1,yi[zr]=4,yi[wr]=2,yi[Rr]=2,yi[Br]=4;var _i=[];_i[hr]=2,_i[fr]=2,_i[pr]=2,_i[_r]=4,_i[Sr]=.5,_i[Er]=.5,_i[Mr]=1,_i[Tr]=1,_i[Cr]=.5,_i[Ar]=1,_i[Pr]=1,_i[kr]=.5,_i[Ir]=.25,_i[Or]=.5,_i[jr]=.25,_i[Lr]=.5;var bi=36161,xi=32854,wi=32855,Si=36194,Ei=33189,Mi=36168,Ti=34041,Ci=35907,Ai=34836,Pi=34842,ki=34843,Ii=[];Ii[xi]=2,Ii[wi]=2,Ii[Si]=2,Ii[Ei]=2,Ii[Mi]=1,Ii[Ti]=4,Ii[Ci]=4,Ii[Ai]=16,Ii[Pi]=8,Ii[ki]=6;var Oi=function(t,e,n,r,i){function o(t){this.id=h++,this.refCount=1,this.renderbuffer=t,this.format=xi,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function a(e){var n=e.renderbuffer;he(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(bi,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete f[e.id],r.renderbufferCount--}function s(e,a){function s(e,r){var o=0,a=0,u=xi;if("object"==typeof e&&e){var f=e;if("shape"in f){var p=f.shape;he(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),o=0|p[0],a=0|p[1]}else"radius"in f&&(o=a=0|f.radius),"width"in f&&(o=0|f.width),"height"in f&&(a=0|f.height);"format"in f&&(he.parameter(f.format,l,"invalid renderbuffer format"),u=l[f.format])}else"number"==typeof e?(o=0|e,a="number"==typeof r?0|r:o):e?he.raise("invalid arguments to renderbuffer constructor"):o=a=1;if(he(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),o!==h.width||a!==h.height||u!==h.format)return s.width=h.width=o,s.height=h.height=a,h.format=u,t.bindRenderbuffer(bi,h.renderbuffer),t.renderbufferStorage(bi,u,o,a),he(0===t.getError(),"invalid render buffer format"),i.profile&&(h.stats.size=kt(h.format,h.width,h.height)),s.format=c[h.format],s}function u(e,r){var o=0|e,a=0|r||o;return o===h.width&&a===h.height?s:(he(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),s.width=h.width=o,s.height=h.height=a,t.bindRenderbuffer(bi,h.renderbuffer),t.renderbufferStorage(bi,h.format,o,a),he(0===t.getError(),"invalid render buffer format"),i.profile&&(h.stats.size=kt(h.format,h.width,h.height)),s)}var h=new o(t.createRenderbuffer());return f[h.id]=h,r.renderbufferCount++,s(e,a),s.resize=u,s._reglType="renderbuffer",s._renderbuffer=h,i.profile&&(s.stats=h.stats),s.destroy=function(){h.decRef()},s}function u(){hn(f).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(bi,e.renderbuffer),t.renderbufferStorage(bi,e.format,e.width,e.height)}),t.bindRenderbuffer(bi,null)}var l={rgba4:xi,rgb565:Si,"rgb5 a1":wi,depth:Ei,stencil:Mi,"depth stencil":Ti};e.ext_srgb&&(l.srgba=Ci),e.ext_color_buffer_half_float&&(l.rgba16f=Pi,l.rgb16f=ki),e.webgl_color_buffer_float&&(l.rgba32f=Ai);var c=[];Object.keys(l).forEach(function(t){var e=l[t];c[e]=t});var h=0,f={};return o.prototype.decRef=function(){--this.refCount<=0&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(f).forEach(function(e){t+=f[e].stats.size}),t}),{create:s,clear:function(){hn(f).forEach(a)},restore:u}},ji=36160,Li=36161,Di=3553,Ri=34069,Bi=36064,zi=36096,Fi=36128,Ni=33306,Ui=36053,Vi=36054,Gi=36055,qi=36057,Hi=36061,Yi=36193,Xi=5121,Wi=5126,Zi=6407,Ki=6408,Ji=6402,Qi=[Zi,Ki],$i=[];$i[Ki]=4,$i[Zi]=3;var to=[];to[Xi]=1,to[Wi]=4,to[Yi]=2;var eo=32854,no=32855,ro=36194,io=33189,oo=36168,ao=34041,so=35907,uo=34836,lo=34842,co=34843,ho=[eo,no,ro,so,lo,co,uo],fo={};fo[Ui]="complete",fo[Vi]="incomplete attachment",fo[qi]="incomplete dimensions",fo[Gi]="incomplete, missing attachment",fo[Hi]="unsupported";var po=5126,vo=35632,go=35633,mo=35718,yo=35721,_o=6408,bo=5121,xo=3333,wo=5126,So="xyzw".split(""),Eo=5121,Mo=1,To=2,Co=0,Ao=1,Po=2,ko=3,Io=4,Oo="dither",jo="blend.enable",Lo="blend.color",Do="blend.equation",Ro="blend.func",Bo="depth.enable",zo="depth.func",Fo="depth.range",No="depth.mask",Uo="colorMask",Vo="cull.enable",Go="cull.face",qo="frontFace",Ho="lineWidth",Yo="polygonOffset.enable",Xo="polygonOffset.offset",Wo="sample.alpha",Zo="sample.enable",Ko="sample.coverage",Jo="stencil.enable",Qo="stencil.mask",$o="stencil.func",ta="stencil.opFront",ea="stencil.opBack",na="scissor.enable",ra="scissor.box",ia="viewport",oa="profile",aa="framebuffer",sa="vert",ua="frag",la="elements",ca="primitive",ha="count",fa="offset",pa="instances",da="Width",va="Height",ga=aa+da,ma=aa+va,ya=ia+da,_a=ia+va,ba="drawingBuffer",xa=ba+da,wa=ba+va,Sa=[Ro,Do,$o,ta,ea,Ko,ia,ra,Xo],Ea=34962,Ma=34963,Ta=35632,Ca=35633,Aa=3553,Pa=34067,ka=2884,Ia=3042,Oa=3024,ja=2960,La=2929,Da=3089,Ra=32823,Ba=32926,za=32928,Fa=5126,Na=35664,Ua=35665,Va=35666,Ga=5124,qa=35667,Ha=35668,Ya=35669,Xa=35670,Wa=35671,Za=35672,Ka=35673,Ja=35674,Qa=35675,$a=35676,ts=35678,es=35680,ns=4,rs=1028,is=1029,os=2304,as=2305,ss=32775,us=32776,ls=519,cs=7680,hs=0,fs=1,ps=32774,ds=513,vs=36160,gs=36064,ms={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ys=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],_s={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},bs={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},xs={frag:Ta,vert:Ca},ws={cw:os,ccw:as},Ss=new Ut(!1,!1,!1,function(){}),Es=34918,Ms=34919,Ts=35007,Cs=function(t,e){function n(){return h.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function r(t){h.push(t)}function i(t){var r=n();e.ext_disjoint_timer_query.beginQueryEXT(Ts,r),f.push(r),l(f.length-1,f.length,t)}function o(){e.ext_disjoint_timer_query.endQueryEXT(Ts)}function a(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function s(){return p.pop()||new a}function u(t){p.push(t)}function l(t,e,n){var r=s();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,d.push(r)}function c(){var t,n,i=f.length;if(0!==i){g.length=Math.max(g.length,i+1),v.length=Math.max(v.length,i+1),v[0]=0,g[0]=0;var o=0;for(t=0,n=0;n<f.length;++n){var a=f[n];e.ext_disjoint_timer_query.getQueryObjectEXT(a,Ms)?(o+=e.ext_disjoint_timer_query.getQueryObjectEXT(a,Es),r(a)):f[t++]=a,v[n+1]=o,g[n+1]=t}for(f.length=t,t=0,n=0;n<d.length;++n){var s=d[n],l=s.startQueryIndex,c=s.endQueryIndex;s.sum+=v[c]-v[l];var h=g[l],p=g[c];p===h?(s.stats.gpuTime+=s.sum/1e6,u(s)):(s.startQueryIndex=h,s.endQueryIndex=p,d[t++]=s)}d.length=t}}if(!e.ext_disjoint_timer_query)return null;var h=[],f=[],p=[],d=[],v=[],g=[];return{beginQuery:i,endQuery:o,pushScopeStats:l,update:c,getNumPendingQueries:function(){return f.length},clear:function(){h.push.apply(h,f);for(var t=0;t<h.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(h[t]);f.length=0,h.length=0},restore:function(){f.length=0,h.length=0}}},As=16384,Ps=256,ks=1024,Is=34962,Os="webglcontextlost",js="webglcontextrestored",Ls=1,Ds=2,Rs=3;return Wt})},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return v[d]=r,p(d),d++}function i(t){delete v[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(g)setTimeout(a,0,t);else{var e=v[t];if(e){g=!0;try{o(e)}finally{i(t),g=!1}}}}function s(){p=function(t){e.nextTick(function(){a(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function l(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),p=function(n){t.postMessage(e+n,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},p=function(e){t.port2.postMessage(e)}}function h(){var t=m.documentElement;p=function(e){var n=m.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function f(){p=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var p,d=1,v={},g=!1,m=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?s():u()?l():t.MessageChannel?c():m&&"onreadystatechange"in m.createElement("script")?h():f(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(46),n(61))},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(1248),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(46))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t){function r(t,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,t,r.depth)}function i(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function o(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function s(t,n,r){if(t.customInspect&&n&&M(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return y(i)||(i=s(t,i,r)),i}var o=u(t,n);if(o)return o;var d=Object.keys(n),v=a(d);if(t.showHidden&&(d=Object.getOwnPropertyNames(n)),E(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return l(n);if(0===d.length){if(M(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return l(n)}var m="",_=!1,b=["{","}"];if(p(n)&&(_=!0,b=["[","]"]),M(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(x(n)&&(m=" "+RegExp.prototype.toString.call(n)),S(n)&&(m=" "+Date.prototype.toUTCString.call(n)),E(n)&&(m=" "+l(n)),0===d.length&&(!_||0==n.length))return b[0]+m+b[1];if(r<0)return x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var w;return w=_?c(t,n,r,v,d):d.map(function(e){return h(t,n,r,v,e,_)}),t.seen.pop(),f(w,m,b)}function u(t,e){if(b(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)k(e,String(a))?o.push(h(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}function h(t,e,n,r,i,o){var a,u,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?u=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(u=t.stylize("[Setter]","special")),k(r,i)||(a="["+i+"]"),u||(t.seen.indexOf(l.value)<0?(u=v(n)?s(t,l.value,null):s(t,l.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function f(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function b(t){return void 0===t}function x(t){return w(t)&&"[object RegExp]"===C(t)}function w(t){return"object"==typeof t&&null!==t}function S(t){return w(t)&&"[object Date]"===C(t)}function E(t){return w(t)&&("[object Error]"===C(t)||t instanceof Error)}function M(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function C(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),B[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function I(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function O(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(I,e,a)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,j(e)),n}var j=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},L=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(L,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];n<o;s=i[++n])v(s)||!w(s)?a+=" "+s:a+=" "+r(s);return a},e.deprecate=function(n,r){function i(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var D,R={};e.debuglog=function(r){if(b(D)&&(D=n.i({NODE_ENV:"production",PUBLIC_URL:"."}).NODE_DEBUG||""),r=r.toUpperCase(),!R[r])if(new RegExp("\\b"+r+"\\b","i").test(D)){var i=t.pid;R[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,i,t)}}else R[r]=function(){};return R[r]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=m,e.isString=y,e.isSymbol=_,e.isUndefined=b,e.isRegExp=x,e.isObject=w,e.isDate=S,e.isError=E,e.isFunction=M,e.isPrimitive=T,e.isBuffer=n(1251);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(1250),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var z="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(t,r){t?n(t):e(r)});try{t.apply(this,i)}catch(t){n(t)}return r}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(z&&t[z]){var e=t[z];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,z,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),z&&Object.defineProperty(e,z,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,j(t))},e.promisify.custom=z,e.callbackify=O}).call(e,n(61))},function(t,e,n){"use strict";n(157),n(120),n(114)},function(t,e,n){"use strict";var r=n(121);n.d(e,"a",function(){return r.a});n(437),n(1255),n(1253),n(120)},function(t,e,n){"use strict";n(121),n(157)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(205),i=n(91),o=n(92),a=n(157),s=n(120),u=n(145),l=n.i(a.a)(),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.width,o=e.height,s=e.viewMatrix,c=void 0===s?l:s,h=e.projectionMatrix,f=void 0===h?l:h;n.i(i.a)(this,t),this.width=r||1,this.height=o||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=c,this.projectionMatrix=f;var p=n.i(a.a)();u.multiply(p,p,this.projectionMatrix),u.multiply(p,p,this.viewMatrix),this.viewProjectionMatrix=p;var d=n.i(a.a)();u.scale(d,d,[this.width/2,-this.height/2,1]),u.translate(d,d,[1,-1,0]),u.multiply(d,d,this.viewProjectionMatrix);var v=u.invert(n.i(a.a)(),d);if(!v)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=v,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return n.i(o.a)(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&u.equals(e.projectionMatrix,this.projectionMatrix)&&u.equals(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.topLeft,o=void 0===i||i,a=this.projectPosition(t),u=n.i(s.i)(a,this.pixelProjectionMatrix),l=n.i(r.a)(u,2),c=l[0],h=l[1],f=o?h:this.height-h;return 2===t.length?[c,f]:[c,f,u[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.topLeft,o=void 0===i||i,a=e.targetZ,u=n.i(r.a)(t,3),l=u[0],c=u[1],h=u[2],f=o?c:this.height-c,p=a&&a*this.pixelsPerMeter,d=n.i(s.h)([l,f,h],this.pixelUnprojectionMatrix,p),v=this.unprojectPosition(d),g=n.i(r.a)(v,3),m=g[0],y=g[1],_=g[2];return Number.isFinite(h)?[m,y,_]:Number.isFinite(a)?[m,y,a]:[m,y]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),i=n.i(r.a)(e,2);return[i[0],i[1],(t[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),i=n.i(r.a)(e,2);return[i[0],i[1],(t[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}}]),t}()},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function l(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&_(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return x.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];g.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=g,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new g(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){n(439),t.exports=n(438)}]);
//# sourceMappingURL=main.4437ebe5.js.map